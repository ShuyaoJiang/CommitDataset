[+++ b/src/main/java/rx/internal/operators/OperatorWindowWithSize.java, +, +import rx.Subscription;, +import rx.functions.Action0;, +import rx.subscriptions.Subscriptions;, +        BufferUntilSubscriber<T> window;, +        Subscription parentSubscription = this;, +            /**, +             * See https://github.com/ReactiveX/RxJava/issues/1546, +             * We cannot compose through a Subscription because unsubscribing, +             * applies to the outer, not the inner., +             */, +            /*, +             * Add unsubscribe hook to child to get unsubscribe on outer (unsubscribing on next window, not on the inner window itself), +             */, +            child.add(Subscriptions.create(new Action0() {, +, +                @Override, +                public void call() {, +                    // if no window we unsubscribe up otherwise wait until window ends, +                    if(window == null) {, +                        parentSubscription.unsubscribe();, +                    }, +                }, +                , +            }));, +            if (window == null) {, +                window = BufferUntilSubscriber.create();, +                child.onNext(window);                , +            window.onNext(t);, +            if (++count % size == 0) {, +                window.onCompleted();, +                window = null;, +                if (child.isUnsubscribed()) {, +                    parentSubscription.unsubscribe();, +                    return;, +            }, +            if (window != null) {, +                window.onError(e);, +            if (window != null) {, +                window.onCompleted();]