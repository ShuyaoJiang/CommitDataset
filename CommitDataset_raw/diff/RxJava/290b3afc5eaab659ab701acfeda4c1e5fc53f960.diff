[+++ b/rxjava-core/src/main/java/rx/util/InterruptibleBlockingQueue.java, +/**, + * Single-producer-single-consumer queue (only thread-safe for 1 producer thread with 1 consumer thread)., + * , + * This supports an interrupt() being called externally rather than needing to interrupt the thread. This allows, + * unsubscribe behavior when this queue is being used., + * , + * @param <E>, + */, +    public int size(), +    {, +        int size;, +        do, +        {, +            final long currentHead = head.get();, +            final long currentTail = tail.get();, +            size = (int) (currentTail - currentHead);, +        } while (size > buffer.length);, +, +        return size;, +    }, +]