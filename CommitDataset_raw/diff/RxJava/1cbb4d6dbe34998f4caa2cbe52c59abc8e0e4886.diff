[+++ b/gradle/convention.gradle, +        classifier 'sources', +        extension 'jar', +        classifier 'javadoc', +        extension 'jar', +    configurations.archives {, +        extendsFrom configurations.sources, +        extendsFrom configurations.javadoc, +    }, +, +    // When outputing to an Ivy repo, we want to use the proper type field, +    gradle.taskGraph.whenReady {, +        def isNotMaven = !it.hasTask(project.uploadMavenCentral), +        if (isNotMaven) {, +            def artifacts = project.configurations.sources.artifacts, +            def sourceArtifact = artifacts.iterator().next(), +            sourceArtifact.type = 'sources', +        }, +    }, +            // Weird Gradle quirk where type will be used for the extension, but only for sources, +            type 'jar']