[+++ b/src/main/java/rx/internal/operators/OnSubscribeRange.java, +            if (requested == Long.MAX_VALUE) {, +            if (n == Long.MAX_VALUE && REQUESTED_UPDATER.compareAndSet(this, 0, Long.MAX_VALUE)) {, +++ b/src/main/java/rx/internal/operators/OnSubscribeRange.java, +            if (requested == Long.MAX_VALUE) {, +            if (n == Long.MAX_VALUE && REQUESTED_UPDATER.compareAndSet(this, 0, Long.MAX_VALUE)) {, +++ b/src/main/java/rx/subjects/AsyncSubject.java, +++ b/src/main/java/rx/internal/operators/OnSubscribeRange.java, +            if (requested == Long.MAX_VALUE) {, +            if (n == Long.MAX_VALUE && REQUESTED_UPDATER.compareAndSet(this, 0, Long.MAX_VALUE)) {, +++ b/src/main/java/rx/subjects/AsyncSubject.java, +++ b/src/main/java/rx/subjects/BehaviorSubject.java, +++ b/src/main/java/rx/internal/operators/OnSubscribeRange.java, +            if (requested == Long.MAX_VALUE) {, +            if (n == Long.MAX_VALUE && REQUESTED_UPDATER.compareAndSet(this, 0, Long.MAX_VALUE)) {, +++ b/src/main/java/rx/subjects/AsyncSubject.java, +++ b/src/main/java/rx/subjects/BehaviorSubject.java, +++ b/src/main/java/rx/subjects/PublishSubject.java, +++ b/src/main/java/rx/internal/operators/OnSubscribeRange.java, +            if (requested == Long.MAX_VALUE) {, +            if (n == Long.MAX_VALUE && REQUESTED_UPDATER.compareAndSet(this, 0, Long.MAX_VALUE)) {, +++ b/src/main/java/rx/subjects/AsyncSubject.java, +++ b/src/main/java/rx/subjects/BehaviorSubject.java, +++ b/src/main/java/rx/subjects/PublishSubject.java, +++ b/src/main/java/rx/subjects/ReplaySubject.java, +                if (s < a.length - 1) {, +    /** An empty array to trigger getValues() to return a new array. */, +    private static final Object[] EMPTY_ARRAY = new Object[0];, +    /**, +     * @return returns a snapshot of the currently buffered non-terminal events., +     */, +    @SuppressWarnings("unchecked"), +    public Object[] getValues() {, +        return state.toArray((T[])EMPTY_ARRAY);, +++ b/src/main/java/rx/internal/operators/OnSubscribeRange.java, +            if (requested == Long.MAX_VALUE) {, +            if (n == Long.MAX_VALUE && REQUESTED_UPDATER.compareAndSet(this, 0, Long.MAX_VALUE)) {, +++ b/src/main/java/rx/subjects/AsyncSubject.java, +++ b/src/main/java/rx/subjects/BehaviorSubject.java, +++ b/src/main/java/rx/subjects/PublishSubject.java, +++ b/src/main/java/rx/subjects/ReplaySubject.java, +                if (s < a.length - 1) {, +    /** An empty array to trigger getValues() to return a new array. */, +    private static final Object[] EMPTY_ARRAY = new Object[0];, +    /**, +     * @return returns a snapshot of the currently buffered non-terminal events., +     */, +    @SuppressWarnings("unchecked"), +    public Object[] getValues() {, +        return state.toArray((T[])EMPTY_ARRAY);, +++ b/src/main/java/rx/subjects/SerializedSubject.java, +++ b/src/main/java/rx/internal/operators/OnSubscribeRange.java, +            if (requested == Long.MAX_VALUE) {, +            if (n == Long.MAX_VALUE && REQUESTED_UPDATER.compareAndSet(this, 0, Long.MAX_VALUE)) {, +++ b/src/main/java/rx/subjects/AsyncSubject.java, +++ b/src/main/java/rx/subjects/BehaviorSubject.java, +++ b/src/main/java/rx/subjects/PublishSubject.java, +++ b/src/main/java/rx/subjects/ReplaySubject.java, +                if (s < a.length - 1) {, +    /** An empty array to trigger getValues() to return a new array. */, +    private static final Object[] EMPTY_ARRAY = new Object[0];, +    /**, +     * @return returns a snapshot of the currently buffered non-terminal events., +     */, +    @SuppressWarnings("unchecked"), +    public Object[] getValues() {, +        return state.toArray((T[])EMPTY_ARRAY);, +++ b/src/main/java/rx/subjects/SerializedSubject.java, +++ b/src/main/java/rx/subjects/Subject.java, +++ b/src/main/java/rx/internal/operators/OnSubscribeRange.java, +            if (requested == Long.MAX_VALUE) {, +            if (n == Long.MAX_VALUE && REQUESTED_UPDATER.compareAndSet(this, 0, Long.MAX_VALUE)) {, +++ b/src/main/java/rx/subjects/AsyncSubject.java, +++ b/src/main/java/rx/subjects/BehaviorSubject.java, +++ b/src/main/java/rx/subjects/PublishSubject.java, +++ b/src/main/java/rx/subjects/ReplaySubject.java, +                if (s < a.length - 1) {, +    /** An empty array to trigger getValues() to return a new array. */, +    private static final Object[] EMPTY_ARRAY = new Object[0];, +    /**, +     * @return returns a snapshot of the currently buffered non-terminal events., +     */, +    @SuppressWarnings("unchecked"), +    public Object[] getValues() {, +        return state.toArray((T[])EMPTY_ARRAY);, +++ b/src/main/java/rx/subjects/SerializedSubject.java, +++ b/src/main/java/rx/subjects/Subject.java, +++ b/src/test/java/rx/subjects/SerializedSubjectTest.java]