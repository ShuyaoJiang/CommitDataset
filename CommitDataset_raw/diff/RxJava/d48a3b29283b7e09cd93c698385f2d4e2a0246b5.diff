[+++ b/build.gradle, +    apply plugin: 'shadow', +    task perfJar(type: Jar, dependsOn: perfClasses) {, +        from sourceSets.perf.output + sourceSets.main.output, +    }, +, +    artifacts {, +        perfRuntime perfJar, +    }, +    , +    shadow {, +        classifier = "benchmarks", +        includeDependenciesFor = ["runtime", "perfRuntime"], +, +        transformer(com.github.jengelman.gradle.plugins.shadow.transformers.ManifestResourceTransformer) {, +            mainClass = "org.openjdk.jmh.Main", +        }, +    }, +, +    shadowJar.dependsOn perfJar, +++ b/build.gradle, +    apply plugin: 'shadow', +    task perfJar(type: Jar, dependsOn: perfClasses) {, +        from sourceSets.perf.output + sourceSets.main.output, +    }, +, +    artifacts {, +        perfRuntime perfJar, +    }, +    , +    shadow {, +        classifier = "benchmarks", +        includeDependenciesFor = ["runtime", "perfRuntime"], +, +        transformer(com.github.jengelman.gradle.plugins.shadow.transformers.ManifestResourceTransformer) {, +            mainClass = "org.openjdk.jmh.Main", +        }, +    }, +, +    shadowJar.dependsOn perfJar, +++ b/gradle/buildscript.gradle, +    maven {, +        //FIXME: waiting for https://github.com/johnrengelman/shadow/pull/38 to merge, +        name 'Shadow', +        url 'http://dl.bintray.com/content/gvsmirnov/gradle-plugins', +    }, +    classpath 'com.github.jengelman.gradle.plugins:shadow:0.8.1']