[+++ b/src/main/java/rx/internal/operators/OnSubscribeRedo.java, +                long c = BackpressureUtils.getAndAddRequest(consumerCapacity, n);, +++ b/src/main/java/rx/internal/operators/OnSubscribeRedo.java, +                long c = BackpressureUtils.getAndAddRequest(consumerCapacity, n);, +++ b/src/test/java/rx/internal/operators/OperatorRepeatTest.java, +import static org.mockito.Mockito.*;, +import java.util.Arrays;, +import rx.observers.TestSubscriber;, +    , +    /** Issue #2587. */, +    @Test, +    public void testRepeatAndDistinctUnbounded() {, +        Observable<Integer> src = Observable.from(Arrays.asList(1, 2, 3, 4, 5)), +                .take(3), +                .repeat(3), +                .distinct();, +        , +        TestSubscriber<Integer> ts = new TestSubscriber<Integer>();, +        , +        src.subscribe(ts);, +        , +        ts.assertNoErrors();, +        ts.assertTerminalEvent();, +        ts.assertReceivedOnNext(Arrays.asList(1, 2, 3));, +    }]