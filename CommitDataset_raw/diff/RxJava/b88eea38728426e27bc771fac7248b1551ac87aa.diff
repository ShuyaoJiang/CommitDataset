[+++ b/rxjava-core/src/main/java/rx/operators/OperationDistinctUntilChanged.java, +        final Comparator<String> COMPARE_LENGTH = new Comparator<String>() {, +            @Override, +            public int compare(String s1, String s2) {, +                return s1.length() - s2.length();, +            }, +        };, +        , +        , +        @Test, +        public void testDistinctUntilChangedWithComparator() {, +            Observable<String> src = from("a", "b", "c", "aa", "bb", "c", "ddd");, +            create(distinctUntilChanged(src, COMPARE_LENGTH)).subscribe(w);, +            InOrder inOrder = inOrder(w); , +            inOrder.verify(w, times(1)).onNext("a");, +            inOrder.verify(w, times(1)).onNext("aa");, +            inOrder.verify(w, times(1)).onNext("c");, +            inOrder.verify(w, times(1)).onNext("ddd");, +            inOrder.verify(w, times(1)).onCompleted();, +            inOrder.verify(w, never()).onNext(anyString());, +            verify(w, never()).onError(any(Throwable.class));, +        }]