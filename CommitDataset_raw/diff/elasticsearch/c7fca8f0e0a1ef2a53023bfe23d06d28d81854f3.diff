[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/TransportFacetModule.java, +import org.elasticsearch.search.facet.terms.strings.InternalStringTermsFacet;, +        InternalFacet.Streams.registerStream(InternalStringTermsFacet.STREAM, InternalStringTermsFacet.TYPE);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/TransportFacetModule.java, +import org.elasticsearch.search.facet.terms.strings.InternalStringTermsFacet;, +        InternalFacet.Streams.registerStream(InternalStringTermsFacet.STREAM, InternalStringTermsFacet.TYPE);, +++ /dev/null, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/TransportFacetModule.java, +import org.elasticsearch.search.facet.terms.strings.InternalStringTermsFacet;, +        InternalFacet.Streams.registerStream(InternalStringTermsFacet.STREAM, InternalStringTermsFacet.TYPE);, +++ /dev/null, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/terms/InternalTermsFacet.java, +public interface InternalTermsFacet extends TermsFacet {, +    Facet reduce(String name, List<Facet> facets);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/TransportFacetModule.java, +import org.elasticsearch.search.facet.terms.strings.InternalStringTermsFacet;, +        InternalFacet.Streams.registerStream(InternalStringTermsFacet.STREAM, InternalStringTermsFacet.TYPE);, +++ /dev/null, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/terms/InternalTermsFacet.java, +public interface InternalTermsFacet extends TermsFacet {, +    Facet reduce(String name, List<Facet> facets);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/terms/TermsFacet.java, +    public interface Entry extends Comparable<Entry> {, +, +        String term();, +, +        String getTerm();, +, +        int count();, +, +        int getCount();, +    }, +, +                return o1.compareTo(o2);, +    List<? extends TermsFacet.Entry> entries();, +    List<? extends TermsFacet.Entry> getEntries();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/TransportFacetModule.java, +import org.elasticsearch.search.facet.terms.strings.InternalStringTermsFacet;, +        InternalFacet.Streams.registerStream(InternalStringTermsFacet.STREAM, InternalStringTermsFacet.TYPE);, +++ /dev/null, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/terms/InternalTermsFacet.java, +public interface InternalTermsFacet extends TermsFacet {, +    Facet reduce(String name, List<Facet> facets);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/terms/TermsFacet.java, +    public interface Entry extends Comparable<Entry> {, +, +        String term();, +, +        String getTerm();, +, +        int count();, +, +        int getCount();, +    }, +, +                return o1.compareTo(o2);, +    List<? extends TermsFacet.Entry> entries();, +    List<? extends TermsFacet.Entry> getEntries();, +++ /dev/null, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/TransportFacetModule.java, +import org.elasticsearch.search.facet.terms.strings.InternalStringTermsFacet;, +        InternalFacet.Streams.registerStream(InternalStringTermsFacet.STREAM, InternalStringTermsFacet.TYPE);, +++ /dev/null, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/terms/InternalTermsFacet.java, +public interface InternalTermsFacet extends TermsFacet {, +    Facet reduce(String name, List<Facet> facets);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/terms/TermsFacet.java, +    public interface Entry extends Comparable<Entry> {, +, +        String term();, +, +        String getTerm();, +, +        int count();, +, +        int getCount();, +    }, +, +                return o1.compareTo(o2);, +    List<? extends TermsFacet.Entry> entries();, +    List<? extends TermsFacet.Entry> getEntries();, +++ /dev/null, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/terms/TermsFacetProcessor.java, +import org.elasticsearch.search.facet.terms.index.IndexNameFacetCollector;, +import org.elasticsearch.search.facet.terms.strings.FieldsTermsStringFacetCollector;, +import org.elasticsearch.search.facet.terms.strings.InternalStringTermsFacet;, +import org.elasticsearch.search.facet.terms.strings.ScriptTermsStringFieldFacetCollector;, +import org.elasticsearch.search.facet.terms.strings.TermsStringFacetCollector;, +        InternalFacet.Streams.registerStream(InternalStringTermsFacet.STREAM, InternalStringTermsFacet.TYPE);, +            return new FieldsTermsStringFacetCollector(facetName, fieldsNames, size, comparatorType, context, excluded, pattern, scriptLang, script, params);, +            return new ScriptTermsStringFieldFacetCollector(facetName, size, comparatorType, context, excluded, pattern, scriptLang, script, params);, +        return new TermsStringFacetCollector(facetName, field, size, comparatorType, context, excluded, pattern, scriptLang, script, params);, +        return first.reduce(name, facets);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/TransportFacetModule.java, +import org.elasticsearch.search.facet.terms.strings.InternalStringTermsFacet;, +        InternalFacet.Streams.registerStream(InternalStringTermsFacet.STREAM, InternalStringTermsFacet.TYPE);, +++ /dev/null, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/terms/InternalTermsFacet.java, +public interface InternalTermsFacet extends TermsFacet {, +    Facet reduce(String name, List<Facet> facets);]