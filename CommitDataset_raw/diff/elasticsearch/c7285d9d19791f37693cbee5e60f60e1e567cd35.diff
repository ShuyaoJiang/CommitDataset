[+++ b/core/src/main/java/org/elasticsearch/transport/netty/NettyTransport.java, +    class ScheduledPing implements Runnable {, +        public void run() {, +++ b/core/src/main/java/org/elasticsearch/transport/netty/NettyTransport.java, +    class ScheduledPing implements Runnable {, +        public void run() {, +++ b/core/src/test/java/org/elasticsearch/cluster/ClusterServiceTests.java, +                    throw new RuntimeException(e);, +                throw new RuntimeException(t);, +        timedOut.await();, +        final CountDownLatch allProcessed = new CountDownLatch(1);, +        clusterService1.submitStateUpdateTask("test3", new ClusterStateUpdateTask() {, +            @Override, +            public void onFailure(String source, Throwable t) {, +                throw new RuntimeException(t);, +            }, +, +            @Override, +            public ClusterState execute(ClusterState currentState) {, +                allProcessed.countDown();, +                return currentState;, +            }, +, +        });, +        allProcessed.await(); // executed another task to double check that execute on the timed out update task is not called...]