[+++ b/core/src/test/java/org/elasticsearch/action/bulk/BulkShardRequestTests.java, +        int count = between(2, 100);, +        final ShardId shardId = new ShardId(index, "ignored", 0);, +        BulkShardRequest r = new BulkShardRequest(shardId, RefreshPolicy.NONE, new BulkItemRequest[count]);, +        assertEquals("BulkShardRequest [" + shardId + "] containing [" + count + "] requests", r.toString());, +        r = new BulkShardRequest(shardId, RefreshPolicy.IMMEDIATE, new BulkItemRequest[count]);, +        assertEquals("BulkShardRequest [" + shardId + "] containing [" + count + "] requests and a refresh", r.toString());, +        r = new BulkShardRequest(shardId, RefreshPolicy.WAIT_UNTIL, new BulkItemRequest[count]);, +        assertEquals("BulkShardRequest [" + shardId + "] containing [" + count + "] requests blocking until refresh", r.toString());]