[+++ b/src/main/java/org/elasticsearch/alerts/AlertsStore.java, +                    loadAlerts(alertIndexMetaData.numberOfShards());, +    private void loadAlerts(int numPrimaryShards) {, +        if (refreshResponse.getSuccessfulShards() < numPrimaryShards) {, +            throw new ElasticsearchException("Not all required shards have been refreshed");, +                .setPreference("_primary"), +++ b/src/main/java/org/elasticsearch/alerts/AlertsStore.java, +                    loadAlerts(alertIndexMetaData.numberOfShards());, +    private void loadAlerts(int numPrimaryShards) {, +        if (refreshResponse.getSuccessfulShards() < numPrimaryShards) {, +            throw new ElasticsearchException("Not all required shards have been refreshed");, +                .setPreference("_primary"), +++ b/src/main/java/org/elasticsearch/alerts/actions/AlertActionManager.java, +        int numPrimaryShards = 0;, +                } else {, +                    numPrimaryShards += indexMetaData.numberOfShards();, +            loadQueue(numPrimaryShards);, +    private void loadQueue(int numPrimaryShards) {, +        if (refreshResponse.getSuccessfulShards() < numPrimaryShards) {, +                .setPreference("_primary")]