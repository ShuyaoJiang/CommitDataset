[+++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/job/process/DataStreamDiagnostics.java, +        if (movingBucketHistogram.isEmpty() == false) {, +    }, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/job/process/DataStreamDiagnostics.java, +        if (movingBucketHistogram.isEmpty() == false) {, +    }, +++ b/plugin/src/test/java/org/elasticsearch/xpack/ml/job/process/DataStreamDiagnosticsTests.java, +    public void testFlushAfterZeroRecords() {, +        DataStreamDiagnostics d = new DataStreamDiagnostics(job);, +        d.flush();, +        assertEquals(0, d.getBucketCount());, +    }, +]