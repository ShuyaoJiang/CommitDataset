[+++ b/src/main/java/org/elasticsearch/common/regex/Regex.java, +            } else if (nextIndex == 1) {, +                // Double wildcard "**" - skipping the first "*", +                return simpleMatch(pattern.substring(1), str);, +++ b/src/main/java/org/elasticsearch/common/regex/Regex.java, +            } else if (nextIndex == 1) {, +                // Double wildcard "**" - skipping the first "*", +                return simpleMatch(pattern.substring(1), str);, +++ b/src/test/java/org/elasticsearch/common/regex/RegexTests.java, +, +, +    @Test(timeout = 1000), +    public void testDoubleWildcardMatch() {, +        assertTrue(Regex.simpleMatch("ddd", "ddd"));, +        assertTrue(Regex.simpleMatch("d*d*d", "dadd"));, +        assertTrue(Regex.simpleMatch("**ddd", "dddd"));, +        assertFalse(Regex.simpleMatch("**ddd", "fff"));, +        assertTrue(Regex.simpleMatch("fff*ddd", "fffabcddd"));, +        assertTrue(Regex.simpleMatch("fff**ddd", "fffabcddd"));, +        assertFalse(Regex.simpleMatch("fff**ddd", "fffabcdd"));, +        assertTrue(Regex.simpleMatch("fff*******ddd", "fffabcddd"));, +        assertFalse(Regex.simpleMatch("fff******ddd", "fffabcdd"));, +    }, +]