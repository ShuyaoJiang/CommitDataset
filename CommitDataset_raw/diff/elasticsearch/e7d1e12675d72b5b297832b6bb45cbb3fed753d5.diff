[+++ b/modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/JsonProcessor.java, +import java.io.InputStream;, +        try (InputStream stream = bytesRef.streamInput();, +             XContentParser parser = JsonXContent.jsonXContent, +                .createParser(NamedXContentRegistry.EMPTY, DeprecationHandler.THROW_UNSUPPORTED_OPERATION, stream)) {, +++ b/modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/JsonProcessor.java, +import java.io.InputStream;, +        try (InputStream stream = bytesRef.streamInput();, +             XContentParser parser = JsonXContent.jsonXContent, +                .createParser(NamedXContentRegistry.EMPTY, DeprecationHandler.THROW_UNSUPPORTED_OPERATION, stream)) {, +++ b/modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ScriptProcessor.java, +import java.io.InputStream;, +            try (XContentBuilder builder = XContentBuilder.builder(JsonXContent.jsonXContent).map(config);, +                 InputStream stream = builder.bytes().streamInput();, +                     LoggingDeprecationHandler.INSTANCE, stream)) {, +}, +++ b/modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/JsonProcessor.java, +import java.io.InputStream;, +        try (InputStream stream = bytesRef.streamInput();, +             XContentParser parser = JsonXContent.jsonXContent, +                .createParser(NamedXContentRegistry.EMPTY, DeprecationHandler.THROW_UNSUPPORTED_OPERATION, stream)) {, +++ b/modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ScriptProcessor.java, +import java.io.InputStream;, +            try (XContentBuilder builder = XContentBuilder.builder(JsonXContent.jsonXContent).map(config);, +                 InputStream stream = builder.bytes().streamInput();, +                     LoggingDeprecationHandler.INSTANCE, stream)) {, +}, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestReindexAction.java, +import java.io.InputStream;, +            try (InputStream stream = builder.bytes().streamInput();, +                 XContentParser innerParser = parser.contentType().xContent(), +                     .createParser(parser.getXContentRegistry(), parser.getDeprecationHandler(), stream)) {, +++ b/modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/JsonProcessor.java, +import java.io.InputStream;, +        try (InputStream stream = bytesRef.streamInput();, +             XContentParser parser = JsonXContent.jsonXContent, +                .createParser(NamedXContentRegistry.EMPTY, DeprecationHandler.THROW_UNSUPPORTED_OPERATION, stream)) {, +++ b/modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ScriptProcessor.java, +import java.io.InputStream;, +            try (XContentBuilder builder = XContentBuilder.builder(JsonXContent.jsonXContent).map(config);, +                 InputStream stream = builder.bytes().streamInput();, +                     LoggingDeprecationHandler.INSTANCE, stream)) {, +}, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestReindexAction.java, +import java.io.InputStream;, +            try (InputStream stream = builder.bytes().streamInput();, +                 XContentParser innerParser = parser.contentType().xContent(), +                     .createParser(parser.getXContentRegistry(), parser.getDeprecationHandler(), stream)) {, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportReindexAction.java, +import java.io.InputStream;, +                try (InputStream stream = doc.getSource().streamInput();, +                     XContentParser parser = sourceXContentType.xContent(), +                         .createParser(NamedXContentRegistry.EMPTY, DeprecationHandler.THROW_UNSUPPORTED_OPERATION, stream);, +++ b/modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/JsonProcessor.java, +import java.io.InputStream;, +        try (InputStream stream = bytesRef.streamInput();, +             XContentParser parser = JsonXContent.jsonXContent, +                .createParser(NamedXContentRegistry.EMPTY, DeprecationHandler.THROW_UNSUPPORTED_OPERATION, stream)) {, +++ b/modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ScriptProcessor.java, +import java.io.InputStream;, +            try (XContentBuilder builder = XContentBuilder.builder(JsonXContent.jsonXContent).map(config);, +                 InputStream stream = builder.bytes().streamInput();, +                     LoggingDeprecationHandler.INSTANCE, stream)) {, +}, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestReindexAction.java, +import java.io.InputStream;, +            try (InputStream stream = builder.bytes().streamInput();, +                 XContentParser innerParser = parser.contentType().xContent(), +                     .createParser(parser.getXContentRegistry(), parser.getDeprecationHandler(), stream)) {, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportReindexAction.java, +import java.io.InputStream;, +                try (InputStream stream = doc.getSource().streamInput();, +                     XContentParser parser = sourceXContentType.xContent(), +                         .createParser(NamedXContentRegistry.EMPTY, DeprecationHandler.THROW_UNSUPPORTED_OPERATION, stream);, +++ b/server/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingRequest.java, +import java.io.InputStream;, +            try (InputStream stream = new BytesArray(source).streamInput()) {, +                builder.rawValue(stream, XContentType.JSON);, +            }, +++ b/modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/JsonProcessor.java, +import java.io.InputStream;, +        try (InputStream stream = bytesRef.streamInput();, +             XContentParser parser = JsonXContent.jsonXContent, +                .createParser(NamedXContentRegistry.EMPTY, DeprecationHandler.THROW_UNSUPPORTED_OPERATION, stream)) {, +++ b/modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/ScriptProcessor.java, +import java.io.InputStream;, +            try (XContentBuilder builder = XContentBuilder.builder(JsonXContent.jsonXContent).map(config);, +                 InputStream stream = builder.bytes().streamInput();, +                     LoggingDeprecationHandler.INSTANCE, stream)) {, +}, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestReindexAction.java, +import java.io.InputStream;, +            try (InputStream stream = builder.bytes().streamInput();, +                 XContentParser innerParser = parser.contentType().xContent(), +                     .createParser(parser.getXContentRegistry(), parser.getDeprecationHandler(), stream)) {, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportReindexAction.java, +import java.io.InputStream;, +                try (InputStream stream = doc.getSource().streamInput();, +                     XContentParser parser = sourceXContentType.xContent(), +                         .createParser(NamedXContentRegistry.EMPTY, DeprecationHandler.THROW_UNSUPPORTED_OPERATION, stream);]