[+++ b/core/src/main/java/org/elasticsearch/rest/action/admin/indices/settings/RestGetSettingsAction.java, +import org.elasticsearch.common.settings.IndexScopeSettings;, +    private final IndexScopeSettings indexScopeSettings;, +, +    public RestGetSettingsAction(Settings settings, RestController controller, Client client, IndexScopeSettings indexScopeSettings) {, +        this.indexScopeSettings = indexScopeSettings;, +        final boolean renderDefaults = request.paramAsBoolean("defaults", false);, +                    builder.startObject("settings");, +                    if (renderDefaults) {, +                        builder.startObject("defaults");, +                        indexScopeSettings.diff(cursor.value, settings).toXContent(builder, request);, +                        builder.endObject();, +                    }, +++ b/core/src/main/java/org/elasticsearch/rest/action/admin/indices/settings/RestGetSettingsAction.java, +import org.elasticsearch.common.settings.IndexScopeSettings;, +    private final IndexScopeSettings indexScopeSettings;, +, +    public RestGetSettingsAction(Settings settings, RestController controller, Client client, IndexScopeSettings indexScopeSettings) {, +        this.indexScopeSettings = indexScopeSettings;, +        final boolean renderDefaults = request.paramAsBoolean("defaults", false);, +                    builder.startObject("settings");, +                    if (renderDefaults) {, +                        builder.startObject("defaults");, +                        indexScopeSettings.diff(cursor.value, settings).toXContent(builder, request);, +                        builder.endObject();, +                    }, +++ b/rest-api-spec/src/main/resources/rest-api-spec/api/cluster.get_settings.json, +        },, +        "defaults": {, +          "type": "boolean",, +          "description": "Whether to return all default clusters setting.",, +          "default": false, +++ b/core/src/main/java/org/elasticsearch/rest/action/admin/indices/settings/RestGetSettingsAction.java, +import org.elasticsearch.common.settings.IndexScopeSettings;, +    private final IndexScopeSettings indexScopeSettings;, +, +    public RestGetSettingsAction(Settings settings, RestController controller, Client client, IndexScopeSettings indexScopeSettings) {, +        this.indexScopeSettings = indexScopeSettings;, +        final boolean renderDefaults = request.paramAsBoolean("defaults", false);, +                    builder.startObject("settings");, +                    if (renderDefaults) {, +                        builder.startObject("defaults");, +                        indexScopeSettings.diff(cursor.value, settings).toXContent(builder, request);, +                        builder.endObject();, +                    }, +++ b/rest-api-spec/src/main/resources/rest-api-spec/api/cluster.get_settings.json, +        },, +        "defaults": {, +          "type": "boolean",, +          "description": "Whether to return all default clusters setting.",, +          "default": false, +++ b/rest-api-spec/src/main/resources/rest-api-spec/api/indices.get_settings.json, +        },, +        "defaults": {, +          "type": "boolean",, +          "description": "Whether to return all default setting for each of the indices.",, +          "default": false, +++ b/core/src/main/java/org/elasticsearch/rest/action/admin/indices/settings/RestGetSettingsAction.java, +import org.elasticsearch.common.settings.IndexScopeSettings;, +    private final IndexScopeSettings indexScopeSettings;, +, +    public RestGetSettingsAction(Settings settings, RestController controller, Client client, IndexScopeSettings indexScopeSettings) {, +        this.indexScopeSettings = indexScopeSettings;, +        final boolean renderDefaults = request.paramAsBoolean("defaults", false);, +                    builder.startObject("settings");, +                    if (renderDefaults) {, +                        builder.startObject("defaults");, +                        indexScopeSettings.diff(cursor.value, settings).toXContent(builder, request);, +                        builder.endObject();, +                    }, +++ b/rest-api-spec/src/main/resources/rest-api-spec/api/cluster.get_settings.json, +        },, +        "defaults": {, +          "type": "boolean",, +          "description": "Whether to return all default clusters setting.",, +          "default": false, +++ b/rest-api-spec/src/main/resources/rest-api-spec/api/indices.get_settings.json, +        },, +        "defaults": {, +          "type": "boolean",, +          "description": "Whether to return all default setting for each of the indices.",, +          "default": false, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/indices.put_settings/11_reset.yaml, +setup:, +  - do:, +      indices.create:, +        index: test-index, +        body:, +          settings:, +            index:, +              refresh_interval: "10s", +, +---, +"Test reset index settings":, +  - do:, +      indices.get_settings:, +        index: test-index, +        flat_settings: true, +, +  - match:]