[+++ b/rest-api-spec/src/main/resources/rest-api-spec/test/cat.shards/10_basic.yml, +  - skip:, +      version: " - 7.0.99", +      reason:  external refresh stats were added in 7.1.0, +                    refresh.external_total           .+   \n, +                    refresh.external_time            .+   \n, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/cat.shards/10_basic.yml, +  - skip:, +      version: " - 7.0.99", +      reason:  external refresh stats were added in 7.1.0, +                    refresh.external_total           .+   \n, +                    refresh.external_time            .+   \n, +++ b/server/src/main/java/org/elasticsearch/index/refresh/RefreshStats.java, +import org.elasticsearch.Version;, +    private long externalTotal;, +, +    private long externalTotalTimeInMillis;, +, +        if (in.getVersion().onOrAfter(Version.V_7_1_0)) {, +            externalTotal = in.readVLong();, +            externalTotalTimeInMillis = in.readVLong();, +        }, +    @Override, +    public void writeTo(StreamOutput out) throws IOException {, +        out.writeVLong(total);, +        out.writeVLong(totalTimeInMillis);, +        if (out.getVersion().onOrAfter(Version.V_7_1_0)) {, +            out.writeVLong(externalTotal);, +            out.writeVLong(externalTotalTimeInMillis);, +        }, +        out.writeVInt(listeners);, +    }, +, +    public RefreshStats(long total, long totalTimeInMillis, long externalTotal, long externalTotalTimeInMillis, int listeners) {, +        this.externalTotal = externalTotal;, +        this.externalTotalTimeInMillis = externalTotalTimeInMillis;, +        this.externalTotal += refreshStats.externalTotal;, +        this.externalTotalTimeInMillis += refreshStats.externalTotalTimeInMillis;, +    /*, +     * The total number of external refresh executed., +     */, +    public long getExternalTotal() { return this.externalTotal; }, +, +     * The total time spent executing refreshes (in milliseconds)., +     * The total time spent executing external refreshes (in milliseconds)., +     */, +    public long getExternalTotalTimeInMillis() {, +        return this.externalTotalTimeInMillis;, +    }, +, +    /**, +     * The total time refreshes have been executed., +     * The total time external refreshes have been executed., +     */, +    public TimeValue getExternalTotalTime() {, +        return new TimeValue(externalTotalTimeInMillis);, +    }, +    /**, +        builder.field("external_total", externalTotal);, +        builder.humanReadableField("external_total_time_in_millis", "external_total_time", getExternalTotalTime());, +                && externalTotal == rhs.externalTotal, +                && externalTotalTimeInMillis == rhs.externalTotalTimeInMillis, +        return Objects.hash(total, totalTimeInMillis, externalTotal, externalTotalTimeInMillis, listeners);, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/cat.shards/10_basic.yml, +  - skip:, +      version: " - 7.0.99", +      reason:  external refresh stats were added in 7.1.0, +                    refresh.external_total           .+   \n, +                    refresh.external_time            .+   \n, +++ b/server/src/main/java/org/elasticsearch/index/refresh/RefreshStats.java, +import org.elasticsearch.Version;, +    private long externalTotal;, +, +    private long externalTotalTimeInMillis;, +, +        if (in.getVersion().onOrAfter(Version.V_7_1_0)) {, +            externalTotal = in.readVLong();, +            externalTotalTimeInMillis = in.readVLong();, +        }, +    @Override, +    public void writeTo(StreamOutput out) throws IOException {, +        out.writeVLong(total);, +        out.writeVLong(totalTimeInMillis);, +        if (out.getVersion().onOrAfter(Version.V_7_1_0)) {, +            out.writeVLong(externalTotal);, +            out.writeVLong(externalTotalTimeInMillis);, +        }, +        out.writeVInt(listeners);, +    }, +, +    public RefreshStats(long total, long totalTimeInMillis, long externalTotal, long externalTotalTimeInMillis, int listeners) {, +        this.externalTotal = externalTotal;, +        this.externalTotalTimeInMillis = externalTotalTimeInMillis;, +        this.externalTotal += refreshStats.externalTotal;, +        this.externalTotalTimeInMillis += refreshStats.externalTotalTimeInMillis;, +    /*, +     * The total number of external refresh executed., +     */, +    public long getExternalTotal() { return this.externalTotal; }, +]