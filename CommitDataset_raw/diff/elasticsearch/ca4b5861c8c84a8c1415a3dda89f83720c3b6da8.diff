[+++ b/x-pack/plugin/security/src/test/java/org/elasticsearch/xpack/security/authz/store/CompositeRolesStoreTests.java, +        final NativePrivilegeStore nativePrivilegeStore = mock(NativePrivilegeStore.class);, +        doAnswer((invocationOnMock) -> {, +            ActionListener<Collection<ApplicationPrivilegeDescriptor>> callback = null;, +            callback = (ActionListener<Collection<ApplicationPrivilegeDescriptor>>) invocationOnMock.getArguments()[2];, +            callback.onResponse(Collections.emptyList());, +            return null;, +        }).when(nativePrivilegeStore).getPrivileges(isA(Set.class), isA(Set.class), any(ActionListener.class));, +                        nativePrivilegeStore, Collections.emptyList(), new ThreadContext(SECURITY_ENABLED_SETTINGS),, +            verify(nativePrivilegeStore).getPrivileges(isA(Set.class),isA(Set.class), any(ActionListener.class));, +        verifyNoMoreInteractions(fileRolesStore, reservedRolesStore, nativeRolesStore, nativePrivilegeStore);]