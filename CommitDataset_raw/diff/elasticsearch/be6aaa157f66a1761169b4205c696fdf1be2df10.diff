[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/translog/fs/FsSnapshot.java, +                // restore the position to before we read the opSize, +                position -= 4;, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/translog/fs/FsSnapshot.java, +                // restore the position to before we read the opSize, +                position -= 4;, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/translog/fs/FsTranslog.java, +                operationCounter.incrementAndGet();, +                newSnapshot.seekForward(fsSnapshot.position());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/translog/fs/FsSnapshot.java, +                // restore the position to before we read the opSize, +                position -= 4;, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/translog/fs/FsTranslog.java, +                operationCounter.incrementAndGet();, +                newSnapshot.seekForward(fsSnapshot.position());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/translog/memory/MemoryTranslog.java, +            newSnapshot.seekForward(memorySnapshot.position());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/translog/fs/FsSnapshot.java, +                // restore the position to before we read the opSize, +                position -= 4;, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/translog/fs/FsTranslog.java, +                operationCounter.incrementAndGet();, +                newSnapshot.seekForward(fsSnapshot.position());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/translog/memory/MemoryTranslog.java, +            newSnapshot.seekForward(memorySnapshot.position());, +++ b/modules/elasticsearch/src/test/java/org/elasticsearch/index/translog/AbstractSimpleTranslogTests.java, +        // we use the translogSize to also navigate to the last position on this snapshot, +        // so snapshot(Snapshot) will work properly, +        assertThat(snapshot1, translogSize(1));]