[+++ b/core/src/main/java/org/elasticsearch/index/engine/InternalEngine.java, +        final Translog.TranslogGeneration generation = loadTranslogIdFromCommit(writer);, +, +        if (createNew == false) {, +            // We expect that this shard already exists, so it must already have an existing translog else something is badly wrong!, +            if (generation == null) {, +                throw new IllegalStateException("no translog generation present in commit data but translog is expected to exist");, +            }, +            if (generation != null && generation.translogUUID == null) {, +                throw new IndexFormatTooOldException("trasnlog", "translog has no generation nor a UUID - this might be an index from a previous version consider upgrading to N-1 first");, +            }, +        }, +    private Translog.TranslogGeneration loadTranslogIdFromCommit(IndexWriter writer) throws IOException {]