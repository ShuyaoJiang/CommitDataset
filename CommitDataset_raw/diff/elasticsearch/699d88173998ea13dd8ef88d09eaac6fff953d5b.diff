[+++ b/server/src/test/java/org/elasticsearch/action/admin/indices/exists/IndicesExistsIT.java, +import org.elasticsearch.cluster.coordination.ClusterBootstrapService;, +import java.util.List;, +import java.util.stream.Collectors;, +import static org.elasticsearch.node.Node.NODE_MASTER_SETTING;, +import static org.elasticsearch.node.Node.NODE_NAME_SETTING;, +    @Override, +    protected List<Settings> addExtraClusterBootstrapSettings(List<Settings> allNodesSettings) {, +        final List<String> masterNodeNames, +            = allNodesSettings.stream().filter(NODE_MASTER_SETTING::get).map(NODE_NAME_SETTING::get).collect(Collectors.toList());, +        return allNodesSettings.stream().map(s -> Settings.builder().put(s), +            .putList(ClusterBootstrapService.INITIAL_MASTER_NODES_SETTING.getKey(), masterNodeNames).build()).collect(Collectors.toList());, +    }, +, +            .put(ElectMasterService.DISCOVERY_ZEN_MINIMUM_MASTER_NODES_SETTING.getKey(), Integer.MAX_VALUE).build();]