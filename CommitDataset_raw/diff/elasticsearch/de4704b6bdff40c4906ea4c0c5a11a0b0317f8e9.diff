[+++ b/server/src/main/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolver.java, +                IndexNotFoundException infe;, +                if (indexExpressions.length == 1) {, +                    if (indexExpressions[0].equals(MetaData.ALL)) {, +                        infe = new IndexNotFoundException("no indices exist", (String)null);, +                    } else {, +                        infe = new IndexNotFoundException((String)null);, +                    }, +                } else {, +                    infe = new IndexNotFoundException((String)null);, +                }, +                    IndexNotFoundException infe;, +                    if (expression.equals(MetaData.ALL)) {, +                        infe = new IndexNotFoundException("no indices exist", expression);, +                    } else {, +                        infe = new IndexNotFoundException(expression);  , +                    }, +++ b/server/src/main/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolver.java, +                IndexNotFoundException infe;, +                if (indexExpressions.length == 1) {, +                    if (indexExpressions[0].equals(MetaData.ALL)) {, +                        infe = new IndexNotFoundException("no indices exist", (String)null);, +                    } else {, +                        infe = new IndexNotFoundException((String)null);, +                    }, +                } else {, +                    infe = new IndexNotFoundException((String)null);, +                }, +                    IndexNotFoundException infe;, +                    if (expression.equals(MetaData.ALL)) {, +                        infe = new IndexNotFoundException("no indices exist", expression);, +                    } else {, +                        infe = new IndexNotFoundException(expression);  , +                    }, +++ b/server/src/test/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolverTests.java, +    public void testConcreteIndicesNoIndicesErrorMessage() {, +        MetaData.Builder mdBuilder = MetaData.builder();, +        ClusterState state = ClusterState.builder(new ClusterName("_name")).metaData(mdBuilder).build();, +        IndexNameExpressionResolver.Context context = new IndexNameExpressionResolver.Context(state, , +            IndicesOptions.fromOptions(false, false, true, true));, +        IndexNotFoundException infe = expectThrows(IndexNotFoundException.class,, +                () -> indexNameExpressionResolver.concreteIndices(context, new String[]{}));, +        assertThat(infe.getMessage(), is("no such index [null] and no indices exist"));, +    }, +, +    public void testConcreteIndicesNoIndicesErrorMessageNoExpand() {, +        MetaData.Builder mdBuilder = MetaData.builder();, +        ClusterState state = ClusterState.builder(new ClusterName("_name")).metaData(mdBuilder).build();, +        IndexNameExpressionResolver.Context context = new IndexNameExpressionResolver.Context(state, , +            IndicesOptions.fromOptions(false, false, false, false));, +        IndexNotFoundException infe = expectThrows(IndexNotFoundException.class,, +                () -> indexNameExpressionResolver.concreteIndices(context, new String[]{}));, +        assertThat(infe.getMessage(), is("no such index [_all] and no indices exist"));, +    }, +++ b/server/src/main/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolver.java, +                IndexNotFoundException infe;, +                if (indexExpressions.length == 1) {, +                    if (indexExpressions[0].equals(MetaData.ALL)) {, +                        infe = new IndexNotFoundException("no indices exist", (String)null);, +                    } else {, +                        infe = new IndexNotFoundException((String)null);, +                    }, +                } else {, +                    infe = new IndexNotFoundException((String)null);, +                }, +                    IndexNotFoundException infe;, +                    if (expression.equals(MetaData.ALL)) {, +                        infe = new IndexNotFoundException("no indices exist", expression);, +                    } else {, +                        infe = new IndexNotFoundException(expression);  , +                    }, +++ b/server/src/test/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolverTests.java, +    public void testConcreteIndicesNoIndicesErrorMessage() {, +        MetaData.Builder mdBuilder = MetaData.builder();, +        ClusterState state = ClusterState.builder(new ClusterName("_name")).metaData(mdBuilder).build();, +        IndexNameExpressionResolver.Context context = new IndexNameExpressionResolver.Context(state, , +            IndicesOptions.fromOptions(false, false, true, true));, +        IndexNotFoundException infe = expectThrows(IndexNotFoundException.class,, +                () -> indexNameExpressionResolver.concreteIndices(context, new String[]{}));, +        assertThat(infe.getMessage(), is("no such index [null] and no indices exist"));, +    }, +, +    public void testConcreteIndicesNoIndicesErrorMessageNoExpand() {, +        MetaData.Builder mdBuilder = MetaData.builder();, +        ClusterState state = ClusterState.builder(new ClusterName("_name")).metaData(mdBuilder).build();, +        IndexNameExpressionResolver.Context context = new IndexNameExpressionResolver.Context(state, , +            IndicesOptions.fromOptions(false, false, false, false));, +        IndexNotFoundException infe = expectThrows(IndexNotFoundException.class,, +                () -> indexNameExpressionResolver.concreteIndices(context, new String[]{}));, +        assertThat(infe.getMessage(), is("no such index [_all] and no indices exist"));, +    }, +++ b/server/src/test/java/org/elasticsearch/validate/SimpleValidateQueryIT.java, +            assertThat(e.getMessage(), is("no such index [null] and no indices exist"));]