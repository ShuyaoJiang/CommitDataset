[+++ b/src/main/java/org/elasticsearch/action/deletebyquery/DeleteByQueryRequest.java, +import org.elasticsearch.common.*;, +    BytesHolder querySource() {, +        if (querySourceUnsafe) {, +        return new BytesHolder(querySource, querySourceOffset, querySourceLength);, +        BytesHolder bytes = in.readBytesReference();, +        querySource = bytes.bytes();, +        querySourceOffset = bytes.offset();, +        querySourceLength = bytes.length();, +        out.writeBytesHolder(querySource, querySourceOffset, querySourceLength);, +++ b/src/main/java/org/elasticsearch/action/deletebyquery/DeleteByQueryRequest.java, +import org.elasticsearch.common.*;, +    BytesHolder querySource() {, +        if (querySourceUnsafe) {, +        return new BytesHolder(querySource, querySourceOffset, querySourceLength);, +        BytesHolder bytes = in.readBytesReference();, +        querySource = bytes.bytes();, +        querySourceOffset = bytes.offset();, +        querySourceLength = bytes.length();, +        out.writeBytesHolder(querySource, querySourceOffset, querySourceLength);, +++ b/src/main/java/org/elasticsearch/action/deletebyquery/IndexDeleteByQueryRequest.java, +import org.elasticsearch.common.BytesHolder;, +    private BytesHolder querySource;, +    BytesHolder querySource() {, +        querySource = in.readBytesReference();, +        out.writeBytesHolder(querySource);, +++ b/src/main/java/org/elasticsearch/action/deletebyquery/DeleteByQueryRequest.java, +import org.elasticsearch.common.*;, +    BytesHolder querySource() {, +        if (querySourceUnsafe) {, +        return new BytesHolder(querySource, querySourceOffset, querySourceLength);, +        BytesHolder bytes = in.readBytesReference();, +        querySource = bytes.bytes();, +        querySourceOffset = bytes.offset();, +        querySourceLength = bytes.length();, +        out.writeBytesHolder(querySource, querySourceOffset, querySourceLength);, +++ b/src/main/java/org/elasticsearch/action/deletebyquery/IndexDeleteByQueryRequest.java, +import org.elasticsearch.common.BytesHolder;, +    private BytesHolder querySource;, +    BytesHolder querySource() {, +        querySource = in.readBytesReference();, +        out.writeBytesHolder(querySource);, +++ b/src/main/java/org/elasticsearch/action/deletebyquery/ShardDeleteByQueryRequest.java, +import org.elasticsearch.common.BytesHolder;, +    private BytesHolder querySource;, +    BytesHolder querySource() {, +        querySource = in.readBytesReference();, +        out.writeBytesHolder(querySource);, +            sSource = Unicode.fromBytes(querySource.bytes(), querySource.offset(), querySource.length());, +++ b/src/main/java/org/elasticsearch/action/deletebyquery/DeleteByQueryRequest.java, +import org.elasticsearch.common.*;, +    BytesHolder querySource() {, +        if (querySourceUnsafe) {, +        return new BytesHolder(querySource, querySourceOffset, querySourceLength);, +        BytesHolder bytes = in.readBytesReference();, +        querySource = bytes.bytes();, +        querySourceOffset = bytes.offset();, +        querySourceLength = bytes.length();, +        out.writeBytesHolder(querySource, querySourceOffset, querySourceLength);, +++ b/src/main/java/org/elasticsearch/action/deletebyquery/IndexDeleteByQueryRequest.java, +import org.elasticsearch.common.BytesHolder;, +    private BytesHolder querySource;, +    BytesHolder querySource() {, +        querySource = in.readBytesReference();, +        out.writeBytesHolder(querySource);, +++ b/src/main/java/org/elasticsearch/action/deletebyquery/ShardDeleteByQueryRequest.java, +import org.elasticsearch.common.BytesHolder;, +    private BytesHolder querySource;, +    BytesHolder querySource() {, +        querySource = in.readBytesReference();, +        out.writeBytesHolder(querySource);, +            sSource = Unicode.fromBytes(querySource.bytes(), querySource.offset(), querySource.length());, +++ b/src/main/java/org/elasticsearch/index/engine/Engine.java, +import org.elasticsearch.common.BytesHolder;, +        private final BytesHolder source;, +        public DeleteByQuery(Query query, BytesHolder source, @Nullable String[] filteringAliases, @Nullable Filter aliasFilter, String... types) {, +        public BytesHolder source() {, +++ b/src/main/java/org/elasticsearch/action/deletebyquery/DeleteByQueryRequest.java, +import org.elasticsearch.common.*;, +    BytesHolder querySource() {, +        if (querySourceUnsafe) {, +        return new BytesHolder(querySource, querySourceOffset, querySourceLength);, +        BytesHolder bytes = in.readBytesReference();, +        querySource = bytes.bytes();, +        querySourceOffset = bytes.offset();, +        querySourceLength = bytes.length();, +        out.writeBytesHolder(querySource, querySourceOffset, querySourceLength);, +++ b/src/main/java/org/elasticsearch/action/deletebyquery/IndexDeleteByQueryRequest.java, +import org.elasticsearch.common.BytesHolder;, +    private BytesHolder querySource;, +    BytesHolder querySource() {, +        querySource = in.readBytesReference();, +        out.writeBytesHolder(querySource);, +++ b/src/main/java/org/elasticsearch/action/deletebyquery/ShardDeleteByQueryRequest.java, +import org.elasticsearch.common.BytesHolder;, +    private BytesHolder querySource;, +    BytesHolder querySource() {, +        querySource = in.readBytesReference();, +        out.writeBytesHolder(querySource);, +            sSource = Unicode.fromBytes(querySource.bytes(), querySource.offset(), querySource.length());]