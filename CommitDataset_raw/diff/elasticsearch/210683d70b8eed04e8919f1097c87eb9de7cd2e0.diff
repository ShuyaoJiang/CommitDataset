[+++ b/src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java, +                    } else {, +                        throw new MapperException("Payload must be an object");, +++ b/src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java, +                    } else {, +                        throw new MapperException("Payload must be an object");, +++ b/src/test/java/org/elasticsearch/test/integration/search/suggest/CompletionSuggestSearchTests.java, +    @Test(expected = MapperException.class), +    public void testThatIndexingNonObjectAsPayloadThrowsException() throws Exception {, +        createIndexAndMapping();, +, +        client().prepareIndex(INDEX, TYPE, "1").setSource(jsonBuilder(), +                .startObject().startObject(FIELD), +                .startArray("input").value("Foo Fighters").endArray(), +                .field("output", "Boo Fighters"), +                .field("payload", "does not work"), +                .endObject().endObject(), +        ).get();, +    }, +, +                            .startObject("payload").field("id", i).endObject(), +                            .startObject("payload").field("id", i).endObject()]