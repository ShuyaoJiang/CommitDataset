[+++ b/server/src/main/java/org/elasticsearch/cluster/metadata/RepositoriesMetaData.java, +    public RepositoriesMetaData(List<RepositoryMetaData> repositories) {, +        this.repositories = repositories;, +        return new RepositoriesMetaData(repository);, +++ b/server/src/main/java/org/elasticsearch/cluster/metadata/RepositoriesMetaData.java, +    public RepositoriesMetaData(List<RepositoryMetaData> repositories) {, +        this.repositories = repositories;, +        return new RepositoriesMetaData(repository);, +++ b/server/src/main/java/org/elasticsearch/repositories/RepositoriesService.java, +                    repositories = new RepositoriesMetaData(, +                        Collections.singletonList(new RepositoryMetaData(request.name, request.type, request.settings)));, +                    repositories = new RepositoriesMetaData(repositoriesMetaData);, +                        repositories = new RepositoriesMetaData(repositoriesMetaData);, +++ b/server/src/main/java/org/elasticsearch/cluster/metadata/RepositoriesMetaData.java, +    public RepositoriesMetaData(List<RepositoryMetaData> repositories) {, +        this.repositories = repositories;, +        return new RepositoriesMetaData(repository);, +++ b/server/src/main/java/org/elasticsearch/repositories/RepositoriesService.java, +                    repositories = new RepositoriesMetaData(, +                        Collections.singletonList(new RepositoryMetaData(request.name, request.type, request.settings)));, +                    repositories = new RepositoriesMetaData(repositoriesMetaData);, +                        repositories = new RepositoriesMetaData(repositoriesMetaData);, +++ b/server/src/test/java/org/elasticsearch/cluster/ClusterStateDiffIT.java, +                    return new RepositoriesMetaData(Collections.emptyList());, +++ b/server/src/main/java/org/elasticsearch/cluster/metadata/RepositoriesMetaData.java, +    public RepositoriesMetaData(List<RepositoryMetaData> repositories) {, +        this.repositories = repositories;, +        return new RepositoriesMetaData(repository);, +++ b/server/src/main/java/org/elasticsearch/repositories/RepositoriesService.java, +                    repositories = new RepositoriesMetaData(, +                        Collections.singletonList(new RepositoryMetaData(request.name, request.type, request.settings)));, +                    repositories = new RepositoriesMetaData(repositoriesMetaData);, +                        repositories = new RepositoriesMetaData(repositoriesMetaData);, +++ b/server/src/test/java/org/elasticsearch/cluster/ClusterStateDiffIT.java, +                    return new RepositoriesMetaData(Collections.emptyList());, +++ b/server/src/test/java/org/elasticsearch/snapshots/RepositoriesMetaDataSerializationTests.java, +        return new RepositoriesMetaData(entries);, +        return new RepositoriesMetaData(entries);, +        return new RepositoriesMetaData(repos);, +        return new RepositoriesMetaData(repos);, +++ b/server/src/main/java/org/elasticsearch/cluster/metadata/RepositoriesMetaData.java, +    public RepositoriesMetaData(List<RepositoryMetaData> repositories) {, +        this.repositories = repositories;, +        return new RepositoriesMetaData(repository);, +++ b/server/src/main/java/org/elasticsearch/repositories/RepositoriesService.java, +                    repositories = new RepositoriesMetaData(, +                        Collections.singletonList(new RepositoryMetaData(request.name, request.type, request.settings)));, +                    repositories = new RepositoriesMetaData(repositoriesMetaData);, +                        repositories = new RepositoriesMetaData(repositoriesMetaData);, +++ b/server/src/test/java/org/elasticsearch/cluster/ClusterStateDiffIT.java, +                    return new RepositoriesMetaData(Collections.emptyList());, +++ b/server/src/test/java/org/elasticsearch/snapshots/RepositoriesMetaDataSerializationTests.java, +        return new RepositoriesMetaData(entries);, +        return new RepositoriesMetaData(entries);, +        return new RepositoriesMetaData(repos);, +        return new RepositoriesMetaData(repos);, +++ b/x-pack/plugin/core/src/test/java/org/elasticsearch/license/LicensesMetaDataSerializationTests.java, +        RepositoriesMetaData repositoriesMetaData = new RepositoriesMetaData(Collections.singletonList(repositoryMetaData));, +++ b/server/src/main/java/org/elasticsearch/cluster/metadata/RepositoriesMetaData.java, +    public RepositoriesMetaData(List<RepositoryMetaData> repositories) {, +        this.repositories = repositories;, +        return new RepositoriesMetaData(repository);, +++ b/server/src/main/java/org/elasticsearch/repositories/RepositoriesService.java, +                    repositories = new RepositoriesMetaData(, +                        Collections.singletonList(new RepositoryMetaData(request.name, request.type, request.settings)));, +                    repositories = new RepositoriesMetaData(repositoriesMetaData);, +                        repositories = new RepositoriesMetaData(repositoriesMetaData);, +++ b/server/src/test/java/org/elasticsearch/cluster/ClusterStateDiffIT.java, +                    return new RepositoriesMetaData(Collections.emptyList());, +++ b/server/src/test/java/org/elasticsearch/snapshots/RepositoriesMetaDataSerializationTests.java, +        return new RepositoriesMetaData(entries);, +        return new RepositoriesMetaData(entries);, +        return new RepositoriesMetaData(repos);, +        return new RepositoriesMetaData(repos);, +++ b/x-pack/plugin/core/src/test/java/org/elasticsearch/license/LicensesMetaDataSerializationTests.java, +        RepositoriesMetaData repositoriesMetaData = new RepositoriesMetaData(Collections.singletonList(repositoryMetaData));, +++ b/x-pack/plugin/watcher/src/test/java/org/elasticsearch/xpack/watcher/WatcherMetaDataSerializationTests.java, +        RepositoriesMetaData repositoriesMetaData = new RepositoriesMetaData(Collections.singletonList(repositoryMetaData));]