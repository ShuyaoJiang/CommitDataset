[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/TransportActionModule.java, +import org.elasticsearch.action.admin.indices.template.delete.TransportDeleteIndexTemplateAction;, +import org.elasticsearch.action.admin.indices.template.put.TransportPutIndexTemplateAction;, +        bind(TransportPutIndexTemplateAction.class).asEagerSingleton();, +        bind(TransportDeleteIndexTemplateAction.class).asEagerSingleton();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/TransportActionModule.java, +import org.elasticsearch.action.admin.indices.template.delete.TransportDeleteIndexTemplateAction;, +import org.elasticsearch.action.admin.indices.template.put.TransportPutIndexTemplateAction;, +        bind(TransportPutIndexTemplateAction.class).asEagerSingleton();, +        bind(TransportDeleteIndexTemplateAction.class).asEagerSingleton();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/TransportActions.java, +            public static final String PUT_INDEX_TEMPLATE = "indices/putIndexTemplate";, +            public static final String DELETE_INDEX_TEMPLATE = "indices/deleteIndexTemplate";, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/TransportActionModule.java, +import org.elasticsearch.action.admin.indices.template.delete.TransportDeleteIndexTemplateAction;, +import org.elasticsearch.action.admin.indices.template.put.TransportPutIndexTemplateAction;, +        bind(TransportPutIndexTemplateAction.class).asEagerSingleton();, +        bind(TransportDeleteIndexTemplateAction.class).asEagerSingleton();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/TransportActions.java, +            public static final String PUT_INDEX_TEMPLATE = "indices/putIndexTemplate";, +            public static final String DELETE_INDEX_TEMPLATE = "indices/deleteIndexTemplate";, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/state/ClusterStateRequest.java, +    private String[] filteredIndexTemplates = Strings.EMPTY_ARRAY;, +, +    public String[] filteredIndexTemplates() {, +        return this.filteredIndexTemplates;, +    }, +, +    public ClusterStateRequest filteredIndexTemplates(String... filteredIndexTemplates) {, +        this.filteredIndexTemplates = filteredIndexTemplates;, +        return this;, +    }, +, +        size = in.readVInt();, +        if (size > 0) {, +            filteredIndexTemplates = new String[size];, +            for (int i = 0; i < filteredIndexTemplates.length; i++) {, +                filteredIndexTemplates[i] = in.readUTF();, +            }, +        }, +        out.writeVInt(filteredIndexTemplates.length);, +        for (String filteredIndexTemplate : filteredIndexTemplates) {, +            out.writeUTF(filteredIndexTemplate);, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/TransportActionModule.java, +import org.elasticsearch.action.admin.indices.template.delete.TransportDeleteIndexTemplateAction;, +import org.elasticsearch.action.admin.indices.template.put.TransportPutIndexTemplateAction;, +        bind(TransportPutIndexTemplateAction.class).asEagerSingleton();, +        bind(TransportDeleteIndexTemplateAction.class).asEagerSingleton();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/TransportActions.java, +            public static final String PUT_INDEX_TEMPLATE = "indices/putIndexTemplate";, +            public static final String DELETE_INDEX_TEMPLATE = "indices/deleteIndexTemplate";, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/state/ClusterStateRequest.java, +    private String[] filteredIndexTemplates = Strings.EMPTY_ARRAY;, +, +    public String[] filteredIndexTemplates() {, +        return this.filteredIndexTemplates;, +    }, +, +    public ClusterStateRequest filteredIndexTemplates(String... filteredIndexTemplates) {, +        this.filteredIndexTemplates = filteredIndexTemplates;, +        return this;, +    }, +, +        size = in.readVInt();, +        if (size > 0) {, +            filteredIndexTemplates = new String[size];, +            for (int i = 0; i < filteredIndexTemplates.length; i++) {, +                filteredIndexTemplates[i] = in.readUTF();, +            }, +        }, +        out.writeVInt(filteredIndexTemplates.length);, +        for (String filteredIndexTemplate : filteredIndexTemplates) {, +            out.writeUTF(filteredIndexTemplate);, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java, +import org.elasticsearch.cluster.metadata.IndexTemplateMetaData;, +            if (request.filteredIndices().length == 0 && request.filteredIndexTemplates().length == 0) {, +                mdBuilder.metaData(currentState.metaData());, +            }, +, +            if (request.filteredIndices().length > 0) {, +                String[] indices = currentState.metaData().concreteIndices(request.filteredIndices(), true);, +                    if (indexMetaData != null) {, +, +            if (request.filteredIndexTemplates().length > 0) {, +                for (String templateName : request.filteredIndexTemplates()) {, +                    IndexTemplateMetaData indexTemplateMetaData = currentState.metaData().templates().get(templateName);, +                    if (indexTemplateMetaData != null) {, +                        mdBuilder.put(indexTemplateMetaData);, +                    }, +                }, +            }, +, +            builder.metaData(mdBuilder);, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/TransportActionModule.java, +import org.elasticsearch.action.admin.indices.template.delete.TransportDeleteIndexTemplateAction;, +import org.elasticsearch.action.admin.indices.template.put.TransportPutIndexTemplateAction;, +        bind(TransportPutIndexTemplateAction.class).asEagerSingleton();]