[+++ b/src/main/java/org/elasticsearch/action/index/IndexRequest.java, +import org.elasticsearch.index.mapper.MapperParsingException;, +                        if (routing != null && !routing.equals(parseContext.routing())) {, +                            throw new MapperParsingException("The provided routing value [" + routing + "] doesn't match the routing key stored in the document: [" + parseContext.routing() + "]");, +                        }, +                } catch (MapperParsingException e) {, +                    throw e;, +++ b/src/main/java/org/elasticsearch/action/index/IndexRequest.java, +import org.elasticsearch.index.mapper.MapperParsingException;, +                        if (routing != null && !routing.equals(parseContext.routing())) {, +                            throw new MapperParsingException("The provided routing value [" + routing + "] doesn't match the routing key stored in the document: [" + parseContext.routing() + "]");, +                        }, +                } catch (MapperParsingException e) {, +                    throw e;, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MappingMetaData.java, +        // We parse the routing even if there is already a routing key in the request in order to make sure that, +        // they are the same, +                routing().hasPath(),, +++ b/src/main/java/org/elasticsearch/action/index/IndexRequest.java, +import org.elasticsearch.index.mapper.MapperParsingException;, +                        if (routing != null && !routing.equals(parseContext.routing())) {, +                            throw new MapperParsingException("The provided routing value [" + routing + "] doesn't match the routing key stored in the document: [" + parseContext.routing() + "]");, +                        }, +                } catch (MapperParsingException e) {, +                    throw e;, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MappingMetaData.java, +        // We parse the routing even if there is already a routing key in the request in order to make sure that, +        // they are the same, +                routing().hasPath(),, +++ b/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java, +++ b/src/main/java/org/elasticsearch/action/index/IndexRequest.java, +import org.elasticsearch.index.mapper.MapperParsingException;, +                        if (routing != null && !routing.equals(parseContext.routing())) {, +                            throw new MapperParsingException("The provided routing value [" + routing + "] doesn't match the routing key stored in the document: [" + parseContext.routing() + "]");, +                        }, +                } catch (MapperParsingException e) {, +                    throw e;, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MappingMetaData.java, +        // We parse the routing even if there is already a routing key in the request in order to make sure that, +        // they are the same, +                routing().hasPath(),, +++ b/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java, +++ b/src/main/java/org/elasticsearch/index/mapper/RootMapper.java, +++ b/src/main/java/org/elasticsearch/action/index/IndexRequest.java, +import org.elasticsearch.index.mapper.MapperParsingException;, +                        if (routing != null && !routing.equals(parseContext.routing())) {, +                            throw new MapperParsingException("The provided routing value [" + routing + "] doesn't match the routing key stored in the document: [" + parseContext.routing() + "]");, +                        }, +                } catch (MapperParsingException e) {, +                    throw e;, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MappingMetaData.java, +        // We parse the routing even if there is already a routing key in the request in order to make sure that, +        // they are the same, +                routing().hasPath(),, +++ b/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java, +++ b/src/main/java/org/elasticsearch/index/mapper/RootMapper.java, +++ b/src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java, +++ b/src/main/java/org/elasticsearch/action/index/IndexRequest.java, +import org.elasticsearch.index.mapper.MapperParsingException;, +                        if (routing != null && !routing.equals(parseContext.routing())) {, +                            throw new MapperParsingException("The provided routing value [" + routing + "] doesn't match the routing key stored in the document: [" + parseContext.routing() + "]");, +                        }, +                } catch (MapperParsingException e) {, +                    throw e;, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MappingMetaData.java, +        // We parse the routing even if there is already a routing key in the request in order to make sure that, +        // they are the same, +                routing().hasPath(),, +++ b/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java, +++ b/src/main/java/org/elasticsearch/index/mapper/RootMapper.java, +++ b/src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java, +++ b/src/main/java/org/elasticsearch/index/mapper/internal/AnalyzerMapper.java, +++ b/src/main/java/org/elasticsearch/action/index/IndexRequest.java, +import org.elasticsearch.index.mapper.MapperParsingException;, +                        if (routing != null && !routing.equals(parseContext.routing())) {, +                            throw new MapperParsingException("The provided routing value [" + routing + "] doesn't match the routing key stored in the document: [" + parseContext.routing() + "]");, +                        }, +                } catch (MapperParsingException e) {, +                    throw e;, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MappingMetaData.java, +        // We parse the routing even if there is already a routing key in the request in order to make sure that, +        // they are the same, +                routing().hasPath(),, +++ b/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java, +++ b/src/main/java/org/elasticsearch/index/mapper/RootMapper.java, +++ b/src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java, +++ b/src/main/java/org/elasticsearch/index/mapper/internal/AnalyzerMapper.java, +++ b/src/main/java/org/elasticsearch/index/mapper/internal/BoostFieldMapper.java, +++ b/src/main/java/org/elasticsearch/action/index/IndexRequest.java, +import org.elasticsearch.index.mapper.MapperParsingException;, +                        if (routing != null && !routing.equals(parseContext.routing())) {, +                            throw new MapperParsingException("The provided routing value [" + routing + "] doesn't match the routing key stored in the document: [" + parseContext.routing() + "]");, +                        }, +                } catch (MapperParsingException e) {, +                    throw e;, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MappingMetaData.java, +        // We parse the routing even if there is already a routing key in the request in order to make sure that, +        // they are the same, +                routing().hasPath(),, +++ b/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java]