[+++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +import org.elasticsearch.gradle.NoticeTask, +                addNoticeGeneration(project), +, +    protected void addNoticeGeneration(Project project) {, +        File licenseFile = project.pluginProperties.extension.licenseFile, +        if (licenseFile != null) {, +            project.bundlePlugin.into('/') {, +                from(licenseFile.parentFile) {, +                    include(licenseFile.name), +                }, +            }, +        }, +        File noticeFile = project.pluginProperties.extension.licenseFile, +        if (noticeFile != null) {, +            NoticeTask generateNotice = project.tasks.create('generateNotice', NoticeTask.class), +            generateNotice.dependencies(project), +            project.bundlePlugin.into('/') {, +                from(generateNotice), +            }, +        }, +    }, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +import org.elasticsearch.gradle.NoticeTask, +                addNoticeGeneration(project), +, +    protected void addNoticeGeneration(Project project) {, +        File licenseFile = project.pluginProperties.extension.licenseFile, +        if (licenseFile != null) {, +            project.bundlePlugin.into('/') {, +                from(licenseFile.parentFile) {, +                    include(licenseFile.name), +                }, +            }, +        }, +        File noticeFile = project.pluginProperties.extension.licenseFile, +        if (noticeFile != null) {, +            NoticeTask generateNotice = project.tasks.create('generateNotice', NoticeTask.class), +            generateNotice.dependencies(project), +            project.bundlePlugin.into('/') {, +                from(generateNotice), +            }, +        }, +    }, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginPropertiesExtension.groovy, +    /** A license file that should be included in the built plugin zip. */, +    @Input, +    File licenseFile = null, +, +    /**, +     * A notice file that should be included in the built plugin zip. This will be, +     * extended with notices from the {@code licenses/} directory., +     */, +    @Input, +    File noticeFile = null, +, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +import org.elasticsearch.gradle.NoticeTask, +                addNoticeGeneration(project), +, +    protected void addNoticeGeneration(Project project) {, +        File licenseFile = project.pluginProperties.extension.licenseFile, +        if (licenseFile != null) {, +            project.bundlePlugin.into('/') {, +                from(licenseFile.parentFile) {, +                    include(licenseFile.name), +                }, +            }, +        }, +        File noticeFile = project.pluginProperties.extension.licenseFile, +        if (noticeFile != null) {, +            NoticeTask generateNotice = project.tasks.create('generateNotice', NoticeTask.class), +            generateNotice.dependencies(project), +            project.bundlePlugin.into('/') {, +                from(generateNotice), +            }, +        }, +    }, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginPropertiesExtension.groovy, +    /** A license file that should be included in the built plugin zip. */, +    @Input, +    File licenseFile = null, +, +    /**, +     * A notice file that should be included in the built plugin zip. This will be, +     * extended with notices from the {@code licenses/} directory., +     */, +    @Input, +    File noticeFile = null, +, +++ b/plugins/build.gradle, +    , +    licenseFile rootProject.file('LICENSE.txt'), +    noticeFile rootProject.file('NOTICE.txt')]