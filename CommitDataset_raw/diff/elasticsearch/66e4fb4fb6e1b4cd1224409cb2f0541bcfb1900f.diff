[+++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsAggregatorFactory.java, +            final long maxOrd = execution == ExecutionMode.GLOBAL_ORDINALS ? getMaxOrd(valuesSource, context.searcher()) : -1;, +     * Get the maximum global ordinal value for the provided {@link ValuesSource} or -1, +    static long getMaxOrd(ValuesSource source, IndexSearcher searcher) throws IOException {, +                final long maxOrd = getMaxOrd(valuesSource, context.searcher());]