[+++ b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +import org.elasticsearch.common.collect.Tuple;, +        setupLogging(settings, environment);, +, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +import org.elasticsearch.common.collect.Tuple;, +        setupLogging(settings, environment);, +, +++ b/core/src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java, +        // TODO: can we simplify all of this and have a single filename, which is looked up in the config dir?, +        boolean loadFromEnv = true;, +        if (useSystemProperties(input)) {, +            // if its default, then load it, but also load form env, +            if (Strings.hasText(System.getProperty("es.default.config"))) {, +                // TODO: we don't allow multiple config files, but having loadFromEnv true here allows just that, +                loadFromEnv = true;, +                output.loadFromPath(environment.configFile().resolve(System.getProperty("es.default.config")));, +            }, +            // TODO: these should be elseifs so that multiple files cannot be loaded, +            // if explicit, just load it and don't load from env, +            if (Strings.hasText(System.getProperty("es.config"))) {, +                loadFromEnv = false;, +                output.loadFromPath(environment.configFile().resolve(System.getProperty("es.config")));, +            }, +            if (Strings.hasText(System.getProperty("elasticsearch.config"))) {, +                loadFromEnv = false;, +                output.loadFromPath(environment.configFile().resolve(System.getProperty("elasticsearch.config")));, +            }, +        }, +        if (loadFromEnv) {, +        }, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +import org.elasticsearch.common.collect.Tuple;, +        setupLogging(settings, environment);, +, +++ b/core/src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java, +        // TODO: can we simplify all of this and have a single filename, which is looked up in the config dir?, +        boolean loadFromEnv = true;, +        if (useSystemProperties(input)) {, +            // if its default, then load it, but also load form env, +            if (Strings.hasText(System.getProperty("es.default.config"))) {, +                // TODO: we don't allow multiple config files, but having loadFromEnv true here allows just that, +                loadFromEnv = true;, +                output.loadFromPath(environment.configFile().resolve(System.getProperty("es.default.config")));, +            }, +            // TODO: these should be elseifs so that multiple files cannot be loaded, +            // if explicit, just load it and don't load from env, +            if (Strings.hasText(System.getProperty("es.config"))) {, +                loadFromEnv = false;, +                output.loadFromPath(environment.configFile().resolve(System.getProperty("es.config")));, +            }, +            if (Strings.hasText(System.getProperty("elasticsearch.config"))) {, +                loadFromEnv = false;, +                output.loadFromPath(environment.configFile().resolve(System.getProperty("elasticsearch.config")));, +            }, +        }, +        if (loadFromEnv) {, +        }, +++ b/dev-tools/src/main/resources/plugin-metadata/plugin-descriptor.properties, +# version=2.0.0-rc1, +# You will have to release a new version of the plugin for each new, +# elasticsearch release. This version is checked when the plugin, +# is loaded so Elasticsearch will refuse to start in the presence of, +# plugins with the incorrect elasticsearch.version., +++ b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +import org.elasticsearch.common.collect.Tuple;, +        setupLogging(settings, environment);, +, +++ b/core/src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java, +        // TODO: can we simplify all of this and have a single filename, which is looked up in the config dir?, +        boolean loadFromEnv = true;, +        if (useSystemProperties(input)) {, +            // if its default, then load it, but also load form env, +            if (Strings.hasText(System.getProperty("es.default.config"))) {, +                // TODO: we don't allow multiple config files, but having loadFromEnv true here allows just that, +                loadFromEnv = true;, +                output.loadFromPath(environment.configFile().resolve(System.getProperty("es.default.config")));, +            }, +            // TODO: these should be elseifs so that multiple files cannot be loaded, +            // if explicit, just load it and don't load from env, +            if (Strings.hasText(System.getProperty("es.config"))) {, +                loadFromEnv = false;, +                output.loadFromPath(environment.configFile().resolve(System.getProperty("es.config")));, +            }, +            if (Strings.hasText(System.getProperty("elasticsearch.config"))) {, +                loadFromEnv = false;, +                output.loadFromPath(environment.configFile().resolve(System.getProperty("elasticsearch.config")));, +            }, +        }, +        if (loadFromEnv) {, +        }, +++ b/dev-tools/src/main/resources/plugin-metadata/plugin-descriptor.properties, +# version=2.0.0-rc1, +# You will have to release a new version of the plugin for each new, +# elasticsearch release. This version is checked when the plugin, +# is loaded so Elasticsearch will refuse to start in the presence of, +# plugins with the incorrect elasticsearch.version., +++ b/distribution/deb/pom.xml, +                                    <includes>elasticsearch,elasticsearch.in.sh,plugin</includes>, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java]