[+++ b/src/main/java/org/elasticsearch/index/query/NestedQueryParser.java, +                InnerHitsContext.NestedInnerHits nestedInnerHits = new InnerHitsContext.NestedInnerHits(innerHits.v2(), innerQuery, null, getParentObjectMapper(), nestedObjectMapper);, +++ b/src/main/java/org/elasticsearch/index/query/NestedQueryParser.java, +                InnerHitsContext.NestedInnerHits nestedInnerHits = new InnerHitsContext.NestedInnerHits(innerHits.v2(), innerQuery, null, getParentObjectMapper(), nestedObjectMapper);, +++ b/src/test/java/org/elasticsearch/search/innerhits/InnerHitsTests.java, +import static org.elasticsearch.index.query.FilterBuilders.queryFilter;, +                        .setQuery(nestedQuery("comments", matchQuery("comments.message", "elephant")).innerHit(new QueryInnerHitBuilder().setName("comment"))).request(),, +                client().prepareSearch("articles"), +                        .setQuery(nestedQuery("comments", queryFilter(matchQuery("comments.message", "elephant"))).innerHit(new QueryInnerHitBuilder().setName("comment").addSort("_doc", SortOrder.DESC))).request()]