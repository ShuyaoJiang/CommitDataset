[+++ b/core/src/main/java/org/elasticsearch/discovery/zen/UnicastZenPing.java, +                if (exp instanceof ConnectTransportException || exp.getCause() instanceof ConnectTransportException ||, +                    exp.getCause() instanceof AlreadyClosedException) {, +            if (closed) {, +                throw new AlreadyClosedException("node is shutting down");, +            }, +++ b/core/src/main/java/org/elasticsearch/discovery/zen/UnicastZenPing.java, +                if (exp instanceof ConnectTransportException || exp.getCause() instanceof ConnectTransportException ||, +                    exp.getCause() instanceof AlreadyClosedException) {, +            if (closed) {, +                throw new AlreadyClosedException("node is shutting down");, +            }, +++ b/core/src/test/java/org/elasticsearch/discovery/zen/UnicastZenPingTests.java, +, +        zenPingC.close();, +        handleD.counters.clear();, +        logger.info("ping from UZP_D after closing UZP_C");, +        pingResponses = zenPingD.pingAndWait().toList();, +        // check that node does not respond to pings anymore after the ping service has been closed, +        assertThat(pingResponses.size(), equalTo(0));, +        assertPingCount(handleD, handleA, 0);, +        assertPingCount(handleD, handleB, 0);, +        assertPingCount(handleD, handleC, 3);]