[+++ b/dev-tools/src/main/resources/ant/integration-tests.xml, +  <!-- applies transformations to src and stores in dst -->, +  <macrodef name="filter-property">, +      <attribute name="src"/>, +      <attribute name="dest"/>, +      <element name="chain"/>, +    <sequential>, +      <loadresource property="@{dest}">, +        <propertyresource name="@{src}"/>, +        <filterchain>, +          <tokenfilter>, +            <chain/>, +          </tokenfilter>, +        </filterchain>, +      </loadresource>, +    </sequential>, +  </macrodef>, +, +    <!-- install plugin -->, +                args="-u ${integ.plugin.url} -i ${project.artifactId}"/>, +, +    <!-- check that plugin was installed into correct place -->, +    <local name="expected-shortname"/>, +    <filter-property src="project.artifactId" dest="expected-shortname">, +      <chain>, +        <replaceregex pattern="^elasticsearch-" replace=""/>, +      </chain>, +    </filter-property>, +, +    <fail message="did not find plugin installed as ${expected-shortname}">, +      <condition>, +        <not>, +          <resourceexists>, +            <file file="${integ.home}/plugins/${expected-shortname}"/>, +          </resourceexists>, +        </not>, +      </condition>, +    </fail>, +++ b/dev-tools/src/main/resources/ant/integration-tests.xml, +  <!-- applies transformations to src and stores in dst -->, +  <macrodef name="filter-property">, +      <attribute name="src"/>, +      <attribute name="dest"/>, +      <element name="chain"/>, +    <sequential>, +      <loadresource property="@{dest}">, +        <propertyresource name="@{src}"/>, +        <filterchain>, +          <tokenfilter>, +            <chain/>, +          </tokenfilter>, +        </filterchain>, +      </loadresource>, +    </sequential>, +  </macrodef>, +, +    <!-- install plugin -->, +                args="-u ${integ.plugin.url} -i ${project.artifactId}"/>, +, +    <!-- check that plugin was installed into correct place -->, +    <local name="expected-shortname"/>, +    <filter-property src="project.artifactId" dest="expected-shortname">, +      <chain>, +        <replaceregex pattern="^elasticsearch-" replace=""/>, +      </chain>, +    </filter-property>, +, +    <fail message="did not find plugin installed as ${expected-shortname}">, +      <condition>, +        <not>, +          <resourceexists>, +            <file file="${integ.home}/plugins/${expected-shortname}"/>, +          </resourceexists>, +        </not>, +      </condition>, +    </fail>, +++ b/docs/reference/aggregations/pipeline.asciidoc, +include::pipeline/series-arithmetic-aggregation.asciidoc[]]