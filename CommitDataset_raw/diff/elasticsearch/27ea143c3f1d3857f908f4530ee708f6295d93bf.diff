[+++ b/core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java, +        final long startTime = System.currentTimeMillis();, +        executeBulk(bulkRequest, startTime, listener, new AtomicArray<>(bulkRequest.requests.size()));, +    private long buildTookInMillis(long startTime) {, +        // protect ourselves against time going backwards, +        return Math.max(1, System.currentTimeMillis() - startTime);, +    private void executeBulk(final BulkRequest bulkRequest, final long startTime, final ActionListener<BulkResponse> listener, final AtomicArray<BulkItemResponse> responses ) {, +            listener.onResponse(new BulkResponse(responses.toArray(new BulkItemResponse[responses.length()]), buildTookInMillis(startTime)));, +                    listener.onResponse(new BulkResponse(responses.toArray(new BulkItemResponse[responses.length()]), buildTookInMillis(startTime)));]