[+++ b/modules/lang-painless/src/main/java/org/elasticsearch/painless/MethodWriter.java, +/*, + * Licensed to Elasticsearch under one or more contributor, + * license agreements. See the NOTICE file distributed with, + * this work for additional information regarding copyright, + * ownership. Elasticsearch licenses this file to you under, + * the Apache License, Version 2.0 (the "License"); you may, + * not use this file except in compliance with the License., + * You may obtain a copy of the License at, + *, + *    http://www.apache.org/licenses/LICENSE-2.0, + *, + * Unless required by applicable law or agreed to in writing,, + * software distributed under the License is distributed on an, + * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY, + * KIND, either express or implied.  See the License for the, + * specific language governing permissions and limitations, + * under the License., + */, +, +package org.elasticsearch.painless;, +, +import org.elasticsearch.painless.Definition.Cast;, +import org.elasticsearch.painless.Definition.Sort;, +import org.elasticsearch.painless.Definition.Transform;, +import org.elasticsearch.painless.Definition.Type;, +import org.objectweb.asm.ClassVisitor;, +import org.objectweb.asm.Label;, +import org.objectweb.asm.Opcodes;, +import org.objectweb.asm.commons.GeneratorAdapter;, +import org.objectweb.asm.commons.Method;, +, +import static org.elasticsearch.painless.WriterConstants.ADDEXACT_INT;, +import static org.elasticsearch.painless.WriterConstants.ADDEXACT_LONG;, +import static org.elasticsearch.painless.WriterConstants.ADDWOOVERLOW_DOUBLE;, +import static org.elasticsearch.painless.WriterConstants.ADDWOOVERLOW_FLOAT;, +import static org.elasticsearch.painless.WriterConstants.DEF_ADD_CALL;, +import static org.elasticsearch.painless.WriterConstants.DEF_AND_CALL;, +import static org.elasticsearch.painless.WriterConstants.DEF_DIV_CALL;, +import static org.elasticsearch.painless.WriterConstants.DEF_LSH_CALL;, +import static org.elasticsearch.painless.WriterConstants.DEF_MUL_CALL;, +import static org.elasticsearch.painless.WriterConstants.DEF_OR_CALL;, +import static org.elasticsearch.painless.WriterConstants.DEF_REM_CALL;, +import static org.elasticsearch.painless.WriterConstants.DEF_RSH_CALL;, +import static org.elasticsearch.painless.WriterConstants.DEF_SUB_CALL;, +import static org.elasticsearch.painless.WriterConstants.DEF_USH_CALL;, +import static org.elasticsearch.painless.WriterConstants.DEF_XOR_CALL;, +import static org.elasticsearch.painless.WriterConstants.DIVWOOVERLOW_DOUBLE;, +import static org.elasticsearch.painless.WriterConstants.DIVWOOVERLOW_FLOAT;, +import static org.elasticsearch.painless.WriterConstants.DIVWOOVERLOW_INT;, +import static org.elasticsearch.painless.WriterConstants.DIVWOOVERLOW_LONG;, +import static org.elasticsearch.painless.WriterConstants.MULEXACT_INT;, +import static org.elasticsearch.painless.WriterConstants.MULEXACT_LONG;, +import static org.elasticsearch.painless.WriterConstants.MULWOOVERLOW_DOUBLE;, +import static org.elasticsearch.painless.WriterConstants.MULWOOVERLOW_FLOAT;, +import static org.elasticsearch.painless.WriterConstants.PAINLESS_ERROR_TYPE;, +import static org.elasticsearch.painless.WriterConstants.REMWOOVERLOW_DOUBLE;, +import static org.elasticsearch.painless.WriterConstants.REMWOOVERLOW_FLOAT;, +import static org.elasticsearch.painless.WriterConstants.STRINGBUILDER_APPEND_BOOLEAN;, +import static org.elasticsearch.painless.WriterConstants.STRINGBUILDER_APPEND_CHAR;, +import static org.elasticsearch.painless.WriterConstants.STRINGBUILDER_APPEND_DOUBLE;, +import static org.elasticsearch.painless.WriterConstants.STRINGBUILDER_APPEND_FLOAT;, +import static org.elasticsearch.painless.WriterConstants.STRINGBUILDER_APPEND_INT;, +import static org.elasticsearch.painless.WriterConstants.STRINGBUILDER_APPEND_LONG;, +import static org.elasticsearch.painless.WriterConstants.STRINGBUILDER_APPEND_OBJECT;, +import static org.elasticsearch.painless.WriterConstants.STRINGBUILDER_APPEND_STRING;, +import static org.elasticsearch.painless.WriterConstants.STRINGBUILDER_CONSTRUCTOR;, +import static org.elasticsearch.painless.WriterConstants.STRINGBUILDER_TOSTRING;, +import static org.elasticsearch.painless.WriterConstants.STRINGBUILDER_TYPE;, +import static org.elasticsearch.painless.WriterConstants.SUBEXACT_INT;, +import static org.elasticsearch.painless.WriterConstants.SUBEXACT_LONG;, +import static org.elasticsearch.painless.WriterConstants.SUBWOOVERLOW_DOUBLE;, +import static org.elasticsearch.painless.WriterConstants.SUBWOOVERLOW_FLOAT;, +import static org.elasticsearch.painless.WriterConstants.TOBYTEEXACT_INT;, +import static org.elasticsearch.painless.WriterConstants.TOBYTEEXACT_LONG;, +import static org.elasticsearch.painless.WriterConstants.TOBYTEWOOVERFLOW_DOUBLE;, +import static org.elasticsearch.painless.WriterConstants.TOBYTEWOOVERFLOW_FLOAT;, +import static org.elasticsearch.painless.WriterConstants.TOCHAREXACT_INT;, +import static org.elasticsearch.painless.WriterConstants.TOCHAREXACT_LONG;, +import static org.elasticsearch.painless.WriterConstants.TOCHARWOOVERFLOW_DOUBLE;, +import static org.elasticsearch.painless.WriterConstants.TOCHARWOOVERFLOW_FLOAT;, +import static org.elasticsearch.painless.WriterConstants.TOFLOATWOOVERFLOW_DOUBLE;, +import static org.elasticsearch.painless.WriterConstants.TOINTEXACT_LONG;, +import static org.elasticsearch.painless.WriterConstants.TOINTWOOVERFLOW_DOUBLE;, +import static org.elasticsearch.painless.WriterConstants.TOINTWOOVERFLOW_FLOAT;, +import static org.elasticsearch.painless.WriterConstants.TOLONGWOOVERFLOW_DOUBLE;, +import static org.elasticsearch.painless.WriterConstants.TOLONGWOOVERFLOW_FLOAT;, +import static org.elasticsearch.painless.WriterConstants.TOSHORTEXACT_INT;, +import static org.elasticsearch.painless.WriterConstants.TOSHORTEXACT_LONG;, +import static org.elasticsearch.painless.WriterConstants.TOSHORTWOOVERFLOW_DOUBLE;, +import static org.elasticsearch.painless.WriterConstants.TOSHORTWOOVERFLOW_FLOAT;, +, +/**, + * Extension of {@link GeneratorAdapter} with some utility methods., + * <p>, + * Set of methods used during the writing phase of compilation, + * shared by the nodes of the Painless tree., + */, +public final class MethodWriter extends GeneratorAdapter {, +]