[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java, +        @Nullable private final Settings indexSettings;, +, +        private final Mapper.BuilderContext builderContext;, +            this.indexSettings = indexSettings;, +            this.builderContext = new Mapper.BuilderContext(indexSettings, new ContentPath(1));, +            return new DocumentMapper(index, indexSettings, docMapperParser, rootObjectMapper, meta,, +            return new ParseContext(index, indexSettings, docMapperParser, DocumentMapper.this, new ContentPath(0));, +    private final Settings indexSettings;, +, +    public DocumentMapper(String index, @Nullable Settings indexSettings, DocumentMapperParser docMapperParser,, +        this.indexSettings = indexSettings;, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java, +        @Nullable private final Settings indexSettings;, +, +        private final Mapper.BuilderContext builderContext;, +            this.indexSettings = indexSettings;, +            this.builderContext = new Mapper.BuilderContext(indexSettings, new ContentPath(1));, +            return new DocumentMapper(index, indexSettings, docMapperParser, rootObjectMapper, meta,, +            return new ParseContext(index, indexSettings, docMapperParser, DocumentMapper.this, new ContentPath(0));, +    private final Settings indexSettings;, +, +    public DocumentMapper(String index, @Nullable Settings indexSettings, DocumentMapperParser docMapperParser,, +        this.indexSettings = indexSettings;, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/Mapper.java, +import org.elasticsearch.common.Nullable;, +import org.elasticsearch.common.settings.Settings;, +        private final Settings indexSettings;, +        public BuilderContext(@Nullable Settings indexSettings, ContentPath contentPath) {, +            this.indexSettings = indexSettings;, +, +        @Nullable public Settings indexSettings() {, +            return this.indexSettings;, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java, +        @Nullable private final Settings indexSettings;, +, +        private final Mapper.BuilderContext builderContext;, +            this.indexSettings = indexSettings;, +            this.builderContext = new Mapper.BuilderContext(indexSettings, new ContentPath(1));, +            return new DocumentMapper(index, indexSettings, docMapperParser, rootObjectMapper, meta,, +            return new ParseContext(index, indexSettings, docMapperParser, DocumentMapper.this, new ContentPath(0));, +    private final Settings indexSettings;, +, +    public DocumentMapper(String index, @Nullable Settings indexSettings, DocumentMapperParser docMapperParser,, +        this.indexSettings = indexSettings;, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/Mapper.java, +import org.elasticsearch.common.Nullable;, +import org.elasticsearch.common.settings.Settings;, +        private final Settings indexSettings;, +        public BuilderContext(@Nullable Settings indexSettings, ContentPath contentPath) {, +            this.indexSettings = indexSettings;, +, +        @Nullable public Settings indexSettings() {, +            return this.indexSettings;, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/ParseContext.java, +import org.elasticsearch.common.Nullable;, +import org.elasticsearch.common.settings.Settings;, +    private final String index;, +, +    @Nullable private final Settings indexSettings;, +    public ParseContext(String index, @Nullable Settings indexSettings, DocumentMapperParser docMapperParser, DocumentMapper docMapper, ContentPath path) {, +        this.indexSettings = indexSettings;, +    @Nullable public Settings indexSettings() {, +        return this.indexSettings;, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java, +        @Nullable private final Settings indexSettings;, +, +        private final Mapper.BuilderContext builderContext;, +            this.indexSettings = indexSettings;, +            this.builderContext = new Mapper.BuilderContext(indexSettings, new ContentPath(1));, +            return new DocumentMapper(index, indexSettings, docMapperParser, rootObjectMapper, meta,, +            return new ParseContext(index, indexSettings, docMapperParser, DocumentMapper.this, new ContentPath(0));, +    private final Settings indexSettings;, +, +    public DocumentMapper(String index, @Nullable Settings indexSettings, DocumentMapperParser docMapperParser,, +        this.indexSettings = indexSettings;, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/Mapper.java, +import org.elasticsearch.common.Nullable;, +import org.elasticsearch.common.settings.Settings;, +        private final Settings indexSettings;, +        public BuilderContext(@Nullable Settings indexSettings, ContentPath contentPath) {, +            this.indexSettings = indexSettings;, +, +        @Nullable public Settings indexSettings() {, +            return this.indexSettings;, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/ParseContext.java, +import org.elasticsearch.common.Nullable;, +import org.elasticsearch.common.settings.Settings;, +    private final String index;, +, +    @Nullable private final Settings indexSettings;, +    public ParseContext(String index, @Nullable Settings indexSettings, DocumentMapperParser docMapperParser, DocumentMapper docMapper, ContentPath path) {, +        this.indexSettings = indexSettings;, +    @Nullable public Settings indexSettings() {, +        return this.indexSettings;]