[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/xcontent/ObjectMapper.java, +import java.util.TreeMap;, +        // sort the mappers so we get consistent serialization format, +        TreeMap<String, XContentMapper> sortedMappers = new TreeMap<String, XContentMapper>(mappers);, +, +        for (XContentMapper mapper : sortedMappers.values()) {, +            for (XContentMapper mapper : sortedMappers.values()) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/xcontent/ObjectMapper.java, +import java.util.TreeMap;, +        // sort the mappers so we get consistent serialization format, +        TreeMap<String, XContentMapper> sortedMappers = new TreeMap<String, XContentMapper>(mappers);, +, +        for (XContentMapper mapper : sortedMappers.values()) {, +            for (XContentMapper mapper : sortedMappers.values()) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java, +                if (!mapperService.documentMapper(mappingType).mappingSource().equals(mappingSource)) {, +                    logger.warn("[{}] parsed mapping [{}], and got different sources\noriginal:\n{}\nparsed:\n{}", index, mappingType, mappingSource, mapperService.documentMapper(mappingType).mappingSource());, +                }, +                    if (!mapperService.documentMapper(mappingType).mappingSource().equals(mappingSource)) {, +                        logger.warn("[{}] parsed mapping [{}], and got different sources\noriginal:\n{}\nparsed:\n{}", index, mappingType, mappingSource, mapperService.documentMapper(mappingType).mappingSource());, +                    }]