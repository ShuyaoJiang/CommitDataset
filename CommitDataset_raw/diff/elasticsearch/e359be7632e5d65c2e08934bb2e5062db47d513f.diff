[+++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="plugins[/\\]discovery-azure[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]cloud[/\\]azure[/\\]AbstractAzureTestCase.java" checks="LineLength" />, +  <suppress files="plugins[/\\]discovery-azure[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]discovery[/\\]azure[/\\]AzureMinimumMasterNodesTests.java" checks="LineLength" />, +  <suppress files="plugins[/\\]discovery-azure[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]discovery[/\\]azure[/\\]AzureSimpleTests.java" checks="LineLength" />, +  <suppress files="plugins[/\\]discovery-azure[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]discovery[/\\]azure[/\\]AzureTwoStartedNodesTests.java" checks="LineLength" />, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="plugins[/\\]discovery-azure[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]cloud[/\\]azure[/\\]AbstractAzureTestCase.java" checks="LineLength" />, +  <suppress files="plugins[/\\]discovery-azure[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]discovery[/\\]azure[/\\]AzureMinimumMasterNodesTests.java" checks="LineLength" />, +  <suppress files="plugins[/\\]discovery-azure[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]discovery[/\\]azure[/\\]AzureSimpleTests.java" checks="LineLength" />, +  <suppress files="plugins[/\\]discovery-azure[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]discovery[/\\]azure[/\\]AzureTwoStartedNodesTests.java" checks="LineLength" />, +++ b/dev-tools/smoke_test_rc.py, +                   "discovery-azure",, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="plugins[/\\]discovery-azure[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]cloud[/\\]azure[/\\]AbstractAzureTestCase.java" checks="LineLength" />, +  <suppress files="plugins[/\\]discovery-azure[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]discovery[/\\]azure[/\\]AzureMinimumMasterNodesTests.java" checks="LineLength" />, +  <suppress files="plugins[/\\]discovery-azure[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]discovery[/\\]azure[/\\]AzureSimpleTests.java" checks="LineLength" />, +  <suppress files="plugins[/\\]discovery-azure[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]discovery[/\\]azure[/\\]AzureTwoStartedNodesTests.java" checks="LineLength" />, +++ b/dev-tools/smoke_test_rc.py, +                   "discovery-azure",, +++ /dev/null, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="plugins[/\\]discovery-azure[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]cloud[/\\]azure[/\\]AbstractAzureTestCase.java" checks="LineLength" />, +  <suppress files="plugins[/\\]discovery-azure[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]discovery[/\\]azure[/\\]AzureMinimumMasterNodesTests.java" checks="LineLength" />, +  <suppress files="plugins[/\\]discovery-azure[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]discovery[/\\]azure[/\\]AzureSimpleTests.java" checks="LineLength" />, +  <suppress files="plugins[/\\]discovery-azure[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]discovery[/\\]azure[/\\]AzureTwoStartedNodesTests.java" checks="LineLength" />, +++ b/dev-tools/smoke_test_rc.py, +                   "discovery-azure",, +++ /dev/null, +++ b/docs/plugins/discovery-azure.asciidoc, +[[discovery-azure]], +=== Azure Discovery Plugin, +, +The Azure Discovery plugin uses the Azure API for unicast discovery., +, +[[discovery-azure-install]], +[float], +==== Installation, +, +This plugin can be installed using the plugin manager:, +, +[source,sh], +----------------------------------------------------------------, +sudo bin/elasticsearch-plugin install discovery-azure, +----------------------------------------------------------------, +, +The plugin must be installed on every node in the cluster, and each node must, +be restarted after installation., +, +[[discovery-azure-remove]], +[float], +==== Removal, +, +The plugin can be removed with the following command:, +, +[source,sh], +----------------------------------------------------------------, +sudo bin/elasticsearch-plugin remove discovery-azure, +----------------------------------------------------------------, +, +The node must be stopped before removing the plugin., +, +[[discovery-azure-usage]], +==== Azure Virtual Machine Discovery, +, +Azure VM discovery allows to use the azure APIs to perform automatic discovery (similar to multicast in non hostile, +multicast environments). Here is a simple sample configuration:, +, +[source,yaml], +----, +cloud:, +    azure:, +        management:, +             subscription.id: XXX-XXX-XXX-XXX, +             cloud.service.name: es-demo-app, +             keystore:, +                   path: /path/to/azurekeystore.pkcs12, +                   password: WHATEVER, +                   type: pkcs12, +, +discovery:, +    type: azure, +----, +, +[IMPORTANT], +.Binding the network host, +==============================================, +, +The keystore file must be placed in a directory accessible by elasticsearch like the `config` directory., +, +It's important to define `network.host` as by default it's bound to `localhost`., +, +You can use {ref}/modules-network.html[core network host settings]. For example `_en0_`., +, +==============================================, +, +[[discovery-azure-short]], +===== How to start (short story), +, +* Create Azure instances, +* Install Elasticsearch]