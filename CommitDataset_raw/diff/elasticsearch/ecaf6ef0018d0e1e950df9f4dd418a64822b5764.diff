[+++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +    /** An override of the data directory. This may only be used with a single node. */, +    @Input, +    File dataDir = null, +, +    /** Optional override of the cluster name. */, +    @Input, +    String clusterName = null, +, +     * A uri that should be used for the unicast host list., +     * This allows multi node clusters, or a new cluster to connect to an existing cluster., +     * The type is Object to allow lazy evaluation. Typically this would be set with a, +     * closure in a GString like:, +     *, +     * {@code "$&#123;-> node.transportUri()&#125;"}, +    Object unicastTransportUri = null, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +    /** An override of the data directory. This may only be used with a single node. */, +    @Input, +    File dataDir = null, +, +    /** Optional override of the cluster name. */, +    @Input, +    String clusterName = null, +, +     * A uri that should be used for the unicast host list., +     * This allows multi node clusters, or a new cluster to connect to an existing cluster., +     * The type is Object to allow lazy evaluation. Typically this would be set with a, +     * closure in a GString like:, +     *, +     * {@code "$&#123;-> node.transportUri()&#125;"}, +    Object unicastTransportUri = null, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +    static List<NodeInfo> setup(Project project, Task task, ClusterConfiguration config) {, +        return nodes, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +    /** An override of the data directory. This may only be used with a single node. */, +    @Input, +    File dataDir = null, +, +    /** Optional override of the cluster name. */, +    @Input, +    String clusterName = null, +, +     * A uri that should be used for the unicast host list., +     * This allows multi node clusters, or a new cluster to connect to an existing cluster., +     * The type is Object to allow lazy evaluation. Typically this would be set with a, +     * closure in a GString like:, +     *, +     * {@code "$&#123;-> node.transportUri()&#125;"}, +    Object unicastTransportUri = null, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +    static List<NodeInfo> setup(Project project, Task task, ClusterConfiguration config) {, +        return nodes, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/NodeInfo.groovy, +    /** data directory */, +    File dataDir, +, +        if (config.clusterName != null) {, +            clusterName = config.clusterName, +        } else {, +        }, +        if (config.dataDir != null) {, +            if (config.numNodes != 1) {, +                throw new IllegalArgumentException("Cannot set data dir for integ test with more than one node"), +            }, +            dataDir = config.dataDir, +        } else {, +            dataDir = new File(homeDir, "data"), +        }, +        args.addAll("-E", "path.conf=${confDir}", "-E", "path.data=${dataDir}"), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +    /** An override of the data directory. This may only be used with a single node. */, +    @Input, +    File dataDir = null, +, +    /** Optional override of the cluster name. */, +    @Input, +    String clusterName = null, +, +     * A uri that should be used for the unicast host list., +     * This allows multi node clusters, or a new cluster to connect to an existing cluster., +     * The type is Object to allow lazy evaluation. Typically this would be set with a, +     * closure in a GString like:, +     *, +     * {@code "$&#123;-> node.transportUri()&#125;"}, +    Object unicastTransportUri = null, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +    static List<NodeInfo> setup(Project project, Task task, ClusterConfiguration config) {, +        return nodes, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/NodeInfo.groovy, +    /** data directory */, +    File dataDir, +, +        if (config.clusterName != null) {, +            clusterName = config.clusterName, +        } else {, +        }, +        if (config.dataDir != null) {, +            if (config.numNodes != 1) {]