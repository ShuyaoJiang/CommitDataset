[+++ b/core/src/main/java/org/elasticsearch/indices/IndicesModule.java, +import org.elasticsearch.action.admin.indices.rollover.Condition;, +import org.elasticsearch.common.io.stream.NamedWriteableRegistry;, +    private final NamedWriteableRegistry namedWritableRegistry;, +    public IndicesModule(NamedWriteableRegistry namedWriteableRegistry) {, +        this.namedWritableRegistry = namedWriteableRegistry;, +        registerBuildInWritables();, +    }, +, +    private void registerBuildInWritables() {, +        namedWritableRegistry.register(Condition.class, Condition.MaxAge.NAME, Condition.MaxAge::new);, +        namedWritableRegistry.register(Condition.class, Condition.MaxDocs.NAME, Condition.MaxDocs::new);, +++ b/core/src/main/java/org/elasticsearch/indices/IndicesModule.java, +import org.elasticsearch.action.admin.indices.rollover.Condition;, +import org.elasticsearch.common.io.stream.NamedWriteableRegistry;, +    private final NamedWriteableRegistry namedWritableRegistry;, +    public IndicesModule(NamedWriteableRegistry namedWriteableRegistry) {, +        this.namedWritableRegistry = namedWriteableRegistry;, +        registerBuildInWritables();, +    }, +, +    private void registerBuildInWritables() {, +        namedWritableRegistry.register(Condition.class, Condition.MaxAge.NAME, Condition.MaxAge::new);, +        namedWritableRegistry.register(Condition.class, Condition.MaxDocs.NAME, Condition.MaxDocs::new);, +++ b/core/src/main/java/org/elasticsearch/node/Node.java, +            modules.add(new IndicesModule(namedWriteableRegistry));, +++ b/core/src/main/java/org/elasticsearch/indices/IndicesModule.java, +import org.elasticsearch.action.admin.indices.rollover.Condition;, +import org.elasticsearch.common.io.stream.NamedWriteableRegistry;, +    private final NamedWriteableRegistry namedWritableRegistry;, +    public IndicesModule(NamedWriteableRegistry namedWriteableRegistry) {, +        this.namedWritableRegistry = namedWriteableRegistry;, +        registerBuildInWritables();, +    }, +, +    private void registerBuildInWritables() {, +        namedWritableRegistry.register(Condition.class, Condition.MaxAge.NAME, Condition.MaxAge::new);, +        namedWritableRegistry.register(Condition.class, Condition.MaxDocs.NAME, Condition.MaxDocs::new);, +++ b/core/src/main/java/org/elasticsearch/node/Node.java, +            modules.add(new IndicesModule(namedWriteableRegistry));, +++ b/core/src/test/java/org/elasticsearch/action/admin/indices/rollover/RolloverIT.java, +import org.elasticsearch.common.unit.TimeValue;, +            .addMaxIndexAgeCondition(TimeValue.timeValueHours(4)).get();, +++ b/core/src/main/java/org/elasticsearch/indices/IndicesModule.java, +import org.elasticsearch.action.admin.indices.rollover.Condition;, +import org.elasticsearch.common.io.stream.NamedWriteableRegistry;, +    private final NamedWriteableRegistry namedWritableRegistry;, +    public IndicesModule(NamedWriteableRegistry namedWriteableRegistry) {, +        this.namedWritableRegistry = namedWriteableRegistry;, +        registerBuildInWritables();, +    }, +, +    private void registerBuildInWritables() {, +        namedWritableRegistry.register(Condition.class, Condition.MaxAge.NAME, Condition.MaxAge::new);, +        namedWritableRegistry.register(Condition.class, Condition.MaxDocs.NAME, Condition.MaxDocs::new);, +++ b/core/src/main/java/org/elasticsearch/node/Node.java, +            modules.add(new IndicesModule(namedWriteableRegistry));, +++ b/core/src/test/java/org/elasticsearch/action/admin/indices/rollover/RolloverIT.java, +import org.elasticsearch.common.unit.TimeValue;, +            .addMaxIndexAgeCondition(TimeValue.timeValueHours(4)).get();, +++ b/core/src/test/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverActionTests.java, +import org.elasticsearch.common.unit.TimeValue;, +import org.elasticsearch.common.util.set.Sets;, +import java.util.Set;, +        Set<Condition> conditions = Collections.emptySet();, +        assertTrue(TransportRolloverAction.satisfiesConditions(conditions, randomLong(),, +        conditions = Collections.singleton(new Condition.MaxAge(TimeValue.timeValueMillis(10)));, +        assertTrue(TransportRolloverAction.satisfiesConditions(conditions, randomLong(),, +            TimeValue.timeValueMillis(randomIntBetween(10, 100)).getMillis()));, +        assertFalse(TransportRolloverAction.satisfiesConditions(conditions, randomLong(),, +            TimeValue.timeValueMillis(randomIntBetween(0, 9)).getMillis()));, +        conditions = Collections.singleton(new Condition.MaxDocs(10L));, +        assertTrue(TransportRolloverAction.satisfiesConditions(conditions, randomIntBetween(10, 100),, +        assertFalse(TransportRolloverAction.satisfiesConditions(conditions, randomIntBetween(1, 9),, +        conditions = Sets.newHashSet(new Condition.MaxAge(TimeValue.timeValueMillis(100)), new Condition.MaxDocs(1000L));, +            TimeValue.timeValueMillis(randomIntBetween(100, 1000)).getMillis()));, +            TimeValue.timeValueMillis(randomIntBetween(100, 1000)).getMillis()));, +            TimeValue.timeValueMillis(randomIntBetween(0, 99)).getMillis()));, +        final RolloverRequest rolloverRequest = new RolloverRequest(sourceAlias);, +            TransportRolloverAction.validate(metaData, new RolloverRequest(aliasWithMultipleIndices));, +            TransportRolloverAction.validate(metaData, new RolloverRequest(randomFrom(index1, index2)));, +            TransportRolloverAction.validate(metaData, new RolloverRequest(randomAsciiOfLength(5)));, +        TransportRolloverAction.validate(metaData, new RolloverRequest(alias));, +++ b/core/src/main/java/org/elasticsearch/indices/IndicesModule.java, +import org.elasticsearch.action.admin.indices.rollover.Condition;, +import org.elasticsearch.common.io.stream.NamedWriteableRegistry;, +    private final NamedWriteableRegistry namedWritableRegistry;, +    public IndicesModule(NamedWriteableRegistry namedWriteableRegistry) {, +        this.namedWritableRegistry = namedWriteableRegistry;, +        registerBuildInWritables();, +    }, +, +    private void registerBuildInWritables() {, +        namedWritableRegistry.register(Condition.class, Condition.MaxAge.NAME, Condition.MaxAge::new);, +        namedWritableRegistry.register(Condition.class, Condition.MaxDocs.NAME, Condition.MaxDocs::new);, +++ b/core/src/main/java/org/elasticsearch/node/Node.java, +            modules.add(new IndicesModule(namedWriteableRegistry));, +++ b/core/src/test/java/org/elasticsearch/action/admin/indices/rollover/RolloverIT.java, +import org.elasticsearch.common.unit.TimeValue;, +            .addMaxIndexAgeCondition(TimeValue.timeValueHours(4)).get();]