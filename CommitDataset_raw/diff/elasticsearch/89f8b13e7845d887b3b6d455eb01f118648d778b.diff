[+++ b/src/test/java/org/elasticsearch/deleteByQuery/DeleteByQueryTests.java, +import static org.elasticsearch.test.hamcrest.ElasticSearchAssertions.assertHitCount;, +    @Test, +    public void testDeleteByFieldQuery() throws Exception {, +        client().admin().indices().prepareCreate("test").execute().actionGet();, +        int numDocs = atLeast(10);, +        for (int i = 0; i < numDocs; i++) {, +            client().prepareIndex("test", "test", Integer.toString(i)), +            .setRouting(randomAsciiOfLengthBetween(1,5)), +            .setSource("foo", "bar").get();, +        }, +        refresh();, +        assertHitCount(client().prepareCount("test").setQuery(QueryBuilders.fieldQuery("_id",Integer.toString(between(0,numDocs-1)))).get(), 1);, +        assertHitCount(client().prepareCount("test").setQuery(QueryBuilders.matchAllQuery()).get(), numDocs);, +        client().prepareDeleteByQuery("test"), +                .setQuery(QueryBuilders.fieldQuery("_id", Integer.toString(between(0,numDocs-1)))), +                .execute().actionGet();, +        refresh();, +        assertHitCount(client().prepareCount("test").setQuery(QueryBuilders.matchAllQuery()).get(), numDocs-1);, +, +    }, +]