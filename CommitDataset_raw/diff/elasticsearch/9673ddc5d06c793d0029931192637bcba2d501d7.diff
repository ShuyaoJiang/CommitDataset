[+++ b/core/src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeAction.java, +                    retry(null, masterNodeChangedPredicate);, +                        listener.onFailure(new MasterNotDiscoveredException(failure));, +++ b/core/src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeAction.java, +                    retry(null, masterNodeChangedPredicate);, +                        listener.onFailure(new MasterNotDiscoveredException(failure));, +++ b/core/src/main/java/org/elasticsearch/discovery/MasterNotDiscoveredException.java, +    public MasterNotDiscoveredException(Throwable cause) {, +        super(cause);, +    }, +, +++ b/core/src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeAction.java, +                    retry(null, masterNodeChangedPredicate);, +                        listener.onFailure(new MasterNotDiscoveredException(failure));, +++ b/core/src/main/java/org/elasticsearch/discovery/MasterNotDiscoveredException.java, +    public MasterNotDiscoveredException(Throwable cause) {, +        super(cause);, +    }, +, +++ b/core/src/test/java/org/elasticsearch/action/support/master/TransportMasterNodeActionTests.java, +        if (retryableBlock) {, +            try {, +                listener.get();, +                fail("Expected exception but returned proper result");, +            } catch (ExecutionException ex) {, +                assertThat(ex.getCause(), instanceOf(MasterNotDiscoveredException.class));, +                assertThat(ex.getCause().getCause(), instanceOf(ClusterBlockException.class));, +            }, +        } else {, +    }]