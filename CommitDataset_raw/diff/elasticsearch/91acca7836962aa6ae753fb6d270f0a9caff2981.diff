[+++ b/pom.xml, +        <lucene.version>4.6.1</lucene.version>, +++ b/pom.xml, +        <lucene.version>4.6.1</lucene.version>, +++ b/src/main/java/org/apache/lucene/search/vectorhighlight/CustomFieldQuery.java, +        if (sourceQuery instanceof SpanTermQuery) {, +            super.flatten(new TermQuery(((SpanTermQuery) sourceQuery).getTerm()), reader, flatQueries);, +++ b/pom.xml, +        <lucene.version>4.6.1</lucene.version>, +++ b/src/main/java/org/apache/lucene/search/vectorhighlight/CustomFieldQuery.java, +        if (sourceQuery instanceof SpanTermQuery) {, +            super.flatten(new TermQuery(((SpanTermQuery) sourceQuery).getTerm()), reader, flatQueries);, +++ b/src/main/java/org/elasticsearch/index/engine/internal/InternalEngine.java, +        return SegmentReaderUtils.segmentReader(reader.reader()).ramBytesUsed();, +++ b/pom.xml, +        <lucene.version>4.6.1</lucene.version>, +++ b/src/main/java/org/apache/lucene/search/vectorhighlight/CustomFieldQuery.java, +        if (sourceQuery instanceof SpanTermQuery) {, +            super.flatten(new TermQuery(((SpanTermQuery) sourceQuery).getTerm()), reader, flatQueries);, +++ b/src/main/java/org/elasticsearch/index/engine/internal/InternalEngine.java, +        return SegmentReaderUtils.segmentReader(reader.reader()).ramBytesUsed();, +++ b/src/test/java/org/elasticsearch/index/engine/internal/InternalEngineIntegrationTest.java]