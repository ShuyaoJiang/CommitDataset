[+++ b/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +        switch (type) {, +            case -1:, +            case 0:, +            case 1:, +            case 2:, +            case 3:, +            case 4:, +            case 5:, +            case 6:, +                readBytes(value, 0, bytesSize);, +            case 7:, +            case 8:, +                int size8 = readVInt();, +                Object[] list8 = new Object[size8];, +                for (int i = 0; i < size8; i++) {, +                    list8[i] = readGenericValue();, +                return list8;, +            case 9:, +                int size9 = readVInt();, +                Map map9 = new LinkedHashMap(size9);, +                for (int i = 0; i < size9; i++) {, +                    map9.put(readUTF(), readGenericValue());, +                return map9;, +            case 10:, +                int size10 = readVInt();, +                Map map10 = new HashMap(size10);, +                for (int i = 0; i < size10; i++) {, +                    map10.put(readUTF(), readGenericValue());, +                return map10;, +            case 11:, +            case 12:, +            case 13:, +            case 14:, +                return readBytesReference();, +            default:, +++ b/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +        switch (type) {, +            case -1:, +            case 0:, +            case 1:, +            case 2:, +            case 3:, +            case 4:, +            case 5:, +            case 6:, +                readBytes(value, 0, bytesSize);, +            case 7:, +            case 8:, +                int size8 = readVInt();, +                Object[] list8 = new Object[size8];, +                for (int i = 0; i < size8; i++) {, +                    list8[i] = readGenericValue();, +                return list8;, +            case 9:, +                int size9 = readVInt();, +                Map map9 = new LinkedHashMap(size9);, +                for (int i = 0; i < size9; i++) {, +                    map9.put(readUTF(), readGenericValue());, +                return map9;, +            case 10:, +                int size10 = readVInt();, +                Map map10 = new HashMap(size10);, +                for (int i = 0; i < size10; i++) {, +                    map10.put(readUTF(), readGenericValue());, +                return map10;, +            case 11:, +            case 12:, +            case 13:, +            case 14:, +                return readBytesReference();, +            default:, +++ b/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java, +        } else if (value instanceof BytesReference) {, +            writeByte((byte) 14);, +            writeBytesReference((BytesReference) value);]