[+++ b/src/main/java/org/elasticsearch/snapshots/RestoreService.java, +                                blocks.removeIndexBlock(renamedIndex, INDEX_CLOSED_BLOCK);, +++ b/src/main/java/org/elasticsearch/snapshots/RestoreService.java, +                                blocks.removeIndexBlock(renamedIndex, INDEX_CLOSED_BLOCK);, +++ b/src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreTests.java, +        logger.info("--> close just restored indices");, +        client.admin().indices().prepareClose("test-idx-1-copy", "test-idx-2-copy").get();, +, +        logger.info("--> and try to restore these indices again");, +        restoreSnapshotResponse = client.admin().cluster().prepareRestoreSnapshot("test-repo", "test-snap"), +                .setRenamePattern("(.+)").setRenameReplacement("$1-copy").setWaitForCompletion(true).execute().actionGet();, +        assertThat(restoreSnapshotResponse.getRestoreInfo().totalShards(), greaterThan(0));, +, +        ensureGreen();, +        assertThat(client.prepareCount("test-idx-1-copy").get().getCount(), equalTo(100L));, +        assertThat(client.prepareCount("test-idx-2-copy").get().getCount(), equalTo(100L));, +, +]