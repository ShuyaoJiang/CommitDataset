[+++ b/server/src/test/java/org/elasticsearch/index/shard/IndexShardRetentionLeaseTests.java, +import static org.hamcrest.Matchers.empty;, +            if (retentionLeases.isEmpty()) {, +                assertThat(IndexShard.getRetentionLeases(segmentCommitInfos), empty());, +            } else {, +            }, +                if (retentionLeases.isEmpty()) {, +                    assertThat(recoveredShard.getEngine().config().retentionLeasesSupplier().get(), empty());, +                } else {, +                }]