[+++ b/core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodeService.java, +        return new DiscoveryNode(Node.NODE_NAME_SETTING.get(settings), nodeId, publishAddress, attributes,, +                Collections.unmodifiableSet(roles), version);, +++ b/core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodeService.java, +        return new DiscoveryNode(Node.NODE_NAME_SETTING.get(settings), nodeId, publishAddress, attributes,, +                Collections.unmodifiableSet(roles), version);, +++ b/core/src/main/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPing.java, +        transportService.registerRequestHandler(ACTION_NAME, UnicastPingRequest::new, ThreadPool.Names.SAME,, +                new UnicastPingRequestHandler());]