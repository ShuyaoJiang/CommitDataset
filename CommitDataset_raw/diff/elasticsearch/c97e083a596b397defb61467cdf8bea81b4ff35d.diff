[+++ b/src/main/java/org/elasticsearch/alerts/ConfigurationManager.java, +import org.elasticsearch.action.index.IndexResponse;, +    public IndexResponse updateConfig(BytesReference settingsSource) throws IOException {, +, +        IndexResponse indexResponse = client.prepareIndex(AlertsStore.ALERT_INDEX, ConfigurationManager.CONFIG_TYPE, ConfigurationManager.GLOBAL_CONFIG_NAME), +                .setSource(settingsSource).get();, +, +, +        return indexResponse;, +++ b/src/main/java/org/elasticsearch/alerts/ConfigurationManager.java, +import org.elasticsearch.action.index.IndexResponse;, +    public IndexResponse updateConfig(BytesReference settingsSource) throws IOException {, +, +        IndexResponse indexResponse = client.prepareIndex(AlertsStore.ALERT_INDEX, ConfigurationManager.CONFIG_TYPE, ConfigurationManager.GLOBAL_CONFIG_NAME), +                .setSource(settingsSource).get();, +, +, +        return indexResponse;, +++ b/src/main/java/org/elasticsearch/alerts/actions/SmtpAlertActionFactory.java, +, +        if (settings == null) {, +            throw new ElasticsearchException("No settings loaded for Smtp (email)");, +        }, +, +++ b/src/main/java/org/elasticsearch/alerts/ConfigurationManager.java, +import org.elasticsearch.action.index.IndexResponse;, +    public IndexResponse updateConfig(BytesReference settingsSource) throws IOException {, +, +        IndexResponse indexResponse = client.prepareIndex(AlertsStore.ALERT_INDEX, ConfigurationManager.CONFIG_TYPE, ConfigurationManager.GLOBAL_CONFIG_NAME), +                .setSource(settingsSource).get();, +, +, +        return indexResponse;, +++ b/src/main/java/org/elasticsearch/alerts/actions/SmtpAlertActionFactory.java, +, +        if (settings == null) {, +            throw new ElasticsearchException("No settings loaded for Smtp (email)");, +        }, +, +++ b/src/main/java/org/elasticsearch/alerts/transport/actions/config/TransportConfigAlertAction.java, +            IndexResponse indexResponse = configManager.updateConfig(request.getConfigSource());]