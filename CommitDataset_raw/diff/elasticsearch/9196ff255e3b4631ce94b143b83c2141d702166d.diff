[+++ b/buildSrc/build.gradle, +  compile 'de.thetaphi:forbiddenapis:2.2', +++ b/buildSrc/build.gradle, +  compile 'de.thetaphi:forbiddenapis:2.2', +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/build.gradle, +  compile 'de.thetaphi:forbiddenapis:2.2', +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/src/main/resources/forbidden/es-all-signatures.txt, +@defaultMessage Don't use MethodHandles in slow ways, don't be lenient in tests., +java.lang.invoke.MethodHandle#invoke(java.lang.Object[]), +++ b/buildSrc/build.gradle, +  compile 'de.thetaphi:forbiddenapis:2.2', +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/src/main/resources/forbidden/es-all-signatures.txt, +@defaultMessage Don't use MethodHandles in slow ways, don't be lenient in tests., +java.lang.invoke.MethodHandle#invoke(java.lang.Object[]), +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/buildSrc/build.gradle, +  compile 'de.thetaphi:forbiddenapis:2.2', +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/src/main/resources/forbidden/es-all-signatures.txt, +@defaultMessage Don't use MethodHandles in slow ways, don't be lenient in tests., +java.lang.invoke.MethodHandle#invoke(java.lang.Object[]), +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/core/src/main/java/org/elasticsearch/action/main/TransportMainAction.java, +                               ClusterService clusterService) {, +            new MainResponse(Node.NODE_NAME_SETTING.get(settings), Version.CURRENT, clusterState.getClusterName(), Build.CURRENT,, +                available));, +++ b/buildSrc/build.gradle, +  compile 'de.thetaphi:forbiddenapis:2.2', +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/src/main/resources/forbidden/es-all-signatures.txt, +@defaultMessage Don't use MethodHandles in slow ways, don't be lenient in tests., +java.lang.invoke.MethodHandle#invoke(java.lang.Object[]), +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/core/src/main/java/org/elasticsearch/action/main/TransportMainAction.java, +                               ClusterService clusterService) {, +            new MainResponse(Node.NODE_NAME_SETTING.get(settings), Version.CURRENT, clusterState.getClusterName(), Build.CURRENT,, +                available));, +++ b/core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java, +    public ReplicationOperation(Request request, Primary<Request, ReplicaRequest, PrimaryResultT> primary,, +    public void execute() throws Exception {, +    public interface Primary<, +    public interface Replicas<ReplicaRequest extends ReplicationRequest<ReplicaRequest>> {, +    public interface PrimaryResult<R extends ReplicationRequest<R>> {, +++ b/buildSrc/build.gradle, +  compile 'de.thetaphi:forbiddenapis:2.2', +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/src/main/resources/forbidden/es-all-signatures.txt, +@defaultMessage Don't use MethodHandles in slow ways, don't be lenient in tests., +java.lang.invoke.MethodHandle#invoke(java.lang.Object[]), +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/core/src/main/java/org/elasticsearch/action/main/TransportMainAction.java, +                               ClusterService clusterService) {, +            new MainResponse(Node.NODE_NAME_SETTING.get(settings), Version.CURRENT, clusterState.getClusterName(), Build.CURRENT,, +                available));, +++ b/core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java, +    public ReplicationOperation(Request request, Primary<Request, ReplicaRequest, PrimaryResultT> primary,, +    public void execute() throws Exception {, +    public interface Primary<, +    public interface Replicas<ReplicaRequest extends ReplicationRequest<ReplicaRequest>> {, +    public interface PrimaryResult<R extends ReplicationRequest<R>> {, +++ b/core/src/main/java/org/elasticsearch/client/FilterClient.java, +import org.elasticsearch.common.settings.Settings;, +import org.elasticsearch.threadpool.ThreadPool;, +        this(in.settings(), in.threadPool(), in);, +    }, +, +    /**, +     * A Constructor that allows to pass settings and threadpool separately. This is useful if the, +     * client is a proxy and not yet fully constructed ie. both dependencies are not available yet., +     */, +    protected FilterClient(Settings settings, ThreadPool threadPool, Client in) {, +        super(settings, threadPool);, +++ b/buildSrc/build.gradle, +  compile 'de.thetaphi:forbiddenapis:2.2', +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/src/main/resources/forbidden/es-all-signatures.txt, +@defaultMessage Don't use MethodHandles in slow ways, don't be lenient in tests., +java.lang.invoke.MethodHandle#invoke(java.lang.Object[]), +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/core/src/main/java/org/elasticsearch/action/main/TransportMainAction.java, +                               ClusterService clusterService) {, +            new MainResponse(Node.NODE_NAME_SETTING.get(settings), Version.CURRENT, clusterState.getClusterName(), Build.CURRENT,, +                available));, +++ b/core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java, +    public ReplicationOperation(Request request, Primary<Request, ReplicaRequest, PrimaryResultT> primary,, +    public void execute() throws Exception {, +    public interface Primary<, +    public interface Replicas<ReplicaRequest extends ReplicationRequest<ReplicaRequest>> {, +    public interface PrimaryResult<R extends ReplicationRequest<R>> {, +++ b/core/src/main/java/org/elasticsearch/client/FilterClient.java, +import org.elasticsearch.common.settings.Settings;, +import org.elasticsearch.threadpool.ThreadPool;, +        this(in.settings(), in.threadPool(), in);, +    }, +, +    /**, +     * A Constructor that allows to pass settings and threadpool separately. This is useful if the]