[+++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +            File configFile = new File(node.pathConf, 'elasticsearch.yml'), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +            File configFile = new File(node.pathConf, 'elasticsearch.yml'), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/NodeInfo.groovy, +    File pathConf, +        pathConf = pathConf(baseDir, config.distribution, nodeVersion), +        configFile = new File(pathConf, 'elasticsearch.yml'), +        env.put('ES_PATH_CONF', pathConf), +            args.addAll("-E", "path.conf=${pathConf}"), +    static File pathConf(File baseDir, String distro, String nodeVersion) {, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +            File configFile = new File(node.pathConf, 'elasticsearch.yml'), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/NodeInfo.groovy, +    File pathConf, +        pathConf = pathConf(baseDir, config.distribution, nodeVersion), +        configFile = new File(pathConf, 'elasticsearch.yml'), +        env.put('ES_PATH_CONF', pathConf), +            args.addAll("-E", "path.conf=${pathConf}"), +    static File pathConf(File baseDir, String distro, String nodeVersion) {, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/RestIntegTestTask.groovy, +        runner.systemProperty('tests.config.dir', "${-> nodes[0].pathConf}"), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +            File configFile = new File(node.pathConf, 'elasticsearch.yml'), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/NodeInfo.groovy, +    File pathConf, +        pathConf = pathConf(baseDir, config.distribution, nodeVersion), +        configFile = new File(pathConf, 'elasticsearch.yml'), +        env.put('ES_PATH_CONF', pathConf), +            args.addAll("-E", "path.conf=${pathConf}"), +    static File pathConf(File baseDir, String distro, String nodeVersion) {, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/RestIntegTestTask.groovy, +        runner.systemProperty('tests.config.dir', "${-> nodes[0].pathConf}"), +++ b/distribution/build.gradle, +      'def': 'if [ -z "$ES_PATH_CONF" ]; then ES_PATH_CONF="$ES_HOME"/config; done',, +       'def': 'if [ -z "$ES_PATH_CONF" ]; then ES_PATH_CONF="$ES_HOME"/config; fi',, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +            File configFile = new File(node.pathConf, 'elasticsearch.yml'), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/NodeInfo.groovy, +    File pathConf, +        pathConf = pathConf(baseDir, config.distribution, nodeVersion), +        configFile = new File(pathConf, 'elasticsearch.yml'), +        env.put('ES_PATH_CONF', pathConf), +            args.addAll("-E", "path.conf=${pathConf}"), +    static File pathConf(File baseDir, String distro, String nodeVersion) {, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/RestIntegTestTask.groovy, +        runner.systemProperty('tests.config.dir', "${-> nodes[0].pathConf}"), +++ b/distribution/build.gradle, +      'def': 'if [ -z "$ES_PATH_CONF" ]; then ES_PATH_CONF="$ES_HOME"/config; done',, +       'def': 'if [ -z "$ES_PATH_CONF" ]; then ES_PATH_CONF="$ES_HOME"/config; fi',, +++ b/distribution/deb/src/main/packaging/init.d/elasticsearch, +ES_PATH_CONF=/etc/$NAME, +export ES_PATH_CONF, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +            File configFile = new File(node.pathConf, 'elasticsearch.yml'), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/NodeInfo.groovy, +    File pathConf, +        pathConf = pathConf(baseDir, config.distribution, nodeVersion), +        configFile = new File(pathConf, 'elasticsearch.yml'), +        env.put('ES_PATH_CONF', pathConf), +            args.addAll("-E", "path.conf=${pathConf}"), +    static File pathConf(File baseDir, String distro, String nodeVersion) {, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/RestIntegTestTask.groovy, +        runner.systemProperty('tests.config.dir', "${-> nodes[0].pathConf}"), +++ b/distribution/build.gradle, +      'def': 'if [ -z "$ES_PATH_CONF" ]; then ES_PATH_CONF="$ES_HOME"/config; done',, +       'def': 'if [ -z "$ES_PATH_CONF" ]; then ES_PATH_CONF="$ES_HOME"/config; fi',, +++ b/distribution/deb/src/main/packaging/init.d/elasticsearch, +ES_PATH_CONF=/etc/$NAME, +export ES_PATH_CONF, +++ b/distribution/rpm/src/main/packaging/init.d/elasticsearch, +ES_PATH_CONF="${path.conf}", +export ES_PATH_CONF, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +            File configFile = new File(node.pathConf, 'elasticsearch.yml'), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/NodeInfo.groovy, +    File pathConf, +        pathConf = pathConf(baseDir, config.distribution, nodeVersion), +        configFile = new File(pathConf, 'elasticsearch.yml'), +        env.put('ES_PATH_CONF', pathConf), +            args.addAll("-E", "path.conf=${pathConf}"), +    static File pathConf(File baseDir, String distro, String nodeVersion) {, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/RestIntegTestTask.groovy, +        runner.systemProperty('tests.config.dir', "${-> nodes[0].pathConf}"), +++ b/distribution/build.gradle, +      'def': 'if [ -z "$ES_PATH_CONF" ]; then ES_PATH_CONF="$ES_HOME"/config; done',, +       'def': 'if [ -z "$ES_PATH_CONF" ]; then ES_PATH_CONF="$ES_HOME"/config; fi',, +++ b/distribution/deb/src/main/packaging/init.d/elasticsearch, +ES_PATH_CONF=/etc/$NAME, +export ES_PATH_CONF, +++ b/distribution/rpm/src/main/packaging/init.d/elasticsearch, +ES_PATH_CONF="${path.conf}", +export ES_PATH_CONF, +++ b/distribution/src/main/packaging/env/elasticsearch, +ES_PATH_CONF=${path.conf}, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +            File configFile = new File(node.pathConf, 'elasticsearch.yml'), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/NodeInfo.groovy, +    File pathConf, +        pathConf = pathConf(baseDir, config.distribution, nodeVersion)]