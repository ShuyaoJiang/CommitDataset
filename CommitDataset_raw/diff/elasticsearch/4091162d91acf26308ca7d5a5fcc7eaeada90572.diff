[+++ b/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java, +    private final static String OP_TYPE_UPDATE = "update";, +    private final static String OP_TYPE_DELETE = "delete";, +, +                    responses[requestIndex] = new BulkItemResponse(item.id(), OP_TYPE_DELETE, deleteResponse);, +                    responses[requestIndex] = new BulkItemResponse(item.id(), OP_TYPE_DELETE,, +                                responses[requestIndex] = new BulkItemResponse(item.id(), OP_TYPE_UPDATE, updateResponse);, +                                responses[requestIndex] = new BulkItemResponse(item.id(), OP_TYPE_UPDATE, updateResponse);, +                                responses[requestIndex] = new BulkItemResponse(item.id(), OP_TYPE_UPDATE, updateResult.noopResult);, +                                responses[requestIndex] = new BulkItemResponse(item.id(), OP_TYPE_UPDATE,, +                                responses[requestIndex] = new BulkItemResponse(item.id(), OP_TYPE_UPDATE, new BulkItemResponse.Failure(updateRequest.index(), updateRequest.type(), updateRequest.id(), t));, +                                        responses[requestIndex] = new BulkItemResponse(item.id(), OP_TYPE_UPDATE,, +                                        responses[requestIndex] = new BulkItemResponse(item.id(), OP_TYPE_DELETE,]