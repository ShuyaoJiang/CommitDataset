[+++ b/core/src/main/java/org/elasticsearch/indices/analysis/PreBuiltTokenFilters.java, +import org.elasticsearch.index.analysis.MultiTermAwareComponent;, +        @Override, +        protected boolean isMultiTermAware() {, +            return true;, +        }, +        @Override, +        protected boolean isMultiTermAware() {, +            return true;, +        }, +        @Override, +        protected boolean isMultiTermAware() {, +            return true;, +        }, +        @Override, +        protected boolean isMultiTermAware() {, +            return true;, +        }, +        @Override, +        protected boolean isMultiTermAware() {, +            return true;, +        }, +        @Override, +        protected boolean isMultiTermAware() {, +            return true;, +        }, +        @Override, +        protected boolean isMultiTermAware() {, +            return true;, +        }, +        @Override, +        protected boolean isMultiTermAware() {, +            return true;, +        }, +        @Override, +        protected boolean isMultiTermAware() {, +            return true;, +        }, +        @Override, +        protected boolean isMultiTermAware() {, +            return true;, +        }, +        @Override, +        protected boolean isMultiTermAware() {, +            return true;, +        }, +        @Override, +        protected boolean isMultiTermAware() {, +            return true;, +        }, +        @Override, +        protected boolean isMultiTermAware() {, +            return true;, +        }, +        @Override, +        protected boolean isMultiTermAware() {, +            return true;, +        }, +    protected boolean isMultiTermAware() {, +        return false;, +    }, +, +    private interface MultiTermAwareTokenFilterFactory extends TokenFilterFactory, MultiTermAwareComponent {}, +, +            final String finalName = name().toLowerCase(Locale.ROOT);, +            if (isMultiTermAware()) {, +                factory = new MultiTermAwareTokenFilterFactory() {, +                        return finalName;, +                        return PreBuiltTokenFilters.this.create(tokenStream, version);, +                    }, +, +                    @Override, +                    public Object getMultiTermComponent() {, +                        return this;, +            } else {, +                factory = new TokenFilterFactory() {, +                    @Override, +                    public String name() {, +                        return finalName;, +                    }, +, +                    @Override, +                    public TokenStream create(TokenStream tokenStream) {, +                        return PreBuiltTokenFilters.this.create(tokenStream, version);, +                    }, +                };, +            }, +++ b/core/src/main/java/org/elasticsearch/indices/analysis/PreBuiltTokenFilters.java, +import org.elasticsearch.index.analysis.MultiTermAwareComponent;, +        @Override, +        protected boolean isMultiTermAware() {, +            return true;, +        }, +        @Override, +        protected boolean isMultiTermAware() {, +            return true;, +        }, +        @Override, +        protected boolean isMultiTermAware() {, +            return true;]