[+++ b/x-pack/plugin/security/src/test/java/org/elasticsearch/xpack/security/authc/ApiKeyIntegTests.java, +import org.elasticsearch.ElasticsearchException;, +import org.elasticsearch.test.junit.annotations.TestLogging;, +import static org.hamcrest.Matchers.isIn;, +import static org.hamcrest.Matchers.notNullValue;, +@TestLogging("org.elasticsearch.xpack.security.authc.ApiKeyService:TRACE"), +        logger.info("searched and found API key with doc id = " + docId.get());, +        assertThat(docId.get(), is(notNullValue()));, +        assertThat(docId.get(), is(responses.get(0).getId()));, +        if (invalidateResponse.getErrors().isEmpty() == false) {, +            logger.error("error occurred while invalidating API key by id : " + invalidateResponse.getErrors().stream(), +                    .map(ElasticsearchException::getMessage), +                    .collect(Collectors.joining(", ")));, +        }, +        logger.info("searched and found API key with doc id = " + docId.get());, +        assertThat(docId.get(), is(notNullValue()));, +        assertThat(docId.get(), isIn(responses.stream().map(CreateApiKeyResponse::getId).collect(Collectors.toList())));, +        logger.info("searched and found API key with doc id = " + docId.get());, +        assertThat(docId.get(), is(notNullValue()));, +        assertThat(docId.get(), isIn(responses.stream().map(CreateApiKeyResponse::getId).collect(Collectors.toList())));, +        assertThat(responses.size(), is(noOfApiKeys));]