[+++ b/server/src/main/java/org/elasticsearch/snapshots/SnapshotsService.java, +import org.elasticsearch.common.util.concurrent.AbstractRunnable;, +                    beginSnapshot(newState, newSnapshot, request.partial(), listener);, +        threadPool.executor(ThreadPool.Names.SNAPSHOT).execute(new AbstractRunnable() {, +, +            boolean snapshotCreated;, +, +            @Override, +            protected void doRun() {, +                    String failure;, +            }, +, +            @Override, +            public void onFailure(Exception e) {, +        });, +        threadPool.executor(ThreadPool.Names.SNAPSHOT).execute(new AbstractRunnable() {, +            @Override, +            protected void doRun() {, +            }, +, +            @Override, +            public void onFailure(final Exception e) {, +                Snapshot snapshot = entry.snapshot();]