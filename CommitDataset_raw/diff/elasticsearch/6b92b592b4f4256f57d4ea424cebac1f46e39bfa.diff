[+++ b/src/main/java/org/elasticsearch/index/fielddata/AbstractIndexFieldData.java, +import org.apache.lucene.index.IndexReader;, +, +    @Override, +    public void clear(IndexReader reader) {, +        cache.clear(index, reader);, +    }, +++ b/src/main/java/org/elasticsearch/index/fielddata/AbstractIndexFieldData.java, +import org.apache.lucene.index.IndexReader;, +, +    @Override, +    public void clear(IndexReader reader) {, +        cache.clear(index, reader);, +    }, +++ b/src/main/java/org/elasticsearch/index/fielddata/IndexFieldData.java, +import org.apache.lucene.index.IndexReader;, +    void clear(IndexReader reader);, +, +++ b/src/main/java/org/elasticsearch/index/fielddata/AbstractIndexFieldData.java, +import org.apache.lucene.index.IndexReader;, +, +    @Override, +    public void clear(IndexReader reader) {, +        cache.clear(index, reader);, +    }, +++ b/src/main/java/org/elasticsearch/index/fielddata/IndexFieldData.java, +import org.apache.lucene.index.IndexReader;, +    void clear(IndexReader reader);, +, +++ b/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataCache.java, +import org.apache.lucene.index.IndexReader;, +    void clear(Index index, IndexReader reader);, +, +, +        @Override, +        public void clear(Index index, IndexReader reader) {, +            cache.invalidate(reader.getCoreCacheKey());, +        }, +++ b/src/main/java/org/elasticsearch/index/fielddata/AbstractIndexFieldData.java, +import org.apache.lucene.index.IndexReader;, +, +    @Override, +    public void clear(IndexReader reader) {, +        cache.clear(index, reader);, +    }, +++ b/src/main/java/org/elasticsearch/index/fielddata/IndexFieldData.java, +import org.apache.lucene.index.IndexReader;, +    void clear(IndexReader reader);, +, +++ b/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataCache.java, +import org.apache.lucene.index.IndexReader;, +    void clear(Index index, IndexReader reader);, +, +, +        @Override, +        public void clear(Index index, IndexReader reader) {, +            cache.invalidate(reader.getCoreCacheKey());, +        }, +++ b/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java, +import org.apache.lucene.index.IndexReader;, +    public void clear(IndexReader reader) {, +        for (IndexFieldData indexFieldData : loadedFieldData.values()) {, +            indexFieldData.clear(reader);, +        }, +    }, +, +++ b/src/main/java/org/elasticsearch/index/fielddata/AbstractIndexFieldData.java, +import org.apache.lucene.index.IndexReader;, +, +    @Override, +    public void clear(IndexReader reader) {, +        cache.clear(index, reader);, +    }, +++ b/src/main/java/org/elasticsearch/index/fielddata/IndexFieldData.java, +import org.apache.lucene.index.IndexReader;, +    void clear(IndexReader reader);, +, +++ b/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataCache.java, +import org.apache.lucene.index.IndexReader;, +    void clear(Index index, IndexReader reader);, +, +, +        @Override, +        public void clear(Index index, IndexReader reader) {, +            cache.invalidate(reader.getCoreCacheKey());, +        }, +++ b/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java, +import org.apache.lucene.index.IndexReader;, +    public void clear(IndexReader reader) {, +        for (IndexFieldData indexFieldData : loadedFieldData.values()) {, +            indexFieldData.clear(reader);, +        }, +    }, +, +++ b/src/main/java/org/elasticsearch/index/percolator/PercolatorExecutor.java, +import org.elasticsearch.index.fielddata.IndexFieldDataService;, +    private final IndexFieldDataService fieldDataService;, +                              IndexCache indexCache, IndexFieldDataService fieldDataService) {, +        this.fieldDataService = fieldDataService;, +            fieldDataService.clear(searcher.getIndexReader());]