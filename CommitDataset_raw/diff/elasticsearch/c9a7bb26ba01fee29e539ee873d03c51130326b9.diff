[+++ b/src/main/java/org/elasticsearch/common/lucene/docset/DocIdSets.java, +import org.apache.lucene.util.Version;, +import org.elasticsearch.common.lucene.Lucene;, +    static {, +        // TODO when upgrading to Lucene 4.5. Lucene's CachingWrapperFilter now doesn't use FixedBitSet all the time in favor of, +        // more memory-efficient implementations. Maybe we should do the same in toCacheable?, +        assert Version.LUCENE_44.onOrAfter(Lucene.VERSION);, +    }, +]