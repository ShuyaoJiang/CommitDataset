[+++ b/src/main/java/org/elasticsearch/index/mapper/MapperService.java, +++ b/src/main/java/org/elasticsearch/index/mapper/MapperService.java, +++ b/src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggestParser.java, +import org.elasticsearch.index.mapper.FieldMapper;, +        FieldMapper fieldMapper = mapperService.smartNameFieldMapper(suggestion.getField());, +        if (fieldMapper == null) {, +        } else if (suggestion.getAnalyzer() == null) {, +            // no analyzer name passed in, so try the field's analyzer, or the default analyzer, +            if (fieldMapper.searchAnalyzer() == null) {, +                suggestion.setAnalyzer(mapperService.searchAnalyzer());, +            } else {, +                suggestion.setAnalyzer(fieldMapper.searchAnalyzer());, +            }, +            final ShingleTokenFilterFactory.Factory shingleFilterFactory = SuggestUtils.getShingleFilterFactory(suggestion.getAnalyzer());]