[+++ b/docs/reference/search/aggregations/bucket/histogram-aggregation.asciidoc, +It is also possible to order the buckets based on a "deeper" aggregation in the hierarchy. This is supported as long, +as the aggregations path are of a single-bucket type, where the last aggregation in the path may either by a single-bucket, +one or a metrics one. If it's a single-bucket type, the order will be defined by the number of docs in the bucket (i.e. `doc_count`),, +in case it's a metrics one, the same rules as above apply (where the path must indicate the metric name to sort by in case of, +a multi-value metrics aggregation, and in case of a single-value metrics aggregation the sort will be applied on that value)., +, +The path must be defined in the following form:, +, +--------------------------------------------------, +AGG_SEPARATOR       :=  '>', +METRIC_SEPARATOR    :=  '.', +AGG_NAME            :=  <the name of the aggregation>, +METRIC              :=  <the name of the metric (in case of multi-value metrics aggregation)>, +PATH                :=  <AGG_NAME>[<AGG_SEPARATOR><AGG_NAME>]*[<METRIC_SEPARATOR><METRIC>], +--------------------------------------------------, +, +[source,js], +--------------------------------------------------, +{, +    "aggs" : {, +        "prices" : {, +            "histogram" : {, +                "field" : "price",, +                "interval" : 50,, +                "order" : { "promoted_products>rating_stats.avg" : "desc" } <1>, +            },, +            "aggs" : {, +                "promoted_products" : {, +                    "filter" : { "term" : { "promoted" : true }},, +                    "aggs" : {, +                        "rating_stats" : { "stats" : { "field" : "rating" }}, +                    }, +                }, +            }, +        }, +    }, +}, +--------------------------------------------------, +, +The above will sort the buckets based on the avg rating among the promoted products, +, +, +++ b/docs/reference/search/aggregations/bucket/histogram-aggregation.asciidoc, +It is also possible to order the buckets based on a "deeper" aggregation in the hierarchy. This is supported as long, +as the aggregations path are of a single-bucket type, where the last aggregation in the path may either by a single-bucket, +one or a metrics one. If it's a single-bucket type, the order will be defined by the number of docs in the bucket (i.e. `doc_count`),, +in case it's a metrics one, the same rules as above apply (where the path must indicate the metric name to sort by in case of, +a multi-value metrics aggregation, and in case of a single-value metrics aggregation the sort will be applied on that value)., +, +The path must be defined in the following form:, +, +--------------------------------------------------, +AGG_SEPARATOR       :=  '>', +METRIC_SEPARATOR    :=  '.', +AGG_NAME            :=  <the name of the aggregation>, +METRIC              :=  <the name of the metric (in case of multi-value metrics aggregation)>, +PATH                :=  <AGG_NAME>[<AGG_SEPARATOR><AGG_NAME>]*[<METRIC_SEPARATOR><METRIC>], +--------------------------------------------------, +, +[source,js], +--------------------------------------------------, +{, +    "aggs" : {, +        "prices" : {, +            "histogram" : {, +                "field" : "price",, +                "interval" : 50,, +                "order" : { "promoted_products>rating_stats.avg" : "desc" } <1>, +            },, +            "aggs" : {, +                "promoted_products" : {, +                    "filter" : { "term" : { "promoted" : true }},, +                    "aggs" : {, +                        "rating_stats" : { "stats" : { "field" : "rating" }}, +                    }, +                }, +            }, +        }, +    }, +}, +--------------------------------------------------, +, +The above will sort the buckets based on the avg rating among the promoted products, +, +, +++ b/docs/reference/search/aggregations/bucket/terms-aggregation.asciidoc, +It is also possible to order the buckets based on a "deeper" aggregation in the hierarchy. This is supported as long, +as the aggregations path are of a single-bucket type, where the last aggregation in the path may either by a single-bucket, +one or a metrics one. If it's a single-bucket type, the order will be defined by the number of docs in the bucket (i.e. `doc_count`),, +in case it's a metrics one, the same rules as above apply (where the path must indicate the metric name to sort by in case of, +a multi-value metrics aggregation, and in case of a single-value metrics aggregation the sort will be applied on that value)., +, +The path must be defined in the following form:, +, +--------------------------------------------------, +AGG_SEPARATOR       :=  '>', +METRIC_SEPARATOR    :=  '.', +AGG_NAME            :=  <the name of the aggregation>, +METRIC              :=  <the name of the metric (in case of multi-value metrics aggregation)>]