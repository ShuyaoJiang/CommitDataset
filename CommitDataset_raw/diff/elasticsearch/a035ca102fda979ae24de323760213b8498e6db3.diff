[+++ b/core/src/main/java/org/elasticsearch/monitor/jvm/JvmStats.java, +import org.elasticsearch.common.Nullable;, +import java.util.Collections;, +        Mem mem = new Mem(heapCommitted, heapUsed, heapMax, nonHeapCommitted, nonHeapUsed, Collections.unmodifiableList(pools));, +        private final List<MemoryPool> pools;, +        public Mem(long heapCommitted, long heapUsed, long heapMax, long nonHeapCommitted, long nonHeapUsed, List<MemoryPool> pools) {, +            pools = in.readList(MemoryPool::new);, +            out.writeList(pools);, +            return pools.iterator();, +++ b/core/src/main/java/org/elasticsearch/monitor/jvm/JvmStats.java, +import org.elasticsearch.common.Nullable;, +import java.util.Collections;, +        Mem mem = new Mem(heapCommitted, heapUsed, heapMax, nonHeapCommitted, nonHeapUsed, Collections.unmodifiableList(pools));, +        private final List<MemoryPool> pools;, +        public Mem(long heapCommitted, long heapUsed, long heapMax, long nonHeapCommitted, long nonHeapUsed, List<MemoryPool> pools) {, +            pools = in.readList(MemoryPool::new);, +            out.writeList(pools);, +            return pools.iterator();, +++ b/core/src/test/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStatsTests.java, +            List<JvmStats.MemoryPool> memoryPools = new ArrayList<>(numMemoryPools);, +                memoryPools.add(new JvmStats.MemoryPool(randomAsciiOfLengthBetween(3, 10), randomPositiveLong(),, +                        randomPositiveLong(), randomPositiveLong(), randomPositiveLong()));]