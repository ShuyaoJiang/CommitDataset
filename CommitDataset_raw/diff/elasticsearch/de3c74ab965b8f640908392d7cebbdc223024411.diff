[+++ b/src/main/java/org/apache/lucene/search/vectorhighlight/AbstractFragmentsBuilder.java, +        fragInfos = getWeightedFragInfoList(fragInfos);, +, +++ b/src/main/java/org/apache/lucene/search/vectorhighlight/AbstractFragmentsBuilder.java, +        fragInfos = getWeightedFragInfoList(fragInfos);, +, +++ b/src/main/java/org/elasticsearch/search/highlight/HighlightPhase.java, +import org.elasticsearch.common.component.AbstractComponent;, +import org.elasticsearch.common.inject.Inject;, +import org.elasticsearch.common.settings.Settings;, +public class HighlightPhase extends AbstractComponent implements FetchSubPhase {, +    private final boolean termVectorMultiValue;, +, +    @Inject, +    public HighlightPhase(Settings settings) {, +        super(settings);, +        this.termVectorMultiValue = componentSettings.getAsBoolean("term_vector_multi_value", true);, +    }, +, +                        AbstractFragmentsBuilder fragmentsBuilder;, +                        fragmentsBuilder.setDiscreteMultiValueHighlighting(termVectorMultiValue);]