[+++ b/distribution/src/bin/elasticsearch-shard, +#!/bin/bash, +, +ES_MAIN_CLASS=org.elasticsearch.index.shard.ShardToolCli \, +  "`dirname "$0"`"/elasticsearch-cli \, +  "$@", +++ b/distribution/src/bin/elasticsearch-shard, +#!/bin/bash, +, +ES_MAIN_CLASS=org.elasticsearch.index.shard.ShardToolCli \, +  "`dirname "$0"`"/elasticsearch-cli \, +  "$@", +++ b/distribution/src/bin/elasticsearch-shard.bat, +@echo off, +, +setlocal enabledelayedexpansion, +setlocal enableextensions, +, +set ES_MAIN_CLASS=org.elasticsearch.index.shard.ShardToolCli, +call "%~dp0elasticsearch-cli.bat" ^, +  %%* ^, +  || exit /b 1, +, +endlocal, +endlocal, +++ b/distribution/src/bin/elasticsearch-shard, +#!/bin/bash, +, +ES_MAIN_CLASS=org.elasticsearch.index.shard.ShardToolCli \, +  "`dirname "$0"`"/elasticsearch-cli \, +  "$@", +++ b/distribution/src/bin/elasticsearch-shard.bat, +@echo off, +, +setlocal enabledelayedexpansion, +setlocal enableextensions, +, +set ES_MAIN_CLASS=org.elasticsearch.index.shard.ShardToolCli, +call "%~dp0elasticsearch-cli.bat" ^, +  %%* ^, +  || exit /b 1, +, +endlocal, +endlocal, +++ b/docs/reference/commands/index.asciidoc, +* <<shard-tool>>, +include::shard-tool.asciidoc[], +++ b/distribution/src/bin/elasticsearch-shard, +#!/bin/bash, +, +ES_MAIN_CLASS=org.elasticsearch.index.shard.ShardToolCli \, +  "`dirname "$0"`"/elasticsearch-cli \, +  "$@", +++ b/distribution/src/bin/elasticsearch-shard.bat, +@echo off, +, +setlocal enabledelayedexpansion, +setlocal enableextensions, +, +set ES_MAIN_CLASS=org.elasticsearch.index.shard.ShardToolCli, +call "%~dp0elasticsearch-cli.bat" ^, +  %%* ^, +  || exit /b 1, +, +endlocal, +endlocal, +++ b/docs/reference/commands/index.asciidoc, +* <<shard-tool>>, +include::shard-tool.asciidoc[], +++ b/docs/reference/commands/shard-tool.asciidoc, +[[shard-tool]], +== elasticsearch-shard, +, +In some cases the Lucene index or translog of a shard copy can become, +corrupted. The `elasticsearch-shard` command enables you to remove corrupted, +parts of the shard if a good copy of the shard cannot be recovered, +automatically or restored from backup., +, +[WARNING], +You will lose the corrupted data when you run `elasticsearch-shard`.  This tool, +should only be used as a last resort if there is no way to recover from another, +copy of the shard or restore a snapshot., +, +When Elasticsearch detects that a shard's data is corrupted, it fails that, +shard copy and refuses to use it. Under normal conditions, the shard is, +automatically recovered from another copy. If no good copy of the shard is, +available and you cannot restore from backup, you can use `elasticsearch-shard`, +to remove the corrupted data and restore access to any remaining data in, +unaffected segments., +, +[WARNING], +Stop Elasticsearch before running `elasticsearch-shard`., +, +To remove corrupted shard data use the `remove-corrupted-data` subcommand., +, +There are two ways to specify the path:, +, +* Specify the index name and shard name with the `--index` and `--shard-id`, +  options., +* Use the `--dir` option to specify the full path to the corrupted index or]