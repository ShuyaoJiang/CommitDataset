[+++ b/core/src/main/java/org/elasticsearch/action/search/SearchRequest.java, +        template = in.readOptionalStreamable(Template::new);, +        out.writeOptionalStreamable(template);, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchRequest.java, +        template = in.readOptionalStreamable(Template::new);, +        out.writeOptionalStreamable(template);, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchRequest.java, +        template = in.readOptionalStreamable(Template::new);, +        out.writeOptionalStreamable(template);, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsResponse.java, +    public void setTookInMillis(long tookInMillis) {, +        this.tookInMillis = tookInMillis;, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchRequest.java, +        template = in.readOptionalStreamable(Template::new);, +        out.writeOptionalStreamable(template);, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsResponse.java, +    public void setTookInMillis(long tookInMillis) {, +        this.tookInMillis = tookInMillis;, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TransportMultiTermVectorsAction.java, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchRequest.java, +        template = in.readOptionalStreamable(Template::new);, +        out.writeOptionalStreamable(template);, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsResponse.java, +    public void setTookInMillis(long tookInMillis) {, +        this.tookInMillis = tookInMillis;, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TransportMultiTermVectorsAction.java, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TransportShardMultiTermsVectorAction.java, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchRequest.java, +        template = in.readOptionalStreamable(Template::new);, +        out.writeOptionalStreamable(template);, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsResponse.java, +    public void setTookInMillis(long tookInMillis) {, +        this.tookInMillis = tookInMillis;, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TransportMultiTermVectorsAction.java, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TransportShardMultiTermsVectorAction.java, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TransportTermVectorsAction.java, +        return TermVectorsService.getTermVectors(indexShard, request);, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchRequest.java, +        template = in.readOptionalStreamable(Template::new);, +        out.writeOptionalStreamable(template);, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsResponse.java, +    public void setTookInMillis(long tookInMillis) {, +        this.tookInMillis = tookInMillis;, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TransportMultiTermVectorsAction.java, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TransportShardMultiTermsVectorAction.java, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TransportTermVectorsAction.java, +        return TermVectorsService.getTermVectors(indexShard, request);, +++ b/core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java, +            script = Script.readScript(in);, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchRequest.java, +        template = in.readOptionalStreamable(Template::new);, +        out.writeOptionalStreamable(template);, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsResponse.java, +    public void setTookInMillis(long tookInMillis) {, +        this.tookInMillis = tookInMillis;, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TransportMultiTermVectorsAction.java, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TransportShardMultiTermsVectorAction.java, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TransportTermVectorsAction.java, +        return TermVectorsService.getTermVectors(indexShard, request);, +++ b/core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java, +            script = Script.readScript(in);, +++ b/core/src/main/java/org/elasticsearch/index/query/ScriptQueryBuilder.java, +        script = Script.readScript(in);, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchRequest.java, +        template = in.readOptionalStreamable(Template::new);, +        out.writeOptionalStreamable(template);, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsResponse.java, +    public void setTookInMillis(long tookInMillis) {, +        this.tookInMillis = tookInMillis;, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TransportMultiTermVectorsAction.java, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TransportShardMultiTermsVectorAction.java, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TransportTermVectorsAction.java, +        return TermVectorsService.getTermVectors(indexShard, request);, +++ b/core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java, +            script = Script.readScript(in);, +++ b/core/src/main/java/org/elasticsearch/index/query/ScriptQueryBuilder.java, +        script = Script.readScript(in);, +++ b/core/src/main/java/org/elasticsearch/index/query/functionscore/ScriptScoreFunctionBuilder.java, +        script = Script.readScript(in);, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchRequest.java, +        template = in.readOptionalStreamable(Template::new);, +        out.writeOptionalStreamable(template);, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TermVectorsResponse.java, +    public void setTookInMillis(long tookInMillis) {, +        this.tookInMillis = tookInMillis;, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TransportMultiTermVectorsAction.java, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TransportShardMultiTermsVectorAction.java, +++ b/core/src/main/java/org/elasticsearch/action/termvectors/TransportTermVectorsAction.java, +        return TermVectorsService.getTermVectors(indexShard, request);, +++ b/core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java, +            script = Script.readScript(in);]