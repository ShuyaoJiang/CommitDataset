[+++ b/src/main/java/org/elasticsearch/search/fetch/FetchSubPhase.java, +import org.apache.lucene.search.IndexSearcher;, +        private IndexSearcher atomicIndexSearcher;, +            this.atomicIndexSearcher = null;, +        public IndexSearcher searcher() {, +            if (atomicIndexSearcher == null) {, +                atomicIndexSearcher = new IndexSearcher(readerContext);, +            }, +            return atomicIndexSearcher;, +        }, +, +++ b/src/main/java/org/elasticsearch/search/fetch/FetchSubPhase.java, +import org.apache.lucene.search.IndexSearcher;, +        private IndexSearcher atomicIndexSearcher;, +            this.atomicIndexSearcher = null;, +        public IndexSearcher searcher() {, +            if (atomicIndexSearcher == null) {, +                atomicIndexSearcher = new IndexSearcher(readerContext);, +            }, +            return atomicIndexSearcher;, +        }, +, +++ b/src/main/java/org/elasticsearch/search/highlight/PostingsHighlighter.java, +import org.apache.lucene.search.*;, +                Snippet[] fieldSnippets = highlighter.highlightDoc(fieldMapper.names().indexName(), mapperHighlighterEntry.filteredQueryTerms, hitContext.searcher(), hitContext.docId(), numberOfFragments);, +++ b/src/main/java/org/elasticsearch/search/fetch/FetchSubPhase.java, +import org.apache.lucene.search.IndexSearcher;, +        private IndexSearcher atomicIndexSearcher;, +            this.atomicIndexSearcher = null;, +        public IndexSearcher searcher() {, +            if (atomicIndexSearcher == null) {, +                atomicIndexSearcher = new IndexSearcher(readerContext);, +            }, +            return atomicIndexSearcher;, +        }, +, +++ b/src/main/java/org/elasticsearch/search/highlight/PostingsHighlighter.java, +import org.apache.lucene.search.*;, +                Snippet[] fieldSnippets = highlighter.highlightDoc(fieldMapper.names().indexName(), mapperHighlighterEntry.filteredQueryTerms, hitContext.searcher(), hitContext.docId(), numberOfFragments);, +++ b/src/test/java/org/elasticsearch/percolator/PercolatorTests.java, +        } else if (randomBoolean()) {, +            // positions hl, +            client.admin().indices().preparePutMapping("test").setType("type"), +                    .setSource(, +                            jsonBuilder().startObject().startObject("type"), +                                    .startObject("properties"), +                                    .startObject("field1").field("type", "string"), +                                        .field("index_options", "offsets"), +                                    .endObject(), +                                    .endObject(), +                                    .endObject().endObject(), +                    ), +                    .execute().actionGet();]