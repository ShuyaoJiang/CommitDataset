[+++ b/client/src/main/java/org/elasticsearch/client/Connection.java, + * Represents a connection to a host. It holds the host that the connection points to and the state of the connection to it., +    private volatile int failedAttempts = 0;, +     * should be retried once {@link #isBlacklisted()} returns true, which depends on the number of previous failed attempts, +     * Will reset the number of failed attempts that were counted in case the connection was previously dead, as well as its timeout., +        if (this.failedAttempts > 0) {, +     * Returns the timestamp till the connection is supposed to stay dead. After that moment the connection should be retried, +     * Returns true when the connection should be skipped due to previous failures, false in case the connection is alive, +     * or dead but ready to be retried. When the connection is dead, returns false when it is time to retry it, depending, +     * on how many failed attempts were registered and when the last failure happened (minimum 1 minute, maximum 30 minutes)., +    public boolean isBlacklisted() {, +        return failedAttempts > 0 && System.nanoTime() - deadUntil < 0;, +++ b/client/src/main/java/org/elasticsearch/client/Connection.java, + * Represents a connection to a host. It holds the host that the connection points to and the state of the connection to it., +    private volatile int failedAttempts = 0;, +     * should be retried once {@link #isBlacklisted()} returns true, which depends on the number of previous failed attempts, +     * Will reset the number of failed attempts that were counted in case the connection was previously dead, as well as its timeout., +        if (this.failedAttempts > 0) {, +     * Returns the timestamp till the connection is supposed to stay dead. After that moment the connection should be retried, +     * Returns true when the connection should be skipped due to previous failures, false in case the connection is alive, +     * or dead but ready to be retried. When the connection is dead, returns false when it is time to retry it, depending, +     * on how many failed attempts were registered and when the last failure happened (minimum 1 minute, maximum 30 minutes)., +    public boolean isBlacklisted() {, +        return failedAttempts > 0 && System.nanoTime() - deadUntil < 0;, +++ b/client/src/main/java/org/elasticsearch/client/RestClient.java, +            throw new IllegalStateException("no connections available");, +            if (connection.isBlacklisted()) {, +            logger.trace("trying to resurrect connection for " + connection.getHost());, +         * Sets the hosts that the client will send requests to.]