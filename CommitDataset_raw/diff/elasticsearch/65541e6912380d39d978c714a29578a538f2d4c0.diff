[+++ b/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java, +import org.apache.lucene.search.ComplexExplanation;, +import org.apache.lucene.search.Explanation;, +import org.apache.lucene.search.IndexSearcher;, +import org.apache.lucene.search.Weight;, +import org.apache.lucene.search.similarities.Similarity.SimScorer;, +        public AllTermSpanScorer scorer(AtomicReaderContext context, boolean scoreDocsInOrder,, +                numMatches = 0;, +                do {, +                    numMatches++;, +                    more = spans.next();// this moves positions to the next match, +                } while (more && (doc == spans.doc()));, +                return true;, +                return getSpanScore() * getPayloadScore();, +            AllTermSpanScorer scorer = scorer(context, true, false, context.reader().getLiveDocs());, +                float freq = scorer.sloppyFreq();, +        return super.hashCode() + 1;, +++ b/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java, +import org.apache.lucene.search.ComplexExplanation;, +import org.apache.lucene.search.Explanation;, +import org.apache.lucene.search.IndexSearcher;, +import org.apache.lucene.search.Weight;, +import org.apache.lucene.search.similarities.Similarity.SimScorer;, +        public AllTermSpanScorer scorer(AtomicReaderContext context, boolean scoreDocsInOrder,, +                numMatches = 0;, +                do {, +                    numMatches++;, +                    more = spans.next();// this moves positions to the next match, +                } while (more && (doc == spans.doc()));, +                return true;, +                return getSpanScore() * getPayloadScore();, +            AllTermSpanScorer scorer = scorer(context, true, false, context.reader().getLiveDocs());, +                float freq = scorer.sloppyFreq();, +        return super.hashCode() + 1;, +++ b/src/test/java/org/elasticsearch/common/lucene/all/SimpleAllTests.java, +import org.apache.lucene.search.*;, +    private void assertExplanationScore(IndexSearcher searcher, Query query, ScoreDoc scoreDoc) throws IOException {, +        final Explanation expl = searcher.explain(query, scoreDoc.doc);, +        assertEquals(scoreDoc.score, expl.getValue(), 0.00001f);, +    }, +, +        Query query = new AllTermQuery(new Term("_all", "else"));, +        TopDocs docs = searcher.search(query, 10);, +        assertExplanationScore(searcher, query, docs.scoreDocs[0]);, +        assertExplanationScore(searcher, query, docs.scoreDocs[1]);, +        query = new AllTermQuery(new Term("_all", "something"));, +        docs = searcher.search(query, 10);, +        assertExplanationScore(searcher, query, docs.scoreDocs[0]);, +        assertExplanationScore(searcher, query, docs.scoreDocs[1]);, +        Query query = new AllTermQuery(new Term("_all", "else"));, +        TopDocs docs = searcher.search(query, 10);, +        assertExplanationScore(searcher, query, docs.scoreDocs[0]);, +        assertExplanationScore(searcher, query, docs.scoreDocs[1]);, +        query = new AllTermQuery(new Term("_all", "something"));, +        docs = searcher.search(query, 10);, +        assertExplanationScore(searcher, query, docs.scoreDocs[0]);, +        assertExplanationScore(searcher, query, docs.scoreDocs[1]);]