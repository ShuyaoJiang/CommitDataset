[+++ b/docs/reference/mapping/types/percolator.asciidoc, +==== Optimizing wildcard queries., +, +Wildcard queries are  more expensive than other queries for the percolator,, +especially if the wildcard expressions are large., +, +In the case of `wildcard` queries with prefix wildcard expressions or just the `prefix` query,, +the `edge_ngram` token filter can be used to replace these queries with regular `term`, +query on a field where the `edge_ngram` token filter is configured., +, +Creating an index with custom analysis settings:, +, +[source,js], +--------------------------------------------------, +PUT my_queries1, +{, +  "settings": {, +    "analysis": {, +      "analyzer": {, +        "wildcard_prefix": { <1>, +          "type": "custom",, +          "tokenizer": "standard",, +          "filter": [, +            "standard",, +            "lowercase",, +            "wildcard_edge_ngram", +          ], +        }, +      },, +      "filter": {, +        "wildcard_edge_ngram": { <2>, +          "type": "edge_ngram",, +          "min_gram": 1,, +          "max_gram": 32, +        }, +      }, +    }, +  },, +  "mappings": {, +    "query": {, +      "properties": {, +        "query": {, +          "type": "percolator", +        },, +        "my_field": {, +          "type": "text",, +          "fields": {, +            "prefix": { <3>, +              "type": "text",, +              "analyzer": "wildcard_prefix",, +              "search_analyzer": "standard", +            }, +          }, +        }, +      }, +    }, +  }, +}, +--------------------------------------------------, +// CONSOLE, +// TEST[continued], +, +<1> The analyzer that generates the prefix tokens to be used at index time only., +<2> Increase the `min_gram` and decrease `max_gram` settings based on your prefix search needs., +<3> This multifield should be used to do the prefix search, +    with a `term` or `match` query instead of a `prefix` or `wildcard` query., +, +, +Then instead of indexing the following query:, +, +[source,js], +--------------------------------------------------, +{, +  "query": {, +    "wildcard": {, +      "my_field": "abc*", +    }, +  }, +}, +--------------------------------------------------, +// NOTCONSOLE, +, +this query below should be indexed:, +, +[source,js], +--------------------------------------------------, +PUT /my_queries1/query/1?refresh, +{, +  "query": {, +    "term": {, +      "my_field.prefix": "abc", +    }, +  }, +}, +--------------------------------------------------, +// CONSOLE, +// TEST[continued], +, +This way can handle the second query more efficiently than the first query., +]