[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/routing/operation/plain/PlainOperationRouting.java, +                return Math.abs(hash(id) % indexMetaData(clusterState, index).numberOfShards());, +                return Math.abs(hash(type, id) % indexMetaData(clusterState, index).numberOfShards());, +        return Math.abs(hash(routing) % indexMetaData(clusterState, index).numberOfShards());]