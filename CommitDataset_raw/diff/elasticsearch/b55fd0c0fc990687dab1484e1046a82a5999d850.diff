[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/blobstore/fs/FsImmutableBlobContainer.java, +import org.elasticsearch.ElasticSearchIllegalStateException;, +                        long bytesWritten = 0;, +                            bytesWritten += bytesRead;, +                        }, +                        if (bytesWritten != sizeInBytes) {, +                            listener.onFailure(new ElasticSearchIllegalStateException("[" + blobName + "]: wrote [" + bytesWritten + "], expected to write [" + sizeInBytes + "]"));, +                            return;]