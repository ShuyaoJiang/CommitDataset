[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java, +import org.elasticsearch.cluster.routing.RoutingTable;, +                MetaData metaData = currentState.metaData();, +                RoutingTable routingTable = currentState.routingTable();, +                        // if this is a data node, clean the metadata and routing, since we want to recreate the indices and shards, +                        if (currentState.nodes().localNode().dataNode()) {, +                            metaData = MetaData.newMetaDataBuilder().build();, +                            routingTable = RoutingTable.newRoutingTableBuilder().build();, +                        }, +                    return newClusterStateBuilder().state(currentState), +                            .blocks(clusterBlocks), +                            .nodes(latestDiscoNodes), +                            .metaData(metaData), +                            .routingTable(routingTable), +                            .build();]