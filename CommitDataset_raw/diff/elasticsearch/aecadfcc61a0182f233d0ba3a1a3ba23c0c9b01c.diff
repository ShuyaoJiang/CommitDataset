[+++ b/src/main/java/org/elasticsearch/percolator/PercolatorService.java, +        for (Collector queryCollector : percolateCollector.facetAndAggregatorCollector) {, +++ b/src/main/java/org/elasticsearch/percolator/PercolatorService.java, +        for (Collector queryCollector : percolateCollector.facetAndAggregatorCollector) {, +++ b/src/main/java/org/elasticsearch/percolator/QueryCollector.java, +import com.google.common.collect.ImmutableList;, +    final List<Collector> facetAndAggregatorCollector;, +        ImmutableList.Builder<Collector> facetAggCollectorBuilder = ImmutableList.builder();, +                facetAggCollectorBuilder.add(collector);, +                facetAggCollectorBuilder.add(new AggregationPhase.AggregationsCollector(aggregatorCollectors, aggregationContext));, +        facetAndAggregatorCollector = facetAggCollectorBuilder.build();, +    }, +    public void postMatch(int doc) throws IOException {, +        for (Collector collector : facetAndAggregatorCollector) {, +            collector.collect(doc);, +        for (Collector collector : facetAndAggregatorCollector) {, +            collector.setScorer(scorer);, +        for (Collector collector : facetAndAggregatorCollector) {, +            collector.setNextReader(context);, +                    postMatch(doc);, +                    postMatch(doc);, +                    postMatch(doc);, +                    postMatch(doc);]