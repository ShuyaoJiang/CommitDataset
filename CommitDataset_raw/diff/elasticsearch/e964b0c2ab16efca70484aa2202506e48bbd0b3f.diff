[+++ b/core/src/main/java/org/elasticsearch/action/admin/indices/shards/TransportIndicesShardStoresAction.java, +        logger.trace("cluster state used to determine shards [{}]", state.prettyPrint());, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/shards/TransportIndicesShardStoresAction.java, +        logger.trace("cluster state used to determine shards [{}]", state.prettyPrint());, +++ b/core/src/test/java/org/elasticsearch/action/admin/indices/segments/IndicesShardStoreRequestTests.java, +import org.elasticsearch.test.junit.annotations.TestLogging;, +    @TestLogging("action.admin.indices.shards:TRACE"), +        ClusterState clusterState = client().admin().cluster().prepareState().get().getState();, +        List<ShardRouting> unassignedShards = clusterState.routingTable().index(index).shardsWithState(ShardRoutingState.UNASSIGNED);, +        assertThat(shardStoresStatuses.size(), equalTo(unassignedShards.size()));]