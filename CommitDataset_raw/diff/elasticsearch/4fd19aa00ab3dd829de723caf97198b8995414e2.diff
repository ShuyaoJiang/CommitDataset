[+++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/common/http/HttpRequestTemplate.java, +import org.elasticsearch.script.ScriptType;, +            return body(new TextTemplate(content.string(), content.contentType(), ScriptType.INLINE, null));, +++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/common/http/HttpRequestTemplate.java, +import org.elasticsearch.script.ScriptType;, +            return body(new TextTemplate(content.string(), content.contentType(), ScriptType.INLINE, null));, +++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/common/text/TextTemplate.java, +import org.elasticsearch.script.ScriptType;, +++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/common/http/HttpRequestTemplate.java, +import org.elasticsearch.script.ScriptType;, +            return body(new TextTemplate(content.string(), content.contentType(), ScriptType.INLINE, null));, +++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/common/text/TextTemplate.java, +import org.elasticsearch.script.ScriptType;, +++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/watcher/support/search/WatcherSearchTemplateRequest.java, +import org.elasticsearch.script.ScriptType;, +        this.template = new Script(searchSource.utf8ToString(), ScriptType.INLINE, TextTemplate.DEFAULT_TEMPLATE_LANG, null);, +            return new Script(searchSource.utf8ToString(), ScriptType.INLINE, TextTemplate.DEFAULT_TEMPLATE_LANG, null);, +++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/common/http/HttpRequestTemplate.java, +import org.elasticsearch.script.ScriptType;, +            return body(new TextTemplate(content.string(), content.contentType(), ScriptType.INLINE, null));, +++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/common/text/TextTemplate.java, +import org.elasticsearch.script.ScriptType;, +++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/watcher/support/search/WatcherSearchTemplateRequest.java, +import org.elasticsearch.script.ScriptType;, +        this.template = new Script(searchSource.utf8ToString(), ScriptType.INLINE, TextTemplate.DEFAULT_TEMPLATE_LANG, null);, +            return new Script(searchSource.utf8ToString(), ScriptType.INLINE, TextTemplate.DEFAULT_TEMPLATE_LANG, null);, +++ b/elasticsearch/src/test/java/org/elasticsearch/script/SleepScriptEngine.java, +        return new Script("", ScriptType.INLINE, "sleep", Collections.singletonMap("millis", millis));, +++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/common/http/HttpRequestTemplate.java, +import org.elasticsearch.script.ScriptType;, +            return body(new TextTemplate(content.string(), content.contentType(), ScriptType.INLINE, null));, +++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/common/text/TextTemplate.java, +import org.elasticsearch.script.ScriptType;, +++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/watcher/support/search/WatcherSearchTemplateRequest.java, +import org.elasticsearch.script.ScriptType;, +        this.template = new Script(searchSource.utf8ToString(), ScriptType.INLINE, TextTemplate.DEFAULT_TEMPLATE_LANG, null);, +            return new Script(searchSource.utf8ToString(), ScriptType.INLINE, TextTemplate.DEFAULT_TEMPLATE_LANG, null);, +++ b/elasticsearch/src/test/java/org/elasticsearch/script/SleepScriptEngine.java, +        return new Script("", ScriptType.INLINE, "sleep", Collections.singletonMap("millis", millis));, +++ b/elasticsearch/src/test/java/org/elasticsearch/xpack/common/text/TextTemplateTests.java, +import org.elasticsearch.script.ScriptType;, +++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/common/http/HttpRequestTemplate.java, +import org.elasticsearch.script.ScriptType;, +            return body(new TextTemplate(content.string(), content.contentType(), ScriptType.INLINE, null));, +++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/common/text/TextTemplate.java, +import org.elasticsearch.script.ScriptType;, +++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/watcher/support/search/WatcherSearchTemplateRequest.java, +import org.elasticsearch.script.ScriptType;, +        this.template = new Script(searchSource.utf8ToString(), ScriptType.INLINE, TextTemplate.DEFAULT_TEMPLATE_LANG, null);, +            return new Script(searchSource.utf8ToString(), ScriptType.INLINE, TextTemplate.DEFAULT_TEMPLATE_LANG, null);, +++ b/elasticsearch/src/test/java/org/elasticsearch/script/SleepScriptEngine.java, +        return new Script("", ScriptType.INLINE, "sleep", Collections.singletonMap("millis", millis));, +++ b/elasticsearch/src/test/java/org/elasticsearch/xpack/common/text/TextTemplateTests.java, +import org.elasticsearch.script.ScriptType;, +++ b/elasticsearch/src/test/java/org/elasticsearch/xpack/graph/test/GraphTests.java, +import org.elasticsearch.script.ScriptType;, +++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/common/http/HttpRequestTemplate.java, +import org.elasticsearch.script.ScriptType;, +            return body(new TextTemplate(content.string(), content.contentType(), ScriptType.INLINE, null));, +++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/common/text/TextTemplate.java, +import org.elasticsearch.script.ScriptType;, +++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/watcher/support/search/WatcherSearchTemplateRequest.java, +import org.elasticsearch.script.ScriptType;, +        this.template = new Script(searchSource.utf8ToString(), ScriptType.INLINE, TextTemplate.DEFAULT_TEMPLATE_LANG, null);, +            return new Script(searchSource.utf8ToString(), ScriptType.INLINE, TextTemplate.DEFAULT_TEMPLATE_LANG, null);, +++ b/elasticsearch/src/test/java/org/elasticsearch/script/SleepScriptEngine.java, +        return new Script("", ScriptType.INLINE, "sleep", Collections.singletonMap("millis", millis));, +++ b/elasticsearch/src/test/java/org/elasticsearch/xpack/common/text/TextTemplateTests.java, +import org.elasticsearch.script.ScriptType;, +++ b/elasticsearch/src/test/java/org/elasticsearch/xpack/graph/test/GraphTests.java, +import org.elasticsearch.script.ScriptType;, +++ b/elasticsearch/src/test/java/org/elasticsearch/xpack/security/authz/accesscontrol/SecurityIndexSearcherWrapperUnitTests.java, +import org.elasticsearch.script.ScriptType;, +        Script script = new Script(query, ScriptType.INLINE, null, Collections.singletonMap("custom", "value"));, +++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/common/http/HttpRequestTemplate.java, +import org.elasticsearch.script.ScriptType;, +            return body(new TextTemplate(content.string(), content.contentType(), ScriptType.INLINE, null));, +++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/common/text/TextTemplate.java, +import org.elasticsearch.script.ScriptType;, +++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/watcher/support/search/WatcherSearchTemplateRequest.java, +import org.elasticsearch.script.ScriptType;, +        this.template = new Script(searchSource.utf8ToString(), ScriptType.INLINE, TextTemplate.DEFAULT_TEMPLATE_LANG, null);, +            return new Script(searchSource.utf8ToString(), ScriptType.INLINE, TextTemplate.DEFAULT_TEMPLATE_LANG, null);, +++ b/elasticsearch/src/test/java/org/elasticsearch/script/SleepScriptEngine.java, +        return new Script("", ScriptType.INLINE, "sleep", Collections.singletonMap("millis", millis));, +++ b/elasticsearch/src/test/java/org/elasticsearch/xpack/common/text/TextTemplateTests.java, +import org.elasticsearch.script.ScriptType;, +++ b/elasticsearch/src/test/java/org/elasticsearch/xpack/graph/test/GraphTests.java, +import org.elasticsearch.script.ScriptType;, +++ b/elasticsearch/src/test/java/org/elasticsearch/xpack/security/authz/accesscontrol/SecurityIndexSearcherWrapperUnitTests.java, +import org.elasticsearch.script.ScriptType;, +        Script script = new Script(query, ScriptType.INLINE, null, Collections.singletonMap("custom", "value"));, +++ b/elasticsearch/src/test/java/org/elasticsearch/xpack/watcher/condition/ScriptConditionTests.java, +import org.elasticsearch.script.ScriptType;, +++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/common/http/HttpRequestTemplate.java, +import org.elasticsearch.script.ScriptType;, +            return body(new TextTemplate(content.string(), content.contentType(), ScriptType.INLINE, null));, +++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/common/text/TextTemplate.java, +import org.elasticsearch.script.ScriptType;, +++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/watcher/support/search/WatcherSearchTemplateRequest.java]