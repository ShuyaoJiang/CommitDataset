[+++ b/docs/plugins/analysis-icu.asciidoc, +`unicode_set_filter` parameter, which accepts a, +`unicode_set_filter` parameter, which accepts a, +`unicode_set_filter` parameter, which accepts a, +            "unicode_set_filter": "[^åäöÅÄÖ]", +++ b/docs/plugins/analysis-icu.asciidoc, +`unicode_set_filter` parameter, which accepts a, +`unicode_set_filter` parameter, which accepts a, +`unicode_set_filter` parameter, which accepts a, +            "unicode_set_filter": "[^åäöÅÄÖ]", +++ b/plugins/analysis-icu/src/main/java/org/elasticsearch/index/analysis/IcuFoldingTokenFilterFactory.java, +        this.normalizer = IcuNormalizerTokenFilterFactory.wrapWithUnicodeSetFilter(indexSettings, ICU_FOLDING_NORMALIZER, settings);, +++ b/docs/plugins/analysis-icu.asciidoc, +`unicode_set_filter` parameter, which accepts a, +`unicode_set_filter` parameter, which accepts a, +`unicode_set_filter` parameter, which accepts a, +            "unicode_set_filter": "[^åäöÅÄÖ]", +++ b/plugins/analysis-icu/src/main/java/org/elasticsearch/index/analysis/IcuFoldingTokenFilterFactory.java, +        this.normalizer = IcuNormalizerTokenFilterFactory.wrapWithUnicodeSetFilter(indexSettings, ICU_FOLDING_NORMALIZER, settings);, +++ b/plugins/analysis-icu/src/main/java/org/elasticsearch/index/analysis/IcuNormalizerCharFilterFactory.java, +        this.normalizer = IcuNormalizerTokenFilterFactory.wrapWithUnicodeSetFilter(indexSettings, normalizer, settings);, +++ b/docs/plugins/analysis-icu.asciidoc, +`unicode_set_filter` parameter, which accepts a, +`unicode_set_filter` parameter, which accepts a, +`unicode_set_filter` parameter, which accepts a, +            "unicode_set_filter": "[^åäöÅÄÖ]", +++ b/plugins/analysis-icu/src/main/java/org/elasticsearch/index/analysis/IcuFoldingTokenFilterFactory.java, +        this.normalizer = IcuNormalizerTokenFilterFactory.wrapWithUnicodeSetFilter(indexSettings, ICU_FOLDING_NORMALIZER, settings);, +++ b/plugins/analysis-icu/src/main/java/org/elasticsearch/index/analysis/IcuNormalizerCharFilterFactory.java, +        this.normalizer = IcuNormalizerTokenFilterFactory.wrapWithUnicodeSetFilter(indexSettings, normalizer, settings);, +++ b/plugins/analysis-icu/src/main/java/org/elasticsearch/index/analysis/IcuNormalizerTokenFilterFactory.java, +import org.apache.logging.log4j.LogManager;, +import org.elasticsearch.Version;, +import org.elasticsearch.common.logging.DeprecationLogger;, +    private final static DeprecationLogger deprecationLogger =, +        new DeprecationLogger(LogManager.getLogger(IcuNormalizerTokenFilterFactory.class));, +        this.normalizer = wrapWithUnicodeSetFilter(indexSettings, normalizer, settings);, +    static Normalizer2 wrapWithUnicodeSetFilter(final IndexSettings indexSettings,, +                                                final Normalizer2 normalizer,, +                                                final Settings settings) {, +        if (indexSettings.getIndexVersionCreated().onOrAfter(Version.V_7_0_0_alpha1)) {, +            if (unicodeSetFilter != null) {, +                deprecationLogger.deprecated("[unicodeSetFilter] has been deprecated in favor of [unicode_set_filter]");, +            } else {, +                unicodeSetFilter = settings.get("unicode_set_filter");, +            }, +        }, +++ b/docs/plugins/analysis-icu.asciidoc, +`unicode_set_filter` parameter, which accepts a, +`unicode_set_filter` parameter, which accepts a, +`unicode_set_filter` parameter, which accepts a, +            "unicode_set_filter": "[^åäöÅÄÖ]", +++ b/plugins/analysis-icu/src/main/java/org/elasticsearch/index/analysis/IcuFoldingTokenFilterFactory.java, +        this.normalizer = IcuNormalizerTokenFilterFactory.wrapWithUnicodeSetFilter(indexSettings, ICU_FOLDING_NORMALIZER, settings);, +++ b/plugins/analysis-icu/src/main/java/org/elasticsearch/index/analysis/IcuNormalizerCharFilterFactory.java, +        this.normalizer = IcuNormalizerTokenFilterFactory.wrapWithUnicodeSetFilter(indexSettings, normalizer, settings);, +++ b/plugins/analysis-icu/src/main/java/org/elasticsearch/index/analysis/IcuNormalizerTokenFilterFactory.java, +import org.apache.logging.log4j.LogManager;, +import org.elasticsearch.Version;, +import org.elasticsearch.common.logging.DeprecationLogger;, +    private final static DeprecationLogger deprecationLogger =, +        new DeprecationLogger(LogManager.getLogger(IcuNormalizerTokenFilterFactory.class));, +        this.normalizer = wrapWithUnicodeSetFilter(indexSettings, normalizer, settings);, +    static Normalizer2 wrapWithUnicodeSetFilter(final IndexSettings indexSettings,, +                                                final Normalizer2 normalizer,, +                                                final Settings settings) {, +        if (indexSettings.getIndexVersionCreated().onOrAfter(Version.V_7_0_0_alpha1)) {, +            if (unicodeSetFilter != null) {, +                deprecationLogger.deprecated("[unicodeSetFilter] has been deprecated in favor of [unicode_set_filter]");, +            } else {, +                unicodeSetFilter = settings.get("unicode_set_filter");, +            }, +        }, +++ b/plugins/analysis-icu/src/test/resources/rest-api-spec/test/analysis_icu/10_basic.yml, +                                    unicode_set_filter: "[^ß]", +                            filter:, +                                tokenfilter_icu_normalizer:, +                                    type: icu_normalizer, +                                    unicode_set_filter: "[^ßB]", +                                tokenfilter_icu_folding:, +                                    type: icu_folding, +                                    unicode_set_filter: "[^â]", +    - do:, +        indices.analyze:, +          index:    test, +          body:, +            char_filter: ["charfilter_icu_normalizer"], +            tokenizer:  keyword, +            text:     charfilter Föo Bâr Ruß, +    - length: { tokens: 1 }, +    - match:  { tokens.0.token: charfilter föo bâr ruß }, +    - do:, +        indices.analyze:, +          index:    test, +          body:, +            tokenizer:  keyword, +            filter: ["tokenfilter_icu_normalizer"], +            text:     tokenfilter Föo Bâr Ruß, +    - length: { tokens: 1 }, +    - match:  { tokens.0.token: tokenfilter föo Bâr ruß }]