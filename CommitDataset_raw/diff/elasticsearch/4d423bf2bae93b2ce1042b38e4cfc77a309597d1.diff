[+++ b/qa/rolling-upgrade/src/test/resources/rest-api-spec/test/mixed_cluster/10_basic.yml, +     search:, +       index: index_with_replicas, +, + - match: { hits.total: 5 } # just check we recovered fine, +, + - do:, +++ b/qa/rolling-upgrade/src/test/resources/rest-api-spec/test/mixed_cluster/10_basic.yml, +     search:, +       index: index_with_replicas, +, + - match: { hits.total: 5 } # just check we recovered fine, +, + - do:, +++ b/qa/rolling-upgrade/src/test/resources/rest-api-spec/test/old_cluster/10_basic.yml, +      indices.create:, +        index: index_with_replicas # dummy index to ensure we can recover indices with replicas just fine, +, +  - do:, +          - '{"index": {"_index": "test_index", "_type": "doc"}}', +          - '{"index": {"_index": "test_index", "_type": "doc"}}', +          - '{"index": {"_index": "test_index", "_type": "doc"}}', +          - '{"index": {"_index": "test_index", "_type": "doc"}}', +          - '{"index": {"_index": "test_index", "_type": "doc"}}', +      bulk:, +        refresh: true, +        body:, +          - '{"index": {"_index": "index_with_replicas", "_type": "doc"}}', +          - '{"f1": "d_old"}', +          - '{"index": {"_index": "index_with_replicas", "_type": "doc"}}', +          - '{"f1": "d_old"}', +          - '{"index": {"_index": "index_with_replicas", "_type": "doc"}}', +          - '{"f1": "d_old"}', +          - '{"index": {"_index": "index_with_replicas", "_type": "doc"}}', +          - '{"f1": "d_old"}', +          - '{"index": {"_index": "index_with_replicas", "_type": "doc"}}', +          - '{"f1": "d_old"}', +, +  - do:, +        index: test_index,index_with_replicas, +      search:, +        index: index_with_replicas, +, +  - match: { hits.total: 5 }, +, +  - do:, +++ b/qa/rolling-upgrade/src/test/resources/rest-api-spec/test/mixed_cluster/10_basic.yml, +     search:, +       index: index_with_replicas, +, + - match: { hits.total: 5 } # just check we recovered fine, +, + - do:, +++ b/qa/rolling-upgrade/src/test/resources/rest-api-spec/test/old_cluster/10_basic.yml, +      indices.create:, +        index: index_with_replicas # dummy index to ensure we can recover indices with replicas just fine, +, +  - do:, +          - '{"index": {"_index": "test_index", "_type": "doc"}}', +          - '{"index": {"_index": "test_index", "_type": "doc"}}', +          - '{"index": {"_index": "test_index", "_type": "doc"}}', +          - '{"index": {"_index": "test_index", "_type": "doc"}}', +          - '{"index": {"_index": "test_index", "_type": "doc"}}', +      bulk:, +        refresh: true, +        body:, +          - '{"index": {"_index": "index_with_replicas", "_type": "doc"}}', +          - '{"f1": "d_old"}', +          - '{"index": {"_index": "index_with_replicas", "_type": "doc"}}', +          - '{"f1": "d_old"}', +          - '{"index": {"_index": "index_with_replicas", "_type": "doc"}}', +          - '{"f1": "d_old"}', +          - '{"index": {"_index": "index_with_replicas", "_type": "doc"}}', +          - '{"f1": "d_old"}', +          - '{"index": {"_index": "index_with_replicas", "_type": "doc"}}', +          - '{"f1": "d_old"}', +, +  - do:, +        index: test_index,index_with_replicas, +      search:, +        index: index_with_replicas, +, +  - match: { hits.total: 5 }, +, +  - do:, +++ b/qa/rolling-upgrade/src/test/resources/rest-api-spec/test/upgraded_cluster/10_basic.yml, +     search:, +       index: index_with_replicas, +, + - match: { hits.total: 5 } # just check we recovered fine, +, + - do:]