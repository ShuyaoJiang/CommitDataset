[+++ b/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +import org.apache.lucene.index.AtomicReader;, +    public void setNextReader(AtomicReader reader) {, +++ b/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +import org.apache.lucene.index.AtomicReader;, +    public void setNextReader(AtomicReader reader) {, +++ b/src/main/java/org/elasticsearch/script/SearchScript.java, +import org.apache.lucene.index.AtomicReader;, +    void setNextReader(AtomicReader reader);, +++ b/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +import org.apache.lucene.index.AtomicReader;, +    public void setNextReader(AtomicReader reader) {, +++ b/src/main/java/org/elasticsearch/script/SearchScript.java, +import org.apache.lucene.index.AtomicReader;, +    void setNextReader(AtomicReader reader);, +++ b/src/main/java/org/elasticsearch/script/mvel/MvelScriptEngineService.java, +import org.apache.lucene.index.AtomicReader;, +        public void setNextReader(AtomicReader reader) {, +++ b/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +import org.apache.lucene.index.AtomicReader;, +    public void setNextReader(AtomicReader reader) {, +++ b/src/main/java/org/elasticsearch/script/SearchScript.java, +import org.apache.lucene.index.AtomicReader;, +    void setNextReader(AtomicReader reader);, +++ b/src/main/java/org/elasticsearch/script/mvel/MvelScriptEngineService.java, +import org.apache.lucene.index.AtomicReader;, +        public void setNextReader(AtomicReader reader) {, +++ b/src/main/java/org/elasticsearch/search/lookup/DocLookup.java, +import org.apache.lucene.index.AtomicReader;, +    private AtomicReader reader;, +    public void setNextReader(AtomicReader reader) {, +++ b/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +import org.apache.lucene.index.AtomicReader;, +    public void setNextReader(AtomicReader reader) {, +++ b/src/main/java/org/elasticsearch/script/SearchScript.java, +import org.apache.lucene.index.AtomicReader;, +    void setNextReader(AtomicReader reader);, +++ b/src/main/java/org/elasticsearch/script/mvel/MvelScriptEngineService.java, +import org.apache.lucene.index.AtomicReader;, +        public void setNextReader(AtomicReader reader) {, +++ b/src/main/java/org/elasticsearch/search/lookup/DocLookup.java, +import org.apache.lucene.index.AtomicReader;, +    private AtomicReader reader;, +    public void setNextReader(AtomicReader reader) {, +++ b/src/main/java/org/elasticsearch/search/lookup/FieldLookup.java, +import org.apache.lucene.index.IndexableField;, +        IndexableField field = doc.getField(mapper.names().indexName());, +        IndexableField[] fields = doc.getFields(mapper.names().indexName());, +        for (IndexableField field : fields) {, +++ b/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +import org.apache.lucene.index.AtomicReader;, +    public void setNextReader(AtomicReader reader) {, +++ b/src/main/java/org/elasticsearch/script/SearchScript.java, +import org.apache.lucene.index.AtomicReader;, +    void setNextReader(AtomicReader reader);, +++ b/src/main/java/org/elasticsearch/script/mvel/MvelScriptEngineService.java, +import org.apache.lucene.index.AtomicReader;, +        public void setNextReader(AtomicReader reader) {, +++ b/src/main/java/org/elasticsearch/search/lookup/DocLookup.java, +import org.apache.lucene.index.AtomicReader;, +    private AtomicReader reader;, +    public void setNextReader(AtomicReader reader) {, +++ b/src/main/java/org/elasticsearch/search/lookup/FieldLookup.java, +import org.apache.lucene.index.IndexableField;, +        IndexableField field = doc.getField(mapper.names().indexName());, +        IndexableField[] fields = doc.getFields(mapper.names().indexName());, +        for (IndexableField field : fields) {, +++ b/src/main/java/org/elasticsearch/search/lookup/FieldsLookup.java, +import org.apache.lucene.index.AtomicReader;, +    private AtomicReader reader;, +    public void setNextReader(AtomicReader reader) {, +++ b/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +import org.apache.lucene.index.AtomicReader;, +    public void setNextReader(AtomicReader reader) {, +++ b/src/main/java/org/elasticsearch/script/SearchScript.java, +import org.apache.lucene.index.AtomicReader;, +    void setNextReader(AtomicReader reader);, +++ b/src/main/java/org/elasticsearch/script/mvel/MvelScriptEngineService.java, +import org.apache.lucene.index.AtomicReader;, +        public void setNextReader(AtomicReader reader) {, +++ b/src/main/java/org/elasticsearch/search/lookup/DocLookup.java, +import org.apache.lucene.index.AtomicReader;, +    private AtomicReader reader;, +    public void setNextReader(AtomicReader reader) {, +++ b/src/main/java/org/elasticsearch/search/lookup/FieldLookup.java, +import org.apache.lucene.index.IndexableField;, +        IndexableField field = doc.getField(mapper.names().indexName());, +        IndexableField[] fields = doc.getFields(mapper.names().indexName());, +        for (IndexableField field : fields) {, +++ b/src/main/java/org/elasticsearch/search/lookup/FieldsLookup.java, +import org.apache.lucene.index.AtomicReader;, +    private AtomicReader reader;, +    public void setNextReader(AtomicReader reader) {, +++ b/src/main/java/org/elasticsearch/search/lookup/SearchLookup.java, +import org.apache.lucene.index.AtomicReader;, +    public void setNextReader(AtomicReader reader) {, +++ b/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +import org.apache.lucene.index.AtomicReader;, +    public void setNextReader(AtomicReader reader) {, +++ b/src/main/java/org/elasticsearch/script/SearchScript.java]