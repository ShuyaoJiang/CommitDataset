[+++ b/modules/benchmark/micro/src/main/java/org/elasticsearch/benchmark/micro/deps/jackson/JacksonTypesBenchmark.java, +        this.objectMapper = defaultObjectMapper();, +++ b/modules/benchmark/micro/src/main/java/org/elasticsearch/benchmark/micro/deps/jackson/JacksonTypesBenchmark.java, +        this.objectMapper = defaultObjectMapper();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/json/JsonDateFieldMapper.java, +                new NamedAnalyzer("_date/" + precisionStep, new NumericDateAnalyzer(precisionStep, dateTimeFormatter.parser())),, +                new NamedAnalyzer("_date/max", new NumericDateAnalyzer(Integer.MAX_VALUE, dateTimeFormatter.parser())));, +        return dateTimeFormatter.printer().print(value(field));, +        return NumericUtils.longToPrefixCoded(dateTimeFormatter.parser().parseMillis(value));, +                lowerTerm == null ? null : dateTimeFormatter.parser().parseMillis(lowerTerm),, +                upperTerm == null ? null : dateTimeFormatter.parser().parseMillis(upperTerm),, +                lowerTerm == null ? null : dateTimeFormatter.parser().parseMillis(lowerTerm),, +                upperTerm == null ? null : dateTimeFormatter.parser().parseMillis(upperTerm),, +        long value = dateTimeFormatter.parser().parseMillis(dateAsString);, +++ b/modules/benchmark/micro/src/main/java/org/elasticsearch/benchmark/micro/deps/jackson/JacksonTypesBenchmark.java, +        this.objectMapper = defaultObjectMapper();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/json/JsonDateFieldMapper.java, +                new NamedAnalyzer("_date/" + precisionStep, new NumericDateAnalyzer(precisionStep, dateTimeFormatter.parser())),, +                new NamedAnalyzer("_date/max", new NumericDateAnalyzer(Integer.MAX_VALUE, dateTimeFormatter.parser())));, +        return dateTimeFormatter.printer().print(value(field));, +        return NumericUtils.longToPrefixCoded(dateTimeFormatter.parser().parseMillis(value));, +                lowerTerm == null ? null : dateTimeFormatter.parser().parseMillis(lowerTerm),, +                upperTerm == null ? null : dateTimeFormatter.parser().parseMillis(upperTerm),, +                lowerTerm == null ? null : dateTimeFormatter.parser().parseMillis(lowerTerm),, +                upperTerm == null ? null : dateTimeFormatter.parser().parseMillis(upperTerm),, +        long value = dateTimeFormatter.parser().parseMillis(dateAsString);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/json/JsonObjectMapper.java, +                        dateTimeFormatter.parser().parseMillis(jsonContext.jp().getText());, +++ b/modules/benchmark/micro/src/main/java/org/elasticsearch/benchmark/micro/deps/jackson/JacksonTypesBenchmark.java, +        this.objectMapper = defaultObjectMapper();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/json/JsonDateFieldMapper.java, +                new NamedAnalyzer("_date/" + precisionStep, new NumericDateAnalyzer(precisionStep, dateTimeFormatter.parser())),, +                new NamedAnalyzer("_date/max", new NumericDateAnalyzer(Integer.MAX_VALUE, dateTimeFormatter.parser())));, +        return dateTimeFormatter.printer().print(value(field));, +        return NumericUtils.longToPrefixCoded(dateTimeFormatter.parser().parseMillis(value));, +                lowerTerm == null ? null : dateTimeFormatter.parser().parseMillis(lowerTerm),, +                upperTerm == null ? null : dateTimeFormatter.parser().parseMillis(upperTerm),, +                lowerTerm == null ? null : dateTimeFormatter.parser().parseMillis(lowerTerm),, +                upperTerm == null ? null : dateTimeFormatter.parser().parseMillis(upperTerm),, +        long value = dateTimeFormatter.parser().parseMillis(dateAsString);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/json/JsonObjectMapper.java, +                        dateTimeFormatter.parser().parseMillis(jsonContext.jp().getText());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/rest/action/main/RestMainAction.java, +            rootNode = Jackson.defaultObjectMapper().readValue(Classes.getDefaultClassLoader().getResourceAsStream("org/elasticsearch/rest/action/main/quotes.json"), JsonNode.class);, +++ b/modules/benchmark/micro/src/main/java/org/elasticsearch/benchmark/micro/deps/jackson/JacksonTypesBenchmark.java, +        this.objectMapper = defaultObjectMapper();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/json/JsonDateFieldMapper.java, +                new NamedAnalyzer("_date/" + precisionStep, new NumericDateAnalyzer(precisionStep, dateTimeFormatter.parser())),, +                new NamedAnalyzer("_date/max", new NumericDateAnalyzer(Integer.MAX_VALUE, dateTimeFormatter.parser())));, +        return dateTimeFormatter.printer().print(value(field));, +        return NumericUtils.longToPrefixCoded(dateTimeFormatter.parser().parseMillis(value));, +                lowerTerm == null ? null : dateTimeFormatter.parser().parseMillis(lowerTerm),, +                upperTerm == null ? null : dateTimeFormatter.parser().parseMillis(upperTerm),, +                lowerTerm == null ? null : dateTimeFormatter.parser().parseMillis(lowerTerm),, +                upperTerm == null ? null : dateTimeFormatter.parser().parseMillis(upperTerm),, +        long value = dateTimeFormatter.parser().parseMillis(dateAsString);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/json/JsonObjectMapper.java, +                        dateTimeFormatter.parser().parseMillis(jsonContext.jp().getText());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/rest/action/main/RestMainAction.java, +            rootNode = Jackson.defaultObjectMapper().readValue(Classes.getDefaultClassLoader().getResourceAsStream("org/elasticsearch/rest/action/main/quotes.json"), JsonNode.class);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/util/joda/FormatDateTimeFormatter.java, +    private final DateTimeFormatter parser;, +    private final DateTimeFormatter printer;, +, +    public FormatDateTimeFormatter(String format, DateTimeFormatter parser) {, +        this(format, parser, parser);, +    }, +, +    public FormatDateTimeFormatter(String format, DateTimeFormatter parser, DateTimeFormatter printer) {, +        this.parser = parser;, +        this.printer = printer;, +    public DateTimeFormatter parser() {, +        return parser;, +    }, +, +    public DateTimeFormatter printer() {, +        return this.printer;, +++ b/modules/benchmark/micro/src/main/java/org/elasticsearch/benchmark/micro/deps/jackson/JacksonTypesBenchmark.java, +        this.objectMapper = defaultObjectMapper();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/json/JsonDateFieldMapper.java, +                new NamedAnalyzer("_date/" + precisionStep, new NumericDateAnalyzer(precisionStep, dateTimeFormatter.parser())),, +                new NamedAnalyzer("_date/max", new NumericDateAnalyzer(Integer.MAX_VALUE, dateTimeFormatter.parser())));, +        return dateTimeFormatter.printer().print(value(field));, +        return NumericUtils.longToPrefixCoded(dateTimeFormatter.parser().parseMillis(value));, +                lowerTerm == null ? null : dateTimeFormatter.parser().parseMillis(lowerTerm),, +                upperTerm == null ? null : dateTimeFormatter.parser().parseMillis(upperTerm),, +                lowerTerm == null ? null : dateTimeFormatter.parser().parseMillis(lowerTerm),, +                upperTerm == null ? null : dateTimeFormatter.parser().parseMillis(upperTerm),, +        long value = dateTimeFormatter.parser().parseMillis(dateAsString);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/json/JsonObjectMapper.java, +                        dateTimeFormatter.parser().parseMillis(jsonContext.jp().getText());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/rest/action/main/RestMainAction.java, +            rootNode = Jackson.defaultObjectMapper().readValue(Classes.getDefaultClassLoader().getResourceAsStream("org/elasticsearch/rest/action/main/quotes.json"), JsonNode.class);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/util/joda/FormatDateTimeFormatter.java, +    private final DateTimeFormatter parser;, +    private final DateTimeFormatter printer;, +, +    public FormatDateTimeFormatter(String format, DateTimeFormatter parser) {, +        this(format, parser, parser);, +    }]