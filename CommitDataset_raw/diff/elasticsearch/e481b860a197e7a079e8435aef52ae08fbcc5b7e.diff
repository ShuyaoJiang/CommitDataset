[+++ b/server/src/main/java/org/elasticsearch/index/IndexModule.java, +import org.apache.lucene.search.similarities.Similarity;, +import java.util.Objects;, +    private final EngineFactory engineFactory;, +    /**, +     * Construct the index module for the index with the specified index settings. The index module contains extension points for plugins, +     * via {@link org.elasticsearch.plugins.PluginsService#onIndexModule(IndexModule)}., +     *, +     * @param indexSettings    the index settings, +     * @param analysisRegistry the analysis registry, +     * @param engineFactory    the engine factory, +     */, +    public IndexModule(final IndexSettings indexSettings, final AnalysisRegistry analysisRegistry, final EngineFactory engineFactory) {, +        this.engineFactory = Objects.requireNonNull(engineFactory);, +     * The engine factory provided during construction of this index module., +     *, +     * @return the engine factory, +     */, +    EngineFactory getEngineFactory() {, +        return engineFactory;, +    }, +, +    /**, +                shardStoreDeleter, analysisRegistry, engineFactory, circuitBreakerService, bigArrays, threadPool, scriptService,, +++ b/server/src/main/java/org/elasticsearch/index/IndexModule.java, +import org.apache.lucene.search.similarities.Similarity;, +import java.util.Objects;, +    private final EngineFactory engineFactory;, +    /**, +     * Construct the index module for the index with the specified index settings. The index module contains extension points for plugins, +     * via {@link org.elasticsearch.plugins.PluginsService#onIndexModule(IndexModule)}., +     *, +     * @param indexSettings    the index settings, +     * @param analysisRegistry the analysis registry, +     * @param engineFactory    the engine factory, +     */, +    public IndexModule(final IndexSettings indexSettings, final AnalysisRegistry analysisRegistry, final EngineFactory engineFactory) {, +        this.engineFactory = Objects.requireNonNull(engineFactory);, +     * The engine factory provided during construction of this index module., +     *, +     * @return the engine factory, +     */, +    EngineFactory getEngineFactory() {, +        return engineFactory;, +    }, +, +    /**, +                shardStoreDeleter, analysisRegistry, engineFactory, circuitBreakerService, bigArrays, threadPool, scriptService,, +++ b/server/src/main/java/org/elasticsearch/index/IndexService.java, +            EngineFactory engineFactory,, +        this.engineFactory = Objects.requireNonNull(engineFactory);, +    public final EngineFactory getEngineFactory() {, +    }, +++ b/server/src/main/java/org/elasticsearch/index/IndexModule.java, +import org.apache.lucene.search.similarities.Similarity;, +import java.util.Objects;, +    private final EngineFactory engineFactory;, +    /**, +     * Construct the index module for the index with the specified index settings. The index module contains extension points for plugins, +     * via {@link org.elasticsearch.plugins.PluginsService#onIndexModule(IndexModule)}., +     *, +     * @param indexSettings    the index settings, +     * @param analysisRegistry the analysis registry, +     * @param engineFactory    the engine factory, +     */, +    public IndexModule(final IndexSettings indexSettings, final AnalysisRegistry analysisRegistry, final EngineFactory engineFactory) {, +        this.engineFactory = Objects.requireNonNull(engineFactory);, +     * The engine factory provided during construction of this index module., +     *, +     * @return the engine factory, +     */, +    EngineFactory getEngineFactory() {, +        return engineFactory;, +    }, +, +    /**, +                shardStoreDeleter, analysisRegistry, engineFactory, circuitBreakerService, bigArrays, threadPool, scriptService,, +++ b/server/src/main/java/org/elasticsearch/index/IndexService.java, +            EngineFactory engineFactory,, +        this.engineFactory = Objects.requireNonNull(engineFactory);, +    public final EngineFactory getEngineFactory() {, +    }, +++ b/server/src/main/java/org/elasticsearch/index/shard/IndexShard.java, +    final EngineFactory engineFactory;, +        this.engineFactory = Objects.requireNonNull(engineFactory);, +++ b/server/src/main/java/org/elasticsearch/index/IndexModule.java, +import org.apache.lucene.search.similarities.Similarity;, +import java.util.Objects;, +    private final EngineFactory engineFactory;, +    /**, +     * Construct the index module for the index with the specified index settings. The index module contains extension points for plugins, +     * via {@link org.elasticsearch.plugins.PluginsService#onIndexModule(IndexModule)}., +     *, +     * @param indexSettings    the index settings, +     * @param analysisRegistry the analysis registry, +     * @param engineFactory    the engine factory, +     */, +    public IndexModule(final IndexSettings indexSettings, final AnalysisRegistry analysisRegistry, final EngineFactory engineFactory) {, +        this.engineFactory = Objects.requireNonNull(engineFactory);, +     * The engine factory provided during construction of this index module.]