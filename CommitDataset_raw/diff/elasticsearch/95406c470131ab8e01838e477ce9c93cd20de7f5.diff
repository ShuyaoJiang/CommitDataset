[+++ b/core/src/main/java/org/elasticsearch/index/store/Store.java, +            if (writtenBytes >= checksumPosition) { // we are writing parts of the checksum...., +                }, +                for (int i = 0; i < length; i++) { // don't optimze writing the last block of bytes, +++ b/core/src/main/java/org/elasticsearch/index/store/Store.java, +            if (writtenBytes >= checksumPosition) { // we are writing parts of the checksum...., +                }, +                for (int i = 0; i < length; i++) { // don't optimze writing the last block of bytes, +++ b/core/src/test/java/org/elasticsearch/index/store/StoreTests.java]