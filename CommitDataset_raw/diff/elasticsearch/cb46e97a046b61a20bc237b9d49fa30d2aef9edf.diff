[+++ b/core/src/test/java/org/elasticsearch/index/IndexServiceTests.java, +        final Settings settings = Settings.builder(), +                .put(IndexSettings.INDEX_TRANSLOG_SYNC_INTERVAL_SETTING.getKey(), "100ms"), +        final IndexService indexService = createIndex("test", settings);, +        client(), +                .admin(), +                .indices(), +                .prepareUpdateSettings("test"), +                .setSettings(Settings.builder().put(IndexSettings.INDEX_TRANSLOG_DURABILITY_SETTING.getKey(), Translog.Durability.ASYNC)), +                .get();, +, +        assertNotNull(indexService.getFsyncTask());, +        assertTrue(indexService.getFsyncTask().mustReschedule());, +        client().prepareIndex("test", "test", "1").setSource("{\"foo\": \"bar\"}", XContentType.JSON).get();, +        assertNotNull(indexService.getFsyncTask());, +        final IndexShard shard = indexService.getShard(0);, +        assertBusy(() -> assertFalse(shard.getTranslog().syncNeeded()));, +, +        client(), +                .admin(), +                .indices(), +                .prepareUpdateSettings("test"), +                .setSettings(Settings.builder().put(IndexSettings.INDEX_TRANSLOG_DURABILITY_SETTING.getKey(), Translog.Durability.REQUEST)), +                .get();, +        client(), +                .admin(), +                .indices(), +                .prepareUpdateSettings("test"), +                .setSettings(Settings.builder().put(IndexSettings.INDEX_TRANSLOG_DURABILITY_SETTING.getKey(), Translog.Durability.ASYNC)), +                .get();]