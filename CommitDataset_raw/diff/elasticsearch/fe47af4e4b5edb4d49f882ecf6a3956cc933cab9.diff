[+++ b/qa/smoke-test-http/src/test/java/org/elasticsearch/http/DeprecationHttpIT.java, +import org.elasticsearch.common.logging.DeprecationLogger;, +import static org.elasticsearch.common.logging.DeprecationLogger.WARNING_HEADER_PATTERN;, +import static org.elasticsearch.rest.RestStatus.OK;, +import static org.elasticsearch.test.hamcrest.RegexMatcher.matches;, +                headerMatchers.add(equalTo(, +                        "[" + setting.getKey() + "] setting was deprecated in Elasticsearch and will be removed in a future release! " +, +                        "See the breaking changes documentation for the next major version."));, +        for (final String deprecatedWarning : deprecatedWarnings) {, +            assertThat(deprecatedWarning, matches(WARNING_HEADER_PATTERN.pattern()));, +        }, +        final List<String> actualWarningValues =, +                deprecatedWarnings.stream().map(DeprecationLogger::extractWarningValueFromWarningHeader).collect(Collectors.toList());, +            assertThat(actualWarningValues, hasItem(headerMatcher));]