[+++ b/build.gradle, +++ b/build.gradle, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +            project.tasks.run.dependsOn(project.bundlePlugin), +++ b/build.gradle, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +            project.tasks.run.dependsOn(project.bundlePlugin), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +    String distribution = 'zip', +++ b/build.gradle, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +            project.tasks.run.dependsOn(project.bundlePlugin), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +    String distribution = 'zip', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        String packaging = distro == 'tar' ? 'tar.gz' : distro, +++ b/build.gradle, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +            project.tasks.run.dependsOn(project.bundlePlugin), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +    String distribution = 'zip', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        String packaging = distro == 'tar' ? 'tar.gz' : distro, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/NodeInfo.groovy, +        String Path, +++ b/build.gradle, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +            project.tasks.run.dependsOn(project.bundlePlugin), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +    String distribution = 'zip', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        String packaging = distro == 'tar' ? 'tar.gz' : distro, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/NodeInfo.groovy, +        String Path, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Security.java, +            }, +        }, +++ b/build.gradle, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +            project.tasks.run.dependsOn(project.bundlePlugin), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +    String distribution = 'zip', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        String packaging = distro == 'tar' ? 'tar.gz' : distro, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/NodeInfo.groovy, +        String Path, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Security.java, +            }, +        }, +++ b/core/src/main/java/org/elasticsearch/client/transport/TransportClient.java, +            PluginsService pluginsService = new PluginsService(settings, null, pluginClasses);, +++ b/build.gradle, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +            project.tasks.run.dependsOn(project.bundlePlugin), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +    String distribution = 'zip', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        String packaging = distro == 'tar' ? 'tar.gz' : distro, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/NodeInfo.groovy, +        String Path, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Security.java, +            }, +        }, +++ b/core/src/main/java/org/elasticsearch/client/transport/TransportClient.java, +            PluginsService pluginsService = new PluginsService(settings, null, pluginClasses);, +++ b/core/src/main/java/org/elasticsearch/env/Environment.java, +++ b/build.gradle, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +            project.tasks.run.dependsOn(project.bundlePlugin), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +    String distribution = 'zip', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        String packaging = distro == 'tar' ? 'tar.gz' : distro, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/NodeInfo.groovy, +        String Path, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Security.java, +            }, +        }, +++ b/core/src/main/java/org/elasticsearch/client/transport/TransportClient.java, +            PluginsService pluginsService = new PluginsService(settings, null, pluginClasses);, +++ b/core/src/main/java/org/elasticsearch/env/Environment.java, +++ b/core/src/main/java/org/elasticsearch/node/Node.java, +        this.pluginsService = new PluginsService(tmpSettings, tmpEnv.pluginsFile(), classpathPlugins);, +++ b/build.gradle, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +            project.tasks.run.dependsOn(project.bundlePlugin), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +    String distribution = 'zip', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        String packaging = distro == 'tar' ? 'tar.gz' : distro, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/NodeInfo.groovy, +        String Path, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Security.java, +            }, +        }, +++ b/core/src/main/java/org/elasticsearch/client/transport/TransportClient.java, +            PluginsService pluginsService = new PluginsService(settings, null, pluginClasses);, +++ b/core/src/main/java/org/elasticsearch/env/Environment.java, +++ b/core/src/main/java/org/elasticsearch/node/Node.java, +        this.pluginsService = new PluginsService(tmpSettings, tmpEnv.pluginsFile(), classpathPlugins);]