[+++ b/qa/full-cluster-restart/src/test/java/org/elasticsearch/upgrades/FullClusterRestartIT.java, +                            .field("bool", i > 0 && randomBoolean()), +        assertRealtimeGetWorks();, +        Request bulkRequest = new Request("POST", "/" + index + "_write/_bulk");, +        Request explainRequest = new Request("GET", "/" + index + "/_explain/" + id);, +    void assertRealtimeGetWorks() throws IOException {, +        Request updateRequest = new Request("POST", "/" + index + "/_update/" + docId);, +        Request getRequest = new Request("GET", "/" + index + "/_doc/" + docId);, +        String docLocation = "/" + index + "/_doc/1";, +            saveInfoDocument(index + "_should_have_translog", Boolean.toString(shouldHaveTranslog));, +            shouldHaveTranslog = Booleans.parseBoolean(loadInfoDocument(index + "_should_have_translog"));, +                Request request = new Request("POST", "/" + index + "/_doc/" + i);, +                    Request request = new Request("POST", "/" + index + "/_doc/" + i);, +                    client().performRequest(new Request("DELETE", "/" + index + "/_doc/" + i));, +            saveInfoDocument(index + "_doc_count", Integer.toString(liveDocs));, +            int liveDocs = Integer.parseInt(loadInfoDocument(index + "_doc_count"));, +            if (isRunningAgainstOldCluster() == false) {, +        Request writeToRestoredRequest = new Request("POST", "/restored_" + index + "/_bulk");, +            Request createDocument = new Request("POST", "/" + index + "/_doc/" + i);, +            saveInfoDocument(index + "_count", Integer.toString(count));, +        return Integer.parseInt(loadInfoDocument(index + "_count"));, +    private void saveInfoDocument(String id, String value) throws IOException {, +        Request request = new Request("PUT", "/info/_doc/" + id);, +    private String loadInfoDocument(String id) throws IOException {, +        Request request = new Request("GET", "/info/_doc/" + id);]