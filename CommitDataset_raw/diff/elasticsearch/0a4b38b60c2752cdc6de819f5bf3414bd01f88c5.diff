[+++ b/test/framework/src/main/java/org/elasticsearch/transport/nio/channel/ChannelFactory.java, +import java.io.Closeable;, +            try {, +            } catch (IOException e) {, +                closeRawChannel(socketChannel, e);, +                throw e;, +            }, +            try {, +            } catch (IOException e) {, +                closeRawChannel(serverSocketChannel, e);, +                throw e;, +            }, +        private void closeRawChannel(Closeable c, IOException e) {, +            try {, +                c.close();, +            } catch (IOException closeException) {, +                e.addSuppressed(closeException);, +            }, +        }, +]