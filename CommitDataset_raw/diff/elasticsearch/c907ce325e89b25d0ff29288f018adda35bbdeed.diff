[+++ b/src/test/java/org/elasticsearch/indices/recovery/IndexRecoveryTests.java, +import org.elasticsearch.common.unit.ByteSizeValue;, +    private void slowDownRecovery(ByteSizeValue shardSize) {, +        long chunkSize = shardSize.bytes() / 10;, +                                // one chunk per sec.., +                                .put(RecoverySettings.INDICES_RECOVERY_MAX_BYTES_PER_SEC, chunkSize), +                                .put(RecoverySettings.INDICES_RECOVERY_FILE_CHUNK_SIZE, chunkSize), +                ), +                                .put(RecoverySettings.INDICES_RECOVERY_MAX_BYTES_PER_SEC, "20mb"), +                                .put(RecoverySettings.INDICES_RECOVERY_FILE_CHUNK_SIZE, "512kb"), +                ), +        ByteSizeValue shardSize = createAndPopulateIndex(INDEX_NAME, 1, SHARD_COUNT, REPLICA_COUNT).getShards()[0].getStats().getStore().size();, +        slowDownRecovery(shardSize);, +        slowDownRecovery(shardSize);]