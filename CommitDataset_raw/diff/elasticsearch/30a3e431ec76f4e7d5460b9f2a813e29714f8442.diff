[+++ b/core/src/test/java/org/elasticsearch/index/shard/NewPathForShardTest.java, +/** Separate test class from ShardPathTests because we need static (BeforeClass) setup to install mock filesystems... */, +    // Sneakiness to install mock file stores so we can pretend how much free space we have on each path.data:, +        origFileSystem = FileSystems.getDefault();, +, +        // Path a has lots of free space, but b has little, so new shard should go to a:, +        // Test the reverse: b has lots of free space, but a has little, so new shard should go to b:, +        // Now a and be have equal usable space; we allocate two shards to the node, and each should go to different paths:, +        // free space, we would always allocate all N incoming shards to the one path that, +        // had the most free space, never using the other drive unless new shards arrive, +        // after the first shards started using storage:]