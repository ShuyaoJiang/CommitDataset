[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/action/index/MappingUpdatedAction.java, +        } catch (Exception e) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/action/index/MappingUpdatedAction.java, +        } catch (Exception e) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java, +    public void updateMapping(final String index, final String type, final CompressedString mappingSource) {, +                    // first, check if it really needs to be updated, +                    final IndexMetaData indexMetaData = currentState.metaData().index(index);, +                    if (indexMetaData == null) {, +                        // index got delete on us, ignore..., +                        return currentState;, +                    }, +                    if (indexMetaData.mappings().containsKey(type) && indexMetaData.mapping(type).source().equals(mappingSource)) {, +                        return currentState;, +                    }, +, +                    DocumentMapper updatedMapper = mapperService.parse(type, mappingSource.string());, +, +                    // if we end up with the same mapping as the original once, ignore, +                    if (indexMetaData.mappings().containsKey(type) && indexMetaData.mapping(type).source().equals(existingMapper.mappingSource())) {, +                        return currentState;, +                    }, +]