[+++ b/docs/reference/search/aggregations/bucket/significantterms-aggregation.asciidoc, +If none of the above measures suits your usecase than another option is to implement a custom significance measure:, +===== scripted, +coming[1.5.0], +Customized scores can be implemented via a script:, +	, +[source,js], +--------------------------------------------------, +, +	    "script_heuristic": {, +              "script": "_subset_freq/(_superset_freq - _subset_freq + 1)", +            }, +--------------------------------------------------, +, +Scripts can be inline (as in above example), indexed or stored on disk. For details on the options, see <<modules-scripting, script documentation>>. , +Parameters need to be set as follows:, +, +[horizontal], +`script`:: Inline script, name of script file or name of indexed script. Mandatory., +`script_type`:: One of "inline" (default), "indexed" or "file"., +`lang`:: Script language (default "groovy"), +`params`:: Script parameters (default empty)., +, +Available parameters in the script are, +, +[horizontal], +`_subset_freq`:: Number of documents the term appears in in the subset., +`_superset_freq`:: Number of documents the term appears in in the superset., +`_subset_size`:: Number of documents in the subset., +`_superset_size`:: Number of documents in the superset., +++ b/docs/reference/search/aggregations/bucket/significantterms-aggregation.asciidoc, +If none of the above measures suits your usecase than another option is to implement a custom significance measure:, +===== scripted, +coming[1.5.0], +Customized scores can be implemented via a script:, +	, +[source,js], +--------------------------------------------------, +, +	    "script_heuristic": {, +              "script": "_subset_freq/(_superset_freq - _subset_freq + 1)", +            }, +--------------------------------------------------, +, +Scripts can be inline (as in above example), indexed or stored on disk. For details on the options, see <<modules-scripting, script documentation>>. , +Parameters need to be set as follows:, +, +[horizontal], +`script`:: Inline script, name of script file or name of indexed script. Mandatory., +`script_type`:: One of "inline" (default), "indexed" or "file"., +`lang`:: Script language (default "groovy"), +`params`:: Script parameters (default empty)., +, +Available parameters in the script are, +, +[horizontal], +`_subset_freq`:: Number of documents the term appears in in the subset., +`_superset_freq`:: Number of documents the term appears in in the superset., +`_subset_size`:: Number of documents in the subset., +`_superset_size`:: Number of documents in the superset., +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/InternalSignificantTerms.java, +        significanceHeuristic.initialize(reduceContext);, +++ b/docs/reference/search/aggregations/bucket/significantterms-aggregation.asciidoc, +If none of the above measures suits your usecase than another option is to implement a custom significance measure:, +===== scripted, +coming[1.5.0], +Customized scores can be implemented via a script:, +	, +[source,js], +--------------------------------------------------, +, +	    "script_heuristic": {, +              "script": "_subset_freq/(_superset_freq - _subset_freq + 1)", +            }, +--------------------------------------------------, +, +Scripts can be inline (as in above example), indexed or stored on disk. For details on the options, see <<modules-scripting, script documentation>>. , +Parameters need to be set as follows:, +, +[horizontal], +`script`:: Inline script, name of script file or name of indexed script. Mandatory., +`script_type`:: One of "inline" (default), "indexed" or "file"., +`lang`:: Script language (default "groovy"), +`params`:: Script parameters (default empty)., +, +Available parameters in the script are, +, +[horizontal], +`_subset_freq`:: Number of documents the term appears in in the subset., +`_superset_freq`:: Number of documents the term appears in in the superset., +`_subset_size`:: Number of documents in the subset., +`_superset_size`:: Number of documents in the superset., +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/InternalSignificantTerms.java, +        significanceHeuristic.initialize(reduceContext);, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantLongTerms.java, +import org.elasticsearch.Version;, +        public Bucket(long subsetDf, long subsetSize, long supersetDf, long supersetSize, long term, InternalAggregations aggregations, double score) {, +            this(subsetDf, subsetSize, supersetDf, supersetSize, term, aggregations, null);, +            this.score = score;, +        }]