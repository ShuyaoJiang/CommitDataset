[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/statistical/ScriptStatisticalFacetCollector.java, +    private double min = Double.MAX_VALUE;, +    private double max = Double.MIN_VALUE;, +        if (value < min) {, +        if (value > max) {, +        if (min == Double.MAX_VALUE) {, +            min = Double.NaN;, +        }, +        if (max == Double.MIN_VALUE) {, +            max = Double.NaN;, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/statistical/ScriptStatisticalFacetCollector.java, +    private double min = Double.MAX_VALUE;, +    private double max = Double.MIN_VALUE;, +        if (value < min) {, +        if (value > max) {, +        if (min == Double.MAX_VALUE) {, +            min = Double.NaN;, +        }, +        if (max == Double.MIN_VALUE) {, +            max = Double.NaN;, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/statistical/StatisticalFacetCollector.java, +        if (statsProc.min == Double.MAX_VALUE) {, +            statsProc.min = Double.NaN;, +        }, +        if (statsProc.max == Double.MIN_VALUE) {, +            statsProc.max = Double.NaN;, +        }, +        double min = Double.MAX_VALUE;, +        double max = Double.MIN_VALUE;, +        double total = 0;, +        double sumOfSquares = 0.0;, +        long count;, +        int missing;, +            if (value < min) {, +            if (value > max) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/statistical/ScriptStatisticalFacetCollector.java, +    private double min = Double.MAX_VALUE;, +    private double max = Double.MIN_VALUE;, +        if (value < min) {, +        if (value > max) {, +        if (min == Double.MAX_VALUE) {, +            min = Double.NaN;, +        }, +        if (max == Double.MIN_VALUE) {, +            max = Double.NaN;, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/statistical/StatisticalFacetCollector.java, +        if (statsProc.min == Double.MAX_VALUE) {, +            statsProc.min = Double.NaN;, +        }, +        if (statsProc.max == Double.MIN_VALUE) {, +            statsProc.max = Double.NaN;, +        }, +        double min = Double.MAX_VALUE;, +        double max = Double.MIN_VALUE;, +        double total = 0;, +        double sumOfSquares = 0.0;, +        long count;, +        int missing;, +            if (value < min) {, +            if (value > max) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/statistical/StatisticalFieldsFacetCollector.java, +        if (statsProc.min == Double.MAX_VALUE) {, +            statsProc.min = Double.NaN;, +        }, +        if (statsProc.max == Double.MIN_VALUE) {, +            statsProc.max = Double.NaN;, +        }, +        double min = Double.MAX_VALUE;, +        double max = Double.MIN_VALUE;, +        double total = 0;, +        double sumOfSquares = 0.0;, +        long count;, +        int missing;, +            if (value < min) {, +            if (value > max) {]