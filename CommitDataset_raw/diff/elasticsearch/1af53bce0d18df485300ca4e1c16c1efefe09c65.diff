[+++ b/plugins/river/couchdb/src/main/java/org/elasticsearch/river/couchdb/CouchdbRiver.java, +import org.elasticsearch.common.Base64;, +    private final String basicAuth;, +            if (couchSettings.containsKey("user") && couchSettings.containsKey("password")) {, +                String user = couchSettings.get("user").toString();, +                String password = couchSettings.get("password").toString();, +                basicAuth = "Basic " + Base64.encodeBytes((user + ":" + password).getBytes());, +            } else {, +                basicAuth = null;, +            }, +            basicAuth = null;, +                    if (basicAuth != null) {, +                        connection.addRequestProperty("Authorization", basicAuth);, +                    }]