[+++ b/core/src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java, +        final CountDownLatch committedOrFailedLatch; // 0 count indicates that a decision was made w.r.t committing or failing, +            } else if (committedOrFailed()) {, +        private synchronized boolean committedOrFailed() {, +            return committedOrFailedLatch.getCount() == 0;, +        }, +, +            if (committedOrFailed()) {, +            if (committedOrFailed()) {]