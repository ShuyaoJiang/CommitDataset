[+++ b/src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java, +import java.util.concurrent.atomic.AtomicBoolean;, +    private void publish(final ClusterState clusterState, final ClusterStatePublishResponseHandler publishResponseHandler) {, +        final AtomicBoolean timedOutWaitingForNodes = new AtomicBoolean(false);, +        final TimeValue publishTimeout = discoverySettings.getPublishTimeout();, +, +                                if (timedOutWaitingForNodes.get()) {, +                                    logger.debug("node {} responded for cluster state [{}] (took longer than [{}])", node, clusterState.version(), publishTimeout);, +                                }, +                                logger.debug("failed to send cluster state to {}", exp, node);, +                logger.debug("error sending cluster state to {}", t, node);, +                timedOutWaitingForNodes.set(!publishResponseHandler.awaitAllNodes(publishTimeout));, +                if (timedOutWaitingForNodes.get()) {, +                    logger.debug("timed out waiting for all nodes to process published state [{}] (timeout [{}])", clusterState.version(), publishTimeout);]