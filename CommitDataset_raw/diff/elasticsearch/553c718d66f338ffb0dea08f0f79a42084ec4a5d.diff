[+++ b/rest-api-spec/src/main/resources/rest-api-spec/api/index.json, +      "paths": ["/{index}/{type}", "/{index}/{type}/{id}", "/{index}/_doc/{id}", "/{index}/_doc"],, +++ b/rest-api-spec/src/main/resources/rest-api-spec/api/index.json, +      "paths": ["/{index}/{type}", "/{index}/{type}/{id}", "/{index}/_doc/{id}", "/{index}/_doc"],, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/indices.put_mapping/20_no_types.yml, +# Explicit id, +  - do:, +      index:, +          index:   index, +          id:      1, +          body:    { foo: bar }, +, +# Implicit id, +  - do:, +      index:, +          index:   index, +          body:    { foo: bar }, +, +# Bulk with explicit id, +  - do:, +      bulk:, +          index:   index, +          body: |, +            { "index": { "_id": "2" } }, +            { "doc": { "foo": "baz" } }, +, +# Bulk with implicit id, +  - do:, +      bulk:, +          index:   index, +          body: |, +            { "index": { } }, +            { "doc": { "foo": "baz" } }, +, +  - do:, +      indices.refresh:, +          index:  index, +, +  - do:, +      count:, +          index: index, +, +  - match: { count: 4 }, +, +++ b/rest-api-spec/src/main/resources/rest-api-spec/api/index.json, +      "paths": ["/{index}/{type}", "/{index}/{type}/{id}", "/{index}/_doc/{id}", "/{index}/_doc"],, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/indices.put_mapping/20_no_types.yml, +# Explicit id, +  - do:, +      index:, +          index:   index, +          id:      1, +          body:    { foo: bar }, +, +# Implicit id, +  - do:, +      index:, +          index:   index, +          body:    { foo: bar }, +, +# Bulk with explicit id, +  - do:, +      bulk:, +          index:   index, +          body: |, +            { "index": { "_id": "2" } }, +            { "doc": { "foo": "baz" } }, +, +# Bulk with implicit id, +  - do:, +      bulk:, +          index:   index, +          body: |, +            { "index": { } }, +            { "doc": { "foo": "baz" } }, +, +  - do:, +      indices.refresh:, +          index:  index, +, +  - do:, +      count:, +          index: index, +, +  - match: { count: 4 }, +, +++ b/server/src/main/java/org/elasticsearch/rest/action/document/RestBulkAction.java, +import org.elasticsearch.index.mapper.MapperService;, +        String defaultType = request.param("type", MapperService.SINGLE_MAPPING_NAME);]