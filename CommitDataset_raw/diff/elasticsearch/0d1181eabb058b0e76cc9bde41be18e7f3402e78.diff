[+++ b/plugin/src/main/java/org/elasticsearch/license/XPackInfoResponse.java, +import org.elasticsearch.Version;, +            @Nullable private final Map<String, Object> nativeCodeInfo;, +                this(in.readString(), in.readOptionalString(), in.readBoolean(), in.readBoolean(),, +                        in.getVersion().onOrAfter(Version.V_5_4_0_UNRELEASED) ? in.readMap() : null);, +            public FeatureSet(String name, @Nullable String description, boolean available, boolean enabled,, +                              @Nullable Map<String, Object> nativeCodeInfo) {, +                this.nativeCodeInfo = nativeCodeInfo;, +            @Nullable, +            public Map<String, Object> nativeCodeInfo() {, +                return nativeCodeInfo;, +            }, +, +                if (nativeCodeInfo != null) {, +                    builder.field("native_code_info", nativeCodeInfo);, +                }, +                if (out.getVersion().onOrAfter(Version.V_5_4_0_UNRELEASED)) {, +                    out.writeMap(nativeCodeInfo);, +                }, +++ b/plugin/src/main/java/org/elasticsearch/license/XPackInfoResponse.java, +import org.elasticsearch.Version;, +            @Nullable private final Map<String, Object> nativeCodeInfo;, +                this(in.readString(), in.readOptionalString(), in.readBoolean(), in.readBoolean(),, +                        in.getVersion().onOrAfter(Version.V_5_4_0_UNRELEASED) ? in.readMap() : null);, +            public FeatureSet(String name, @Nullable String description, boolean available, boolean enabled,, +                              @Nullable Map<String, Object> nativeCodeInfo) {, +                this.nativeCodeInfo = nativeCodeInfo;, +            @Nullable, +            public Map<String, Object> nativeCodeInfo() {, +                return nativeCodeInfo;, +            }, +, +                if (nativeCodeInfo != null) {, +                    builder.field("native_code_info", nativeCodeInfo);, +                }, +                if (out.getVersion().onOrAfter(Version.V_5_4_0_UNRELEASED)) {, +                    out.writeMap(nativeCodeInfo);, +                }, +++ b/plugin/src/main/java/org/elasticsearch/xpack/XPackFeatureSet.java, +import java.util.Map;, +    Map<String, Object> nativeCodeInfo();, +, +++ b/plugin/src/main/java/org/elasticsearch/license/XPackInfoResponse.java, +import org.elasticsearch.Version;, +            @Nullable private final Map<String, Object> nativeCodeInfo;, +                this(in.readString(), in.readOptionalString(), in.readBoolean(), in.readBoolean(),, +                        in.getVersion().onOrAfter(Version.V_5_4_0_UNRELEASED) ? in.readMap() : null);, +            public FeatureSet(String name, @Nullable String description, boolean available, boolean enabled,, +                              @Nullable Map<String, Object> nativeCodeInfo) {, +                this.nativeCodeInfo = nativeCodeInfo;, +            @Nullable, +            public Map<String, Object> nativeCodeInfo() {, +                return nativeCodeInfo;, +            }, +, +                if (nativeCodeInfo != null) {, +                    builder.field("native_code_info", nativeCodeInfo);, +                }, +                if (out.getVersion().onOrAfter(Version.V_5_4_0_UNRELEASED)) {, +                    out.writeMap(nativeCodeInfo);, +                }, +++ b/plugin/src/main/java/org/elasticsearch/xpack/XPackFeatureSet.java, +import java.util.Map;, +    Map<String, Object> nativeCodeInfo();, +, +++ b/plugin/src/main/java/org/elasticsearch/xpack/action/TransportXPackInfoAction.java, +                    new FeatureSet(fs.name(), request.isVerbose() ? fs.description() : null, fs.available(), fs.enabled(),, +                            request.isVerbose() ? fs.nativeCodeInfo() : null)), +++ b/plugin/src/main/java/org/elasticsearch/license/XPackInfoResponse.java, +import org.elasticsearch.Version;, +            @Nullable private final Map<String, Object> nativeCodeInfo;, +                this(in.readString(), in.readOptionalString(), in.readBoolean(), in.readBoolean(),, +                        in.getVersion().onOrAfter(Version.V_5_4_0_UNRELEASED) ? in.readMap() : null);, +            public FeatureSet(String name, @Nullable String description, boolean available, boolean enabled,, +                              @Nullable Map<String, Object> nativeCodeInfo) {, +                this.nativeCodeInfo = nativeCodeInfo;, +            @Nullable, +            public Map<String, Object> nativeCodeInfo() {, +                return nativeCodeInfo;, +            }, +, +                if (nativeCodeInfo != null) {, +                    builder.field("native_code_info", nativeCodeInfo);, +                }, +                if (out.getVersion().onOrAfter(Version.V_5_4_0_UNRELEASED)) {, +                    out.writeMap(nativeCodeInfo);, +                }, +++ b/plugin/src/main/java/org/elasticsearch/xpack/XPackFeatureSet.java, +import java.util.Map;, +    Map<String, Object> nativeCodeInfo();, +, +++ b/plugin/src/main/java/org/elasticsearch/xpack/action/TransportXPackInfoAction.java, +                    new FeatureSet(fs.name(), request.isVerbose() ? fs.description() : null, fs.available(), fs.enabled(),, +                            request.isVerbose() ? fs.nativeCodeInfo() : null)), +++ b/plugin/src/main/java/org/elasticsearch/xpack/graph/GraphFeatureSet.java, +import java.util.Map;, +    public Map<String, Object> nativeCodeInfo() {, +        return null;, +    }, +]