[+++ b/plugins/ingest/src/main/java/org/elasticsearch/plugin/ingest/transport/IngestActionFilter.java, +import org.elasticsearch.tasks.Task;, +    public void apply(Task task, String action, ActionRequest request, ActionListener listener, ActionFilterChain chain) {, +                chain.proceed(task, action, request, listener);, +            processIndexRequest(task, action, listener, chain, (IndexRequest) request, pipelineId);, +            processBulkIndexRequest(task, bulkRequest, pipelineId, action, chain, actionListener);, +            chain.proceed(task, action, request, listener);, +    void processIndexRequest(Task task, String action, ActionListener listener, ActionFilterChain chain, IndexRequest indexRequest, String pipelineId) {, +            chain.proceed(task, action, indexRequest, listener);, +            chain.proceed(task, action, indexRequest, listener);, +    void processBulkIndexRequest(Task task, BulkRequest original, String pipelineId, String action, ActionFilterChain chain, ActionListener<BulkResponse> listener) {, +                chain.proceed(task, action, bulkRequest, actionListener);, +++ b/plugins/ingest/src/main/java/org/elasticsearch/plugin/ingest/transport/IngestActionFilter.java, +import org.elasticsearch.tasks.Task;, +    public void apply(Task task, String action, ActionRequest request, ActionListener listener, ActionFilterChain chain) {, +                chain.proceed(task, action, request, listener);, +            processIndexRequest(task, action, listener, chain, (IndexRequest) request, pipelineId);, +            processBulkIndexRequest(task, bulkRequest, pipelineId, action, chain, actionListener);, +            chain.proceed(task, action, request, listener);, +    void processIndexRequest(Task task, String action, ActionListener listener, ActionFilterChain chain, IndexRequest indexRequest, String pipelineId) {, +            chain.proceed(task, action, indexRequest, listener);, +            chain.proceed(task, action, indexRequest, listener);, +    void processBulkIndexRequest(Task task, BulkRequest original, String pipelineId, String action, ActionFilterChain chain, ActionListener<BulkResponse> listener) {, +                chain.proceed(task, action, bulkRequest, actionListener);, +++ b/plugins/ingest/src/main/java/org/elasticsearch/plugin/ingest/transport/IngestDisabledActionFilter.java, +import org.elasticsearch.tasks.Task;, +    public void apply(Task task, String action, ActionRequest request, ActionListener listener, ActionFilterChain chain) {, +        chain.proceed(task, action, request, listener);, +++ b/plugins/ingest/src/main/java/org/elasticsearch/plugin/ingest/transport/IngestActionFilter.java, +import org.elasticsearch.tasks.Task;, +    public void apply(Task task, String action, ActionRequest request, ActionListener listener, ActionFilterChain chain) {, +                chain.proceed(task, action, request, listener);, +            processIndexRequest(task, action, listener, chain, (IndexRequest) request, pipelineId);, +            processBulkIndexRequest(task, bulkRequest, pipelineId, action, chain, actionListener);, +            chain.proceed(task, action, request, listener);, +    void processIndexRequest(Task task, String action, ActionListener listener, ActionFilterChain chain, IndexRequest indexRequest, String pipelineId) {, +            chain.proceed(task, action, indexRequest, listener);, +            chain.proceed(task, action, indexRequest, listener);, +    void processBulkIndexRequest(Task task, BulkRequest original, String pipelineId, String action, ActionFilterChain chain, ActionListener<BulkResponse> listener) {, +                chain.proceed(task, action, bulkRequest, actionListener);, +++ b/plugins/ingest/src/main/java/org/elasticsearch/plugin/ingest/transport/IngestDisabledActionFilter.java, +import org.elasticsearch.tasks.Task;, +    public void apply(Task task, String action, ActionRequest request, ActionListener listener, ActionFilterChain chain) {, +        chain.proceed(task, action, request, listener);, +++ b/plugins/ingest/src/test/java/org/elasticsearch/plugin/ingest/transport/IngestActionFilterTests.java, +import org.elasticsearch.tasks.Task;, +        Task task = mock(Task.class);, +        filter.apply(task, "_action", indexRequest, actionListener, actionFilterChain);, +        verify(actionFilterChain).proceed(task, "_action", indexRequest, actionListener);, +        Task task = mock(Task.class);, +        filter.apply(task, "_action", indexRequest, actionListener, actionFilterChain);, +        Task task = mock(Task.class);, +        filter.apply(task, "_action", indexRequest, actionListener, actionFilterChain);, +        Task task = mock(Task.class);, +        filter.apply(task, "_action", indexRequest, actionListener, actionFilterChain);, +        verify(actionFilterChain).proceed(task, "_action", indexRequest, actionListener);, +        Task task = mock(Task.class);, +        filter.apply(task, "_action", indexRequest, actionListener, actionFilterChain);, +        verify(actionFilterChain).proceed(task, "_action", indexRequest, actionListener);, +        Task task = mock(Task.class);, +        filter.apply(task, "_action", indexRequest, actionListener, actionFilterChain);, +        Task task = mock(Task.class);, +        filter.apply(task, "_action", bulkRequest, actionListener, actionFilterChain);, +                verify(actionFilterChain).proceed(task, "_action", bulkRequest, actionListener);]