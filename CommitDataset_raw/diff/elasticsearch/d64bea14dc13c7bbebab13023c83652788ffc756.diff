[+++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/action/CloseJobAction.java, +        MlMetadata maybeNull = state.metaData().custom(MlMetadata.TYPE);, +        final MlMetadata mlMetadata = (maybeNull == null) ? MlMetadata.EMPTY_METADATA : maybeNull;, +            if (mlMetadata.getJobs().containsKey(jobId) == false) {, +                throw ExceptionsHelper.missingJobException(jobId);, +            }, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/action/CloseJobAction.java, +        MlMetadata maybeNull = state.metaData().custom(MlMetadata.TYPE);, +        final MlMetadata mlMetadata = (maybeNull == null) ? MlMetadata.EMPTY_METADATA : maybeNull;, +            if (mlMetadata.getJobs().containsKey(jobId) == false) {, +                throw ExceptionsHelper.missingJobException(jobId);, +            }, +++ b/plugin/src/test/java/org/elasticsearch/xpack/ml/action/CloseJobActionRequestTests.java, +    public void testResolve_throwsWithUnknownJobId() {, +        MlMetadata.Builder mlBuilder = new MlMetadata.Builder();, +        mlBuilder.putJob(BaseMlIntegTestCase.createFareQuoteJob("job_id_1").build(new Date()), false);, +, +        ClusterState cs1 = ClusterState.builder(new ClusterName("_name")), +                .metaData(new MetaData.Builder().putCustom(MlMetadata.TYPE, mlBuilder.build())), +                .build();, +, +        List<String> openJobs = new ArrayList<>();, +        List<String> closingJobs = new ArrayList<>();, +, +        expectThrows(ResourceNotFoundException.class,, +                () -> CloseJobAction.resolveAndValidateJobId("missing-job", cs1, openJobs, closingJobs, false));, +    }, +, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/action/CloseJobAction.java, +        MlMetadata maybeNull = state.metaData().custom(MlMetadata.TYPE);, +        final MlMetadata mlMetadata = (maybeNull == null) ? MlMetadata.EMPTY_METADATA : maybeNull;, +            if (mlMetadata.getJobs().containsKey(jobId) == false) {, +                throw ExceptionsHelper.missingJobException(jobId);, +            }, +++ b/plugin/src/test/java/org/elasticsearch/xpack/ml/action/CloseJobActionRequestTests.java, +    public void testResolve_throwsWithUnknownJobId() {, +        MlMetadata.Builder mlBuilder = new MlMetadata.Builder();, +        mlBuilder.putJob(BaseMlIntegTestCase.createFareQuoteJob("job_id_1").build(new Date()), false);, +, +        ClusterState cs1 = ClusterState.builder(new ClusterName("_name")), +                .metaData(new MetaData.Builder().putCustom(MlMetadata.TYPE, mlBuilder.build())), +                .build();, +, +        List<String> openJobs = new ArrayList<>();, +        List<String> closingJobs = new ArrayList<>();, +, +        expectThrows(ResourceNotFoundException.class,, +                () -> CloseJobAction.resolveAndValidateJobId("missing-job", cs1, openJobs, closingJobs, false));, +    }, +, +++ b/plugin/src/test/resources/rest-api-spec/test/ml/jobs_crud.yml, +"Test open and close an unknown job is resource not found":, +  - do:, +      catch: missing, +      xpack.ml.open_job:, +        job_id: jobs-crud-some-missing-job-i-made-up, +, +  - do:, +      catch: missing, +      xpack.ml.close_job:, +        job_id: jobs-crud-some-missing-job-i-made-up, +, +---]