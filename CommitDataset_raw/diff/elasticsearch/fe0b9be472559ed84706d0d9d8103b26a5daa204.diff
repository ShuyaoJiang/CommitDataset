[+++ b/core/src/main/java/org/elasticsearch/index/shard/IndexShard.java, +                logger.debug("marking shard as inactive (inactive_time=[{}]) indexing wise", inactiveTime);, +++ b/core/src/main/java/org/elasticsearch/index/shard/IndexShard.java, +                logger.debug("marking shard as inactive (inactive_time=[{}]) indexing wise", inactiveTime);, +++ b/core/src/main/java/org/elasticsearch/indices/memory/IndexingMemoryController.java, +            return shard.checkIdle();]