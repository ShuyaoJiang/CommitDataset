[+++ b/src/test/java/org/elasticsearch/test/ElasticsearchSingleNodeTest.java, +import org.elasticsearch.cluster.node.DiscoveryNode;, +import org.junit.Ignore;, +import static org.elasticsearch.test.hamcrest.ElasticsearchAssertions.assertAcked;, +import static org.hamcrest.Matchers.*;, +@Ignore, +public abstract class ElasticsearchSingleNodeTest extends ElasticsearchTestCase {, +    private static Node node() {, +    private static Node node(Settings settings) {, +        Node build = NodeBuilder.nodeBuilder().local(true).data(true).settings(ImmutableSettings.builder(), +                .put("config.ignore_system_properties", true) // make sure we get what we set :), +                .put("gateway.type", "none")).build();, +        build.start();, +        assertThat(DiscoveryNode.localNode(build.settings()), is(true));, +        return build;, +        assertAcked(node.client().admin().indices().prepareCreate(index).setSettings(settings).get());, +        assertThat("Cluster must be a single node cluster", health.getNumberOfDataNodes(), equalTo(1));, +        return instanceFromNode.indexServiceSafe(index);, +, +]