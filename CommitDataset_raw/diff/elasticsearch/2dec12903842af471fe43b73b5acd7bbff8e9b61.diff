[+++ b/core/src/main/java/org/elasticsearch/action/suggest/SuggestRequest.java, +import org.elasticsearch.search.suggest.SuggestionBuilder;, +     * set a new source using a {@link org.elasticsearch.search.suggest.SuggestionBuilder}, +    public SuggestRequest suggest(SuggestionBuilder suggestionBuilder) {, +++ b/core/src/main/java/org/elasticsearch/action/suggest/SuggestRequest.java, +import org.elasticsearch.search.suggest.SuggestionBuilder;, +     * set a new source using a {@link org.elasticsearch.search.suggest.SuggestionBuilder}, +    public SuggestRequest suggest(SuggestionBuilder suggestionBuilder) {, +++ b/core/src/main/java/org/elasticsearch/action/suggest/SuggestRequestBuilder.java, +import org.elasticsearch.search.suggest.SuggestionBuilder;, +    public SuggestRequestBuilder addSuggestion(SuggestionBuilder<?> suggestion) {, +++ b/core/src/main/java/org/elasticsearch/action/suggest/SuggestRequest.java, +import org.elasticsearch.search.suggest.SuggestionBuilder;, +     * set a new source using a {@link org.elasticsearch.search.suggest.SuggestionBuilder}, +    public SuggestRequest suggest(SuggestionBuilder suggestionBuilder) {, +++ b/core/src/main/java/org/elasticsearch/action/suggest/SuggestRequestBuilder.java, +import org.elasticsearch.search.suggest.SuggestionBuilder;, +    public SuggestRequestBuilder addSuggestion(SuggestionBuilder<?> suggestion) {, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +import org.elasticsearch.search.suggest.SuggestionBuilder;, +import org.elasticsearch.search.suggest.phrase.PhraseSuggestionBuilder.SmoothingModel;, +    protected StreamInput() { }, +    public Float readOptionalFloat() throws IOException {, +        if (readBoolean()) {, +            return readFloat();, +        }, +        return null;, +    }, +, +    @Nullable, +     * Reads a {@link SuggestionBuilder} from the current stream, +     */, +    public SuggestionBuilder<?> readSuggestion() throws IOException {, +        return readNamedWriteable(SuggestionBuilder.class);, +    }, +, +    /**, +     * Reads a {@link SmoothingModel} from the current stream, +     */, +    public SmoothingModel readPhraseSuggestionSmoothingModel() throws IOException {, +        return readNamedWriteable(SmoothingModel.class);, +    }, +    , +    /**, +++ b/core/src/main/java/org/elasticsearch/action/suggest/SuggestRequest.java, +import org.elasticsearch.search.suggest.SuggestionBuilder;, +     * set a new source using a {@link org.elasticsearch.search.suggest.SuggestionBuilder}, +    public SuggestRequest suggest(SuggestionBuilder suggestionBuilder) {, +++ b/core/src/main/java/org/elasticsearch/action/suggest/SuggestRequestBuilder.java, +import org.elasticsearch.search.suggest.SuggestionBuilder;, +    public SuggestRequestBuilder addSuggestion(SuggestionBuilder<?> suggestion) {, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +import org.elasticsearch.search.suggest.SuggestionBuilder;, +import org.elasticsearch.search.suggest.phrase.PhraseSuggestionBuilder.SmoothingModel;, +    protected StreamInput() { }, +    public Float readOptionalFloat() throws IOException {, +        if (readBoolean()) {, +            return readFloat();, +        }, +        return null;, +    }, +, +    @Nullable, +     * Reads a {@link SuggestionBuilder} from the current stream, +     */, +    public SuggestionBuilder<?> readSuggestion() throws IOException {, +        return readNamedWriteable(SuggestionBuilder.class);, +    }, +, +    /**, +     * Reads a {@link SmoothingModel} from the current stream, +     */, +    public SmoothingModel readPhraseSuggestionSmoothingModel() throws IOException {, +        return readNamedWriteable(SmoothingModel.class);, +    }, +    , +    /**, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java, +import org.elasticsearch.search.suggest.SuggestionBuilder;, +import org.elasticsearch.search.suggest.phrase.PhraseSuggestionBuilder.SmoothingModel;, +    public void writeOptionalFloat(@Nullable Float floatValue) throws IOException {, +        if (floatValue == null) {, +            writeBoolean(false);, +        } else {, +            writeBoolean(true);, +            writeFloat(floatValue);, +        }, +    }, +, +     * Writes the given {@link SmoothingModel} to the stream, +     */, +    public void writePhraseSuggestionSmoothingModel(SmoothingModel smoothinModel) throws IOException {, +        writeNamedWriteable(smoothinModel);, +    }, +    , +    /**, +, +    /**, +     * Writes a {@link SuggestionBuilder} to the current stream, +     */]