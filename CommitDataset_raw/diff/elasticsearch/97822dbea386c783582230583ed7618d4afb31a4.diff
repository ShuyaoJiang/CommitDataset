[+++ b/server/src/test/java/org/elasticsearch/persistent/PersistentTasksClusterServiceTests.java, +            builder.nodes(DiscoveryNodes.builder(clusterState.nodes()).add(newNode(randomAlphaOfLength(10))));, +                    builder.nodes(DiscoveryNodes.builder(clusterState.nodes()).add(newNode(randomAlphaOfLength(10))));, +        IndexMetaData indexMetaData = IndexMetaData.builder(randomAlphaOfLength(10)), +        return addRandomTask(clusterStateBuilder, metaData, tasks, new Assignment(node, randomAlphaOfLength(10)),, +                randomAlphaOfLength(10));, +                tasks.addTask(randomAlphaOfLength(10), new TestRequest(param), assignment).build()));, +        IndexMetaData indexMetaData = IndexMetaData.builder(randomAlphaOfLength(10)), +++ b/server/src/test/java/org/elasticsearch/persistent/PersistentTasksClusterServiceTests.java, +            builder.nodes(DiscoveryNodes.builder(clusterState.nodes()).add(newNode(randomAlphaOfLength(10))));, +                    builder.nodes(DiscoveryNodes.builder(clusterState.nodes()).add(newNode(randomAlphaOfLength(10))));, +        IndexMetaData indexMetaData = IndexMetaData.builder(randomAlphaOfLength(10)), +        return addRandomTask(clusterStateBuilder, metaData, tasks, new Assignment(node, randomAlphaOfLength(10)),, +                randomAlphaOfLength(10));, +                tasks.addTask(randomAlphaOfLength(10), new TestRequest(param), assignment).build()));, +        IndexMetaData indexMetaData = IndexMetaData.builder(randomAlphaOfLength(10)), +++ b/server/src/test/java/org/elasticsearch/persistent/PersistentTasksCustomMetaDataTests.java, +            tasks.addTask(TestPersistentTasksExecutor.NAME, new TestRequest(randomAlphaOfLength(10)),, +                tasks.updateTaskStatus(tasks.getCurrentId(), new Status(randomAlphaOfLength(10)));, +                    builder.updateTaskStatus(pickRandomTask(tasksInProgress), randomBoolean() ? new Status(randomAlphaOfLength(10)) : null);, +        builder.addTask(TestPersistentTasksExecutor.NAME, new TestRequest(randomAlphaOfLength(10)), randomAssignment());, +                        builder.updateTaskStatus(lastKnownTask, randomBoolean() ? new Status(randomAlphaOfLength(10)) : null);, +                return new Assignment(null, randomAlphaOfLength(10));, +        return new Assignment(randomAlphaOfLength(10), randomAlphaOfLength(10));, +++ b/server/src/test/java/org/elasticsearch/persistent/PersistentTasksClusterServiceTests.java, +            builder.nodes(DiscoveryNodes.builder(clusterState.nodes()).add(newNode(randomAlphaOfLength(10))));, +                    builder.nodes(DiscoveryNodes.builder(clusterState.nodes()).add(newNode(randomAlphaOfLength(10))));, +        IndexMetaData indexMetaData = IndexMetaData.builder(randomAlphaOfLength(10)), +        return addRandomTask(clusterStateBuilder, metaData, tasks, new Assignment(node, randomAlphaOfLength(10)),, +                randomAlphaOfLength(10));, +                tasks.addTask(randomAlphaOfLength(10), new TestRequest(param), assignment).build()));, +        IndexMetaData indexMetaData = IndexMetaData.builder(randomAlphaOfLength(10)), +++ b/server/src/test/java/org/elasticsearch/persistent/PersistentTasksCustomMetaDataTests.java, +            tasks.addTask(TestPersistentTasksExecutor.NAME, new TestRequest(randomAlphaOfLength(10)),, +                tasks.updateTaskStatus(tasks.getCurrentId(), new Status(randomAlphaOfLength(10)));, +                    builder.updateTaskStatus(pickRandomTask(tasksInProgress), randomBoolean() ? new Status(randomAlphaOfLength(10)) : null);, +        builder.addTask(TestPersistentTasksExecutor.NAME, new TestRequest(randomAlphaOfLength(10)), randomAssignment());, +                        builder.updateTaskStatus(lastKnownTask, randomBoolean() ? new Status(randomAlphaOfLength(10)) : null);, +                return new Assignment(null, randomAlphaOfLength(10));, +        return new Assignment(randomAlphaOfLength(10), randomAlphaOfLength(10));, +++ b/server/src/test/java/org/elasticsearch/persistent/StartPersistentActionRequestTests.java, +            testRequest.setTestParam(randomAlphaOfLengthBetween(1, 20));, +            testRequest.setParentTask(randomAlphaOfLengthBetween(1, 20), randomLong());, +            testRequest.setExecutorNodeAttr(randomAlphaOfLengthBetween(1, 20));, +        return new Request(randomAlphaOfLengthBetween(1, 20), new TestRequest());, +++ b/server/src/test/java/org/elasticsearch/persistent/PersistentTasksClusterServiceTests.java, +            builder.nodes(DiscoveryNodes.builder(clusterState.nodes()).add(newNode(randomAlphaOfLength(10))));, +                    builder.nodes(DiscoveryNodes.builder(clusterState.nodes()).add(newNode(randomAlphaOfLength(10))));, +        IndexMetaData indexMetaData = IndexMetaData.builder(randomAlphaOfLength(10)), +        return addRandomTask(clusterStateBuilder, metaData, tasks, new Assignment(node, randomAlphaOfLength(10)),, +                randomAlphaOfLength(10));, +                tasks.addTask(randomAlphaOfLength(10), new TestRequest(param), assignment).build()));, +        IndexMetaData indexMetaData = IndexMetaData.builder(randomAlphaOfLength(10)), +++ b/server/src/test/java/org/elasticsearch/persistent/PersistentTasksCustomMetaDataTests.java, +            tasks.addTask(TestPersistentTasksExecutor.NAME, new TestRequest(randomAlphaOfLength(10)),, +                tasks.updateTaskStatus(tasks.getCurrentId(), new Status(randomAlphaOfLength(10)));, +                    builder.updateTaskStatus(pickRandomTask(tasksInProgress), randomBoolean() ? new Status(randomAlphaOfLength(10)) : null);, +        builder.addTask(TestPersistentTasksExecutor.NAME, new TestRequest(randomAlphaOfLength(10)), randomAssignment());, +                        builder.updateTaskStatus(lastKnownTask, randomBoolean() ? new Status(randomAlphaOfLength(10)) : null);, +                return new Assignment(null, randomAlphaOfLength(10));, +        return new Assignment(randomAlphaOfLength(10), randomAlphaOfLength(10));, +++ b/server/src/test/java/org/elasticsearch/persistent/StartPersistentActionRequestTests.java, +            testRequest.setTestParam(randomAlphaOfLengthBetween(1, 20));, +            testRequest.setParentTask(randomAlphaOfLengthBetween(1, 20), randomLong());, +            testRequest.setExecutorNodeAttr(randomAlphaOfLengthBetween(1, 20));, +        return new Request(randomAlphaOfLengthBetween(1, 20), new TestRequest());, +++ b/server/src/test/java/org/elasticsearch/persistent/UpdatePersistentTaskRequestTests.java, +        return new Request(randomLong(), randomLong(), new Status(randomAlphaOfLength(10)));]