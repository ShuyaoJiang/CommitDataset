[+++ b/src/main/java/org/elasticsearch/index/mapper/core/CompletionFieldMapper.java, +import org.apache.lucene.search.suggest.analyzing.XAnalyzingSuggester;, +        /*  we use 0x001F as a SEP_LABEL in the suggester but we can use the UTF-16 representation since they, +         *  are equivalent. We also don't need to convert the input character to UTF-8 here to check for, +         *  the 0x00 end label since all multi-byte  UTF-8 chars start with 0x10 binary so if the UTF-16 CP is == 0x00, +         *  it's the single byte UTF-8 CP */, +        assert XAnalyzingSuggester.PAYLOAD_SEP == XAnalyzingSuggester.SEP_LABEL; // ensure they are the same!, +        switch(character) {, +             case  XAnalyzingSuggester.END_BYTE:, +             case  XAnalyzingSuggester.SEP_LABEL:, +                return true;, +            default:, +                return false;, +         }]