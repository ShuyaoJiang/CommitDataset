[+++ b/modules/benchmark/micro/src/main/java/org/elasticsearch/benchmark/index/engine/SimpleEngineBenchmark.java, +            ParsedDocument pDoc = new ParsedDocument(sId, sId, "type", null, doc, Lucene.STANDARD_ANALYZER, TRANSLOG_PAYLOAD, false);, +                    ParsedDocument pDoc = new ParsedDocument(sId, sId, "type", null, doc, Lucene.STANDARD_ANALYZER, TRANSLOG_PAYLOAD, false);, +++ b/modules/benchmark/micro/src/main/java/org/elasticsearch/benchmark/index/engine/SimpleEngineBenchmark.java, +            ParsedDocument pDoc = new ParsedDocument(sId, sId, "type", null, doc, Lucene.STANDARD_ANALYZER, TRANSLOG_PAYLOAD, false);, +                    ParsedDocument pDoc = new ParsedDocument(sId, sId, "type", null, doc, Lucene.STANDARD_ANALYZER, TRANSLOG_PAYLOAD, false);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/engine/Engine.java, +        public String routing() {, +            return this.doc.routing();, +        }, +, +        public String routing() {, +            return this.doc.routing();, +        }, +, +++ b/modules/benchmark/micro/src/main/java/org/elasticsearch/benchmark/index/engine/SimpleEngineBenchmark.java, +            ParsedDocument pDoc = new ParsedDocument(sId, sId, "type", null, doc, Lucene.STANDARD_ANALYZER, TRANSLOG_PAYLOAD, false);, +                    ParsedDocument pDoc = new ParsedDocument(sId, sId, "type", null, doc, Lucene.STANDARD_ANALYZER, TRANSLOG_PAYLOAD, false);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/engine/Engine.java, +        public String routing() {, +            return this.doc.routing();, +        }, +, +        public String routing() {, +            return this.doc.routing();, +        }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/ParsedDocument.java, +    private final String routing;, +, +    public ParsedDocument(String uid, String id, String type, String routing, Document document, Analyzer analyzer, byte[] source, boolean mappersAdded) {, +        this.routing = routing;, +    public String routing() {, +        return this.routing;, +    }, +, +++ b/modules/benchmark/micro/src/main/java/org/elasticsearch/benchmark/index/engine/SimpleEngineBenchmark.java, +            ParsedDocument pDoc = new ParsedDocument(sId, sId, "type", null, doc, Lucene.STANDARD_ANALYZER, TRANSLOG_PAYLOAD, false);, +                    ParsedDocument pDoc = new ParsedDocument(sId, sId, "type", null, doc, Lucene.STANDARD_ANALYZER, TRANSLOG_PAYLOAD, false);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/engine/Engine.java, +        public String routing() {, +            return this.doc.routing();, +        }, +, +        public String routing() {, +            return this.doc.routing();, +        }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/ParsedDocument.java, +    private final String routing;, +, +    public ParsedDocument(String uid, String id, String type, String routing, Document document, Analyzer analyzer, byte[] source, boolean mappersAdded) {, +        this.routing = routing;, +    public String routing() {, +        return this.routing;, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/xcontent/RoutingFieldMapper.java, +            return new RoutingFieldMapper(store, index);, +        this(Defaults.STORE, Defaults.INDEX);, +    protected RoutingFieldMapper(Field.Store store, Field.Index index) {, +        super(new Names(Defaults.NAME, Defaults.NAME, Defaults.NAME, Defaults.NAME), index, store, Defaults.TERM_VECTOR, 1.0f, Defaults.OMIT_NORMS, Defaults.OMIT_TERM_FREQ_AND_POSITIONS,, +                if (!indexed() && !stored()) {, +                    context.ignoredValue(names.indexName(), routing);, +                    return null;, +                }, +        if (index == Defaults.INDEX && store == Defaults.STORE) {, +        if (store != Defaults.STORE) {, +            builder.field("store", store.name().toLowerCase());, +        }, +++ b/modules/benchmark/micro/src/main/java/org/elasticsearch/benchmark/index/engine/SimpleEngineBenchmark.java, +            ParsedDocument pDoc = new ParsedDocument(sId, sId, "type", null, doc, Lucene.STANDARD_ANALYZER, TRANSLOG_PAYLOAD, false);, +                    ParsedDocument pDoc = new ParsedDocument(sId, sId, "type", null, doc, Lucene.STANDARD_ANALYZER, TRANSLOG_PAYLOAD, false);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/engine/Engine.java, +        public String routing() {, +            return this.doc.routing();, +        }, +, +        public String routing() {, +            return this.doc.routing();, +        }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/ParsedDocument.java, +    private final String routing;, +, +    public ParsedDocument(String uid, String id, String type, String routing, Document document, Analyzer analyzer, byte[] source, boolean mappersAdded) {, +        this.routing = routing;, +    public String routing() {, +        return this.routing;, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/xcontent/RoutingFieldMapper.java, +            return new RoutingFieldMapper(store, index);, +        this(Defaults.STORE, Defaults.INDEX);, +    protected RoutingFieldMapper(Field.Store store, Field.Index index) {, +        super(new Names(Defaults.NAME, Defaults.NAME, Defaults.NAME, Defaults.NAME), index, store, Defaults.TERM_VECTOR, 1.0f, Defaults.OMIT_NORMS, Defaults.OMIT_TERM_FREQ_AND_POSITIONS,, +                if (!indexed() && !stored()) {, +                    context.ignoredValue(names.indexName(), routing);, +                    return null;, +                }]