[+++ b/src/main/java/org/elasticsearch/index/merge/policy/MergePolicyModule.java, +    public static final String MERGE_POLICY_TYPE_KEY = "index.merge.policy.type";, +++ b/src/main/java/org/elasticsearch/index/merge/policy/MergePolicyModule.java, +    public static final String MERGE_POLICY_TYPE_KEY = "index.merge.policy.type";, +++ b/src/test/java/org/elasticsearch/test/AbstractIntegrationTest.java, +import org.elasticsearch.index.merge.policy.*;, +            .setSettings(setRandomMergePolicy(getRandom(), ImmutableSettings.builder(), +                    .put(INDEX_SEED_SETTING, getRandom().nextLong()))), +    , +    private static ImmutableSettings.Builder setRandomMergePolicy(Random random, ImmutableSettings.Builder builder) {, +        if (random.nextBoolean()) {, +            builder.put(AbstractMergePolicyProvider.INDEX_COMPOUND_FORMAT,, +                    random.nextBoolean() ? random.nextDouble() : random.nextBoolean());, +        }, +        Class<? extends MergePolicyProvider<?>> clazz = TieredMergePolicyProvider.class;, +        switch(random.nextInt(5)) {, +        case 4:, +            clazz = LogByteSizeMergePolicyProvider.class;, +            break;, +        case 3:, +            clazz = LogDocMergePolicyProvider.class;, +            break;, +        case 0:, +            return builder; // don't set the setting at all, +        }, +        assert clazz != null;, +        builder.put(MergePolicyModule.MERGE_POLICY_TYPE_KEY, clazz.getName());, +        return builder;, +    }, +]