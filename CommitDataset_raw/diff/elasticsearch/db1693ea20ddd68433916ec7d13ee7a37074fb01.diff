[+++ b/dev-tools/ci, +++ b/dev-tools/ci, +++ b/docs/en/commands/certgen.asciidoc, +deprecated[6.1,Replaced by <<certutil,`certutil`>>. ], +, +`--csr`:: Specifies to operate in certificate signing request mode., +++ b/dev-tools/ci, +++ b/docs/en/commands/certgen.asciidoc, +deprecated[6.1,Replaced by <<certutil,`certutil`>>. ], +, +`--csr`:: Specifies to operate in certificate signing request mode., +++ b/docs/en/commands/certutil.asciidoc, +[role="xpack"], +[[certutil]], +== certutil, +, +The `certutil` command simplifies the creation of certificates for use with, +Transport Layer Security (TLS) in the Elastic Stack., +, +[float], +=== Synopsis, +, +[source,shell], +--------------------------------------------------, +bin/x-pack/certutil, +(, +(ca [--ca-dn <name>] [--days <n>] [--pem]), +, +| (cert ([--ca <file_path>] | [--ca-cert <file_path> --ca-key <file_path>]), +[--ca-dn <name>] [--ca-pass <password>] [--days <n>], +[--dns <domain_name>] [--in <input_file>] [--ip <ip_addresses>], +[--keep-ca-key] [--multiple] [--name <file_name>] [--pem]), +, +| (csr [--dns <domain_name>] [--in <input_file>] [--ip <ip_addresses>], +[--name <file_name>]), +, +[-E <KeyValuePair>] [--keysize <bits>] [--out <file_path>], +[--pass <password>], +), +[-h, --help] ([-s, --silent] | [-v, --verbose]), +--------------------------------------------------, +, +[float], +=== Description, +, +You can specify one of the following modes: `ca`, `cert`, `csr`. The `certutil`, +command also supports a silent mode of operation to enable easier batch, +operations., +, +[float], +[[certutil-ca]], +==== CA mode, +, +The `ca` mode generates a new certificate authority (CA). By default, it, +produces a single PKCS#12 output file, which holds the CA certificate and the, +private key for the CA. If you specify the `--pem` parameter, the command, +generates a zip file, which contains the certificate and private key in PEM, +format., +, +You can subsequently use these files as input for the `cert` mode of the command., +, +[float], +[[certutil-cert]], +==== CERT mode, +, +The `cert` mode generates X.509 certificates and private keys. By default, it, +produces a single certificate and key for use on a single instance., +, +To generate certificates and keys for multiple instances, specify the, +`--multiple` parameter, which prompts you for details about each instance., +Alternatively, you can use the `--in` parameter to specify a YAML file that, +contains details about the instances., +, +An instance is any piece of the Elastic Stack that requires a TLS or SSL, +certificate. Depending on your configuration, {es}, Logstash, {kib}, and Beats, +might all require a certificate and private key. The minimum required, +information for an instance is its name, which is used as the common name for, +the certificate. The instance name can be a hostname value or a full, +distinguished name. If the instance name would result in an invalid file or, +directory name, you must also specify a file name in the `--name` command, +parameter or in the `filename` field in an input YAML file., +, +You can optionally provide IP addresses or DNS names for each instance. If, +neither IP addresses nor DNS names are specified, the Elastic stack products, +cannot perform hostname verification and you might need to configure the, +`verfication_mode` security setting to `certificate` only. For more information, +about this setting, see <<security-settings>>., +, +All certificates that are generated by this command are signed by a CA. You can, +provide your own CA with the `--ca` or `--ca-cert` parameters. Otherwise, the, +command automatically generates a new CA for you. For more information about, +generating a CA, see the <<certutil-ca,CA mode of this command>>., +, +By default, the `cert` mode produces a single PKCS#12 output file which holds, +the instance certificate, the instance private key, and the CA certificate. If, +you specify the `--pem` parameter, the command generates PEM formatted, +certificates and keys and packages them into a zip file. Likewise if you chose, +to generate output for multiple instances, the command produces a zip file., +, +[float]]