[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/object/ObjectMapper.java, +    @Override public void merge(final Mapper mergeWith, final MergeContext mergeContext) throws MergeMappingException {, +                        mergeWithMapper.traverse(new FieldMapperListener() {, +                            @Override public void fieldMapper(FieldMapper fieldMapper) {, +                                mergeContext.docMapper().addFieldMapper(fieldMapper);, +                        });, +                                mapper.traverse(new FieldMapperListener() {, +                                    @Override public void fieldMapper(FieldMapper fieldMapper) {, +                                        mergeContext.docMapper().addFieldMapper(fieldMapper);, +                                });, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/object/ObjectMapper.java, +    @Override public void merge(final Mapper mergeWith, final MergeContext mergeContext) throws MergeMappingException {, +                        mergeWithMapper.traverse(new FieldMapperListener() {, +                            @Override public void fieldMapper(FieldMapper fieldMapper) {, +                                mergeContext.docMapper().addFieldMapper(fieldMapper);, +                        });, +                                mapper.traverse(new FieldMapperListener() {, +                                    @Override public void fieldMapper(FieldMapper fieldMapper) {, +                                        mergeContext.docMapper().addFieldMapper(fieldMapper);, +                                });, +++ b/modules/elasticsearch/src/test/java/org/elasticsearch/index/mapper/merge/Test1MergeMapperTests.java, +        assertThat(stage1.mappers().smartName("obj1.prop1"), nullValue());, +        assertThat(stage1.mappers().smartName("obj1.prop1"), notNullValue());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/object/ObjectMapper.java, +    @Override public void merge(final Mapper mergeWith, final MergeContext mergeContext) throws MergeMappingException {, +                        mergeWithMapper.traverse(new FieldMapperListener() {, +                            @Override public void fieldMapper(FieldMapper fieldMapper) {, +                                mergeContext.docMapper().addFieldMapper(fieldMapper);, +                        });, +                                mapper.traverse(new FieldMapperListener() {, +                                    @Override public void fieldMapper(FieldMapper fieldMapper) {, +                                        mergeContext.docMapper().addFieldMapper(fieldMapper);, +                                });, +++ b/modules/elasticsearch/src/test/java/org/elasticsearch/index/mapper/merge/Test1MergeMapperTests.java, +        assertThat(stage1.mappers().smartName("obj1.prop1"), nullValue());, +        assertThat(stage1.mappers().smartName("obj1.prop1"), notNullValue());, +++ b/modules/elasticsearch/src/test/java/org/elasticsearch/index/mapper/merge/stage1.json, +    "person" : {, +        "properties" : {, +            "name" : {, +                "type" : "string", +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/object/ObjectMapper.java, +    @Override public void merge(final Mapper mergeWith, final MergeContext mergeContext) throws MergeMappingException {, +                        mergeWithMapper.traverse(new FieldMapperListener() {, +                            @Override public void fieldMapper(FieldMapper fieldMapper) {, +                                mergeContext.docMapper().addFieldMapper(fieldMapper);, +                        });, +                                mapper.traverse(new FieldMapperListener() {, +                                    @Override public void fieldMapper(FieldMapper fieldMapper) {, +                                        mergeContext.docMapper().addFieldMapper(fieldMapper);, +                                });, +++ b/modules/elasticsearch/src/test/java/org/elasticsearch/index/mapper/merge/Test1MergeMapperTests.java, +        assertThat(stage1.mappers().smartName("obj1.prop1"), nullValue());, +        assertThat(stage1.mappers().smartName("obj1.prop1"), notNullValue());, +++ b/modules/elasticsearch/src/test/java/org/elasticsearch/index/mapper/merge/stage1.json, +    "person" : {, +        "properties" : {, +            "name" : {, +                "type" : "string", +++ b/modules/elasticsearch/src/test/java/org/elasticsearch/index/mapper/merge/stage2.json, +    "person" : {, +        "properties" : {, +            "name" : {, +                "type" : "string", +            "age" : {, +                "type" : "integer", +            },, +            "obj1" : {, +                "properties" : {, +                    "prop1" : {, +                        "type" : "string", +                    }, +                }]