[+++ b/server/src/main/java/org/elasticsearch/index/IndexSettings.java, +     * Soft-deletes is enabled by default for 7.0+ indices., +    public static final Setting<Boolean> INDEX_SOFT_DELETES_SETTING = Setting.boolSetting("index.soft_deletes.enabled",, +        settings -> Boolean.toString(IndexMetaData.SETTING_INDEX_VERSION_CREATED.get(settings).onOrAfter(Version.V_7_0_0)),, +        Property.IndexScope, Property.Final);, +++ b/server/src/main/java/org/elasticsearch/index/IndexSettings.java, +     * Soft-deletes is enabled by default for 7.0+ indices., +    public static final Setting<Boolean> INDEX_SOFT_DELETES_SETTING = Setting.boolSetting("index.soft_deletes.enabled",, +        settings -> Boolean.toString(IndexMetaData.SETTING_INDEX_VERSION_CREATED.get(settings).onOrAfter(Version.V_7_0_0)),, +        Property.IndexScope, Property.Final);, +++ b/server/src/test/java/org/elasticsearch/index/IndexSettingsTests.java, +, +    public void testSoftDeletesDefaultSetting() {, +        // enabled by default on 7.0+ or later, +        {, +            Version createdVersion = VersionUtils.randomVersionBetween(random(), Version.V_7_0_0, Version.CURRENT);, +            Settings settings = Settings.builder().put(IndexMetaData.SETTING_INDEX_VERSION_CREATED.getKey(), createdVersion).build();, +            assertTrue(IndexSettings.INDEX_SOFT_DELETES_SETTING.get(settings));, +        }, +        // disabled by default on the previous versions, +        {, +            Version prevVersion = VersionUtils.randomVersionBetween(, +                random(), Version.V_6_5_0, VersionUtils.getPreviousVersion(Version.V_7_0_0));, +            Settings settings = Settings.builder().put(IndexMetaData.SETTING_INDEX_VERSION_CREATED.getKey(), prevVersion).build();, +            assertFalse(IndexSettings.INDEX_SOFT_DELETES_SETTING.get(settings));, +        }, +    }, +++ b/server/src/main/java/org/elasticsearch/index/IndexSettings.java, +     * Soft-deletes is enabled by default for 7.0+ indices., +    public static final Setting<Boolean> INDEX_SOFT_DELETES_SETTING = Setting.boolSetting("index.soft_deletes.enabled",, +        settings -> Boolean.toString(IndexMetaData.SETTING_INDEX_VERSION_CREATED.get(settings).onOrAfter(Version.V_7_0_0)),, +        Property.IndexScope, Property.Final);, +++ b/server/src/test/java/org/elasticsearch/index/IndexSettingsTests.java, +, +    public void testSoftDeletesDefaultSetting() {, +        // enabled by default on 7.0+ or later, +        {, +            Version createdVersion = VersionUtils.randomVersionBetween(random(), Version.V_7_0_0, Version.CURRENT);, +            Settings settings = Settings.builder().put(IndexMetaData.SETTING_INDEX_VERSION_CREATED.getKey(), createdVersion).build();, +            assertTrue(IndexSettings.INDEX_SOFT_DELETES_SETTING.get(settings));, +        }, +        // disabled by default on the previous versions, +        {, +            Version prevVersion = VersionUtils.randomVersionBetween(, +                random(), Version.V_6_5_0, VersionUtils.getPreviousVersion(Version.V_7_0_0));, +            Settings settings = Settings.builder().put(IndexMetaData.SETTING_INDEX_VERSION_CREATED.getKey(), prevVersion).build();, +            assertFalse(IndexSettings.INDEX_SOFT_DELETES_SETTING.get(settings));, +        }, +    }, +++ b/server/src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreIT.java, +            Settings settings = client.admin().indices().prepareGetSettings("test").get().getIndexToSettings().get("test");, +                if (INDEX_SOFT_DELETES_SETTING.get(settings)) {, +++ b/server/src/main/java/org/elasticsearch/index/IndexSettings.java, +     * Soft-deletes is enabled by default for 7.0+ indices., +    public static final Setting<Boolean> INDEX_SOFT_DELETES_SETTING = Setting.boolSetting("index.soft_deletes.enabled",, +        settings -> Boolean.toString(IndexMetaData.SETTING_INDEX_VERSION_CREATED.get(settings).onOrAfter(Version.V_7_0_0)),, +        Property.IndexScope, Property.Final);, +++ b/server/src/test/java/org/elasticsearch/index/IndexSettingsTests.java, +, +    public void testSoftDeletesDefaultSetting() {, +        // enabled by default on 7.0+ or later, +        {, +            Version createdVersion = VersionUtils.randomVersionBetween(random(), Version.V_7_0_0, Version.CURRENT);, +            Settings settings = Settings.builder().put(IndexMetaData.SETTING_INDEX_VERSION_CREATED.getKey(), createdVersion).build();, +            assertTrue(IndexSettings.INDEX_SOFT_DELETES_SETTING.get(settings));, +        }, +        // disabled by default on the previous versions, +        {, +            Version prevVersion = VersionUtils.randomVersionBetween(, +                random(), Version.V_6_5_0, VersionUtils.getPreviousVersion(Version.V_7_0_0));, +            Settings settings = Settings.builder().put(IndexMetaData.SETTING_INDEX_VERSION_CREATED.getKey(), prevVersion).build();, +            assertFalse(IndexSettings.INDEX_SOFT_DELETES_SETTING.get(settings));, +        }, +    }, +++ b/server/src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreIT.java, +            Settings settings = client.admin().indices().prepareGetSettings("test").get().getIndexToSettings().get("test");, +                if (INDEX_SOFT_DELETES_SETTING.get(settings)) {, +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/action/AutoFollowCoordinator.java, +                    if (IndexSettings.INDEX_SOFT_DELETES_SETTING.get(leaderIndexSettings) == false) {, +++ b/server/src/main/java/org/elasticsearch/index/IndexSettings.java, +     * Soft-deletes is enabled by default for 7.0+ indices., +    public static final Setting<Boolean> INDEX_SOFT_DELETES_SETTING = Setting.boolSetting("index.soft_deletes.enabled",, +        settings -> Boolean.toString(IndexMetaData.SETTING_INDEX_VERSION_CREATED.get(settings).onOrAfter(Version.V_7_0_0)),, +        Property.IndexScope, Property.Final);, +++ b/server/src/test/java/org/elasticsearch/index/IndexSettingsTests.java, +, +    public void testSoftDeletesDefaultSetting() {, +        // enabled by default on 7.0+ or later, +        {, +            Version createdVersion = VersionUtils.randomVersionBetween(random(), Version.V_7_0_0, Version.CURRENT);, +            Settings settings = Settings.builder().put(IndexMetaData.SETTING_INDEX_VERSION_CREATED.getKey(), createdVersion).build();, +            assertTrue(IndexSettings.INDEX_SOFT_DELETES_SETTING.get(settings));, +        }, +        // disabled by default on the previous versions, +        {, +            Version prevVersion = VersionUtils.randomVersionBetween(, +                random(), Version.V_6_5_0, VersionUtils.getPreviousVersion(Version.V_7_0_0));, +            Settings settings = Settings.builder().put(IndexMetaData.SETTING_INDEX_VERSION_CREATED.getKey(), prevVersion).build();, +            assertFalse(IndexSettings.INDEX_SOFT_DELETES_SETTING.get(settings));, +        }]