[+++ b/core/src/test/java/org/elasticsearch/index/query/GeoDistanceRangeQueryTests.java, +import org.apache.lucene.util.NumericUtils;, +            double fromSlop = Math.abs(fromValue) / 1000;, +            if (queryBuilder.includeLower() == false) {, +                fromSlop = NumericUtils.sortableLongToDouble((NumericUtils.doubleToSortableLong(fromValue) + 1L));, +            }, +            assertThat(geoQuery.minInclusiveDistance(), closeTo(fromValue, fromSlop));, +            double toSlop = Math.abs(toValue) / 1000;, +            if (queryBuilder.includeUpper() == false) {, +                toSlop = NumericUtils.sortableLongToDouble((NumericUtils.doubleToSortableLong(toValue) + 1L));, +            }, +            assertThat(geoQuery.maxInclusiveDistance(), closeTo(toValue, toSlop));]