[+++ b/docs/en/rest-api/ml/datafeedresource.asciidoc, +`indices` (required)::, +++ b/docs/en/rest-api/ml/datafeedresource.asciidoc, +`indices` (required)::, +++ b/docs/en/rest-api/ml/put-datafeed.asciidoc, +`indices` (required)::, +  "indices": ["it_ops_metrics"],, +  "indices": [, +++ b/docs/en/rest-api/ml/datafeedresource.asciidoc, +`indices` (required)::, +++ b/docs/en/rest-api/ml/put-datafeed.asciidoc, +`indices` (required)::, +  "indices": ["it_ops_metrics"],, +  "indices": [, +++ b/docs/en/rest-api/ml/update-datafeed.asciidoc, +`indices`::, +  "indices": ["it-ops"],, +++ b/docs/en/rest-api/ml/datafeedresource.asciidoc, +`indices` (required)::, +++ b/docs/en/rest-api/ml/put-datafeed.asciidoc, +`indices` (required)::, +  "indices": ["it_ops_metrics"],, +  "indices": [, +++ b/docs/en/rest-api/ml/update-datafeed.asciidoc, +`indices`::, +  "indices": ["it-ops"],, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/action/PutDatafeedAction.java, +                        .indices(request.getDatafeed().getIndices().toArray(new String[0])), +                                " because user {} lacks permissions on the indices to be" +, +++ b/docs/en/rest-api/ml/datafeedresource.asciidoc, +`indices` (required)::, +++ b/docs/en/rest-api/ml/put-datafeed.asciidoc, +`indices` (required)::, +  "indices": ["it_ops_metrics"],, +  "indices": [, +++ b/docs/en/rest-api/ml/update-datafeed.asciidoc, +`indices`::, +  "indices": ["it-ops"],, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/action/PutDatafeedAction.java, +                        .indices(request.getDatafeed().getIndices().toArray(new String[0])), +                                " because user {} lacks permissions on the indices to be" +, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/action/StartDatafeedAction.java, +        List<String> indices = datafeed.getIndices();, +++ b/docs/en/rest-api/ml/datafeedresource.asciidoc, +`indices` (required)::, +++ b/docs/en/rest-api/ml/put-datafeed.asciidoc, +`indices` (required)::, +  "indices": ["it_ops_metrics"],, +  "indices": [, +++ b/docs/en/rest-api/ml/update-datafeed.asciidoc, +`indices`::, +  "indices": ["it-ops"],, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/action/PutDatafeedAction.java, +                        .indices(request.getDatafeed().getIndices().toArray(new String[0])), +                                " because user {} lacks permissions on the indices to be" +, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/action/StartDatafeedAction.java, +        List<String> indices = datafeed.getIndices();, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/datafeed/DatafeedConfig.java, +    public static final ParseField INDICES = new ParseField("indices");, +        PARSER.declareStringArray(Builder::setIndices, INDEXES);, +        PARSER.declareStringArray(Builder::setIndices, INDICES);, +    private final List<String> indices;, +    private DatafeedConfig(String id, String jobId, TimeValue queryDelay, TimeValue frequency, List<String> indices, List<String> types,, +        this.indices = indices;, +            this.indices = in.readList(StreamInput::readString);, +            this.indices = null;, +    public List<String> getIndices() {, +        return indices;, +        if (indices != null) {, +            out.writeStringList(indices);, +        builder.field(INDICES.getPreferredName(), indices);, +     * The lists of indices and types are compared for equality but they are not, +     * sorted first so this test could fail simply because the indices and types, +                && Objects.equals(this.indices, that.indices), +        return Objects.hash(id, jobId, frequency, queryDelay, indices, types, query, scrollSize, aggregations, scriptFields, source,, +        private List<String> indices = Collections.emptyList();, +            this.indices = config.indices;, +        public void setIndices(List<String> indices) {, +            this.indices = ExceptionsHelper.requireNonNull(indices, INDICES.getPreferredName());, +            if (indices == null || indices.isEmpty() || indices.contains(null) || indices.contains("")) {, +                throw invalidOptionValue(INDICES.getPreferredName(), indices);, +            return new DatafeedConfig(id, jobId, queryDelay, frequency, indices, types, query, aggregations, scriptFields, scrollSize,, +++ b/docs/en/rest-api/ml/datafeedresource.asciidoc, +`indices` (required)::, +++ b/docs/en/rest-api/ml/put-datafeed.asciidoc, +`indices` (required)::, +  "indices": ["it_ops_metrics"],, +  "indices": [, +++ b/docs/en/rest-api/ml/update-datafeed.asciidoc, +`indices`::, +  "indices": ["it-ops"],, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/action/PutDatafeedAction.java, +                        .indices(request.getDatafeed().getIndices().toArray(new String[0])), +                                " because user {} lacks permissions on the indices to be" +, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/action/StartDatafeedAction.java, +        List<String> indices = datafeed.getIndices();, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/datafeed/DatafeedConfig.java, +    public static final ParseField INDICES = new ParseField("indices");, +        PARSER.declareStringArray(Builder::setIndices, INDEXES);, +        PARSER.declareStringArray(Builder::setIndices, INDICES);]