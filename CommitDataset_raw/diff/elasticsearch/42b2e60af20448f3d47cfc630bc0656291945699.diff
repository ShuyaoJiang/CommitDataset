[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java, +        ImmutableSettings.Builder updatedSettingsBuilder = ImmutableSettings.settingsBuilder();, +        for (Map.Entry<String, String> entry : request.settings.getAsMap().entrySet()) {, +            if (!entry.getKey().startsWith("index.")) {, +                updatedSettingsBuilder.put("index." + entry.getKey(), entry.getValue());, +            } else {, +                updatedSettingsBuilder.put(entry.getKey(), entry.getValue());, +            }, +        }, +        request.settings(updatedSettingsBuilder.build());, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java, +        ImmutableSettings.Builder updatedSettingsBuilder = ImmutableSettings.settingsBuilder();, +        for (Map.Entry<String, String> entry : request.settings.getAsMap().entrySet()) {, +            if (!entry.getKey().startsWith("index.")) {, +                updatedSettingsBuilder.put("index." + entry.getKey(), entry.getValue());, +            } else {, +                updatedSettingsBuilder.put(entry.getKey(), entry.getValue());, +            }, +        }, +        request.settings(updatedSettingsBuilder.build());, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java, +import org.elasticsearch.common.settings.ImmutableSettings;, +import java.util.Map;, +, +    public void updateSettings(final Settings pSettings, final String[] indices, final Listener listener) {, +        ImmutableSettings.Builder updatedSettingsBuilder = ImmutableSettings.settingsBuilder();, +        for (Map.Entry<String, String> entry : pSettings.getAsMap().entrySet()) {, +            if (!entry.getKey().startsWith("index.")) {, +                updatedSettingsBuilder.put("index." + entry.getKey(), entry.getValue());, +            } else {, +                updatedSettingsBuilder.put(entry.getKey(), entry.getValue());, +            }, +        }, +        final Settings settings = updatedSettingsBuilder.build();]