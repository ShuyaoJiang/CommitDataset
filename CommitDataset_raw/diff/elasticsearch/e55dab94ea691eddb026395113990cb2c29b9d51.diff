[+++ b/src/test/java/org/elasticsearch/test/integration/ttl/SimpleTTLTests.java, +, +        long now = System.currentTimeMillis();, +        long currentTime = System.currentTimeMillis();, +        long ttl0;, +        if (getResponse.isExists()) {, +            ttl0 = ((Number) getResponse.getField("_ttl").getValue()).longValue();, +            assertThat(ttl0, lessThan(providedTTLValue - (currentTime - now)));, +        } else {, +            assertTrue((providedTTLValue - (currentTime - now)) < 0);, +        }, +        currentTime = System.currentTimeMillis();, +        if (getResponse.isExists()) {, +            assertThat(ttl0, greaterThan(-purgeInterval));, +            assertThat(ttl0, lessThan(providedTTLValue - (currentTime - now)));, +        } else {, +            assertTrue((providedTTLValue - (currentTime - now)) < 0);, +        }, +        currentTime = System.currentTimeMillis();, +        if (getResponse.isExists()) {, +            assertThat(ttl0, greaterThan(-purgeInterval));, +            assertThat(ttl0, lessThan(providedTTLValue - (currentTime - now)));, +        } else {, +            assertTrue((providedTTLValue - (currentTime - now)) < 0);, +        }, +        currentTime = System.currentTimeMillis();, +        if (getResponse.isExists()) {, +            assertThat(ttl0, greaterThan(-purgeInterval));, +            assertThat(ttl0, lessThan(providedTTLValue - (currentTime - now)));, +        } else {, +            assertTrue((providedTTLValue - (currentTime - now)) < 0);, +        }, +        currentTime = System.currentTimeMillis();, +        if (shouldBeExpiredDate - currentTime > 0) {, +            Thread.sleep(shouldBeExpiredDate - currentTime);]