[+++ b/core/src/main/java/org/elasticsearch/index/IndexModule.java, +            throw new IllegalArgumentException("Can't register the same [query_cache] more than once for [" + name + "]");, +++ b/core/src/main/java/org/elasticsearch/index/IndexModule.java, +            throw new IllegalArgumentException("Can't register the same [query_cache] more than once for [" + name + "]");, +++ b/core/src/test/java/org/elasticsearch/index/IndexModuleTests.java, +            fail("only once");, +            fail("only once");, +, +        try {, +            module.registerQueryCache("index", null);, +            fail("must not be null");, +        } catch (IllegalArgumentException e) {, +            assertEquals(e.getMessage(), "provider must not be null");, +        }, +            fail("only once");]