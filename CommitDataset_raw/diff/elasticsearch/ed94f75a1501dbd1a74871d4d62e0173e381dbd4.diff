[+++ b/buildSrc/build.gradle, +if (GradleVersion.current() < GradleVersion.version('2.13')) {, +  throw new GradleException('Gradle 2.13+ is required to build elasticsearch'), +// Gradle version-specific options (allows build to run with Gradle 2.13 as well as 2.14+/3.+), +if (GradleVersion.current() == GradleVersion.version("2.13")) {, +  // ProgressLogger(-Factory) classes are part of the public Gradle API, +  sourceSets.main.groovy.srcDir 'src/main/gradle-2.13-groovy', +, +  dependencies {, +    compile 'ru.vyarus:gradle-animalsniffer-plugin:1.0.1' // last version compatible with Gradle 2.13, +  }, +} else {, +  // Gradle 2.14+ removed ProgressLogger(-Factory) classes from the public APIs, +  // Use logging dependency instead, +  sourceSets.main.groovy.srcDir 'src/main/gradle-2.14-groovy', +, +  dependencies {, +    compileOnly "org.gradle:gradle-logging:${GradleVersion.current().getVersion()}", +    compile 'ru.vyarus:gradle-animalsniffer-plugin:1.2.0' // Gradle 2.14 requires a version > 1.0.1, +  }, +}, +++ b/buildSrc/build.gradle, +if (GradleVersion.current() < GradleVersion.version('2.13')) {, +  throw new GradleException('Gradle 2.13+ is required to build elasticsearch'), +// Gradle version-specific options (allows build to run with Gradle 2.13 as well as 2.14+/3.+), +if (GradleVersion.current() == GradleVersion.version("2.13")) {, +  // ProgressLogger(-Factory) classes are part of the public Gradle API, +  sourceSets.main.groovy.srcDir 'src/main/gradle-2.13-groovy', +, +  dependencies {, +    compile 'ru.vyarus:gradle-animalsniffer-plugin:1.0.1' // last version compatible with Gradle 2.13, +  }, +} else {, +  // Gradle 2.14+ removed ProgressLogger(-Factory) classes from the public APIs, +  // Use logging dependency instead, +  sourceSets.main.groovy.srcDir 'src/main/gradle-2.14-groovy', +, +  dependencies {, +    compileOnly "org.gradle:gradle-logging:${GradleVersion.current().getVersion()}", +    compile 'ru.vyarus:gradle-animalsniffer-plugin:1.2.0' // Gradle 2.14 requires a version > 1.0.1, +  }, +}, +++ b/buildSrc/src/main/gradle-2.13-groovy/org/elasticsearch/gradle/ProgressLogger.groovy, +/*, + * Licensed to Elasticsearch under one or more contributor, + * license agreements. See the NOTICE file distributed with, + * this work for additional information regarding copyright, + * ownership. Elasticsearch licenses this file to you under, + * the Apache License, Version 2.0 (the "License"); you may, + * not use this file except in compliance with the License., + * You may obtain a copy of the License at, + *, + *    http://www.apache.org/licenses/LICENSE-2.0, + *, + * Unless required by applicable law or agreed to in writing,, + * software distributed under the License is distributed on an, + * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY, + * KIND, either express or implied.  See the License for the, + * specific language governing permissions and limitations, + * under the License., + */, +package org.elasticsearch.gradle, +, +/**, + * Wraps a ProgressLogger so that code in src/main/groovy does not need to, + * define imports on Gradle 2.13/2.14+ ProgressLoggers, + */, +class ProgressLogger {, +    @Delegate org.gradle.logging.ProgressLogger progressLogger, +, +    ProgressLogger(org.gradle.logging.ProgressLogger progressLogger) {, +        this.progressLogger = progressLogger, +    }, +}, +++ b/buildSrc/build.gradle, +if (GradleVersion.current() < GradleVersion.version('2.13')) {, +  throw new GradleException('Gradle 2.13+ is required to build elasticsearch'), +// Gradle version-specific options (allows build to run with Gradle 2.13 as well as 2.14+/3.+), +if (GradleVersion.current() == GradleVersion.version("2.13")) {, +  // ProgressLogger(-Factory) classes are part of the public Gradle API, +  sourceSets.main.groovy.srcDir 'src/main/gradle-2.13-groovy', +, +  dependencies {, +    compile 'ru.vyarus:gradle-animalsniffer-plugin:1.0.1' // last version compatible with Gradle 2.13, +  }, +} else {, +  // Gradle 2.14+ removed ProgressLogger(-Factory) classes from the public APIs, +  // Use logging dependency instead, +  sourceSets.main.groovy.srcDir 'src/main/gradle-2.14-groovy', +, +  dependencies {, +    compileOnly "org.gradle:gradle-logging:${GradleVersion.current().getVersion()}", +    compile 'ru.vyarus:gradle-animalsniffer-plugin:1.2.0' // Gradle 2.14 requires a version > 1.0.1, +  }, +}, +++ b/buildSrc/src/main/gradle-2.13-groovy/org/elasticsearch/gradle/ProgressLogger.groovy, +/*, + * Licensed to Elasticsearch under one or more contributor, + * license agreements. See the NOTICE file distributed with, + * this work for additional information regarding copyright]