[+++ b/server/src/main/java/org/elasticsearch/search/SearchPhase.java, +import org.elasticsearch.tasks.Task;, +, +    class SearchContextSourcePrinter {, +        private final SearchContext searchContext;, +, +        public SearchContextSourcePrinter(SearchContext searchContext) {, +            this.searchContext = searchContext;, +        }, +, +        @Override, +        public String toString() {, +            StringBuilder builder = new StringBuilder();, +            builder.append(searchContext.indexShard().shardId());, +            builder.append(" ");, +            if (searchContext.request() != null &&, +                    searchContext.request().source() != null) {, +                builder.append("source[").append(searchContext.request().source().toString()).append("], ");, +            } else {, +                builder.append("source[], ");, +            }, +            if (searchContext.getTask() != null &&, +                    searchContext.getTask().getHeader(Task.X_OPAQUE_ID) != null) {, +                builder.append("id[").append(searchContext.getTask().getHeader(Task.X_OPAQUE_ID)).append("], ");, +            } else {, +                builder.append("id[], ");, +            }, +            return builder.toString();, +        }, +    }, +++ b/server/src/main/java/org/elasticsearch/search/SearchPhase.java, +import org.elasticsearch.tasks.Task;, +, +    class SearchContextSourcePrinter {, +        private final SearchContext searchContext;, +, +        public SearchContextSourcePrinter(SearchContext searchContext) {, +            this.searchContext = searchContext;, +        }, +, +        @Override, +        public String toString() {, +            StringBuilder builder = new StringBuilder();, +            builder.append(searchContext.indexShard().shardId());, +            builder.append(" ");, +            if (searchContext.request() != null &&, +                    searchContext.request().source() != null) {, +                builder.append("source[").append(searchContext.request().source().toString()).append("], ");, +            } else {, +                builder.append("source[], ");, +            }, +            if (searchContext.getTask() != null &&, +                    searchContext.getTask().getHeader(Task.X_OPAQUE_ID) != null) {, +                builder.append("id[").append(searchContext.getTask().getHeader(Task.X_OPAQUE_ID)).append("], ");, +            } else {, +                builder.append("id[], ");, +            }, +            return builder.toString();, +        }, +    }, +++ b/server/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java, +import org.apache.logging.log4j.LogManager;, +import org.apache.logging.log4j.Logger;, +    private static final Logger LOGGER = LogManager.getLogger(FetchPhase.class);, +, +        if (LOGGER.isTraceEnabled()) {, +            LOGGER.trace("{}", new SearchContextSourcePrinter(context));, +        }, +, +++ b/server/src/main/java/org/elasticsearch/search/SearchPhase.java, +import org.elasticsearch.tasks.Task;, +, +    class SearchContextSourcePrinter {, +        private final SearchContext searchContext;, +, +        public SearchContextSourcePrinter(SearchContext searchContext) {, +            this.searchContext = searchContext;, +        }, +, +        @Override, +        public String toString() {, +            StringBuilder builder = new StringBuilder();, +            builder.append(searchContext.indexShard().shardId());, +            builder.append(" ");, +            if (searchContext.request() != null &&, +                    searchContext.request().source() != null) {, +                builder.append("source[").append(searchContext.request().source().toString()).append("], ");, +            } else {, +                builder.append("source[], ");, +            }, +            if (searchContext.getTask() != null &&, +                    searchContext.getTask().getHeader(Task.X_OPAQUE_ID) != null) {, +                builder.append("id[").append(searchContext.getTask().getHeader(Task.X_OPAQUE_ID)).append("], ");, +            } else {, +                builder.append("id[], ");, +            }, +            return builder.toString();, +        }, +    }, +++ b/server/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java]