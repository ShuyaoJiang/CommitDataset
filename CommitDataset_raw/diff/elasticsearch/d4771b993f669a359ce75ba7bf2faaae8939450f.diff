[+++ b/core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java, +                        throw new IllegalStateException("task [" + executor.describeTasks(Collections.singletonList(existing.task)) +, +                            "] with source [" + source + "] is already queued");, +                        logger.trace("will process {}", task.toString(executor));, +                        logger.trace("skipping {}, already processed", task.toString(executor));, +                assert batchResult.executionResults.containsKey(updateTask.task) :, +                    "missing task result for " + updateTask.toString(executor);, +            assert batchResult.executionResults.containsKey(updateTask.task) : "missing " + updateTask.toString(executor);, +                        logger.debug("cluster state update task {} failed", ex, updateTask.toString(executor));, +, +        public String toString(ClusterStateTaskExecutor<T> executor) {, +            String taskDescription = executor.describeTasks(Collections.singletonList(task));, +            if (taskDescription.isEmpty()) {, +                return "[" + source + "]";, +            } else {, +                return "[" + source + "[" + taskDescription + "]]";, +            }, +        }]