[+++ b/test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java, +import org.elasticsearch.action.support.ActiveShardCount;, +        return ensureColor(ClusterHealthStatus.GREEN, timeout, false, indices);, +        return ensureColor(ClusterHealthStatus.YELLOW, TimeValue.timeValueSeconds(30), false, indices);, +    /**, +     * Ensures the cluster has a yellow state via the cluster health API and ensures the that cluster has no initializing shards, +     * for the given indices, +     */, +    public ClusterHealthStatus ensureYellowAndNoInitializingShards(String... indices) {, +        return ensureColor(ClusterHealthStatus.YELLOW, TimeValue.timeValueSeconds(30), true, indices);, +    }, +, +    private ClusterHealthStatus ensureColor(ClusterHealthStatus clusterHealthStatus, TimeValue timeout, boolean waitForNoInitializingShards,, +                                            String... indices) {, +            .waitForNoInitializingShards(waitForNoInitializingShards)]