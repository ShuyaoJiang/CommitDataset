[+++ b/x-pack/plugin/ccr/qa/rest/src/test/resources/rest-api-spec/test/ccr/auto_follow.yml, +          max_outstanding_read_requests: 2, +  - match: { my_pattern.max_outstanding_read_requests: 2 }, +  - match: { my_pattern.max_outstanding_read_requests: 2 }, +++ b/x-pack/plugin/ccr/qa/rest/src/test/resources/rest-api-spec/test/ccr/auto_follow.yml, +          max_outstanding_read_requests: 2, +  - match: { my_pattern.max_outstanding_read_requests: 2 }, +  - match: { my_pattern.max_outstanding_read_requests: 2 }, +++ b/x-pack/plugin/ccr/qa/rest/src/test/resources/rest-api-spec/test/ccr/follow_stats.yml, +  - gte: { indices.0.shards.0.outstanding_read_requests: 0 }, +  - match: { indices.0.shards.0.outstanding_write_requests: 0 }, +  - match: { indices.0.shards.0.write_buffer_operation_count: 0 }, +  - gte: { indices.0.shards.0.follower_mapping_version: 0 }, +  - gte: { indices.0.shards.0.total_read_time_millis: 0 }, +  - gte: { indices.0.shards.0.successful_read_requests: 0 }, +  - gte: { indices.0.shards.0.failed_read_requests: 0 }, +  - match: { indices.0.shards.0.operations_read: 0 }, +  - match: { indices.0.shards.0.bytes_read: 0 }, +  - match: { indices.0.shards.0.total_write_time_millis: 0 }, +  - match: { indices.0.shards.0.successful_write_requests: 0 }, +  - match: { indices.0.shards.0.failed_write_requests: 0 }, +  - match: { indices.0.shards.0.operations_written: 0 }, +  - length: { indices.0.shards.0.read_exceptions: 0 }, +  - gte: { indices.0.shards.0.time_since_last_read_millis: -1 }, +++ b/x-pack/plugin/ccr/qa/rest/src/test/resources/rest-api-spec/test/ccr/auto_follow.yml, +          max_outstanding_read_requests: 2, +  - match: { my_pattern.max_outstanding_read_requests: 2 }, +  - match: { my_pattern.max_outstanding_read_requests: 2 }, +++ b/x-pack/plugin/ccr/qa/rest/src/test/resources/rest-api-spec/test/ccr/follow_stats.yml, +  - gte: { indices.0.shards.0.outstanding_read_requests: 0 }, +  - match: { indices.0.shards.0.outstanding_write_requests: 0 }, +  - match: { indices.0.shards.0.write_buffer_operation_count: 0 }, +  - gte: { indices.0.shards.0.follower_mapping_version: 0 }, +  - gte: { indices.0.shards.0.total_read_time_millis: 0 }, +  - gte: { indices.0.shards.0.successful_read_requests: 0 }, +  - gte: { indices.0.shards.0.failed_read_requests: 0 }, +  - match: { indices.0.shards.0.operations_read: 0 }, +  - match: { indices.0.shards.0.bytes_read: 0 }, +  - match: { indices.0.shards.0.total_write_time_millis: 0 }, +  - match: { indices.0.shards.0.successful_write_requests: 0 }, +  - match: { indices.0.shards.0.failed_write_requests: 0 }, +  - match: { indices.0.shards.0.operations_written: 0 }, +  - length: { indices.0.shards.0.read_exceptions: 0 }, +  - gte: { indices.0.shards.0.time_since_last_read_millis: -1 }, +++ b/x-pack/plugin/ccr/qa/src/main/java/org/elasticsearch/xpack/ccr/ESCCRRestTestCase.java, +        request.setJsonEntity("{\"read_poll_timeout\": \"10ms\"}");, +            "\", \"read_poll_timeout\": \"10ms\"}");, +                (int) XContentMapValues.extractValue("_source.ccr_stats.operations_read", hit);, +                (int) XContentMapValues.extractValue("_source.ccr_stats.operations_written", hit);, +++ b/x-pack/plugin/ccr/qa/rest/src/test/resources/rest-api-spec/test/ccr/auto_follow.yml, +          max_outstanding_read_requests: 2, +  - match: { my_pattern.max_outstanding_read_requests: 2 }, +  - match: { my_pattern.max_outstanding_read_requests: 2 }, +++ b/x-pack/plugin/ccr/qa/rest/src/test/resources/rest-api-spec/test/ccr/follow_stats.yml, +  - gte: { indices.0.shards.0.outstanding_read_requests: 0 }, +  - match: { indices.0.shards.0.outstanding_write_requests: 0 }, +  - match: { indices.0.shards.0.write_buffer_operation_count: 0 }, +  - gte: { indices.0.shards.0.follower_mapping_version: 0 }, +  - gte: { indices.0.shards.0.total_read_time_millis: 0 }, +  - gte: { indices.0.shards.0.successful_read_requests: 0 }, +  - gte: { indices.0.shards.0.failed_read_requests: 0 }, +  - match: { indices.0.shards.0.operations_read: 0 }, +  - match: { indices.0.shards.0.bytes_read: 0 }, +  - match: { indices.0.shards.0.total_write_time_millis: 0 }, +  - match: { indices.0.shards.0.successful_write_requests: 0 }, +  - match: { indices.0.shards.0.failed_write_requests: 0 }, +  - match: { indices.0.shards.0.operations_written: 0 }, +  - length: { indices.0.shards.0.read_exceptions: 0 }, +  - gte: { indices.0.shards.0.time_since_last_read_millis: -1 }, +++ b/x-pack/plugin/ccr/qa/src/main/java/org/elasticsearch/xpack/ccr/ESCCRRestTestCase.java, +        request.setJsonEntity("{\"read_poll_timeout\": \"10ms\"}");, +            "\", \"read_poll_timeout\": \"10ms\"}");, +                (int) XContentMapValues.extractValue("_source.ccr_stats.operations_read", hit);, +                (int) XContentMapValues.extractValue("_source.ccr_stats.operations_written", hit);, +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/action/AutoFollowCoordinator.java, +            followRequest.setMaxReadRequestOperationCount(pattern.getMaxReadRequestOperationCount());, +            followRequest.setMaxReadRequestSize(pattern.getMaxReadRequestSize());, +            followRequest.setMaxOutstandingReadRequests(pattern.getMaxOutstandingReadRequests());, +            followRequest.setMaxWriteRequestOperationCount(pattern.getMaxWriteRequestOperationCount());, +            followRequest.setMaxWriteRequestSize(pattern.getMaxWriteRequestSize());, +            followRequest.setMaxOutstandingWriteRequests(pattern.getMaxOutstandingWriteRequests());, +            followRequest.setReadPollTimeout(pattern.getPollTimeout());, +++ b/x-pack/plugin/ccr/qa/rest/src/test/resources/rest-api-spec/test/ccr/auto_follow.yml, +          max_outstanding_read_requests: 2, +  - match: { my_pattern.max_outstanding_read_requests: 2 }, +  - match: { my_pattern.max_outstanding_read_requests: 2 }, +++ b/x-pack/plugin/ccr/qa/rest/src/test/resources/rest-api-spec/test/ccr/follow_stats.yml, +  - gte: { indices.0.shards.0.outstanding_read_requests: 0 }, +  - match: { indices.0.shards.0.outstanding_write_requests: 0 }, +  - match: { indices.0.shards.0.write_buffer_operation_count: 0 }, +  - gte: { indices.0.shards.0.follower_mapping_version: 0 }, +  - gte: { indices.0.shards.0.total_read_time_millis: 0 }, +  - gte: { indices.0.shards.0.successful_read_requests: 0 }, +  - gte: { indices.0.shards.0.failed_read_requests: 0 }, +  - match: { indices.0.shards.0.operations_read: 0 }, +  - match: { indices.0.shards.0.bytes_read: 0 }, +  - match: { indices.0.shards.0.total_write_time_millis: 0 }, +  - match: { indices.0.shards.0.successful_write_requests: 0 }, +  - match: { indices.0.shards.0.failed_write_requests: 0 }, +  - match: { indices.0.shards.0.operations_written: 0 }]