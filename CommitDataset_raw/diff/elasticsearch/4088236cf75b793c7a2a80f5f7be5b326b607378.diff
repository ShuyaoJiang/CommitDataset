[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java, +import org.elasticsearch.cluster.node.DiscoveryNode;, +                    for (DiscoveryNode node : event.nodesDelta().addedNodes()) {, +                        if (node.dataNode()) {, +                            break;, +                        }, +                    }]