[+++ b/src/test/java/org/elasticsearch/test/AbstractIntegrationTest.java, +import org.elasticsearch.action.bulk.BulkRequestBuilder;, +import org.elasticsearch.action.bulk.BulkResponse;, +            logger.info("Index [{}] docs async: [{}] bulk: [{}]", list.size(), true, false);, +        } else if (randomBoolean()) {, +            logger.info("Index [{}] docs async: [{}] bulk: [{}]", list.size(), false, false);, +        } else {, +            logger.info("Index [{}] docs async: [{}] bulk: [{}]", list.size(), false, true);, +            BulkRequestBuilder bulkBuilder = client().prepareBulk();, +            for (IndexRequestBuilder indexRequestBuilder : list) {, +                bulkBuilder.add(indexRequestBuilder);, +            }, +            BulkResponse actionGet = bulkBuilder.execute().actionGet();, +            assertThat(actionGet.hasFailures() ? actionGet.buildFailureMessage() : "", actionGet.hasFailures(), equalTo(false));]