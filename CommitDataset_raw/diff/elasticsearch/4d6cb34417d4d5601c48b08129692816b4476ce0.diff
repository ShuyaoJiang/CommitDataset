[+++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestReindexAction.java, +             * Extract the parameters that we need from the source sent to the parser. We could do away with this hack when search source, +             * has an ObjectParser., +        destParser.declareString(IndexRequest::setPipeline, new ParseField("pipeline"));, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestReindexAction.java, +             * Extract the parameters that we need from the source sent to the parser. We could do away with this hack when search source, +             * has an ObjectParser., +        destParser.declareString(IndexRequest::setPipeline, new ParseField("pipeline"));, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestUpdateByQueryAction.java, +        internalRequest.setPipeline(request.param("pipeline"));, +, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestReindexAction.java, +             * Extract the parameters that we need from the source sent to the parser. We could do away with this hack when search source, +             * has an ObjectParser., +        destParser.declareString(IndexRequest::setPipeline, new ParseField("pipeline"));, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestUpdateByQueryAction.java, +        internalRequest.setPipeline(request.param("pipeline"));, +, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportReindexAction.java, +            index.setPipeline(mainRequest.getDestination().getPipeline());, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestReindexAction.java, +             * Extract the parameters that we need from the source sent to the parser. We could do away with this hack when search source, +             * has an ObjectParser., +        destParser.declareString(IndexRequest::setPipeline, new ParseField("pipeline"));, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestUpdateByQueryAction.java, +        internalRequest.setPipeline(request.param("pipeline"));, +, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportReindexAction.java, +            index.setPipeline(mainRequest.getDestination().getPipeline());, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportUpdateByQueryAction.java, +            index.setPipeline(mainRequest.getPipeline());, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestReindexAction.java, +             * Extract the parameters that we need from the source sent to the parser. We could do away with this hack when search source, +             * has an ObjectParser., +        destParser.declareString(IndexRequest::setPipeline, new ParseField("pipeline"));, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestUpdateByQueryAction.java, +        internalRequest.setPipeline(request.param("pipeline"));, +, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportReindexAction.java, +            index.setPipeline(mainRequest.getDestination().getPipeline());, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportUpdateByQueryAction.java, +            index.setPipeline(mainRequest.getPipeline());, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/UpdateByQueryRequest.java, +    /**, +     * Ingest pipeline to set on index requests made by this action., +     */, +    private String pipeline;, +, +    /**, +     * Set the ingest pipeline to set on index requests made by this action., +     */, +    public void setPipeline(String pipeline) {, +        this.pipeline = pipeline;, +    }, +, +    /**, +     * Ingest pipeline to set on index requests made by this action., +     */, +    public String getPipeline() {, +        return pipeline;, +    }, +, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestReindexAction.java, +             * Extract the parameters that we need from the source sent to the parser. We could do away with this hack when search source, +             * has an ObjectParser., +        destParser.declareString(IndexRequest::setPipeline, new ParseField("pipeline"));, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestUpdateByQueryAction.java, +        internalRequest.setPipeline(request.param("pipeline"));, +, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportReindexAction.java, +            index.setPipeline(mainRequest.getDestination().getPipeline());, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/TransportUpdateByQueryAction.java, +            index.setPipeline(mainRequest.getPipeline());, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/UpdateByQueryRequest.java, +    /**, +     * Ingest pipeline to set on index requests made by this action., +     */, +    private String pipeline;, +, +    /**, +     * Set the ingest pipeline to set on index requests made by this action., +     */, +    public void setPipeline(String pipeline) {, +        this.pipeline = pipeline;, +    }, +, +    /**, +     * Ingest pipeline to set on index requests made by this action., +     */, +    public String getPipeline() {, +        return pipeline;, +    }, +, +++ b/modules/reindex/src/test/resources/rest-api-spec/test/reindex/70_with_ingest.yaml, +---, +"Modify a document":, +  - do:, +      ingest.put_pipeline:, +        id: "test_ingest", +        body:  >]