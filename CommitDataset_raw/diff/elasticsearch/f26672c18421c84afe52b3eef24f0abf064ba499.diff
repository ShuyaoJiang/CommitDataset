[+++ b/core/pom.xml, +                <version>2.1.3</version>, +        <profile>, +            <id>sign-rpm</id>, +            <activation>, +                <property>, +                    <name>rpm.sign</name>, +                    <value>true</value>, +                </property>, +            </activation>, +            <build>, +                <plugins>, +                    <plugin>, +                        <groupId>org.codehaus.mojo</groupId>, +                        <artifactId>rpm-maven-plugin</artifactId>, +                        <configuration>, +                            <keyname>${gpg.key}</keyname>, +                            <keypath>${gpg.keyring}</keypath>, +                            <keyPassphrase>, +                                <passphrase>${gpg.passphrase}</passphrase>, +                            </keyPassphrase>, +                        </configuration>, +                    </plugin>, +                </plugins>, +            </build>, +        </profile>, +++ b/core/pom.xml, +                <version>2.1.3</version>, +        <profile>, +            <id>sign-rpm</id>, +            <activation>, +                <property>, +                    <name>rpm.sign</name>, +                    <value>true</value>, +                </property>, +            </activation>, +            <build>, +                <plugins>, +                    <plugin>, +                        <groupId>org.codehaus.mojo</groupId>, +                        <artifactId>rpm-maven-plugin</artifactId>, +                        <configuration>, +                            <keyname>${gpg.key}</keyname>, +                            <keypath>${gpg.keyring}</keypath>, +                            <keyPassphrase>, +                                <passphrase>${gpg.passphrase}</passphrase>, +                            </keyPassphrase>, +                        </configuration>, +                    </plugin>, +                </plugins>, +            </build>, +        </profile>, +++ b/dev-tools/build_release.py, +def build_release(release_version, run_tests=False, dry_run=True, cpus=1, bwc_version=None):, +  gpg_args = '-Dgpg.key="%s" -Dgpg.passphrase="%s" -Ddeb.sign=true -Drpm.sign=true' % (env.get('GPG_KEY_ID'), env.get('GPG_PASSPHRASE')), +    # create unsigned RPM first for downloads.elasticsearch.org, +    run_mvn('-DskipTests rpm:rpm'), +    # move unsigned RPM to target/releases, +    # this is an oddness of RPM that is attaches -1 so we have to rename it, +    rpm = os.path.join('target/rpm/elasticsearch/RPMS/noarch/', 'elasticsearch-%s-1.noarch.rpm' % release_version), +    if os.path.isfile(rpm):, +      log('RPM [%s] contains: ' % rpm), +      run('rpm -pqli %s' % rpm), +      renamed_rpm = os.path.join('target/releases/', 'elasticsearch-%s.noarch.rpm' % release_version), +      shutil.move(rpm, renamed_rpm), +    else:, +      raise RuntimeError('Could not find required RPM at %s' % rpm), +    # now create signed RPM for repositories, +  artifacts = [os.path.join(path, 'elasticsearch-%s.%s' % (release, t)) for t in ['deb', 'tar.gz', 'zip']], +  artifacts.append(os.path.join(path, 'elasticsearch-%s.noarch.rpm' % (release))), +  return artifacts, +      build_release(release_version, run_tests=run_tests, dry_run=dry_run, cpus=cpus, bwc_version=find_bwc_version(release_version, bwc_path))]