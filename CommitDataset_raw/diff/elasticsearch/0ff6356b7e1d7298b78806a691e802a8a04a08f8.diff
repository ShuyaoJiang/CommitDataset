[+++ b/core/src/test/java/org/elasticsearch/search/aggregations/AggregatorTestCase.java, +                if (randomBoolean()) {, +                    // sometimes do an incremental reduce, +                    List<InternalAggregation> internalAggregations = randomSubsetOf(randomIntBetween(1, aggs.size()), aggs);, +++ b/core/src/test/java/org/elasticsearch/search/aggregations/AggregatorTestCase.java, +                if (randomBoolean()) {, +                    // sometimes do an incremental reduce, +                    List<InternalAggregation> internalAggregations = randomSubsetOf(randomIntBetween(1, aggs.size()), aggs);, +++ b/core/src/test/java/org/elasticsearch/search/aggregations/InternalAggregationTestCase.java, +        if (randomBoolean()) {, +            // we leave at least one in the list, +            List<InternalAggregation> internalAggregations = randomSubsetOf(randomIntBetween(1, toReduceSize), toReduce);, +            InternalAggregation.ReduceContext context = new InternalAggregation.ReduceContext(null, null, false);]