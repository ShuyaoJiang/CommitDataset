[+++ b/src/test/java/org/elasticsearch/index/search/child/AbstractChildTests.java, +import org.apache.lucene.search.DocIdSetIterator;, +import org.apache.lucene.search.Filter;, +import org.apache.lucene.search.IndexSearcher;, +import org.apache.lucene.search.Query;, +import org.apache.lucene.search.QueryCache;, +import org.apache.lucene.search.ScoreDoc;, +import org.apache.lucene.search.TopDocs;, +import org.elasticsearch.index.IndexService;, +import org.junit.After;, +import org.junit.Before;, +    // TODO: Parent/child does not work with the query cache, +    private static final QueryCache DEFAULT_QUERY_CACHE = IndexSearcher.getDefaultQueryCache();, +, +    @Before, +    public void disableQueryCache() {, +        IndexSearcher.setDefaultQueryCache(null);, +    }, +, +    @After, +    public void restoreQueryCache() {, +        IndexSearcher.setDefaultQueryCache(DEFAULT_QUERY_CACHE);, +    }, +]