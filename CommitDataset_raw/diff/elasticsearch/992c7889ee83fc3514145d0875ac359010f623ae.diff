[+++ b/build.gradle, +apply plugin: 'nebula.info-scm', +String licenseCommit, +if (VersionProperties.elasticsearch.toString().endsWith('-SNAPSHOT')) {, +  licenseCommit = scminfo.change ?: "master" // leniency for non git builds, +} else {, +  licenseCommit = "v${version}", +}, +String elasticLicenseUrl = "https://raw.githubusercontent.com/elastic/elasticsearch/${licenseCommit}/licenses/ELASTIC-LICENSE.txt", +, +  // Default to the apache license, +, +  // But stick the Elastic license url in project.ext so we can get it if we need to switch to it, +  project.ext.elasticLicenseUrl = elasticLicenseUrl, +, +++ b/build.gradle, +apply plugin: 'nebula.info-scm', +String licenseCommit, +if (VersionProperties.elasticsearch.toString().endsWith('-SNAPSHOT')) {, +  licenseCommit = scminfo.change ?: "master" // leniency for non git builds, +} else {, +  licenseCommit = "v${version}", +}, +String elasticLicenseUrl = "https://raw.githubusercontent.com/elastic/elasticsearch/${licenseCommit}/licenses/ELASTIC-LICENSE.txt", +, +  // Default to the apache license, +, +  // But stick the Elastic license url in project.ext so we can get it if we need to switch to it, +  project.ext.elasticLicenseUrl = elasticLicenseUrl, +, +++ b/distribution/archives/build.gradle, +    project.ext.licenseName = 'Elastic License', +    project.ext.licenseUrl = ext.elasticLicenseUrl, +++ b/build.gradle, +apply plugin: 'nebula.info-scm', +String licenseCommit, +if (VersionProperties.elasticsearch.toString().endsWith('-SNAPSHOT')) {, +  licenseCommit = scminfo.change ?: "master" // leniency for non git builds, +} else {, +  licenseCommit = "v${version}", +}, +String elasticLicenseUrl = "https://raw.githubusercontent.com/elastic/elasticsearch/${licenseCommit}/licenses/ELASTIC-LICENSE.txt", +, +  // Default to the apache license, +, +  // But stick the Elastic license url in project.ext so we can get it if we need to switch to it, +  project.ext.elasticLicenseUrl = elasticLicenseUrl, +, +++ b/distribution/archives/build.gradle, +    project.ext.licenseName = 'Elastic License', +    project.ext.licenseUrl = ext.elasticLicenseUrl, +++ b/distribution/packages/src/deb/init.d/elasticsearch, +	if [ -n "$MAX_MAP_COUNT" -a -f /proc/sys/vm/max_map_count -a "$MAX_MAP_COUNT" -ge $(cat /proc/sys/vm/max_map_count) ]; then, +++ b/build.gradle, +apply plugin: 'nebula.info-scm', +String licenseCommit, +if (VersionProperties.elasticsearch.toString().endsWith('-SNAPSHOT')) {, +  licenseCommit = scminfo.change ?: "master" // leniency for non git builds, +} else {, +  licenseCommit = "v${version}", +}, +String elasticLicenseUrl = "https://raw.githubusercontent.com/elastic/elasticsearch/${licenseCommit}/licenses/ELASTIC-LICENSE.txt", +, +  // Default to the apache license, +, +  // But stick the Elastic license url in project.ext so we can get it if we need to switch to it, +  project.ext.elasticLicenseUrl = elasticLicenseUrl, +, +++ b/distribution/archives/build.gradle, +    project.ext.licenseName = 'Elastic License', +    project.ext.licenseUrl = ext.elasticLicenseUrl, +++ b/distribution/packages/src/deb/init.d/elasticsearch, +	if [ -n "$MAX_MAP_COUNT" -a -f /proc/sys/vm/max_map_count -a "$MAX_MAP_COUNT" -ge $(cat /proc/sys/vm/max_map_count) ]; then, +++ b/distribution/packages/src/rpm/init.d/elasticsearch, +    if [ -n "$MAX_MAP_COUNT" -a -f /proc/sys/vm/max_map_count -a "$MAX_MAP_COUNT" -ge $(cat /proc/sys/vm/max_map_count) ]; then, +++ b/build.gradle, +apply plugin: 'nebula.info-scm', +String licenseCommit, +if (VersionProperties.elasticsearch.toString().endsWith('-SNAPSHOT')) {, +  licenseCommit = scminfo.change ?: "master" // leniency for non git builds, +} else {, +  licenseCommit = "v${version}", +}, +String elasticLicenseUrl = "https://raw.githubusercontent.com/elastic/elasticsearch/${licenseCommit}/licenses/ELASTIC-LICENSE.txt", +, +  // Default to the apache license, +, +  // But stick the Elastic license url in project.ext so we can get it if we need to switch to it, +  project.ext.elasticLicenseUrl = elasticLicenseUrl, +, +++ b/distribution/archives/build.gradle, +    project.ext.licenseName = 'Elastic License', +    project.ext.licenseUrl = ext.elasticLicenseUrl, +++ b/distribution/packages/src/deb/init.d/elasticsearch, +	if [ -n "$MAX_MAP_COUNT" -a -f /proc/sys/vm/max_map_count -a "$MAX_MAP_COUNT" -ge $(cat /proc/sys/vm/max_map_count) ]; then, +++ b/distribution/packages/src/rpm/init.d/elasticsearch, +    if [ -n "$MAX_MAP_COUNT" -a -f /proc/sys/vm/max_map_count -a "$MAX_MAP_COUNT" -ge $(cat /proc/sys/vm/max_map_count) ]; then, +++ b/docs/reference/setup/install/docker.asciidoc, +Some plugins require additional security permissions. You have to explicitly accept, +them either by attaching a `tty` when you run the Docker image and accepting yes at ]