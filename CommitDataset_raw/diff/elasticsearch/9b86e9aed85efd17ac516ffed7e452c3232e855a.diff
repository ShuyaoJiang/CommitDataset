[+++ b/x-pack/plugin/monitoring/src/main/java/org/elasticsearch/xpack/monitoring/collector/cluster/ClusterStatsCollector.java, +                                              license, apmIndicesExist, xpackUsage, clusterStats, clusterState,, +                                              clusterNeedsTLSEnabled));, +++ b/x-pack/plugin/monitoring/src/main/java/org/elasticsearch/xpack/monitoring/collector/cluster/ClusterStatsCollector.java, +                                              license, apmIndicesExist, xpackUsage, clusterStats, clusterState,, +                                              clusterNeedsTLSEnabled));, +++ b/x-pack/plugin/monitoring/src/main/java/org/elasticsearch/xpack/monitoring/collector/cluster/ClusterStatsMonitoringDoc.java, +import org.elasticsearch.cluster.metadata.MetaData;, +import org.elasticsearch.common.settings.Settings;, +    protected static final String SETTING_CLUSTER_METADATA = "cluster.metadata";, +    Settings getClusterMetaDataSettings() {, +        MetaData metaData = this.clusterState.getMetaData();, +        if (metaData == null) {, +            return Settings.EMPTY;, +        }, +        return metaData.settings().getAsSettings(SETTING_CLUSTER_METADATA);, +    }, +, +        Settings clusterMetaDataSettings = getClusterMetaDataSettings();, +        if (clusterMetaDataSettings != null) {, +            builder.startObject("cluster_settings");, +            {, +                if (clusterMetaDataSettings.size() > 0) {, +                    builder.startObject("cluster");, +                    {, +                        builder.startObject("metadata");, +                        {, +                            clusterMetaDataSettings.toXContent(builder, params);, +                        }, +                        builder.endObject();, +                    }, +                    builder.endObject();, +                }, +            }, +            builder.endObject();, +        }, +, +++ b/x-pack/plugin/monitoring/src/main/java/org/elasticsearch/xpack/monitoring/collector/cluster/ClusterStatsCollector.java, +                                              license, apmIndicesExist, xpackUsage, clusterStats, clusterState,, +                                              clusterNeedsTLSEnabled));, +++ b/x-pack/plugin/monitoring/src/main/java/org/elasticsearch/xpack/monitoring/collector/cluster/ClusterStatsMonitoringDoc.java, +import org.elasticsearch.cluster.metadata.MetaData;, +import org.elasticsearch.common.settings.Settings;, +    protected static final String SETTING_CLUSTER_METADATA = "cluster.metadata";, +    Settings getClusterMetaDataSettings() {, +        MetaData metaData = this.clusterState.getMetaData();, +        if (metaData == null) {, +            return Settings.EMPTY;, +        }, +        return metaData.settings().getAsSettings(SETTING_CLUSTER_METADATA);, +    }, +, +        Settings clusterMetaDataSettings = getClusterMetaDataSettings();, +        if (clusterMetaDataSettings != null) {, +            builder.startObject("cluster_settings");, +            {, +                if (clusterMetaDataSettings.size() > 0) {, +                    builder.startObject("cluster");, +                    {, +                        builder.startObject("metadata");, +                        {, +                            clusterMetaDataSettings.toXContent(builder, params);, +                        }, +                        builder.endObject();, +                    }, +                    builder.endObject();, +                }, +            }, +            builder.endObject();, +        }, +, +++ b/x-pack/plugin/monitoring/src/test/java/org/elasticsearch/xpack/monitoring/collector/cluster/ClusterStatsMonitoringDocTests.java, +                                                        .metaData(MetaData.builder(), +                                                            .clusterUUID(clusterUuid), +                                                            .transientSettings(Settings.builder(), +                                                                .put("cluster.metadata.display_name", "my_prod_cluster"), +                                                                .build()), +                                                            .build()), +                  + "\"cluster_settings\":{", +                    + "\"cluster\":{", +                      + "\"metadata\":{", +                        + "\"display_name\":\"my_prod_cluster\"", +                      + "}", +                    + "}", +                  + "},"]