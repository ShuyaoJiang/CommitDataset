[+++ b/src/main/java/org/elasticsearch/action/termvector/TermVectorResponse.java, +            if (curTerms.hasPayloads() && (currentPayloads[i] != null)) {, +                BytesRef curPayload = posEnum.getPayload();, +                if (curPayload != null) {, +                    currentPayloads[j] = new BytesArray(curPayload.bytes, 0, curPayload.length);, +                } else {, +                    currentPayloads[j] = null;, +                }, +++ b/src/main/java/org/elasticsearch/action/termvector/TermVectorResponse.java, +            if (curTerms.hasPayloads() && (currentPayloads[i] != null)) {, +                BytesRef curPayload = posEnum.getPayload();, +                if (curPayload != null) {, +                    currentPayloads[j] = new BytesArray(curPayload.bytes, 0, curPayload.length);, +                } else {, +                    currentPayloads[j] = null;, +                }, +++ b/src/main/java/org/elasticsearch/action/termvector/TermVectorWriter.java, +        } else {, +            output.writeVInt(0);]