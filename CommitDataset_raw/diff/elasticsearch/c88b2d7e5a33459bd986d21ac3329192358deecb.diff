[+++ b/docs/reference/monitoring/configuring-metricbeat.asciidoc, +`xpack.monitoring.collection.enabled` to `true` on each node in the production , +cluster. By default, it is is disabled (`false`). , +NOTE: You can specify this setting in either the `elasticsearch.yml` on each , +node or across the cluster as a dynamic cluster setting. If {es} , +{security-features} are enabled, you must have `monitor` cluster privileges to , +view the cluster settings and `manage` cluster privileges to change them., +, +`xpack.monitoring.elasticsearch.collection.enabled` to `false` on each node in , +the production cluster., +NOTE: You can specify this setting in either the `elasticsearch.yml` on each , +node or across the cluster as a dynamic cluster setting. If {es} , +{security-features} are enabled, you must have `monitor` cluster privileges to , +view the cluster settings and `manage` cluster privileges to change them., +, +  xpack.enabled: true <2>, +<2> This setting ensures that {kib} can read this monitoring data successfully. , +That is to say, it's stored in the same location and format as monitoring data , +that is sent by <<es-monitoring-exporters,exporters>>. , +.. If Elastic {security-features} are enabled, you must also provide a user ID , +and password so that {metricbeat} can collect metrics successfully. , +... Create a user on the production cluster that has the , +{stack-ov}/built-in-roles.html[`remote_monitoring_collector` built-in role]. , +Alternatively, use the {stack-ov}/built-in-users.html[`remote_monitoring_user` built-in user]., +For example, add the following settings in the `modules.d/elasticsearch.yml` file:, +.. If {es} {security-features} are enabled on the monitoring cluster, you , +must provide a valid user ID and password so that {metricbeat} can send metrics , +successfully. , +... Create a user on the monitoring cluster that has the , +{stack-ov}/built-in-roles.html[`remote_monitoring_agent` built-in role]. , +Alternatively, use the , +{stack-ov}/built-in-users.html[`remote_monitoring_user` built-in user]., +++ b/docs/reference/monitoring/configuring-metricbeat.asciidoc, +`xpack.monitoring.collection.enabled` to `true` on each node in the production , +cluster. By default, it is is disabled (`false`). , +NOTE: You can specify this setting in either the `elasticsearch.yml` on each , +node or across the cluster as a dynamic cluster setting. If {es} , +{security-features} are enabled, you must have `monitor` cluster privileges to , +view the cluster settings and `manage` cluster privileges to change them., +, +`xpack.monitoring.elasticsearch.collection.enabled` to `false` on each node in , +the production cluster., +NOTE: You can specify this setting in either the `elasticsearch.yml` on each , +node or across the cluster as a dynamic cluster setting. If {es} , +{security-features} are enabled, you must have `monitor` cluster privileges to , +view the cluster settings and `manage` cluster privileges to change them., +, +  xpack.enabled: true <2>, +<2> This setting ensures that {kib} can read this monitoring data successfully. , +That is to say, it's stored in the same location and format as monitoring data , +that is sent by <<es-monitoring-exporters,exporters>>. , +.. If Elastic {security-features} are enabled, you must also provide a user ID , +and password so that {metricbeat} can collect metrics successfully. , +... Create a user on the production cluster that has the , +{stack-ov}/built-in-roles.html[`remote_monitoring_collector` built-in role]. , +Alternatively, use the {stack-ov}/built-in-users.html[`remote_monitoring_user` built-in user]., +For example, add the following settings in the `modules.d/elasticsearch.yml` file:, +.. If {es} {security-features} are enabled on the monitoring cluster, you , +must provide a valid user ID and password so that {metricbeat} can send metrics , +successfully. , +... Create a user on the monitoring cluster that has the , +{stack-ov}/built-in-roles.html[`remote_monitoring_agent` built-in role]. , +Alternatively, use the , +{stack-ov}/built-in-users.html[`remote_monitoring_user` built-in user]., +++ b/docs/reference/monitoring/configuring-monitoring.asciidoc, +If you enable the Elastic {monitor-features} in your cluster, you can , +optionally collect metrics about {es}. By default, monitoring is enabled but , +. Configure your cluster to collect monitoring data:, +.. Verify that the `xpack.monitoring.enabled` setting is `true`, which is its , +default value, on each node in the cluster. For more information, see , +<<monitoring-settings>>. , +, +.. Verify that the `xpack.monitoring.elasticsearch.collection.enabled` setting , +is `true`, which is its default value, on each node in the cluster. , ++, +--, +NOTE: You can specify this setting in either the `elasticsearch.yml` on each , +node or across the cluster as a dynamic cluster setting. If {es} , +{security-features} are enabled, you must have `monitor` cluster privileges to , +view the cluster settings and `manage` cluster privileges to change them., +, +For more information, see <<monitoring-settings>> and <<cluster-update-settings>>., +--, +, +.. Set the `xpack.monitoring.collection.enabled` setting to `true` on each, +node in the cluster. By default, it is is disabled (`false`). , ++ , +--, +NOTE: You can specify this setting in either the `elasticsearch.yml` on each , +node or across the cluster as a dynamic cluster setting. If {es} , +{security-features} are enabled, you must have `monitor` cluster privileges to , +view the cluster settings and `manage` cluster privileges to change them., +, +For example, use the following APIs to review and change this setting:, +, +[source,js], +----------------------------------, +GET _cluster/settings, +, +PUT _cluster/settings]