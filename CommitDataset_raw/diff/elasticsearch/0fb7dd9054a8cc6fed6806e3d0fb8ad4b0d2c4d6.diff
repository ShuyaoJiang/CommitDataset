[+++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/PrecisionAtN.java, +    // TODO add abstraction that also works for other metrics, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/PrecisionAtN.java, +    // TODO add abstraction that also works for other metrics, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RankEvalResponse.java, + * TODO get rid of either this or RankEvalResult, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/PrecisionAtN.java, +    // TODO add abstraction that also works for other metrics, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RankEvalResponse.java, + * TODO get rid of either this or RankEvalResult, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RankEvalResult.java, +// TODO instead of just returning averages over complete results, think of other statistics, micro avg, macro avg, partial results, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/PrecisionAtN.java, +    // TODO add abstraction that also works for other metrics, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RankEvalResponse.java, + * TODO get rid of either this or RankEvalResult, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RankEvalResult.java, +// TODO instead of just returning averages over complete results, think of other statistics, micro avg, macro avg, partial results, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RankedListQualityMetric.java, +        // TODO maybe switch to using a plugable registry later?, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/PrecisionAtN.java, +    // TODO add abstraction that also works for other metrics, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RankEvalResponse.java, + * TODO get rid of either this or RankEvalResult, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RankEvalResult.java, +// TODO instead of just returning averages over complete results, think of other statistics, micro avg, macro avg, partial results, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RankedListQualityMetric.java, +        // TODO maybe switch to using a plugable registry later?, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RatedDocument.java, +    // TODO augment with index name and type name, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/PrecisionAtN.java, +    // TODO add abstraction that also works for other metrics, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RankEvalResponse.java, + * TODO get rid of either this or RankEvalResult, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RankEvalResult.java, +// TODO instead of just returning averages over complete results, think of other statistics, micro avg, macro avg, partial results, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RankedListQualityMetric.java, +        // TODO maybe switch to using a plugable registry later?, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RatedDocument.java, +    // TODO augment with index name and type name, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RestRankEvalAction.java, +                        // TODO can we get rid of aggregators parsers and suggesters?, +        List<String> types = Arrays.asList(Strings.splitStringByCommaToArray(request.param("type")));, +            specification.setTypes(types);, +, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/PrecisionAtN.java, +    // TODO add abstraction that also works for other metrics, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RankEvalResponse.java, + * TODO get rid of either this or RankEvalResult, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RankEvalResult.java, +// TODO instead of just returning averages over complete results, think of other statistics, micro avg, macro avg, partial results, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RankedListQualityMetric.java, +        // TODO maybe switch to using a plugable registry later?, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RatedDocument.java, +    // TODO augment with index name and type name, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RestRankEvalAction.java, +                        // TODO can we get rid of aggregators parsers and suggesters?, +        List<String> types = Arrays.asList(Strings.splitStringByCommaToArray(request.param("type")));, +            specification.setTypes(types);, +, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/TransportRankEvalAction.java, +            String[] types = new String[spec.getTypes().size()];, +            spec.getTypes().toArray(types);, +            templatedRequest.types(types);, +        // TODO move averaging to actual metric, also add other statistics, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/PrecisionAtN.java, +    // TODO add abstraction that also works for other metrics, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RankEvalResponse.java, + * TODO get rid of either this or RankEvalResult, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RankEvalResult.java, +// TODO instead of just returning averages over complete results, think of other statistics, micro avg, macro avg, partial results, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RankedListQualityMetric.java, +        // TODO maybe switch to using a plugable registry later?, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RatedDocument.java, +    // TODO augment with index name and type name, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RestRankEvalAction.java, +                        // TODO can we get rid of aggregators parsers and suggesters?, +        List<String> types = Arrays.asList(Strings.splitStringByCommaToArray(request.param("type")));, +            specification.setTypes(types);, +, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/TransportRankEvalAction.java, +            String[] types = new String[spec.getTypes().size()];, +            spec.getTypes().toArray(types);, +            templatedRequest.types(types);, +        // TODO move averaging to actual metric, also add other statistics, +++ b/modules/rank-eval/src/test/java/org/elasticsearch/index/rankeval/QuerySpecTests.java, +    // TODO add some sort of roundtrip testing like we have now for queries?]