[+++ b/core/src/main/java/org/elasticsearch/indices/flush/SyncedFlushService.java, +                innerAttemptSyncedFlush(shardId, state, new ActionListener<ShardsSyncedFlushResult>() {, +                        final int totalShards = indexMetaData.getNumberOfReplicas() + 1;, +                        results.get(index).add(new ShardsSyncedFlushResult(shardId, totalShards, e.getMessage()));, +        innerAttemptSyncedFlush(shardId, clusterService.state(), actionListener);, +    }, +, +    private void innerAttemptSyncedFlush(final ShardId shardId, final ClusterState state, final ActionListener<ShardsSyncedFlushResult> actionListener) {]