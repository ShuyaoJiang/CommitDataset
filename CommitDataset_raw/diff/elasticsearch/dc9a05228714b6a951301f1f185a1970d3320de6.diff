[+++ b/src/main/java/org/elasticsearch/search/suggest/SuggestUtils.java, +        directSpellChecker.setLowerCaseTerms(false);, +++ b/src/main/java/org/elasticsearch/search/suggest/SuggestUtils.java, +        directSpellChecker.setLowerCaseTerms(false);, +++ b/src/main/java/org/elasticsearch/search/suggest/phrase/CandidateGenerator.java, +    public CandidateSet drawCandidates(BytesRef term) throws IOException {, +        return drawCandidates(set);, +    public abstract CandidateSet drawCandidates(CandidateSet set) throws IOException;, +++ b/src/main/java/org/elasticsearch/search/suggest/SuggestUtils.java, +        directSpellChecker.setLowerCaseTerms(false);, +++ b/src/main/java/org/elasticsearch/search/suggest/phrase/CandidateGenerator.java, +    public CandidateSet drawCandidates(BytesRef term) throws IOException {, +        return drawCandidates(set);, +    public abstract CandidateSet drawCandidates(CandidateSet set) throws IOException;, +++ b/src/main/java/org/elasticsearch/search/suggest/phrase/DirectCandidateGenerator.java, +    private final int numCandidates;, +    public DirectCandidateGenerator(DirectSpellChecker spellchecker, String field, SuggestMode suggestMode, IndexReader reader, double nonErrorLikelihood, int numCandidates) throws IOException {, +        this(spellchecker, field, suggestMode, reader,  nonErrorLikelihood, numCandidates, null, null);, +    public DirectCandidateGenerator(DirectSpellChecker spellchecker, String field, SuggestMode suggestMode, IndexReader reader, double nonErrorLikelihood,  int numCandidates, Analyzer preFilter, Analyzer postFilter) throws IOException {, +        this.numCandidates = numCandidates;, +    public CandidateSet drawCandidates(CandidateSet set) throws IOException {, +++ b/src/main/java/org/elasticsearch/search/suggest/SuggestUtils.java, +        directSpellChecker.setLowerCaseTerms(false);, +++ b/src/main/java/org/elasticsearch/search/suggest/phrase/CandidateGenerator.java, +    public CandidateSet drawCandidates(BytesRef term) throws IOException {, +        return drawCandidates(set);, +    public abstract CandidateSet drawCandidates(CandidateSet set) throws IOException;, +++ b/src/main/java/org/elasticsearch/search/suggest/phrase/DirectCandidateGenerator.java, +    private final int numCandidates;, +    public DirectCandidateGenerator(DirectSpellChecker spellchecker, String field, SuggestMode suggestMode, IndexReader reader, double nonErrorLikelihood, int numCandidates) throws IOException {, +        this(spellchecker, field, suggestMode, reader,  nonErrorLikelihood, numCandidates, null, null);, +    public DirectCandidateGenerator(DirectSpellChecker spellchecker, String field, SuggestMode suggestMode, IndexReader reader, double nonErrorLikelihood,  int numCandidates, Analyzer preFilter, Analyzer postFilter) throws IOException {, +        this.numCandidates = numCandidates;, +    public CandidateSet drawCandidates(CandidateSet set) throws IOException {, +++ b/src/main/java/org/elasticsearch/search/suggest/phrase/MultiCandidateGeneratorWrapper.java, +    private int numCandidates ;, +    public MultiCandidateGeneratorWrapper(int numCandidates, CandidateGenerator...candidateGenerators) {, +        this.numCandidates = numCandidates;, +    public CandidateSet drawCandidates(CandidateSet set) throws IOException {, +            generator.drawCandidates(set);, +++ b/src/main/java/org/elasticsearch/search/suggest/SuggestUtils.java, +        directSpellChecker.setLowerCaseTerms(false);, +++ b/src/main/java/org/elasticsearch/search/suggest/phrase/CandidateGenerator.java, +    public CandidateSet drawCandidates(BytesRef term) throws IOException {, +        return drawCandidates(set);, +    public abstract CandidateSet drawCandidates(CandidateSet set) throws IOException;, +++ b/src/main/java/org/elasticsearch/search/suggest/phrase/DirectCandidateGenerator.java, +    private final int numCandidates;, +    public DirectCandidateGenerator(DirectSpellChecker spellchecker, String field, SuggestMode suggestMode, IndexReader reader, double nonErrorLikelihood, int numCandidates) throws IOException {, +        this(spellchecker, field, suggestMode, reader,  nonErrorLikelihood, numCandidates, null, null);, +    public DirectCandidateGenerator(DirectSpellChecker spellchecker, String field, SuggestMode suggestMode, IndexReader reader, double nonErrorLikelihood,  int numCandidates, Analyzer preFilter, Analyzer postFilter) throws IOException {, +        this.numCandidates = numCandidates;, +    public CandidateSet drawCandidates(CandidateSet set) throws IOException {, +++ b/src/main/java/org/elasticsearch/search/suggest/phrase/MultiCandidateGeneratorWrapper.java, +    private int numCandidates ;, +    public MultiCandidateGeneratorWrapper(int numCandidates, CandidateGenerator...candidateGenerators) {, +        this.numCandidates = numCandidates;, +    public CandidateSet drawCandidates(CandidateSet set) throws IOException {, +            generator.drawCandidates(set);, +++ b/src/main/java/org/elasticsearch/search/suggest/phrase/NoisyChannelSpellChecker.java, +    public Correction[] getCorrections(TokenStream stream, final CandidateGenerator generator,, +            generator.drawCandidates(candidateSet);, +    public Correction[] getCorrections(Analyzer analyzer, BytesRef query, CandidateGenerator generator,, +        return getCorrections(tokenStream(analyzer, query, new CharsRef(), analysisField), generator, maxErrors, numCorrections, reader, scorer, new BytesRef(" "), confidence, gramSize);, +++ b/src/main/java/org/elasticsearch/search/suggest/SuggestUtils.java, +        directSpellChecker.setLowerCaseTerms(false);, +++ b/src/main/java/org/elasticsearch/search/suggest/phrase/CandidateGenerator.java, +    public CandidateSet drawCandidates(BytesRef term) throws IOException {, +        return drawCandidates(set);, +    public abstract CandidateSet drawCandidates(CandidateSet set) throws IOException;, +++ b/src/main/java/org/elasticsearch/search/suggest/phrase/DirectCandidateGenerator.java, +    private final int numCandidates;, +    public DirectCandidateGenerator(DirectSpellChecker spellchecker, String field, SuggestMode suggestMode, IndexReader reader, double nonErrorLikelihood, int numCandidates) throws IOException {, +        this(spellchecker, field, suggestMode, reader,  nonErrorLikelihood, numCandidates, null, null);, +    public DirectCandidateGenerator(DirectSpellChecker spellchecker, String field, SuggestMode suggestMode, IndexReader reader, double nonErrorLikelihood,  int numCandidates, Analyzer preFilter, Analyzer postFilter) throws IOException {, +        this.numCandidates = numCandidates;, +    public CandidateSet drawCandidates(CandidateSet set) throws IOException {, +++ b/src/main/java/org/elasticsearch/search/suggest/phrase/MultiCandidateGeneratorWrapper.java, +    private int numCandidates ;, +    public MultiCandidateGeneratorWrapper(int numCandidates, CandidateGenerator...candidateGenerators) {, +        this.numCandidates = numCandidates;, +    public CandidateSet drawCandidates(CandidateSet set) throws IOException {, +            generator.drawCandidates(set);, +++ b/src/main/java/org/elasticsearch/search/suggest/phrase/NoisyChannelSpellChecker.java, +    public Correction[] getCorrections(TokenStream stream, final CandidateGenerator generator,, +            generator.drawCandidates(candidateSet);, +    public Correction[] getCorrections(Analyzer analyzer, BytesRef query, CandidateGenerator generator,, +        return getCorrections(tokenStream(analyzer, query, new CharsRef(), analysisField), generator, maxErrors, numCorrections, reader, scorer, new BytesRef(" "), confidence, gramSize);, +++ b/src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggester.java, +            gens[i] = new DirectCandidateGenerator(directSpellChecker, generator.field(), generator.suggestMode(), indexReader, realWordErrorLikelihood, generator.size(), generator.preFilter(), generator.postFilter());, +        Correction[] corrections = checker.getCorrections(stream, new MultiCandidateGeneratorWrapper(suggestion.getShardSize(), gens), suggestion.maxErrors(),, +++ b/src/main/java/org/elasticsearch/search/suggest/SuggestUtils.java, +        directSpellChecker.setLowerCaseTerms(false);, +++ b/src/main/java/org/elasticsearch/search/suggest/phrase/CandidateGenerator.java, +    public CandidateSet drawCandidates(BytesRef term) throws IOException {, +        return drawCandidates(set);, +    public abstract CandidateSet drawCandidates(CandidateSet set) throws IOException;, +++ b/src/main/java/org/elasticsearch/search/suggest/phrase/DirectCandidateGenerator.java, +    private final int numCandidates;, +    public DirectCandidateGenerator(DirectSpellChecker spellchecker, String field, SuggestMode suggestMode, IndexReader reader, double nonErrorLikelihood, int numCandidates) throws IOException {]