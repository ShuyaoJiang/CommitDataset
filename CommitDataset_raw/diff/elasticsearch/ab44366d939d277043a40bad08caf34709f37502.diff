[+++ b/core/src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesRequest.java, +            if (aliasAction.actionType() == AliasAction.Type.ADD) {, +                if (aliasAction.aliases.length != 1) {, +                    validationException = addValidationError("Alias action [" + aliasAction.actionType().name().toLowerCase(Locale.ENGLISH), +                            + "] requires exactly one [alias] to be set", validationException);, +                }, +                if (!Strings.hasText(aliasAction.aliases[0])) {, +                    validationException = addValidationError("Alias action [" + aliasAction.actionType().name().toLowerCase(Locale.ENGLISH), +                            + "] requires an [alias] to be set", validationException);, +                }, +            } else {, +            }, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesRequest.java, +            if (aliasAction.actionType() == AliasAction.Type.ADD) {, +                if (aliasAction.aliases.length != 1) {, +                    validationException = addValidationError("Alias action [" + aliasAction.actionType().name().toLowerCase(Locale.ENGLISH), +                            + "] requires exactly one [alias] to be set", validationException);, +                }, +                if (!Strings.hasText(aliasAction.aliases[0])) {, +                    validationException = addValidationError("Alias action [" + aliasAction.actionType().name().toLowerCase(Locale.ENGLISH), +                            + "] requires an [alias] to be set", validationException);, +                }, +            } else {, +            }, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java, +            return new SourceFieldMapper(enabled, format, includes, excludes, context.indexSettings());, +        this(Defaults.ENABLED, Defaults.FORMAT, null, null, indexSettings);, +    private SourceFieldMapper(boolean enabled, String format,, +            XContentBuilder builder = XContentFactory.contentBuilder(contentType, bStream).map(filteredSource);, +        if (!includeDefaults && enabled == Defaults.ENABLED && includes == null && excludes == null) {, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesRequest.java, +            if (aliasAction.actionType() == AliasAction.Type.ADD) {, +                if (aliasAction.aliases.length != 1) {, +                    validationException = addValidationError("Alias action [" + aliasAction.actionType().name().toLowerCase(Locale.ENGLISH), +                            + "] requires exactly one [alias] to be set", validationException);, +                }, +                if (!Strings.hasText(aliasAction.aliases[0])) {, +                    validationException = addValidationError("Alias action [" + aliasAction.actionType().name().toLowerCase(Locale.ENGLISH), +                            + "] requires an [alias] to be set", validationException);, +                }, +            } else {, +            }, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java, +            return new SourceFieldMapper(enabled, format, includes, excludes, context.indexSettings());, +        this(Defaults.ENABLED, Defaults.FORMAT, null, null, indexSettings);, +    private SourceFieldMapper(boolean enabled, String format,, +            XContentBuilder builder = XContentFactory.contentBuilder(contentType, bStream).map(filteredSource);, +        if (!includeDefaults && enabled == Defaults.ENABLED && includes == null && excludes == null) {, +++ b/core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/RestIndicesAliasesAction.java, +import static org.elasticsearch.cluster.metadata.AliasAction.newAddAliasAction;, +                            String index = null;, +                            String alias = null;, +                                        index = parser.text();, +                                        alias = parser.text();, +                                AliasAction aliasAction = newAddAliasAction(index, alias).filter(filter);, +                                    aliasAction.routing(routing);, +                                    aliasAction.indexRouting(indexRouting);, +                                    aliasAction.searchRouting(searchRouting);, +                                indicesAliasesRequest.addAliasAction(aliasAction);, +                                indicesAliasesRequest.removeAlias(index, alias);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesRequest.java, +            if (aliasAction.actionType() == AliasAction.Type.ADD) {, +                if (aliasAction.aliases.length != 1) {, +                    validationException = addValidationError("Alias action [" + aliasAction.actionType().name().toLowerCase(Locale.ENGLISH), +                            + "] requires exactly one [alias] to be set", validationException);, +                }, +                if (!Strings.hasText(aliasAction.aliases[0])) {, +                    validationException = addValidationError("Alias action [" + aliasAction.actionType().name().toLowerCase(Locale.ENGLISH), +                            + "] requires an [alias] to be set", validationException);, +                }, +            } else {, +            }, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java, +            return new SourceFieldMapper(enabled, format, includes, excludes, context.indexSettings());, +        this(Defaults.ENABLED, Defaults.FORMAT, null, null, indexSettings);, +    private SourceFieldMapper(boolean enabled, String format,, +            XContentBuilder builder = XContentFactory.contentBuilder(contentType, bStream).map(filteredSource);, +        if (!includeDefaults && enabled == Defaults.ENABLED && includes == null && excludes == null) {, +++ b/core/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/RestIndicesAliasesAction.java, +import static org.elasticsearch.cluster.metadata.AliasAction.newAddAliasAction;, +                            String index = null;, +                            String alias = null;, +                                        index = parser.text();, +                                        alias = parser.text();, +                                AliasAction aliasAction = newAddAliasAction(index, alias).filter(filter);, +                                    aliasAction.routing(routing);, +                                    aliasAction.indexRouting(indexRouting);, +                                    aliasAction.searchRouting(searchRouting);, +                                indicesAliasesRequest.addAliasAction(aliasAction);, +                                indicesAliasesRequest.removeAlias(index, alias);, +++ b/core/src/test/java/org/elasticsearch/aliases/IndexAliasesIT.java, +            assertThat(e.getMessage(), containsString("requires an [alias] to be set"));, +            assertThat(e.getMessage(), containsString("requires an [alias] to be set"));, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/alias/IndicesAliasesRequest.java, +            if (aliasAction.actionType() == AliasAction.Type.ADD) {, +                if (aliasAction.aliases.length != 1) {, +                    validationException = addValidationError("Alias action [" + aliasAction.actionType().name().toLowerCase(Locale.ENGLISH), +                            + "] requires exactly one [alias] to be set", validationException);, +                }, +                if (!Strings.hasText(aliasAction.aliases[0])) {]