[+++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/Ccr.java, +                        ShardFollowTask::readFrom),, +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/Ccr.java, +                        ShardFollowTask::readFrom),, +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/action/AutoFollowCoordinator.java, +            request.getParameters().setReadPollTimeout(pattern.getReadPollTimeout());, +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/Ccr.java, +                        ShardFollowTask::readFrom),, +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/action/AutoFollowCoordinator.java, +            request.getParameters().setReadPollTimeout(pattern.getReadPollTimeout());, +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/action/ShardFollowTask.java, +import org.elasticsearch.xpack.core.ccr.action.ImmutableFollowParameters;, +public class ShardFollowTask extends ImmutableFollowParameters implements XPackPlugin.XPackPersistentTaskParams {, +                (Integer) a[7], (Integer) a[8], (Integer) a[9], (Integer) a[10], (ByteSizeValue) a[11], (ByteSizeValue) a[12],, +                (Integer) a[13], (ByteSizeValue) a[14], (TimeValue) a[15], (TimeValue) a[16], (Map<String, String>) a[17]));, +        ImmutableFollowParameters.initParser(PARSER);, +            final int maxOutstandingReadRequests,, +            final ByteSizeValue maxReadRequestSize,, +            final ByteSizeValue maxWriteRequestSize,, +        super(maxReadRequestOperationCount, maxWriteRequestOperationCount, maxOutstandingReadRequests, maxOutstandingWriteRequests,, +            maxReadRequestSize, maxWriteRequestSize, maxWriteBufferCount, maxWriteBufferSize, maxRetryDelay, readPollTimeout);, +    public static ShardFollowTask readFrom(StreamInput in) throws IOException {, +        return new ShardFollowTask(in.readString(), ShardId.readShardId(in), ShardId.readShardId(in), in);, +    }, +, +    private ShardFollowTask(String remoteCluster, ShardId followShardId, ShardId leaderShardId, StreamInput in) throws IOException {, +        super(in);, +        this.remoteCluster = remoteCluster;, +        this.followShardId = followShardId;, +        this.leaderShardId = leaderShardId;, +        super.writeTo(out);, +        toXContentFragment(builder);, +        if (!super.equals(o)) return false;, +                super.hashCode(),, +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/Ccr.java, +                        ShardFollowTask::readFrom),, +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/action/AutoFollowCoordinator.java, +            request.getParameters().setReadPollTimeout(pattern.getReadPollTimeout());, +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/action/ShardFollowTask.java, +import org.elasticsearch.xpack.core.ccr.action.ImmutableFollowParameters;, +public class ShardFollowTask extends ImmutableFollowParameters implements XPackPlugin.XPackPersistentTaskParams {, +                (Integer) a[7], (Integer) a[8], (Integer) a[9], (Integer) a[10], (ByteSizeValue) a[11], (ByteSizeValue) a[12],, +                (Integer) a[13], (ByteSizeValue) a[14], (TimeValue) a[15], (TimeValue) a[16], (Map<String, String>) a[17]));, +        ImmutableFollowParameters.initParser(PARSER);, +            final int maxOutstandingReadRequests,, +            final ByteSizeValue maxReadRequestSize,, +            final ByteSizeValue maxWriteRequestSize,, +        super(maxReadRequestOperationCount, maxWriteRequestOperationCount, maxOutstandingReadRequests, maxOutstandingWriteRequests,, +            maxReadRequestSize, maxWriteRequestSize, maxWriteBufferCount, maxWriteBufferSize, maxRetryDelay, readPollTimeout);, +    public static ShardFollowTask readFrom(StreamInput in) throws IOException {, +        return new ShardFollowTask(in.readString(), ShardId.readShardId(in), ShardId.readShardId(in), in);, +    }, +, +    private ShardFollowTask(String remoteCluster, ShardId followShardId, ShardId leaderShardId, StreamInput in) throws IOException {, +        super(in);, +        this.remoteCluster = remoteCluster;, +        this.followShardId = followShardId;, +        this.leaderShardId = leaderShardId;, +        super.writeTo(out);, +        toXContentFragment(builder);, +        if (!super.equals(o)) return false;, +                super.hashCode(),, +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/action/TransportPutAutoFollowPatternAction.java, +            request.getParameters().getMaxOutstandingReadRequests(),, +            request.getParameters().getMaxReadRequestSize(),, +            request.getParameters().getMaxWriteRequestSize(),, +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/Ccr.java, +                        ShardFollowTask::readFrom),, +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/action/AutoFollowCoordinator.java, +            request.getParameters().setReadPollTimeout(pattern.getReadPollTimeout());, +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/action/ShardFollowTask.java, +import org.elasticsearch.xpack.core.ccr.action.ImmutableFollowParameters;, +public class ShardFollowTask extends ImmutableFollowParameters implements XPackPlugin.XPackPersistentTaskParams {, +                (Integer) a[7], (Integer) a[8], (Integer) a[9], (Integer) a[10], (ByteSizeValue) a[11], (ByteSizeValue) a[12],, +                (Integer) a[13], (ByteSizeValue) a[14], (TimeValue) a[15], (TimeValue) a[16], (Map<String, String>) a[17]));, +        ImmutableFollowParameters.initParser(PARSER);, +            final int maxOutstandingReadRequests,, +            final ByteSizeValue maxReadRequestSize,, +            final ByteSizeValue maxWriteRequestSize,, +        super(maxReadRequestOperationCount, maxWriteRequestOperationCount, maxOutstandingReadRequests, maxOutstandingWriteRequests,, +            maxReadRequestSize, maxWriteRequestSize, maxWriteBufferCount, maxWriteBufferSize, maxRetryDelay, readPollTimeout);, +    public static ShardFollowTask readFrom(StreamInput in) throws IOException {, +        return new ShardFollowTask(in.readString(), ShardId.readShardId(in), ShardId.readShardId(in), in);, +    }, +, +    private ShardFollowTask(String remoteCluster, ShardId followShardId, ShardId leaderShardId, StreamInput in) throws IOException {, +        super(in);, +        this.remoteCluster = remoteCluster;, +        this.followShardId = followShardId;, +        this.leaderShardId = leaderShardId;, +        super.writeTo(out);, +        toXContentFragment(builder);, +        if (!super.equals(o)) return false;, +                super.hashCode(),, +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/action/TransportPutAutoFollowPatternAction.java, +            request.getParameters().getMaxOutstandingReadRequests(),, +            request.getParameters().getMaxReadRequestSize(),, +            request.getParameters().getMaxWriteRequestSize(),, +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/action/TransportResumeFollowAction.java, +            maxOutstandingReadRequests,]