[+++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/ingest/ProcessorsModule.java, +import org.elasticsearch.env.Environment;, +, +import java.util.function.BiFunction;, +    public void addProcessor(String type, BiFunction<Environment, TemplateService, Processor.Factory<?>> processorFactoryProvider) {, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/ingest/ProcessorsModule.java, +import org.elasticsearch.env.Environment;, +, +import java.util.function.BiFunction;, +    public void addProcessor(String type, BiFunction<Environment, TemplateService, Processor.Factory<?>> processorFactoryProvider) {, +++ b/core/src/main/java/org/elasticsearch/ingest/ProcessorsRegistry.java, +import org.elasticsearch.env.Environment;, +, +import java.util.function.BiFunction;, +    private final Map<String, BiFunction<Environment, TemplateService, Processor.Factory<?>>> processorFactoryProviders = new HashMap<>();, +    public void addProcessor(String name, BiFunction<Environment, TemplateService, Processor.Factory<?>> processorFactoryProvider) {, +        BiFunction<Environment, TemplateService, Processor.Factory<?>> provider = processorFactoryProviders.putIfAbsent(name, processorFactoryProvider);, +    public Set<Map.Entry<String, BiFunction<Environment, TemplateService, Processor.Factory<?>>>> entrySet() {, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/ingest/ProcessorsModule.java, +import org.elasticsearch.env.Environment;, +, +import java.util.function.BiFunction;, +    public void addProcessor(String type, BiFunction<Environment, TemplateService, Processor.Factory<?>> processorFactoryProvider) {, +++ b/core/src/main/java/org/elasticsearch/ingest/ProcessorsRegistry.java, +import org.elasticsearch.env.Environment;, +, +import java.util.function.BiFunction;, +    private final Map<String, BiFunction<Environment, TemplateService, Processor.Factory<?>>> processorFactoryProviders = new HashMap<>();, +    public void addProcessor(String name, BiFunction<Environment, TemplateService, Processor.Factory<?>> processorFactoryProvider) {, +        BiFunction<Environment, TemplateService, Processor.Factory<?>> provider = processorFactoryProviders.putIfAbsent(name, processorFactoryProvider);, +    public Set<Map.Entry<String, BiFunction<Environment, TemplateService, Processor.Factory<?>>>> entrySet() {, +++ b/core/src/test/java/org/elasticsearch/ingest/ProcessorsRegistryTests.java, +import org.elasticsearch.env.Environment;, +import java.util.function.BiFunction;, +        Set<Map.Entry<String, BiFunction<Environment, TemplateService, Processor.Factory<?>>>> entrySet = processorsRegistry.entrySet();, +        for (Map.Entry<String, BiFunction<Environment, TemplateService, Processor.Factory<?>>> entry : entrySet) {, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/ingest/ProcessorsModule.java, +import org.elasticsearch.env.Environment;, +, +import java.util.function.BiFunction;, +    public void addProcessor(String type, BiFunction<Environment, TemplateService, Processor.Factory<?>> processorFactoryProvider) {, +++ b/core/src/main/java/org/elasticsearch/ingest/ProcessorsRegistry.java, +import org.elasticsearch.env.Environment;, +, +import java.util.function.BiFunction;, +    private final Map<String, BiFunction<Environment, TemplateService, Processor.Factory<?>>> processorFactoryProviders = new HashMap<>();, +    public void addProcessor(String name, BiFunction<Environment, TemplateService, Processor.Factory<?>> processorFactoryProvider) {, +        BiFunction<Environment, TemplateService, Processor.Factory<?>> provider = processorFactoryProviders.putIfAbsent(name, processorFactoryProvider);, +    public Set<Map.Entry<String, BiFunction<Environment, TemplateService, Processor.Factory<?>>>> entrySet() {, +++ b/core/src/test/java/org/elasticsearch/ingest/ProcessorsRegistryTests.java, +import org.elasticsearch.env.Environment;, +import java.util.function.BiFunction;, +        Set<Map.Entry<String, BiFunction<Environment, TemplateService, Processor.Factory<?>>>> entrySet = processorsRegistry.entrySet();, +        for (Map.Entry<String, BiFunction<Environment, TemplateService, Processor.Factory<?>>> entry : entrySet) {, +++ b/plugins/ingest/src/main/java/org/elasticsearch/plugin/ingest/IngestBootstrapper.java, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/ingest/ProcessorsModule.java, +import org.elasticsearch.env.Environment;, +, +import java.util.function.BiFunction;, +    public void addProcessor(String type, BiFunction<Environment, TemplateService, Processor.Factory<?>> processorFactoryProvider) {, +++ b/core/src/main/java/org/elasticsearch/ingest/ProcessorsRegistry.java, +import org.elasticsearch.env.Environment;, +, +import java.util.function.BiFunction;, +    private final Map<String, BiFunction<Environment, TemplateService, Processor.Factory<?>>> processorFactoryProviders = new HashMap<>();, +    public void addProcessor(String name, BiFunction<Environment, TemplateService, Processor.Factory<?>> processorFactoryProvider) {, +        BiFunction<Environment, TemplateService, Processor.Factory<?>> provider = processorFactoryProviders.putIfAbsent(name, processorFactoryProvider);, +    public Set<Map.Entry<String, BiFunction<Environment, TemplateService, Processor.Factory<?>>>> entrySet() {, +++ b/core/src/test/java/org/elasticsearch/ingest/ProcessorsRegistryTests.java, +import org.elasticsearch.env.Environment;, +import java.util.function.BiFunction;, +        Set<Map.Entry<String, BiFunction<Environment, TemplateService, Processor.Factory<?>>>> entrySet = processorsRegistry.entrySet();, +        for (Map.Entry<String, BiFunction<Environment, TemplateService, Processor.Factory<?>>> entry : entrySet) {, +++ b/plugins/ingest/src/main/java/org/elasticsearch/plugin/ingest/IngestBootstrapper.java, +++ b/plugins/ingest/src/main/java/org/elasticsearch/plugin/ingest/PipelineStore.java, +import org.elasticsearch.ingest.Processor;, +import java.util.function.BiFunction;, +        for (Map.Entry<String, BiFunction<Environment, TemplateService, Processor.Factory<?>>> entry : processorsRegistry.entrySet()) {]