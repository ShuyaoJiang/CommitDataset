[+++ b/src/test/java/org/elasticsearch/bwcompat/BasicBackwardsCompatibilityTest.java, +import org.elasticsearch.action.search.SearchResponse;, +import org.elasticsearch.search.SearchHit;, +import org.elasticsearch.search.sort.SortOrder;, +            docs[i] = client().prepareIndex("test", "type1", randomRealisticUnicodeOfLength(10) + String.valueOf(i)).setSource("field1", English.intToEnglish(i), "num_int", randomInt(), "num_double", randomDouble());, +            assertSimpleSort("num_double", "num_int");, +, +    public void assertSimpleSort(String... numericFields) {, +        for(String field : numericFields) {, +            SearchResponse searchResponse = client().prepareSearch().addSort(field, SortOrder.ASC).get();, +            SearchHit[] hits = searchResponse.getHits().getHits();, +            assertThat(hits.length, greaterThan(0));, +            Number previous = null;, +            for (SearchHit hit : hits) {, +                assertNotNull(hit.getSource().get(field));, +                if (previous != null) {, +                    assertThat(previous.doubleValue(), lessThanOrEqualTo(((Number) hit.getSource().get(field)).doubleValue()));, +                }, +                previous = (Number) hit.getSource().get(field);, +            }, +        }, +    }, +, +            docs[i] = client().prepareIndex("test", "type1", String.valueOf(i)).setSource("field1", English.intToEnglish(i), "num_int", randomInt(), "num_double", randomDouble());, +                docs[i] = client().prepareIndex("test", "type1", String.valueOf(i)).setSource("field1", English.intToEnglish(i), "num_int", randomInt(), "num_double", randomDouble());, +            assertSimpleSort("num_double", "num_int");, +            docs[i] = client().prepareIndex(indexForDoc[i] = RandomPicks.randomFrom(getRandom(), indices), "type1", String.valueOf(i)).setSource("field1", English.intToEnglish(i), "num_int", randomInt(), "num_double", randomDouble());, +            assertSimpleSort("num_double", "num_int");, +                docs[i] = client().prepareIndex(indexForDoc[i], "type1", String.valueOf(i)).setSource("field1", English.intToEnglish(i), "num_int", randomInt(), "num_double", randomDouble());, +        assertSimpleSort("num_double", "num_int");, +]