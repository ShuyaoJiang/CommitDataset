[+++ b/build.gradle, +apply plugin: 'nebula.info-scm', +String licenseCommit, +if (VersionProperties.elasticsearch.toString().endsWith('-SNAPSHOT')) {, +  licenseCommit = scminfo.change ?: "master" // leniency for non git builds, +} else {, +  licenseCommit = "v${version}", +}, +String elasticLicenseUrl = "https://raw.githubusercontent.com/elastic/elasticsearch/${licenseCommit}/licenses/ELASTIC-LICENSE.txt", +, +  // Default to the apache license, +, +  // But stick the Elastic license url in project.ext so we can get it if we need to switch to it, +  project.ext.elasticLicenseUrl = elasticLicenseUrl, +, +++ b/build.gradle, +apply plugin: 'nebula.info-scm', +String licenseCommit, +if (VersionProperties.elasticsearch.toString().endsWith('-SNAPSHOT')) {, +  licenseCommit = scminfo.change ?: "master" // leniency for non git builds, +} else {, +  licenseCommit = "v${version}", +}, +String elasticLicenseUrl = "https://raw.githubusercontent.com/elastic/elasticsearch/${licenseCommit}/licenses/ELASTIC-LICENSE.txt", +, +  // Default to the apache license, +, +  // But stick the Elastic license url in project.ext so we can get it if we need to switch to it, +  project.ext.elasticLicenseUrl = elasticLicenseUrl, +, +++ b/distribution/archives/build.gradle, +    project.ext.licenseName = 'Elastic License', +    project.ext.licenseUrl = ext.elasticLicenseUrl, +++ b/build.gradle, +apply plugin: 'nebula.info-scm', +String licenseCommit, +if (VersionProperties.elasticsearch.toString().endsWith('-SNAPSHOT')) {, +  licenseCommit = scminfo.change ?: "master" // leniency for non git builds, +} else {, +  licenseCommit = "v${version}", +}, +String elasticLicenseUrl = "https://raw.githubusercontent.com/elastic/elasticsearch/${licenseCommit}/licenses/ELASTIC-LICENSE.txt", +, +  // Default to the apache license, +, +  // But stick the Elastic license url in project.ext so we can get it if we need to switch to it, +  project.ext.elasticLicenseUrl = elasticLicenseUrl, +, +++ b/distribution/archives/build.gradle, +    project.ext.licenseName = 'Elastic License', +    project.ext.licenseUrl = ext.elasticLicenseUrl, +++ b/x-pack/build.gradle, +  ext.licenseUrl = ext.elasticLicenseUrl]