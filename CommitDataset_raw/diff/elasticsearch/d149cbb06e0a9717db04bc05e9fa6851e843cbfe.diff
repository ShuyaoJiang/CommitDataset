[+++ b/src/main/java/org/elasticsearch/action/admin/indices/validate/query/ValidateQueryRequest.java, +        BytesStream bos = queryBuilder.buildAsBytes();, +        this.querySourceUnsafe = false;, +++ b/src/main/java/org/elasticsearch/action/admin/indices/validate/query/ValidateQueryRequest.java, +        BytesStream bos = queryBuilder.buildAsBytes();, +        this.querySourceUnsafe = false;, +++ b/src/main/java/org/elasticsearch/action/count/CountRequest.java, +        BytesStream bos = queryBuilder.buildAsBytes();, +        this.querySourceUnsafe = false;, +++ b/src/main/java/org/elasticsearch/action/admin/indices/validate/query/ValidateQueryRequest.java, +        BytesStream bos = queryBuilder.buildAsBytes();, +        this.querySourceUnsafe = false;, +++ b/src/main/java/org/elasticsearch/action/count/CountRequest.java, +        BytesStream bos = queryBuilder.buildAsBytes();, +        this.querySourceUnsafe = false;, +++ b/src/main/java/org/elasticsearch/action/deletebyquery/DeleteByQueryRequest.java, +        BytesStream bos = queryBuilder.buildAsBytes();, +        this.querySourceUnsafe = false;, +++ b/src/main/java/org/elasticsearch/action/admin/indices/validate/query/ValidateQueryRequest.java, +        BytesStream bos = queryBuilder.buildAsBytes();, +        this.querySourceUnsafe = false;, +++ b/src/main/java/org/elasticsearch/action/count/CountRequest.java, +        BytesStream bos = queryBuilder.buildAsBytes();, +        this.querySourceUnsafe = false;, +++ b/src/main/java/org/elasticsearch/action/deletebyquery/DeleteByQueryRequest.java, +        BytesStream bos = queryBuilder.buildAsBytes();, +        this.querySourceUnsafe = false;, +++ b/src/main/java/org/elasticsearch/index/query/BaseQueryBuilder.java, +    public BytesStream buildAsBytes() throws QueryBuilderException {, +    public BytesStream buildAsBytes(XContentType contentType) throws QueryBuilderException {, +            return builder.underlyingStream();, +++ b/src/main/java/org/elasticsearch/action/admin/indices/validate/query/ValidateQueryRequest.java, +        BytesStream bos = queryBuilder.buildAsBytes();, +        this.querySourceUnsafe = false;, +++ b/src/main/java/org/elasticsearch/action/count/CountRequest.java, +        BytesStream bos = queryBuilder.buildAsBytes();, +        this.querySourceUnsafe = false;, +++ b/src/main/java/org/elasticsearch/action/deletebyquery/DeleteByQueryRequest.java, +        BytesStream bos = queryBuilder.buildAsBytes();, +        this.querySourceUnsafe = false;, +++ b/src/main/java/org/elasticsearch/index/query/BaseQueryBuilder.java, +    public BytesStream buildAsBytes() throws QueryBuilderException {, +    public BytesStream buildAsBytes(XContentType contentType) throws QueryBuilderException {, +            return builder.underlyingStream();, +++ b/src/main/java/org/elasticsearch/index/query/IndexQueryParserService.java, +            BytesStream bytes = queryBuilder.buildAsBytes();, +            parser = XContentFactory.xContent(bytes.underlyingBytes(), 0, bytes.size()).createParser(bytes.underlyingBytes(), 0, bytes.size());, +++ b/src/main/java/org/elasticsearch/action/admin/indices/validate/query/ValidateQueryRequest.java, +        BytesStream bos = queryBuilder.buildAsBytes();, +        this.querySourceUnsafe = false;, +++ b/src/main/java/org/elasticsearch/action/count/CountRequest.java, +        BytesStream bos = queryBuilder.buildAsBytes();, +        this.querySourceUnsafe = false;, +++ b/src/main/java/org/elasticsearch/action/deletebyquery/DeleteByQueryRequest.java, +        BytesStream bos = queryBuilder.buildAsBytes();, +        this.querySourceUnsafe = false;, +++ b/src/main/java/org/elasticsearch/index/query/BaseQueryBuilder.java, +    public BytesStream buildAsBytes() throws QueryBuilderException {, +    public BytesStream buildAsBytes(XContentType contentType) throws QueryBuilderException {, +            return builder.underlyingStream();, +++ b/src/main/java/org/elasticsearch/index/query/IndexQueryParserService.java, +            BytesStream bytes = queryBuilder.buildAsBytes();, +            parser = XContentFactory.xContent(bytes.underlyingBytes(), 0, bytes.size()).createParser(bytes.underlyingBytes(), 0, bytes.size());, +++ b/src/main/java/org/elasticsearch/index/query/QueryBuilder.java, +    BytesStream buildAsBytes() throws QueryBuilderException;, +    BytesStream buildAsBytes(XContentType contentType) throws QueryBuilderException;, +++ b/src/main/java/org/elasticsearch/action/admin/indices/validate/query/ValidateQueryRequest.java, +        BytesStream bos = queryBuilder.buildAsBytes();, +        this.querySourceUnsafe = false;, +++ b/src/main/java/org/elasticsearch/action/count/CountRequest.java, +        BytesStream bos = queryBuilder.buildAsBytes();, +        this.querySourceUnsafe = false;, +++ b/src/main/java/org/elasticsearch/action/deletebyquery/DeleteByQueryRequest.java, +        BytesStream bos = queryBuilder.buildAsBytes();, +        this.querySourceUnsafe = false;, +++ b/src/main/java/org/elasticsearch/index/query/BaseQueryBuilder.java, +    public BytesStream buildAsBytes() throws QueryBuilderException {, +    public BytesStream buildAsBytes(XContentType contentType) throws QueryBuilderException {, +            return builder.underlyingStream();, +++ b/src/main/java/org/elasticsearch/index/query/IndexQueryParserService.java, +            BytesStream bytes = queryBuilder.buildAsBytes();, +            parser = XContentFactory.xContent(bytes.underlyingBytes(), 0, bytes.size()).createParser(bytes.underlyingBytes(), 0, bytes.size());, +++ b/src/main/java/org/elasticsearch/index/query/QueryBuilder.java, +    BytesStream buildAsBytes() throws QueryBuilderException;, +    BytesStream buildAsBytes(XContentType contentType) throws QueryBuilderException;, +++ b/src/main/java/org/elasticsearch/rest/action/admin/indices/validate/query/RestValidateQueryAction.java, +import org.elasticsearch.action.support.broadcast.BroadcastOperationThreading;, +import org.elasticsearch.common.io.BytesStream;, +                    BytesStream querySource = RestActions.parseQuerySource(request);, +                        validateQueryRequest.query(querySource.underlyingBytes(), 0, querySource.size(), false);, +++ b/src/main/java/org/elasticsearch/action/admin/indices/validate/query/ValidateQueryRequest.java, +        BytesStream bos = queryBuilder.buildAsBytes();, +        this.querySourceUnsafe = false;, +++ b/src/main/java/org/elasticsearch/action/count/CountRequest.java, +        BytesStream bos = queryBuilder.buildAsBytes();, +        this.querySourceUnsafe = false;, +++ b/src/main/java/org/elasticsearch/action/deletebyquery/DeleteByQueryRequest.java, +        BytesStream bos = queryBuilder.buildAsBytes();, +        this.querySourceUnsafe = false;, +++ b/src/main/java/org/elasticsearch/index/query/BaseQueryBuilder.java]