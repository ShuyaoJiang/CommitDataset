[+++ b/server/src/main/java/org/elasticsearch/index/mapper/CompletionFieldMapper.java, +, +        // ignore null values, +            return null;, +++ b/server/src/main/java/org/elasticsearch/index/mapper/CompletionFieldMapper.java, +, +        // ignore null values, +            return null;, +++ b/server/src/test/java/org/elasticsearch/index/mapper/CompletionFieldMapperTests.java, +, +        // null inputs are ignored, +        ParsedDocument nullDoc = defaultMapper.parse(SourceToParse.source("test", "type1", "1", BytesReference, +                .bytes(XContentFactory.jsonBuilder(), +                    .startObject(), +                    .nullField("completion"), +                    .endObject()),, +            XContentType.JSON));, +        assertThat(nullDoc.docs().size(), equalTo(1));, +        assertNull(nullDoc.docs().get(0).get("completion"));, +        assertNull(nullDoc.docs().get(0).getField("_ignored"));, +++ b/server/src/main/java/org/elasticsearch/index/mapper/CompletionFieldMapper.java, +, +        // ignore null values, +            return null;, +++ b/server/src/test/java/org/elasticsearch/index/mapper/CompletionFieldMapperTests.java, +, +        // null inputs are ignored, +        ParsedDocument nullDoc = defaultMapper.parse(SourceToParse.source("test", "type1", "1", BytesReference, +                .bytes(XContentFactory.jsonBuilder(), +                    .startObject(), +                    .nullField("completion"), +                    .endObject()),, +            XContentType.JSON));, +        assertThat(nullDoc.docs().size(), equalTo(1));, +        assertNull(nullDoc.docs().get(0).get("completion"));, +        assertNull(nullDoc.docs().get(0).getField("_ignored"));, +++ b/server/src/test/java/org/elasticsearch/search/suggest/CompletionSuggestSearchIT.java]