[+++ b/plugins/river/couchdb/src/main/java/org/elasticsearch/river/couchdb/CouchdbRiver.java, +import java.util.concurrent.BlockingQueue;, +import java.util.concurrent.LinkedBlockingQueue;, +    private final int throttleSize;, +    private final BlockingQueue<String> stream;, +            throttleSize = XContentMapValues.nodeIntegerValue(indexSettings.get("throttle_size"), bulkSize * 5);, +            throttleSize = bulkSize * 5;, +        }, +        if (throttleSize == -1) {, +            stream = new LinkedTransferQueue<String>();, +        } else {, +            stream = new LinkedBlockingQueue<String>(throttleSize);, +                        // we put here, so we block if there is no space to add, +                        stream.put(line);]