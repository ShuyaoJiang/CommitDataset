[+++ b/src/main/java/org/elasticsearch/action/explain/ExplainRequest.java, +    public ExplainRequest source(BytesReference source, boolean unsafe) {, +        this.source = source;, +++ b/src/main/java/org/elasticsearch/action/explain/ExplainRequest.java, +    public ExplainRequest source(BytesReference source, boolean unsafe) {, +        this.source = source;, +++ b/src/main/java/org/elasticsearch/action/explain/ExplainRequestBuilder.java, +    public ExplainRequestBuilder setQuery(QueryBuilder query) {, +        sourceBuilder().query(query);, +    /**, +     * Sets the query to get a score explanation for., +     */, +    public ExplainRequestBuilder setQuery(BytesReference query) {, +        sourceBuilder().query(query);, +        return this;, +    }, +, +    /**, +     * Sets the full source of the explain request (for example, wrapping an actual query)., +     */, +    public ExplainRequestBuilder setSource(BytesReference source, boolean unsafe) {, +        request().source(source, unsafe);, +++ b/src/main/java/org/elasticsearch/action/explain/ExplainRequest.java, +    public ExplainRequest source(BytesReference source, boolean unsafe) {, +        this.source = source;, +++ b/src/main/java/org/elasticsearch/action/explain/ExplainRequestBuilder.java, +    public ExplainRequestBuilder setQuery(QueryBuilder query) {, +        sourceBuilder().query(query);, +    /**, +     * Sets the query to get a score explanation for., +     */, +    public ExplainRequestBuilder setQuery(BytesReference query) {, +        sourceBuilder().query(query);, +        return this;, +    }, +, +    /**, +     * Sets the full source of the explain request (for example, wrapping an actual query)., +     */, +    public ExplainRequestBuilder setSource(BytesReference source, boolean unsafe) {, +        request().source(source, unsafe);, +++ b/src/main/java/org/elasticsearch/action/explain/TransportExplainAction.java, +import org.apache.lucene.search.Explanation;, +, +        try {, +            context.parsedQuery(parseQuery(request, indexService));, +    private ParsedQuery parseQuery(ExplainRequest request, IndexService indexService) {]