[+++ b/core/src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java, +            try {, +            } catch (Exception ex) {, +                logger.debug("failed to notify listeners on shutdown", ex);, +            }, +++ b/core/src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java, +            try {, +            } catch (Exception ex) {, +                logger.debug("failed to notify listeners on shutdown", ex);, +            }, +++ b/core/src/test/java/org/elasticsearch/action/admin/indices/create/CreateIndexIT.java, +import org.elasticsearch.action.UnavailableShardsException;, +import org.elasticsearch.common.unit.TimeValue;, +                    client().prepareIndex("test", "test").setSource("index_version", indexVersion.get()), +                        .setTimeout(TimeValue.timeValueSeconds(10)).get();, +            } catch (UnavailableShardsException ex) {, +                assertEquals(ex.getCause().getClass(), IndexNotFoundException.class);, +                // fine we run into a delete index while retrying, +++ b/core/src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java, +            try {, +            } catch (Exception ex) {, +                logger.debug("failed to notify listeners on shutdown", ex);, +            }, +++ b/core/src/test/java/org/elasticsearch/action/admin/indices/create/CreateIndexIT.java, +import org.elasticsearch.action.UnavailableShardsException;, +import org.elasticsearch.common.unit.TimeValue;, +                    client().prepareIndex("test", "test").setSource("index_version", indexVersion.get()), +                        .setTimeout(TimeValue.timeValueSeconds(10)).get();, +            } catch (UnavailableShardsException ex) {, +                assertEquals(ex.getCause().getClass(), IndexNotFoundException.class);, +                // fine we run into a delete index while retrying, +++ b/plugins/discovery-azure/build.gradle, +  'azure': '0.9.0',, +++ b/core/src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java, +            try {, +            } catch (Exception ex) {, +                logger.debug("failed to notify listeners on shutdown", ex);, +            }, +++ b/core/src/test/java/org/elasticsearch/action/admin/indices/create/CreateIndexIT.java, +import org.elasticsearch.action.UnavailableShardsException;, +import org.elasticsearch.common.unit.TimeValue;, +                    client().prepareIndex("test", "test").setSource("index_version", indexVersion.get()), +                        .setTimeout(TimeValue.timeValueSeconds(10)).get();, +            } catch (UnavailableShardsException ex) {, +                assertEquals(ex.getCause().getClass(), IndexNotFoundException.class);, +                // fine we run into a delete index while retrying, +++ b/plugins/discovery-azure/build.gradle, +  'azure': '0.9.0',, +++ b/plugins/discovery-azure/licenses/azure-core-0.9.0.jar.sha1, +050719f91deceed1be1aaf87e85099a861295fa2, +++ b/core/src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java, +            try {, +            } catch (Exception ex) {, +                logger.debug("failed to notify listeners on shutdown", ex);, +            }, +++ b/core/src/test/java/org/elasticsearch/action/admin/indices/create/CreateIndexIT.java, +import org.elasticsearch.action.UnavailableShardsException;, +import org.elasticsearch.common.unit.TimeValue;, +                    client().prepareIndex("test", "test").setSource("index_version", indexVersion.get()), +                        .setTimeout(TimeValue.timeValueSeconds(10)).get();, +            } catch (UnavailableShardsException ex) {, +                assertEquals(ex.getCause().getClass(), IndexNotFoundException.class);, +                // fine we run into a delete index while retrying, +++ b/plugins/discovery-azure/build.gradle, +  'azure': '0.9.0',, +++ b/plugins/discovery-azure/licenses/azure-core-0.9.0.jar.sha1, +050719f91deceed1be1aaf87e85099a861295fa2, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java, +            try {, +            } catch (Exception ex) {, +                logger.debug("failed to notify listeners on shutdown", ex);, +            }, +++ b/core/src/test/java/org/elasticsearch/action/admin/indices/create/CreateIndexIT.java, +import org.elasticsearch.action.UnavailableShardsException;, +import org.elasticsearch.common.unit.TimeValue;, +                    client().prepareIndex("test", "test").setSource("index_version", indexVersion.get()), +                        .setTimeout(TimeValue.timeValueSeconds(10)).get();, +            } catch (UnavailableShardsException ex) {, +                assertEquals(ex.getCause().getClass(), IndexNotFoundException.class);, +                // fine we run into a delete index while retrying, +++ b/plugins/discovery-azure/build.gradle, +  'azure': '0.9.0',, +++ b/plugins/discovery-azure/licenses/azure-core-0.9.0.jar.sha1, +050719f91deceed1be1aaf87e85099a861295fa2, +++ /dev/null, +++ b/plugins/discovery-azure/licenses/azure-svc-mgmt-compute-0.9.0.jar.sha1, +887ca8ee5564e8ba2351e6b5db2a1293a8d04674, +++ b/core/src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java, +            try {, +            } catch (Exception ex) {, +                logger.debug("failed to notify listeners on shutdown", ex);, +            }, +++ b/core/src/test/java/org/elasticsearch/action/admin/indices/create/CreateIndexIT.java, +import org.elasticsearch.action.UnavailableShardsException;, +import org.elasticsearch.common.unit.TimeValue;, +                    client().prepareIndex("test", "test").setSource("index_version", indexVersion.get()), +                        .setTimeout(TimeValue.timeValueSeconds(10)).get();, +            } catch (UnavailableShardsException ex) {, +                assertEquals(ex.getCause().getClass(), IndexNotFoundException.class);]