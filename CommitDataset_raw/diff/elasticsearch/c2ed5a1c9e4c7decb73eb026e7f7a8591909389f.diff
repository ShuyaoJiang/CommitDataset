[+++ b/core/src/main/java/org/elasticsearch/discovery/zen/publish/PendingClusterStatesQueue.java, +            } else if (pendingState.stateUUID().equals(state.stateUUID())) {, +                assert pendingContext.committed() : "processed cluster state is not committed " + state;, +                contextsToRemove.add(pendingContext);, +                pendingContext.listener.onNewClusterStateProcessed();]