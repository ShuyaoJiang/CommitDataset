[+++ b/src/main/java/org/elasticsearch/common/io/FileSystemUtils.java, +    /**, +     * Deletes the given files recursively. if <tt>deleteRoots</tt> is set to <code>true</code>, +     * the given root files will be deleted as well. Otherwise only their content is deleted., +     */, +    public static boolean deleteRecursively(File[] roots, boolean deleteRoots) {, +            deleted &= deleteRecursively(root, deleteRoots);, +    /**, +     * Deletes the given files recursively including the given roots., +     */, +    public static boolean deleteRecursively(File... roots) {, +       return deleteRecursively(roots, true);, +                        deleteRecursively(aChildren, true);, +++ b/src/main/java/org/elasticsearch/common/io/FileSystemUtils.java, +    /**, +     * Deletes the given files recursively. if <tt>deleteRoots</tt> is set to <code>true</code>, +     * the given root files will be deleted as well. Otherwise only their content is deleted., +     */, +    public static boolean deleteRecursively(File[] roots, boolean deleteRoots) {, +            deleted &= deleteRecursively(root, deleteRoots);, +    /**, +     * Deletes the given files recursively including the given roots., +     */, +    public static boolean deleteRecursively(File... roots) {, +       return deleteRecursively(roots, true);, +                        deleteRecursively(aChildren, true);, +++ b/src/test/java/org/elasticsearch/test/TestCluster.java, +            boolean deleted = false;, +                deleted = FileSystemUtils.deleteRecursively(dataDirToClean.toArray(new File[dataDirToClean.size()]), false);, +                logger.info("Wipe data directory for all nodes locations: {} success: {}", this.dataDirToClean, deleted);]