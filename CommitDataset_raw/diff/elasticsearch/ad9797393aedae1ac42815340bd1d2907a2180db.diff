[+++ b/plugin/src/test/java/org/elasticsearch/xpack/security/SecurityTribeIT.java, +import org.elasticsearch.common.settings.MockSecureSettings;, +import org.elasticsearch.common.settings.SecureSettings;, +        // TODO: rethink how these settings are generated for tribes once we support more than just string settings..., +        MockSecureSettings secureSettingsTemplate =, +            (MockSecureSettings) Settings.builder().put(cluster2SettingsSource.nodeSettings(0)).getSecureSettings();, +        MockSecureSettings secureSettings = new MockSecureSettings();, +        for (String settingName : secureSettingsTemplate.getSettingNames()) {, +            String settingValue = secureSettingsTemplate.getString(settingName).toString();, +            secureSettings.setString(settingName, settingValue);, +            secureSettings.setString("tribe.t1." + settingName, settingValue);, +            secureSettings.setString("tribe.t2." + settingName, settingValue);, +        }, +                .setSecureSettings(secureSettings)]