[+++ b/src/main/java/org/elasticsearch/common/xcontent/XContentBuilder.java, +import java.math.BigDecimal;, +import java.math.RoundingMode;, +    public XContentBuilder field(String name, BigDecimal value) throws IOException {, +        return field(name, value, value.scale(), RoundingMode.HALF_UP, true);, +    }, +, +    public XContentBuilder field(XContentBuilderString name, BigDecimal value) throws IOException {, +        return field(name, value, value.scale(), RoundingMode.HALF_UP, true);, +    }, +, +    public XContentBuilder field(String name, BigDecimal value, int scale, RoundingMode rounding, boolean toDouble) throws IOException {, +        field(name);, +        if (toDouble) {, +            try {, +                generator.writeNumber(value.setScale(scale, rounding).doubleValue());, +            } catch (ArithmeticException e) {, +                generator.writeString(value.toEngineeringString());            , +            }, +        } else {, +            generator.writeString(value.toEngineeringString());, +        }, +        return this;, +    }, +, +    public XContentBuilder field(XContentBuilderString name, BigDecimal value, int scale, RoundingMode rounding, boolean toDouble) throws IOException {, +        field(name);, +        if (toDouble) {, +            try {, +                generator.writeNumber(value.setScale(scale, rounding).doubleValue());, +            } catch (ArithmeticException e) {, +                generator.writeString(value.toEngineeringString());            , +            }, +        } else {, +            generator.writeString(value.toEngineeringString());, +        }, +        return this;, +    }    , +    ]