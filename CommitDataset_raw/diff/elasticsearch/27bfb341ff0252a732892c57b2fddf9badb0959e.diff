[+++ b/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java, +                        if (builder == null) {, +                            logger.warn("failed to find format [" + type.getFormat() + "] for field [" + fieldNames.fullName() + "], will use default");, +                        }, +                    }, +                    String format = indexSettings.get("index.fielddata.type." + type.getType() + ".format", null);, +                    if (format != null) {, +                        builder = buildersByTypeAndFormat.get(Tuple.tuple(type.getType(), type.getFormat()));, +                        if (builder == null) {, +                            logger.warn("failed to find index level type format [" + format + "] for field [" + fieldNames.fullName() + "], will use default");, +                        }]