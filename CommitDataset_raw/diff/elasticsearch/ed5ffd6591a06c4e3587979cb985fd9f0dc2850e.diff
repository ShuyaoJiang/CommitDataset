[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/node/internal/InternalSettingsPerparer.java, +        Settings v1 = settingsBuilder.build();, +        environment = new Environment(v1);, +, +        // put back the env settings, +        settingsBuilder = settingsBuilder().put(v1);, +        settingsBuilder.put("path.home", cleanPath(environment.homeFile().getAbsolutePath()));, +        settingsBuilder.put("path.work", cleanPath(environment.workFile().getAbsolutePath()));, +        settingsBuilder.put("path.work_with_cluster", cleanPath(environment.workWithClusterFile().getAbsolutePath()));, +        settingsBuilder.put("path.logs", cleanPath(environment.logsFile().getAbsolutePath()));, +, +        v1 = settingsBuilder.build();, +, +        return new Tuple<Settings, Environment>(v1, environment);]