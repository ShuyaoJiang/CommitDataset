[+++ b/server/src/main/java/org/apache/lucene/search/grouping/CollapseTopFieldDocs.java, +     * and then if shard index is the same we use the hit index.]