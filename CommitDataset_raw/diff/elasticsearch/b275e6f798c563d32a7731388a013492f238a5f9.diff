[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java, +                String[] concreteIndices = clusterState.metaData().concreteIndices(searchRequest.indices(), false, true);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java, +                String[] concreteIndices = clusterState.metaData().concreteIndices(searchRequest.indices(), false, true);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java, +import org.elasticsearch.action.search.ReduceSearchPhaseException;, +import org.elasticsearch.action.search.SearchOperationThreading;, +import org.elasticsearch.action.search.SearchPhaseExecutionException;, +import org.elasticsearch.action.search.SearchRequest;, +import org.elasticsearch.action.search.SearchResponse;, +import org.elasticsearch.action.search.ShardSearchFailure;, +            String[] concreteIndices = clusterState.metaData().concreteIndices(request.indices(), false, true);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java, +                String[] concreteIndices = clusterState.metaData().concreteIndices(searchRequest.indices(), false, true);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java, +import org.elasticsearch.action.search.ReduceSearchPhaseException;, +import org.elasticsearch.action.search.SearchOperationThreading;, +import org.elasticsearch.action.search.SearchPhaseExecutionException;, +import org.elasticsearch.action.search.SearchRequest;, +import org.elasticsearch.action.search.SearchResponse;, +import org.elasticsearch.action.search.ShardSearchFailure;, +            String[] concreteIndices = clusterState.metaData().concreteIndices(request.indices(), false, true);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastOperationAction.java, +import org.elasticsearch.transport.BaseTransportRequestHandler;, +import org.elasticsearch.transport.BaseTransportResponseHandler;, +import org.elasticsearch.transport.TransportChannel;, +import org.elasticsearch.transport.TransportException;, +import org.elasticsearch.transport.TransportService;, +            concreteIndices = clusterState.metaData().concreteIndices(request.indices(), false, true);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java, +                String[] concreteIndices = clusterState.metaData().concreteIndices(searchRequest.indices(), false, true);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java, +import org.elasticsearch.action.search.ReduceSearchPhaseException;, +import org.elasticsearch.action.search.SearchOperationThreading;, +import org.elasticsearch.action.search.SearchPhaseExecutionException;, +import org.elasticsearch.action.search.SearchRequest;, +import org.elasticsearch.action.search.SearchResponse;, +import org.elasticsearch.action.search.ShardSearchFailure;, +            String[] concreteIndices = clusterState.metaData().concreteIndices(request.indices(), false, true);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastOperationAction.java, +import org.elasticsearch.transport.BaseTransportRequestHandler;, +import org.elasticsearch.transport.BaseTransportResponseHandler;, +import org.elasticsearch.transport.TransportChannel;, +import org.elasticsearch.transport.TransportException;, +import org.elasticsearch.transport.TransportService;, +            concreteIndices = clusterState.metaData().concreteIndices(request.indices(), false, true);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java, +    private final String[] allOpenIndices;, +        List<String> allOpenIndices = Lists.newArrayList();, +        for (IndexMetaData indexMetaData : indices.values()) {, +            if (indexMetaData.state() == IndexMetaData.State.OPEN) {, +                allOpenIndices.add(indexMetaData.index());, +            }, +        }, +        this.allOpenIndices = allOpenIndices.toArray(new String[allOpenIndices.size()]);, +, +    public String[] concreteAllOpenIndices() {, +        return allOpenIndices;, +    }, +, +    public String[] getConcreteAllOpenIndices() {, +        return allOpenIndices;, +    }, +, +        return concreteIndices(indices, false, false);, +        return concreteIndices(indices, true, false);, +    public String[] concreteIndices(String[] indices, boolean ignoreMissing, boolean allOnlyOpen) throws IndexMissingException {, +            return allOnlyOpen ? concreteAllOpenIndices() : concreteAllIndices();, +                return allOnlyOpen ? concreteAllOpenIndices() : concreteAllIndices();, +                return allOnlyOpen ? concreteAllOpenIndices() : concreteAllIndices();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java, +                String[] concreteIndices = clusterState.metaData().concreteIndices(searchRequest.indices(), false, true);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java, +import org.elasticsearch.action.search.ReduceSearchPhaseException;, +import org.elasticsearch.action.search.SearchOperationThreading;, +import org.elasticsearch.action.search.SearchPhaseExecutionException;, +import org.elasticsearch.action.search.SearchRequest;, +import org.elasticsearch.action.search.SearchResponse;, +import org.elasticsearch.action.search.ShardSearchFailure;, +            String[] concreteIndices = clusterState.metaData().concreteIndices(request.indices(), false, true);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastOperationAction.java, +import org.elasticsearch.transport.BaseTransportRequestHandler;, +import org.elasticsearch.transport.BaseTransportResponseHandler;, +import org.elasticsearch.transport.TransportChannel;, +import org.elasticsearch.transport.TransportException;, +import org.elasticsearch.transport.TransportService;, +            concreteIndices = clusterState.metaData().concreteIndices(request.indices(), false, true);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java, +    private final String[] allOpenIndices;, +        List<String> allOpenIndices = Lists.newArrayList();, +        for (IndexMetaData indexMetaData : indices.values()) {, +            if (indexMetaData.state() == IndexMetaData.State.OPEN) {, +                allOpenIndices.add(indexMetaData.index());, +            }, +        }, +        this.allOpenIndices = allOpenIndices.toArray(new String[allOpenIndices.size()]);, +, +    public String[] concreteAllOpenIndices() {, +        return allOpenIndices;, +    }]