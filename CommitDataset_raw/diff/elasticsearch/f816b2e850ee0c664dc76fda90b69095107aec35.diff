[+++ b/plugin/src/test/java/org/elasticsearch/xpack/monitoring/MonitoringFeatureSetTests.java, +import org.elasticsearch.test.rest.yaml.ObjectPath;, +            ObjectPath  source;, +                source = ObjectPath.createFromXContent(builder.contentType().xContent(), builder.bytes());, +            assertThat(source.evaluate("enabled_exporters"), is(notNullValue()));, +                assertThat(source.evaluate("enabled_exporters.local"), is(localCount));, +                assertThat(source.evaluate("enabled_exporters.local"), is(nullValue()));, +                assertThat(source.evaluate("enabled_exporters.http"), is(httpCount));, +                assertThat(source.evaluate("enabled_exporters.http"), is(nullValue()));, +                assertThat(source.evaluate("enabled_exporters." + xType), is(xCount));, +                assertThat(source.evaluate("enabled_exporters." + xType), is(nullValue()));, +++ b/plugin/src/test/java/org/elasticsearch/xpack/monitoring/MonitoringFeatureSetTests.java, +import org.elasticsearch.test.rest.yaml.ObjectPath;, +            ObjectPath  source;, +                source = ObjectPath.createFromXContent(builder.contentType().xContent(), builder.bytes());, +            assertThat(source.evaluate("enabled_exporters"), is(notNullValue()));, +                assertThat(source.evaluate("enabled_exporters.local"), is(localCount));, +                assertThat(source.evaluate("enabled_exporters.local"), is(nullValue()));, +                assertThat(source.evaluate("enabled_exporters.http"), is(httpCount));, +                assertThat(source.evaluate("enabled_exporters.http"), is(nullValue()));, +                assertThat(source.evaluate("enabled_exporters." + xType), is(xCount));, +                assertThat(source.evaluate("enabled_exporters." + xType), is(nullValue()));, +++ b/plugin/src/test/java/org/elasticsearch/xpack/monitoring/cleaner/AbstractIndicesCleanerTestCase.java, +    static Integer INDEX_TEMPLATE_VERSION = null;, +, +        if (INDEX_TEMPLATE_VERSION == null) {, +            INDEX_TEMPLATE_VERSION = randomIntBetween(1, 20);, +        }, +        createWatcherHistoryIndex(creationDate, String.valueOf(INDEX_TEMPLATE_VERSION));, +++ b/plugin/src/test/java/org/elasticsearch/xpack/monitoring/MonitoringFeatureSetTests.java, +import org.elasticsearch.test.rest.yaml.ObjectPath;, +            ObjectPath  source;, +                source = ObjectPath.createFromXContent(builder.contentType().xContent(), builder.bytes());, +            assertThat(source.evaluate("enabled_exporters"), is(notNullValue()));, +                assertThat(source.evaluate("enabled_exporters.local"), is(localCount));, +                assertThat(source.evaluate("enabled_exporters.local"), is(nullValue()));, +                assertThat(source.evaluate("enabled_exporters.http"), is(httpCount));, +                assertThat(source.evaluate("enabled_exporters.http"), is(nullValue()));, +                assertThat(source.evaluate("enabled_exporters." + xType), is(xCount));, +                assertThat(source.evaluate("enabled_exporters." + xType), is(nullValue()));, +++ b/plugin/src/test/java/org/elasticsearch/xpack/monitoring/cleaner/AbstractIndicesCleanerTestCase.java, +    static Integer INDEX_TEMPLATE_VERSION = null;, +, +        if (INDEX_TEMPLATE_VERSION == null) {, +            INDEX_TEMPLATE_VERSION = randomIntBetween(1, 20);, +        }, +        createWatcherHistoryIndex(creationDate, String.valueOf(INDEX_TEMPLATE_VERSION));, +++ b/plugin/src/test/java/org/elasticsearch/xpack/monitoring/exporter/local/LocalExporterIntegTestCase.java, +                       .put("xpack.monitoring.exporters." + exporterName +  "." + CLUSTER_ALERTS_MANAGEMENT_SETTING, false), +                       .put(XPackSettings.WATCHER_ENABLED.getKey(), false), +++ b/plugin/src/test/java/org/elasticsearch/xpack/monitoring/MonitoringFeatureSetTests.java, +import org.elasticsearch.test.rest.yaml.ObjectPath;, +            ObjectPath  source;, +                source = ObjectPath.createFromXContent(builder.contentType().xContent(), builder.bytes());, +            assertThat(source.evaluate("enabled_exporters"), is(notNullValue()));, +                assertThat(source.evaluate("enabled_exporters.local"), is(localCount));, +                assertThat(source.evaluate("enabled_exporters.local"), is(nullValue()));, +                assertThat(source.evaluate("enabled_exporters.http"), is(httpCount));, +                assertThat(source.evaluate("enabled_exporters.http"), is(nullValue()));, +                assertThat(source.evaluate("enabled_exporters." + xType), is(xCount));, +                assertThat(source.evaluate("enabled_exporters." + xType), is(nullValue()));, +++ b/plugin/src/test/java/org/elasticsearch/xpack/monitoring/cleaner/AbstractIndicesCleanerTestCase.java, +    static Integer INDEX_TEMPLATE_VERSION = null;, +, +        if (INDEX_TEMPLATE_VERSION == null) {, +            INDEX_TEMPLATE_VERSION = randomIntBetween(1, 20);, +        }, +        createWatcherHistoryIndex(creationDate, String.valueOf(INDEX_TEMPLATE_VERSION));, +++ b/plugin/src/test/java/org/elasticsearch/xpack/monitoring/exporter/local/LocalExporterIntegTestCase.java, +                       .put("xpack.monitoring.exporters." + exporterName +  "." + CLUSTER_ALERTS_MANAGEMENT_SETTING, false), +                       .put(XPackSettings.WATCHER_ENABLED.getKey(), false), +++ b/plugin/src/test/java/org/elasticsearch/xpack/monitoring/exporter/local/LocalExporterIntegTests.java, +++ b/plugin/src/test/java/org/elasticsearch/xpack/monitoring/MonitoringFeatureSetTests.java, +import org.elasticsearch.test.rest.yaml.ObjectPath;, +            ObjectPath  source;, +                source = ObjectPath.createFromXContent(builder.contentType().xContent(), builder.bytes());, +            assertThat(source.evaluate("enabled_exporters"), is(notNullValue()));, +                assertThat(source.evaluate("enabled_exporters.local"), is(localCount));, +                assertThat(source.evaluate("enabled_exporters.local"), is(nullValue()));, +                assertThat(source.evaluate("enabled_exporters.http"), is(httpCount));, +                assertThat(source.evaluate("enabled_exporters.http"), is(nullValue()));, +                assertThat(source.evaluate("enabled_exporters." + xType), is(xCount));, +                assertThat(source.evaluate("enabled_exporters." + xType), is(nullValue()));, +++ b/plugin/src/test/java/org/elasticsearch/xpack/monitoring/cleaner/AbstractIndicesCleanerTestCase.java, +    static Integer INDEX_TEMPLATE_VERSION = null;, +, +        if (INDEX_TEMPLATE_VERSION == null) {, +            INDEX_TEMPLATE_VERSION = randomIntBetween(1, 20);, +        }, +        createWatcherHistoryIndex(creationDate, String.valueOf(INDEX_TEMPLATE_VERSION));, +++ b/plugin/src/test/java/org/elasticsearch/xpack/monitoring/exporter/local/LocalExporterIntegTestCase.java, +                       .put("xpack.monitoring.exporters." + exporterName +  "." + CLUSTER_ALERTS_MANAGEMENT_SETTING, false), +                       .put(XPackSettings.WATCHER_ENABLED.getKey(), false), +++ b/plugin/src/test/java/org/elasticsearch/xpack/monitoring/exporter/local/LocalExporterIntegTests.java, +++ b/plugin/src/test/java/org/elasticsearch/xpack/monitoring/exporter/local/LocalExporterResourceIntegTests.java, +++ b/plugin/src/test/java/org/elasticsearch/xpack/monitoring/MonitoringFeatureSetTests.java, +import org.elasticsearch.test.rest.yaml.ObjectPath;, +            ObjectPath  source;, +                source = ObjectPath.createFromXContent(builder.contentType().xContent(), builder.bytes());, +            assertThat(source.evaluate("enabled_exporters"), is(notNullValue()));]