[+++ b/src/main/java/org/elasticsearch/index/engine/internal/InternalEngine.java, +    private void waitForMerges(boolean flushAfter, boolean upgrade) {, +        if (upgrade) {, +            logger.info("Finished upgrade of " + shardId);, +        }, +    public void forceMerge(final boolean flush, boolean waitForMerge, int maxNumSegments, boolean onlyExpungeDeletes, final boolean upgrade) throws EngineException {, +                    logger.info("Starting upgrade of " + shardId);, +            waitForMerges(flush, upgrade);, +        } else if (flush || upgrade) {, +                    waitForMerges(flush, upgrade);]