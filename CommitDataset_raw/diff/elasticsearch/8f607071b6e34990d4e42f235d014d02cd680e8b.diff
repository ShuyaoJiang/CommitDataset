[+++ b/modules/mapper-extras/src/test/java/org/elasticsearch/index/mapper/TokenCountFieldMapperTests.java, +        assertThat(((TokenCountFieldMapper) stage1.mappers().getMapper("tc")).analyzer(), equalTo("keyword"));, +        assertThat(((TokenCountFieldMapper) stage2.mappers().getMapper("tc")).analyzer(), equalTo("standard"));, +++ b/modules/mapper-extras/src/test/java/org/elasticsearch/index/mapper/TokenCountFieldMapperTests.java, +        assertThat(((TokenCountFieldMapper) stage1.mappers().getMapper("tc")).analyzer(), equalTo("keyword"));, +        assertThat(((TokenCountFieldMapper) stage2.mappers().getMapper("tc")).analyzer(), equalTo("standard"));, +++ b/server/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java, +                FieldMapper fieldMapper = allFieldMappers.getMapper(field);, +++ b/modules/mapper-extras/src/test/java/org/elasticsearch/index/mapper/TokenCountFieldMapperTests.java, +        assertThat(((TokenCountFieldMapper) stage1.mappers().getMapper("tc")).analyzer(), equalTo("keyword"));, +        assertThat(((TokenCountFieldMapper) stage2.mappers().getMapper("tc")).analyzer(), equalTo("standard"));, +++ b/server/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java, +                FieldMapper fieldMapper = allFieldMappers.getMapper(field);, +++ b/server/src/main/java/org/elasticsearch/index/get/ShardGetService.java, +                FieldMapper fieldMapper = docMapper.mappers().getMapper(field);, +++ b/modules/mapper-extras/src/test/java/org/elasticsearch/index/mapper/TokenCountFieldMapperTests.java, +        assertThat(((TokenCountFieldMapper) stage1.mappers().getMapper("tc")).analyzer(), equalTo("keyword"));, +        assertThat(((TokenCountFieldMapper) stage2.mappers().getMapper("tc")).analyzer(), equalTo("standard"));, +++ b/server/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java, +                FieldMapper fieldMapper = allFieldMappers.getMapper(field);, +++ b/server/src/main/java/org/elasticsearch/index/get/ShardGetService.java, +                FieldMapper fieldMapper = docMapper.mappers().getMapper(field);, +++ b/server/src/main/java/org/elasticsearch/index/mapper/DocumentFieldMappers.java, +++ b/modules/mapper-extras/src/test/java/org/elasticsearch/index/mapper/TokenCountFieldMapperTests.java, +        assertThat(((TokenCountFieldMapper) stage1.mappers().getMapper("tc")).analyzer(), equalTo("keyword"));, +        assertThat(((TokenCountFieldMapper) stage2.mappers().getMapper("tc")).analyzer(), equalTo("standard"));, +++ b/server/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java, +                FieldMapper fieldMapper = allFieldMappers.getMapper(field);, +++ b/server/src/main/java/org/elasticsearch/index/get/ShardGetService.java, +                FieldMapper fieldMapper = docMapper.mappers().getMapper(field);, +++ b/server/src/main/java/org/elasticsearch/index/mapper/DocumentFieldMappers.java, +++ b/server/src/main/java/org/elasticsearch/index/search/QueryParserHelper.java, +            FieldMapper fieldMapper = mapper.mappers().getMapper(field);, +++ b/modules/mapper-extras/src/test/java/org/elasticsearch/index/mapper/TokenCountFieldMapperTests.java, +        assertThat(((TokenCountFieldMapper) stage1.mappers().getMapper("tc")).analyzer(), equalTo("keyword"));, +        assertThat(((TokenCountFieldMapper) stage2.mappers().getMapper("tc")).analyzer(), equalTo("standard"));, +++ b/server/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java, +                FieldMapper fieldMapper = allFieldMappers.getMapper(field);, +++ b/server/src/main/java/org/elasticsearch/index/get/ShardGetService.java, +                FieldMapper fieldMapper = docMapper.mappers().getMapper(field);, +++ b/server/src/main/java/org/elasticsearch/index/mapper/DocumentFieldMappers.java, +++ b/server/src/main/java/org/elasticsearch/index/search/QueryParserHelper.java, +            FieldMapper fieldMapper = mapper.mappers().getMapper(field);, +++ b/server/src/test/java/org/elasticsearch/index/mapper/BinaryFieldMapperTests.java, +        FieldMapper fieldMapper = mapper.mappers().getMapper("field");, +            FieldMapper fieldMapper = mapper.mappers().getMapper("field");, +++ b/modules/mapper-extras/src/test/java/org/elasticsearch/index/mapper/TokenCountFieldMapperTests.java, +        assertThat(((TokenCountFieldMapper) stage1.mappers().getMapper("tc")).analyzer(), equalTo("keyword"));, +        assertThat(((TokenCountFieldMapper) stage2.mappers().getMapper("tc")).analyzer(), equalTo("standard"));, +++ b/server/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java, +                FieldMapper fieldMapper = allFieldMappers.getMapper(field);, +++ b/server/src/main/java/org/elasticsearch/index/get/ShardGetService.java, +                FieldMapper fieldMapper = docMapper.mappers().getMapper(field);, +++ b/server/src/main/java/org/elasticsearch/index/mapper/DocumentFieldMappers.java, +++ b/server/src/main/java/org/elasticsearch/index/search/QueryParserHelper.java, +            FieldMapper fieldMapper = mapper.mappers().getMapper(field);, +++ b/server/src/test/java/org/elasticsearch/index/mapper/BinaryFieldMapperTests.java, +        FieldMapper fieldMapper = mapper.mappers().getMapper("field");, +            FieldMapper fieldMapper = mapper.mappers().getMapper("field");, +++ b/server/src/test/java/org/elasticsearch/index/mapper/DocumentMapperMergeTests.java, +        assertThat(stage1.mappers().getMapper("age"), nullValue());, +        assertThat(stage1.mappers().getMapper("obj1.prop1"), nullValue());, +        assertThat(merged.mappers().getMapper("age"), notNullValue());, +        assertThat(merged.mappers().getMapper("obj1.prop1"), notNullValue());, +++ b/modules/mapper-extras/src/test/java/org/elasticsearch/index/mapper/TokenCountFieldMapperTests.java, +        assertThat(((TokenCountFieldMapper) stage1.mappers().getMapper("tc")).analyzer(), equalTo("keyword"));, +        assertThat(((TokenCountFieldMapper) stage2.mappers().getMapper("tc")).analyzer(), equalTo("standard"));, +++ b/server/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java, +                FieldMapper fieldMapper = allFieldMappers.getMapper(field);, +++ b/server/src/main/java/org/elasticsearch/index/get/ShardGetService.java, +                FieldMapper fieldMapper = docMapper.mappers().getMapper(field);, +++ b/server/src/main/java/org/elasticsearch/index/mapper/DocumentFieldMappers.java, +++ b/server/src/main/java/org/elasticsearch/index/search/QueryParserHelper.java, +            FieldMapper fieldMapper = mapper.mappers().getMapper(field);, +++ b/server/src/test/java/org/elasticsearch/index/mapper/BinaryFieldMapperTests.java, +        FieldMapper fieldMapper = mapper.mappers().getMapper("field");, +            FieldMapper fieldMapper = mapper.mappers().getMapper("field");, +++ b/server/src/test/java/org/elasticsearch/index/mapper/DocumentMapperMergeTests.java, +        assertThat(stage1.mappers().getMapper("age"), nullValue());, +        assertThat(stage1.mappers().getMapper("obj1.prop1"), nullValue());, +        assertThat(merged.mappers().getMapper("age"), notNullValue());, +        assertThat(merged.mappers().getMapper("obj1.prop1"), notNullValue());, +++ b/server/src/test/java/org/elasticsearch/index/mapper/DoubleIndexingDocTests.java, +        TopDocs topDocs = searcher.search(mapper.mappers().getMapper("field1").fieldType().termQuery("value1", context), 10);, +        topDocs = searcher.search(mapper.mappers().getMapper("field2").fieldType().termQuery("1", context), 10);, +        topDocs = searcher.search(mapper.mappers().getMapper("field3").fieldType().termQuery("1.1", context), 10);, +        topDocs = searcher.search(mapper.mappers().getMapper("field4").fieldType().termQuery("2010-01-01", context), 10);, +        topDocs = searcher.search(mapper.mappers().getMapper("field5").fieldType().termQuery("1", context), 10);, +        topDocs = searcher.search(mapper.mappers().getMapper("field5").fieldType().termQuery("2", context), 10);, +        topDocs = searcher.search(mapper.mappers().getMapper("field5").fieldType().termQuery("3", context), 10);, +++ b/modules/mapper-extras/src/test/java/org/elasticsearch/index/mapper/TokenCountFieldMapperTests.java, +        assertThat(((TokenCountFieldMapper) stage1.mappers().getMapper("tc")).analyzer(), equalTo("keyword"));, +        assertThat(((TokenCountFieldMapper) stage2.mappers().getMapper("tc")).analyzer(), equalTo("standard"));, +++ b/server/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java, +                FieldMapper fieldMapper = allFieldMappers.getMapper(field);, +++ b/server/src/main/java/org/elasticsearch/index/get/ShardGetService.java, +                FieldMapper fieldMapper = docMapper.mappers().getMapper(field);, +++ b/server/src/main/java/org/elasticsearch/index/mapper/DocumentFieldMappers.java, +++ b/server/src/main/java/org/elasticsearch/index/search/QueryParserHelper.java, +            FieldMapper fieldMapper = mapper.mappers().getMapper(field);]