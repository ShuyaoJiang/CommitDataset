[+++ b/core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java, +public class TransportShardBulkAction extends TransportWriteAction<BulkShardRequest, BulkShardRequest, BulkShardResponse> {, +                indexNameExpressionResolver, BulkShardRequest::new, BulkShardRequest::new, ThreadPool.Names.BULK);, +++ b/core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java, +public class TransportShardBulkAction extends TransportWriteAction<BulkShardRequest, BulkShardRequest, BulkShardResponse> {, +                indexNameExpressionResolver, BulkShardRequest::new, BulkShardRequest::new, ThreadPool.Names.BULK);, +++ b/core/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java, +public class TransportDeleteAction extends TransportWriteAction<DeleteRequest, DeleteRequest,DeleteResponse> {, +                indexNameExpressionResolver, DeleteRequest::new, DeleteRequest::new, ThreadPool.Names.INDEX);, +++ b/core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java, +public class TransportShardBulkAction extends TransportWriteAction<BulkShardRequest, BulkShardRequest, BulkShardResponse> {, +                indexNameExpressionResolver, BulkShardRequest::new, BulkShardRequest::new, ThreadPool.Names.BULK);, +++ b/core/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java, +public class TransportDeleteAction extends TransportWriteAction<DeleteRequest, DeleteRequest,DeleteResponse> {, +                indexNameExpressionResolver, DeleteRequest::new, DeleteRequest::new, ThreadPool.Names.INDEX);, +++ b/core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java, +public class TransportIndexAction extends TransportWriteAction<IndexRequest, IndexRequest, IndexResponse> {, +            actionFilters, indexNameExpressionResolver, IndexRequest::new, IndexRequest::new, ThreadPool.Names.INDEX);, +++ b/core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java, +public class TransportShardBulkAction extends TransportWriteAction<BulkShardRequest, BulkShardRequest, BulkShardResponse> {, +                indexNameExpressionResolver, BulkShardRequest::new, BulkShardRequest::new, ThreadPool.Names.BULK);, +++ b/core/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java, +public class TransportDeleteAction extends TransportWriteAction<DeleteRequest, DeleteRequest,DeleteResponse> {, +                indexNameExpressionResolver, DeleteRequest::new, DeleteRequest::new, ThreadPool.Names.INDEX);, +++ b/core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java, +public class TransportIndexAction extends TransportWriteAction<IndexRequest, IndexRequest, IndexResponse> {, +            actionFilters, indexNameExpressionResolver, IndexRequest::new, IndexRequest::new, ThreadPool.Names.INDEX);, +++ b/core/src/main/java/org/elasticsearch/action/support/replication/TransportWriteAction.java, +            ReplicaRequest extends ReplicatedWriteRequest<ReplicaRequest>,, +        > extends TransportReplicationAction<Request, ReplicaRequest, Response> {, +                                   Supplier<ReplicaRequest> replicaRequest, String executor) {, +                indexNameExpressionResolver, request, replicaRequest, executor);, +    protected abstract Translog.Location onReplicaShard(ReplicaRequest request, IndexShard indexShard);, +        return new WritePrimaryResult(((ReplicaRequest) request), result.getResponse(), result.getLocation(), primary);, +    protected final WriteReplicaResult shardOperationOnReplica(ReplicaRequest request, IndexShard replica) {, +        public WritePrimaryResult(ReplicaRequest request, Response finalResponse,, +++ b/core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java, +public class TransportShardBulkAction extends TransportWriteAction<BulkShardRequest, BulkShardRequest, BulkShardResponse> {, +                indexNameExpressionResolver, BulkShardRequest::new, BulkShardRequest::new, ThreadPool.Names.BULK);, +++ b/core/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java, +public class TransportDeleteAction extends TransportWriteAction<DeleteRequest, DeleteRequest,DeleteResponse> {, +                indexNameExpressionResolver, DeleteRequest::new, DeleteRequest::new, ThreadPool.Names.INDEX);, +++ b/core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java, +public class TransportIndexAction extends TransportWriteAction<IndexRequest, IndexRequest, IndexResponse> {, +            actionFilters, indexNameExpressionResolver, IndexRequest::new, IndexRequest::new, ThreadPool.Names.INDEX);, +++ b/core/src/main/java/org/elasticsearch/action/support/replication/TransportWriteAction.java, +            ReplicaRequest extends ReplicatedWriteRequest<ReplicaRequest>,, +        > extends TransportReplicationAction<Request, ReplicaRequest, Response> {, +                                   Supplier<ReplicaRequest> replicaRequest, String executor) {, +                indexNameExpressionResolver, request, replicaRequest, executor);, +    protected abstract Translog.Location onReplicaShard(ReplicaRequest request, IndexShard indexShard);, +        return new WritePrimaryResult(((ReplicaRequest) request), result.getResponse(), result.getLocation(), primary);, +    protected final WriteReplicaResult shardOperationOnReplica(ReplicaRequest request, IndexShard replica) {, +        public WritePrimaryResult(ReplicaRequest request, Response finalResponse,, +++ b/core/src/test/java/org/elasticsearch/action/support/replication/TransportWriteActionTests.java, +    private class TestAction extends TransportWriteAction<TestRequest, TestRequest, TestResponse> {, +                    TestRequest::new, ThreadPool.Names.SAME);]