[+++ b/benchmarks/src/main/java/org/elasticsearch/benchmark/time/DateFormatterBenchmark.java, +++ b/benchmarks/src/main/java/org/elasticsearch/benchmark/time/DateFormatterBenchmark.java, +++ b/modules/mapper-extras/src/main/java/org/elasticsearch/index/mapper/DenseVectorFieldMapper.java, +import java.time.ZoneId;, +        public DocValueFormat docValueFormat(String format, ZoneId timeZone) {, +++ b/benchmarks/src/main/java/org/elasticsearch/benchmark/time/DateFormatterBenchmark.java, +++ b/modules/mapper-extras/src/main/java/org/elasticsearch/index/mapper/DenseVectorFieldMapper.java, +import java.time.ZoneId;, +        public DocValueFormat docValueFormat(String format, ZoneId timeZone) {, +++ b/modules/mapper-extras/src/main/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapper.java, +import java.time.ZoneId;, +        public DocValueFormat docValueFormat(String format, ZoneId timeZone) {, +++ b/benchmarks/src/main/java/org/elasticsearch/benchmark/time/DateFormatterBenchmark.java, +++ b/modules/mapper-extras/src/main/java/org/elasticsearch/index/mapper/DenseVectorFieldMapper.java, +import java.time.ZoneId;, +        public DocValueFormat docValueFormat(String format, ZoneId timeZone) {, +++ b/modules/mapper-extras/src/main/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapper.java, +import java.time.ZoneId;, +        public DocValueFormat docValueFormat(String format, ZoneId timeZone) {, +++ b/modules/mapper-extras/src/main/java/org/elasticsearch/index/mapper/SparseVectorFieldMapper.java, +import java.time.ZoneId;, +        public DocValueFormat docValueFormat(String format, ZoneId timeZone) {, +++ b/benchmarks/src/main/java/org/elasticsearch/benchmark/time/DateFormatterBenchmark.java, +++ b/modules/mapper-extras/src/main/java/org/elasticsearch/index/mapper/DenseVectorFieldMapper.java, +import java.time.ZoneId;, +        public DocValueFormat docValueFormat(String format, ZoneId timeZone) {, +++ b/modules/mapper-extras/src/main/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapper.java, +import java.time.ZoneId;, +        public DocValueFormat docValueFormat(String format, ZoneId timeZone) {, +++ b/modules/mapper-extras/src/main/java/org/elasticsearch/index/mapper/SparseVectorFieldMapper.java, +import java.time.ZoneId;, +        public DocValueFormat docValueFormat(String format, ZoneId timeZone) {, +++ b/plugins/analysis-icu/src/main/java/org/elasticsearch/index/mapper/ICUCollationKeywordFieldMapper.java, +import java.time.ZoneId;, +        public DocValueFormat docValueFormat(final String format, final ZoneId timeZone) {, +++ b/benchmarks/src/main/java/org/elasticsearch/benchmark/time/DateFormatterBenchmark.java, +++ b/modules/mapper-extras/src/main/java/org/elasticsearch/index/mapper/DenseVectorFieldMapper.java, +import java.time.ZoneId;, +        public DocValueFormat docValueFormat(String format, ZoneId timeZone) {, +++ b/modules/mapper-extras/src/main/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapper.java, +import java.time.ZoneId;, +        public DocValueFormat docValueFormat(String format, ZoneId timeZone) {, +++ b/modules/mapper-extras/src/main/java/org/elasticsearch/index/mapper/SparseVectorFieldMapper.java, +import java.time.ZoneId;, +        public DocValueFormat docValueFormat(String format, ZoneId timeZone) {, +++ b/plugins/analysis-icu/src/main/java/org/elasticsearch/index/mapper/ICUCollationKeywordFieldMapper.java, +import java.time.ZoneId;, +        public DocValueFormat docValueFormat(final String format, final ZoneId timeZone) {, +++ b/qa/smoke-test-ingest-with-all-dependencies/src/test/resources/rest-api-spec/test/ingest/60_pipeline_timestamp_date_mapping.yml, +            test: { "properties": { "my_time": {"type": "date", "format": "strict_date_optional_time_nanos"}}}, +++ b/benchmarks/src/main/java/org/elasticsearch/benchmark/time/DateFormatterBenchmark.java, +++ b/modules/mapper-extras/src/main/java/org/elasticsearch/index/mapper/DenseVectorFieldMapper.java, +import java.time.ZoneId;, +        public DocValueFormat docValueFormat(String format, ZoneId timeZone) {, +++ b/modules/mapper-extras/src/main/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapper.java, +import java.time.ZoneId;, +        public DocValueFormat docValueFormat(String format, ZoneId timeZone) {, +++ b/modules/mapper-extras/src/main/java/org/elasticsearch/index/mapper/SparseVectorFieldMapper.java, +import java.time.ZoneId;, +        public DocValueFormat docValueFormat(String format, ZoneId timeZone) {, +++ b/plugins/analysis-icu/src/main/java/org/elasticsearch/index/mapper/ICUCollationKeywordFieldMapper.java, +import java.time.ZoneId;, +        public DocValueFormat docValueFormat(final String format, final ZoneId timeZone) {, +++ b/qa/smoke-test-ingest-with-all-dependencies/src/test/resources/rest-api-spec/test/ingest/60_pipeline_timestamp_date_mapping.yml, +            test: { "properties": { "my_time": {"type": "date", "format": "strict_date_optional_time_nanos"}}}, +++ /dev/null, +++ b/benchmarks/src/main/java/org/elasticsearch/benchmark/time/DateFormatterBenchmark.java, +++ b/modules/mapper-extras/src/main/java/org/elasticsearch/index/mapper/DenseVectorFieldMapper.java, +import java.time.ZoneId;, +        public DocValueFormat docValueFormat(String format, ZoneId timeZone) {, +++ b/modules/mapper-extras/src/main/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapper.java, +import java.time.ZoneId;, +        public DocValueFormat docValueFormat(String format, ZoneId timeZone) {, +++ b/modules/mapper-extras/src/main/java/org/elasticsearch/index/mapper/SparseVectorFieldMapper.java, +import java.time.ZoneId;, +        public DocValueFormat docValueFormat(String format, ZoneId timeZone) {, +++ b/plugins/analysis-icu/src/main/java/org/elasticsearch/index/mapper/ICUCollationKeywordFieldMapper.java, +import java.time.ZoneId;, +        public DocValueFormat docValueFormat(final String format, final ZoneId timeZone) {, +++ b/qa/smoke-test-ingest-with-all-dependencies/src/test/resources/rest-api-spec/test/ingest/60_pipeline_timestamp_date_mapping.yml, +            test: { "properties": { "my_time": {"type": "date", "format": "strict_date_optional_time_nanos"}}}, +++ /dev/null, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/search/180_locale_dependent_mapping.yml, +---, +"Test Index and Search locale dependent mappings / dates":, +  - skip:, +      version: " - 6.1.99", +      reason: JDK9 only supports this with a special sysproperty added in 6.2.0, +  - do:, +      indices.create:, +          index: test_index, +          body:, +              settings:, +                  number_of_shards: 1, +              mappings:, +                  doc:, +                      properties:, +                          date_field:, +                              type: date, +                              format: "E, d MMM yyyy HH:mm:ss Z"]