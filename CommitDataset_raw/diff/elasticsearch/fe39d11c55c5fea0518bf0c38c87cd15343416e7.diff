[+++ b/core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java, +                if (logger.isTraceEnabled()) {, +                    logger.trace("new cluster state [{}] after waiting for master election to fail shard [{}]", shardRoutingEntry.getShardRouting().shardId(), state.prettyPrint(), shardRoutingEntry);, +                }, +                logger.warn("{} node closed while handling failed shard [{}]", shardRoutingEntry.failure, shardRoutingEntry.getShardRouting().getId(), shardRoutingEntry.getShardRouting());]