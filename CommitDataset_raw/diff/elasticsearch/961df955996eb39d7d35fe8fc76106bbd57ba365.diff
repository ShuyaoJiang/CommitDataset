[+++ b/core/src/main/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolver.java, +     * Translates the provided index expression into actual concrete indices., +     * Translates the provided index expression into actual concrete indices., +        List<String> concreteIndices = new ArrayList<>(expressions.size());, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolver.java, +     * Translates the provided index expression into actual concrete indices., +     * Translates the provided index expression into actual concrete indices., +        List<String> concreteIndices = new ArrayList<>(expressions.size());, +++ b/core/src/main/java/org/elasticsearch/indices/cache/query/IndicesQueryCache.java, +import org.apache.lucene.search.BulkScorer;, +, +        @Override, +        public BulkScorer bulkScorer(LeafReaderContext context) throws IOException {, +            shardKeyMap.add(context.reader());, +            return in.bulkScorer(context);, +        }, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolver.java, +     * Translates the provided index expression into actual concrete indices., +     * Translates the provided index expression into actual concrete indices., +        List<String> concreteIndices = new ArrayList<>(expressions.size());, +++ b/core/src/main/java/org/elasticsearch/indices/cache/query/IndicesQueryCache.java, +import org.apache.lucene.search.BulkScorer;, +, +        @Override, +        public BulkScorer bulkScorer(LeafReaderContext context) throws IOException {, +            shardKeyMap.add(context.reader());, +            return in.bulkScorer(context);, +        }, +++ b/core/src/test/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolverTests.java]