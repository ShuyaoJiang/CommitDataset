[+++ b/core/src/main/java/org/elasticsearch/cli/EnvironmentAwareCommand.java, +import java.util.Objects;, +        final String pathConf = System.getProperty("es.path.conf");, +        if (pathConf == null) {, +            throw new UserException(ExitCodes.CONFIG, "the system property es.path.conf must be set");, +        }, +, +        return Paths.get(pathConf);, +++ b/core/src/main/java/org/elasticsearch/cli/EnvironmentAwareCommand.java, +import java.util.Objects;, +        final String pathConf = System.getProperty("es.path.conf");, +        if (pathConf == null) {, +            throw new UserException(ExitCodes.CONFIG, "the system property es.path.conf must be set");, +        }, +, +        return Paths.get(pathConf);, +++ b/distribution/src/main/resources/bin/elasticsearch, +  exec \, +    "$JAVA" \, +    $ES_JAVA_OPTS \, +    -Des.path.home="$ES_HOME" \, +    -Des.path.conf="$CONF_DIR" \, +    -cp "$ES_CLASSPATH" \, +    org.elasticsearch.bootstrap.Elasticsearch \, +    "$@", +  exec \, +    "$JAVA" \, +    $ES_JAVA_OPTS \, +    -Des.path.home="$ES_HOME" \, +    -Des.path.conf="$CONF_DIR" \, +    -cp "$ES_CLASSPATH" \, +    org.elasticsearch.bootstrap.Elasticsearch \, +    "$@" \, +    <&- &, +++ b/core/src/main/java/org/elasticsearch/cli/EnvironmentAwareCommand.java, +import java.util.Objects;, +        final String pathConf = System.getProperty("es.path.conf");, +        if (pathConf == null) {, +            throw new UserException(ExitCodes.CONFIG, "the system property es.path.conf must be set");, +        }, +, +        return Paths.get(pathConf);, +++ b/distribution/src/main/resources/bin/elasticsearch, +  exec \, +    "$JAVA" \, +    $ES_JAVA_OPTS \, +    -Des.path.home="$ES_HOME" \, +    -Des.path.conf="$CONF_DIR" \, +    -cp "$ES_CLASSPATH" \, +    org.elasticsearch.bootstrap.Elasticsearch \, +    "$@", +  exec \, +    "$JAVA" \, +    $ES_JAVA_OPTS \, +    -Des.path.home="$ES_HOME" \, +    -Des.path.conf="$CONF_DIR" \, +    -cp "$ES_CLASSPATH" \, +    org.elasticsearch.bootstrap.Elasticsearch \, +    "$@" \, +    <&- &, +++ b/distribution/src/main/resources/bin/elasticsearch-keystore, +exec \, +  "$JAVA" \, +  $ES_JAVA_OPTS \, +  -Des.path.home="$ES_HOME" \, +  -Des.path.conf="$CONF_DIR" \, +  -cp "$ES_CLASSPATH" \, +  org.elasticsearch.common.settings.KeyStoreCli \, +  "$@", +++ b/core/src/main/java/org/elasticsearch/cli/EnvironmentAwareCommand.java, +import java.util.Objects;, +        final String pathConf = System.getProperty("es.path.conf");, +        if (pathConf == null) {, +            throw new UserException(ExitCodes.CONFIG, "the system property es.path.conf must be set");, +        }, +, +        return Paths.get(pathConf);, +++ b/distribution/src/main/resources/bin/elasticsearch, +  exec \, +    "$JAVA" \, +    $ES_JAVA_OPTS \, +    -Des.path.home="$ES_HOME" \, +    -Des.path.conf="$CONF_DIR" \, +    -cp "$ES_CLASSPATH" \, +    org.elasticsearch.bootstrap.Elasticsearch \, +    "$@", +  exec \, +    "$JAVA" \, +    $ES_JAVA_OPTS \, +    -Des.path.home="$ES_HOME" \, +    -Des.path.conf="$CONF_DIR" \, +    -cp "$ES_CLASSPATH" \, +    org.elasticsearch.bootstrap.Elasticsearch \, +    "$@" \, +    <&- &, +++ b/distribution/src/main/resources/bin/elasticsearch-keystore, +exec \, +  "$JAVA" \, +  $ES_JAVA_OPTS \, +  -Des.path.home="$ES_HOME" \]