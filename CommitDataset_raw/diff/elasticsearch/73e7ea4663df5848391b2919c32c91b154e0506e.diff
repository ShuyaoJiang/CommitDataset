[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java, +    private volatile int indexConcurrency;, +, +        this.indexConcurrency = indexSettings.getAsInt("index.index_concurrency", IndexWriterConfig.DEFAULT_MAX_THREAD_STATES);, +        this.versionMap = new ConcurrentHashMap<String, VersionValue>();, +        this.dirtyLocks = new Object[indexConcurrency * 10]; // we multiply it by 10 to have enough..., +            config.setMaxThreadStates(indexConcurrency);, +            int indexConcurrency = settings.getAsInt("index.index_concurrency", RobinEngine.this.indexConcurrency);, +                        logger.info("updating index.term_index_interval from [{}] to [{}]", RobinEngine.this.termIndexInterval, termIndexInterval);, +                        logger.info("updating index.term_index_divisor from [{}] to [{}]", RobinEngine.this.termIndexDivisor, termIndexDivisor);, +                    if (indexConcurrency != RobinEngine.this.indexConcurrency) {, +                        logger.info("updating index.index_concurrency from [{}] to [{}]", RobinEngine.this.indexConcurrency, indexConcurrency);, +                        RobinEngine.this.indexConcurrency = indexConcurrency;, +                        // we have to flush in this case, since it only applies on a new index writer, +                        requiresFlushing = true;, +                    }]