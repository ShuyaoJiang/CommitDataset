[+++ b/src/main/java/org/elasticsearch/plugins/PluginManager.java, +import javax.net.ssl.HttpsURLConnection;, +import javax.net.ssl.SSLContext;, +import javax.net.ssl.TrustManager;, +import javax.net.ssl.X509TrustManager;, +, +    private static final int EXIT_CODE_OK = 0;, +    private static final int EXIT_CODE_CMD_USAGE = 64;, +    private static final int EXIT_CODE_IO_ERROR = 74;, +    private static final int EXIT_CODE_ERROR = 70;, +, +                    System.exit(EXIT_CODE_CMD_USAGE);, +        } catch (Throwable e) {, +            System.exit(EXIT_CODE_CMD_USAGE);, +            int exitCode = EXIT_CODE_ERROR; // we fail unless it's reset, +                        exitCode = EXIT_CODE_OK;, +                        exitCode = EXIT_CODE_IO_ERROR;, +                    } catch (Throwable e) {, +                        exitCode = EXIT_CODE_ERROR;, +                        exitCode = EXIT_CODE_OK;, +                        exitCode = EXIT_CODE_IO_ERROR;, +                    } catch (Throwable e) {, +                        exitCode = EXIT_CODE_ERROR;, +                    try {, +                        exitCode = EXIT_CODE_OK;, +                    } catch (Throwable e) {, +                        displayHelp("Error while listing plugins, reason: " + e.getClass().getSimpleName() +, +                                ": " + e.getMessage());, +                    break;, +                    , +                default:, +                    System.out.println("Unknown Action [" + action + "]");, +                    exitCode = EXIT_CODE_ERROR;, +, +            }, +            System.exit(exitCode); // exit here!]