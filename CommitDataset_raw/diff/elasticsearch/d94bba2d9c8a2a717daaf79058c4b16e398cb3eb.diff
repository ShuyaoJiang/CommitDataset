[+++ b/build.gradle, +      javadoc.options.encoding='UTF8', +++ b/build.gradle, +      javadoc.options.encoding='UTF8', +++ b/buildSrc/src/main/groovy/com/carrotsearch/gradle/junit4/RandomizedTestingTask.groovy, +    Map<String, Object> systemProperties = new HashMap<>(), +    void systemProperty(String property, Object value) {, +                for (Map.Entry<String, Object> prop : systemProperties) {, +                    sysproperty key: prop.getKey(), value: prop.getValue().toString(), +++ b/build.gradle, +      javadoc.options.encoding='UTF8', +++ b/buildSrc/src/main/groovy/com/carrotsearch/gradle/junit4/RandomizedTestingTask.groovy, +    Map<String, Object> systemProperties = new HashMap<>(), +    void systemProperty(String property, Object value) {, +                for (Map.Entry<String, Object> prop : systemProperties) {, +                    sysproperty key: prop.getKey(), value: prop.getValue().toString(), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/precommit/ForbiddenPatternsTask.groovy, +, +        inputs.property("excludes", filesFilter.excludes), +        inputs.property("rules", patterns), +        filesFilter.exclude(excludes), +++ b/build.gradle, +      javadoc.options.encoding='UTF8', +++ b/buildSrc/src/main/groovy/com/carrotsearch/gradle/junit4/RandomizedTestingTask.groovy, +    Map<String, Object> systemProperties = new HashMap<>(), +    void systemProperty(String property, Object value) {, +                for (Map.Entry<String, Object> prop : systemProperties) {, +                    sysproperty key: prop.getKey(), value: prop.getValue().toString(), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/precommit/ForbiddenPatternsTask.groovy, +, +        inputs.property("excludes", filesFilter.excludes), +        inputs.property("rules", patterns), +        filesFilter.exclude(excludes), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +    int httpPort = 0, +    int transportPort = 0, +        ant.get(src: "http://${node.httpUri()}",, +++ b/build.gradle, +      javadoc.options.encoding='UTF8', +++ b/buildSrc/src/main/groovy/com/carrotsearch/gradle/junit4/RandomizedTestingTask.groovy, +    Map<String, Object> systemProperties = new HashMap<>(), +    void systemProperty(String property, Object value) {, +                for (Map.Entry<String, Object> prop : systemProperties) {, +                    sysproperty key: prop.getKey(), value: prop.getValue().toString(), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/precommit/ForbiddenPatternsTask.groovy, +, +        inputs.property("excludes", filesFilter.excludes), +        inputs.property("rules", patterns), +        filesFilter.exclude(excludes), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +    int httpPort = 0, +    int transportPort = 0, +        ant.get(src: "http://${node.httpUri()}",, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +     *, +     * Returns an object that will resolve at execution time of the given task to a uri for the cluster., +    static Object setup(Project project, Task task, ClusterConfiguration config) {, +, +        // delay the resolution of the uri by wrapping in a closure, so it is not used until read for tests, +        return "${-> nodes[0].transportUri()}", +        if (node.config.numNodes == 1) {, +            esConfig['http.port'] = node.config.httpPort, +            esConfig['transport.tcp.port'] =  node.config.transportPort, +        } else {, +            // TODO: fix multi node so it doesn't use hardcoded prots, +            esConfig['http.port'] = 9400 + node.nodeNum, +            esConfig['transport.tcp.port'] =  9500 + node.nodeNum, +            esConfig['discovery.zen.ping.unicast.hosts'] = (0..<node.config.numNodes).collect{"localhost:${9500 + it}"}.join(','), +, +        }, +                            resourceexists {, +                                file(file: node.httpPortsFile.toString()), +                            }, +                            resourceexists {, +                                file(file: node.transportPortsFile.toString()), +                            }, +            logger.error("|  http ports file exists: ${node.httpPortsFile.exists()}"), +            logger.error("|  transport ports file exists: ${node.transportPortsFile.exists()}"), +++ b/build.gradle, +      javadoc.options.encoding='UTF8', +++ b/buildSrc/src/main/groovy/com/carrotsearch/gradle/junit4/RandomizedTestingTask.groovy, +    Map<String, Object> systemProperties = new HashMap<>(), +    void systemProperty(String property, Object value) {, +                for (Map.Entry<String, Object> prop : systemProperties) {, +                    sysproperty key: prop.getKey(), value: prop.getValue().toString(), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/precommit/ForbiddenPatternsTask.groovy, +, +        inputs.property("excludes", filesFilter.excludes), +        inputs.property("rules", patterns), +        filesFilter.exclude(excludes), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +    int httpPort = 0, +    int transportPort = 0, +        ant.get(src: "http://${node.httpUri()}",, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +     *, +     * Returns an object that will resolve at execution time of the given task to a uri for the cluster., +    static Object setup(Project project, Task task, ClusterConfiguration config) {, +, +        // delay the resolution of the uri by wrapping in a closure, so it is not used until read for tests]