[+++ b/src/test/java/org/elasticsearch/percolator/RecoveryPercolatorTests.java, +    public static void ensureGreen(Client client) {, +        ClusterHealthResponse actionGet = client.admin().cluster(), +                .health(Requests.clusterHealthRequest().waitForGreenStatus().waitForEvents(Priority.LANGUID).waitForRelocatingShards(0)).actionGet();, +        assertThat(actionGet.isTimedOut(), equalTo(false));, +        assertThat(actionGet.getStatus(), equalTo(ClusterHealthStatus.GREEN));, +    }, +]