[+++ b/docs/reference/migration/migrate_7_0/search.asciidoc, +==== Context Completion Suggester, +, +The ability to query and index context enabled suggestions without context,, +deprecated in 6.x, has been removed. Context enabled suggestion queries, +without contexts have to visit every suggestion, which degrades the search performance, +considerably., +, +++ b/docs/reference/migration/migrate_7_0/search.asciidoc, +==== Context Completion Suggester, +, +The ability to query and index context enabled suggestions without context,, +deprecated in 6.x, has been removed. Context enabled suggestion queries, +without contexts have to visit every suggestion, which degrades the search performance, +considerably., +, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/suggest/30_context.yml, +"Indexing and Querying without contexts is forbidden":, +      reason: this feature was removed in 7.0, +      catch: /Contexts are mandatory in context enabled completion field \[suggest_context\]/, +      catch: /Missing mandatory contexts in context query/, +        allow_partial_search_results: false, +      catch: /Missing mandatory contexts in context query/, +        allow_partial_search_results: false, +      catch: /Missing mandatory contexts in context query/, +        allow_partial_search_results: false, +++ b/docs/reference/migration/migrate_7_0/search.asciidoc, +==== Context Completion Suggester, +, +The ability to query and index context enabled suggestions without context,, +deprecated in 6.x, has been removed. Context enabled suggestion queries, +without contexts have to visit every suggestion, which degrades the search performance, +considerably., +, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/suggest/30_context.yml, +"Indexing and Querying without contexts is forbidden":, +      reason: this feature was removed in 7.0, +      catch: /Contexts are mandatory in context enabled completion field \[suggest_context\]/, +      catch: /Missing mandatory contexts in context query/, +        allow_partial_search_results: false, +      catch: /Missing mandatory contexts in context query/, +        allow_partial_search_results: false, +      catch: /Missing mandatory contexts in context query/, +        allow_partial_search_results: false, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/suggest/40_typed_keys.yml, +          - '{"title": "Elasticsearch - The Definitive Guide", "suggestions": {"input": ["Elasticsearch in Action"], "contexts": {"format": "ebook"}}}', +++ b/docs/reference/migration/migrate_7_0/search.asciidoc, +==== Context Completion Suggester, +, +The ability to query and index context enabled suggestions without context,, +deprecated in 6.x, has been removed. Context enabled suggestion queries, +without contexts have to visit every suggestion, which degrades the search performance, +considerably., +, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/suggest/30_context.yml, +"Indexing and Querying without contexts is forbidden":, +      reason: this feature was removed in 7.0, +      catch: /Contexts are mandatory in context enabled completion field \[suggest_context\]/, +      catch: /Missing mandatory contexts in context query/, +        allow_partial_search_results: false, +      catch: /Missing mandatory contexts in context query/, +        allow_partial_search_results: false, +      catch: /Missing mandatory contexts in context query/, +        allow_partial_search_results: false, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/suggest/40_typed_keys.yml, +          - '{"title": "Elasticsearch - The Definitive Guide", "suggestions": {"input": ["Elasticsearch in Action"], "contexts": {"format": "ebook"}}}', +++ b/server/src/main/java/org/elasticsearch/search/suggest/completion/context/ContextMappings.java, +                throw new IllegalArgumentException("Contexts are mandatory in context enabled completion field [" + name + "]");, +            throw new IllegalArgumentException("Missing mandatory contexts in context query");, +++ b/docs/reference/migration/migrate_7_0/search.asciidoc, +==== Context Completion Suggester, +, +The ability to query and index context enabled suggestions without context,, +deprecated in 6.x, has been removed. Context enabled suggestion queries, +without contexts have to visit every suggestion, which degrades the search performance, +considerably., +, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/suggest/30_context.yml, +"Indexing and Querying without contexts is forbidden":, +      reason: this feature was removed in 7.0, +      catch: /Contexts are mandatory in context enabled completion field \[suggest_context\]/, +      catch: /Missing mandatory contexts in context query/, +        allow_partial_search_results: false, +      catch: /Missing mandatory contexts in context query/, +        allow_partial_search_results: false, +      catch: /Missing mandatory contexts in context query/, +        allow_partial_search_results: false, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/suggest/40_typed_keys.yml, +          - '{"title": "Elasticsearch - The Definitive Guide", "suggestions": {"input": ["Elasticsearch in Action"], "contexts": {"format": "ebook"}}}', +++ b/server/src/main/java/org/elasticsearch/search/suggest/completion/context/ContextMappings.java, +                throw new IllegalArgumentException("Contexts are mandatory in context enabled completion field [" + name + "]");, +            throw new IllegalArgumentException("Missing mandatory contexts in context query");, +++ b/server/src/test/java/org/elasticsearch/search/suggest/ContextCompletionSuggestSearchIT.java, +        CompletionSuggestionBuilder prefix = SuggestBuilders.completionSuggestion(FIELD).prefix("sugg"), +            .contexts(Collections.singletonMap("cat",, +                Collections.singletonList(CategoryQueryContext.builder().setCategory("cat").setPrefix(true).build())));, +        CompletionSuggestionBuilder prefix = SuggestBuilders.completionSuggestion(FIELD).regex("sugg.*es"), +            .contexts(Collections.singletonMap("cat",, +                Collections.singletonList(CategoryQueryContext.builder().setCategory("cat").setPrefix(true).build())));, +        CompletionSuggestionBuilder prefix = SuggestBuilders.completionSuggestion(FIELD).prefix("sugg", Fuzziness.ONE)]