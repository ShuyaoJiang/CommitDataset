[+++ b/src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java, +                                if (delta < minCost ||, +                                        (candidate != null && delta == minCost && candidate.id() > shard.id())) {, +                                    /* this last line is a tie-breaker to make the shard allocation alg deterministic, +                                     * otherwise we rely on the iteration order of the index.getAllShards() which is a set.*/]