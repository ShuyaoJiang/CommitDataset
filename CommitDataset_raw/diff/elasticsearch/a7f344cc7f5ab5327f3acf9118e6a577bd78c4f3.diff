[+++ b/server/src/main/java/org/elasticsearch/common/bytes/ByteBufferReference.java, +import org.apache.lucene.util.FutureObjects;, + * changed, those changes will not be reflected in this reference. Any changes to the underlying data in the, + * byte buffer will be reflected in this reference., +    ByteBufferReference(ByteBuffer buffer) {, +        this.buffer = buffer.slice();, +        return buffer.get(index);, +        FutureObjects.checkFromIndexSize(from, length, this.length);, +        buffer.position(from);, +        buffer.limit(from + length);, +        ByteBufferReference newByteBuffer = new ByteBufferReference(buffer);, +        buffer.position(0);, +        buffer.limit(this.length);, +        return newByteBuffer;, +            return new BytesRef(buffer.array(), buffer.arrayOffset(), length);, +        buffer.get(copy, 0, length);]