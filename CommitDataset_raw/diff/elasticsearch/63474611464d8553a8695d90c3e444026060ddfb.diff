[+++ b/server/src/main/java/org/elasticsearch/cluster/block/ClusterBlocks.java, +    public boolean hasGlobalBlockWithId(final int blockId) {, +    public boolean hasGlobalBlockWithLevel(ClusterBlockLevel level) {, +    public boolean hasGlobalBlockWithStatus(final RestStatus status) {, +++ b/server/src/main/java/org/elasticsearch/cluster/block/ClusterBlocks.java, +    public boolean hasGlobalBlockWithId(final int blockId) {, +    public boolean hasGlobalBlockWithLevel(ClusterBlockLevel level) {, +    public boolean hasGlobalBlockWithStatus(final RestStatus status) {, +++ b/server/src/main/java/org/elasticsearch/cluster/coordination/Coordinator.java, +            assert (applierState.nodes().getMasterNodeId() == null) == applierState.blocks().hasGlobalBlockWithId(NO_MASTER_BLOCK_ID);, +            assert clusterState.blocks().hasGlobalBlockWithId(NO_MASTER_BLOCK_ID) == false :, +++ b/server/src/main/java/org/elasticsearch/cluster/block/ClusterBlocks.java, +    public boolean hasGlobalBlockWithId(final int blockId) {, +    public boolean hasGlobalBlockWithLevel(ClusterBlockLevel level) {, +    public boolean hasGlobalBlockWithStatus(final RestStatus status) {, +++ b/server/src/main/java/org/elasticsearch/cluster/coordination/Coordinator.java, +            assert (applierState.nodes().getMasterNodeId() == null) == applierState.blocks().hasGlobalBlockWithId(NO_MASTER_BLOCK_ID);, +            assert clusterState.blocks().hasGlobalBlockWithId(NO_MASTER_BLOCK_ID) == false :, +++ b/server/src/main/java/org/elasticsearch/cluster/health/ClusterStateHealth.java, +        if (clusterState.blocks().hasGlobalBlockWithStatus(RestStatus.SERVICE_UNAVAILABLE)) {, +++ b/server/src/main/java/org/elasticsearch/cluster/block/ClusterBlocks.java, +    public boolean hasGlobalBlockWithId(final int blockId) {, +    public boolean hasGlobalBlockWithLevel(ClusterBlockLevel level) {, +    public boolean hasGlobalBlockWithStatus(final RestStatus status) {, +++ b/server/src/main/java/org/elasticsearch/cluster/coordination/Coordinator.java, +            assert (applierState.nodes().getMasterNodeId() == null) == applierState.blocks().hasGlobalBlockWithId(NO_MASTER_BLOCK_ID);, +            assert clusterState.blocks().hasGlobalBlockWithId(NO_MASTER_BLOCK_ID) == false :, +++ b/server/src/main/java/org/elasticsearch/cluster/health/ClusterStateHealth.java, +        if (clusterState.blocks().hasGlobalBlockWithStatus(RestStatus.SERVICE_UNAVAILABLE)) {, +++ b/server/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java, +            assert clusterState.blocks().hasGlobalBlockWithId(discoverySettings.getNoMasterBlock().id()) == false :, +++ b/server/src/main/java/org/elasticsearch/cluster/block/ClusterBlocks.java, +    public boolean hasGlobalBlockWithId(final int blockId) {, +    public boolean hasGlobalBlockWithLevel(ClusterBlockLevel level) {, +    public boolean hasGlobalBlockWithStatus(final RestStatus status) {, +++ b/server/src/main/java/org/elasticsearch/cluster/coordination/Coordinator.java, +            assert (applierState.nodes().getMasterNodeId() == null) == applierState.blocks().hasGlobalBlockWithId(NO_MASTER_BLOCK_ID);, +            assert clusterState.blocks().hasGlobalBlockWithId(NO_MASTER_BLOCK_ID) == false :, +++ b/server/src/main/java/org/elasticsearch/cluster/health/ClusterStateHealth.java, +        if (clusterState.blocks().hasGlobalBlockWithStatus(RestStatus.SERVICE_UNAVAILABLE)) {, +++ b/server/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java, +            assert clusterState.blocks().hasGlobalBlockWithId(discoverySettings.getNoMasterBlock().id()) == false :, +++ b/server/src/test/java/org/elasticsearch/cluster/MinimumMasterNodesIT.java, +        assertThat(state.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID), equalTo(true));, +        assertThat(state.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID), equalTo(false));, +        assertThat(state.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID), equalTo(false));, +            return clusterState.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID);, +        assertThat(state.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID), equalTo(true));, +        assertThat(state.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID), equalTo(false));, +        assertThat(state.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID), equalTo(false));, +            assertThat(state1.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID), equalTo(true));, +        assertThat(state.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID), equalTo(false));, +        assertThat(state.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID), equalTo(false));, +                assertThat(state1.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID), equalTo(true));, +            return state.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID);, +++ b/server/src/main/java/org/elasticsearch/cluster/block/ClusterBlocks.java, +    public boolean hasGlobalBlockWithId(final int blockId) {, +    public boolean hasGlobalBlockWithLevel(ClusterBlockLevel level) {, +    public boolean hasGlobalBlockWithStatus(final RestStatus status) {, +++ b/server/src/main/java/org/elasticsearch/cluster/coordination/Coordinator.java, +            assert (applierState.nodes().getMasterNodeId() == null) == applierState.blocks().hasGlobalBlockWithId(NO_MASTER_BLOCK_ID);, +            assert clusterState.blocks().hasGlobalBlockWithId(NO_MASTER_BLOCK_ID) == false :, +++ b/server/src/main/java/org/elasticsearch/cluster/health/ClusterStateHealth.java, +        if (clusterState.blocks().hasGlobalBlockWithStatus(RestStatus.SERVICE_UNAVAILABLE)) {, +++ b/server/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java, +            assert clusterState.blocks().hasGlobalBlockWithId(discoverySettings.getNoMasterBlock().id()) == false :, +++ b/server/src/test/java/org/elasticsearch/cluster/MinimumMasterNodesIT.java, +        assertThat(state.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID), equalTo(true));, +        assertThat(state.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID), equalTo(false));, +        assertThat(state.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID), equalTo(false));, +            return clusterState.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID);, +        assertThat(state.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID), equalTo(true));, +        assertThat(state.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID), equalTo(false));, +        assertThat(state.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID), equalTo(false));, +            assertThat(state1.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID), equalTo(true));, +        assertThat(state.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID), equalTo(false));, +        assertThat(state.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID), equalTo(false));, +                assertThat(state1.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID), equalTo(true));, +            return state.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID);, +++ b/server/src/test/java/org/elasticsearch/cluster/NoMasterNodeIT.java, +                    assertTrue(state.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID));, +                        return state.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID);, +++ b/server/src/main/java/org/elasticsearch/cluster/block/ClusterBlocks.java, +    public boolean hasGlobalBlockWithId(final int blockId) {, +    public boolean hasGlobalBlockWithLevel(ClusterBlockLevel level) {, +    public boolean hasGlobalBlockWithStatus(final RestStatus status) {, +++ b/server/src/main/java/org/elasticsearch/cluster/coordination/Coordinator.java, +            assert (applierState.nodes().getMasterNodeId() == null) == applierState.blocks().hasGlobalBlockWithId(NO_MASTER_BLOCK_ID);, +            assert clusterState.blocks().hasGlobalBlockWithId(NO_MASTER_BLOCK_ID) == false :, +++ b/server/src/main/java/org/elasticsearch/cluster/health/ClusterStateHealth.java, +        if (clusterState.blocks().hasGlobalBlockWithStatus(RestStatus.SERVICE_UNAVAILABLE)) {, +++ b/server/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java, +            assert clusterState.blocks().hasGlobalBlockWithId(discoverySettings.getNoMasterBlock().id()) == false :, +++ b/server/src/test/java/org/elasticsearch/cluster/MinimumMasterNodesIT.java, +        assertThat(state.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID), equalTo(true));, +        assertThat(state.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID), equalTo(false));, +        assertThat(state.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID), equalTo(false));, +            return clusterState.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID);, +        assertThat(state.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID), equalTo(true));, +        assertThat(state.blocks().hasGlobalBlockWithId(DiscoverySettings.NO_MASTER_BLOCK_ID), equalTo(false));]