[+++ b/src/test/java/org/elasticsearch/VersionTests.java, +import static org.hamcrest.CoreMatchers.equalTo;, +import static org.hamcrest.Matchers.sameInstance;, +    @Test, +    public void testVersionConstantPresent() {, +        assertThat(Version.CURRENT, sameInstance(Version.fromId(Version.CURRENT.id)));, +        assertThat(Version.CURRENT.luceneVersion.ordinal(), equalTo(org.apache.lucene.util.Version.LUCENE_CURRENT.ordinal() - 1));, +        final int iters = atLeast(20);, +        for (int i = 0; i < iters; i++) {, +            Version version = randomVersion();, +            assertThat(version, sameInstance(Version.fromId(version.id)));, +            assertThat(version.luceneVersion, sameInstance(Version.fromId(version.id).luceneVersion));, +        }, +    }, +]