[+++ b/core/src/test/java/org/elasticsearch/percolator/RecoveryPercolatorIT.java, +import java.util.concurrent.locks.Lock;, +import java.util.concurrent.locks.ReentrantLock;, +        final Lock lock = new ReentrantLock();, +                    PercolateResponse response;, +                    try {, +                        lock.lock();, +                        response = percolateBuilder.get();, +                    } finally {, +                        lock.unlock();, +                    }, +                try {, +                    lock.lock();, +                } finally {, +                    lock.unlock();, +                }, +                try {, +                    lock.lock();, +                } finally {, +                    lock.unlock();, +                }, +                internalCluster().startNode(settingsBuilder().put("node.stay", false));, +                internalCluster().startNode(settingsBuilder().put("node.stay", false));]