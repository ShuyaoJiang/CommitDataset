[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java, +import java.util.LinkedHashMap;, +        private Map<Class<? extends RootMapper>, RootMapper> rootMappers = new LinkedHashMap<Class<? extends RootMapper>, RootMapper>();, +            // add default mappers, order is important (for example analyzer should come before the rest to set context.analyzer), +            this.rootMappers.put(AllFieldMapper.class, new AllFieldMapper());]