[+++ b/src/test/java/org/elasticsearch/bwcompat/ScriptTransformBackwardsCompatibilityTests.java, +import org.elasticsearch.common.settings.ImmutableSettings;, +import org.elasticsearch.common.settings.Settings;, +import org.elasticsearch.script.ScriptContext;, +import org.elasticsearch.script.ScriptModes;, +import org.elasticsearch.script.ScriptService;, +import org.elasticsearch.script.groovy.GroovyScriptEngineService;, +    public static final String INLINE_GROOVY_MAPPING_SCRIPT = "script.engine" + "." + GroovyScriptEngineService.NAME + "." + ScriptService.ScriptType.INLINE + "." + ScriptContext.Standard.MAPPING;, +, +    @Override, +    protected Settings externalNodeSettings(int nodeOrdinal) {, +        //enable scripting on the external nodes, +        return ImmutableSettings.builder().put(super.externalNodeSettings(nodeOrdinal)).put(INLINE_GROOVY_MAPPING_SCRIPT, "on").build();, +    }, +, +    @Override, +    protected Settings nodeSettings(int nodeOrdinal) {, +        //enable scripting on the internal nodes, +        return ImmutableSettings.builder().put(super.nodeSettings(nodeOrdinal)).put(INLINE_GROOVY_MAPPING_SCRIPT, "on").build();, +    }, +]