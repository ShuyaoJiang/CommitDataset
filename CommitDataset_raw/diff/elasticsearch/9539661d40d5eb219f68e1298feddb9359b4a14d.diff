[+++ b/src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java, +import org.elasticsearch.search.facet.InternalFacet;, +    public SearchPhaseController(Settings settings) {, +                    if (!namedFacets.isEmpty()) {, +                        Facet aggregatedFacet = ((InternalFacet) namedFacets.get(0)).reduce(namedFacets);, +                }, +++ b/src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java, +import org.elasticsearch.search.facet.InternalFacet;, +    public SearchPhaseController(Settings settings) {, +                    if (!namedFacets.isEmpty()) {, +                        Facet aggregatedFacet = ((InternalFacet) namedFacets.get(0)).reduce(namedFacets);, +                }, +++ b/src/main/java/org/elasticsearch/search/facet/Facet.java, +++ b/src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java, +import org.elasticsearch.search.facet.InternalFacet;, +    public SearchPhaseController(Settings settings) {, +                    if (!namedFacets.isEmpty()) {, +                        Facet aggregatedFacet = ((InternalFacet) namedFacets.get(0)).reduce(namedFacets);, +                }, +++ b/src/main/java/org/elasticsearch/search/facet/Facet.java, +++ b/src/main/java/org/elasticsearch/search/facet/FacetProcessor.java, +++ b/src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java, +import org.elasticsearch.search.facet.InternalFacet;, +    public SearchPhaseController(Settings settings) {, +                    if (!namedFacets.isEmpty()) {, +                        Facet aggregatedFacet = ((InternalFacet) namedFacets.get(0)).reduce(namedFacets);, +                }, +++ b/src/main/java/org/elasticsearch/search/facet/Facet.java, +++ b/src/main/java/org/elasticsearch/search/facet/FacetProcessor.java, +++ b/src/main/java/org/elasticsearch/search/facet/InternalFacet.java, +import java.util.List;, +    Facet reduce(List<Facet> facets);, +, +++ b/src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java, +import org.elasticsearch.search.facet.InternalFacet;, +    public SearchPhaseController(Settings settings) {, +                    if (!namedFacets.isEmpty()) {, +                        Facet aggregatedFacet = ((InternalFacet) namedFacets.get(0)).reduce(namedFacets);, +                }, +++ b/src/main/java/org/elasticsearch/search/facet/Facet.java, +++ b/src/main/java/org/elasticsearch/search/facet/FacetProcessor.java, +++ b/src/main/java/org/elasticsearch/search/facet/InternalFacet.java, +import java.util.List;, +    Facet reduce(List<Facet> facets);, +, +++ b/src/main/java/org/elasticsearch/search/facet/datehistogram/DateHistogramFacetProcessor.java, +++ b/src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java, +import org.elasticsearch.search.facet.InternalFacet;, +    public SearchPhaseController(Settings settings) {, +                    if (!namedFacets.isEmpty()) {, +                        Facet aggregatedFacet = ((InternalFacet) namedFacets.get(0)).reduce(namedFacets);, +                }, +++ b/src/main/java/org/elasticsearch/search/facet/Facet.java, +++ b/src/main/java/org/elasticsearch/search/facet/FacetProcessor.java, +++ b/src/main/java/org/elasticsearch/search/facet/InternalFacet.java, +import java.util.List;, +    Facet reduce(List<Facet> facets);, +, +++ b/src/main/java/org/elasticsearch/search/facet/datehistogram/DateHistogramFacetProcessor.java, +++ b/src/main/java/org/elasticsearch/search/facet/datehistogram/InternalCountDateHistogramFacet.java, +    public Facet reduce(List<Facet> facets) {, +++ b/src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java, +import org.elasticsearch.search.facet.InternalFacet;, +    public SearchPhaseController(Settings settings) {, +                    if (!namedFacets.isEmpty()) {, +                        Facet aggregatedFacet = ((InternalFacet) namedFacets.get(0)).reduce(namedFacets);, +                }, +++ b/src/main/java/org/elasticsearch/search/facet/Facet.java, +++ b/src/main/java/org/elasticsearch/search/facet/FacetProcessor.java, +++ b/src/main/java/org/elasticsearch/search/facet/InternalFacet.java, +import java.util.List;, +    Facet reduce(List<Facet> facets);, +, +++ b/src/main/java/org/elasticsearch/search/facet/datehistogram/DateHistogramFacetProcessor.java, +++ b/src/main/java/org/elasticsearch/search/facet/datehistogram/InternalCountDateHistogramFacet.java, +    public Facet reduce(List<Facet> facets) {, +++ b/src/main/java/org/elasticsearch/search/facet/datehistogram/InternalDateHistogramFacet.java, +++ b/src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java, +import org.elasticsearch.search.facet.InternalFacet;, +    public SearchPhaseController(Settings settings) {, +                    if (!namedFacets.isEmpty()) {, +                        Facet aggregatedFacet = ((InternalFacet) namedFacets.get(0)).reduce(namedFacets);, +                }, +++ b/src/main/java/org/elasticsearch/search/facet/Facet.java, +++ b/src/main/java/org/elasticsearch/search/facet/FacetProcessor.java, +++ b/src/main/java/org/elasticsearch/search/facet/InternalFacet.java, +import java.util.List;, +    Facet reduce(List<Facet> facets);, +, +++ b/src/main/java/org/elasticsearch/search/facet/datehistogram/DateHistogramFacetProcessor.java, +++ b/src/main/java/org/elasticsearch/search/facet/datehistogram/InternalCountDateHistogramFacet.java, +    public Facet reduce(List<Facet> facets) {, +++ b/src/main/java/org/elasticsearch/search/facet/datehistogram/InternalDateHistogramFacet.java, +++ b/src/main/java/org/elasticsearch/search/facet/datehistogram/InternalFullDateHistogramFacet.java, +    public Facet reduce(List<Facet> facets) {, +++ b/src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java, +import org.elasticsearch.search.facet.InternalFacet;, +    public SearchPhaseController(Settings settings) {, +                    if (!namedFacets.isEmpty()) {, +                        Facet aggregatedFacet = ((InternalFacet) namedFacets.get(0)).reduce(namedFacets);]