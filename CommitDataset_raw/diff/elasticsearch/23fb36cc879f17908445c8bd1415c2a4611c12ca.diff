[+++ b/core/src/main/java/org/elasticsearch/monitor/fs/FsProbe.java, +        fsPath.free = adjustForHugeFilesystems(nodePath.fileStore.getUnallocatedSpace());, +        fsPath.available = adjustForHugeFilesystems(nodePath.fileStore.getUsableSpace());, +++ b/core/src/main/java/org/elasticsearch/monitor/fs/FsProbe.java, +        fsPath.free = adjustForHugeFilesystems(nodePath.fileStore.getUnallocatedSpace());, +        fsPath.available = adjustForHugeFilesystems(nodePath.fileStore.getUsableSpace());, +++ b/core/src/test/java/org/elasticsearch/monitor/fs/FsProbeTests.java, +        assertThat(FsProbe.getFSInfo(np).free, greaterThanOrEqualTo(0L));, +        assertThat(FsProbe.getFSInfo(np).available, greaterThanOrEqualTo(0L));, +            return randomIntBetween(-1000, 1000);, +            return randomIntBetween(-1000, 1000);]