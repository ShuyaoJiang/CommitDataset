[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/FieldData.java, +    public abstract void forEachValue(StringValueProc proc);, +, +    public static interface StringValueProc {, +        void onValue(String value, int freq);, +    }, +, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/FieldData.java, +    public abstract void forEachValue(StringValueProc proc);, +, +    public static interface StringValueProc {, +        void onValue(String value, int freq);, +    }, +, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/doubles/DoubleFieldData.java, +    @Override public void forEachValue(StringValueProc proc) {, +        if (freqs == null) {, +            for (int i = 1; i < values.length; i++) {, +                proc.onValue(Double.toString(values[i]), -1);, +            }, +        } else {, +            for (int i = 1; i < values.length; i++) {, +                proc.onValue(Double.toString(values[i]), freqs[i]);, +            }, +        }, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/FieldData.java, +    public abstract void forEachValue(StringValueProc proc);, +, +    public static interface StringValueProc {, +        void onValue(String value, int freq);, +    }, +, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/doubles/DoubleFieldData.java, +    @Override public void forEachValue(StringValueProc proc) {, +        if (freqs == null) {, +            for (int i = 1; i < values.length; i++) {, +                proc.onValue(Double.toString(values[i]), -1);, +            }, +        } else {, +            for (int i = 1; i < values.length; i++) {, +                proc.onValue(Double.toString(values[i]), freqs[i]);, +            }, +        }, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/floats/FloatFieldData.java, +    @Override public void forEachValue(StringValueProc proc) {, +        if (freqs == null) {, +            for (int i = 1; i < values.length; i++) {, +                proc.onValue(Float.toString(values[i]), -1);, +            }, +        } else {, +            for (int i = 1; i < values.length; i++) {, +                proc.onValue(Float.toString(values[i]), freqs[i]);, +            }, +        }, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/FieldData.java, +    public abstract void forEachValue(StringValueProc proc);, +, +    public static interface StringValueProc {, +        void onValue(String value, int freq);, +    }, +, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/doubles/DoubleFieldData.java, +    @Override public void forEachValue(StringValueProc proc) {, +        if (freqs == null) {, +            for (int i = 1; i < values.length; i++) {, +                proc.onValue(Double.toString(values[i]), -1);, +            }, +        } else {, +            for (int i = 1; i < values.length; i++) {, +                proc.onValue(Double.toString(values[i]), freqs[i]);, +            }, +        }, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/floats/FloatFieldData.java, +    @Override public void forEachValue(StringValueProc proc) {, +        if (freqs == null) {, +            for (int i = 1; i < values.length; i++) {, +                proc.onValue(Float.toString(values[i]), -1);, +            }, +        } else {, +            for (int i = 1; i < values.length; i++) {, +                proc.onValue(Float.toString(values[i]), freqs[i]);, +            }, +        }, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/ints/IntFieldData.java, +    @Override public void forEachValue(StringValueProc proc) {, +        if (freqs == null) {]