[+++ b/src/main/java/org/elasticsearch/index/mapper/core/StringFieldMapper.java, +        public static final FieldType STRING_FIELD_TYPE = new FieldType(AbstractFieldMapper.Defaults.FIELD_TYPE);, +            STRING_FIELD_TYPE.setIndexOptions(IndexOptions.DOCS_ONLY);, +++ b/src/main/java/org/elasticsearch/index/mapper/core/StringFieldMapper.java, +        public static final FieldType STRING_FIELD_TYPE = new FieldType(AbstractFieldMapper.Defaults.FIELD_TYPE);, +            STRING_FIELD_TYPE.setIndexOptions(IndexOptions.DOCS_ONLY);, +++ b/src/main/java/org/elasticsearch/index/search/MatchQuery.java, +        TokenStream source = null;, +        CachingTokenFilter buffer = null;, +        CharTermAttribute termAtt = null;, +        PositionIncrementAttribute posIncrAtt = null;, +        boolean success = false;, +            success = true;, +            // success==false if we hit an exception, +        int positionCount = 0;, +        boolean severalTokensAtSamePosition = false;, +            buffer = new CachingTokenFilter(source);, +            buffer.reset();, +        }, +        try {, +            if (source != null) {, +            }, +++ b/src/main/java/org/elasticsearch/index/mapper/core/StringFieldMapper.java, +        public static final FieldType STRING_FIELD_TYPE = new FieldType(AbstractFieldMapper.Defaults.FIELD_TYPE);, +            STRING_FIELD_TYPE.setIndexOptions(IndexOptions.DOCS_ONLY);, +++ b/src/main/java/org/elasticsearch/index/search/MatchQuery.java, +        TokenStream source = null;, +        CachingTokenFilter buffer = null;, +        CharTermAttribute termAtt = null;, +        PositionIncrementAttribute posIncrAtt = null;, +        boolean success = false;, +            success = true;, +            // success==false if we hit an exception, +        int positionCount = 0;, +        boolean severalTokensAtSamePosition = false;, +            buffer = new CachingTokenFilter(source);, +            buffer.reset();, +        }, +        try {, +            if (source != null) {, +            }, +++ b/src/test/java/org/elasticsearch/test/unit/index/query/SimpleIndexQueryParserTests.java, +        NumericUtils.longToPrefixCoded(val, NumericUtils.PRECISION_STEP_DEFAULT, bytesRef);]