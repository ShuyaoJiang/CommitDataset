[+++ b/docs/en/security/authentication/active-directory-realm.asciidoc, +                                          The default filter looks up `user` objects with, +                                          a matching `userPrincipalName`. If specified, this, +                                          `(&(objectClass=user)(userPrincipalName={1}))`. `{1}` is, +++ b/docs/en/security/authentication/active-directory-realm.asciidoc, +                                          The default filter looks up `user` objects with, +                                          a matching `userPrincipalName`. If specified, this, +                                          `(&(objectClass=user)(userPrincipalName={1}))`. `{1}` is, +++ b/docs/en/settings/security-settings.asciidoc, +The default filter looks up `user` objects with, +a matching `userPrincipalName`. If specified, this, +`(&(objectClass=user)(userPrincipalName={1}))`. `{1}` is the full user principal name, +++ b/docs/en/security/authentication/active-directory-realm.asciidoc, +                                          The default filter looks up `user` objects with, +                                          a matching `userPrincipalName`. If specified, this, +                                          `(&(objectClass=user)(userPrincipalName={1}))`. `{1}` is, +++ b/docs/en/settings/security-settings.asciidoc, +The default filter looks up `user` objects with, +a matching `userPrincipalName`. If specified, this, +`(&(objectClass=user)(userPrincipalName={1}))`. `{1}` is the full user principal name, +++ b/plugin/src/main/java/org/elasticsearch/xpack/security/authc/ldap/ActiveDirectorySessionFactory.java, +import org.elasticsearch.common.logging.DeprecationLogger;, +import org.elasticsearch.xpack.security.authc.RealmSettings;, +        static final String UPN_USER_FILTER = "(&(objectClass=user)(userPrincipalName={1}))";, +            if (userSearchFilter.contains("{0}")) {, +                new DeprecationLogger(logger).deprecated("The use of the account name variable {0} in the setting [", +                        + RealmSettings.getFullSettingKey(config, AD_UPN_USER_SEARCH_FILTER_SETTING) +, +                        "] has been deprecated and will be removed in a future version!");, +            }, +            assert parts.length == 2 : "there should have only been two values for " + username + " after splitting on '@'";, +                Filter filter = createFilter(userSearchFilter, accountName, username);, +                searchForEntry(connection, userSearchDN, LdapSearchScope.SUB_TREE.scope(), filter,]