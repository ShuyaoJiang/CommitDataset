[+++ b/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +    public Map<String, Object> readMap() throws IOException {, +        return (Map<String, Object>) readGenericValue();, +    public Object readGenericValue() throws IOException {, +                list.add(readGenericValue());, +                list[i] = readGenericValue();, +                map.put(readUTF(), readGenericValue());, +        } else if (type == 11) {, +            return readByte();, +++ b/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +    public Map<String, Object> readMap() throws IOException {, +        return (Map<String, Object>) readGenericValue();, +    public Object readGenericValue() throws IOException {, +                list.add(readGenericValue());, +                list[i] = readGenericValue();, +                map.put(readUTF(), readGenericValue());, +        } else if (type == 11) {, +            return readByte();, +++ b/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java, +        writeGenericValue(map);, +    public void writeGenericValue(@Nullable Object value) throws IOException {, +                writeGenericValue(o);, +                writeGenericValue(o);, +                writeGenericValue(entry.getValue());, +        } else if (type == Byte.class) {, +            writeByte((byte) 11);, +            writeByte((Byte) value);, +++ b/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +    public Map<String, Object> readMap() throws IOException {, +        return (Map<String, Object>) readGenericValue();, +    public Object readGenericValue() throws IOException {, +                list.add(readGenericValue());, +                list[i] = readGenericValue();, +                map.put(readUTF(), readGenericValue());, +        } else if (type == 11) {, +            return readByte();, +++ b/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java, +        writeGenericValue(map);, +    public void writeGenericValue(@Nullable Object value) throws IOException {, +                writeGenericValue(o);, +                writeGenericValue(o);, +                writeGenericValue(entry.getValue());, +        } else if (type == Byte.class) {, +            writeByte((byte) 11);, +            writeByte((Byte) value);, +++ b/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +++ b/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +    public Map<String, Object> readMap() throws IOException {, +        return (Map<String, Object>) readGenericValue();, +    public Object readGenericValue() throws IOException {, +                list.add(readGenericValue());, +                list[i] = readGenericValue();, +                map.put(readUTF(), readGenericValue());, +        } else if (type == 11) {, +            return readByte();, +++ b/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java, +        writeGenericValue(map);, +    public void writeGenericValue(@Nullable Object value) throws IOException {, +                writeGenericValue(o);, +                writeGenericValue(o);, +                writeGenericValue(entry.getValue());, +        } else if (type == Byte.class) {, +            writeByte((byte) 11);, +            writeByte((Byte) value);, +++ b/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +++ b/src/main/java/org/elasticsearch/index/get/GetField.java, +            values.add(in.readGenericValue());, +            out.writeGenericValue(obj);, +++ b/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +    public Map<String, Object> readMap() throws IOException {, +        return (Map<String, Object>) readGenericValue();, +    public Object readGenericValue() throws IOException {, +                list.add(readGenericValue());, +                list[i] = readGenericValue();, +                map.put(readUTF(), readGenericValue());, +        } else if (type == 11) {, +            return readByte();, +++ b/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java, +        writeGenericValue(map);, +    public void writeGenericValue(@Nullable Object value) throws IOException {, +                writeGenericValue(o);, +                writeGenericValue(o);, +                writeGenericValue(entry.getValue());, +        } else if (type == Byte.class) {, +            writeByte((byte) 11);, +            writeByte((Byte) value);, +++ b/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +++ b/src/main/java/org/elasticsearch/index/get/GetField.java, +            values.add(in.readGenericValue());, +            out.writeGenericValue(obj);, +++ b/src/main/java/org/elasticsearch/search/internal/InternalSearchHitField.java, +            values.add(in.readGenericValue());, +            out.writeGenericValue(value);]