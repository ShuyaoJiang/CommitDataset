[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/analysis/Analysis.java, +    public static Set<?> parseStopWords(Environment env, Settings settings, Set<?> defaultStopWords) {, +        Set<String> pathLoadedStopWords = getWordList(env, settings, "stopwords");, +        if (pathLoadedStopWords != null) {, +            Set setStopWords = new HashSet<String>();, +            for (String stopWord : pathLoadedStopWords) {, +                if (namedStopWords.containsKey(stopWord)) {, +                    setStopWords.addAll(namedStopWords.get(stopWord));, +                } else {, +                    setStopWords.add(stopWord);, +                }, +            }, +            return setStopWords;, +        }, +, +        return defaultStopWords;, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/analysis/Analysis.java, +    public static Set<?> parseStopWords(Environment env, Settings settings, Set<?> defaultStopWords) {, +        Set<String> pathLoadedStopWords = getWordList(env, settings, "stopwords");, +        if (pathLoadedStopWords != null) {, +            Set setStopWords = new HashSet<String>();, +            for (String stopWord : pathLoadedStopWords) {, +                if (namedStopWords.containsKey(stopWord)) {, +                    setStopWords.addAll(namedStopWords.get(stopWord));, +                } else {, +                    setStopWords.add(stopWord);, +                }, +            }, +            return setStopWords;, +        }, +, +        return defaultStopWords;, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/analysis/AnalysisService.java, +            analyzerProviders.put("default", new StandardAnalyzerProvider(index, indexSettings, null, "default", ImmutableSettings.Builder.EMPTY_SETTINGS));, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/analysis/Analysis.java, +    public static Set<?> parseStopWords(Environment env, Settings settings, Set<?> defaultStopWords) {, +        Set<String> pathLoadedStopWords = getWordList(env, settings, "stopwords");, +        if (pathLoadedStopWords != null) {, +            Set setStopWords = new HashSet<String>();, +            for (String stopWord : pathLoadedStopWords) {, +                if (namedStopWords.containsKey(stopWord)) {, +                    setStopWords.addAll(namedStopWords.get(stopWord));, +                } else {, +                    setStopWords.add(stopWord);, +                }, +            }, +            return setStopWords;, +        }, +, +        return defaultStopWords;, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/analysis/AnalysisService.java, +            analyzerProviders.put("default", new StandardAnalyzerProvider(index, indexSettings, null, "default", ImmutableSettings.Builder.EMPTY_SETTINGS));, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/analysis/ArabicAnalyzerProvider.java, +import org.elasticsearch.env.Environment;, +    @Inject public ArabicAnalyzerProvider(Index index, @IndexSettings Settings indexSettings, Environment env, @Assisted String name, @Assisted Settings settings) {, +                Analysis.parseStopWords(env, settings, ArabicAnalyzer.getDefaultStopSet()),, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/analysis/Analysis.java, +    public static Set<?> parseStopWords(Environment env, Settings settings, Set<?> defaultStopWords) {, +        Set<String> pathLoadedStopWords = getWordList(env, settings, "stopwords");, +        if (pathLoadedStopWords != null) {, +            Set setStopWords = new HashSet<String>();, +            for (String stopWord : pathLoadedStopWords) {, +                if (namedStopWords.containsKey(stopWord)) {, +                    setStopWords.addAll(namedStopWords.get(stopWord));, +                } else {, +                    setStopWords.add(stopWord);, +                }, +            }, +            return setStopWords;, +        }, +, +        return defaultStopWords;, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/analysis/AnalysisService.java, +            analyzerProviders.put("default", new StandardAnalyzerProvider(index, indexSettings, null, "default", ImmutableSettings.Builder.EMPTY_SETTINGS));, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/analysis/ArabicAnalyzerProvider.java, +import org.elasticsearch.env.Environment;, +    @Inject public ArabicAnalyzerProvider(Index index, @IndexSettings Settings indexSettings, Environment env, @Assisted String name, @Assisted Settings settings) {, +                Analysis.parseStopWords(env, settings, ArabicAnalyzer.getDefaultStopSet()),, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/analysis/ArmenianAnalyzerProvider.java, +import org.elasticsearch.env.Environment;, +    @Inject public ArmenianAnalyzerProvider(Index index, @IndexSettings Settings indexSettings, Environment env, @Assisted String name, @Assisted Settings settings) {, +                Analysis.parseStopWords(env, settings, ArmenianAnalyzer.getDefaultStopSet()),, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/analysis/Analysis.java, +    public static Set<?> parseStopWords(Environment env, Settings settings, Set<?> defaultStopWords) {, +        Set<String> pathLoadedStopWords = getWordList(env, settings, "stopwords");, +        if (pathLoadedStopWords != null) {, +            Set setStopWords = new HashSet<String>();, +            for (String stopWord : pathLoadedStopWords) {, +                if (namedStopWords.containsKey(stopWord)) {, +                    setStopWords.addAll(namedStopWords.get(stopWord));, +                } else {, +                    setStopWords.add(stopWord);, +                }, +            }, +            return setStopWords;, +        }, +, +        return defaultStopWords;, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/analysis/AnalysisService.java, +            analyzerProviders.put("default", new StandardAnalyzerProvider(index, indexSettings, null, "default", ImmutableSettings.Builder.EMPTY_SETTINGS));]