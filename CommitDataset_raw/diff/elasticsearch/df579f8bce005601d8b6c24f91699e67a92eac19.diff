[+++ b/modules/lang-painless/spi/src/main/java/org/elasticsearch/painless/spi/PainlessExtension.java, +import org.elasticsearch.script.ScriptContext;, +, +++ b/modules/lang-painless/spi/src/main/java/org/elasticsearch/painless/spi/PainlessExtension.java, +import org.elasticsearch.script.ScriptContext;, +, +++ b/modules/lang-painless/src/main/java/org/elasticsearch/painless/Def.java, +                MethodHandle handle = struct.getterMethodHandles.get(name);, +                    MethodHandle handle = struct.getterMethodHandles.get(name);, +                MethodHandle handle = struct.setterMethodHandles.get(name);, +                    MethodHandle handle = struct.setterMethodHandles.get(name);, +++ b/modules/lang-painless/spi/src/main/java/org/elasticsearch/painless/spi/PainlessExtension.java, +import org.elasticsearch.script.ScriptContext;, +, +++ b/modules/lang-painless/src/main/java/org/elasticsearch/painless/Def.java, +                MethodHandle handle = struct.getterMethodHandles.get(name);, +                    MethodHandle handle = struct.getterMethodHandles.get(name);, +                MethodHandle handle = struct.setterMethodHandles.get(name);, +                    MethodHandle handle = struct.setterMethodHandles.get(name);, +++ b/modules/lang-painless/src/main/java/org/elasticsearch/painless/PainlessExplainError.java, +import org.elasticsearch.painless.lookup.PainlessLookupUtility;, +                painlessClassName = PainlessLookupUtility.typeToCanonicalTypeName(objectToExplain.getClass());, +++ b/modules/lang-painless/spi/src/main/java/org/elasticsearch/painless/spi/PainlessExtension.java, +import org.elasticsearch.script.ScriptContext;, +, +++ b/modules/lang-painless/src/main/java/org/elasticsearch/painless/Def.java, +                MethodHandle handle = struct.getterMethodHandles.get(name);, +                    MethodHandle handle = struct.getterMethodHandles.get(name);, +                MethodHandle handle = struct.setterMethodHandles.get(name);, +                    MethodHandle handle = struct.setterMethodHandles.get(name);, +++ b/modules/lang-painless/src/main/java/org/elasticsearch/painless/PainlessExplainError.java, +import org.elasticsearch.painless.lookup.PainlessLookupUtility;, +                painlessClassName = PainlessLookupUtility.typeToCanonicalTypeName(objectToExplain.getClass());, +++ b/modules/lang-painless/src/main/java/org/elasticsearch/painless/lookup/PainlessClass.java, +    public final Map<String, PainlessField> staticFields;, +    public final Map<String, PainlessField> fields;, +    public final Map<String, MethodHandle> getterMethodHandles;, +    public final Map<String, MethodHandle> setterMethodHandles;, +    PainlessClass(Map<String, PainlessMethod> constructors,, +            Map<String, PainlessMethod> staticMethods, Map<String, PainlessMethod> methods,, +            Map<String, PainlessField> staticFields, Map<String, PainlessField> fields,, +            Map<String, MethodHandle> getterMethodHandles, Map<String, MethodHandle> setterMethodHandles,, +        this.staticFields = Collections.unmodifiableMap(staticFields);, +        this.fields = Collections.unmodifiableMap(fields);, +        this.getterMethodHandles = Collections.unmodifiableMap(getterMethodHandles);, +        this.setterMethodHandles = Collections.unmodifiableMap(setterMethodHandles);, +++ b/modules/lang-painless/spi/src/main/java/org/elasticsearch/painless/spi/PainlessExtension.java, +import org.elasticsearch.script.ScriptContext;, +, +++ b/modules/lang-painless/src/main/java/org/elasticsearch/painless/Def.java, +                MethodHandle handle = struct.getterMethodHandles.get(name);, +                    MethodHandle handle = struct.getterMethodHandles.get(name);, +                MethodHandle handle = struct.setterMethodHandles.get(name);, +                    MethodHandle handle = struct.setterMethodHandles.get(name);, +++ b/modules/lang-painless/src/main/java/org/elasticsearch/painless/PainlessExplainError.java, +import org.elasticsearch.painless.lookup.PainlessLookupUtility;, +                painlessClassName = PainlessLookupUtility.typeToCanonicalTypeName(objectToExplain.getClass());, +++ b/modules/lang-painless/src/main/java/org/elasticsearch/painless/lookup/PainlessClass.java, +    public final Map<String, PainlessField> staticFields;, +    public final Map<String, PainlessField> fields;, +    public final Map<String, MethodHandle> getterMethodHandles;, +    public final Map<String, MethodHandle> setterMethodHandles;, +    PainlessClass(Map<String, PainlessMethod> constructors,, +            Map<String, PainlessMethod> staticMethods, Map<String, PainlessMethod> methods,, +            Map<String, PainlessField> staticFields, Map<String, PainlessField> fields,, +            Map<String, MethodHandle> getterMethodHandles, Map<String, MethodHandle> setterMethodHandles,, +        this.staticFields = Collections.unmodifiableMap(staticFields);, +        this.fields = Collections.unmodifiableMap(fields);, +        this.getterMethodHandles = Collections.unmodifiableMap(getterMethodHandles);, +        this.setterMethodHandles = Collections.unmodifiableMap(setterMethodHandles);, +++ b/modules/lang-painless/src/main/java/org/elasticsearch/painless/lookup/PainlessClassBuilder.java, +    final Map<String, PainlessField> staticFields;, +    final Map<String, PainlessField> fields;, +    final Map<String, MethodHandle> getterMethodHandles;, +    final Map<String, MethodHandle> setterMethodHandles;, +    PainlessClassBuilder() {, +        staticFields = new HashMap<>();, +        fields = new HashMap<>();, +        getterMethodHandles = new HashMap<>();, +        setterMethodHandles = new HashMap<>();, +        return new PainlessClass(constructors, staticMethods, methods, staticFields, fields,, +                getterMethodHandles, setterMethodHandles, functionalMethod);, +++ b/modules/lang-painless/spi/src/main/java/org/elasticsearch/painless/spi/PainlessExtension.java, +import org.elasticsearch.script.ScriptContext;, +, +++ b/modules/lang-painless/src/main/java/org/elasticsearch/painless/Def.java, +                MethodHandle handle = struct.getterMethodHandles.get(name);, +                    MethodHandle handle = struct.getterMethodHandles.get(name);, +                MethodHandle handle = struct.setterMethodHandles.get(name);, +                    MethodHandle handle = struct.setterMethodHandles.get(name);, +++ b/modules/lang-painless/src/main/java/org/elasticsearch/painless/PainlessExplainError.java, +import org.elasticsearch.painless.lookup.PainlessLookupUtility;, +                painlessClassName = PainlessLookupUtility.typeToCanonicalTypeName(objectToExplain.getClass());, +++ b/modules/lang-painless/src/main/java/org/elasticsearch/painless/lookup/PainlessClass.java, +    public final Map<String, PainlessField> staticFields;, +    public final Map<String, PainlessField> fields;, +    public final Map<String, MethodHandle> getterMethodHandles;, +    public final Map<String, MethodHandle> setterMethodHandles;, +    PainlessClass(Map<String, PainlessMethod> constructors,, +            Map<String, PainlessMethod> staticMethods, Map<String, PainlessMethod> methods,]