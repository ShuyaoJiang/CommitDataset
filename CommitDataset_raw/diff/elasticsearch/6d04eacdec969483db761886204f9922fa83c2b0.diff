[+++ b/plugin/build.gradle, +  keystoreSetting 'es.bootstrap.passwd.elastic', 'x-pack-test-password', +  setupCommand 'setupTestUser', 'bin/x-pack/users', 'useradd', 'x_pack_rest_user', '-p', 'x-pack-test-password', '-r', 'superuser', +, +                  Base64.getEncoder().encodeToString("x_pack_rest_user:x-pack-test-password".getBytes(StandardCharsets.UTF_8)));, +  keystoreSetting 'es.bootstrap.passwd.elastic', 'password', +++ b/plugin/build.gradle, +  keystoreSetting 'es.bootstrap.passwd.elastic', 'x-pack-test-password', +  setupCommand 'setupTestUser', 'bin/x-pack/users', 'useradd', 'x_pack_rest_user', '-p', 'x-pack-test-password', '-r', 'superuser', +, +                  Base64.getEncoder().encodeToString("x_pack_rest_user:x-pack-test-password".getBytes(StandardCharsets.UTF_8)));, +  keystoreSetting 'es.bootstrap.passwd.elastic', 'password', +++ b/plugin/src/main/java/org/elasticsearch/xpack/security/authc/AuthenticationService.java, +                        }));, +    abstract static class AuditableRequest {, +        AuditableRequest(AuditTrail auditTrail, AuthenticationFailureHandler failureHandler, ThreadContext threadContext) {, +            super(auditTrail, failureHandler, threadContext);, +            super(auditTrail, failureHandler, threadContext);, +++ b/plugin/build.gradle, +  keystoreSetting 'es.bootstrap.passwd.elastic', 'x-pack-test-password', +  setupCommand 'setupTestUser', 'bin/x-pack/users', 'useradd', 'x_pack_rest_user', '-p', 'x-pack-test-password', '-r', 'superuser', +, +                  Base64.getEncoder().encodeToString("x_pack_rest_user:x-pack-test-password".getBytes(StandardCharsets.UTF_8)));, +  keystoreSetting 'es.bootstrap.passwd.elastic', 'password', +++ b/plugin/src/main/java/org/elasticsearch/xpack/security/authc/AuthenticationService.java, +                        }));, +    abstract static class AuditableRequest {, +        AuditableRequest(AuditTrail auditTrail, AuthenticationFailureHandler failureHandler, ThreadContext threadContext) {, +            super(auditTrail, failureHandler, threadContext);, +            super(auditTrail, failureHandler, threadContext);, +++ /dev/null, +++ b/plugin/build.gradle, +  keystoreSetting 'es.bootstrap.passwd.elastic', 'x-pack-test-password', +  setupCommand 'setupTestUser', 'bin/x-pack/users', 'useradd', 'x_pack_rest_user', '-p', 'x-pack-test-password', '-r', 'superuser', +, +                  Base64.getEncoder().encodeToString("x_pack_rest_user:x-pack-test-password".getBytes(StandardCharsets.UTF_8)));, +  keystoreSetting 'es.bootstrap.passwd.elastic', 'password', +++ b/plugin/src/main/java/org/elasticsearch/xpack/security/authc/AuthenticationService.java, +                        }));, +    abstract static class AuditableRequest {, +        AuditableRequest(AuditTrail auditTrail, AuthenticationFailureHandler failureHandler, ThreadContext threadContext) {, +            super(auditTrail, failureHandler, threadContext);, +            super(auditTrail, failureHandler, threadContext);, +++ /dev/null, +++ b/plugin/src/main/java/org/elasticsearch/xpack/security/authc/Realm.java, +    public abstract void authenticate(AuthenticationToken token, ActionListener<AuthenticationResult> listener);, +++ b/plugin/build.gradle, +  keystoreSetting 'es.bootstrap.passwd.elastic', 'x-pack-test-password', +  setupCommand 'setupTestUser', 'bin/x-pack/users', 'useradd', 'x_pack_rest_user', '-p', 'x-pack-test-password', '-r', 'superuser', +, +                  Base64.getEncoder().encodeToString("x_pack_rest_user:x-pack-test-password".getBytes(StandardCharsets.UTF_8)));, +  keystoreSetting 'es.bootstrap.passwd.elastic', 'password', +++ b/plugin/src/main/java/org/elasticsearch/xpack/security/authc/AuthenticationService.java, +                        }));, +    abstract static class AuditableRequest {, +        AuditableRequest(AuditTrail auditTrail, AuthenticationFailureHandler failureHandler, ThreadContext threadContext) {, +            super(auditTrail, failureHandler, threadContext);, +            super(auditTrail, failureHandler, threadContext);, +++ /dev/null, +++ b/plugin/src/main/java/org/elasticsearch/xpack/security/authc/Realm.java, +    public abstract void authenticate(AuthenticationToken token, ActionListener<AuthenticationResult> listener);, +++ b/plugin/src/main/java/org/elasticsearch/xpack/security/authc/esnative/NativeRealm.java, +    protected void doAuthenticate(UsernamePasswordToken token, ActionListener<AuthenticationResult> listener) {, +++ b/plugin/build.gradle, +  keystoreSetting 'es.bootstrap.passwd.elastic', 'x-pack-test-password', +  setupCommand 'setupTestUser', 'bin/x-pack/users', 'useradd', 'x_pack_rest_user', '-p', 'x-pack-test-password', '-r', 'superuser', +, +                  Base64.getEncoder().encodeToString("x_pack_rest_user:x-pack-test-password".getBytes(StandardCharsets.UTF_8)));, +  keystoreSetting 'es.bootstrap.passwd.elastic', 'password', +++ b/plugin/src/main/java/org/elasticsearch/xpack/security/authc/AuthenticationService.java, +                        }));, +    abstract static class AuditableRequest {, +        AuditableRequest(AuditTrail auditTrail, AuthenticationFailureHandler failureHandler, ThreadContext threadContext) {, +            super(auditTrail, failureHandler, threadContext);, +            super(auditTrail, failureHandler, threadContext);, +++ /dev/null, +++ b/plugin/src/main/java/org/elasticsearch/xpack/security/authc/Realm.java, +    public abstract void authenticate(AuthenticationToken token, ActionListener<AuthenticationResult> listener);, +++ b/plugin/src/main/java/org/elasticsearch/xpack/security/authc/esnative/NativeRealm.java, +    protected void doAuthenticate(UsernamePasswordToken token, ActionListener<AuthenticationResult> listener) {, +++ b/plugin/src/main/java/org/elasticsearch/xpack/security/authc/esnative/ReservedRealm.java, +import org.elasticsearch.xpack.security.authc.AuthenticationResult;, +    protected void doAuthenticate(UsernamePasswordToken token, ActionListener<AuthenticationResult> listener) {, +                        if (userInfo.passwordHash != EMPTY_PASSWORD_HASH) {, +                return new ElasticUser(userInfo.enabled);, +                users.add(new ElasticUser(userInfo == null || userInfo.enabled));, +++ b/plugin/build.gradle, +  keystoreSetting 'es.bootstrap.passwd.elastic', 'x-pack-test-password', +  setupCommand 'setupTestUser', 'bin/x-pack/users', 'useradd', 'x_pack_rest_user', '-p', 'x-pack-test-password', '-r', 'superuser', +, +                  Base64.getEncoder().encodeToString("x_pack_rest_user:x-pack-test-password".getBytes(StandardCharsets.UTF_8)));, +  keystoreSetting 'es.bootstrap.passwd.elastic', 'password', +++ b/plugin/src/main/java/org/elasticsearch/xpack/security/authc/AuthenticationService.java, +                        }));, +    abstract static class AuditableRequest {, +        AuditableRequest(AuditTrail auditTrail, AuthenticationFailureHandler failureHandler, ThreadContext threadContext) {, +            super(auditTrail, failureHandler, threadContext);, +            super(auditTrail, failureHandler, threadContext);, +++ /dev/null, +++ b/plugin/src/main/java/org/elasticsearch/xpack/security/authc/Realm.java]