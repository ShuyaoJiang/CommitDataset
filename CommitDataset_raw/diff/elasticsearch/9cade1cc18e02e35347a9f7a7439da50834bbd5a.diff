[+++ b/TESTING.asciidoc, +gradle :qa:vagrant:vagrantCheckVersion, +cd $BATS_ARCHIVES, +sudo -E bats $BATS_TESTS/*rpm*.bats, +gradle vagrantSetUp, +cd $BATS_ARCHIVES, +sudo -E bats $BATS_TESTS/*.bats, +-------------------------------------------------, +, +Note: Starting vagrant VM outside of the elasticsearch folder requires to, +indicates the folder that contains the Vagrantfile using the VAGRANT_CWD, +environment variable:, +, +-------------------------------------------------, +gradle vagrantSetUp, +VAGRANT_CWD=/path/to/elasticsearch vagrant up centos-7 --provider virtualbox, +++ b/TESTING.asciidoc, +gradle :qa:vagrant:vagrantCheckVersion, +cd $BATS_ARCHIVES, +sudo -E bats $BATS_TESTS/*rpm*.bats, +gradle vagrantSetUp, +cd $BATS_ARCHIVES, +sudo -E bats $BATS_TESTS/*.bats, +-------------------------------------------------, +, +Note: Starting vagrant VM outside of the elasticsearch folder requires to, +indicates the folder that contains the Vagrantfile using the VAGRANT_CWD, +environment variable:, +, +-------------------------------------------------, +gradle vagrantSetUp, +VAGRANT_CWD=/path/to/elasticsearch vagrant up centos-7 --provider virtualbox, +++ b/Vagrantfile, +  # Expose project directory, +  PROJECT_DIR = ENV['VAGRANT_PROJECT_DIR'] || Dir.pwd, +  config.vm.synced_folder PROJECT_DIR, "/project", +export BATS=/project/build/bats, +export BATS_UTILS=/project/build/bats/utils, +export BATS_TESTS=/project/build/bats/tests, +export BATS_ARCHIVES=/project/build/bats/archives, +++ b/TESTING.asciidoc, +gradle :qa:vagrant:vagrantCheckVersion, +cd $BATS_ARCHIVES, +sudo -E bats $BATS_TESTS/*rpm*.bats, +gradle vagrantSetUp, +cd $BATS_ARCHIVES, +sudo -E bats $BATS_TESTS/*.bats, +-------------------------------------------------, +, +Note: Starting vagrant VM outside of the elasticsearch folder requires to, +indicates the folder that contains the Vagrantfile using the VAGRANT_CWD, +environment variable:, +, +-------------------------------------------------, +gradle vagrantSetUp, +VAGRANT_CWD=/path/to/elasticsearch vagrant up centos-7 --provider virtualbox, +++ b/Vagrantfile, +  # Expose project directory, +  PROJECT_DIR = ENV['VAGRANT_PROJECT_DIR'] || Dir.pwd, +  config.vm.synced_folder PROJECT_DIR, "/project", +export BATS=/project/build/bats, +export BATS_UTILS=/project/build/bats/utils, +export BATS_TESTS=/project/build/bats/tests, +export BATS_ARCHIVES=/project/build/bats/archives, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/vagrant/BatsOverVagrantTask.groovy, +++ b/TESTING.asciidoc, +gradle :qa:vagrant:vagrantCheckVersion, +cd $BATS_ARCHIVES, +sudo -E bats $BATS_TESTS/*rpm*.bats, +gradle vagrantSetUp, +cd $BATS_ARCHIVES, +sudo -E bats $BATS_TESTS/*.bats, +-------------------------------------------------, +, +Note: Starting vagrant VM outside of the elasticsearch folder requires to, +indicates the folder that contains the Vagrantfile using the VAGRANT_CWD, +environment variable:, +, +-------------------------------------------------, +gradle vagrantSetUp, +VAGRANT_CWD=/path/to/elasticsearch vagrant up centos-7 --provider virtualbox, +++ b/Vagrantfile, +  # Expose project directory, +  PROJECT_DIR = ENV['VAGRANT_PROJECT_DIR'] || Dir.pwd, +  config.vm.synced_folder PROJECT_DIR, "/project", +export BATS=/project/build/bats, +export BATS_UTILS=/project/build/bats/utils, +export BATS_TESTS=/project/build/bats/tests, +export BATS_ARCHIVES=/project/build/bats/archives, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/vagrant/BatsOverVagrantTask.groovy, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/vagrant/VagrantCommandTask.groovy, +import org.gradle.api.tasks.Exec, +public class VagrantCommandTask extends Exec {, +    @Input, +    Map<String, String> environmentVars, +, +, +            if (environmentVars != null) {, +                environment environmentVars, +            }]