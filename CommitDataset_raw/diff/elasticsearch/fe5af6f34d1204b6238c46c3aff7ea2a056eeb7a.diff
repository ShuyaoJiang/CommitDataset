[+++ b/src/main/java/org/elasticsearch/action/search/ShardSearchFailure.java, +        return "shard [" + (shardTarget == null ? "_na" : shardTarget) + "], reason [" + reason + "], cause [" + (cause == null ? "_na" : ExceptionsHelper.stackTrace(cause)) + "]";, +++ b/src/main/java/org/elasticsearch/action/search/ShardSearchFailure.java, +        return "shard [" + (shardTarget == null ? "_na" : shardTarget) + "], reason [" + reason + "], cause [" + (cause == null ? "_na" : ExceptionsHelper.stackTrace(cause)) + "]";, +++ b/src/test/java/org/elasticsearch/script/GroovySecurityTests.java, +        assertSuccess("def bar = doc['bar'].value; if (bar == null) { return 5; }");]