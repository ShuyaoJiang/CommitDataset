[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportRefreshAction.java, +import org.elasticsearch.ExceptionsHelper;, +import org.elasticsearch.index.shard.IllegalIndexShardStateException;, +    @Override protected boolean ignoreException(Throwable t) {, +        Throwable actual = ExceptionsHelper.unwrapCause(t);, +        if (actual instanceof IllegalIndexShardStateException) {, +            return true;, +        }, +        return false;, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportRefreshAction.java, +import org.elasticsearch.ExceptionsHelper;, +import org.elasticsearch.index.shard.IllegalIndexShardStateException;, +    @Override protected boolean ignoreException(Throwable t) {, +        Throwable actual = ExceptionsHelper.unwrapCause(t);, +        if (actual instanceof IllegalIndexShardStateException) {, +            return true;, +        }, +        return false;, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastOperationAction.java, +    protected boolean ignoreException(Throwable t) {, +        return false;, +    }, +, +                if (t != null) {, +                        if (!ignoreException(t)) {, +                }, +                        if (!ignoreException(t)) {, +                }, +                    } else {, +                        if (ignoreException(t)) {, +                            t = null;, +                        } else {, +                            if (!(t instanceof BroadcastShardOperationFailedException)) {, +                        }, +                    }]