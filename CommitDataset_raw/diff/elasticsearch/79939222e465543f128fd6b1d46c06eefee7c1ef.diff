[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/range/InternalRangeFacet.java, +            entry.totalCount = in.readVLong();, +            entry.min = in.readDouble();, +            entry.max = in.readDouble();, +            out.writeVLong(entry.totalCount);, +            out.writeDouble(entry.min);, +            out.writeDouble(entry.max);, +        static final XContentBuilderString TOTAL_COUNT = new XContentBuilderString("total_count");, +        static final XContentBuilderString MIN = new XContentBuilderString("min");, +        static final XContentBuilderString MAX = new XContentBuilderString("max");, +            builder.field(Fields.MIN, entry.min());, +            builder.field(Fields.MAX, entry.max());, +            builder.field(Fields.TOTAL_COUNT, entry.totalCount());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/range/InternalRangeFacet.java, +            entry.totalCount = in.readVLong();, +            entry.min = in.readDouble();, +            entry.max = in.readDouble();, +            out.writeVLong(entry.totalCount);, +            out.writeDouble(entry.min);, +            out.writeDouble(entry.max);, +        static final XContentBuilderString TOTAL_COUNT = new XContentBuilderString("total_count");, +        static final XContentBuilderString MIN = new XContentBuilderString("min");, +        static final XContentBuilderString MAX = new XContentBuilderString("max");, +            builder.field(Fields.MIN, entry.min());, +            builder.field(Fields.MAX, entry.max());, +            builder.field(Fields.TOTAL_COUNT, entry.totalCount());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/range/KeyValueRangeFacetCollector.java, +                        entry.totalCount += valuesValues.length;, +                            if (valueValue < entry.min) {, +                                entry.min = valueValue;, +                            }, +                            if (valueValue > entry.max) {, +                                entry.max = valueValue;, +                            }, +                        entry.totalCount++;, +                        if (valueValue < entry.min) {, +                            entry.min = valueValue;, +                        }, +                        if (valueValue > entry.max) {, +                            entry.max = valueValue;, +                        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/range/InternalRangeFacet.java, +            entry.totalCount = in.readVLong();, +            entry.min = in.readDouble();, +            entry.max = in.readDouble();, +            out.writeVLong(entry.totalCount);, +            out.writeDouble(entry.min);, +            out.writeDouble(entry.max);, +        static final XContentBuilderString TOTAL_COUNT = new XContentBuilderString("total_count");, +        static final XContentBuilderString MIN = new XContentBuilderString("min");, +        static final XContentBuilderString MAX = new XContentBuilderString("max");, +            builder.field(Fields.MIN, entry.min());, +            builder.field(Fields.MAX, entry.max());, +            builder.field(Fields.TOTAL_COUNT, entry.totalCount());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/range/KeyValueRangeFacetCollector.java, +                        entry.totalCount += valuesValues.length;, +                            if (valueValue < entry.min) {, +                                entry.min = valueValue;, +                            }, +                            if (valueValue > entry.max) {, +                                entry.max = valueValue;, +                            }, +                        entry.totalCount++;, +                        if (valueValue < entry.min) {, +                            entry.min = valueValue;, +                        }, +                        if (valueValue > entry.max) {, +                            entry.max = valueValue;, +                        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/range/RangeFacet.java, +        long totalCount;, +        double min = Double.MAX_VALUE;, +        double max = Double.MIN_VALUE;, +        public long totalCount() {, +            return this.totalCount;, +        }, +, +        public long getTotalCount() {, +            return this.totalCount;, +        }, +, +            return total / totalCount;, +, +        public double min() {, +            return this.min;, +        }, +, +        public double getMin() {, +            return this.min;, +        }, +, +        public double max() {, +            return this.max;, +        }, +, +        public double getMax() {, +            return this.max;, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facet/range/InternalRangeFacet.java, +            entry.totalCount = in.readVLong();]