[+++ b/src/test/java/org/elasticsearch/search/rescore/QueryRescorerTests.java, +        client().prepareIndex("test", "type1", "3").setSource("field1", "massachusetts").execute().actionGet();, +        client().prepareIndex("test", "type1", "1").setSource("field1", "lexington massachusetts avenue").execute().actionGet();, +        client().prepareIndex("test", "type1", "2").setSource("field1", "lexington avenue boston massachusetts road").execute().actionGet();, +                .setQuery(QueryBuilders.matchQuery("field1", "massachusetts")), +        assertThat(searchResponse.getHits().hits().length, equalTo(4));, +        assertHitCount(searchResponse, 4);, +        assertFirstHit(searchResponse, hasId("3"));, +        assertThirdHit(searchResponse, hasId("1"));, +        assertFourthHit(searchResponse, hasId("2"));, +                .setQuery(QueryBuilders.matchQuery("field1", "massachusetts")), +        assertThat(searchResponse.getHits().hits().length, equalTo(4));, +        assertHitCount(searchResponse, 4);, +        assertSecondHit(searchResponse, hasId("3"));, +        assertThirdHit(searchResponse, hasId("1"));, +        assertFourthHit(searchResponse, hasId("2"));, +                .setQuery(QueryBuilders.matchQuery("field1", "massachusetts")), +        assertThat(searchResponse.getHits().hits().length, equalTo(4));, +        assertHitCount(searchResponse, 4);, +        assertFirstHit(searchResponse, hasId("6"));, +        assertSecondHit(searchResponse, hasId("1"));, +        assertThirdHit(searchResponse, hasId("3"));, +        assertFourthHit(searchResponse, hasId("2"));, +        client().prepareIndex("test", "type1", "3").setSource("field1", "massachusetts").execute().actionGet();, +        client().prepareIndex("test", "type1", "1").setSource("field1", "lexington massachusetts avenue").execute().actionGet();, +        client().prepareIndex("test", "type1", "2").setSource("field1", "lexington avenue boston massachusetts road").execute().actionGet();, +        assertThat(searchResponse.getHits().hits().length, equalTo(4));, +        assertHitCount(searchResponse, 4);, +        assertFirstHit(searchResponse, hasId("3"));, +        assertThirdHit(searchResponse, hasId("1"));, +        assertFourthHit(searchResponse, hasId("2"));, +        // 6 and 1 got worse, and then the hit (2) outside the rescore window were sorted ahead:, +        assertFirstHit(searchResponse, hasId("3"));, +        assertSecondHit(searchResponse, hasId("2"));, +        assertThirdHit(searchResponse, hasId("6"));, +        assertFourthHit(searchResponse, hasId("1"));]