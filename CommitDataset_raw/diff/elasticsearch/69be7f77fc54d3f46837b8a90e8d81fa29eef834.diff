[+++ b/core/src/main/java/org/elasticsearch/search/suggest/phrase/DirectCandidateGenerator.java, +                        // We should not use frequency(term) here because it will analyze the term again, +                        // If preFilter and postFilter are the same analyzer it would fail. , +                        long freq = internalFrequency(term);, +++ b/core/src/main/java/org/elasticsearch/search/suggest/phrase/DirectCandidateGenerator.java, +                        // We should not use frequency(term) here because it will analyze the term again, +                        // If preFilter and postFilter are the same analyzer it would fail. , +                        long freq = internalFrequency(term);, +++ b/core/src/test/java/org/elasticsearch/search/suggest/phrase/NoisyChannelSpellCheckerTests.java, +        // Test a special case where one of the suggest term is unchanged by the postFilter, 'II' here is unchanged by the reverse analyzer.  , +        corrections = suggester.getCorrections(wrapper, new BytesRef("Quazar II"), generator, 1, 1, ir, "body", wordScorer, 1, 2).corrections;, +        assertThat(corrections.length, equalTo(1));, +        assertThat(corrections[0].join(new BytesRef(" ")).utf8ToString(), equalTo("quasar ii"));]