[+++ b/elasticsearch/qa/messy-test-watcher-with-groovy/src/test/java/org/elasticsearch/messy/tests/GroovyScriptConditionIT.java, +                                .subAggregation(AggregationBuilders.terms("status").field("status.keyword").size(3)));, +++ b/elasticsearch/qa/messy-test-watcher-with-groovy/src/test/java/org/elasticsearch/messy/tests/GroovyScriptConditionIT.java, +                                .subAggregation(AggregationBuilders.terms("status").field("status.keyword").size(3)));, +++ b/elasticsearch/x-pack/graph/src/test/java/org/elasticsearch/graph/test/GraphTests.java, +import static org.elasticsearch.test.hamcrest.ElasticsearchAssertions.assertAcked;, +        assertAcked(client().admin().indices().prepareCreate("test"), +                .setSettings(SETTING_NUMBER_OF_SHARDS, 2, SETTING_NUMBER_OF_REPLICAS, 0), +                .addMapping("type",, +                        "decade", "type=keyword",, +                        "people", "type=keyword",, +                        "description", "type=text,fielddata=true"));, +++ b/elasticsearch/qa/messy-test-watcher-with-groovy/src/test/java/org/elasticsearch/messy/tests/GroovyScriptConditionIT.java, +                                .subAggregation(AggregationBuilders.terms("status").field("status.keyword").size(3)));, +++ b/elasticsearch/x-pack/graph/src/test/java/org/elasticsearch/graph/test/GraphTests.java, +import static org.elasticsearch.test.hamcrest.ElasticsearchAssertions.assertAcked;, +        assertAcked(client().admin().indices().prepareCreate("test"), +                .setSettings(SETTING_NUMBER_OF_SHARDS, 2, SETTING_NUMBER_OF_REPLICAS, 0), +                .addMapping("type",, +                        "decade", "type=keyword",, +                        "people", "type=keyword",, +                        "description", "type=text,fielddata=true"));, +++ b/elasticsearch/x-pack/shield/src/test/java/org/elasticsearch/integration/DocumentLevelSecurityTests.java, +                        .addMapping("type1", "field1", "type=text", "field2", "type=text,fielddata=true", "field3", "type=text"), +                        .addMapping("type2", "_parent", "type=type1", "field3", "type=text,fielddata=true"), +++ b/elasticsearch/qa/messy-test-watcher-with-groovy/src/test/java/org/elasticsearch/messy/tests/GroovyScriptConditionIT.java, +                                .subAggregation(AggregationBuilders.terms("status").field("status.keyword").size(3)));, +++ b/elasticsearch/x-pack/graph/src/test/java/org/elasticsearch/graph/test/GraphTests.java, +import static org.elasticsearch.test.hamcrest.ElasticsearchAssertions.assertAcked;, +        assertAcked(client().admin().indices().prepareCreate("test"), +                .setSettings(SETTING_NUMBER_OF_SHARDS, 2, SETTING_NUMBER_OF_REPLICAS, 0), +                .addMapping("type",, +                        "decade", "type=keyword",, +                        "people", "type=keyword",, +                        "description", "type=text,fielddata=true"));, +++ b/elasticsearch/x-pack/shield/src/test/java/org/elasticsearch/integration/DocumentLevelSecurityTests.java, +                        .addMapping("type1", "field1", "type=text", "field2", "type=text,fielddata=true", "field3", "type=text"), +                        .addMapping("type2", "_parent", "type=type1", "field3", "type=text,fielddata=true"), +++ b/elasticsearch/x-pack/shield/src/test/java/org/elasticsearch/integration/FieldLevelSecurityTests.java, +                        .addMapping("type1", "field1", "type=text,fielddata=true", "field2", "type=text,fielddata=true"), +++ b/elasticsearch/qa/messy-test-watcher-with-groovy/src/test/java/org/elasticsearch/messy/tests/GroovyScriptConditionIT.java, +                                .subAggregation(AggregationBuilders.terms("status").field("status.keyword").size(3)));, +++ b/elasticsearch/x-pack/graph/src/test/java/org/elasticsearch/graph/test/GraphTests.java, +import static org.elasticsearch.test.hamcrest.ElasticsearchAssertions.assertAcked;, +        assertAcked(client().admin().indices().prepareCreate("test"), +                .setSettings(SETTING_NUMBER_OF_SHARDS, 2, SETTING_NUMBER_OF_REPLICAS, 0), +                .addMapping("type",, +                        "decade", "type=keyword",, +                        "people", "type=keyword",, +                        "description", "type=text,fielddata=true"));, +++ b/elasticsearch/x-pack/shield/src/test/java/org/elasticsearch/integration/DocumentLevelSecurityTests.java, +                        .addMapping("type1", "field1", "type=text", "field2", "type=text,fielddata=true", "field3", "type=text"), +                        .addMapping("type2", "_parent", "type=type1", "field3", "type=text,fielddata=true"), +++ b/elasticsearch/x-pack/shield/src/test/java/org/elasticsearch/integration/FieldLevelSecurityTests.java, +                        .addMapping("type1", "field1", "type=text,fielddata=true", "field2", "type=text,fielddata=true"), +++ b/elasticsearch/x-pack/watcher/src/test/java/org/elasticsearch/watcher/actions/index/IndexActionTests.java, +                    .addMapping("test-type", "_timestamp", "enabled=true", "foo", "type=keyword"), +++ b/elasticsearch/qa/messy-test-watcher-with-groovy/src/test/java/org/elasticsearch/messy/tests/GroovyScriptConditionIT.java, +                                .subAggregation(AggregationBuilders.terms("status").field("status.keyword").size(3)));, +++ b/elasticsearch/x-pack/graph/src/test/java/org/elasticsearch/graph/test/GraphTests.java, +import static org.elasticsearch.test.hamcrest.ElasticsearchAssertions.assertAcked;, +        assertAcked(client().admin().indices().prepareCreate("test"), +                .setSettings(SETTING_NUMBER_OF_SHARDS, 2, SETTING_NUMBER_OF_REPLICAS, 0), +                .addMapping("type",, +                        "decade", "type=keyword",, +                        "people", "type=keyword",, +                        "description", "type=text,fielddata=true"));, +++ b/elasticsearch/x-pack/shield/src/test/java/org/elasticsearch/integration/DocumentLevelSecurityTests.java, +                        .addMapping("type1", "field1", "type=text", "field2", "type=text,fielddata=true", "field3", "type=text"), +                        .addMapping("type2", "_parent", "type=type1", "field3", "type=text,fielddata=true"), +++ b/elasticsearch/x-pack/shield/src/test/java/org/elasticsearch/integration/FieldLevelSecurityTests.java, +                        .addMapping("type1", "field1", "type=text,fielddata=true", "field2", "type=text,fielddata=true"), +++ b/elasticsearch/x-pack/watcher/src/test/java/org/elasticsearch/watcher/actions/index/IndexActionTests.java, +                    .addMapping("test-type", "_timestamp", "enabled=true", "foo", "type=keyword"), +++ b/elasticsearch/x-pack/watcher/src/test/java/org/elasticsearch/watcher/condition/compare/array/ArrayCompareConditionSearchTests.java, +                .addAggregation(AggregationBuilders.terms("top_tweeters").field("user.screen_name.keyword").size(3)).get();, +                .addAggregation(AggregationBuilders.terms("top_tweeters").field("user.screen_name.keyword").size(3)).get();]