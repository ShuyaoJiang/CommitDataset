[+++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/core/src/main/java/org/elasticsearch/search/SearchModule.java, +     * @param bucketReader reads the {@link InternalAggregation} that represents a bucket in this aggregation from a stream, +        registerPipelineAggregation(DerivativePipelineAggregationBuilder::new, DerivativePipelineAggregator::new, InternalDerivative::new,, +                DerivativePipelineAggregationBuilder::parse, DerivativePipelineAggregationBuilder.AGGREGATION_NAME_FIELD);, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/core/src/main/java/org/elasticsearch/search/SearchModule.java, +     * @param bucketReader reads the {@link InternalAggregation} that represents a bucket in this aggregation from a stream, +        registerPipelineAggregation(DerivativePipelineAggregationBuilder::new, DerivativePipelineAggregator::new, InternalDerivative::new,, +                DerivativePipelineAggregationBuilder::parse, DerivativePipelineAggregationBuilder.AGGREGATION_NAME_FIELD);, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/InternalAggregation.java, +         *          (see {@link AggregationStreams#registerStream(AggregationStreams.Stream, BytesReference...)})., +        out.writeString(name);, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/core/src/main/java/org/elasticsearch/search/SearchModule.java, +     * @param bucketReader reads the {@link InternalAggregation} that represents a bucket in this aggregation from a stream, +        registerPipelineAggregation(DerivativePipelineAggregationBuilder::new, DerivativePipelineAggregator::new, InternalDerivative::new,, +                DerivativePipelineAggregationBuilder::parse, DerivativePipelineAggregationBuilder.AGGREGATION_NAME_FIELD);, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/InternalAggregation.java, +         *          (see {@link AggregationStreams#registerStream(AggregationStreams.Stream, BytesReference...)})., +        out.writeString(name);, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/metrics/InternalMetricsAggregation.java, +    protected InternalMetricsAggregation() {} // NORELEASE remove when we remove streamable, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/core/src/main/java/org/elasticsearch/search/SearchModule.java, +     * @param bucketReader reads the {@link InternalAggregation} that represents a bucket in this aggregation from a stream, +        registerPipelineAggregation(DerivativePipelineAggregationBuilder::new, DerivativePipelineAggregator::new, InternalDerivative::new,, +                DerivativePipelineAggregationBuilder::parse, DerivativePipelineAggregationBuilder.AGGREGATION_NAME_FIELD);, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/InternalAggregation.java, +         *          (see {@link AggregationStreams#registerStream(AggregationStreams.Stream, BytesReference...)})., +        out.writeString(name);, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/metrics/InternalMetricsAggregation.java, +    protected InternalMetricsAggregation() {} // NORELEASE remove when we remove streamable, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/metrics/InternalNumericMetricsAggregation.java, +        protected SingleValue() {} // NORELEASE remove when we remove Streamable, +    private InternalNumericMetricsAggregation() {} // NORELEASE remove when we remove Streamable, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/core/src/main/java/org/elasticsearch/search/SearchModule.java, +     * @param bucketReader reads the {@link InternalAggregation} that represents a bucket in this aggregation from a stream, +        registerPipelineAggregation(DerivativePipelineAggregationBuilder::new, DerivativePipelineAggregator::new, InternalDerivative::new,, +                DerivativePipelineAggregationBuilder::parse, DerivativePipelineAggregationBuilder.AGGREGATION_NAME_FIELD);, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/InternalAggregation.java, +         *          (see {@link AggregationStreams#registerStream(AggregationStreams.Stream, BytesReference...)})., +        out.writeString(name);, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/metrics/InternalMetricsAggregation.java, +    protected InternalMetricsAggregation() {} // NORELEASE remove when we remove streamable, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/metrics/InternalNumericMetricsAggregation.java, +        protected SingleValue() {} // NORELEASE remove when we remove Streamable, +    private InternalNumericMetricsAggregation() {} // NORELEASE remove when we remove Streamable, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/pipeline/InternalSimpleValue.java, +    protected InternalSimpleValue() { // NORELEASE remove and make value final if possible, +    /**, +     * Read from a stream., +     */, +    public InternalSimpleValue(StreamInput in) throws IOException {, +        super(in);, +        format = in.readNamedWriteable(DocValueFormat.class);, +        value = in.readDouble();, +    }, +, +    @Override, +    protected void doReadFrom(StreamInput in) throws IOException {, +        format = in.readNamedWriteable(DocValueFormat.class);, +        value = in.readDouble();, +    }, +, +    @Override, +    protected void doWriteTo(StreamOutput out) throws IOException {, +        out.writeNamedWriteable(format);, +        out.writeDouble(value);, +    }, +, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/core/src/main/java/org/elasticsearch/search/SearchModule.java, +     * @param bucketReader reads the {@link InternalAggregation} that represents a bucket in this aggregation from a stream, +        registerPipelineAggregation(DerivativePipelineAggregationBuilder::new, DerivativePipelineAggregator::new, InternalDerivative::new,, +                DerivativePipelineAggregationBuilder::parse, DerivativePipelineAggregationBuilder.AGGREGATION_NAME_FIELD);, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/InternalAggregation.java, +         *          (see {@link AggregationStreams#registerStream(AggregationStreams.Stream, BytesReference...)})., +        out.writeString(name);, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/metrics/InternalMetricsAggregation.java, +    protected InternalMetricsAggregation() {} // NORELEASE remove when we remove streamable, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/metrics/InternalNumericMetricsAggregation.java, +        protected SingleValue() {} // NORELEASE remove when we remove Streamable, +    private InternalNumericMetricsAggregation() {} // NORELEASE remove when we remove Streamable, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/pipeline/InternalSimpleValue.java, +    protected InternalSimpleValue() { // NORELEASE remove and make value final if possible, +    /**, +     * Read from a stream., +     */, +    public InternalSimpleValue(StreamInput in) throws IOException {, +        super(in);, +        format = in.readNamedWriteable(DocValueFormat.class);, +        value = in.readDouble();, +    }, +, +    @Override, +    protected void doReadFrom(StreamInput in) throws IOException {, +        format = in.readNamedWriteable(DocValueFormat.class);]