[+++ b/src/test/java/org/elasticsearch/test/ElasticsearchBackwardsCompatIntegrationTest.java, +import org.elasticsearch.indices.recovery.RecoverySettings;, +import org.elasticsearch.transport.Transport;, +        ImmutableSettings.Builder builder = ImmutableSettings.builder().put(requiredSettings()), +                .put(TransportModule.TRANSPORT_SERVICE_TYPE_KEY, TransportService.class.getName());, +        if (compatibilityVersion().before(Version.V_1_3_2)) {, +            // if we test against nodes before 1.3.2 we disable all the compression due to a known bug, +            // see #7210, +            builder.put(Transport.TransportSettings.TRANSPORT_TCP_COMPRESS, false), +                   .put(RecoverySettings.INDICES_RECOVERY_COMPRESS, false);, +        }, +        return builder.build();, +++ b/src/test/java/org/elasticsearch/test/ElasticsearchBackwardsCompatIntegrationTest.java, +import org.elasticsearch.indices.recovery.RecoverySettings;, +import org.elasticsearch.transport.Transport;, +        ImmutableSettings.Builder builder = ImmutableSettings.builder().put(requiredSettings()), +                .put(TransportModule.TRANSPORT_SERVICE_TYPE_KEY, TransportService.class.getName());, +        if (compatibilityVersion().before(Version.V_1_3_2)) {, +            // if we test against nodes before 1.3.2 we disable all the compression due to a known bug, +            // see #7210, +            builder.put(Transport.TransportSettings.TRANSPORT_TCP_COMPRESS, false), +                   .put(RecoverySettings.INDICES_RECOVERY_COMPRESS, false);, +        }, +        return builder.build();, +++ b/src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java, +, +, +        if (random.nextBoolean()) {, +            builder.put(RecoverySettings.INDICES_RECOVERY_COMPRESS, randomBoolean());, +        }, +, +        if (globalCompatibilityVersion().before(Version.V_1_3_2)) {, +            // if we test against nodes before 1.3.2 we disable all the compression due to a known bug, +            // see #7210, +            builder.put(RecoverySettings.INDICES_RECOVERY_COMPRESS, false);, +        }]