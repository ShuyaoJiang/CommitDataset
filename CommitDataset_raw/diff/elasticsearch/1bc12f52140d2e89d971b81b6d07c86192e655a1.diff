[+++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +import nebula.plugin.publishing.maven.MavenBasePublishPlugin, +        project.plugins.withType(MavenBasePublishPlugin.class).whenPluginAdded {, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +import nebula.plugin.publishing.maven.MavenBasePublishPlugin, +        project.plugins.withType(MavenBasePublishPlugin.class).whenPluginAdded {, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +import nebula.plugin.publishing.maven.MavenBasePublishPlugin, +import nebula.plugin.publishing.maven.MavenScmPlugin, +            if (project.path.startsWith(':modules:')) {, +                addPomGeneration(project), +    /**, +     * Adds the plugin jar and zip as publications., +     */, +    protected static void addPomGeneration(Project project) {, +        project.plugins.apply(MavenBasePublishPlugin.class), +        project.plugins.apply(MavenScmPlugin.class), +                nebula {, +                    pom.withXml {, +                        // overwrite the name/description in the pom nebula set up, +                        Node root = asNode(), +                        for (Node node : root.children()) {, +                            if (node.name() == 'name') {, +                                node.setValue(project.pluginProperties.extension.name), +                            } else if (node.name() == 'description') {, +                                node.setValue(project.pluginProperties.extension.description), +, +    }, +}, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +import nebula.plugin.publishing.maven.MavenBasePublishPlugin, +        project.plugins.withType(MavenBasePublishPlugin.class).whenPluginAdded {, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +import nebula.plugin.publishing.maven.MavenBasePublishPlugin, +import nebula.plugin.publishing.maven.MavenScmPlugin, +            if (project.path.startsWith(':modules:')) {, +                addPomGeneration(project), +    /**, +     * Adds the plugin jar and zip as publications., +     */, +    protected static void addPomGeneration(Project project) {, +        project.plugins.apply(MavenBasePublishPlugin.class), +        project.plugins.apply(MavenScmPlugin.class), +                nebula {, +                    pom.withXml {, +                        // overwrite the name/description in the pom nebula set up, +                        Node root = asNode(), +                        for (Node node : root.children()) {, +                            if (node.name() == 'name') {, +                                node.setValue(project.pluginProperties.extension.name), +                            } else if (node.name() == 'description') {, +                                node.setValue(project.pluginProperties.extension.description), +, +    }, +}, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginPropertiesExtension.groovy, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +import nebula.plugin.publishing.maven.MavenBasePublishPlugin, +        project.plugins.withType(MavenBasePublishPlugin.class).whenPluginAdded {, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +import nebula.plugin.publishing.maven.MavenBasePublishPlugin, +import nebula.plugin.publishing.maven.MavenScmPlugin, +            if (project.path.startsWith(':modules:')) {, +                addPomGeneration(project), +    /**, +     * Adds the plugin jar and zip as publications., +     */, +    protected static void addPomGeneration(Project project) {, +        project.plugins.apply(MavenBasePublishPlugin.class), +        project.plugins.apply(MavenScmPlugin.class), +                nebula {, +                    pom.withXml {, +                        // overwrite the name/description in the pom nebula set up, +                        Node root = asNode(), +                        for (Node node : root.children()) {, +                            if (node.name() == 'name') {, +                                node.setValue(project.pluginProperties.extension.name), +                            } else if (node.name() == 'description') {, +                                node.setValue(project.pluginProperties.extension.description), +, +    }, +}, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginPropertiesExtension.groovy, +++ b/docs/reference/ingest/ingest-node.asciidoc, +https://github.com/elastic/elasticsearch/tree/master/modules/ingest-common/src/main/resources/patterns[120 reusable patterns]., +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +import nebula.plugin.publishing.maven.MavenBasePublishPlugin, +        project.plugins.withType(MavenBasePublishPlugin.class).whenPluginAdded {, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +import nebula.plugin.publishing.maven.MavenBasePublishPlugin, +import nebula.plugin.publishing.maven.MavenScmPlugin, +            if (project.path.startsWith(':modules:')) {, +                addPomGeneration(project), +    /**, +     * Adds the plugin jar and zip as publications., +     */, +    protected static void addPomGeneration(Project project) {, +        project.plugins.apply(MavenBasePublishPlugin.class), +        project.plugins.apply(MavenScmPlugin.class), +                nebula {]