[+++ b/src/main/java/org/elasticsearch/index/engine/internal/InternalEngine.java, +        this.failEngineOnCorruption = indexSettings.getAsBoolean(INDEX_FAIL_ON_CORRUPTION, true);, +                logger.warn("corrupt file detected source: [{}] but [{}] is set to [{}]", t, source, INDEX_FAIL_ON_CORRUPTION, this.failEngineOnCorruption);, +                    logger.warn("corrupt file detected source: [merge] but [{}] is set to [{}]", e, INDEX_FAIL_ON_CORRUPTION, failEngineOnCorruption);, +    public static final String INDEX_FAIL_ON_CORRUPTION = "index.fail_on_corruption";, +            InternalEngine.this.failEngineOnCorruption = settings.getAsBoolean(INDEX_FAIL_ON_CORRUPTION, InternalEngine.this.failEngineOnCorruption);, +++ b/src/main/java/org/elasticsearch/index/engine/internal/InternalEngine.java, +        this.failEngineOnCorruption = indexSettings.getAsBoolean(INDEX_FAIL_ON_CORRUPTION, true);, +                logger.warn("corrupt file detected source: [{}] but [{}] is set to [{}]", t, source, INDEX_FAIL_ON_CORRUPTION, this.failEngineOnCorruption);, +                    logger.warn("corrupt file detected source: [merge] but [{}] is set to [{}]", e, INDEX_FAIL_ON_CORRUPTION, failEngineOnCorruption);, +    public static final String INDEX_FAIL_ON_CORRUPTION = "index.fail_on_corruption";, +            InternalEngine.this.failEngineOnCorruption = settings.getAsBoolean(INDEX_FAIL_ON_CORRUPTION, InternalEngine.this.failEngineOnCorruption);, +++ b/src/main/java/org/elasticsearch/index/settings/IndexDynamicSettingsModule.java, +        indexDynamicSettings.addDynamicSetting(InternalEngine.INDEX_FAIL_ON_CORRUPTION);, +++ b/src/main/java/org/elasticsearch/index/engine/internal/InternalEngine.java, +        this.failEngineOnCorruption = indexSettings.getAsBoolean(INDEX_FAIL_ON_CORRUPTION, true);, +                logger.warn("corrupt file detected source: [{}] but [{}] is set to [{}]", t, source, INDEX_FAIL_ON_CORRUPTION, this.failEngineOnCorruption);, +                    logger.warn("corrupt file detected source: [merge] but [{}] is set to [{}]", e, INDEX_FAIL_ON_CORRUPTION, failEngineOnCorruption);, +    public static final String INDEX_FAIL_ON_CORRUPTION = "index.fail_on_corruption";, +            InternalEngine.this.failEngineOnCorruption = settings.getAsBoolean(INDEX_FAIL_ON_CORRUPTION, InternalEngine.this.failEngineOnCorruption);, +++ b/src/main/java/org/elasticsearch/index/settings/IndexDynamicSettingsModule.java, +        indexDynamicSettings.addDynamicSetting(InternalEngine.INDEX_FAIL_ON_CORRUPTION);, +++ b/src/test/java/org/elasticsearch/index/engine/internal/InternalEngineTests.java, +                .put(InternalEngine.INDEX_FAIL_ON_CORRUPTION, randomBoolean()), +        final boolean failEngine = defaultSettings.getAsBoolean(InternalEngine.INDEX_FAIL_ON_CORRUPTION, false);, +++ b/src/main/java/org/elasticsearch/index/engine/internal/InternalEngine.java, +        this.failEngineOnCorruption = indexSettings.getAsBoolean(INDEX_FAIL_ON_CORRUPTION, true);, +                logger.warn("corrupt file detected source: [{}] but [{}] is set to [{}]", t, source, INDEX_FAIL_ON_CORRUPTION, this.failEngineOnCorruption);, +                    logger.warn("corrupt file detected source: [merge] but [{}] is set to [{}]", e, INDEX_FAIL_ON_CORRUPTION, failEngineOnCorruption);, +    public static final String INDEX_FAIL_ON_CORRUPTION = "index.fail_on_corruption";, +            InternalEngine.this.failEngineOnCorruption = settings.getAsBoolean(INDEX_FAIL_ON_CORRUPTION, InternalEngine.this.failEngineOnCorruption);, +++ b/src/main/java/org/elasticsearch/index/settings/IndexDynamicSettingsModule.java, +        indexDynamicSettings.addDynamicSetting(InternalEngine.INDEX_FAIL_ON_CORRUPTION);, +++ b/src/test/java/org/elasticsearch/index/engine/internal/InternalEngineTests.java, +                .put(InternalEngine.INDEX_FAIL_ON_CORRUPTION, randomBoolean()), +        final boolean failEngine = defaultSettings.getAsBoolean(InternalEngine.INDEX_FAIL_ON_CORRUPTION, false);, +++ b/src/test/java/org/elasticsearch/index/store/CorruptedFileTest.java, +        final boolean failOnCorruption = randomBoolean();, +                .put(InternalEngine.INDEX_FAIL_ON_CORRUPTION, failOnCorruption), +        if (failOnCorruption == false) { // test the dynamic setting, +            client().admin().indices().prepareUpdateSettings("test").setSettings(ImmutableSettings.builder(), +                    .put(InternalEngine.INDEX_FAIL_ON_CORRUPTION, true)).get();, +        }, +                .put(InternalEngine.INDEX_FAIL_ON_CORRUPTION, true), +                .put(InternalEngine.INDEX_FAIL_ON_CORRUPTION, true)]