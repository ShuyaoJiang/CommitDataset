[+++ b/core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramAggregationBuilder.java, +        ExtendedBounds extendedBounds = null;, +        if (this.extendedBounds != null) {, +            // parse any string bounds to longs, +            extendedBounds = this.extendedBounds.parseAndValidate(name, context.searchContext(), config.format());, +        }, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramAggregationBuilder.java, +        ExtendedBounds extendedBounds = null;, +        if (this.extendedBounds != null) {, +            // parse any string bounds to longs, +            extendedBounds = this.extendedBounds.parseAndValidate(name, context.searchContext(), config.format());, +        }, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramAggregatorFactory.java, +            roundedBounds = extendedBounds.round(rounding);]