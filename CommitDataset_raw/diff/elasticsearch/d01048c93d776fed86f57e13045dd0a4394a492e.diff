[+++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java, +import org.elasticsearch.indices.TypeMissingException;, +        final AtomicBoolean notifyOnPostProcess = new AtomicBoolean();, +                    return currentState;, +                    String latestIndexWithout = null;, +                            } else {, +                                latestIndexWithout = indexMetaData.index();, +                        listener.onFailure(new TypeMissingException(new Index(latestIndexWithout), request.mappingType));, +                    notifyOnPostProcess.set(true);, +                if (notifyOnPostProcess.get()) {, +            }]