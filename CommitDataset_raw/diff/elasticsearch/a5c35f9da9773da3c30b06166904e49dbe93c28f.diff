[+++ b/x-pack/plugin/watcher/src/test/java/org/elasticsearch/xpack/watcher/test/integration/HistoryIntegrationTests.java, +import org.elasticsearch.xpack.core.watcher.support.WatcherDateTimeUtils;, +import org.hamcrest.Matcher;, +import java.time.ZonedDateTime;, +        assertThat(timestamp, isSameDate(status.state().getTimestamp()));, +        assertThat(lastChecked, isSameDate(status.lastChecked()));, +, +, +    private Matcher<String> isSameDate(ZonedDateTime zonedDateTime) {, +        /*, +        When comparing timestamps returned from _search/.watcher-history* the same format of date has to be used, +        during serialisation to json on index time., +        The toString of ZonedDateTime is omitting the millisecond part when is 0. This was not the case in joda., +         */, +        return is(WatcherDateTimeUtils.formatDate(zonedDateTime));, +    }]