[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/search/XBooleanFilter.java, +            if (res == null && !shouldFilters.isEmpty()) {, +        }, +, +                if (res == null) {, +                    res = new FixedBitSet(reader.maxDoc());, +                    res.set(0, reader.maxDoc()); // NOTE: may set bits on deleted docs, +                }, +                if (res == null) {, +                    res = new FixedBitSet(reader.maxDoc());, +                    DocSets.or(res, disi);, +                } else {, +        }]