[+++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/src/main/java/org/elasticsearch/common/lucene/uid/Versions.java, +import java.util.List;, +import java.util.concurrent.ConcurrentHashMap;, +import org.apache.lucene.util.Bits;, +import org.apache.lucene.util.BytesRef;, +import org.elasticsearch.common.Numbers;, +import org.elasticsearch.index.mapper.internal.VersionFieldMapper;, +    private static final ConcurrentHashMap<IndexReader,CloseableThreadLocal<PerThreadIDAndVersionLookup>> lookupStates = new ConcurrentHashMap<>();, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/src/main/java/org/elasticsearch/common/lucene/uid/Versions.java, +import java.util.List;, +import java.util.concurrent.ConcurrentHashMap;, +import org.apache.lucene.util.Bits;, +import org.apache.lucene.util.BytesRef;, +import org.elasticsearch.common.Numbers;, +import org.elasticsearch.index.mapper.internal.VersionFieldMapper;, +    private static final ConcurrentHashMap<IndexReader,CloseableThreadLocal<PerThreadIDAndVersionLookup>> lookupStates = new ConcurrentHashMap<>();, +++ b/src/main/java/org/elasticsearch/common/util/concurrent/ConcurrentCollections.java, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/src/main/java/org/elasticsearch/common/lucene/uid/Versions.java, +import java.util.List;, +import java.util.concurrent.ConcurrentHashMap;, +import org.apache.lucene.util.Bits;, +import org.apache.lucene.util.BytesRef;, +import org.elasticsearch.common.Numbers;, +import org.elasticsearch.index.mapper.internal.VersionFieldMapper;, +    private static final ConcurrentHashMap<IndexReader,CloseableThreadLocal<PerThreadIDAndVersionLookup>> lookupStates = new ConcurrentHashMap<>();, +++ b/src/main/java/org/elasticsearch/common/util/concurrent/ConcurrentCollections.java, +++ b/src/main/java/org/elasticsearch/common/util/concurrent/KeyedLock.java, +import java.util.concurrent.ConcurrentHashMap;, +    private final ConcurrentMap<T, KeyLock> map = new ConcurrentHashMap<>();]