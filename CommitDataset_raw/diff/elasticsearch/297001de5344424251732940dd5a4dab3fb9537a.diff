[+++ b/modules/elasticsearch/src/test/java/org/elasticsearch/transport/netty/benchmark/BenchmarkNettyClient.java, +        final boolean waitForRequest = true;, +        final boolean spawn = true;, +        final int NUMBER_OF_ITERATIONS = 100000;, +        for (int i = 0; i < 10000; i++) {, +            BenchmarkMessage message = new BenchmarkMessage(1, payload);, +            transportService.submitRequest(node, "benchmark", message, new BaseTransportResponseHandler<BenchmarkMessage>() {, +                @Override public BenchmarkMessage newInstance() {, +                    return new BenchmarkMessage();, +                }, +, +                @Override public void handleResponse(BenchmarkMessage response) {, +                }, +, +                @Override public void handleException(RemoteTransportException exp) {, +                    exp.printStackTrace();, +                }, +            }).txGet();, +        }, +]