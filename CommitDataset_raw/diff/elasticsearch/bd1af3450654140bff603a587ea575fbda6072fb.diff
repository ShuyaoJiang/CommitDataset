[+++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/BulkByScrollTask.java, +            delayedPrepareBulkRequestReference.set(new DelayedPrepareBulkRequest(threadPool, getRequestsPerSecond(),, +                    delay, new RunOnce(prepareBulkRequestRunnable)));, +, +    /**, +     * Runnable that can only be run one time. This is paranoia to prevent furiously rethrottling from running the command multiple times., +     * Without it the command would be run multiple times., +     */, +    private static class RunOnce extends AbstractRunnable {, +        private final AtomicBoolean hasRun = new AtomicBoolean(false);, +        private final AbstractRunnable delegate;, +, +        public RunOnce(AbstractRunnable delegate) {, +            this.delegate = delegate;, +        }, +, +        @Override, +        protected void doRun() throws Exception {, +            if (hasRun.compareAndSet(false, true)) {, +                delegate.run();, +            }, +        }, +, +        @Override, +        public void onFailure(Throwable t) {, +            delegate.onFailure(t);, +        }, +    }]