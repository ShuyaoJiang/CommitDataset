[+++ b/src/test/java/org/elasticsearch/test/ElasticsearchBackwardsCompatIntegrationTest.java, +        assertFalse("backward compatibility tests must run in network mode. You probably have a system property overriding the test settings.",, +++ b/src/test/java/org/elasticsearch/test/ElasticsearchBackwardsCompatIntegrationTest.java, +        assertFalse("backward compatibility tests must run in network mode. You probably have a system property overriding the test settings.",, +++ b/src/test/java/org/elasticsearch/test/ExternalNode.java, +import org.elasticsearch.cluster.node.DiscoveryNode;, +import org.elasticsearch.common.collect.Tuple;, +import org.elasticsearch.env.Environment;, +import org.elasticsearch.node.internal.InternalSettingsPreparer;, +import static junit.framework.Assert.assertFalse;, +            // verify that the end node setting will have network enabled., +, +            Settings clientSettings = settingsBuilder().put("client.transport.nodes_sampler_interval", "1s"), +                    .put(ClusterName.SETTING, clusterName).put("client.transport.sniff", false).build();, +, +            Tuple<Settings, Environment> finalSettings = InternalSettingsPreparer.prepareSettings(clientSettings, true);, +            assertFalse("backward compatibility tests must run in network mode. You probably have a system property overriding the test settings.",, +                    DiscoveryNode.localNode(finalSettings.v1()));, +, +            TransportClient client = new TransportClient(clientSettings);]