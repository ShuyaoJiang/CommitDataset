[+++ b/core/src/main/java/org/elasticsearch/ElasticsearchException.java, +        QUERY_SHARD_EXCEPTION(org.elasticsearch.index.query.QueryShardException.class, org.elasticsearch.index.query.QueryShardException::new, 141);, +++ b/core/src/main/java/org/elasticsearch/ElasticsearchException.java, +        QUERY_SHARD_EXCEPTION(org.elasticsearch.index.query.QueryShardException.class, org.elasticsearch.index.query.QueryShardException::new, 141);, +++ b/core/src/main/java/org/elasticsearch/action/ingest/SimulatePipelineResponse.java, +import org.elasticsearch.common.xcontent.StatusToXContent;, +import org.elasticsearch.ingest.core.PipelineFactoryError;, +import org.elasticsearch.rest.RestStatus;, +public class SimulatePipelineResponse extends ActionResponse implements StatusToXContent {, +    private PipelineFactoryError error;, +    public SimulatePipelineResponse(PipelineFactoryError error) {, +        this.error = error;, +    }, +, +    public boolean isError() {, +        return error != null;, +    }, +, +    @Override, +    public RestStatus status() {, +        if (isError()) {, +            return RestStatus.BAD_REQUEST;, +        }, +        return RestStatus.OK;, +    }, +, +        out.writeBoolean(isError());, +        if (isError()) {, +            error.writeTo(out);, +        } else {, +    }, +        boolean isError = in.readBoolean();, +        if (isError) {, +            error = new PipelineFactoryError();, +            error.readFrom(in);, +        } else {, +    }, +        if (isError()) {, +            error.toXContent(builder, params);, +        } else {, +        }, +++ b/core/src/main/java/org/elasticsearch/ElasticsearchException.java, +        QUERY_SHARD_EXCEPTION(org.elasticsearch.index.query.QueryShardException.class, org.elasticsearch.index.query.QueryShardException::new, 141);, +++ b/core/src/main/java/org/elasticsearch/action/ingest/SimulatePipelineResponse.java, +import org.elasticsearch.common.xcontent.StatusToXContent;, +import org.elasticsearch.ingest.core.PipelineFactoryError;, +import org.elasticsearch.rest.RestStatus;, +public class SimulatePipelineResponse extends ActionResponse implements StatusToXContent {, +    private PipelineFactoryError error;, +    public SimulatePipelineResponse(PipelineFactoryError error) {, +        this.error = error;, +    }, +, +    public boolean isError() {, +        return error != null;, +    }, +, +    @Override, +    public RestStatus status() {, +        if (isError()) {, +            return RestStatus.BAD_REQUEST;, +        }, +        return RestStatus.OK;, +    }, +, +        out.writeBoolean(isError());, +        if (isError()) {, +            error.writeTo(out);, +        } else {, +    }, +        boolean isError = in.readBoolean();, +        if (isError) {, +            error = new PipelineFactoryError();, +            error.readFrom(in);, +        } else {, +    }, +        if (isError()) {, +            error.toXContent(builder, params);, +        } else {, +        }, +++ b/core/src/main/java/org/elasticsearch/action/ingest/SimulatePipelineTransportAction.java, +import org.elasticsearch.ingest.core.PipelineFactoryError;, +import org.elasticsearch.ingest.processor.ConfigurationPropertyException;, +        } catch (ConfigurationPropertyException e) {, +            listener.onResponse(new SimulatePipelineResponse(new PipelineFactoryError(e)));, +            return;, +++ b/core/src/main/java/org/elasticsearch/ElasticsearchException.java, +        QUERY_SHARD_EXCEPTION(org.elasticsearch.index.query.QueryShardException.class, org.elasticsearch.index.query.QueryShardException::new, 141);, +++ b/core/src/main/java/org/elasticsearch/action/ingest/SimulatePipelineResponse.java, +import org.elasticsearch.common.xcontent.StatusToXContent;, +import org.elasticsearch.ingest.core.PipelineFactoryError;, +import org.elasticsearch.rest.RestStatus;, +public class SimulatePipelineResponse extends ActionResponse implements StatusToXContent {, +    private PipelineFactoryError error;, +    public SimulatePipelineResponse(PipelineFactoryError error) {, +        this.error = error;, +    }, +, +    public boolean isError() {, +        return error != null;]