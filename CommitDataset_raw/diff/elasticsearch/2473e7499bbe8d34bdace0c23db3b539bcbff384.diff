[+++ b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +        setupLogging(settings, environment);, +        checkForCustomConfFile();, +, +    private static void checkForCustomConfFile() {, +        String confFileSetting = System.getProperty("es.default.config");, +        checkUnsetAndMaybeExit(confFileSetting, "es.default.config");, +        confFileSetting = System.getProperty("es.config");, +        checkUnsetAndMaybeExit(confFileSetting, "es.config");, +        confFileSetting = System.getProperty("elasticsearch.config");, +        checkUnsetAndMaybeExit(confFileSetting, "elasticsearch.config");, +    }, +, +    private static void checkUnsetAndMaybeExit(String confFileSetting, String settingName) {, +        if (confFileSetting != null && confFileSetting.isEmpty() == false) {, +            ESLogger logger = Loggers.getLogger(Bootstrap.class);, +            logger.info("{} is no longer supported. elasticsearch.yml must be placed in the config directory and cannot be renamed.", settingName);, +            System.exit(1);, +        }, +    }, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +        setupLogging(settings, environment);, +        checkForCustomConfFile();, +, +    private static void checkForCustomConfFile() {, +        String confFileSetting = System.getProperty("es.default.config");, +        checkUnsetAndMaybeExit(confFileSetting, "es.default.config");, +        confFileSetting = System.getProperty("es.config");, +        checkUnsetAndMaybeExit(confFileSetting, "es.config");, +        confFileSetting = System.getProperty("elasticsearch.config");, +        checkUnsetAndMaybeExit(confFileSetting, "elasticsearch.config");, +    }, +, +    private static void checkUnsetAndMaybeExit(String confFileSetting, String settingName) {, +        if (confFileSetting != null && confFileSetting.isEmpty() == false) {, +            ESLogger logger = Loggers.getLogger(Bootstrap.class);, +            logger.info("{} is no longer supported. elasticsearch.yml must be placed in the config directory and cannot be renamed.", settingName);, +            System.exit(1);, +        }, +    }, +++ b/core/src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +        setupLogging(settings, environment);, +        checkForCustomConfFile();, +, +    private static void checkForCustomConfFile() {, +        String confFileSetting = System.getProperty("es.default.config");, +        checkUnsetAndMaybeExit(confFileSetting, "es.default.config");, +        confFileSetting = System.getProperty("es.config");, +        checkUnsetAndMaybeExit(confFileSetting, "es.config");, +        confFileSetting = System.getProperty("elasticsearch.config");, +        checkUnsetAndMaybeExit(confFileSetting, "elasticsearch.config");, +    }, +, +    private static void checkUnsetAndMaybeExit(String confFileSetting, String settingName) {, +        if (confFileSetting != null && confFileSetting.isEmpty() == false) {, +            ESLogger logger = Loggers.getLogger(Bootstrap.class);, +            logger.info("{} is no longer supported. elasticsearch.yml must be placed in the config directory and cannot be renamed.", settingName);, +            System.exit(1);, +        }, +    }, +++ b/core/src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java, +++ b/distribution/deb/pom.xml, +                                        <include>bin/elasticsearch-systemd-pre-exec</include>, +                                    <includes>elasticsearch,elasticsearch.in.sh,plugin,elasticsearch-systemd-pre-exec</includes>, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +        setupLogging(settings, environment);, +        checkForCustomConfFile();, +, +    private static void checkForCustomConfFile() {, +        String confFileSetting = System.getProperty("es.default.config");, +        checkUnsetAndMaybeExit(confFileSetting, "es.default.config");, +        confFileSetting = System.getProperty("es.config");, +        checkUnsetAndMaybeExit(confFileSetting, "es.config");, +        confFileSetting = System.getProperty("elasticsearch.config");, +        checkUnsetAndMaybeExit(confFileSetting, "elasticsearch.config");, +    }, +, +    private static void checkUnsetAndMaybeExit(String confFileSetting, String settingName) {, +        if (confFileSetting != null && confFileSetting.isEmpty() == false) {, +            ESLogger logger = Loggers.getLogger(Bootstrap.class);, +            logger.info("{} is no longer supported. elasticsearch.yml must be placed in the config directory and cannot be renamed.", settingName);, +            System.exit(1);, +        }, +    }, +++ b/core/src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java, +++ b/distribution/deb/pom.xml, +                                        <include>bin/elasticsearch-systemd-pre-exec</include>, +                                    <includes>elasticsearch,elasticsearch.in.sh,plugin,elasticsearch-systemd-pre-exec</includes>, +++ b/distribution/deb/src/main/packaging/init.d/elasticsearch, +# CONF_FILE setting was removed, +if [ ! -z "$CONF_FILE" ]; then, +    echo "CONF_FILE setting is no longer supported. elasticsearch.yml must be placed in the config directory and cannot be renamed.", +    exit 1, +fi, +, +DAEMON_OPTS="-d -p $PID_FILE --default.path.home=$ES_HOME --default.path.logs=$LOG_DIR --default.path.data=$DATA_DIR --default.path.conf=$CONF_DIR", +++ b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +        setupLogging(settings, environment);, +        checkForCustomConfFile();]