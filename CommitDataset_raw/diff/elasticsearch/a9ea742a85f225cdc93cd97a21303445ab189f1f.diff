[+++ b/core/src/test/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantTermsAggregatorTests.java, +        indexWriterConfig.setMaxBufferedDocs(100);, +        indexWriterConfig.setRAMBufferSizeMB(100); // flush on open to have a single segment, +        , +                assertEquals("test expects a single segment", 1, reader.leaves().size());, +        indexWriterConfig.setMaxBufferedDocs(100);, +        indexWriterConfig.setRAMBufferSizeMB(100); // flush on open to have a single segment, +                assertEquals("test expects a single segment", 1, reader.leaves().size());, +        indexWriterConfig.setMaxBufferedDocs(100);, +        indexWriterConfig.setRAMBufferSizeMB(100); // flush on open to have a single segment, +                assertEquals("test expects a single segment", 1, reader.leaves().size());, +++ b/core/src/test/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantTermsAggregatorTests.java, +        indexWriterConfig.setMaxBufferedDocs(100);, +        indexWriterConfig.setRAMBufferSizeMB(100); // flush on open to have a single segment, +        , +                assertEquals("test expects a single segment", 1, reader.leaves().size());, +        indexWriterConfig.setMaxBufferedDocs(100);, +        indexWriterConfig.setRAMBufferSizeMB(100); // flush on open to have a single segment, +                assertEquals("test expects a single segment", 1, reader.leaves().size());, +        indexWriterConfig.setMaxBufferedDocs(100);, +        indexWriterConfig.setRAMBufferSizeMB(100); // flush on open to have a single segment, +                assertEquals("test expects a single segment", 1, reader.leaves().size());, +++ b/core/src/test/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantTextAggregatorTests.java, +        indexWriterConfig.setMaxBufferedDocs(100);, +        indexWriterConfig.setRAMBufferSizeMB(100); // flush on open to have a single segment, +                assertEquals("test expects a single segment", 1, reader.leaves().size());, +        indexWriterConfig.setMaxBufferedDocs(100);, +        indexWriterConfig.setRAMBufferSizeMB(100); // flush on open to have a single segment, +                assertEquals("test expects a single segment", 1, reader.leaves().size());]