[+++ b/dev-tools/checkstyle_suppressions.xml, +  <suppress files="plugin[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]xpack[/\\]ml[/\\]datafeed[/\\]DatafeedManager.java" checks="LineLength" />, +  <suppress files="plugin[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]xpack[/\\]ml[/\\]datafeed[/\\]DatafeedManagerTests.java" checks="LineLength" />, +++ b/dev-tools/checkstyle_suppressions.xml, +  <suppress files="plugin[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]xpack[/\\]ml[/\\]datafeed[/\\]DatafeedManager.java" checks="LineLength" />, +  <suppress files="plugin[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]xpack[/\\]ml[/\\]datafeed[/\\]DatafeedManagerTests.java" checks="LineLength" />, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/InvalidLicenseEnforcer.java, +import org.elasticsearch.xpack.ml.datafeed.DatafeedManager;, +    private final DatafeedManager datafeedManager;, +                           DatafeedManager datafeedManager, AutodetectProcessManager autodetectProcessManager) {, +        this.datafeedManager = datafeedManager;, +                    datafeedManager.stopAllDatafeeds("invalid license");, +++ b/dev-tools/checkstyle_suppressions.xml, +  <suppress files="plugin[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]xpack[/\\]ml[/\\]datafeed[/\\]DatafeedManager.java" checks="LineLength" />, +  <suppress files="plugin[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]xpack[/\\]ml[/\\]datafeed[/\\]DatafeedManagerTests.java" checks="LineLength" />, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/InvalidLicenseEnforcer.java, +import org.elasticsearch.xpack.ml.datafeed.DatafeedManager;, +    private final DatafeedManager datafeedManager;, +                           DatafeedManager datafeedManager, AutodetectProcessManager autodetectProcessManager) {, +        this.datafeedManager = datafeedManager;, +                    datafeedManager.stopAllDatafeeds("invalid license");, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/MachineLearning.java, +import org.elasticsearch.xpack.ml.datafeed.DatafeedManager;, +        DatafeedManager datafeedManager = new DatafeedManager(threadPool, internalClient, clusterService, jobProvider,, +                new InvalidLicenseEnforcer(settings, licenseState, threadPool, datafeedManager, autodetectProcessManager);, +                        datafeedManager, auditor), +                datafeedManager,, +++ b/dev-tools/checkstyle_suppressions.xml, +  <suppress files="plugin[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]xpack[/\\]ml[/\\]datafeed[/\\]DatafeedManager.java" checks="LineLength" />, +  <suppress files="plugin[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]xpack[/\\]ml[/\\]datafeed[/\\]DatafeedManagerTests.java" checks="LineLength" />, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/InvalidLicenseEnforcer.java, +import org.elasticsearch.xpack.ml.datafeed.DatafeedManager;, +    private final DatafeedManager datafeedManager;, +                           DatafeedManager datafeedManager, AutodetectProcessManager autodetectProcessManager) {, +        this.datafeedManager = datafeedManager;, +                    datafeedManager.stopAllDatafeeds("invalid license");, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/MachineLearning.java, +import org.elasticsearch.xpack.ml.datafeed.DatafeedManager;, +        DatafeedManager datafeedManager = new DatafeedManager(threadPool, internalClient, clusterService, jobProvider,, +                new InvalidLicenseEnforcer(settings, licenseState, threadPool, datafeedManager, autodetectProcessManager);, +                        datafeedManager, auditor), +                datafeedManager,, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/action/StartDatafeedAction.java, +import org.elasticsearch.xpack.ml.datafeed.DatafeedManager;, +        volatile DatafeedManager datafeedManager;, +            datafeedManager.stopDatafeed(datafeedId, reason, timeout);, +        private final DatafeedManager datafeedManager;, +                                                    PersistentTasksService persistentTasksService, DatafeedManager datafeedManager,, +            this.datafeedManager = datafeedManager;, +            datafeedTask.datafeedManager = datafeedManager;, +            datafeedManager.run(datafeedTask,, +++ b/dev-tools/checkstyle_suppressions.xml, +  <suppress files="plugin[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]xpack[/\\]ml[/\\]datafeed[/\\]DatafeedManager.java" checks="LineLength" />, +  <suppress files="plugin[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]xpack[/\\]ml[/\\]datafeed[/\\]DatafeedManagerTests.java" checks="LineLength" />, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/InvalidLicenseEnforcer.java, +import org.elasticsearch.xpack.ml.datafeed.DatafeedManager;, +    private final DatafeedManager datafeedManager;, +                           DatafeedManager datafeedManager, AutodetectProcessManager autodetectProcessManager) {, +        this.datafeedManager = datafeedManager;, +                    datafeedManager.stopAllDatafeeds("invalid license");, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/MachineLearning.java, +import org.elasticsearch.xpack.ml.datafeed.DatafeedManager;, +        DatafeedManager datafeedManager = new DatafeedManager(threadPool, internalClient, clusterService, jobProvider,, +                new InvalidLicenseEnforcer(settings, licenseState, threadPool, datafeedManager, autodetectProcessManager);, +                        datafeedManager, auditor), +                datafeedManager,, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/action/StartDatafeedAction.java, +import org.elasticsearch.xpack.ml.datafeed.DatafeedManager;, +        volatile DatafeedManager datafeedManager;, +            datafeedManager.stopDatafeed(datafeedId, reason, timeout);, +        private final DatafeedManager datafeedManager;, +                                                    PersistentTasksService persistentTasksService, DatafeedManager datafeedManager,, +            this.datafeedManager = datafeedManager;, +            datafeedTask.datafeedManager = datafeedManager;, +            datafeedManager.run(datafeedTask,, +++ /dev/null, +++ b/dev-tools/checkstyle_suppressions.xml, +  <suppress files="plugin[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]xpack[/\\]ml[/\\]datafeed[/\\]DatafeedManager.java" checks="LineLength" />, +  <suppress files="plugin[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]xpack[/\\]ml[/\\]datafeed[/\\]DatafeedManagerTests.java" checks="LineLength" />, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/InvalidLicenseEnforcer.java, +import org.elasticsearch.xpack.ml.datafeed.DatafeedManager;, +    private final DatafeedManager datafeedManager;, +                           DatafeedManager datafeedManager, AutodetectProcessManager autodetectProcessManager) {, +        this.datafeedManager = datafeedManager;, +                    datafeedManager.stopAllDatafeeds("invalid license");, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/MachineLearning.java, +import org.elasticsearch.xpack.ml.datafeed.DatafeedManager;, +        DatafeedManager datafeedManager = new DatafeedManager(threadPool, internalClient, clusterService, jobProvider,, +                new InvalidLicenseEnforcer(settings, licenseState, threadPool, datafeedManager, autodetectProcessManager);, +                        datafeedManager, auditor), +                datafeedManager,, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/action/StartDatafeedAction.java, +import org.elasticsearch.xpack.ml.datafeed.DatafeedManager;, +        volatile DatafeedManager datafeedManager;, +            datafeedManager.stopDatafeed(datafeedId, reason, timeout);, +        private final DatafeedManager datafeedManager;, +                                                    PersistentTasksService persistentTasksService, DatafeedManager datafeedManager,, +            this.datafeedManager = datafeedManager;, +            datafeedTask.datafeedManager = datafeedManager;, +            datafeedManager.run(datafeedTask,]