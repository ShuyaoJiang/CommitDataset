[+++ b/server/src/main/java/org/elasticsearch/index/engine/Engine.java, +    public abstract NoOpResult noOp(NoOp noOp) throws IOException;, +++ b/server/src/main/java/org/elasticsearch/index/engine/Engine.java, +    public abstract NoOpResult noOp(NoOp noOp) throws IOException;, +++ b/server/src/main/java/org/elasticsearch/index/engine/InternalEngine.java, +    public NoOpResult noOp(final NoOp noOp) throws IOException {, +        final NoOpResult noOpResult;, +            ensureOpen();, +            try {, +                maybeFailEngine("noop", e);, +            } catch (Exception inner) {, +                e.addSuppressed(inner);, +            }, +            throw e;, +++ b/server/src/main/java/org/elasticsearch/index/engine/Engine.java, +    public abstract NoOpResult noOp(NoOp noOp) throws IOException;, +++ b/server/src/main/java/org/elasticsearch/index/engine/InternalEngine.java, +    public NoOpResult noOp(final NoOp noOp) throws IOException {, +        final NoOpResult noOpResult;, +            ensureOpen();, +            try {, +                maybeFailEngine("noop", e);, +            } catch (Exception inner) {, +                e.addSuppressed(inner);, +            }, +            throw e;, +++ b/server/src/main/java/org/elasticsearch/index/shard/IndexShard.java, +    private Engine.NoOpResult noOp(Engine engine, Engine.NoOp noOp) throws IOException {, +++ b/server/src/main/java/org/elasticsearch/index/engine/Engine.java, +    public abstract NoOpResult noOp(NoOp noOp) throws IOException;, +++ b/server/src/main/java/org/elasticsearch/index/engine/InternalEngine.java, +    public NoOpResult noOp(final NoOp noOp) throws IOException {, +        final NoOpResult noOpResult;, +            ensureOpen();, +            try {, +                maybeFailEngine("noop", e);, +            } catch (Exception inner) {, +                e.addSuppressed(inner);, +            }, +            throw e;, +++ b/server/src/main/java/org/elasticsearch/index/shard/IndexShard.java, +    private Engine.NoOpResult noOp(Engine engine, Engine.NoOp noOp) throws IOException {, +++ b/server/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java, +            try (InternalEngine engine = createEngine(defaultSettings, store, createTempDir(), NoMergePolicy.INSTANCE,, +                expectThrows(AlreadyClosedException.class, () -> engine.index(indexForDoc(doc1)));, +                expectThrows(AlreadyClosedException.class,, +                    () -> engine.delete(new Engine.Delete("test", "", newUid(doc1), primaryTerm.get())));, +                expectThrows(AlreadyClosedException.class, () -> engine.noOp(, +                    new Engine.NoOp(engine.getLocalCheckpointTracker().generateSeqNo(),, +                        engine.config().getPrimaryTermSupplier().getAsLong(),, +                        randomFrom(Engine.Operation.Origin.values()), randomNonNegativeLong(), "test")));]