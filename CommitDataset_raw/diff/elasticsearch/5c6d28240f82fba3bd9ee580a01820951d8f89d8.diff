[+++ b/docs/reference/modules/advanced-scripting.asciidoc, +[source,groovy], +for (pos in termInfo) {, +++ b/docs/reference/modules/advanced-scripting.asciidoc, +[source,groovy], +for (pos in termInfo) {, +++ b/docs/reference/modules/scripting.asciidoc, +deprecated[1.3.0,Groovy has replaced Mvel as the default scripting language], +, +The scripting module uses by default http://groovy.codehaus.org/[groovy], +(previously http://mvel.codehaus.org/[mvel]) as the scripting language with some, +extensions. Groovy is used since it is extremely fast and very simple to use., +for JavaScript, `lang-mvel` for Mvel, and `lang-python` for Python., +script. The `lang` options are `groovy`, `js`, `mvel`, `python`, and, +added[1.2.0, Dynamic scripting is disabled for non-sandboxed languages by default since version 1.2.0], +To increase security, Elasticsearch does not allow you to specify scripts for, +non-sandboxed languages with a request. Instead, scripts must be placed in the, +`scripts` directory inside the configuration directory (the directory where, +elasticsearch.yml is). Scripts placed into this directory will automatically be, +picked up and be available to be used. Once a script has been placed in this, +directory, it can be referenced by name. For example, a script called, +`calculate-score.groovy` can be referenced in a request like this:, +    └── calculate-score.groovy, +$ cat config/scripts/calculate-score.groovy, +log(_score * 2) + my_modifier, +We recommend running Elasticsearch behind an application or proxy, which, +protects Elasticsearch from the outside world. If users are allowed to run, +dynamic scripts (even in a search request), then they have the same access to, +your box as the user that Elasticsearch is running as. For this reason dynamic, +scripting is allowed only for sandboxed languages by default., +There are three possible configuration values for the `script.disable_dynamic`, +setting, the default value is `sandbox`:, +, +[cols="<,<",options="header",], +|=======================================================================, +|Value |Description, +| `true` |all dynamic scripting is disabled, scripts must be placed in the `config/scripts` directory., +| `false` |all dynamic scripting is enabled, scripts may be sent as strings in requests., +| `sandbox` |scripts may be sent as strings for languages that are sandboxed., +|=======================================================================, +, +[float], +=== Default Scripting Language, +, +The default scripting language (assuming no `lang` parameter is provided) is, +`groovy`. In order to change it, set the `script.default_lang` to the, +appropriate language., +, +[float], +=== Groovy Sandboxing, +, +Elasticsearch sandboxes Groovy scripts that are compiled and executed in order, +to ensure they don't perform unwanted actions. There are a number of options, +that can be used for configuring this sandbox:, +, +`script.groovy.sandbox.receiver_whitelist`::, +, +    Comma-separated list of string classes for objects that may have methods, +    invoked., +, +`script.groovy.sandbox.package_whitelist`::, +, +    Comma-separated list of packages under which new objects may be constructed., +, +`script.groovy.sandbox.class_whitelist`::, +, +    Comma-separated list of classes that are allowed to be constructed., +, +`script.groovy.sandbox.method_blacklist`::, +, +    Comma-separated list of methods that are never allowed to be invoked,, +    regardless of target object., +, +`script.groovy.sandbox.enabled`::, +, +    Flag to disable the sandbox (defaults to `true` meaning the sandbox is, +    enabled)., +, +Even though `groovy` is pretty fast, this allows to register native Java based, +=== Groovy Built In Functions, +=== Floating point numbers in Groovy, +, +When using floating-point literals in Groovy scripts, Groovy will automatically, +use BigDecimal instead of a floating point equivalent to support the, +'least-surprising' approach to literal math operations. To use a floating-point, +number instead, use the specific suffix on the number (ie, instead of 1.2, use, +1.2f). See the http://groovy.codehaus.org/Groovy+Math[Groovy Math] page for more, +information., +, +[float], +++ b/docs/reference/modules/advanced-scripting.asciidoc, +[source,groovy], +for (pos in termInfo) {, +++ b/docs/reference/modules/scripting.asciidoc, +deprecated[1.3.0,Groovy has replaced Mvel as the default scripting language], +, +The scripting module uses by default http://groovy.codehaus.org/[groovy], +(previously http://mvel.codehaus.org/[mvel]) as the scripting language with some, +extensions. Groovy is used since it is extremely fast and very simple to use., +for JavaScript, `lang-mvel` for Mvel, and `lang-python` for Python.]