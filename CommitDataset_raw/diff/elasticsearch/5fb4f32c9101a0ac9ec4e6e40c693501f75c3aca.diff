[+++ /dev/null, +++ /dev/null, +++ b/buildSrc/src/main/java/org/elasticsearch/gradle/testclusters/ElasticsearchNode.java, +public class ElasticsearchNode {, +++ /dev/null, +++ b/buildSrc/src/main/java/org/elasticsearch/gradle/testclusters/ElasticsearchNode.java, +public class ElasticsearchNode {, +++ b/buildSrc/src/main/java/org/elasticsearch/gradle/testclusters/TestClustersPlugin.java, +        NamedDomainObjectContainer<? extends ElasticsearchNode> container = project.container(, +            container.forEach((ElasticsearchNode cluster) ->, +        Map<Task, List<ElasticsearchNode>> taskToCluster = new HashMap<>();, +                    public void doCall(ElasticsearchNode conf) {, +                    taskToCluster.getOrDefault(task, Collections.emptyList()).forEach(ElasticsearchNode::claim), +                    taskToCluster.getOrDefault(task, new ArrayList<>()).forEach(ElasticsearchNode::start);, +                    taskToCluster.getOrDefault(task, new ArrayList<>()).forEach(ElasticsearchNode::unClaimAndStop);]