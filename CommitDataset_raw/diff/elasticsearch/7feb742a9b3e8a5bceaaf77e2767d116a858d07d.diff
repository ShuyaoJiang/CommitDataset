[+++ b/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +        throw new UnsupportedOperationException();, +++ b/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +        throw new UnsupportedOperationException();, +++ b/src/main/java/org/elasticsearch/script/ScoreAccessor.java, +import org.apache.lucene.search.Scorer;, +    Scorer scorer;, +    public ScoreAccessor(Scorer scorer) {, +        this.scorer = scorer;, +            return scorer.score();, +++ b/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +        throw new UnsupportedOperationException();, +++ b/src/main/java/org/elasticsearch/script/ScoreAccessor.java, +import org.apache.lucene.search.Scorer;, +    Scorer scorer;, +    public ScoreAccessor(Scorer scorer) {, +        this.scorer = scorer;, +            return scorer.score();, +++ b/src/main/java/org/elasticsearch/script/ScriptService.java, +++ b/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +        throw new UnsupportedOperationException();, +++ b/src/main/java/org/elasticsearch/script/ScoreAccessor.java, +import org.apache.lucene.search.Scorer;, +    Scorer scorer;, +    public ScoreAccessor(Scorer scorer) {, +        this.scorer = scorer;, +            return scorer.score();, +++ b/src/main/java/org/elasticsearch/script/ScriptService.java, +++ b/src/main/java/org/elasticsearch/script/groovy/GroovyScriptEngineService.java, +import org.elasticsearch.search.suggest.term.TermSuggestion;, +        private Scorer scorer;, +            this.scorer = scorer;, +            this.variables.put("_score", new ScoreAccessor(scorer));, +++ b/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +        throw new UnsupportedOperationException();, +++ b/src/main/java/org/elasticsearch/script/ScoreAccessor.java, +import org.apache.lucene.search.Scorer;, +    Scorer scorer;, +    public ScoreAccessor(Scorer scorer) {, +        this.scorer = scorer;, +            return scorer.score();, +++ b/src/main/java/org/elasticsearch/script/ScriptService.java, +++ b/src/main/java/org/elasticsearch/script/groovy/GroovyScriptEngineService.java, +import org.elasticsearch.search.suggest.term.TermSuggestion;, +        private Scorer scorer;, +            this.scorer = scorer;, +            this.variables.put("_score", new ScoreAccessor(scorer));, +++ b/src/main/java/org/elasticsearch/search/lookup/DocLookup.java, +++ b/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +        throw new UnsupportedOperationException();, +++ b/src/main/java/org/elasticsearch/script/ScoreAccessor.java, +import org.apache.lucene.search.Scorer;, +    Scorer scorer;, +    public ScoreAccessor(Scorer scorer) {, +        this.scorer = scorer;, +            return scorer.score();, +++ b/src/main/java/org/elasticsearch/script/ScriptService.java, +++ b/src/main/java/org/elasticsearch/script/groovy/GroovyScriptEngineService.java, +import org.elasticsearch.search.suggest.term.TermSuggestion;, +        private Scorer scorer;, +            this.scorer = scorer;, +            this.variables.put("_score", new ScoreAccessor(scorer));, +++ b/src/main/java/org/elasticsearch/search/lookup/DocLookup.java, +++ b/src/main/java/org/elasticsearch/search/lookup/SearchLookup.java, +++ b/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +        throw new UnsupportedOperationException();, +++ b/src/main/java/org/elasticsearch/script/ScoreAccessor.java, +import org.apache.lucene.search.Scorer;, +    Scorer scorer;, +    public ScoreAccessor(Scorer scorer) {, +        this.scorer = scorer;, +            return scorer.score();, +++ b/src/main/java/org/elasticsearch/script/ScriptService.java, +++ b/src/main/java/org/elasticsearch/script/groovy/GroovyScriptEngineService.java, +import org.elasticsearch.search.suggest.term.TermSuggestion;, +        private Scorer scorer;, +            this.scorer = scorer;, +            this.variables.put("_score", new ScoreAccessor(scorer));, +++ b/src/main/java/org/elasticsearch/search/lookup/DocLookup.java, +++ b/src/main/java/org/elasticsearch/search/lookup/SearchLookup.java, +++ b/src/test/java/org/elasticsearch/search/aggregations/bucket/DoubleTermsTests.java, +                        .script("ceil(_score.doubleValue()/3)"), +++ b/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +        throw new UnsupportedOperationException();, +++ b/src/main/java/org/elasticsearch/script/ScoreAccessor.java, +import org.apache.lucene.search.Scorer;, +    Scorer scorer;, +    public ScoreAccessor(Scorer scorer) {, +        this.scorer = scorer;, +            return scorer.score();, +++ b/src/main/java/org/elasticsearch/script/ScriptService.java, +++ b/src/main/java/org/elasticsearch/script/groovy/GroovyScriptEngineService.java, +import org.elasticsearch.search.suggest.term.TermSuggestion;, +        private Scorer scorer;, +            this.scorer = scorer;, +            this.variables.put("_score", new ScoreAccessor(scorer));, +++ b/src/main/java/org/elasticsearch/search/lookup/DocLookup.java, +++ b/src/main/java/org/elasticsearch/search/lookup/SearchLookup.java, +++ b/src/test/java/org/elasticsearch/search/aggregations/bucket/DoubleTermsTests.java, +                        .script("ceil(_score.doubleValue()/3)")]