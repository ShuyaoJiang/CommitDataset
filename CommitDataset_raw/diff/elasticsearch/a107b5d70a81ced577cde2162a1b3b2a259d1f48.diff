[+++ b/src/test/java/org/elasticsearch/license/plugin/LicensesServiceClusterRestartTest.java, +                .put(super.nodeSettings(nodeOrdinal)), +    @Test, +        internalCluster().startNode();, +++ b/src/test/java/org/elasticsearch/license/plugin/LicensesServiceClusterRestartTest.java, +                .put(super.nodeSettings(nodeOrdinal)), +    @Test, +        internalCluster().startNode();, +++ b/src/test/java/org/elasticsearch/license/plugin/TestConsumerPlugin.java, +import org.elasticsearch.cluster.node.DiscoveryNode;, +import org.elasticsearch.common.collect.Lists;, +    private final boolean isClient;, +, +        this.isClient = DiscoveryNode.clientNode(settings);, +        Collection<Class<? extends LifecycleComponent>> services = Lists.newArrayList();, +        if (!isClient) {, +            services.add(TestPluginService.class);, +        }, +        return services;]