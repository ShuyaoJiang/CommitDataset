[+++ b/src/main/java/org/elasticsearch/common/lucene/search/function/FunctionScoreQuery.java, +        assert deviation(input) <= 0.001 : "input " + input + " out of float scope for function score deviation: " + deviation(input);, +    private static double deviation(double input) { // only with assert!, +        float floatVersion = (float)input;, +        return Double.compare(floatVersion, input) == 0 || input == 0.0d ? 0 : 1.d-(floatVersion) / input;, +    }, +, +++ b/src/main/java/org/elasticsearch/common/lucene/search/function/FunctionScoreQuery.java, +        assert deviation(input) <= 0.001 : "input " + input + " out of float scope for function score deviation: " + deviation(input);, +    private static double deviation(double input) { // only with assert!, +        float floatVersion = (float)input;, +        return Double.compare(floatVersion, input) == 0 || input == 0.0d ? 0 : 1.d-(floatVersion) / input;, +    }, +, +++ b/src/test/java/org/elasticsearch/test/integration/search/functionscore/FunctionScorePluginTests.java]