[+++ b/plugins/discovery-azure/src/main/java/org/elasticsearch/cloud/azure/AzureDiscoveryModule.java, +++ b/plugins/discovery-azure/src/main/java/org/elasticsearch/cloud/azure/AzureDiscoveryModule.java, +++ b/plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImpl.java, +    public AwsEc2ServiceImpl(Settings settings, NetworkService networkService, DiscoveryNodeService discoveryNodeService) {, +++ b/plugins/discovery-azure/src/main/java/org/elasticsearch/cloud/azure/AzureDiscoveryModule.java, +++ b/plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImpl.java, +    public AwsEc2ServiceImpl(Settings settings, NetworkService networkService, DiscoveryNodeService discoveryNodeService) {, +++ b/plugins/discovery-ec2/src/main/java/org/elasticsearch/plugin/discovery/ec2/Ec2DiscoveryPlugin.java, +import org.elasticsearch.cloud.aws.AwsEc2Service;, +import org.elasticsearch.common.settings.SettingsModule;, +, +    public void onModule(SettingsModule settingsModule) {, +        // Filter global settings, +        settingsModule.registerSettingsFilter(AwsEc2Service.CLOUD_AWS.KEY);, +        settingsModule.registerSettingsFilter(AwsEc2Service.CLOUD_AWS.SECRET);, +        settingsModule.registerSettingsFilter(AwsEc2Service.CLOUD_AWS.PROXY_PASSWORD);, +        settingsModule.registerSettingsFilter(AwsEc2Service.CLOUD_EC2.KEY);, +        settingsModule.registerSettingsFilter(AwsEc2Service.CLOUD_EC2.SECRET);, +        settingsModule.registerSettingsFilter(AwsEc2Service.CLOUD_EC2.PROXY_PASSWORD);, +    }]