[+++ b/core/src/main/java/org/elasticsearch/plugins/PluginCli.java, +import org.elasticsearch.common.logging.LogConfigurator;, +        // initialize default for es.logger.level because we will not read the logging.yml, +        String loggerLevel = System.getProperty("es.logger.level", "INFO");, +        // Set the appender for all potential log files to terminal so that other components that use the logger print out the, +        // same terminal., +        // The reason for this is that the plugin cli cannot be configured with a file appender because when the plugin command is, +        // executed there is no way of knowing where the logfiles should be placed. For example, if elasticsearch, +        // is run as service then the logs should be at /var/log/elasticsearch but when started from the tar they should be at es.home/logs., +        // Therefore we print to Terminal., +        Environment loggingEnvironment = InternalSettingsPreparer.prepareEnvironment(Settings.builder(), +                .put("appender.terminal.type", "terminal"), +                .put("rootLogger", "${es.logger.level}, terminal"), +                .put("es.logger.level", loggerLevel), +                .build(), Terminal.DEFAULT);, +        LogConfigurator.configure(loggingEnvironment.settings(), false);, +++ b/core/src/main/java/org/elasticsearch/plugins/PluginCli.java, +import org.elasticsearch.common.logging.LogConfigurator;, +        // initialize default for es.logger.level because we will not read the logging.yml, +        String loggerLevel = System.getProperty("es.logger.level", "INFO");, +        // Set the appender for all potential log files to terminal so that other components that use the logger print out the, +        // same terminal., +        // The reason for this is that the plugin cli cannot be configured with a file appender because when the plugin command is, +        // executed there is no way of knowing where the logfiles should be placed. For example, if elasticsearch, +        // is run as service then the logs should be at /var/log/elasticsearch but when started from the tar they should be at es.home/logs., +        // Therefore we print to Terminal., +        Environment loggingEnvironment = InternalSettingsPreparer.prepareEnvironment(Settings.builder(), +                .put("appender.terminal.type", "terminal"), +                .put("rootLogger", "${es.logger.level}, terminal"), +                .put("es.logger.level", loggerLevel), +                .build(), Terminal.DEFAULT);, +        LogConfigurator.configure(loggingEnvironment.settings(), false);, +++ b/qa/vagrant/src/test/resources/packaging/scripts/module_and_plugin_test_cases.bash, +        [ "$loglines" -eq "3" ] || {, +            echo "Expected 3 lines but the output was:", +        [ "$loglines" -eq "2" ] || {, +            echo "Expected 2 lines but the output was:", +    sudo -E -u $ESPLUGIN_COMMAND_USER "$ESHOME/bin/elasticsearch-plugin" install "file://$relativePath" -Des.logger.level=DEBUG > /tmp/plugin-cli-output, +        [ "$loglines" -gt "3" ] || {, +            echo "Expected more than 3 lines but the output was:", +        [ "$loglines" -gt "2" ] || {, +            echo "Expected more than 2 lines but the output was:"]