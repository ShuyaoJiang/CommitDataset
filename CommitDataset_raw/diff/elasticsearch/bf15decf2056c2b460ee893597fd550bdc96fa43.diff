[+++ b/core/src/main/java/org/elasticsearch/action/search/RemoteClusterConnection.java, +                    maybeConnect(); // now go an notify pending listeners, +++ b/core/src/main/java/org/elasticsearch/action/search/RemoteClusterConnection.java, +                    maybeConnect(); // now go an notify pending listeners, +++ b/core/src/test/java/org/elasticsearch/action/search/RemoteClusterConnectionTests.java, +                                        AtomicReference<RuntimeException> executed = new AtomicReference<>();, +                                        ActionListener<Void> listener = ActionListener.wrap(, +                                            x -> {, +                                                if (executed.compareAndSet(null, new RuntimeException())) {, +                                                } else {, +                                                    throw new AssertionError("shit's been called twice", executed.get());, +                                                }, +                                            },, +                                            x -> {, +                                                if (executed.compareAndSet(null, new RuntimeException())) {, +                                                    latch.countDown();, +                                                } else {, +                                                    throw new AssertionError("shit's been called twice", executed.get());, +                                                }, +                                                if (x instanceof RejectedExecutionException || x instanceof AlreadyClosedException, +                                                    || x instanceof CancellableThreads.ExecutionCancelledException) {]