[+++ b/core/src/main/java/org/elasticsearch/search/SearchModule.java, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.StatsBucketParser;, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.StatsBucketPipelineAggregator;, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.extended.ExtendedStatsBucketParser;, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.extended.ExtendedStatsBucketPipelineAggregator;, +        multibinderPipelineAggParser.addBinding().to(StatsBucketParser.class);, +        multibinderPipelineAggParser.addBinding().to(ExtendedStatsBucketParser.class);, +        StatsBucketPipelineAggregator.registerStreams();, +        ExtendedStatsBucketPipelineAggregator.registerStreams();, +++ b/core/src/main/java/org/elasticsearch/search/SearchModule.java, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.StatsBucketParser;, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.StatsBucketPipelineAggregator;, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.extended.ExtendedStatsBucketParser;, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.extended.ExtendedStatsBucketPipelineAggregator;, +        multibinderPipelineAggParser.addBinding().to(StatsBucketParser.class);, +        multibinderPipelineAggParser.addBinding().to(ExtendedStatsBucketParser.class);, +        StatsBucketPipelineAggregator.registerStreams();, +        ExtendedStatsBucketPipelineAggregator.registerStreams();, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/InternalExtendedStats.java, +    protected InternalExtendedStats() {} // for serialization, +++ b/core/src/main/java/org/elasticsearch/search/SearchModule.java, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.StatsBucketParser;, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.StatsBucketPipelineAggregator;, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.extended.ExtendedStatsBucketParser;, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.extended.ExtendedStatsBucketPipelineAggregator;, +        multibinderPipelineAggParser.addBinding().to(StatsBucketParser.class);, +        multibinderPipelineAggParser.addBinding().to(ExtendedStatsBucketParser.class);, +        StatsBucketPipelineAggregator.registerStreams();, +        ExtendedStatsBucketPipelineAggregator.registerStreams();, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/InternalExtendedStats.java, +    protected InternalExtendedStats() {} // for serialization, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/pipeline/PipelineAggregatorBuilders.java, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.StatsBucketBuilder;, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.extended.ExtendedStatsBucketBuilder;, +    public static final StatsBucketBuilder statsBucket(String name) {, +        return new StatsBucketBuilder(name);, +    }, +, +    public static final ExtendedStatsBucketBuilder extendedStatsBucket(String name) {, +        return new ExtendedStatsBucketBuilder(name);, +    }, +, +++ b/core/src/main/java/org/elasticsearch/search/SearchModule.java, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.StatsBucketParser;, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.StatsBucketPipelineAggregator;, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.extended.ExtendedStatsBucketParser;, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.extended.ExtendedStatsBucketPipelineAggregator;, +        multibinderPipelineAggParser.addBinding().to(StatsBucketParser.class);, +        multibinderPipelineAggParser.addBinding().to(ExtendedStatsBucketParser.class);, +        StatsBucketPipelineAggregator.registerStreams();, +        ExtendedStatsBucketPipelineAggregator.registerStreams();, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/InternalExtendedStats.java, +    protected InternalExtendedStats() {} // for serialization, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/pipeline/PipelineAggregatorBuilders.java, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.StatsBucketBuilder;, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.extended.ExtendedStatsBucketBuilder;, +    public static final StatsBucketBuilder statsBucket(String name) {, +        return new StatsBucketBuilder(name);, +    }, +, +    public static final ExtendedStatsBucketBuilder extendedStatsBucket(String name) {, +        return new ExtendedStatsBucketBuilder(name);, +    }, +, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/BucketMetricsParser.java, +++ b/core/src/main/java/org/elasticsearch/search/SearchModule.java, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.StatsBucketParser;, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.StatsBucketPipelineAggregator;, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.extended.ExtendedStatsBucketParser;, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.extended.ExtendedStatsBucketPipelineAggregator;, +        multibinderPipelineAggParser.addBinding().to(StatsBucketParser.class);, +        multibinderPipelineAggParser.addBinding().to(ExtendedStatsBucketParser.class);, +        StatsBucketPipelineAggregator.registerStreams();, +        ExtendedStatsBucketPipelineAggregator.registerStreams();, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/metrics/stats/extended/InternalExtendedStats.java, +    protected InternalExtendedStats() {} // for serialization, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/pipeline/PipelineAggregatorBuilders.java, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.StatsBucketBuilder;, +import org.elasticsearch.search.aggregations.pipeline.bucketmetrics.stats.extended.ExtendedStatsBucketBuilder;, +    public static final StatsBucketBuilder statsBucket(String name) {, +        return new StatsBucketBuilder(name);, +    }, +, +    public static final ExtendedStatsBucketBuilder extendedStatsBucket(String name) {, +        return new ExtendedStatsBucketBuilder(name);, +    }, +, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/BucketMetricsParser.java, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/stats/InternalStatsBucket.java, +/*, + * Licensed to Elasticsearch under one or more contributor, + * license agreements. See the NOTICE file distributed with, + * this work for additional information regarding copyright, + * ownership. Elasticsearch licenses this file to you under, + * the Apache License, Version 2.0 (the "License"); you may, + * not use this file except in compliance with the License., + * You may obtain a copy of the License at, + *, + *    http://www.apache.org/licenses/LICENSE-2.0, + *]