[+++ b/plugins/transport/thrift/src/main/java/org/elasticsearch/thrift/ThriftRestImpl.java, +        final AtomicReference<org.elasticsearch.thrift.RestResponse> ref = new AtomicReference<org.elasticsearch.thrift.RestResponse>();, +                try {, +                    ref.set(convert(response));, +                } catch (IOException e) {, +                    // ignore, should not happen..., +                }, +            return ref.get();, +            if (response.contentThreadSafe()) {, +            } else {, +                // argh!, we need to copy it over since we are not on the same thread..., +                byte[] body = new byte[response.contentLength()];, +                System.arraycopy(response.content(), 0, body, 0, response.contentLength());, +                tResponse.setBody(ByteBuffer.wrap(body));, +            }]