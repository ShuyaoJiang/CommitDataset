[+++ b/build.gradle, +    approvedLicenses = ['Elasticsearch Confidential'], +++ b/build.gradle, +    approvedLicenses = ['Elasticsearch Confidential'], +++ b/dev-tools/checkstyle_suppressions.xml, +++ b/build.gradle, +    approvedLicenses = ['Elasticsearch Confidential'], +++ b/dev-tools/checkstyle_suppressions.xml, +++ b/dev-tools/ci, +    pick_clone_target, +++ b/build.gradle, +    approvedLicenses = ['Elasticsearch Confidential'], +++ b/dev-tools/checkstyle_suppressions.xml, +++ b/dev-tools/ci, +    pick_clone_target, +++ b/docs/build.gradle, +++ b/build.gradle, +    approvedLicenses = ['Elasticsearch Confidential'], +++ b/dev-tools/checkstyle_suppressions.xml, +++ b/dev-tools/ci, +    pick_clone_target, +++ b/docs/build.gradle, +++ b/docs/en/index.asciidoc, +, +:edit_url!:, +:edit_url!:, +++ b/build.gradle, +    approvedLicenses = ['Elasticsearch Confidential'], +++ b/dev-tools/checkstyle_suppressions.xml, +++ b/dev-tools/ci, +    pick_clone_target, +++ b/docs/build.gradle, +++ b/docs/en/index.asciidoc, +, +:edit_url!:, +:edit_url!:, +++ b/docs/en/ml/index.asciidoc, +include::stopping-ml.asciidoc[], +++ b/build.gradle, +    approvedLicenses = ['Elasticsearch Confidential'], +++ b/dev-tools/checkstyle_suppressions.xml, +++ b/dev-tools/ci, +    pick_clone_target, +++ b/docs/build.gradle, +++ b/docs/en/index.asciidoc, +, +:edit_url!:, +:edit_url!:, +++ b/docs/en/ml/index.asciidoc, +include::stopping-ml.asciidoc[], +++ b/docs/en/ml/stopping-ml.asciidoc, +[[stopping-ml]], +== Stopping Machine Learning, +, +An orderly shutdown of {ml} ensures that:, +, +* {dfeeds-cap} are stopped, +* Buffers are flushed, +* Model history is pruned, +* Final results are calculated, +* Model snapshots are saved, +* Jobs are closed, +, +This process ensures that jobs are in a consistent state in case you want to, +subsequently re-open them., +, +[float], +[[stopping-ml-datafeeds]], +=== Stopping {dfeeds-cap}, +, +When you stop a {dfeed}, it ceases to retrieve data from {es}. You can stop a, +{dfeed} by using {kib} or the, +{ref}/ml-stop-datafeed.html[stop {dfeeds} API]. For example, the following, +request stops the `feed1` {dfeed}:, +, +[source,js], +--------------------------------------------------, +POST _xpack/ml/datafeeds/feed1/_stop, +--------------------------------------------------, +// CONSOLE, +// TEST[skip:todo], +, +NOTE: You must have `manage_ml`, or `manage` cluster privileges to stop {dfeeds}., +For more information, see <<security-privileges>>., +, +A {dfeed} can be started and stopped multiple times throughout its lifecycle., +, +For examples of stopping {dfeeds} in {kib}, see <<ml-gs-job1-manage>>., +, +[float], +[[stopping-all-ml-datafeeds]], +==== Stopping All {dfeeds-cap}, +, +If you are upgrading your cluster, you can use the following request to stop all, +{dfeeds}:, +, +[source,js], +----------------------------------, +POST _xpack/ml/datafeeds/_all/_stop, +----------------------------------]