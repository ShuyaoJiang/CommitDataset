[+++ b/test/framework/src/main/java/org/elasticsearch/test/ESTestCase.java, +            assert threadContext == null;, +            resetDeprecationLogger(false);, +            resetDeprecationLogger(true);, +    /**, +     * Reset the deprecation logger by removing the current thread context, and setting a new thread context if {@code setNewThreadContext}, +     * is set to {@code true} and otherwise clearing the current thread context., +     *, +     * @param setNewThreadContext whether or not to attach a new thread context to the deprecation logger, +     */, +    private void resetDeprecationLogger(final boolean setNewThreadContext) {, +        if (setNewThreadContext) {, +        } else {, +            this.threadContext = null;, +        }]