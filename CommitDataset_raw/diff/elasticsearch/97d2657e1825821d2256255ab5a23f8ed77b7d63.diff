[+++ b/core/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +++ b/core/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/search/lookup/LeafSearchLookup.java, +            LeafFieldsLookup fieldsLookup) {, +        Map<String, Object> asMap = new HashMap<>(4);, +++ b/core/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/search/lookup/LeafSearchLookup.java, +            LeafFieldsLookup fieldsLookup) {, +        Map<String, Object> asMap = new HashMap<>(4);, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/search/lookup/LeafSearchLookup.java, +            LeafFieldsLookup fieldsLookup) {, +        Map<String, Object> asMap = new HashMap<>(4);, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/search/lookup/SearchLookup.java, +                fieldsLookup.getLeafFieldsLookup(context));, +++ b/core/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/search/lookup/LeafSearchLookup.java, +            LeafFieldsLookup fieldsLookup) {, +        Map<String, Object> asMap = new HashMap<>(4);, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/search/lookup/SearchLookup.java, +                fieldsLookup.getLeafFieldsLookup(context));, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/search/lookup/LeafSearchLookup.java, +            LeafFieldsLookup fieldsLookup) {, +        Map<String, Object> asMap = new HashMap<>(4);, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/search/lookup/SearchLookup.java, +                fieldsLookup.getLeafFieldsLookup(context));, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/search/lookup/LeafSearchLookup.java, +            LeafFieldsLookup fieldsLookup) {, +        Map<String, Object> asMap = new HashMap<>(4);, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/search/lookup/SearchLookup.java, +                fieldsLookup.getLeafFieldsLookup(context));, +++ /dev/null, +++ /dev/null, +++ b/docs/reference/migration/migrate_6_0/scripting.asciidoc, +==== Removed access to index internal via the _index variable, +, +The `_index` variable has been removed. If you used it for advanced scoring, consider writing a `Similarity` plugin., +, +++ b/core/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +++ /dev/null]