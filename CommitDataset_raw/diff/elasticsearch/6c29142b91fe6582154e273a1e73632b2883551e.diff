[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/CommitPoints.java, +                                throw new IOException("Malformed commit, missing length for [" + fileName + "]");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/CommitPoints.java, +                                throw new IOException("Malformed commit, missing length for [" + fileName + "]");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/blobstore/BlobStoreIndexGateway.java, +                    logger.warn("failed to read commit point [{}]", e, name);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/CommitPoints.java, +                                throw new IOException("Malformed commit, missing length for [" + fileName + "]");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/blobstore/BlobStoreIndexGateway.java, +                    logger.warn("failed to read commit point [{}]", e, name);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/blobstore/BlobStoreIndexShardGateway.java, +        List<CommitPoint> commitPointsList = Lists.newArrayList();, +        boolean atLeastOneCommitPointExists = false;, +        for (String name : blobs.keySet()) {, +            if (name.startsWith("commit-")) {, +                atLeastOneCommitPointExists = true;, +                try {, +                    commitPointsList.add(CommitPoints.fromXContent(blobContainer.readBlobFully(name)));, +                } catch (Exception e) {, +                    logger.warn("failed to read commit point [{}]", e, name);, +                }, +            }, +        }, +        if (atLeastOneCommitPointExists && commitPointsList.isEmpty()) {, +            // no commit point managed to load, bail so we won't corrupt the index, will require manual intervention, +            throw new IndexShardGatewayRecoveryException(shardId, "Commit points exists but none could be loaded", null);, +        }, +        CommitPoints commitPoints = new CommitPoints(commitPointsList);, +, +                    logger.warn("failed to read commit point [{}]", e, name);]