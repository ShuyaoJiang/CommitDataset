[+++ b/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardRepository.java, +        if (fileInfo != null && (metadata = snapshot.get(fileInfo.physicalName())) != null) {, +                final byte[] bytes = blobContainer.readBlobFully(fileInfo.name());, +                assert bytes != null;, +                assert bytes.length == fileInfo.length() : bytes.length + " != " + fileInfo.length();, +++ b/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardRepository.java, +        if (fileInfo != null && (metadata = snapshot.get(fileInfo.physicalName())) != null) {, +                final byte[] bytes = blobContainer.readBlobFully(fileInfo.name());, +                assert bytes != null;, +                assert bytes.length == fileInfo.length() : bytes.length + " != " + fileInfo.length();, +++ b/src/test/java/org/elasticsearch/snapshots/SnapshotBackwardsCompatibilityTest.java, +import static org.elasticsearch.test.hamcrest.ElasticsearchAssertions.assertAcked;, +import static org.elasticsearch.test.hamcrest.ElasticsearchAssertions.assertHitCount;, +import static org.elasticsearch.test.hamcrest.ElasticsearchAssertions.assertNoFailures;, +import static org.hamcrest.Matchers.equalTo;, +import static org.hamcrest.Matchers.greaterThan;, +import static org.hamcrest.Matchers.lessThan;]