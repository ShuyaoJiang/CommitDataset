[+++ b/CONTRIBUTING.md, +* Line width for code snippets that are included in the documentation (the ones surrounded by `// tag` and `// end` comments) is 76 characters, +++ b/CONTRIBUTING.md, +* Line width for code snippets that are included in the documentation (the ones surrounded by `// tag` and `// end` comments) is 76 characters, +++ b/buildSrc/build.gradle, +, +if (JavaVersion.current() < JavaVersion.VERSION_1_10) {, +  throw new GradleException('At least Java 10 is required to build elasticsearch gradle tools'), +}, +, +/*****************************************************************************, + *         Java version                                                      *, + *****************************************************************************/, +, +// Gradle 4.10 does not support setting this to 11 yet, +targetCompatibility = "10", +sourceCompatibility = "10", +, +// We have a few classes that need to be compiled for older java versions because these are used to run checks against, +// those, +sourceSets {, +  minimumRuntime {, +    // We only want Java here, but the Groovy doesn't configure javadoc correctly if we don't define this as groovy, +    groovy {, +      srcDirs = ['src/main/minimumRuntime'], +    }, +  }, +}, +compileMinimumRuntimeGroovy {, +  // We can't use BuildPlugin here, so read from file, +  String minimumRuntimeVersion = file('src/main/resources/minimumRuntimeVersion').text.trim(), +  targetCompatibility = minimumRuntimeVersion, +  sourceCompatibility = minimumRuntimeVersion, +}, +dependencies {, +  compile sourceSets.minimumRuntime.output, +  minimumRuntimeCompile "junit:junit:${props.getProperty('junit')}", +  minimumRuntimeCompile localGroovy(), +}, +jar {, +  from sourceSets.minimumRuntime.output, +}, +, +, +  forbiddenApisMinimumRuntime.enabled = false, +++ b/CONTRIBUTING.md, +* Line width for code snippets that are included in the documentation (the ones surrounded by `// tag` and `// end` comments) is 76 characters, +++ b/buildSrc/build.gradle, +, +if (JavaVersion.current() < JavaVersion.VERSION_1_10) {, +  throw new GradleException('At least Java 10 is required to build elasticsearch gradle tools'), +}, +, +/*****************************************************************************, + *         Java version                                                      *, + *****************************************************************************/, +, +// Gradle 4.10 does not support setting this to 11 yet, +targetCompatibility = "10", +sourceCompatibility = "10", +, +// We have a few classes that need to be compiled for older java versions because these are used to run checks against, +// those, +sourceSets {, +  minimumRuntime {, +    // We only want Java here, but the Groovy doesn't configure javadoc correctly if we don't define this as groovy, +    groovy {, +      srcDirs = ['src/main/minimumRuntime'], +    }, +  }, +}, +compileMinimumRuntimeGroovy {, +  // We can't use BuildPlugin here, so read from file, +  String minimumRuntimeVersion = file('src/main/resources/minimumRuntimeVersion').text.trim(), +  targetCompatibility = minimumRuntimeVersion, +  sourceCompatibility = minimumRuntimeVersion, +}, +dependencies {, +  compile sourceSets.minimumRuntime.output, +  minimumRuntimeCompile "junit:junit:${props.getProperty('junit')}", +  minimumRuntimeCompile localGroovy(), +}, +jar {, +  from sourceSets.minimumRuntime.output, +}, +, +, +  forbiddenApisMinimumRuntime.enabled = false, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +        applyCommonTestConfig(project), +, +    static void applyCommonTestConfig(Project project) {, +        project.tasks.withType(RandomizedTestingTask) {, +            dependsOn(project.tasks.testClasses), +, +        project.tasks.getByName('test') {, +++ b/CONTRIBUTING.md, +* Line width for code snippets that are included in the documentation (the ones surrounded by `// tag` and `// end` comments) is 76 characters, +++ b/buildSrc/build.gradle, +]