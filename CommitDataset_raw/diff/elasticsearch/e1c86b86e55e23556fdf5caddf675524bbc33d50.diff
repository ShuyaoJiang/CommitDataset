[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/xcontent/XContentFactory.java, +import java.io.OutputStream;, +     * Constructs a new json builder that will output the result into the provided output stream., +     */, +    public static XContentBuilder jsonBuilder(OutputStream os) throws IOException {, +        return new XContentBuilder(JsonXContent.jsonXContent, os);, +    }, +, +    /**, +     * Constructs a new json builder that will output the result into the provided output stream., +     */, +    public static XContentBuilder smileBuilder(OutputStream os) throws IOException {, +        return new XContentBuilder(SmileXContent.smileXContent, os);, +    }, +, +    /**, +     * Constructs a xcontent builder that will output the result into the provided output stream., +     */, +    public static XContentBuilder contentBuilder(XContentType type, OutputStream outputStream) throws IOException {, +        if (type == XContentType.JSON) {, +            return jsonBuilder(outputStream);, +        } else if (type == XContentType.SMILE) {, +            return smileBuilder(outputStream);, +        }, +        throw new ElasticSearchIllegalArgumentException("No matching content type for " + type);, +    }, +, +    /**]