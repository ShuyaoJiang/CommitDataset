[+++ b/docs/reference/sql/limitations.asciidoc, +, +[float], +=== Using a sub-select, +, +Using sub-selects (`SELECT X FROM (SELECT Y)`) is **supported to a small degree**: any sub-select that can be "flattened" into a single, +`SELECT` is possible with {es-sql}. For example:, +, +["source","sql",subs="attributes,macros"], +--------------------------------------------------, +include-tagged::{sql-specs}/docs.csv-spec[limitationSubSelect], +--------------------------------------------------, +, +The query above is possible because it is equivalent with:, +, +["source","sql",subs="attributes,macros"], +--------------------------------------------------, +include-tagged::{sql-specs}/docs.csv-spec[limitationSubSelectRewritten], +--------------------------------------------------, +, +But, if the sub-select would include a `GROUP BY` or `HAVING` or the enclosing `SELECT` would be more complex than `SELECT X, +FROM (SELECT ...) WHERE [simple_condition]`, this is currently **un-supported**., +++ b/docs/reference/sql/limitations.asciidoc, +, +[float], +=== Using a sub-select, +, +Using sub-selects (`SELECT X FROM (SELECT Y)`) is **supported to a small degree**: any sub-select that can be "flattened" into a single, +`SELECT` is possible with {es-sql}. For example:, +, +["source","sql",subs="attributes,macros"], +--------------------------------------------------, +include-tagged::{sql-specs}/docs.csv-spec[limitationSubSelect], +--------------------------------------------------, +, +The query above is possible because it is equivalent with:, +, +["source","sql",subs="attributes,macros"], +--------------------------------------------------, +include-tagged::{sql-specs}/docs.csv-spec[limitationSubSelectRewritten], +--------------------------------------------------, +, +But, if the sub-select would include a `GROUP BY` or `HAVING` or the enclosing `SELECT` would be more complex than `SELECT X, +FROM (SELECT ...) WHERE [simple_condition]`, this is currently **un-supported**., +++ b/x-pack/plugin/sql/qa/src/main/resources/docs.csv-spec, +, +////////////, +// Next two queries need to have the same output, as they should be equivalent., +// They are used in the "SQL Limitations" page., +////////////, +limitationSubSelect, +// tag::limitationSubSelect, +SELECT * FROM (SELECT first_name, last_name FROM emp WHERE last_name NOT LIKE '%a%') WHERE first_name LIKE 'A%';, +, +  first_name   |   last_name, +---------------+---------------, +Anneke         |Preusig, +Anoosh         |Peyn, +Arumugam       |Ossenbruggen, +// end::limitationSubSelect, +;, +, +limitationSubSelect, +// tag::limitationSubSelectRewritten, +SELECT first_name, last_name FROM emp WHERE last_name NOT LIKE '%a%' AND first_name LIKE 'A%';, +// end::limitationSubSelectRewritten, +  first_name   |   last_name, +---------------+---------------, +Anneke         |Preusig, +Anoosh         |Peyn, +Arumugam       |Ossenbruggen, +;]