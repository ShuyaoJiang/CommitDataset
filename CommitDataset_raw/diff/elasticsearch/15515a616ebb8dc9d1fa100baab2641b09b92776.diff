[+++ b/x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/analysis/analyzer/Analyzer.java, +import org.elasticsearch.xpack.sql.expression.predicate.operator.arithmetic.ArithmeticOperation;, +            if (e instanceof ArithmeticOperation) {, +                ArithmeticOperation f = (ArithmeticOperation) e;, +++ b/x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/analysis/analyzer/Analyzer.java, +import org.elasticsearch.xpack.sql.expression.predicate.operator.arithmetic.ArithmeticOperation;, +            if (e instanceof ArithmeticOperation) {, +                ArithmeticOperation f = (ArithmeticOperation) e;, +++ b/x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/execution/search/Querier.java, +import org.elasticsearch.xpack.sql.expression.gen.pipeline.AggExtractorInput;, +import org.elasticsearch.xpack.sql.expression.gen.pipeline.AggPathInput;, +import org.elasticsearch.xpack.sql.expression.gen.pipeline.HitExtractorInput;, +import org.elasticsearch.xpack.sql.expression.gen.pipeline.Pipe;, +import org.elasticsearch.xpack.sql.expression.gen.pipeline.ReferenceInput;, +                Pipe proc = ((ComputedRef) ref).processor();, +                Pipe proc = ((ComputedRef) ref).processor();, +++ b/x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/analysis/analyzer/Analyzer.java, +import org.elasticsearch.xpack.sql.expression.predicate.operator.arithmetic.ArithmeticOperation;, +            if (e instanceof ArithmeticOperation) {, +                ArithmeticOperation f = (ArithmeticOperation) e;, +++ b/x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/execution/search/Querier.java, +import org.elasticsearch.xpack.sql.expression.gen.pipeline.AggExtractorInput;, +import org.elasticsearch.xpack.sql.expression.gen.pipeline.AggPathInput;, +import org.elasticsearch.xpack.sql.expression.gen.pipeline.HitExtractorInput;, +import org.elasticsearch.xpack.sql.expression.gen.pipeline.Pipe;, +import org.elasticsearch.xpack.sql.expression.gen.pipeline.ReferenceInput;, +                Pipe proc = ((ComputedRef) ref).processor();, +                Pipe proc = ((ComputedRef) ref).processor();, +++ b/x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/execution/search/extractor/ComputingExtractor.java, +import org.elasticsearch.xpack.sql.expression.gen.processor.HitExtractorProcessor;, +import org.elasticsearch.xpack.sql.expression.gen.processor.Processor;, +++ b/x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/analysis/analyzer/Analyzer.java, +import org.elasticsearch.xpack.sql.expression.predicate.operator.arithmetic.ArithmeticOperation;, +            if (e instanceof ArithmeticOperation) {, +                ArithmeticOperation f = (ArithmeticOperation) e;, +++ b/x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/execution/search/Querier.java, +import org.elasticsearch.xpack.sql.expression.gen.pipeline.AggExtractorInput;, +import org.elasticsearch.xpack.sql.expression.gen.pipeline.AggPathInput;, +import org.elasticsearch.xpack.sql.expression.gen.pipeline.HitExtractorInput;, +import org.elasticsearch.xpack.sql.expression.gen.pipeline.Pipe;, +import org.elasticsearch.xpack.sql.expression.gen.pipeline.ReferenceInput;, +                Pipe proc = ((ComputedRef) ref).processor();, +                Pipe proc = ((ComputedRef) ref).processor();, +++ b/x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/execution/search/extractor/ComputingExtractor.java, +import org.elasticsearch.xpack.sql.expression.gen.processor.HitExtractorProcessor;, +import org.elasticsearch.xpack.sql.expression.gen.processor.Processor;, +++ b/x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/expression/Alias.java, +import org.elasticsearch.xpack.sql.SqlIllegalArgumentException;, +import org.elasticsearch.xpack.sql.expression.gen.script.ScriptTemplate;, +import static java.util.Collections.singletonList;, +, +    @Override, +    public ScriptTemplate asScript() {, +        throw new SqlIllegalArgumentException("Encountered a bug; an alias should never be scripted");, +    }, +, +++ b/x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/analysis/analyzer/Analyzer.java, +import org.elasticsearch.xpack.sql.expression.predicate.operator.arithmetic.ArithmeticOperation;, +            if (e instanceof ArithmeticOperation) {, +                ArithmeticOperation f = (ArithmeticOperation) e;, +++ b/x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/execution/search/Querier.java, +import org.elasticsearch.xpack.sql.expression.gen.pipeline.AggExtractorInput;, +import org.elasticsearch.xpack.sql.expression.gen.pipeline.AggPathInput;, +import org.elasticsearch.xpack.sql.expression.gen.pipeline.HitExtractorInput;, +import org.elasticsearch.xpack.sql.expression.gen.pipeline.Pipe;, +import org.elasticsearch.xpack.sql.expression.gen.pipeline.ReferenceInput;, +                Pipe proc = ((ComputedRef) ref).processor();, +                Pipe proc = ((ComputedRef) ref).processor();, +++ b/x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/execution/search/extractor/ComputingExtractor.java, +import org.elasticsearch.xpack.sql.expression.gen.processor.HitExtractorProcessor;, +import org.elasticsearch.xpack.sql.expression.gen.processor.Processor;, +++ b/x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/expression/Alias.java, +import org.elasticsearch.xpack.sql.SqlIllegalArgumentException;, +import org.elasticsearch.xpack.sql.expression.gen.script.ScriptTemplate;, +import static java.util.Collections.singletonList;, +, +    @Override, +    public ScriptTemplate asScript() {, +        throw new SqlIllegalArgumentException("Encountered a bug; an alias should never be scripted");, +    }, +, +++ b/x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/expression/Attribute.java, +import org.elasticsearch.xpack.sql.SqlIllegalArgumentException;, +import org.elasticsearch.xpack.sql.expression.gen.script.ScriptTemplate;, +import org.elasticsearch.xpack.sql.tree.NodeInfo;, +    @Override, +    public ScriptTemplate asScript() {, +        throw new SqlIllegalArgumentException("Encountered a bug - an attribute should never be scripted");, +    }, +, +    protected NodeInfo<? extends Expression> info() {, +        return null;, +    }, +, +    @Override, +++ b/x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/analysis/analyzer/Analyzer.java, +import org.elasticsearch.xpack.sql.expression.predicate.operator.arithmetic.ArithmeticOperation;, +            if (e instanceof ArithmeticOperation) {, +                ArithmeticOperation f = (ArithmeticOperation) e;, +++ b/x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/execution/search/Querier.java]