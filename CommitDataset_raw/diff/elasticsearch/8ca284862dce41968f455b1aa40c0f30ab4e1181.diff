[+++ b/core/src/main/java/org/elasticsearch/gateway/GatewayService.java, +import org.elasticsearch.common.util.concurrent.AbstractRunnable;, +                threadPool.generic().execute(new AbstractRunnable() {, +                    @Override, +                    public void onFailure(Throwable t) {, +                        logger.warn("Recovery failed", t);, +                        // we reset `recovered` in the listener don't reset it here otherwise there might be a race, +                        // that resets it to false while a new recover is already running?, +                        recoveryListener.onFailure("state recovery failed: " + t.getMessage());, +                    }, +, +                    @Override, +                    protected void doRun() throws Exception {, +                        gateway.performStateRecovery(recoveryListener);, +                    }, +                });]