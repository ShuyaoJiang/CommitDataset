[+++ b/src/test/java/org/elasticsearch/test/InternalTestCluster.java, +import static junit.framework.Assert.fail;, +import static org.elasticsearch.test.ElasticsearchTestCase.assertBusy;, +                final String name = nodeAndClient.name;, +                final CircuitBreakerService breakerService = getInstanceFromNode(CircuitBreakerService.class, nodeAndClient.node);, +                // Anything that uses transport or HTTP can increase the, +                // request breaker (because they use bigarrays), because of, +                // that the breaker can sometimes be incremented from ping, +                // requests from other clusters because Jenkins is running, +                // multiple ES testing jobs in parallel on the same machine., +                // To combat this we check whether the breaker has reached 0, +                // in an assertBusy loop, so it will try for 10 seconds and, +                // fail if it never reached 0, +                try {, +                    assertBusy(new Runnable() {, +                        @Override, +                        public void run() {, +                            CircuitBreaker reqBreaker = breakerService.getBreaker(CircuitBreaker.Name.REQUEST);, +                    });, +                } catch (Exception e) {, +                    fail("Exception during check for request breaker reset to 0: " + e);, +                }, +            }]