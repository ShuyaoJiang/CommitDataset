[+++ b/qa/vagrant/README.md, +This class runs scripts in either bash with the `bash -c <script>` syntax,, +or in powershell with the `powershell.exe -Command <script>` syntax., +, +// equivalent to `bash -c 'echo $foo; echo $bar'`, +sh.bash("echo $foo; echo $bar");, +, +// equivalent to `powershell.exe -Command 'Write-Host $foo; Write-Host $bar'`, +sh.powershell("Write-Host $foo; Write-Host $bar");, +### Notes about powershell, +Powershell scripts for the most part have backwards compatibility with legacy, +cmd.exe commands and their syntax. Most of the commands you'll want to use, +in powershell are [Cmdlets](https://msdn.microsoft.com/en-us/library/ms714395.aspx), +which generally don't have a one-to-one mapping with an executable file., +When writing powershell commands in this project it's worth testing them by, +hand, as sometimes when a script can't be interpreted correctly it will, +fail silently., +++ b/qa/vagrant/README.md, +This class runs scripts in either bash with the `bash -c <script>` syntax,, +or in powershell with the `powershell.exe -Command <script>` syntax., +, +// equivalent to `bash -c 'echo $foo; echo $bar'`, +sh.bash("echo $foo; echo $bar");, +, +// equivalent to `powershell.exe -Command 'Write-Host $foo; Write-Host $bar'`, +sh.powershell("Write-Host $foo; Write-Host $bar");, +### Notes about powershell, +Powershell scripts for the most part have backwards compatibility with legacy, +cmd.exe commands and their syntax. Most of the commands you'll want to use, +in powershell are [Cmdlets](https://msdn.microsoft.com/en-us/library/ms714395.aspx), +which generally don't have a one-to-one mapping with an executable file., +When writing powershell commands in this project it's worth testing them by, +hand, as sometimes when a script can't be interpreted correctly it will, +fail silently., +++ b/qa/vagrant/src/main/java/org/elasticsearch/packaging/util/Archives.java, +                sh.bash("tar -C " + baseInstallPath + " -xzpf " + distributionFile);, +                sh.bash("unzip " + distributionFile + " -d " + baseInstallPath);, +                sh.powershell(, +                    "[IO.Compression.ZipFile]::ExtractToDirectory('" + distributionFile + "', '" + baseInstallPath + "')", +                );, +        if (sh.bashIgnoreExitCode("getent group elasticsearch").isSuccess() == false) {, +                sh.bash("addgroup --system elasticsearch");, +                sh.bash("groupadd -r elasticsearch");, +        if (sh.bashIgnoreExitCode("id elasticsearch").isSuccess() == false) {, +                sh.bash("adduser " +, +                    "--quiet " +, +                    "--system " +, +                    "--no-create-home " +, +                    "--ingroup elasticsearch " +, +                    "--disabled-password " +, +                    "--shell /bin/false " +, +                sh.bash("useradd " +, +                    "--system " +, +                    "-M " +, +                    "--gid elasticsearch " +, +                    "--shell /sbin/nologin " +, +                    "--comment 'elasticsearch user' " +, +        sh.bash("chown -R elasticsearch:elasticsearch " + installPath);, +++ b/qa/vagrant/README.md, +This class runs scripts in either bash with the `bash -c <script>` syntax,, +or in powershell with the `powershell.exe -Command <script>` syntax., +, +// equivalent to `bash -c 'echo $foo; echo $bar'`, +sh.bash("echo $foo; echo $bar");, +, +// equivalent to `powershell.exe -Command 'Write-Host $foo; Write-Host $bar'`, +sh.powershell("Write-Host $foo; Write-Host $bar");, +### Notes about powershell, +Powershell scripts for the most part have backwards compatibility with legacy, +cmd.exe commands and their syntax. Most of the commands you'll want to use, +in powershell are [Cmdlets](https://msdn.microsoft.com/en-us/library/ms714395.aspx), +which generally don't have a one-to-one mapping with an executable file., +When writing powershell commands in this project it's worth testing them by, +hand, as sometimes when a script can't be interpreted correctly it will, +fail silently., +++ b/qa/vagrant/src/main/java/org/elasticsearch/packaging/util/Archives.java, +                sh.bash("tar -C " + baseInstallPath + " -xzpf " + distributionFile);, +                sh.bash("unzip " + distributionFile + " -d " + baseInstallPath);, +                sh.powershell(, +                    "[IO.Compression.ZipFile]::ExtractToDirectory('" + distributionFile + "', '" + baseInstallPath + "')", +                );, +        if (sh.bashIgnoreExitCode("getent group elasticsearch").isSuccess() == false) {, +                sh.bash("addgroup --system elasticsearch");, +                sh.bash("groupadd -r elasticsearch");, +        if (sh.bashIgnoreExitCode("id elasticsearch").isSuccess() == false) {, +                sh.bash("adduser " +, +                    "--quiet " +, +                    "--system " +, +                    "--no-create-home " +, +                    "--ingroup elasticsearch " +, +                    "--disabled-password " +, +                    "--shell /bin/false " +, +                sh.bash("useradd " +, +                    "--system " +, +                    "-M " +, +                    "--gid elasticsearch " +, +                    "--shell /sbin/nologin " +, +                    "--comment 'elasticsearch user' " +, +        sh.bash("chown -R elasticsearch:elasticsearch " + installPath);, +++ b/qa/vagrant/src/main/java/org/elasticsearch/packaging/util/Cleanup.java]