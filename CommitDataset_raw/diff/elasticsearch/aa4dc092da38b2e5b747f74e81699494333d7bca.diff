[+++ b/src/main/java/org/elasticsearch/rest/action/cat/RestAllocationAction.java, +            ByteSizeValue total = nodeStats.getFs().getTotal().getTotal();, +            ByteSizeValue avail = nodeStats.getFs().getTotal().getAvailable();, +            //if we don't know how much we use (non data nodes), it means 0, +            long used = 0;, +            if (total.bytes() > 0) {, +                used = total.bytes() - avail.bytes();, +                if (used >= 0 && avail.bytes() >= 0) {, +                    diskPercent = (short) (used * 100 / (used + avail.bytes()));, +                }, +            table.addCell(avail.bytes() < 0 ? null : avail);, +            table.addCell(total.bytes() < 0 ? null : total);]