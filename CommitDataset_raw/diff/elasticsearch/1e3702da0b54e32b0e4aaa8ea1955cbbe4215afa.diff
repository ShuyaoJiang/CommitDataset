[+++ b/test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java, +    private IndexShard getShardOrNull(ClusterState clusterState, ShardRouting shardRouting) {, +        if (shardRouting == null || shardRouting.assignedToNode() == false) {, +    }, +, +    public void assertSeqNos() throws Exception {, +                    final IndexShard primaryShard = getShardOrNull(state, primaryShardRouting);, +                        final IndexShard replicaShard = getShardOrNull(state, replicaShardRouting);, +                    IndexShard primaryShard = getShardOrNull(state, primaryShardRouting);, +                    if (primaryShard == null) {, +                        IndexShard replicaShard = getShardOrNull(state, replicaShardRouting);, +                        if (replicaShard == null) {]