[+++ b/src/test/java/org/elasticsearch/index/store/StoreTest.java, +        assertThat(numNonExtraFiles(store), is(1));, +        assertThat(numNonExtraFiles(store), is(1));, +            if (file.equals("write.lock") || file.equals(IndexFileNames.OLD_SEGMENTS_GEN) || file.startsWith("extra")) {, +                if (file.startsWith("extra")) {, +                    continue;, +                }, +                if (file.startsWith("extra")) {, +                    continue;, +                }, +        assertTrue(numNonExtraFiles(store) > 0);, +, +    public int numNonExtraFiles(Store store) throws IOException {, +        int numNonExtra = 0;, +        for (String file : store.directory().listAll()) {, +            if (file.startsWith("extra") == false) {, +                numNonExtra++;, +            }, +        }, +        return numNonExtra;, +    }]