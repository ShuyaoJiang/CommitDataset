[+++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsGroup.java, +    private Index index;, +    private int shardId;, +    public ClusterSearchShardsGroup(Index index, int shardId, ShardRouting[] shards) {, +        this.index = index;, +        return index.getName();, +        return shardId;, +        index = new Index(in);, +        shardId = in.readVInt();, +            shards[i] = ShardRouting.readShardRoutingEntry(in, index, shardId);, +        index.writeTo(out);, +        out.writeVInt(shardId);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsGroup.java, +    private Index index;, +    private int shardId;, +    public ClusterSearchShardsGroup(Index index, int shardId, ShardRouting[] shards) {, +        this.index = index;, +        return index.getName();, +        return shardId;, +        index = new Index(in);, +        shardId = in.readVInt();, +            shards[i] = ShardRouting.readShardRoutingEntry(in, index, shardId);, +        index.writeTo(out);, +        out.writeVInt(shardId);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/shards/TransportClusterSearchShardsAction.java, +            Index index = shardIt.shardId().getIndex();, +            int shardId = shardIt.shardId().getId();, +            groupResponses[currentGroup++] = new ClusterSearchShardsGroup(index, shardId, shardRoutings);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsGroup.java, +    private Index index;, +    private int shardId;, +    public ClusterSearchShardsGroup(Index index, int shardId, ShardRouting[] shards) {, +        this.index = index;, +        return index.getName();, +        return shardId;, +        index = new Index(in);, +        shardId = in.readVInt();, +            shards[i] = ShardRouting.readShardRoutingEntry(in, index, shardId);, +        index.writeTo(out);, +        out.writeVInt(shardId);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/shards/TransportClusterSearchShardsAction.java, +            Index index = shardIt.shardId().getIndex();, +            int shardId = shardIt.shardId().getId();, +            groupResponses[currentGroup++] = new ClusterSearchShardsGroup(index, shardId, shardRoutings);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/segments/ShardSegments.java, +import static org.elasticsearch.cluster.routing.ShardRouting.readShardRoutingEntry;, +, +        shardRouting = readShardRoutingEntry(in);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsGroup.java, +    private Index index;, +    private int shardId;, +    public ClusterSearchShardsGroup(Index index, int shardId, ShardRouting[] shards) {, +        this.index = index;, +        return index.getName();, +        return shardId;, +        index = new Index(in);, +        shardId = in.readVInt();, +            shards[i] = ShardRouting.readShardRoutingEntry(in, index, shardId);, +        index.writeTo(out);, +        out.writeVInt(shardId);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/shards/TransportClusterSearchShardsAction.java, +            Index index = shardIt.shardId().getIndex();, +            int shardId = shardIt.shardId().getId();, +            groupResponses[currentGroup++] = new ClusterSearchShardsGroup(index, shardId, shardRoutings);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/segments/ShardSegments.java, +import static org.elasticsearch.cluster.routing.ShardRouting.readShardRoutingEntry;, +, +        shardRouting = readShardRoutingEntry(in);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/ShardStats.java, +import static org.elasticsearch.cluster.routing.ShardRouting.readShardRoutingEntry;, +, +        shardRouting = readShardRoutingEntry(in);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsGroup.java, +    private Index index;, +    private int shardId;, +    public ClusterSearchShardsGroup(Index index, int shardId, ShardRouting[] shards) {, +        this.index = index;, +        return index.getName();, +        return shardId;, +        index = new Index(in);, +        shardId = in.readVInt();, +            shards[i] = ShardRouting.readShardRoutingEntry(in, index, shardId);, +        index.writeTo(out);, +        out.writeVInt(shardId);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/shards/TransportClusterSearchShardsAction.java, +            Index index = shardIt.shardId().getIndex();, +            int shardId = shardIt.shardId().getId();, +            groupResponses[currentGroup++] = new ClusterSearchShardsGroup(index, shardId, shardRoutings);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/segments/ShardSegments.java, +import static org.elasticsearch.cluster.routing.ShardRouting.readShardRoutingEntry;, +, +        shardRouting = readShardRoutingEntry(in);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/ShardStats.java, +import static org.elasticsearch.cluster.routing.ShardRouting.readShardRoutingEntry;, +, +        shardRouting = readShardRoutingEntry(in);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/get/ShardUpgradeStatus.java, +import static org.elasticsearch.cluster.routing.ShardRouting.readShardRoutingEntry;, +, +        shardRouting = readShardRoutingEntry(in);]