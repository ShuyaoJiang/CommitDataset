[+++ b/docs/reference/search/request/min-score.asciidoc, +Allows to filter out documents based on a minimum score:, +advance use cases., +++ b/docs/reference/search/request/min-score.asciidoc, +Allows to filter out documents based on a minimum score:, +advance use cases., +++ b/src/main/java/org/elasticsearch/common/lucene/MinimumScoreCollector.java, +import org.apache.lucene.index.IndexReader;, +        if (scorer.score() > minimumScore) {, +++ b/docs/reference/search/request/min-score.asciidoc, +Allows to filter out documents based on a minimum score:, +advance use cases., +++ b/src/main/java/org/elasticsearch/common/lucene/MinimumScoreCollector.java, +import org.apache.lucene.index.IndexReader;, +        if (scorer.score() > minimumScore) {, +++ b/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java, +import org.apache.lucene.search.similarities.Similarity.SimScorer;, +, +import org.apache.lucene.index.AtomicReader;, +import org.apache.lucene.index.IndexReader;, +import org.apache.lucene.index.IndexReaderContext;, +import org.apache.lucene.search.*;, +    private boolean includeSpanScore;, +, +        this(term, true);, +    }, +, +    public AllTermQuery(Term term, boolean includeSpanScore) {, +        this.includeSpanScore = includeSpanScore;, +        public Scorer scorer(AtomicReaderContext context, boolean scoreDocsInOrder,, +                while (more && doc == spans.doc()) {, +                    more = spans.next();// this moves positions to the next match in this, +                    // document, +                }, +                return more || (freq != 0);, +                return includeSpanScore ? getSpanScore() * getPayloadScore() : getPayloadScore();, +            AllTermSpanScorer scorer = (AllTermSpanScorer) scorer(context, true, false, context.reader().getLiveDocs());, +                float freq = scorer.freq();, +        final int prime = 31;, +        int result = super.hashCode();, +        result = prime * result + (includeSpanScore ? 1231 : 1237);, +        return result;, +        AllTermQuery other = (AllTermQuery) obj;, +        if (includeSpanScore != other.includeSpanScore), +            return false;, +++ b/docs/reference/search/request/min-score.asciidoc, +Allows to filter out documents based on a minimum score:, +advance use cases., +++ b/src/main/java/org/elasticsearch/common/lucene/MinimumScoreCollector.java, +import org.apache.lucene.index.IndexReader;, +        if (scorer.score() > minimumScore) {, +++ b/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java, +import org.apache.lucene.search.similarities.Similarity.SimScorer;, +, +import org.apache.lucene.index.AtomicReader;, +import org.apache.lucene.index.IndexReader;, +import org.apache.lucene.index.IndexReaderContext;, +import org.apache.lucene.search.*;, +    private boolean includeSpanScore;, +, +        this(term, true);, +    }, +, +    public AllTermQuery(Term term, boolean includeSpanScore) {, +        this.includeSpanScore = includeSpanScore;, +        public Scorer scorer(AtomicReaderContext context, boolean scoreDocsInOrder,, +                while (more && doc == spans.doc()) {, +                    more = spans.next();// this moves positions to the next match in this, +                    // document, +                }, +                return more || (freq != 0);, +                return includeSpanScore ? getSpanScore() * getPayloadScore() : getPayloadScore();, +            AllTermSpanScorer scorer = (AllTermSpanScorer) scorer(context, true, false, context.reader().getLiveDocs());, +                float freq = scorer.freq();, +        final int prime = 31;, +        int result = super.hashCode();, +        result = prime * result + (includeSpanScore ? 1231 : 1237);, +        return result;, +        AllTermQuery other = (AllTermQuery) obj;, +        if (includeSpanScore != other.includeSpanScore), +            return false;, +++ b/src/main/java/org/elasticsearch/index/translog/fs/FsTranslog.java, +        FsTranslogFile old;, +            old = trans;, +        old.close(true);, +++ b/docs/reference/search/request/min-score.asciidoc, +Allows to filter out documents based on a minimum score:, +advance use cases., +++ b/src/main/java/org/elasticsearch/common/lucene/MinimumScoreCollector.java, +import org.apache.lucene.index.IndexReader;, +        if (scorer.score() > minimumScore) {, +++ b/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java, +import org.apache.lucene.search.similarities.Similarity.SimScorer;, +, +import org.apache.lucene.index.AtomicReader;, +import org.apache.lucene.index.IndexReader;, +import org.apache.lucene.index.IndexReaderContext;, +import org.apache.lucene.search.*;, +    private boolean includeSpanScore;, +]