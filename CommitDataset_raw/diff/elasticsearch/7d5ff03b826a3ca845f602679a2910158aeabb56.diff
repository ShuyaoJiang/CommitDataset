[+++ b/TESTING.asciidoc, +  org.elasticsearch.packaging.test.DefaultWindowsZipTests \, +  org.elasticsearch.packaging.test.OssWindowsZipTests, +  org.elasticsearch.packaging.test.DefaultWindowsZipTests `, +  org.elasticsearch.packaging.test.OssWindowsZipTests, +++ b/TESTING.asciidoc, +  org.elasticsearch.packaging.test.DefaultWindowsZipTests \, +  org.elasticsearch.packaging.test.OssWindowsZipTests, +  org.elasticsearch.packaging.test.DefaultWindowsZipTests `, +  org.elasticsearch.packaging.test.OssWindowsZipTests, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/vagrant/VagrantTestPlugin.groovy, +            'packages:oss-deb',, +            'archives:no-jdk-linux-tar',, +            'archives:oss-no-jdk-linux-tar',, +            'archives:no-jdk-windows-zip',, +            'archives:oss-no-jdk-windows-zip',, +            'packages:no-jdk-rpm',, +            'packages:oss-no-jdk-rpm',, +            'packages:no-jdk-deb',, +            'packages:oss-no-jdk-deb', +++ b/TESTING.asciidoc, +  org.elasticsearch.packaging.test.DefaultWindowsZipTests \, +  org.elasticsearch.packaging.test.OssWindowsZipTests, +  org.elasticsearch.packaging.test.DefaultWindowsZipTests `, +  org.elasticsearch.packaging.test.OssWindowsZipTests, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/vagrant/VagrantTestPlugin.groovy, +            'packages:oss-deb',, +            'archives:no-jdk-linux-tar',, +            'archives:oss-no-jdk-linux-tar',, +            'archives:no-jdk-windows-zip',, +            'archives:oss-no-jdk-windows-zip',, +            'packages:no-jdk-rpm',, +            'packages:oss-no-jdk-rpm',, +            'packages:no-jdk-deb',, +            'packages:oss-no-jdk-deb', +++ b/distribution/archives/build.gradle, +CopySpec archiveFiles(CopySpec modulesFiles, String distributionType, String platform, boolean oss, boolean jdk) {, +      if (jdk) {, +  with archiveFiles(transportModulesFiles, 'zip', null, true, false), +  with archiveFiles(modulesFiles(false), 'zip', 'windows', false, true), +  with archiveFiles(modulesFiles(true), 'zip', 'windows', true, true), +}, +, +task buildNoJdkWindowsZip(type: Zip) {, +  configure(commonZipConfig), +  archiveClassifier = 'no-jdk-windows-x86_64', +  with archiveFiles(modulesFiles(false), 'zip', 'windows', false, false), +}, +, +task buildOssNoJdkWindowsZip(type: Zip) {, +  configure(commonZipConfig), +  archiveClassifier = 'no-jdk-windows-x86_64', +  with archiveFiles(modulesFiles(true), 'zip', 'windows', true, false), +  with archiveFiles(modulesFiles(false), 'tar', 'darwin', false, true), +  with archiveFiles(modulesFiles(true), 'tar', 'darwin', true, true), +}, +, +task buildNoJdkDarwinTar(type: Tar) {, +  configure(commonTarConfig), +  archiveClassifier = 'no-jdk-darwin-x86_64', +  with archiveFiles(modulesFiles(false), 'tar', 'darwin', false, false), +}, +, +task buildOssNoJdkDarwinTar(type: Tar) {, +  configure(commonTarConfig), +  archiveClassifier = 'no-jdk-darwin-x86_64', +  with archiveFiles(modulesFiles(true), 'tar', 'darwin', true, false), +  with archiveFiles(modulesFiles(false), 'tar', 'linux', false, true), +  with archiveFiles(modulesFiles(true), 'tar', 'linux', true, true), +}, +, +task buildNoJdkLinuxTar(type: Tar) {, +  configure(commonTarConfig), +  archiveClassifier = 'no-jdk-linux-x86_64', +  with archiveFiles(modulesFiles(false), 'tar', 'linux', false, false), +}, +, +task buildOssNoJdkLinuxTar(type: Tar) {, +  configure(commonTarConfig), +  archiveClassifier = 'no-jdk-linux-x86_64', +  with archiveFiles(modulesFiles(true), 'tar', 'linux', true, false), +++ b/TESTING.asciidoc, +  org.elasticsearch.packaging.test.DefaultWindowsZipTests \, +  org.elasticsearch.packaging.test.OssWindowsZipTests, +  org.elasticsearch.packaging.test.DefaultWindowsZipTests `, +  org.elasticsearch.packaging.test.OssWindowsZipTests, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/vagrant/VagrantTestPlugin.groovy, +            'packages:oss-deb',, +            'archives:no-jdk-linux-tar',, +            'archives:oss-no-jdk-linux-tar',, +            'archives:no-jdk-windows-zip',, +            'archives:oss-no-jdk-windows-zip',, +            'packages:no-jdk-rpm',, +            'packages:oss-no-jdk-rpm',, +            'packages:no-jdk-deb',, +            'packages:oss-no-jdk-deb', +++ b/distribution/archives/build.gradle, +CopySpec archiveFiles(CopySpec modulesFiles, String distributionType, String platform, boolean oss, boolean jdk) {, +      if (jdk) {, +  with archiveFiles(transportModulesFiles, 'zip', null, true, false)]