[+++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/job/process/autodetect/BlackHoleAutodetectProcess.java, +import java.util.concurrent.LinkedBlockingDeque;, +import java.util.concurrent.TimeUnit;, +    private final BlockingQueue<AutodetectResult> results = new LinkedBlockingDeque<>();, +    private volatile boolean open = true;, +        open = false;, +        // Create a custom iterator here, because LinkedBlockingDeque iterator and stream are not blocking when empty:, +                    while (open) {, +                        result = results.poll(100, TimeUnit.MILLISECONDS);, +                        if (result != null) {, +                            break;, +                        }, +                    }, +                    return open;]