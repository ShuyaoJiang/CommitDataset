[+++ b/src/main/java/org/elasticsearch/index/field/function/sort/DoubleFieldsFunctionDataComparator.java, +        script.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/index/field/function/sort/DoubleFieldsFunctionDataComparator.java, +        script.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/index/field/function/sort/StringFieldsFunctionDataComparator.java, +        script.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/index/field/function/sort/DoubleFieldsFunctionDataComparator.java, +        script.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/index/field/function/sort/StringFieldsFunctionDataComparator.java, +        script.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +import org.apache.lucene.index.AtomicReaderContext;, +    public void setNextReader(AtomicReaderContext context) {, +        lookup.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/index/field/function/sort/DoubleFieldsFunctionDataComparator.java, +        script.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/index/field/function/sort/StringFieldsFunctionDataComparator.java, +        script.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +import org.apache.lucene.index.AtomicReaderContext;, +    public void setNextReader(AtomicReaderContext context) {, +        lookup.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/script/SearchScript.java, +import org.apache.lucene.index.AtomicReaderContext;, +    void setNextReader(AtomicReaderContext context);, +++ b/src/main/java/org/elasticsearch/index/field/function/sort/DoubleFieldsFunctionDataComparator.java, +        script.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/index/field/function/sort/StringFieldsFunctionDataComparator.java, +        script.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +import org.apache.lucene.index.AtomicReaderContext;, +    public void setNextReader(AtomicReaderContext context) {, +        lookup.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/script/SearchScript.java, +import org.apache.lucene.index.AtomicReaderContext;, +    void setNextReader(AtomicReaderContext context);, +++ b/src/main/java/org/elasticsearch/script/mvel/MvelScriptEngineService.java, +import org.apache.lucene.index.AtomicReaderContext;, +        public void setNextReader(AtomicReaderContext context) {, +            lookup.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/index/field/function/sort/DoubleFieldsFunctionDataComparator.java, +        script.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/index/field/function/sort/StringFieldsFunctionDataComparator.java, +        script.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +import org.apache.lucene.index.AtomicReaderContext;, +    public void setNextReader(AtomicReaderContext context) {, +        lookup.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/script/SearchScript.java, +import org.apache.lucene.index.AtomicReaderContext;, +    void setNextReader(AtomicReaderContext context);, +++ b/src/main/java/org/elasticsearch/script/mvel/MvelScriptEngineService.java, +import org.apache.lucene.index.AtomicReaderContext;, +        public void setNextReader(AtomicReaderContext context) {, +            lookup.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/search/facet/datehistogram/ValueScriptDateHistogramFacetCollector.java, +        valueScript.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/index/field/function/sort/DoubleFieldsFunctionDataComparator.java, +        script.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/index/field/function/sort/StringFieldsFunctionDataComparator.java, +        script.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +import org.apache.lucene.index.AtomicReaderContext;, +    public void setNextReader(AtomicReaderContext context) {, +        lookup.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/script/SearchScript.java, +import org.apache.lucene.index.AtomicReaderContext;, +    void setNextReader(AtomicReaderContext context);, +++ b/src/main/java/org/elasticsearch/script/mvel/MvelScriptEngineService.java, +import org.apache.lucene.index.AtomicReaderContext;, +        public void setNextReader(AtomicReaderContext context) {, +            lookup.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/search/facet/datehistogram/ValueScriptDateHistogramFacetCollector.java, +        valueScript.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/search/facet/geodistance/ScriptGeoDistanceFacetCollector.java, +        script.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/index/field/function/sort/DoubleFieldsFunctionDataComparator.java, +        script.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/index/field/function/sort/StringFieldsFunctionDataComparator.java, +        script.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/script/AbstractSearchScript.java, +import org.apache.lucene.index.AtomicReaderContext;, +    public void setNextReader(AtomicReaderContext context) {, +        lookup.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/script/SearchScript.java, +import org.apache.lucene.index.AtomicReaderContext;, +    void setNextReader(AtomicReaderContext context);, +++ b/src/main/java/org/elasticsearch/script/mvel/MvelScriptEngineService.java, +import org.apache.lucene.index.AtomicReaderContext;, +        public void setNextReader(AtomicReaderContext context) {, +            lookup.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/search/facet/datehistogram/ValueScriptDateHistogramFacetCollector.java, +        valueScript.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/search/facet/geodistance/ScriptGeoDistanceFacetCollector.java, +        script.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/search/facet/histogram/bounded/BoundedValueScriptHistogramFacetCollector.java, +        valueScript.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/index/field/function/sort/DoubleFieldsFunctionDataComparator.java, +        script.setNextReader(context);, +++ b/src/main/java/org/elasticsearch/index/field/function/sort/StringFieldsFunctionDataComparator.java]