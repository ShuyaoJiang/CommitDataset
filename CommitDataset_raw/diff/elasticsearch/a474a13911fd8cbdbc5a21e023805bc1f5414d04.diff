[+++ b/core/src/test/java/org/elasticsearch/indices/recovery/IndexRecoveryIT.java, +import java.util.function.Consumer;, +        Consumer<String> assertNodeHasThrottleTimeAndNoRecoveries = nodeName ->  {, +            NodesStatsResponse nodesStatsResponse = client().admin().cluster().prepareNodesStats().setNodesIds(nodeName), +                .clear().setIndices(new CommonStatsFlags(CommonStatsFlags.Flag.Recovery)).get();, +            assertThat(nodesStatsResponse.getNodes(), hasSize(1));, +            NodeStats nodeStats = nodesStatsResponse.getNodes().get(0);, +            assertThat(nodeName + " throttling should be >0", recoveryStats.throttleTime().millis(), greaterThan(0L));, +        };, +        // we have to use assertBusy as recovery counters are decremented only when the last reference to the RecoveryTarget, +        // is decremented, which may happen after the recovery was done., +        assertBusy(() -> assertNodeHasThrottleTimeAndNoRecoveries.accept(nodeA));, +        assertBusy(() -> assertNodeHasThrottleTimeAndNoRecoveries.accept(nodeB));, +        assertBusy(() -> assertNodeHasThrottleTimeAndNoRecoveries.accept(nodeA));, +        assertBusy(() -> assertNodeHasThrottleTimeAndNoRecoveries.accept(nodeB));]