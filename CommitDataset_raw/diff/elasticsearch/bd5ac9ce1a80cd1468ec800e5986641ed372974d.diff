[+++ b/core/src/main/java/org/elasticsearch/common/lucene/index/ElasticsearchDirectoryReader.java, +    public static void addReaderCloseListener(DirectoryReader reader, IndexReader.ReaderClosedListener listener) {, +        if (elasticsearchDirectoryReader != null) {, +    public static ElasticsearchDirectoryReader getElasticsearchDirectoryReader(DirectoryReader reader) {, +++ b/core/src/main/java/org/elasticsearch/common/lucene/index/ElasticsearchDirectoryReader.java, +    public static void addReaderCloseListener(DirectoryReader reader, IndexReader.ReaderClosedListener listener) {, +        if (elasticsearchDirectoryReader != null) {, +    public static ElasticsearchDirectoryReader getElasticsearchDirectoryReader(DirectoryReader reader) {, +++ b/core/src/main/java/org/elasticsearch/common/lucene/uid/Versions.java, +import org.apache.lucene.index.DirectoryReader;, +++ b/core/src/main/java/org/elasticsearch/common/lucene/index/ElasticsearchDirectoryReader.java, +    public static void addReaderCloseListener(DirectoryReader reader, IndexReader.ReaderClosedListener listener) {, +        if (elasticsearchDirectoryReader != null) {, +    public static ElasticsearchDirectoryReader getElasticsearchDirectoryReader(DirectoryReader reader) {, +++ b/core/src/main/java/org/elasticsearch/common/lucene/uid/Versions.java, +import org.apache.lucene.index.DirectoryReader;, +++ b/core/src/main/java/org/elasticsearch/index/engine/Engine.java, +        private final DirectoryReader reader;, +            this.reader = (DirectoryReader) searcher.getIndexReader();, +        public DirectoryReader reader() {, +            return reader;, +++ b/core/src/main/java/org/elasticsearch/common/lucene/index/ElasticsearchDirectoryReader.java, +    public static void addReaderCloseListener(DirectoryReader reader, IndexReader.ReaderClosedListener listener) {, +        if (elasticsearchDirectoryReader != null) {, +    public static ElasticsearchDirectoryReader getElasticsearchDirectoryReader(DirectoryReader reader) {, +++ b/core/src/main/java/org/elasticsearch/common/lucene/uid/Versions.java, +import org.apache.lucene.index.DirectoryReader;, +++ b/core/src/main/java/org/elasticsearch/index/engine/Engine.java, +        private final DirectoryReader reader;, +            this.reader = (DirectoryReader) searcher.getIndexReader();, +        public DirectoryReader reader() {, +            return reader;, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldData.java, +import org.apache.lucene.index.DirectoryReader;, +        IndexFieldData<FD> loadGlobal(DirectoryReader indexReader);, +        IndexFieldData<FD> localGlobalDirect(DirectoryReader indexReader) throws Exception;, +++ b/core/src/main/java/org/elasticsearch/common/lucene/index/ElasticsearchDirectoryReader.java, +    public static void addReaderCloseListener(DirectoryReader reader, IndexReader.ReaderClosedListener listener) {, +        if (elasticsearchDirectoryReader != null) {, +    public static ElasticsearchDirectoryReader getElasticsearchDirectoryReader(DirectoryReader reader) {, +++ b/core/src/main/java/org/elasticsearch/common/lucene/uid/Versions.java, +import org.apache.lucene.index.DirectoryReader;, +++ b/core/src/main/java/org/elasticsearch/index/engine/Engine.java, +        private final DirectoryReader reader;, +            this.reader = (DirectoryReader) searcher.getIndexReader();, +        public DirectoryReader reader() {, +            return reader;, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldData.java, +import org.apache.lucene.index.DirectoryReader;, +        IndexFieldData<FD> loadGlobal(DirectoryReader indexReader);, +        IndexFieldData<FD> localGlobalDirect(DirectoryReader indexReader) throws Exception;, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataCache.java, +import org.apache.lucene.index.DirectoryReader;, +    <FD extends AtomicFieldData, IFD extends IndexFieldData.Global<FD>> IFD load(final DirectoryReader indexReader, final IFD indexFieldData) throws Exception;, +        public <FD extends AtomicFieldData, IFD extends IndexFieldData.Global<FD>> IFD load(DirectoryReader indexReader, IFD indexFieldData) throws Exception {, +++ b/core/src/main/java/org/elasticsearch/common/lucene/index/ElasticsearchDirectoryReader.java, +    public static void addReaderCloseListener(DirectoryReader reader, IndexReader.ReaderClosedListener listener) {, +        if (elasticsearchDirectoryReader != null) {, +    public static ElasticsearchDirectoryReader getElasticsearchDirectoryReader(DirectoryReader reader) {, +++ b/core/src/main/java/org/elasticsearch/common/lucene/uid/Versions.java, +import org.apache.lucene.index.DirectoryReader;, +++ b/core/src/main/java/org/elasticsearch/index/engine/Engine.java, +        private final DirectoryReader reader;, +            this.reader = (DirectoryReader) searcher.getIndexReader();, +        public DirectoryReader reader() {, +            return reader;, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldData.java, +import org.apache.lucene.index.DirectoryReader;, +        IndexFieldData<FD> loadGlobal(DirectoryReader indexReader);, +        IndexFieldData<FD> localGlobalDirect(DirectoryReader indexReader) throws Exception;, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataCache.java, +import org.apache.lucene.index.DirectoryReader;, +    <FD extends AtomicFieldData, IFD extends IndexFieldData.Global<FD>> IFD load(final DirectoryReader indexReader, final IFD indexFieldData) throws Exception;, +        public <FD extends AtomicFieldData, IFD extends IndexFieldData.Global<FD>> IFD load(DirectoryReader indexReader, IFD indexFieldData) throws Exception {, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexOrdinalsFieldData.java, +import org.apache.lucene.index.DirectoryReader;, +    IndexOrdinalsFieldData loadGlobal(DirectoryReader indexReader);, +    IndexOrdinalsFieldData localGlobalDirect(DirectoryReader indexReader) throws Exception;, +++ b/core/src/main/java/org/elasticsearch/common/lucene/index/ElasticsearchDirectoryReader.java, +    public static void addReaderCloseListener(DirectoryReader reader, IndexReader.ReaderClosedListener listener) {, +        if (elasticsearchDirectoryReader != null) {, +    public static ElasticsearchDirectoryReader getElasticsearchDirectoryReader(DirectoryReader reader) {, +++ b/core/src/main/java/org/elasticsearch/common/lucene/uid/Versions.java, +import org.apache.lucene.index.DirectoryReader;, +++ b/core/src/main/java/org/elasticsearch/index/engine/Engine.java, +        private final DirectoryReader reader;, +            this.reader = (DirectoryReader) searcher.getIndexReader();, +        public DirectoryReader reader() {, +            return reader;, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldData.java, +import org.apache.lucene.index.DirectoryReader;, +        IndexFieldData<FD> loadGlobal(DirectoryReader indexReader);, +        IndexFieldData<FD> localGlobalDirect(DirectoryReader indexReader) throws Exception;, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataCache.java, +import org.apache.lucene.index.DirectoryReader;, +    <FD extends AtomicFieldData, IFD extends IndexFieldData.Global<FD>> IFD load(final DirectoryReader indexReader, final IFD indexFieldData) throws Exception;, +        public <FD extends AtomicFieldData, IFD extends IndexFieldData.Global<FD>> IFD load(DirectoryReader indexReader, IFD indexFieldData) throws Exception {, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexOrdinalsFieldData.java, +import org.apache.lucene.index.DirectoryReader;, +    IndexOrdinalsFieldData loadGlobal(DirectoryReader indexReader);]