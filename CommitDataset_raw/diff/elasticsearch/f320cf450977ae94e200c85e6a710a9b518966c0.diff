[+++ b/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +import org.elasticsearch.rest.RestStatus;, +        } else if (clusterState.blocks().hasGlobalBlock(RestStatus.SERVICE_UNAVAILABLE)) {, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +import org.elasticsearch.rest.RestStatus;, +        } else if (clusterState.blocks().hasGlobalBlock(RestStatus.SERVICE_UNAVAILABLE)) {, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/state/ClusterStateRequest.java, +    public ClusterStateRequest filterAll() {, +        filterRoutingTable = true;, +        filterNodes = true;, +        filterMetaData = true;, +        filterBlocks = true;, +        filteredIndices = Strings.EMPTY_ARRAY;, +        filteredIndexTemplates = Strings.EMPTY_ARRAY;, +        return this;, +    }, +, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +import org.elasticsearch.rest.RestStatus;, +        } else if (clusterState.blocks().hasGlobalBlock(RestStatus.SERVICE_UNAVAILABLE)) {, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/state/ClusterStateRequest.java, +    public ClusterStateRequest filterAll() {, +        filterRoutingTable = true;, +        filterNodes = true;, +        filterMetaData = true;, +        filterBlocks = true;, +        filteredIndices = Strings.EMPTY_ARRAY;, +        filteredIndexTemplates = Strings.EMPTY_ARRAY;, +        return this;, +    }, +, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/state/ClusterStateRequestBuilder.java, +     * Filters all data responses., +     */, +    public ClusterStateRequestBuilder setFilterAll() {, +        request.filterAll();, +        return this;, +    }, +, +    public ClusterStateRequestBuilder setFilterBlocks(boolean filter) {, +        request.filterBlocks(filter);, +        return this;, +    }, +, +    /**, +    public ClusterStateRequestBuilder setFilterIndexTemplates(String... templates) {, +        request.filteredIndexTemplates(templates);, +        return this;, +    }, +, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +import org.elasticsearch.rest.RestStatus;, +        } else if (clusterState.blocks().hasGlobalBlock(RestStatus.SERVICE_UNAVAILABLE)) {, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/state/ClusterStateRequest.java, +    public ClusterStateRequest filterAll() {, +        filterRoutingTable = true;, +        filterNodes = true;, +        filterMetaData = true;, +        filterBlocks = true;, +        filteredIndices = Strings.EMPTY_ARRAY;, +        filteredIndexTemplates = Strings.EMPTY_ARRAY;, +        return this;, +    }, +, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/state/ClusterStateRequestBuilder.java, +     * Filters all data responses., +     */, +    public ClusterStateRequestBuilder setFilterAll() {, +        request.filterAll();, +        return this;, +    }, +, +    public ClusterStateRequestBuilder setFilterBlocks(boolean filter) {, +        request.filterBlocks(filter);, +        return this;, +    }, +, +    /**, +    public ClusterStateRequestBuilder setFilterIndexTemplates(String... templates) {, +        request.filteredIndexTemplates(templates);, +        return this;, +    }, +, +++ b/src/main/java/org/elasticsearch/cluster/block/ClusterBlocks.java, +import org.elasticsearch.rest.RestStatus;, +    /**, +     * Is there a global block with the provided status?, +     */, +    public boolean hasGlobalBlock(RestStatus status) {, +        for (ClusterBlock clusterBlock : global) {, +            if (clusterBlock.status().equals(status)) {, +                return true;, +            }, +        }, +        return false;, +    }, +, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +import org.elasticsearch.rest.RestStatus;, +        } else if (clusterState.blocks().hasGlobalBlock(RestStatus.SERVICE_UNAVAILABLE)) {]