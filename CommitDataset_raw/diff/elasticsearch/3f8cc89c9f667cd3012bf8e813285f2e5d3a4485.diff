[+++ b/rest-api-spec/src/main/resources/rest-api-spec/test/suggest/50_completion_with_multi_fields.yml, +, +---, +"Search by suggestion and by keyword sub-field should work":, +, +  - skip:, +      version: " - 6.99.99", +      reason:  "Search by suggestion with multi-fields was introduced 7.0.0", +, +  - do:, +      indices.create:, +        index: completion_with_sub_keyword, +        body:, +          mappings:, +            test:, +              "properties":, +                "suggest_1":, +                  "type" : "completion", +                  "fields":, +                    "text_raw":, +                      "type"  : "keyword", +, +  - do:, +      index:, +        index: completion_with_sub_keyword, +        type:  test, +        id:    1, +        body:, +          suggest_1: "bar", +, +  - do:, +      index:, +        index: completion_with_sub_keyword, +        type:  test, +        id:    2, +        body:, +          suggest_1: "baz", +, +  - do:, +      indices.refresh: {}, +, +  - do:, +      search:, +        index:   completion_with_sub_keyword, +        body:, +          suggest:, +            result:, +              text: "b", +              completion:, +                field: suggest_1, +, +  - length: { suggest.result: 1  }, +  - length: { suggest.result.0.options: 2  }, +, +, +  - do:, +      search:, +        index:   completion_with_sub_keyword, +        body:, +          query:   { term: { suggest_1.text_raw: "bar" }}, +, +  - match: { hits.total: 1 }, +, +, +, +---, +"Search by suggestion on sub field should work":, +, +  - skip:, +      version: " - 6.99.99", +      reason:  "Search by suggestion with multi-fields was introduced 7.0.0", +, +  - do:, +      indices.create:, +        index: completion_with_sub_completion, +        body:, +          mappings:, +            test:, +              "properties":, +                "suggest_1":, +                  "type": "completion", +                  "fields":, +                    "suggest_2":, +                      "type": "completion", +, +  - do:, +      index:, +        index: completion_with_sub_completion, +        type:  test, +        id:    1, +        body:, +          suggest_1: "bar", +, +  - do:, +      index:, +        index: completion_with_sub_completion, +        type:  test, +        id:    2, +        body:, +          suggest_1: "baz"]