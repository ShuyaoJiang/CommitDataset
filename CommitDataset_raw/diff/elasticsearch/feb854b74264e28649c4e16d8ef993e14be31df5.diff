[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java, +, +        // clear unreferenced files, +        translog.clearUnreferenced();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java, +, +        // clear unreferenced files, +        translog.clearUnreferenced();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/translog/Translog.java, +     * Clears unreferenced transaclogs., +     */, +    void clearUnreferenced();, +, +    /**, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java, +, +        // clear unreferenced files, +        translog.clearUnreferenced();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/translog/Translog.java, +     * Clears unreferenced transaclogs., +     */, +    void clearUnreferenced();, +, +    /**, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/translog/fs/FsTranslog.java, +    @Override public void clearUnreferenced() {, +        synchronized (mutex) {, +            File[] files = location.listFiles();, +            if (files != null) {, +                for (File file : files) {, +                    if (file.getName().equals("translog-" + id)) {, +                        continue;, +                    }, +                    try {, +                        file.delete();, +                    } catch (Exception e) {, +                        // ignore, +                    }, +                }, +            }, +        }, +    }, +]