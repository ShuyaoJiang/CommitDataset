[+++ b/src/main/java/org/elasticsearch/gateway/GatewayAllocator.java, +                                String primarySyncId = primaryNodeStore.syncId();, +                                String replicaSyncId = storeFilesMetaData.syncId();, +                                if (replicaSyncId != null && replicaSyncId.equals(primarySyncId)) {, +                                    logger.trace("{}: node [{}] has same sync id {} as primary", shard, discoNode.name(), replicaSyncId);, +                                        String metaDataFileName = storeFileMetaData.name();, +                                        if (primaryNodeStore.fileExists(metaDataFileName) && primaryNodeStore.file(metaDataFileName).isSame(storeFileMetaData)) {]