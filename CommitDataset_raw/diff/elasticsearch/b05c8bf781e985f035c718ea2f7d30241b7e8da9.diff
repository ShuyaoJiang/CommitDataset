[+++ b/x-pack/docs/en/commands/migrate-tool.asciidoc, +== elasticsearch-migrate, +The `elasticsearch-migrate` command migrates existing file-based users and roles, +to the native realm. From 5.0 onward, you should use the `native` realm to, +manage roles and local users., +bin/elasticsearch-migrate, +NOTE: When migrating from Shield 2.x, the `elasticsearch-migrate` tool should be, +run prior to upgrading to ensure all roles can be migrated as some may be in a, +deprecated format that {xpack} cannot read. The `migrate` tool is available in, +Shield 2.4.0 and higher., +The `elasticsearch-migrate` tool loads the existing file-based users and roles, +and calls the user and roles APIs to add them to the native realm. You can, +migrate all users and roles, or specify the ones you want to migrate. Users and, +roles that already exist in the `native` realm are not replaced or, +overridden. If the names you specify with the `--users` and `--roles` options, +don't exist in the `file` realm, they are skipped., +Run the `elasticsearch-migrate` tool when {xpack} is installed. For example:, +$ bin/elasticsearch-migrate native -U http://localhost:9200 -u elastic, +$ bin/elasticsearch-migrate native -U http://localhost:9200 -u elastic, +++ b/x-pack/docs/en/commands/migrate-tool.asciidoc, +== elasticsearch-migrate, +The `elasticsearch-migrate` command migrates existing file-based users and roles, +to the native realm. From 5.0 onward, you should use the `native` realm to, +manage roles and local users., +bin/elasticsearch-migrate, +NOTE: When migrating from Shield 2.x, the `elasticsearch-migrate` tool should be, +run prior to upgrading to ensure all roles can be migrated as some may be in a, +deprecated format that {xpack} cannot read. The `migrate` tool is available in, +Shield 2.4.0 and higher., +The `elasticsearch-migrate` tool loads the existing file-based users and roles, +and calls the user and roles APIs to add them to the native realm. You can, +migrate all users and roles, or specify the ones you want to migrate. Users and, +roles that already exist in the `native` realm are not replaced or, +overridden. If the names you specify with the `--users` and `--roles` options, +don't exist in the `file` realm, they are skipped., +Run the `elasticsearch-migrate` tool when {xpack} is installed. For example:, +$ bin/elasticsearch-migrate native -U http://localhost:9200 -u elastic, +$ bin/elasticsearch-migrate native -U http://localhost:9200 -u elastic, +++ b/x-pack/plugin/security/src/main/bin/elasticsearch-migrate, +#!/bin/bash, +, +# Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one, +# or more contributor license agreements. Licensed under the Elastic License;, +# you may not use this file except in compliance with the Elastic License., +, +source "`dirname "$0"`"/elasticsearch-env, +, +source "`dirname "$0"`"/x-pack-security-env, +, +exec \, +  "$JAVA" \, +  $ES_JAVA_OPTS \, +  -Des.path.home="$ES_HOME" \, +  -Des.path.conf="$ES_PATH_CONF" \, +  -Des.distribution.flavor="$ES_DISTRIBUTION_FLAVOR" \, +  -cp "$ES_CLASSPATH" \, +  org.elasticsearch.xpack.security.authc.esnative.ESNativeRealmMigrateTool \, +  "$@", +++ b/x-pack/docs/en/commands/migrate-tool.asciidoc, +== elasticsearch-migrate, +The `elasticsearch-migrate` command migrates existing file-based users and roles, +to the native realm. From 5.0 onward, you should use the `native` realm to, +manage roles and local users., +bin/elasticsearch-migrate, +NOTE: When migrating from Shield 2.x, the `elasticsearch-migrate` tool should be, +run prior to upgrading to ensure all roles can be migrated as some may be in a, +deprecated format that {xpack} cannot read. The `migrate` tool is available in, +Shield 2.4.0 and higher., +The `elasticsearch-migrate` tool loads the existing file-based users and roles, +and calls the user and roles APIs to add them to the native realm. You can, +migrate all users and roles, or specify the ones you want to migrate. Users and, +roles that already exist in the `native` realm are not replaced or, +overridden. If the names you specify with the `--users` and `--roles` options, +don't exist in the `file` realm, they are skipped., +Run the `elasticsearch-migrate` tool when {xpack} is installed. For example:, +$ bin/elasticsearch-migrate native -U http://localhost:9200 -u elastic, +$ bin/elasticsearch-migrate native -U http://localhost:9200 -u elastic, +++ b/x-pack/plugin/security/src/main/bin/elasticsearch-migrate, +#!/bin/bash, +, +# Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one, +# or more contributor license agreements. Licensed under the Elastic License;, +# you may not use this file except in compliance with the Elastic License., +, +source "`dirname "$0"`"/elasticsearch-env, +, +source "`dirname "$0"`"/x-pack-security-env, +, +exec \, +  "$JAVA" \, +  $ES_JAVA_OPTS \, +  -Des.path.home="$ES_HOME" \, +  -Des.path.conf="$ES_PATH_CONF" \, +  -Des.distribution.flavor="$ES_DISTRIBUTION_FLAVOR" \, +  -cp "$ES_CLASSPATH" \, +  org.elasticsearch.xpack.security.authc.esnative.ESNativeRealmMigrateTool \, +  "$@", +++ b/x-pack/plugin/security/src/main/bin/elasticsearch-migrate.bat, +@echo off, +]