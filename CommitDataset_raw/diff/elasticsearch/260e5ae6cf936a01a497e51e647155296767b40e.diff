[+++ b/sql/server/src/main/java/org/elasticsearch/xpack/sql/execution/search/FieldExtraction.java, +, +    /**, +     * Indicates the depth of the result. Used for counting the actual size of a, +     * result by knowing how many nested levels there are. Typically used by, +     * aggregations., +     *, +     * @return depth of the result, +     */, +    int depth();, +++ b/sql/server/src/main/java/org/elasticsearch/xpack/sql/execution/search/FieldExtraction.java, +, +    /**, +     * Indicates the depth of the result. Used for counting the actual size of a, +     * result by knowing how many nested levels there are. Typically used by, +     * aggregations., +     *, +     * @return depth of the result, +     */, +    int depth();, +++ b/sql/server/src/main/java/org/elasticsearch/xpack/sql/expression/function/scalar/processor/definition/AggNameInput.java, +public class AggNameInput extends CommonNonExecutableInput<String> {, +    public final boolean resolved() {, +        return false;, +++ b/sql/server/src/main/java/org/elasticsearch/xpack/sql/execution/search/FieldExtraction.java, +, +    /**, +     * Indicates the depth of the result. Used for counting the actual size of a, +     * result by knowing how many nested levels there are. Typically used by, +     * aggregations., +     *, +     * @return depth of the result, +     */, +    int depth();, +++ b/sql/server/src/main/java/org/elasticsearch/xpack/sql/expression/function/scalar/processor/definition/AggNameInput.java, +public class AggNameInput extends CommonNonExecutableInput<String> {, +    public final boolean resolved() {, +        return false;, +++ b/sql/server/src/main/java/org/elasticsearch/xpack/sql/expression/function/scalar/processor/definition/AggPathInput.java, +import org.elasticsearch.xpack.sql.execution.search.SqlSourceBuilder;, +public class AggPathInput extends CommonNonExecutableInput<String> {, +++ b/sql/server/src/main/java/org/elasticsearch/xpack/sql/execution/search/FieldExtraction.java, +, +    /**, +     * Indicates the depth of the result. Used for counting the actual size of a, +     * result by knowing how many nested levels there are. Typically used by, +     * aggregations., +     *, +     * @return depth of the result, +     */, +    int depth();, +++ b/sql/server/src/main/java/org/elasticsearch/xpack/sql/expression/function/scalar/processor/definition/AggNameInput.java, +public class AggNameInput extends CommonNonExecutableInput<String> {, +    public final boolean resolved() {, +        return false;, +++ b/sql/server/src/main/java/org/elasticsearch/xpack/sql/expression/function/scalar/processor/definition/AggPathInput.java, +import org.elasticsearch.xpack.sql.execution.search.SqlSourceBuilder;, +public class AggPathInput extends CommonNonExecutableInput<String> {, +++ b/sql/server/src/main/java/org/elasticsearch/xpack/sql/expression/function/scalar/processor/definition/AggValueInput.java, +import org.elasticsearch.xpack.sql.execution.search.SqlSourceBuilder;, +    public final void collectFields(SqlSourceBuilder sourceBuilder) {, +        // Nothing to collect, +    }, +, +    @Override, +    public final int depth() {, +        return 0;, +    }, +, +    @Override, +++ b/sql/server/src/main/java/org/elasticsearch/xpack/sql/execution/search/FieldExtraction.java, +, +    /**, +     * Indicates the depth of the result. Used for counting the actual size of a, +     * result by knowing how many nested levels there are. Typically used by, +     * aggregations., +     *, +     * @return depth of the result, +     */, +    int depth();, +++ b/sql/server/src/main/java/org/elasticsearch/xpack/sql/expression/function/scalar/processor/definition/AggNameInput.java, +public class AggNameInput extends CommonNonExecutableInput<String> {, +    public final boolean resolved() {, +        return false;, +++ b/sql/server/src/main/java/org/elasticsearch/xpack/sql/expression/function/scalar/processor/definition/AggPathInput.java, +import org.elasticsearch.xpack.sql.execution.search.SqlSourceBuilder;, +public class AggPathInput extends CommonNonExecutableInput<String> {, +++ b/sql/server/src/main/java/org/elasticsearch/xpack/sql/expression/function/scalar/processor/definition/AggValueInput.java, +import org.elasticsearch.xpack.sql.execution.search.SqlSourceBuilder;, +    public final void collectFields(SqlSourceBuilder sourceBuilder) {, +        // Nothing to collect, +    }, +, +    @Override, +    public final int depth() {, +        return 0;, +    }, +, +    @Override, +++ b/sql/server/src/main/java/org/elasticsearch/xpack/sql/expression/function/scalar/processor/definition/AttributeInput.java]