[+++ b/plugins/analysis-icu/src/main/java/org/elasticsearch/index/analysis/IcuCollationTokenFilterFactory.java, +                collator = Collator.getInstance(ULocale.ROOT);, +++ b/plugins/analysis-icu/src/main/java/org/elasticsearch/index/analysis/IcuCollationTokenFilterFactory.java, +                collator = Collator.getInstance(ULocale.ROOT);, +++ b/plugins/analysis-icu/src/main/java/org/elasticsearch/index/mapper/ICUCollationKeywordFieldMapper.java, +                    collator = Collator.getInstance(ULocale.ROOT);, +++ b/plugins/analysis-icu/src/main/java/org/elasticsearch/index/analysis/IcuCollationTokenFilterFactory.java, +                collator = Collator.getInstance(ULocale.ROOT);, +++ b/plugins/analysis-icu/src/main/java/org/elasticsearch/index/mapper/ICUCollationKeywordFieldMapper.java, +                    collator = Collator.getInstance(ULocale.ROOT);, +++ b/plugins/analysis-icu/src/test/java/org/elasticsearch/index/analysis/SimpleIcuCollationTokenFilterTests.java, +     * Tests usage where we do not provide a language or locale, +     */, +    public void testDefaultUsage() throws Exception {, +        Settings settings = Settings.builder(), +                .put("index.analysis.filter.myCollator.type", "icu_collation"), +                .put("index.analysis.filter.myCollator.strength", "primary"), +                .build();, +        TestAnalysis analysis = createTestAnalysis(new Index("test", "_na_"), settings, new AnalysisICUPlugin());, +, +        TokenFilterFactory filterFactory = analysis.tokenFilter.get("myCollator");, +        assertCollatesToSame(filterFactory, "FOO", "foo");, +    }, +    /*, +++ b/plugins/analysis-icu/src/main/java/org/elasticsearch/index/analysis/IcuCollationTokenFilterFactory.java, +                collator = Collator.getInstance(ULocale.ROOT);, +++ b/plugins/analysis-icu/src/main/java/org/elasticsearch/index/mapper/ICUCollationKeywordFieldMapper.java, +                    collator = Collator.getInstance(ULocale.ROOT);, +++ b/plugins/analysis-icu/src/test/java/org/elasticsearch/index/analysis/SimpleIcuCollationTokenFilterTests.java, +     * Tests usage where we do not provide a language or locale, +     */, +    public void testDefaultUsage() throws Exception {, +        Settings settings = Settings.builder(), +                .put("index.analysis.filter.myCollator.type", "icu_collation"), +                .put("index.analysis.filter.myCollator.strength", "primary"), +                .build();, +        TestAnalysis analysis = createTestAnalysis(new Index("test", "_na_"), settings, new AnalysisICUPlugin());, +, +        TokenFilterFactory filterFactory = analysis.tokenFilter.get("myCollator");, +        assertCollatesToSame(filterFactory, "FOO", "foo");, +    }, +    /*, +++ b/plugins/analysis-icu/src/test/java/org/elasticsearch/index/mapper/CollationFieldTypeTests.java, +        Collator collator = Collator.getInstance(ULocale.ROOT).freeze();, +        Collator collator = Collator.getInstance(ULocale.ROOT).freeze();, +++ b/plugins/analysis-icu/src/main/java/org/elasticsearch/index/analysis/IcuCollationTokenFilterFactory.java, +                collator = Collator.getInstance(ULocale.ROOT);, +++ b/plugins/analysis-icu/src/main/java/org/elasticsearch/index/mapper/ICUCollationKeywordFieldMapper.java, +                    collator = Collator.getInstance(ULocale.ROOT);, +++ b/plugins/analysis-icu/src/test/java/org/elasticsearch/index/analysis/SimpleIcuCollationTokenFilterTests.java, +     * Tests usage where we do not provide a language or locale, +     */, +    public void testDefaultUsage() throws Exception {, +        Settings settings = Settings.builder(), +                .put("index.analysis.filter.myCollator.type", "icu_collation"), +                .put("index.analysis.filter.myCollator.strength", "primary"), +                .build();, +        TestAnalysis analysis = createTestAnalysis(new Index("test", "_na_"), settings, new AnalysisICUPlugin());, +, +        TokenFilterFactory filterFactory = analysis.tokenFilter.get("myCollator");, +        assertCollatesToSame(filterFactory, "FOO", "foo");, +    }, +    /*, +++ b/plugins/analysis-icu/src/test/java/org/elasticsearch/index/mapper/CollationFieldTypeTests.java, +        Collator collator = Collator.getInstance(ULocale.ROOT).freeze();, +        Collator collator = Collator.getInstance(ULocale.ROOT).freeze();, +++ b/plugins/analysis-icu/src/test/java/org/elasticsearch/index/mapper/ICUCollationKeywordFieldMapperTests.java, +        Collator collator = Collator.getInstance(ULocale.ROOT);, +        Collator collator = Collator.getInstance(ULocale.ROOT);, +        Collator collator = Collator.getInstance(ULocale.ROOT);, +        Collator collator = Collator.getInstance(ULocale.ROOT);, +        collator = Collator.getInstance(ULocale.ROOT);]