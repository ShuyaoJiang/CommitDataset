[+++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/src/main/resources/forbidden/es-core-signatures.txt, +, +@defaultMessage Don't use MethodHandles in slow ways, except in tests., +java.lang.invoke.MethodHandle#invoke(java.lang.Object[]), +java.lang.invoke.MethodHandle#invokeWithArguments(java.lang.Object[]), +java.lang.invoke.MethodHandle#invokeWithArguments(java.util.List), +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/src/main/resources/forbidden/es-core-signatures.txt, +, +@defaultMessage Don't use MethodHandles in slow ways, except in tests., +java.lang.invoke.MethodHandle#invoke(java.lang.Object[]), +java.lang.invoke.MethodHandle#invokeWithArguments(java.lang.Object[]), +java.lang.invoke.MethodHandle#invokeWithArguments(java.util.List), +++ b/core/src/main/java/org/elasticsearch/action/ActionListenerResponseHandler.java, +    private final ActionListener<Response> listener;, +    public ActionListenerResponseHandler(ActionListener<Response> listener, Supplier<Response> responseSupplier) {, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/src/main/resources/forbidden/es-core-signatures.txt, +, +@defaultMessage Don't use MethodHandles in slow ways, except in tests., +java.lang.invoke.MethodHandle#invoke(java.lang.Object[]), +java.lang.invoke.MethodHandle#invokeWithArguments(java.lang.Object[]), +java.lang.invoke.MethodHandle#invokeWithArguments(java.util.List), +++ b/core/src/main/java/org/elasticsearch/action/ActionListenerResponseHandler.java, +    private final ActionListener<Response> listener;, +    public ActionListenerResponseHandler(ActionListener<Response> listener, Supplier<Response> responseSupplier) {, +++ b/core/src/main/java/org/elasticsearch/action/DocWriteResponse.java, +import org.elasticsearch.action.support.WriteRequest;, +import org.elasticsearch.action.support.WriteResponse;, +import org.elasticsearch.action.support.WriteRequest.RefreshPolicy;, +import org.elasticsearch.action.support.replication.ReplicationResponse;, +import org.elasticsearch.index.IndexSettings;, +public abstract class DocWriteResponse extends ReplicationResponse implements WriteResponse, StatusToXContent {, +    private boolean forcedRefresh;, +    public DocWriteResponse(ShardId shardId, String type, String id, long version) {, +, +     * Did this request force a refresh? Requests that set {@link WriteRequest#setRefreshPolicy(RefreshPolicy)} to, +     * {@link RefreshPolicy#IMMEDIATE} will always return true for this. Requests that set it to {@link RefreshPolicy#WAIT_UNTIL} will, +     * only return true here if they run out of refresh listener slots (see {@link IndexSettings#MAX_REFRESH_LISTENERS_PER_SHARD})., +    public boolean forcedRefresh() {, +        return forcedRefresh;, +    }, +, +    @Override, +    public void setForcedRefresh(boolean forcedRefresh) {, +        this.forcedRefresh = forcedRefresh;, +, +        forcedRefresh = in.readBoolean();, +        out.writeBoolean(forcedRefresh);, +            .field(Fields._VERSION, version), +            .field("forced_refresh", forcedRefresh);, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/src/main/resources/forbidden/es-core-signatures.txt, +, +@defaultMessage Don't use MethodHandles in slow ways, except in tests., +java.lang.invoke.MethodHandle#invoke(java.lang.Object[]), +java.lang.invoke.MethodHandle#invokeWithArguments(java.lang.Object[]), +java.lang.invoke.MethodHandle#invokeWithArguments(java.util.List), +++ b/core/src/main/java/org/elasticsearch/action/ActionListenerResponseHandler.java, +    private final ActionListener<Response> listener;, +    public ActionListenerResponseHandler(ActionListener<Response> listener, Supplier<Response> responseSupplier) {, +++ b/core/src/main/java/org/elasticsearch/action/DocWriteResponse.java, +import org.elasticsearch.action.support.WriteRequest;, +import org.elasticsearch.action.support.WriteResponse;, +import org.elasticsearch.action.support.WriteRequest.RefreshPolicy;, +import org.elasticsearch.action.support.replication.ReplicationResponse;, +import org.elasticsearch.index.IndexSettings;, +public abstract class DocWriteResponse extends ReplicationResponse implements WriteResponse, StatusToXContent {, +    private boolean forcedRefresh;, +    public DocWriteResponse(ShardId shardId, String type, String id, long version) {, +, +     * Did this request force a refresh? Requests that set {@link WriteRequest#setRefreshPolicy(RefreshPolicy)} to, +     * {@link RefreshPolicy#IMMEDIATE} will always return true for this. Requests that set it to {@link RefreshPolicy#WAIT_UNTIL} will, +     * only return true here if they run out of refresh listener slots (see {@link IndexSettings#MAX_REFRESH_LISTENERS_PER_SHARD})., +    public boolean forcedRefresh() {, +        return forcedRefresh;, +    }, +, +    @Override, +    public void setForcedRefresh(boolean forcedRefresh) {, +        this.forcedRefresh = forcedRefresh;, +, +        forcedRefresh = in.readBoolean();, +        out.writeBoolean(forcedRefresh);, +            .field(Fields._VERSION, version), +            .field("forced_refresh", forcedRefresh);, +++ /dev/null, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/src/main/resources/forbidden/es-core-signatures.txt, +, +@defaultMessage Don't use MethodHandles in slow ways, except in tests., +java.lang.invoke.MethodHandle#invoke(java.lang.Object[]), +java.lang.invoke.MethodHandle#invokeWithArguments(java.lang.Object[]), +java.lang.invoke.MethodHandle#invokeWithArguments(java.util.List), +++ b/core/src/main/java/org/elasticsearch/action/ActionListenerResponseHandler.java, +    private final ActionListener<Response> listener;, +    public ActionListenerResponseHandler(ActionListener<Response> listener, Supplier<Response> responseSupplier) {, +++ b/core/src/main/java/org/elasticsearch/action/DocWriteResponse.java]