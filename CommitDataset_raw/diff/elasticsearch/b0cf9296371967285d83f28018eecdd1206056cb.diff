[+++ b/src/test/java/org/elasticsearch/test/InternalTestCluster.java, +import com.carrotsearch.randomizedtesting.RandomizedTest;, +    private static final boolean ENABLE_MOCK_MODULES = RandomizedTest.systemPropertyAsBoolean(TESTS_ENABLE_MOCK_MODULES, true);, +            return transportClient = TransportClientFactory.noSniff(settingsSource.transportClient()).client(node, clusterName);, +        public Client client(Node node, String clusterName) {, +                if (enableRandomBenchNodes && usually(random)) {, +        if (RandomizedTest.isNightly() && rarely(random)) {]