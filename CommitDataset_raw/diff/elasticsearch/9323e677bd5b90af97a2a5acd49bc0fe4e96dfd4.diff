[+++ b/src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java, +import org.elasticsearch.action.count.CountResponse;, +    public static void assertHitCount(CountResponse countResponse, long expectedHitCount) {, +        assertThat(countResponse.getCount(), is(expectedHitCount));, +    }, +, +++ b/src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java, +import org.elasticsearch.action.count.CountResponse;, +    public static void assertHitCount(CountResponse countResponse, long expectedHitCount) {, +        assertThat(countResponse.getCount(), is(expectedHitCount));, +    }, +, +++ b/src/test/java/org/elasticsearch/test/integration/gateway/local/SimpleRecoveryLocalGatewayTests.java, +        assertHitCount(node1.client().prepareCount().setQuery(termQuery("appAccountIds", 179)).execute().actionGet(), 2);, +        assertHitCount(count, 2);, +        assertHitCount(count, 2);, +            assertHitCount(node1.client().prepareCount().setQuery(matchAllQuery()).execute().actionGet(), 2);, +            assertHitCount(node1.client().prepareCount().setQuery(termQuery("field", "value1")).execute().actionGet(), 1);, +            assertHitCount(node1.client().prepareCount().setQuery(termQuery("field", "value2")).execute().actionGet(), 1);, +            assertHitCount(node1.client().prepareCount().setQuery(termQuery("num", 179)).execute().actionGet(), 1);, +            assertHitCount(node1.client().prepareCount().setQuery(matchAllQuery()).execute().actionGet(), 2);, +            assertHitCount(node1.client().prepareCount().setQuery(termQuery("field", "value1")).execute().actionGet(), 1);, +            assertHitCount(node1.client().prepareCount().setQuery(termQuery("field", "value2")).execute().actionGet(), 1);, +            assertHitCount(node1.client().prepareCount().setQuery(termQuery("num", 179)).execute().actionGet(), 1);, +            assertHitCount(node1.client().prepareCount().setQuery(matchAllQuery()).execute().actionGet(), 2);, +            assertHitCount(node1.client().prepareCount().setQuery(termQuery("field", "value1")).execute().actionGet(), 1);, +            assertHitCount(node1.client().prepareCount().setQuery(termQuery("field", "value2")).execute().actionGet(), 1);, +            assertHitCount(node1.client().prepareCount().setQuery(termQuery("num", 179)).execute().actionGet(), 1);, +        assertHitCount(node1.client().prepareCount().setQuery(matchAllQuery()).execute().actionGet(), 2);, +            assertHitCount(node1.client().prepareCount().setQuery(matchAllQuery()).execute().actionGet(), 2);, +            assertHitCount(node1.client().prepareCount().setQuery(matchAllQuery()).execute().actionGet(), 2);, +            assertHitCount(node1.client().prepareCount().setQuery(matchAllQuery()).execute().actionGet(), 2);, +            assertHitCount(node1.client().prepareCount().setQuery(matchAllQuery()).execute().actionGet(), 2);, +            assertHitCount(node1.client().prepareCount().setQuery(matchAllQuery()).execute().actionGet(), 2);, +            assertHitCount(node2.client().prepareCount().setQuery(matchAllQuery()).execute().actionGet(), 3);, +            assertHitCount(node1.client().prepareCount().setQuery(matchAllQuery()).execute().actionGet(), 3);, +        assertHitCount(client("node2").prepareCount("test").setQuery(QueryBuilders.matchAllQuery()).execute().actionGet(), 1);, +++ b/src/test/java/org/elasticsearch/test/hamcrest/ElasticsearchAssertions.java, +import org.elasticsearch.action.count.CountResponse;, +    public static void assertHitCount(CountResponse countResponse, long expectedHitCount) {, +        assertThat(countResponse.getCount(), is(expectedHitCount));, +    }, +, +++ b/src/test/java/org/elasticsearch/test/integration/gateway/local/SimpleRecoveryLocalGatewayTests.java, +        assertHitCount(node1.client().prepareCount().setQuery(termQuery("appAccountIds", 179)).execute().actionGet(), 2);, +        assertHitCount(count, 2);, +        assertHitCount(count, 2);, +            assertHitCount(node1.client().prepareCount().setQuery(matchAllQuery()).execute().actionGet(), 2);, +            assertHitCount(node1.client().prepareCount().setQuery(termQuery("field", "value1")).execute().actionGet(), 1);, +            assertHitCount(node1.client().prepareCount().setQuery(termQuery("field", "value2")).execute().actionGet(), 1);, +            assertHitCount(node1.client().prepareCount().setQuery(termQuery("num", 179)).execute().actionGet(), 1);, +            assertHitCount(node1.client().prepareCount().setQuery(matchAllQuery()).execute().actionGet(), 2);, +            assertHitCount(node1.client().prepareCount().setQuery(termQuery("field", "value1")).execute().actionGet(), 1);, +            assertHitCount(node1.client().prepareCount().setQuery(termQuery("field", "value2")).execute().actionGet(), 1);, +            assertHitCount(node1.client().prepareCount().setQuery(termQuery("num", 179)).execute().actionGet(), 1);, +            assertHitCount(node1.client().prepareCount().setQuery(matchAllQuery()).execute().actionGet(), 2);, +            assertHitCount(node1.client().prepareCount().setQuery(termQuery("field", "value1")).execute().actionGet(), 1);, +            assertHitCount(node1.client().prepareCount().setQuery(termQuery("field", "value2")).execute().actionGet(), 1);, +            assertHitCount(node1.client().prepareCount().setQuery(termQuery("num", 179)).execute().actionGet(), 1);, +        assertHitCount(node1.client().prepareCount().setQuery(matchAllQuery()).execute().actionGet(), 2);, +            assertHitCount(node1.client().prepareCount().setQuery(matchAllQuery()).execute().actionGet(), 2);, +            assertHitCount(node1.client().prepareCount().setQuery(matchAllQuery()).execute().actionGet(), 2);, +            assertHitCount(node1.client().prepareCount().setQuery(matchAllQuery()).execute().actionGet(), 2);, +            assertHitCount(node1.client().prepareCount().setQuery(matchAllQuery()).execute().actionGet(), 2);, +            assertHitCount(node1.client().prepareCount().setQuery(matchAllQuery()).execute().actionGet(), 2);, +            assertHitCount(node2.client().prepareCount().setQuery(matchAllQuery()).execute().actionGet(), 3);, +            assertHitCount(node1.client().prepareCount().setQuery(matchAllQuery()).execute().actionGet(), 3);, +        assertHitCount(client("node2").prepareCount("test").setQuery(QueryBuilders.matchAllQuery()).execute().actionGet(), 1);, +++ b/src/test/java/org/elasticsearch/test/integration/search/rescore/QueryRescorerTests.java, +        assertFirstHit(searchResponse, hasId("1"));, +        assertSecondHit(searchResponse, hasId("2"));, +        assertThirdHit(searchResponse, hasId("3"));, +        assertFirstHit(searchResponse, hasId("1"));, +        assertSecondHit(searchResponse, hasId("2"));, +        assertThirdHit(searchResponse, hasId("3"));, +        assertFirstHit(searchResponse, hasId("2"));, +        assertSecondHit(searchResponse, hasId("6"));, +        assertThirdHit(searchResponse, hasId("3"));, +        assertFirstHit(searchResponse, hasId("2"));, +        assertSecondHit(searchResponse, hasId("6"));, +        assertThirdHit(searchResponse, hasId("3"));, +        assertFirstHit(searchResponse, hasId("1"));, +        assertSecondHit(searchResponse, hasId("2"));, +        assertThirdHit(searchResponse, hasId("3"));]