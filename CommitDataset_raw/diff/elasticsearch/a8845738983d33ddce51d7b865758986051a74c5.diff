[+++ b/core/src/test/java/org/elasticsearch/cluster/routing/allocation/FilterAllocationDeciderTests.java, +import org.elasticsearch.cluster.routing.ShardRouting;, +        ShardRouting primaryShard = routingTable.index("idx").shard(0).primaryShard();, +        if (primaryShard.recoverySource().getType() == RecoverySource.Type.LOCAL_SHARDS) {, +            assertEquals("initial allocation of the shrunken index is only allowed on nodes [_id:\"node2\"] that " +, +                         "hold a copy of every shard in the index", decision.getExplanation());, +        } else {, +        }]