[+++ b/pom.xml, +    <version>1.0.0-beta2-SNAPSHOT</version>, +        <resources>, +            <resource>, +                <directory>src/main/resources</directory>, +                <filtering>true</filtering>, +            </resource>, +        </resources>, +, +            <plugin>, +                <groupId>org.codehaus.mojo</groupId>, +                <artifactId>buildnumber-maven-plugin</artifactId>, +                <version>1.3</version>, +                <executions>, +                    <execution>, +                        <phase>validate</phase>, +                        <goals>, +                            <goal>create</goal>, +                        </goals>, +                    </execution>, +                </executions>, +                <configuration>, +                    <doCheck>false</doCheck>, +                    <doUpdate>false</doUpdate>, +                </configuration>, +            </plugin>, +, +++ b/pom.xml, +    <version>1.0.0-beta2-SNAPSHOT</version>, +        <resources>, +            <resource>, +                <directory>src/main/resources</directory>, +                <filtering>true</filtering>, +            </resource>, +        </resources>, +, +            <plugin>, +                <groupId>org.codehaus.mojo</groupId>, +                <artifactId>buildnumber-maven-plugin</artifactId>, +                <version>1.3</version>, +                <executions>, +                    <execution>, +                        <phase>validate</phase>, +                        <goals>, +                            <goal>create</goal>, +                        </goals>, +                    </execution>, +                </executions>, +                <configuration>, +                    <doCheck>false</doCheck>, +                    <doUpdate>false</doUpdate>, +                </configuration>, +            </plugin>, +, +++ b/src/main/java/org/elasticsearch/alerts/AlertsBuild.java, +/*, + * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one, + * or more contributor license agreements. Licensed under the Elastic License;, + * you may not use this file except in compliance with the Elastic License., + */, +package org.elasticsearch.alerts;, +, +import org.elasticsearch.common.io.FastStringReader;, +import org.elasticsearch.common.io.Streams;, +import org.elasticsearch.common.io.stream.StreamInput;, +import org.elasticsearch.common.io.stream.StreamOutput;, +import org.elasticsearch.common.joda.time.DateTimeZone;, +import org.elasticsearch.common.joda.time.format.ISODateTimeFormat;, +, +import java.io.IOException;, +import java.util.Properties;, +, +/**, + */, +public class AlertsBuild {, +, +    public static final AlertsBuild CURRENT;, +, +    static {, +        String hash = "NA";, +        String hashShort = "NA";, +        String timestamp = "NA";, +, +        try {, +            String properties = Streams.copyToStringFromClasspath("/alerts-build.properties");, +            Properties props = new Properties();, +            props.load(new FastStringReader(properties));, +            hash = props.getProperty("hash", hash);, +            if (!hash.equals("NA")) {, +                hashShort = hash.substring(0, 7);, +            }, +            String gitTimestampRaw = props.getProperty("timestamp");, +            if (gitTimestampRaw != null) {, +                timestamp = ISODateTimeFormat.dateTimeNoMillis().withZone(DateTimeZone.UTC).print(Long.parseLong(gitTimestampRaw));, +            }, +        } catch (Exception e) {, +            // just ignore..., +        }, +, +        CURRENT = new AlertsBuild(hash, hashShort, timestamp);]