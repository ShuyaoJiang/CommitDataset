[+++ b/distribution/src/bin/elasticsearch-node, +#!/bin/bash, +, +ES_MAIN_CLASS=org.elasticsearch.cluster.coordination.NodeToolCli \, +  "`dirname "$0"`"/elasticsearch-cli \, +  "$@", +++ b/distribution/src/bin/elasticsearch-node, +#!/bin/bash, +, +ES_MAIN_CLASS=org.elasticsearch.cluster.coordination.NodeToolCli \, +  "`dirname "$0"`"/elasticsearch-cli \, +  "$@", +++ b/distribution/src/bin/elasticsearch-node.bat, +@echo off, +, +setlocal enabledelayedexpansion, +setlocal enableextensions, +, +set ES_MAIN_CLASS=org.elasticsearch.cluster.coordination.NodeToolCli, +call "%~dp0elasticsearch-cli.bat" ^, +  %%* ^, +  || exit /b 1, +, +endlocal, +endlocal, +++ b/distribution/src/bin/elasticsearch-node, +#!/bin/bash, +, +ES_MAIN_CLASS=org.elasticsearch.cluster.coordination.NodeToolCli \, +  "`dirname "$0"`"/elasticsearch-cli \, +  "$@", +++ b/distribution/src/bin/elasticsearch-node.bat, +@echo off, +, +setlocal enabledelayedexpansion, +setlocal enableextensions, +, +set ES_MAIN_CLASS=org.elasticsearch.cluster.coordination.NodeToolCli, +call "%~dp0elasticsearch-cli.bat" ^, +  %%* ^, +  || exit /b 1, +, +endlocal, +endlocal, +++ b/qa/vagrant/src/main/java/org/elasticsearch/packaging/test/ArchiveTestCase.java, +    public void test100ElasticsearchShardCliPackaging() {, +    public void test110ElasticsearchNodeCliPackaging() {, +        assumeThat(installation, is(notNullValue()));, +, +        final Installation.Executables bin = installation.executables();, +        final Shell sh = new Shell();, +, +        Platforms.PlatformAction action = () -> {, +            final Result result = sh.run(bin.elasticsearchNode + " -h");, +            assertThat(result.stdout,, +                    containsString("A CLI tool to unsafely recover a cluster after the permanent loss of too many master-eligible nodes"));, +        };, +, +        if (distribution().equals(Distribution.DEFAULT_TAR) || distribution().equals(Distribution.DEFAULT_ZIP)) {, +            Platforms.onLinux(action);, +            Platforms.onWindows(action);, +        }, +    }, +, +++ b/distribution/src/bin/elasticsearch-node, +#!/bin/bash, +, +ES_MAIN_CLASS=org.elasticsearch.cluster.coordination.NodeToolCli \, +  "`dirname "$0"`"/elasticsearch-cli \, +  "$@", +++ b/distribution/src/bin/elasticsearch-node.bat, +@echo off, +, +setlocal enabledelayedexpansion, +setlocal enableextensions, +, +set ES_MAIN_CLASS=org.elasticsearch.cluster.coordination.NodeToolCli, +call "%~dp0elasticsearch-cli.bat" ^, +  %%* ^, +  || exit /b 1, +, +endlocal, +endlocal, +++ b/qa/vagrant/src/main/java/org/elasticsearch/packaging/test/ArchiveTestCase.java, +    public void test100ElasticsearchShardCliPackaging() {, +    public void test110ElasticsearchNodeCliPackaging() {, +        assumeThat(installation, is(notNullValue()));, +, +        final Installation.Executables bin = installation.executables();, +        final Shell sh = new Shell();, +, +        Platforms.PlatformAction action = () -> {, +            final Result result = sh.run(bin.elasticsearchNode + " -h");, +            assertThat(result.stdout,, +                    containsString("A CLI tool to unsafely recover a cluster after the permanent loss of too many master-eligible nodes"));, +        };, +, +        if (distribution().equals(Distribution.DEFAULT_TAR) || distribution().equals(Distribution.DEFAULT_ZIP)) {, +            Platforms.onLinux(action);, +            Platforms.onWindows(action);]