[+++ b/core/src/main/java/org/elasticsearch/action/ActionWriteResponse.java, +public class ActionWriteResponse extends ActionResponse {, +++ b/core/src/main/java/org/elasticsearch/action/ActionWriteResponse.java, +public class ActionWriteResponse extends ActionResponse {, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/flush/FlushResponse.java, +++ b/core/src/main/java/org/elasticsearch/action/ActionWriteResponse.java, +public class ActionWriteResponse extends ActionResponse {, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/flush/FlushResponse.java, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/flush/ShardFlushRequest.java, +import org.elasticsearch.action.support.replication.ReplicationRequest;, +public class ShardFlushRequest extends ReplicationRequest<ShardFlushRequest> {, +, +    public ShardFlushRequest(FlushRequest request) {, +        super(request);, +    public ShardFlushRequest() {, +    }, +, +    FlushRequest getRequest() {, +        return request;, +    }, +, +++ b/core/src/main/java/org/elasticsearch/action/ActionWriteResponse.java, +public class ActionWriteResponse extends ActionResponse {, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/flush/FlushResponse.java, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/flush/ShardFlushRequest.java, +import org.elasticsearch.action.support.replication.ReplicationRequest;, +public class ShardFlushRequest extends ReplicationRequest<ShardFlushRequest> {, +, +    public ShardFlushRequest(FlushRequest request) {, +        super(request);, +    public ShardFlushRequest() {, +    }, +, +    FlushRequest getRequest() {, +        return request;, +    }, +, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/action/ActionWriteResponse.java, +public class ActionWriteResponse extends ActionResponse {, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/flush/FlushResponse.java, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/flush/ShardFlushRequest.java, +import org.elasticsearch.action.support.replication.ReplicationRequest;, +public class ShardFlushRequest extends ReplicationRequest<ShardFlushRequest> {, +, +    public ShardFlushRequest(FlushRequest request) {, +        super(request);, +    public ShardFlushRequest() {, +    }, +, +    FlushRequest getRequest() {, +        return request;, +    }, +, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/flush/TransportFlushAction.java, +import org.elasticsearch.action.ActionWriteResponse;, +import org.elasticsearch.action.support.replication.TransportBroadcastReplicationAction;, +import org.elasticsearch.index.shard.ShardId;, +public class TransportFlushAction extends TransportBroadcastReplicationAction<FlushRequest, FlushResponse, ShardFlushRequest, ActionWriteResponse> {, +                                TransportService transportService, ActionFilters actionFilters,, +                                IndexNameExpressionResolver indexNameExpressionResolver,, +                                TransportShardFlushAction replicatedFlushAction) {, +        super(FlushAction.NAME, FlushRequest.class, settings, threadPool, clusterService, transportService, actionFilters, indexNameExpressionResolver, replicatedFlushAction);, +    protected ActionWriteResponse newShardResponse() {, +        return new ActionWriteResponse();, +    protected ShardFlushRequest newShardRequest(FlushRequest request, ShardId shardId) {, +        return new ShardFlushRequest(request).setShardId(shardId).timeout("0ms");, +    protected FlushResponse newResponse(int successfulShards, int failedShards, int totalNumCopies, List<ShardOperationFailedException> shardFailures) {, +        return new FlushResponse(totalNumCopies, successfulShards, failedShards, shardFailures);, +++ b/core/src/main/java/org/elasticsearch/action/ActionWriteResponse.java, +public class ActionWriteResponse extends ActionResponse {, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/flush/FlushResponse.java, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/flush/ShardFlushRequest.java, +import org.elasticsearch.action.support.replication.ReplicationRequest;, +public class ShardFlushRequest extends ReplicationRequest<ShardFlushRequest> {, +, +    public ShardFlushRequest(FlushRequest request) {, +        super(request);, +    public ShardFlushRequest() {, +    }, +, +    FlushRequest getRequest() {, +        return request;, +    }, +, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/flush/TransportFlushAction.java, +import org.elasticsearch.action.ActionWriteResponse;, +import org.elasticsearch.action.support.replication.TransportBroadcastReplicationAction;, +import org.elasticsearch.index.shard.ShardId;, +public class TransportFlushAction extends TransportBroadcastReplicationAction<FlushRequest, FlushResponse, ShardFlushRequest, ActionWriteResponse> {, +                                TransportService transportService, ActionFilters actionFilters,, +                                IndexNameExpressionResolver indexNameExpressionResolver,, +                                TransportShardFlushAction replicatedFlushAction) {, +        super(FlushAction.NAME, FlushRequest.class, settings, threadPool, clusterService, transportService, actionFilters, indexNameExpressionResolver, replicatedFlushAction);, +    protected ActionWriteResponse newShardResponse() {, +        return new ActionWriteResponse();, +    protected ShardFlushRequest newShardRequest(FlushRequest request, ShardId shardId) {, +        return new ShardFlushRequest(request).setShardId(shardId).timeout("0ms");]