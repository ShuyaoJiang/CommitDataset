[+++ b/core/src/main/java/org/elasticsearch/search/aggregations/AggregationPhase.java, +import org.elasticsearch.search.profile.query.CollectorResult;, +import org.elasticsearch.search.profile.query.InternalProfileCollector;, +                    context.getProfilers().addQueryProfiler().setCollector(profileCollector);, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/AggregationPhase.java, +import org.elasticsearch.search.profile.query.CollectorResult;, +import org.elasticsearch.search.profile.query.InternalProfileCollector;, +                    context.getProfilers().addQueryProfiler().setCollector(profileCollector);, +++ b/core/src/main/java/org/elasticsearch/search/internal/ContextIndexSearcher.java, +import org.elasticsearch.search.profile.query.ProfileWeight;, +import org.elasticsearch.search.profile.query.QueryProfileBreakdown;, +import org.elasticsearch.search.profile.query.QueryProfiler;, +import org.elasticsearch.search.profile.query.QueryTimingType;, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/AggregationPhase.java, +import org.elasticsearch.search.profile.query.CollectorResult;, +import org.elasticsearch.search.profile.query.InternalProfileCollector;, +                    context.getProfilers().addQueryProfiler().setCollector(profileCollector);, +++ b/core/src/main/java/org/elasticsearch/search/internal/ContextIndexSearcher.java, +import org.elasticsearch.search.profile.query.ProfileWeight;, +import org.elasticsearch.search.profile.query.QueryProfileBreakdown;, +import org.elasticsearch.search.profile.query.QueryProfiler;, +import org.elasticsearch.search.profile.query.QueryTimingType;, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/AggregationPhase.java, +import org.elasticsearch.search.profile.query.CollectorResult;, +import org.elasticsearch.search.profile.query.InternalProfileCollector;, +                    context.getProfilers().addQueryProfiler().setCollector(profileCollector);, +++ b/core/src/main/java/org/elasticsearch/search/internal/ContextIndexSearcher.java, +import org.elasticsearch.search.profile.query.ProfileWeight;, +import org.elasticsearch.search.profile.query.QueryProfileBreakdown;, +import org.elasticsearch.search.profile.query.QueryProfiler;, +import org.elasticsearch.search.profile.query.QueryTimingType;, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/AggregationPhase.java, +import org.elasticsearch.search.profile.query.CollectorResult;, +import org.elasticsearch.search.profile.query.InternalProfileCollector;, +                    context.getProfilers().addQueryProfiler().setCollector(profileCollector);, +++ b/core/src/main/java/org/elasticsearch/search/internal/ContextIndexSearcher.java, +import org.elasticsearch.search.profile.query.ProfileWeight;, +import org.elasticsearch.search.profile.query.QueryProfileBreakdown;, +import org.elasticsearch.search.profile.query.QueryProfiler;, +import org.elasticsearch.search.profile.query.QueryTimingType;, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/AggregationPhase.java, +import org.elasticsearch.search.profile.query.CollectorResult;, +import org.elasticsearch.search.profile.query.InternalProfileCollector;, +                    context.getProfilers().addQueryProfiler().setCollector(profileCollector);, +++ b/core/src/main/java/org/elasticsearch/search/internal/ContextIndexSearcher.java, +import org.elasticsearch.search.profile.query.ProfileWeight;, +import org.elasticsearch.search.profile.query.QueryProfileBreakdown;, +import org.elasticsearch.search.profile.query.QueryProfiler;, +import org.elasticsearch.search.profile.query.QueryTimingType;, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/AggregationPhase.java, +import org.elasticsearch.search.profile.query.CollectorResult;, +import org.elasticsearch.search.profile.query.InternalProfileCollector;, +                    context.getProfilers().addQueryProfiler().setCollector(profileCollector);, +++ b/core/src/main/java/org/elasticsearch/search/internal/ContextIndexSearcher.java, +import org.elasticsearch.search.profile.query.ProfileWeight;, +import org.elasticsearch.search.profile.query.QueryProfileBreakdown;, +import org.elasticsearch.search.profile.query.QueryProfiler;, +import org.elasticsearch.search.profile.query.QueryTimingType;, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/search/profile/ProfileResult.java, +public final class ProfileResult implements Writeable, ToXContent {, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/AggregationPhase.java, +import org.elasticsearch.search.profile.query.CollectorResult;, +import org.elasticsearch.search.profile.query.InternalProfileCollector;, +                    context.getProfilers().addQueryProfiler().setCollector(profileCollector);, +++ b/core/src/main/java/org/elasticsearch/search/internal/ContextIndexSearcher.java, +import org.elasticsearch.search.profile.query.ProfileWeight;, +import org.elasticsearch.search.profile.query.QueryProfileBreakdown;, +import org.elasticsearch.search.profile.query.QueryProfiler;, +import org.elasticsearch.search.profile.query.QueryTimingType;, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/search/profile/ProfileResult.java, +public final class ProfileResult implements Writeable, ToXContent {, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/AggregationPhase.java, +import org.elasticsearch.search.profile.query.CollectorResult;, +import org.elasticsearch.search.profile.query.InternalProfileCollector;, +                    context.getProfilers().addQueryProfiler().setCollector(profileCollector);, +++ b/core/src/main/java/org/elasticsearch/search/internal/ContextIndexSearcher.java, +import org.elasticsearch.search.profile.query.ProfileWeight;, +import org.elasticsearch.search.profile.query.QueryProfileBreakdown;, +import org.elasticsearch.search.profile.query.QueryProfiler;, +import org.elasticsearch.search.profile.query.QueryTimingType;, +++ /dev/null]