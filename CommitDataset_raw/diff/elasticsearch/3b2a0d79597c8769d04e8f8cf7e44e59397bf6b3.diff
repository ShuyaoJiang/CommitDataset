[+++ b/docs/reference/migration/migrate_7_0/discovery.asciidoc, +, +[float], +==== New name for `no_master_block` setting, +, +The `discovery.zen.no_master_block` setting is now known as, +`cluster.no_master_block`. Any value set for `discovery.zen.no_master_block` is, +now ignored. You should remove this setting and, if needed, set, +`cluster.no_master_block` appropriately after the upgrade., +++ b/docs/reference/migration/migrate_7_0/discovery.asciidoc, +, +[float], +==== New name for `no_master_block` setting, +, +The `discovery.zen.no_master_block` setting is now known as, +`cluster.no_master_block`. Any value set for `discovery.zen.no_master_block` is, +now ignored. You should remove this setting and, if needed, set, +`cluster.no_master_block` appropriately after the upgrade., +++ b/docs/reference/modules/discovery/discovery-settings.asciidoc, +[[no-master-block]]`cluster.no_master_block`::, +* The `cluster.no_master_block` setting doesn't apply to nodes-based APIs, +, +WARNING: This setting replaces the `discovery.zen.no_master_block` setting in, +earlier versions. The `discovery.zen.no_master_block` setting is ignored., +, +++ b/docs/reference/migration/migrate_7_0/discovery.asciidoc, +, +[float], +==== New name for `no_master_block` setting, +, +The `discovery.zen.no_master_block` setting is now known as, +`cluster.no_master_block`. Any value set for `discovery.zen.no_master_block` is, +now ignored. You should remove this setting and, if needed, set, +`cluster.no_master_block` appropriately after the upgrade., +++ b/docs/reference/modules/discovery/discovery-settings.asciidoc, +[[no-master-block]]`cluster.no_master_block`::, +* The `cluster.no_master_block` setting doesn't apply to nodes-based APIs, +, +WARNING: This setting replaces the `discovery.zen.no_master_block` setting in, +earlier versions. The `discovery.zen.no_master_block` setting is ignored., +, +++ b/modules/rank-eval/src/test/java/org/elasticsearch/index/rankeval/RankEvalResponseTests.java, +import org.elasticsearch.cluster.coordination.NoMasterBlockService;, +            new ClusterBlockException(singleton(NoMasterBlockService.NO_MASTER_BLOCK_WRITES)),, +++ b/docs/reference/migration/migrate_7_0/discovery.asciidoc, +, +[float], +==== New name for `no_master_block` setting, +, +The `discovery.zen.no_master_block` setting is now known as, +`cluster.no_master_block`. Any value set for `discovery.zen.no_master_block` is, +now ignored. You should remove this setting and, if needed, set, +`cluster.no_master_block` appropriately after the upgrade., +++ b/docs/reference/modules/discovery/discovery-settings.asciidoc, +[[no-master-block]]`cluster.no_master_block`::, +* The `cluster.no_master_block` setting doesn't apply to nodes-based APIs, +, +WARNING: This setting replaces the `discovery.zen.no_master_block` setting in, +earlier versions. The `discovery.zen.no_master_block` setting is ignored., +, +++ b/modules/rank-eval/src/test/java/org/elasticsearch/index/rankeval/RankEvalResponseTests.java, +import org.elasticsearch.cluster.coordination.NoMasterBlockService;, +            new ClusterBlockException(singleton(NoMasterBlockService.NO_MASTER_BLOCK_WRITES)),, +++ b/server/src/main/java/org/elasticsearch/cluster/coordination/Coordinator.java, +import static org.elasticsearch.cluster.coordination.NoMasterBlockService.NO_MASTER_BLOCK_ID;, +    private final NoMasterBlockService noMasterBlockService;, +        this.noMasterBlockService = new NoMasterBlockService(settings, clusterSettings);, +                    .addGlobalBlock(noMasterBlockService.getNoMasterBlock())), +                noMasterBlockService.getNoMasterBlock()).build();, +++ b/docs/reference/migration/migrate_7_0/discovery.asciidoc, +, +[float], +==== New name for `no_master_block` setting, +, +The `discovery.zen.no_master_block` setting is now known as, +`cluster.no_master_block`. Any value set for `discovery.zen.no_master_block` is, +now ignored. You should remove this setting and, if needed, set, +`cluster.no_master_block` appropriately after the upgrade., +++ b/docs/reference/modules/discovery/discovery-settings.asciidoc, +[[no-master-block]]`cluster.no_master_block`::, +* The `cluster.no_master_block` setting doesn't apply to nodes-based APIs, +, +WARNING: This setting replaces the `discovery.zen.no_master_block` setting in, +earlier versions. The `discovery.zen.no_master_block` setting is ignored., +, +++ b/modules/rank-eval/src/test/java/org/elasticsearch/index/rankeval/RankEvalResponseTests.java, +import org.elasticsearch.cluster.coordination.NoMasterBlockService;, +            new ClusterBlockException(singleton(NoMasterBlockService.NO_MASTER_BLOCK_WRITES)),, +++ b/server/src/main/java/org/elasticsearch/cluster/coordination/Coordinator.java, +import static org.elasticsearch.cluster.coordination.NoMasterBlockService.NO_MASTER_BLOCK_ID;, +    private final NoMasterBlockService noMasterBlockService;, +        this.noMasterBlockService = new NoMasterBlockService(settings, clusterSettings);, +                    .addGlobalBlock(noMasterBlockService.getNoMasterBlock())), +                noMasterBlockService.getNoMasterBlock()).build();, +++ b/server/src/main/java/org/elasticsearch/cluster/coordination/JoinTaskExecutor.java, +            .removeGlobalBlock(NoMasterBlockService.NO_MASTER_BLOCK_ID)), +++ b/docs/reference/migration/migrate_7_0/discovery.asciidoc, +, +[float], +==== New name for `no_master_block` setting]