[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/blobstore/BlobStoreIndexShardGateway.java, +        boolean snapshotRequired = false;, +            if (translogSnapshot.lengthInBytes() > 0) {, +            }, +                        if (translogSnapshot.lengthInBytes() > 0) {, +                    }, +                    if (translogSnapshot.lengthInBytes() > 0) {, +                        expectedNumberOfOperations = translogSnapshot.totalOperations();, +                        snapshotRequired = true;, +                    }, +                }, +            } else {, +                // no commit point, snapshot all the translog, +                if (translogSnapshot.lengthInBytes() > 0) {]