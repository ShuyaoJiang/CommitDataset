[+++ b/src/main/java/org/elasticsearch/search/highlight/HighlightPhase.java, +import org.apache.lucene.search.FilteredQuery;, +                        } else if (query instanceof FilteredQuery) {, +                            query = ((FilteredQuery) query).getQuery();, +                            extracted = true;]