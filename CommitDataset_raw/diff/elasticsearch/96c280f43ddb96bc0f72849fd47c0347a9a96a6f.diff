[+++ b/.gitignore, +*.vmoptions, +.local-execution-hints.log, +++ b/.gitignore, +*.vmoptions, +.local-execution-hints.log, +++ b/CONTRIBUTING.md, +**Repository:** [https://github.com/elasticsearch/elasticsearch-cloud-azure](https://github.com/elasticsearch/elasticsearch-cloud-azure), +cd elasticsearch-cloud-azure/, +++ b/.gitignore, +*.vmoptions, +.local-execution-hints.log, +++ b/CONTRIBUTING.md, +**Repository:** [https://github.com/elasticsearch/elasticsearch-cloud-azure](https://github.com/elasticsearch/elasticsearch-cloud-azure), +cd elasticsearch-cloud-azure/, +++ b/NOTICE.txt, +ElasticSearch, +Copyright 2009-2013 ElasticSearch, +, +This product includes software developed by The Apache Software, +Foundation (http://www.apache.org/)., +++ b/.gitignore, +*.vmoptions, +.local-execution-hints.log, +++ b/CONTRIBUTING.md, +**Repository:** [https://github.com/elasticsearch/elasticsearch-cloud-azure](https://github.com/elasticsearch/elasticsearch-cloud-azure), +cd elasticsearch-cloud-azure/, +++ b/NOTICE.txt, +ElasticSearch, +Copyright 2009-2013 ElasticSearch, +, +This product includes software developed by The Apache Software, +Foundation (http://www.apache.org/)., +++ b/README.md, +Azure Cloud Plugin for Elasticsearch, +====================================, +The Azure Cloud plugin allows to use Azure API for the unicast discovery mechanism., +In order to install the plugin, simply run: `bin/plugin -install elasticsearch/elasticsearch-cloud-azure/2.1.0`., +* For 1.0.x elasticsearch versions, look at [master branch](https://github.com/elasticsearch/elasticsearch-cloud-azure/tree/master)., +* For 0.90.x elasticsearch versions, look at [1.x branch](https://github.com/elasticsearch/elasticsearch-cloud-azure/tree/1.x)., +|     Azure Cloud Plugin      |    elasticsearch    | Release date |, +|-----------------------------|---------------------|:------------:|, +| 2.2.0-SNAPSHOT              | 1.0 -> master       |  XXXX-XX-XX  |, +| 2.1.0                       | 1.0 -> master       |  2014-03-17  |, +| 2.0.0                       | 1.0 -> master       |  2014-02-14  |, +Azure Virtual Machine Discovery, +===============================, +Azure VM discovery allows to use the azure APIs to perform automatic discovery (similar to multicast in non hostile, +multicast environments). Here is a simple sample configuration:, +```, +        azure:, +            keystore: /path/to/keystore, +            password: your_password_for_keystore, +            subscription_id: your_azure_subscription_id, +            service_name: your_azure_cloud_service_name, +            type: azure, +    # recommended, +    # path.data: /mnt/resource/elasticsearch/data, +```, +How to start (short story), +--------------------------, +* Create Azure instances, +* Install Elasticsearch, +* Install Azure plugin, +* Modify `elasticsearch.yml` file, +* Start Elasticsearch, +How to start (long story), +--------------------------, +We will expose here one strategy which is to hide our Elasticsearch cluster from outside., +With this strategy, only VM behind this same virtual port can talk to each other., +That means that with this mode, you can use elasticsearch unicast discovery to build a cluster., +Best, you can use the `elasticsearch-cloud-azure` plugin to let it fetch information about your nodes using, +azure API., +### Prerequisites, +Before starting, you need to have:, +* A [Windows Azure account](http://www.windowsazure.com/), +* SSH keys and certificate, +* OpenSSL that isn't from MacPorts, specifically `OpenSSL 1.0.1f 6 Jan, +  2014` doesn't seem to create a valid keypair for ssh.  FWIW,, +  `OpenSSL 1.0.1c 10 May 2012` on Ubuntu 12.04 LTS is known to work., +Here is a description on how to generate this using `openssl`:, +```sh, +# You may want to use another dir than /tmp, +cd /tmp, +openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout azure-private.key -out azure-certificate.pem, +chmod 600 azure-private.key azure-certificate.pem, +openssl x509 -outform der -in azure-certificate.pem -out azure-certificate.cer, +, +# Generate a keystore (azurekeystore.pkcs12), +# Transform private key to PEM format, +openssl pkcs8 -topk8 -nocrypt -in azure-private.key -inform PEM -out azure-pk.pem -outform PEM, +# Transform certificate to PEM format, +openssl x509 -inform der -in azure-certificate.cer -out azure-cert.pem, +cat azure-cert.pem azure-pk.pem > azure.pem.txt, +# You MUST enter a password!, +openssl pkcs12 -export -in azure.pem.txt -out azurekeystore.pkcs12 -name azure -noiter -nomaciter, +```, +, +Upload the generated key to Azure platform. **Important**: when prompted for a password,, +you need to enter a non empty one.]