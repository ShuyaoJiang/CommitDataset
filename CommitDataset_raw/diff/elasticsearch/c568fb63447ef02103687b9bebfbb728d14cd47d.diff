[+++ b/src/test/java/org/elasticsearch/test/integration/percolator/TTLPercolatorTests.java, +import org.elasticsearch.action.get.GetResponse;, +import static org.elasticsearch.test.hamcrest.ElasticsearchAssertions.assertNoFailures;, +        assertNoFailures(percolateResponse);, +        if (percolateResponse.getMatches().length == 0) {, +            // OK, ttl + purgeInterval has passed (slow machine or many other tests were running at the same time, +            GetResponse getResponse = client.prepareGet("test", "_percolator", "kuku").execute().actionGet();, +            assertThat(getResponse.isExists(), equalTo(false));, +            IndicesStatsResponse response = client.admin().indices().prepareStats("test"), +                    .clear().setIndexing(true), +                    .execute().actionGet();, +            long currentDeleteCount = response.getIndices().get("test").getTotal().getIndexing().getTotal().getDeleteCount();, +            assertThat(currentDeleteCount, equalTo(2l));, +            return;, +        }, +, +        assertNoFailures(percolateResponse);]