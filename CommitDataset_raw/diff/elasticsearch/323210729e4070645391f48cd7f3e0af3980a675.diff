[+++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java, +import org.elasticsearch.common.lease.Releasables;, +                        Releasables.closeWhileHandlingException(parser);, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java, +import org.elasticsearch.common.lease.Releasables;, +                        Releasables.closeWhileHandlingException(parser);, +++ b/src/main/java/org/elasticsearch/common/xcontent/XContentBuilder.java, +import org.elasticsearch.common.lease.Releasable;, +public final class XContentBuilder implements BytesStream, Releasable {, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java, +import org.elasticsearch.common.lease.Releasables;, +                        Releasables.closeWhileHandlingException(parser);, +++ b/src/main/java/org/elasticsearch/common/xcontent/XContentBuilder.java, +import org.elasticsearch.common.lease.Releasable;, +public final class XContentBuilder implements BytesStream, Releasable {, +++ b/src/main/java/org/elasticsearch/common/xcontent/XContentParser.java, +import org.elasticsearch.common.lease.Releasable;, +public interface XContentParser extends Releasable {, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java, +import org.elasticsearch.common.lease.Releasables;, +                        Releasables.closeWhileHandlingException(parser);, +++ b/src/main/java/org/elasticsearch/common/xcontent/XContentBuilder.java, +import org.elasticsearch.common.lease.Releasable;, +public final class XContentBuilder implements BytesStream, Releasable {, +++ b/src/main/java/org/elasticsearch/common/xcontent/XContentParser.java, +import org.elasticsearch.common.lease.Releasable;, +public interface XContentParser extends Releasable {, +++ b/src/main/java/org/elasticsearch/gateway/local/state/shards/LocalGatewayShardsState.java, +        BytesReference shardState;, +        try (XContentBuilder builder = XContentFactory.contentBuilder(XContentType.JSON, new BytesStreamOutput())) {, +            shardState = builder.bytes();, +        }, +                shardState.writeTo(fos);, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java, +import org.elasticsearch.common.lease.Releasables;, +                        Releasables.closeWhileHandlingException(parser);, +++ b/src/main/java/org/elasticsearch/common/xcontent/XContentBuilder.java, +import org.elasticsearch.common.lease.Releasable;, +public final class XContentBuilder implements BytesStream, Releasable {, +++ b/src/main/java/org/elasticsearch/common/xcontent/XContentParser.java, +import org.elasticsearch.common.lease.Releasable;, +public interface XContentParser extends Releasable {, +++ b/src/main/java/org/elasticsearch/gateway/local/state/shards/LocalGatewayShardsState.java, +        BytesReference shardState;, +        try (XContentBuilder builder = XContentFactory.contentBuilder(XContentType.JSON, new BytesStreamOutput())) {, +            shardState = builder.bytes();, +        }, +                shardState.writeTo(fos);, +++ b/src/main/java/org/elasticsearch/search/SearchService.java, +import org.elasticsearch.common.lease.Releasables;, +                Releasables.closeWhileHandlingException(parser);]