[+++ b/src/test/java/org/elasticsearch/test/integration/cluster/NoMasterNodeTests.java, +import com.google.common.base.Predicate;, +        final Node node = startNode("node1", settings);, +        awaitBusy(new Predicate<Object>() {, +            public boolean apply(Object o) {, +                ClusterState state = node.client().admin().cluster().prepareState().setLocal(true).execute().actionGet().getState();, +                return state.blocks().hasGlobalBlock(Discovery.NO_MASTER_BLOCK);, +            }, +        });]