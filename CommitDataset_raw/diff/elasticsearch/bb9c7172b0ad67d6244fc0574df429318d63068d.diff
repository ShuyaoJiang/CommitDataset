[+++ b/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java, +                context.newFieldMappers().mappers.clear();, +                context.newObjectMappers().mappers.clear();, +        } catch (Throwable e) {, +            // we have to fire up any new mappers even on a failure, because they, +            // have been added internally to each compound mapper..., +            // ... we have no option to "rollback" a change, which is very tricky in our copy on change system..., +            if (!context.newFieldMappers().mappers.isEmpty()) {, +                addFieldMappers(context.newFieldMappers().mappers);, +                context.newFieldMappers().mappers.clear();, +            }, +            if (!context.newObjectMappers().mappers.isEmpty()) {, +                addObjectMappers(context.newObjectMappers().mappers);, +                context.newObjectMappers().mappers.clear();, +            }, +, +            throw new MapperParsingException("failed to parse", e);]