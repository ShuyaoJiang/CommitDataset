[+++ b/core/src/test/java/org/elasticsearch/get/GetActionIT.java, +        client().prepareIndex("test", "doc", "1").setRouting("routingValue").setId("1").setSource("{}", XContentType.JSON).get();, +        String[] fieldsList = {"_routing"};, +        assertGetFieldsAlwaysWorks(indexOrAlias(), "doc", "1", fieldsList, "routingValue");, +        assertGetFieldsAlwaysWorks(indexOrAlias(), "doc", "1", fieldsList, "routingValue");, +        assertGetFieldsAlwaysWorks(indexOrAlias(), "doc", "1", fieldsList, "routingValue");, +++ b/core/src/test/java/org/elasticsearch/get/GetActionIT.java, +        client().prepareIndex("test", "doc", "1").setRouting("routingValue").setId("1").setSource("{}", XContentType.JSON).get();, +        String[] fieldsList = {"_routing"};, +        assertGetFieldsAlwaysWorks(indexOrAlias(), "doc", "1", fieldsList, "routingValue");, +        assertGetFieldsAlwaysWorks(indexOrAlias(), "doc", "1", fieldsList, "routingValue");, +        assertGetFieldsAlwaysWorks(indexOrAlias(), "doc", "1", fieldsList, "routingValue");, +++ b/core/src/test/java/org/elasticsearch/index/mapper/TypeFieldMapperTests.java, +        Settings indexSettings = singleType ? Settings.EMPTY : Settings.builder(), +                .put("index.version.created", Version.V_5_6_0), +++ b/core/src/test/java/org/elasticsearch/get/GetActionIT.java, +        client().prepareIndex("test", "doc", "1").setRouting("routingValue").setId("1").setSource("{}", XContentType.JSON).get();, +        String[] fieldsList = {"_routing"};, +        assertGetFieldsAlwaysWorks(indexOrAlias(), "doc", "1", fieldsList, "routingValue");, +        assertGetFieldsAlwaysWorks(indexOrAlias(), "doc", "1", fieldsList, "routingValue");, +        assertGetFieldsAlwaysWorks(indexOrAlias(), "doc", "1", fieldsList, "routingValue");, +++ b/core/src/test/java/org/elasticsearch/index/mapper/TypeFieldMapperTests.java, +        Settings indexSettings = singleType ? Settings.EMPTY : Settings.builder(), +                .put("index.version.created", Version.V_5_6_0), +++ b/modules/parent-join/src/test/java/org/elasticsearch/join/aggregations/ChildrenIT.java, +import org.elasticsearch.Version;, +, +, +, +                                    .put("index.version.created", Version.V_5_6_0)) // multi type, +                                .put("index.version.created", Version.V_5_6_0) // multi type, +++ b/core/src/test/java/org/elasticsearch/get/GetActionIT.java, +        client().prepareIndex("test", "doc", "1").setRouting("routingValue").setId("1").setSource("{}", XContentType.JSON).get();, +        String[] fieldsList = {"_routing"};, +        assertGetFieldsAlwaysWorks(indexOrAlias(), "doc", "1", fieldsList, "routingValue");, +        assertGetFieldsAlwaysWorks(indexOrAlias(), "doc", "1", fieldsList, "routingValue");, +        assertGetFieldsAlwaysWorks(indexOrAlias(), "doc", "1", fieldsList, "routingValue");, +++ b/core/src/test/java/org/elasticsearch/index/mapper/TypeFieldMapperTests.java, +        Settings indexSettings = singleType ? Settings.EMPTY : Settings.builder(), +                .put("index.version.created", Version.V_5_6_0), +++ b/modules/parent-join/src/test/java/org/elasticsearch/join/aggregations/ChildrenIT.java, +import org.elasticsearch.Version;, +, +, +, +                                    .put("index.version.created", Version.V_5_6_0)) // multi type, +                                .put("index.version.created", Version.V_5_6_0) // multi type, +++ b/modules/parent-join/src/test/java/org/elasticsearch/join/query/InnerHitsIT.java, +        ArrayList<Class<? extends Plugin>> plugins = new ArrayList<>(super.nodePlugins());, +        plugins.add(CustomScriptPlugin.class);, +        return plugins;, +++ b/core/src/test/java/org/elasticsearch/get/GetActionIT.java, +        client().prepareIndex("test", "doc", "1").setRouting("routingValue").setId("1").setSource("{}", XContentType.JSON).get();, +        String[] fieldsList = {"_routing"};, +        assertGetFieldsAlwaysWorks(indexOrAlias(), "doc", "1", fieldsList, "routingValue");, +        assertGetFieldsAlwaysWorks(indexOrAlias(), "doc", "1", fieldsList, "routingValue");, +        assertGetFieldsAlwaysWorks(indexOrAlias(), "doc", "1", fieldsList, "routingValue");, +++ b/core/src/test/java/org/elasticsearch/index/mapper/TypeFieldMapperTests.java, +        Settings indexSettings = singleType ? Settings.EMPTY : Settings.builder(), +                .put("index.version.created", Version.V_5_6_0), +++ b/modules/parent-join/src/test/java/org/elasticsearch/join/aggregations/ChildrenIT.java, +import org.elasticsearch.Version;, +, +, +, +                                    .put("index.version.created", Version.V_5_6_0)) // multi type, +                                .put("index.version.created", Version.V_5_6_0) // multi type, +++ b/modules/parent-join/src/test/java/org/elasticsearch/join/query/InnerHitsIT.java, +        ArrayList<Class<? extends Plugin>> plugins = new ArrayList<>(super.nodePlugins());, +        plugins.add(CustomScriptPlugin.class);, +        return plugins;, +++ b/modules/parent-join/src/test/java/org/elasticsearch/join/query/LegacyHasChildQueryBuilderTests.java, +            .put("index.version.created", Version.V_5_6_0) // multi type, +++ b/core/src/test/java/org/elasticsearch/get/GetActionIT.java, +        client().prepareIndex("test", "doc", "1").setRouting("routingValue").setId("1").setSource("{}", XContentType.JSON).get();, +        String[] fieldsList = {"_routing"};, +        assertGetFieldsAlwaysWorks(indexOrAlias(), "doc", "1", fieldsList, "routingValue");, +        assertGetFieldsAlwaysWorks(indexOrAlias(), "doc", "1", fieldsList, "routingValue");, +        assertGetFieldsAlwaysWorks(indexOrAlias(), "doc", "1", fieldsList, "routingValue");, +++ b/core/src/test/java/org/elasticsearch/index/mapper/TypeFieldMapperTests.java, +        Settings indexSettings = singleType ? Settings.EMPTY : Settings.builder(), +                .put("index.version.created", Version.V_5_6_0), +++ b/modules/parent-join/src/test/java/org/elasticsearch/join/aggregations/ChildrenIT.java, +import org.elasticsearch.Version;, +, +, +, +                                    .put("index.version.created", Version.V_5_6_0)) // multi type, +                                .put("index.version.created", Version.V_5_6_0) // multi type, +++ b/modules/parent-join/src/test/java/org/elasticsearch/join/query/InnerHitsIT.java, +        ArrayList<Class<? extends Plugin>> plugins = new ArrayList<>(super.nodePlugins());, +        plugins.add(CustomScriptPlugin.class);, +        return plugins;, +++ b/modules/parent-join/src/test/java/org/elasticsearch/join/query/LegacyHasChildQueryBuilderTests.java, +            .put("index.version.created", Version.V_5_6_0) // multi type, +++ b/modules/parent-join/src/test/java/org/elasticsearch/join/query/LegacyHasParentQueryBuilderTests.java, +            .put("index.version.created", Version.V_5_6_0) // legacy needs multi types, +++ b/core/src/test/java/org/elasticsearch/get/GetActionIT.java, +        client().prepareIndex("test", "doc", "1").setRouting("routingValue").setId("1").setSource("{}", XContentType.JSON).get();, +        String[] fieldsList = {"_routing"};]