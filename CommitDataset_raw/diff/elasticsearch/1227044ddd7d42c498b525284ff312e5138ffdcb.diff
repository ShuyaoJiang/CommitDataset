[+++ b/core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java, +        Setting.boolSetting(SETTING_SHADOW_REPLICAS, false, Property.IndexScope, Property.Deprecated);, +        Setting.boolSetting(SETTING_SHARED_FILESYSTEM, INDEX_SHADOW_REPLICAS_SETTING, Property.IndexScope, Property.Deprecated);, +        Setting.boolSetting(SETTING_SHARED_FS_ALLOW_RECOVERY_ON_ANY_NODE, false,, +            Property.Dynamic, Property.IndexScope, Property.Deprecated);, +        // don't use the setting directly, not to trigger verbose deprecation logging, +        // don't use the setting directly, not to trigger verbose deprecation logging, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java, +        Setting.boolSetting(SETTING_SHADOW_REPLICAS, false, Property.IndexScope, Property.Deprecated);, +        Setting.boolSetting(SETTING_SHARED_FILESYSTEM, INDEX_SHADOW_REPLICAS_SETTING, Property.IndexScope, Property.Deprecated);, +        Setting.boolSetting(SETTING_SHARED_FS_ALLOW_RECOVERY_ON_ANY_NODE, false,, +            Property.Dynamic, Property.IndexScope, Property.Deprecated);, +        // don't use the setting directly, not to trigger verbose deprecation logging, +        // don't use the setting directly, not to trigger verbose deprecation logging, +++ b/core/src/main/java/org/elasticsearch/env/NodeEnvironment.java, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java, +        Setting.boolSetting(SETTING_SHADOW_REPLICAS, false, Property.IndexScope, Property.Deprecated);, +        Setting.boolSetting(SETTING_SHARED_FILESYSTEM, INDEX_SHADOW_REPLICAS_SETTING, Property.IndexScope, Property.Deprecated);, +        Setting.boolSetting(SETTING_SHARED_FS_ALLOW_RECOVERY_ON_ANY_NODE, false,, +            Property.Dynamic, Property.IndexScope, Property.Deprecated);, +        // don't use the setting directly, not to trigger verbose deprecation logging, +        // don't use the setting directly, not to trigger verbose deprecation logging, +++ b/core/src/main/java/org/elasticsearch/env/NodeEnvironment.java, +++ b/core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java, +        // don't use the setting directly, not to trigger verbose deprecation logging, +            && (metaData.getSettings().getAsBoolean(IndexMetaData.SETTING_SHARED_FS_ALLOW_RECOVERY_ON_ANY_NODE, false) ||, +                this.settings.getAsBoolean(IndexMetaData.SETTING_SHARED_FS_ALLOW_RECOVERY_ON_ANY_NODE, false));, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java, +        Setting.boolSetting(SETTING_SHADOW_REPLICAS, false, Property.IndexScope, Property.Deprecated);, +        Setting.boolSetting(SETTING_SHARED_FILESYSTEM, INDEX_SHADOW_REPLICAS_SETTING, Property.IndexScope, Property.Deprecated);, +        Setting.boolSetting(SETTING_SHARED_FS_ALLOW_RECOVERY_ON_ANY_NODE, false,, +            Property.Dynamic, Property.IndexScope, Property.Deprecated);, +        // don't use the setting directly, not to trigger verbose deprecation logging, +        // don't use the setting directly, not to trigger verbose deprecation logging, +++ b/core/src/main/java/org/elasticsearch/env/NodeEnvironment.java, +++ b/core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java, +        // don't use the setting directly, not to trigger verbose deprecation logging, +            && (metaData.getSettings().getAsBoolean(IndexMetaData.SETTING_SHARED_FS_ALLOW_RECOVERY_ON_ANY_NODE, false) ||, +                this.settings.getAsBoolean(IndexMetaData.SETTING_SHARED_FS_ALLOW_RECOVERY_ON_ANY_NODE, false));, +++ b/core/src/test/java/org/elasticsearch/gateway/PrimaryShardAllocatorTests.java, +, +    /**, +     * needed due to random usage of {@link IndexMetaData#INDEX_SHARED_FS_ALLOW_RECOVERY_ON_ANY_NODE_SETTING}. removed once, +     * shadow replicas are removed., +     */, +    @Override, +    protected boolean enableWarningsCheck() {, +        return false;, +    }, +, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java, +        Setting.boolSetting(SETTING_SHADOW_REPLICAS, false, Property.IndexScope, Property.Deprecated);, +        Setting.boolSetting(SETTING_SHARED_FILESYSTEM, INDEX_SHADOW_REPLICAS_SETTING, Property.IndexScope, Property.Deprecated);, +        Setting.boolSetting(SETTING_SHARED_FS_ALLOW_RECOVERY_ON_ANY_NODE, false,, +            Property.Dynamic, Property.IndexScope, Property.Deprecated);, +        // don't use the setting directly, not to trigger verbose deprecation logging, +        // don't use the setting directly, not to trigger verbose deprecation logging, +++ b/core/src/main/java/org/elasticsearch/env/NodeEnvironment.java, +++ b/core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java, +        // don't use the setting directly, not to trigger verbose deprecation logging, +            && (metaData.getSettings().getAsBoolean(IndexMetaData.SETTING_SHARED_FS_ALLOW_RECOVERY_ON_ANY_NODE, false) ||, +                this.settings.getAsBoolean(IndexMetaData.SETTING_SHARED_FS_ALLOW_RECOVERY_ON_ANY_NODE, false));, +++ b/core/src/test/java/org/elasticsearch/gateway/PrimaryShardAllocatorTests.java, +, +    /**, +     * needed due to random usage of {@link IndexMetaData#INDEX_SHARED_FS_ALLOW_RECOVERY_ON_ANY_NODE_SETTING}. removed once, +     * shadow replicas are removed., +     */, +    @Override, +    protected boolean enableWarningsCheck() {, +        return false;, +    }, +, +++ b/core/src/test/java/org/elasticsearch/indices/cluster/IndicesClusterStateServiceRandomUpdatesTests.java, +    /**, +     * needed due to random usage of {@link IndexMetaData#INDEX_SHADOW_REPLICAS_SETTING}. removed once, +     * shadow replicas are removed., +     */, +    @Override, +    protected boolean enableWarningsCheck() {, +        return false;, +    }, +, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java, +        Setting.boolSetting(SETTING_SHADOW_REPLICAS, false, Property.IndexScope, Property.Deprecated);, +        Setting.boolSetting(SETTING_SHARED_FILESYSTEM, INDEX_SHADOW_REPLICAS_SETTING, Property.IndexScope, Property.Deprecated);, +        Setting.boolSetting(SETTING_SHARED_FS_ALLOW_RECOVERY_ON_ANY_NODE, false,, +            Property.Dynamic, Property.IndexScope, Property.Deprecated);, +        // don't use the setting directly, not to trigger verbose deprecation logging, +        // don't use the setting directly, not to trigger verbose deprecation logging, +++ b/core/src/main/java/org/elasticsearch/env/NodeEnvironment.java, +++ b/core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java, +        // don't use the setting directly, not to trigger verbose deprecation logging, +            && (metaData.getSettings().getAsBoolean(IndexMetaData.SETTING_SHARED_FS_ALLOW_RECOVERY_ON_ANY_NODE, false) ||, +                this.settings.getAsBoolean(IndexMetaData.SETTING_SHARED_FS_ALLOW_RECOVERY_ON_ANY_NODE, false));, +++ b/core/src/test/java/org/elasticsearch/gateway/PrimaryShardAllocatorTests.java, +, +    /**, +     * needed due to random usage of {@link IndexMetaData#INDEX_SHARED_FS_ALLOW_RECOVERY_ON_ANY_NODE_SETTING}. removed once, +     * shadow replicas are removed.]