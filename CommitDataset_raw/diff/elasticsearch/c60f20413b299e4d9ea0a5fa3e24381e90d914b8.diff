[+++ b/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java, +import org.apache.lucene.index.IndexableField;, +        // apply doc boost, +        if (context.docBoost() != 1.0f) {, +            for (Document doc : context.docs()) {, +                for (IndexableField field : doc) {, +                    if (field.fieldType().indexed() && !field.fieldType().omitNorms()) {, +                        ((Field) field).setBoost(context.docBoost() * field.boost());, +                    }, +                }, +            }, +        }, +, +++ b/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java, +import org.apache.lucene.index.IndexableField;, +        // apply doc boost, +        if (context.docBoost() != 1.0f) {, +            for (Document doc : context.docs()) {, +                for (IndexableField field : doc) {, +                    if (field.fieldType().indexed() && !field.fieldType().omitNorms()) {, +                        ((Field) field).setBoost(context.docBoost() * field.boost());, +                    }, +                }, +            }, +        }, +, +++ b/src/main/java/org/elasticsearch/index/mapper/ParseContext.java, +    private float docBoost = 1.0f;, +, +        this.docBoost = 1.0f;, +    public float docBoost() {, +        return this.docBoost;, +    }, +, +    public void docBoost(float docBoost) {, +        this.docBoost = docBoost;, +    }, +, +++ b/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java, +import org.apache.lucene.index.IndexableField;, +        // apply doc boost, +        if (context.docBoost() != 1.0f) {, +            for (Document doc : context.docs()) {, +                for (IndexableField field : doc) {, +                    if (field.fieldType().indexed() && !field.fieldType().omitNorms()) {, +                        ((Field) field).setBoost(context.docBoost() * field.boost());, +                    }, +                }, +            }, +        }, +, +++ b/src/main/java/org/elasticsearch/index/mapper/ParseContext.java, +    private float docBoost = 1.0f;, +, +        this.docBoost = 1.0f;, +    public float docBoost() {, +        return this.docBoost;, +    }, +, +    public void docBoost(float docBoost) {, +        this.docBoost = docBoost;, +    }, +, +++ b/src/main/java/org/elasticsearch/index/mapper/internal/BoostFieldMapper.java, +            context.docBoost(value);, +        context.docBoost(value);]