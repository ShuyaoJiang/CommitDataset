[+++ b/core/src/main/java/org/elasticsearch/monitor/os/OsStats.java, +        cpu.toXContent(builder, params);, +        mem.toXContent(builder, params);, +        swap.toXContent(builder, params);, +    public static class Cpu implements Writeable, ToXContent {, +, +        @Override, +        public XContentBuilder toXContent(XContentBuilder builder, Params params) throws IOException {, +            builder.startObject(Fields.CPU);, +            builder.field(Fields.PERCENT, getPercent());, +            if (getLoadAverage() != null && Arrays.stream(getLoadAverage()).anyMatch(load -> load != -1)) {, +                builder.startObject(Fields.LOAD_AVERAGE);, +                if (getLoadAverage()[0] != -1) {, +                    builder.field(Fields.LOAD_AVERAGE_1M, getLoadAverage()[0]);, +                }, +                if (getLoadAverage()[1] != -1) {, +                    builder.field(Fields.LOAD_AVERAGE_5M, getLoadAverage()[1]);, +                }, +                if (getLoadAverage()[2] != -1) {, +                    builder.field(Fields.LOAD_AVERAGE_15M, getLoadAverage()[2]);, +                }, +                builder.endObject();, +            }, +            builder.endObject();, +            return builder;, +        }, +    public static class Swap implements Writeable, ToXContent {, +, +        @Override, +        public XContentBuilder toXContent(XContentBuilder builder, Params params) throws IOException {, +            builder.startObject(Fields.SWAP);, +            builder.byteSizeField(Fields.TOTAL_IN_BYTES, Fields.TOTAL, getTotal());, +            builder.byteSizeField(Fields.FREE_IN_BYTES, Fields.FREE, getFree());, +            builder.byteSizeField(Fields.USED_IN_BYTES, Fields.USED, getUsed());, +            builder.endObject();, +            return builder;, +        }, +    public static class Mem implements Writeable, ToXContent {, +, +        @Override, +        public XContentBuilder toXContent(XContentBuilder builder, Params params) throws IOException {, +            builder.startObject(Fields.MEM);, +            builder.byteSizeField(Fields.TOTAL_IN_BYTES, Fields.TOTAL, getTotal());, +            builder.byteSizeField(Fields.FREE_IN_BYTES, Fields.FREE, getFree());, +            builder.byteSizeField(Fields.USED_IN_BYTES, Fields.USED, getUsed());, +            builder.field(Fields.FREE_PERCENT, getFreePercent());, +            builder.field(Fields.USED_PERCENT, getUsedPercent());, +            builder.endObject();, +            return builder;, +        }]