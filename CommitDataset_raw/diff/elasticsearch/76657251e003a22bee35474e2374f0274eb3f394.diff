[+++ b/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardRepository.java, +                    BytesRef hash = fileInfo.metadata().hash(); // reset the file infos metadata hash, +                    assert hash.length == 0;, +++ b/src/main/java/org/elasticsearch/index/snapshots/blobstore/BlobStoreIndexShardRepository.java, +                    BytesRef hash = fileInfo.metadata().hash(); // reset the file infos metadata hash, +                    assert hash.length == 0;, +++ b/src/main/java/org/elasticsearch/index/store/Store.java, +            final int readBytes = Streams.readFully(in, fileHash.bytes(), 0, len);, +            assert readBytes == len : Integer.toString(readBytes) + " != " + Integer.toString(len);, +            assert fileHash.length() == len : Integer.toString(fileHash.length()) + " != " + Integer.toString(len);]