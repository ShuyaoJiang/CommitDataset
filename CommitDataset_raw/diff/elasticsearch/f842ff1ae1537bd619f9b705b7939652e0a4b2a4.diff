[+++ b/core/src/main/java/org/elasticsearch/common/util/LocaleUtils.java, +    /**, +     * Validate a {@link Locale} object, +     */, +    public static boolean isValid(Locale locale) {, +        try {, +            return locale.getISO3Language() != null && locale.getISO3Country() != null;, +        } catch (MissingResourceException e) {, +            return false;, +        }, +    }, +++ b/core/src/main/java/org/elasticsearch/common/util/LocaleUtils.java, +    /**, +     * Validate a {@link Locale} object, +     */, +    public static boolean isValid(Locale locale) {, +        try {, +            return locale.getISO3Language() != null && locale.getISO3Country() != null;, +        } catch (MissingResourceException e) {, +            return false;, +        }, +    }, +++ b/modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/DateProcessor.java, +import org.elasticsearch.common.util.LocaleUtils;, +                if (!LocaleUtils.isValid(locale)) {, +                    throw new IllegalArgumentException("Invalid language tag specified: " + localeString);, +                }, +++ b/core/src/main/java/org/elasticsearch/common/util/LocaleUtils.java, +    /**, +     * Validate a {@link Locale} object, +     */, +    public static boolean isValid(Locale locale) {, +        try {, +            return locale.getISO3Language() != null && locale.getISO3Country() != null;, +        } catch (MissingResourceException e) {, +            return false;, +        }, +    }, +++ b/modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/DateProcessor.java, +import org.elasticsearch.common.util.LocaleUtils;, +                if (!LocaleUtils.isValid(locale)) {, +                    throw new IllegalArgumentException("Invalid language tag specified: " + localeString);, +                }, +++ b/modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/DateProcessorFactoryTests.java, +        String[] locales = new String[] { "invalid_locale", "english" };, +        for (String locale : locales) {, +            config.put("locale", locale);, +                assertThat(e.getMessage(), equalTo("Invalid language tag specified: " + locale));, +            }]