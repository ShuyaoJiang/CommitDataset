[+++ b/core/src/main/java/org/elasticsearch/common/logging/log4j/LogConfigurator.java, +import static org.elasticsearch.common.Strings.cleanPath;, +        // ensure explicit path to logs dir exists, +        props.put("path.logs", cleanPath(environment.logsFile().toAbsolutePath().toString()));, +++ b/core/src/main/java/org/elasticsearch/common/logging/log4j/LogConfigurator.java, +import static org.elasticsearch.common.Strings.cleanPath;, +        // ensure explicit path to logs dir exists, +        props.put("path.logs", cleanPath(environment.logsFile().toAbsolutePath().toString()));, +++ b/core/src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java]