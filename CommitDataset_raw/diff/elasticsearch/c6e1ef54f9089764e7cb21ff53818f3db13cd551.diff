[+++ b/core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java, +            allocationId, UNAVAILABLE_EXPECTED_SHARD_SIZE);, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java, +            allocationId, UNAVAILABLE_EXPECTED_SHARD_SIZE);, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/allocation/IndexMetaDataUpdater.java, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java, +            allocationId, UNAVAILABLE_EXPECTED_SHARD_SIZE);, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/allocation/IndexMetaDataUpdater.java, +++ b/core/src/test/java/org/elasticsearch/cluster/routing/AllocationIdTests.java, +        assertThat(shard.allocationId().getId(), equalTo(allocationId.getId()));]