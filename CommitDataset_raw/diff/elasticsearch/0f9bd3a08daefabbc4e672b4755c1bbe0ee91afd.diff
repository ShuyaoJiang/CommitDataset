[+++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/action/OpenJobAction.java, +        List<String> unavailableIndices = verifyIndicesPrimaryShardsAreActive(jobId, clusterState);, +    static List<String> verifyIndicesPrimaryShardsAreActive(String jobId, ClusterState clusterState) {, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/action/OpenJobAction.java, +        List<String> unavailableIndices = verifyIndicesPrimaryShardsAreActive(jobId, clusterState);, +    static List<String> verifyIndicesPrimaryShardsAreActive(String jobId, ClusterState clusterState) {, +++ b/plugin/src/test/java/org/elasticsearch/xpack/ml/action/OpenJobActionTests.java, +        assertEquals(0, OpenJobAction.verifyIndicesPrimaryShardsAreActive("job_id", cs).size());, +        List<String> result = OpenJobAction.verifyIndicesPrimaryShardsAreActive("job_id", csBuilder.build());]