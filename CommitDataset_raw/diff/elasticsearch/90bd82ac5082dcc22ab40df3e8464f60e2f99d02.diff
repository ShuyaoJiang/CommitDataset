[+++ b/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java, +++ b/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java, +++ b/src/main/java/org/elasticsearch/common/lucene/search/function/FiltersFunctionScoreQuery.java, +            Scorer subQueryScorer = subQueryWeight.scorer(context, scoreDocsInOrder, false, acceptDocs);, +++ b/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java, +++ b/src/main/java/org/elasticsearch/common/lucene/search/function/FiltersFunctionScoreQuery.java, +            Scorer subQueryScorer = subQueryWeight.scorer(context, scoreDocsInOrder, false, acceptDocs);, +++ b/src/main/java/org/elasticsearch/common/lucene/search/function/FunctionScoreQuery.java, +            Scorer subQueryScorer = subQueryWeight.scorer(context, scoreDocsInOrder, false, acceptDocs);, +++ b/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java, +++ b/src/main/java/org/elasticsearch/common/lucene/search/function/FiltersFunctionScoreQuery.java, +            Scorer subQueryScorer = subQueryWeight.scorer(context, scoreDocsInOrder, false, acceptDocs);, +++ b/src/main/java/org/elasticsearch/common/lucene/search/function/FunctionScoreQuery.java, +            Scorer subQueryScorer = subQueryWeight.scorer(context, scoreDocsInOrder, false, acceptDocs);, +++ b/src/test/java/org/elasticsearch/test/integration/search/customscore/CustomScoreSearchTests.java, +import org.elasticsearch.index.query.FilterBuilders;, +    public void testTriggerBooleanScorer() throws Exception {, +    	client.admin().indices().prepareDelete().execute().actionGet();, +        client.admin().indices().prepareCreate("test").setSettings(settingsBuilder().put("index.number_of_shards", 1)).execute().actionGet();, +, +        client.prepareIndex("test", "type", "1").setSource("field", "value1", "color", "red").execute().actionGet();, +        client.prepareIndex("test", "type", "2").setSource("field", "value2", "color", "blue").execute().actionGet();, +        client.prepareIndex("test", "type", "3").setSource("field", "value3", "color", "red").execute().actionGet();, +        client.prepareIndex("test", "type", "4").setSource("field", "value4", "color", "blue").execute().actionGet();, +        client.admin().indices().prepareRefresh().execute().actionGet();, +        SearchResponse searchResponse = client.prepareSearch("test"), +                .setQuery(customFiltersScoreQuery(fuzzyQuery("field", "value")), +                		.add(FilterBuilders.idsFilter("type").addIds("1"), 3)), +                .execute().actionGet();, +        assertThat(Arrays.toString(searchResponse.shardFailures()), searchResponse.failedShards(), equalTo(0));, +, +        assertThat(searchResponse.hits().totalHits(), equalTo(4l));, +    }, +, +    @Test]