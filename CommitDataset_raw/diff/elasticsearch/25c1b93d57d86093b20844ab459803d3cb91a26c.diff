[+++ b/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java, +        SourceToParse sourceToParse = SourceToParse.source(SourceToParse.Origin.PRIMARY, indexRequest.source()).type(indexRequest.type()).id(indexRequest.id()), +                    SourceToParse sourceToParse = SourceToParse.source(SourceToParse.Origin.REPLICA, indexRequest.source()).type(indexRequest.type()).id(indexRequest.id()), +++ b/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java, +        SourceToParse sourceToParse = SourceToParse.source(SourceToParse.Origin.PRIMARY, indexRequest.source()).type(indexRequest.type()).id(indexRequest.id()), +                    SourceToParse sourceToParse = SourceToParse.source(SourceToParse.Origin.REPLICA, indexRequest.source()).type(indexRequest.type()).id(indexRequest.id()), +++ b/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java, +        SourceToParse sourceToParse = SourceToParse.source(SourceToParse.Origin.PRIMARY, request.source()).type(request.type()).id(request.id()), +        SourceToParse sourceToParse = SourceToParse.source(SourceToParse.Origin.REPLICA, request.source()).type(request.type()).id(request.id()), +++ b/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java, +        SourceToParse sourceToParse = SourceToParse.source(SourceToParse.Origin.PRIMARY, indexRequest.source()).type(indexRequest.type()).id(indexRequest.id()), +                    SourceToParse sourceToParse = SourceToParse.source(SourceToParse.Origin.REPLICA, indexRequest.source()).type(indexRequest.type()).id(indexRequest.id()), +++ b/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java, +        SourceToParse sourceToParse = SourceToParse.source(SourceToParse.Origin.PRIMARY, request.source()).type(request.type()).id(request.id()), +        SourceToParse sourceToParse = SourceToParse.source(SourceToParse.Origin.REPLICA, request.source()).type(request.type()).id(request.id()), +++ b/src/main/java/org/elasticsearch/index/mapper/SourceToParse.java, +        return new SourceToParse(Origin.PRIMARY, parser);, +        return new SourceToParse(Origin.PRIMARY, source);, +    public static SourceToParse source(Origin origin, BytesReference source) {, +        return new SourceToParse(origin, source);, +    }, +, +    private final Origin origin;, +, +    public SourceToParse(Origin origin, XContentParser parser) {, +        this.origin = origin;, +    public SourceToParse(Origin origin, BytesReference source) {, +        this.origin = origin;, +    public Origin origin() {, +        return origin;, +    }, +, +, +    public static enum Origin {, +, +        PRIMARY,, +        REPLICA, +, +    }, +, +++ b/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java, +        SourceToParse sourceToParse = SourceToParse.source(SourceToParse.Origin.PRIMARY, indexRequest.source()).type(indexRequest.type()).id(indexRequest.id()), +                    SourceToParse sourceToParse = SourceToParse.source(SourceToParse.Origin.REPLICA, indexRequest.source()).type(indexRequest.type()).id(indexRequest.id()), +++ b/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java, +        SourceToParse sourceToParse = SourceToParse.source(SourceToParse.Origin.PRIMARY, request.source()).type(request.type()).id(request.id()), +        SourceToParse sourceToParse = SourceToParse.source(SourceToParse.Origin.REPLICA, request.source()).type(request.type()).id(request.id()), +++ b/src/main/java/org/elasticsearch/index/mapper/SourceToParse.java, +        return new SourceToParse(Origin.PRIMARY, parser);, +        return new SourceToParse(Origin.PRIMARY, source);, +    public static SourceToParse source(Origin origin, BytesReference source) {, +        return new SourceToParse(origin, source);, +    }, +, +    private final Origin origin;, +, +    public SourceToParse(Origin origin, XContentParser parser) {, +        this.origin = origin;, +    public SourceToParse(Origin origin, BytesReference source) {, +        this.origin = origin;, +    public Origin origin() {, +        return origin;, +    }, +, +, +    public static enum Origin {, +, +        PRIMARY,, +        REPLICA, +, +    }, +, +++ b/src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java, +                if (context.sourceToParse().origin() == SourceToParse.Origin.PRIMARY && now >= expire) {, +++ b/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java, +        SourceToParse sourceToParse = SourceToParse.source(SourceToParse.Origin.PRIMARY, indexRequest.source()).type(indexRequest.type()).id(indexRequest.id()), +                    SourceToParse sourceToParse = SourceToParse.source(SourceToParse.Origin.REPLICA, indexRequest.source()).type(indexRequest.type()).id(indexRequest.id()), +++ b/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java, +        SourceToParse sourceToParse = SourceToParse.source(SourceToParse.Origin.PRIMARY, request.source()).type(request.type()).id(request.id()), +        SourceToParse sourceToParse = SourceToParse.source(SourceToParse.Origin.REPLICA, request.source()).type(request.type()).id(request.id()), +++ b/src/main/java/org/elasticsearch/index/mapper/SourceToParse.java, +        return new SourceToParse(Origin.PRIMARY, parser);, +        return new SourceToParse(Origin.PRIMARY, source);, +    public static SourceToParse source(Origin origin, BytesReference source) {, +        return new SourceToParse(origin, source);, +    }, +, +    private final Origin origin;, +, +    public SourceToParse(Origin origin, XContentParser parser) {, +        this.origin = origin;, +    public SourceToParse(Origin origin, BytesReference source) {, +        this.origin = origin;, +    public Origin origin() {, +        return origin;, +    }, +, +, +    public static enum Origin {, +, +        PRIMARY,]