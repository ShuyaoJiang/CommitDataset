[+++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/StringTermsAggregator.java, +            assert hash == bytes.hashCode();, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/StringTermsAggregator.java, +            assert hash == bytes.hashCode();, +++ b/src/main/java/org/elasticsearch/search/aggregations/support/FieldDataSource.java, +                        bytes.add(super.nextValue(), super.currentValueHash());, +                public int currentValueHash() {, +                    return spare.hashCode();, +                }, +, +                @Override]