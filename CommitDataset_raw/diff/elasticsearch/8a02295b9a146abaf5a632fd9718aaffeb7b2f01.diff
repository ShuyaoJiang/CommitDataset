[+++ b/core/src/main/java/org/elasticsearch/common/geo/builders/EnvelopeBuilder.java, +, +    private Coordinate topLeft;, +    private Coordinate bottomRight;, +    public Coordinate topLeft() {, +        return this.topLeft;, +    }, +, +    public Coordinate bottomRight() {, +        return this.bottomRight;, +    }, +, +        return Objects.hash(topLeft, bottomRight);, +        return Objects.equals(topLeft, other.topLeft) &&, +        return new EnvelopeBuilder(), +++ b/core/src/main/java/org/elasticsearch/common/geo/builders/EnvelopeBuilder.java, +, +    private Coordinate topLeft;, +    private Coordinate bottomRight;, +    public Coordinate topLeft() {, +        return this.topLeft;, +    }, +, +    public Coordinate bottomRight() {, +        return this.bottomRight;, +    }, +, +        return Objects.hash(topLeft, bottomRight);, +        return Objects.equals(topLeft, other.topLeft) &&, +        return new EnvelopeBuilder(), +++ b/core/src/main/java/org/elasticsearch/common/geo/builders/GeometryCollectionBuilder.java, +, +import org.elasticsearch.common.io.stream.StreamInput;, +import org.elasticsearch.common.io.stream.StreamOutput;, +import java.util.Objects;, +    public static final GeometryCollectionBuilder PROTOTYPE = new GeometryCollectionBuilder();, +, +    @Override, +    public int hashCode() {, +        return Objects.hash(shapes);, +    }, +, +    @Override, +    public boolean equals(Object obj) {, +        if (this == obj) {, +            return true;, +        }, +        if (obj == null || getClass() != obj.getClass()) {, +            return false;, +        }, +        GeometryCollectionBuilder other = (GeometryCollectionBuilder) obj;, +        return Objects.equals(shapes, other.shapes);, +    }, +, +    @Override, +    public void writeTo(StreamOutput out) throws IOException {, +        out.writeVInt(shapes.size());, +        for (ShapeBuilder shape : shapes) {, +            out.writeShape(shape);, +        }, +    }, +, +    @Override, +    public GeometryCollectionBuilder readFrom(StreamInput in) throws IOException {, +        GeometryCollectionBuilder geometryCollectionBuilder = new GeometryCollectionBuilder();, +        int shapes = in.readVInt();, +        for (int i = 0; i < shapes; i++) {, +            geometryCollectionBuilder.shape(in.readShape());, +        }, +        return geometryCollectionBuilder;, +    }, +, +++ b/core/src/main/java/org/elasticsearch/common/geo/builders/EnvelopeBuilder.java, +, +    private Coordinate topLeft;, +    private Coordinate bottomRight;, +    public Coordinate topLeft() {, +        return this.topLeft;, +    }, +, +    public Coordinate bottomRight() {, +        return this.bottomRight;, +    }, +, +        return Objects.hash(topLeft, bottomRight);, +        return Objects.equals(topLeft, other.topLeft) &&, +        return new EnvelopeBuilder(), +++ b/core/src/main/java/org/elasticsearch/common/geo/builders/GeometryCollectionBuilder.java, +, +import org.elasticsearch.common.io.stream.StreamInput;, +import org.elasticsearch.common.io.stream.StreamOutput;, +import java.util.Objects;, +    public static final GeometryCollectionBuilder PROTOTYPE = new GeometryCollectionBuilder();, +, +    @Override, +    public int hashCode() {, +        return Objects.hash(shapes);, +    }, +, +    @Override]