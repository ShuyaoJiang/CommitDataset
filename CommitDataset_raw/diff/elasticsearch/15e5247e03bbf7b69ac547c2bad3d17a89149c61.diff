[+++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +                    numberOfPendingTasks, numberOfInFlightFetch, UnassignedInfo.getNumberOfDelayedUnassigned(settings, clusterState),, +                numberOfInFlightFetch, UnassignedInfo.getNumberOfDelayedUnassigned(settings, clusterState), pendingTaskTimeInQueue);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +                    numberOfPendingTasks, numberOfInFlightFetch, UnassignedInfo.getNumberOfDelayedUnassigned(settings, clusterState),, +                numberOfInFlightFetch, UnassignedInfo.getNumberOfDelayedUnassigned(settings, clusterState), pendingTaskTimeInQueue);, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java, +                TimeValue nextDelay = TimeValue.timeValueMillis(UnassignedInfo.findNextDelayedAllocationIn(settings, event.state()));, +                logger.info("delaying allocation for [{}] unassigned shards, next check in [{}]", UnassignedInfo.getNumberOfDelayedUnassigned(settings, event.state()), nextDelay);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +                    numberOfPendingTasks, numberOfInFlightFetch, UnassignedInfo.getNumberOfDelayedUnassigned(settings, clusterState),, +                numberOfInFlightFetch, UnassignedInfo.getNumberOfDelayedUnassigned(settings, clusterState), pendingTaskTimeInQueue);, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java, +                TimeValue nextDelay = TimeValue.timeValueMillis(UnassignedInfo.findNextDelayedAllocationIn(settings, event.state()));, +                logger.info("delaying allocation for [{}] unassigned shards, next check in [{}]", UnassignedInfo.getNumberOfDelayedUnassigned(settings, event.state()), nextDelay);, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java, +    public long getDelayAllocationExpirationIn(Settings settings, Settings indexSettings) {, +        long delta = System.currentTimeMillis() - timestamp;, +    public static int getNumberOfDelayedUnassigned(Settings settings, ClusterState state) {, +                long delay = shard.unassignedInfo().getDelayAllocationExpirationIn(settings, indexMetaData.getSettings());, +    public static long findNextDelayedAllocationIn(Settings settings, ClusterState state) {, +                long nextShardDelay = shard.unassignedInfo().getDelayAllocationExpirationIn(settings, indexMetaData.getSettings());, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +                    numberOfPendingTasks, numberOfInFlightFetch, UnassignedInfo.getNumberOfDelayedUnassigned(settings, clusterState),, +                numberOfInFlightFetch, UnassignedInfo.getNumberOfDelayedUnassigned(settings, clusterState), pendingTaskTimeInQueue);, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java, +                TimeValue nextDelay = TimeValue.timeValueMillis(UnassignedInfo.findNextDelayedAllocationIn(settings, event.state()));, +                logger.info("delaying allocation for [{}] unassigned shards, next check in [{}]", UnassignedInfo.getNumberOfDelayedUnassigned(settings, event.state()), nextDelay);, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java, +    public long getDelayAllocationExpirationIn(Settings settings, Settings indexSettings) {, +        long delta = System.currentTimeMillis() - timestamp;, +    public static int getNumberOfDelayedUnassigned(Settings settings, ClusterState state) {, +                long delay = shard.unassignedInfo().getDelayAllocationExpirationIn(settings, indexMetaData.getSettings());, +    public static long findNextDelayedAllocationIn(Settings settings, ClusterState state) {, +                long nextShardDelay = shard.unassignedInfo().getDelayAllocationExpirationIn(settings, indexMetaData.getSettings());, +++ b/core/src/main/java/org/elasticsearch/gateway/GatewayAllocator.java, +        changed |= replicaShardAllocator.allocateUnassigned(allocation);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +                    numberOfPendingTasks, numberOfInFlightFetch, UnassignedInfo.getNumberOfDelayedUnassigned(settings, clusterState),, +                numberOfInFlightFetch, UnassignedInfo.getNumberOfDelayedUnassigned(settings, clusterState), pendingTaskTimeInQueue);, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java, +                TimeValue nextDelay = TimeValue.timeValueMillis(UnassignedInfo.findNextDelayedAllocationIn(settings, event.state()));, +                logger.info("delaying allocation for [{}] unassigned shards, next check in [{}]", UnassignedInfo.getNumberOfDelayedUnassigned(settings, event.state()), nextDelay);, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java, +    public long getDelayAllocationExpirationIn(Settings settings, Settings indexSettings) {, +        long delta = System.currentTimeMillis() - timestamp;, +    public static int getNumberOfDelayedUnassigned(Settings settings, ClusterState state) {, +                long delay = shard.unassignedInfo().getDelayAllocationExpirationIn(settings, indexMetaData.getSettings());, +    public static long findNextDelayedAllocationIn(Settings settings, ClusterState state) {, +                long nextShardDelay = shard.unassignedInfo().getDelayAllocationExpirationIn(settings, indexMetaData.getSettings());, +++ b/core/src/main/java/org/elasticsearch/gateway/GatewayAllocator.java, +        changed |= replicaShardAllocator.allocateUnassigned(allocation);, +++ b/core/src/main/java/org/elasticsearch/gateway/ReplicaShardAllocator.java, +                long delay = shard.unassignedInfo().getDelayAllocationExpirationIn(settings, indexMetaData.getSettings());, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +                    numberOfPendingTasks, numberOfInFlightFetch, UnassignedInfo.getNumberOfDelayedUnassigned(settings, clusterState),, +                numberOfInFlightFetch, UnassignedInfo.getNumberOfDelayedUnassigned(settings, clusterState), pendingTaskTimeInQueue);, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java, +                TimeValue nextDelay = TimeValue.timeValueMillis(UnassignedInfo.findNextDelayedAllocationIn(settings, event.state()));, +                logger.info("delaying allocation for [{}] unassigned shards, next check in [{}]", UnassignedInfo.getNumberOfDelayedUnassigned(settings, event.state()), nextDelay);, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java, +    public long getDelayAllocationExpirationIn(Settings settings, Settings indexSettings) {, +        long delta = System.currentTimeMillis() - timestamp;, +    public static int getNumberOfDelayedUnassigned(Settings settings, ClusterState state) {, +                long delay = shard.unassignedInfo().getDelayAllocationExpirationIn(settings, indexMetaData.getSettings());, +    public static long findNextDelayedAllocationIn(Settings settings, ClusterState state) {, +                long nextShardDelay = shard.unassignedInfo().getDelayAllocationExpirationIn(settings, indexMetaData.getSettings());, +++ b/core/src/main/java/org/elasticsearch/gateway/GatewayAllocator.java, +        changed |= replicaShardAllocator.allocateUnassigned(allocation);, +++ b/core/src/main/java/org/elasticsearch/gateway/ReplicaShardAllocator.java, +                long delay = shard.unassignedInfo().getDelayAllocationExpirationIn(settings, indexMetaData.getSettings());, +++ b/core/src/main/java/org/elasticsearch/index/engine/EngineConfig.java, +    private boolean create = false;, +, +    /**, +     * Iff set to <code>true</code> the engine will create a new lucene index when opening the engine., +     * Otherwise the lucene index writer is opened in append mode. The default is <code>false</code>, +     */, +    public void setCreate(boolean create) {, +        this.create = create;, +    }, +, +    /**, +     * Iff <code>true</code> the engine should create a new lucene index when opening the engine., +     * Otherwise the lucene index writer should be opened in append mode. The default is <code>false</code>, +     */, +    public boolean isCreate() {, +        return create;, +    }, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +                    numberOfPendingTasks, numberOfInFlightFetch, UnassignedInfo.getNumberOfDelayedUnassigned(settings, clusterState),, +                numberOfInFlightFetch, UnassignedInfo.getNumberOfDelayedUnassigned(settings, clusterState), pendingTaskTimeInQueue);, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java, +                TimeValue nextDelay = TimeValue.timeValueMillis(UnassignedInfo.findNextDelayedAllocationIn(settings, event.state()));, +                logger.info("delaying allocation for [{}] unassigned shards, next check in [{}]", UnassignedInfo.getNumberOfDelayedUnassigned(settings, event.state()), nextDelay);, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/UnassignedInfo.java, +    public long getDelayAllocationExpirationIn(Settings settings, Settings indexSettings) {, +        long delta = System.currentTimeMillis() - timestamp;, +    public static int getNumberOfDelayedUnassigned(Settings settings, ClusterState state) {, +                long delay = shard.unassignedInfo().getDelayAllocationExpirationIn(settings, indexMetaData.getSettings());]