[+++ b/core/src/test/java/org/elasticsearch/search/child/ChildQuerySearchBwcTests.java, +++ b/core/src/test/java/org/elasticsearch/search/child/ChildQuerySearchBwcTests.java, +++ b/core/src/test/java/org/elasticsearch/search/child/ParentFieldLoadingBwcTest.java, +import static org.elasticsearch.test.hamcrest.ElasticsearchAssertions.*;, +                .setSettings(Settings.builder().put(indexSettings), +                        .endObject().endObject().endObject()), +                .addMapping("child", XContentFactory.jsonBuilder().startObject().startObject("child"), +                        .startObject("_parent"), +                        .field("type", "parent"), +                        .endObject(), +                        .startObject("properties"), +                        .startObject("c_field"), +                        .field("type", "string"), +                        .startObject("fielddata"), +                        .field(FieldDataType.FORMAT_KEY, MappedFieldType.Loading.LAZY), +                        .endObject(), +                        .endObject(), +        IndicesStatsResponse statsResponse = client().admin().indices(), +        assertThat(statsResponse.getTotal().getFieldData().getMemorySizeInBytes(), greaterThan(0l));, +        assertThat(statsResponse.getTotal().getFieldData().getFields().get("_parent"), greaterThan(0l));, +        statsResponse = client().admin().indices(), +        assertThat(statsResponse.getTotal().getFieldData().getMemorySizeInBytes(), greaterThan(0l));, +        assertThat(statsResponse.getTotal().getFieldData().getFields().get("_parent"), greaterThan(0l));, +        statsResponse = client().admin().indices(), +        assertThat(statsResponse.getTotal().getFieldData().getMemorySizeInBytes(), equalTo(0l));, +        assertThat(statsResponse.getTotal().getFieldData().getFields().get("_parent"), equalTo(0l));]