[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java, +                if (!resolvedField && allValuesAreNull && fieldDocs.fields[i].getField() != null) {, +                    // we did not manage to resolve a field (and its not score or doc, which have no field), and all the fields are null (which can only happen for STRING), make it a STRING]