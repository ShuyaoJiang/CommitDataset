[+++ b/src/test/java/org/elasticsearch/search/aggregations/metrics/GeoBoundsTests.java, +import org.elasticsearch.search.SearchHitField;, +import org.elasticsearch.search.sort.SortBuilders;, +import org.elasticsearch.search.sort.SortOrder;, +, +        // Added to debug a test failure (Dev issue #266) where the terms aggregation seems to be reporting two documents with the same value for NUMBER_FIELD_NAME.  This will chaeck that after, +        // random indexing each document only has 1 value for NUMBER_FIELD_NAME and it is the correct value, +        SearchResponse response = client().prepareSearch("high_card_idx").addField(NUMBER_FIELD_NAME).addSort(SortBuilders.fieldSort(NUMBER_FIELD_NAME).order(SortOrder.ASC)).setSize(5000).get();, +        assertSearchResponse(response);, +        assertThat(response.getHits().totalHits(), equalTo(2000l));, +        for (int i = 0; i < 2000; i++) {, +            SearchHitField hitField = response.getHits().getAt(i).field(NUMBER_FIELD_NAME);, +            assertThat("Hit " + i + " has wrong number of values", hitField.getValues().size(), equalTo(1));, +            Integer value = hitField.getValue();, +            assertThat("Hit " + i + " has wrong value", value, equalTo(i));, +        }, +            assertThat("Bucket " + bucket.getKey() + " has wrong number of documents", bucket.getDocCount(), equalTo(1l));]