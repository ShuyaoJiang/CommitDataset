[+++ b/distribution/src/main/resources/bin/elasticsearch, +"$JAVA" -cp "$ES_CLASSPATH" org.elasticsearch.tools.JavaVersionChecker, +, +if [ $? -ne 0 ]; then, +    echo "Elasticsearch requires at least Java 8 but your Java version from $JAVA does not meet this requirement", +    exit 1, +fi, +, +++ b/distribution/src/main/resources/bin/elasticsearch, +"$JAVA" -cp "$ES_CLASSPATH" org.elasticsearch.tools.JavaVersionChecker, +, +if [ $? -ne 0 ]; then, +    echo "Elasticsearch requires at least Java 8 but your Java version from $JAVA does not meet this requirement", +    exit 1, +fi, +, +++ b/distribution/src/main/resources/bin/elasticsearch.in.bat, +, +%JAVA% -cp "%ES_CLASSPATH%" "org.elasticsearch.tools.JavaVersionChecker", +, +IF ERRORLEVEL 1 (, +    ECHO Elasticsearch requires at least Java 8 but your Java version from %JAVA% does not meet this requirement, +    EXIT /B 1, +), +, +++ b/distribution/src/main/resources/bin/elasticsearch, +"$JAVA" -cp "$ES_CLASSPATH" org.elasticsearch.tools.JavaVersionChecker, +, +if [ $? -ne 0 ]; then, +    echo "Elasticsearch requires at least Java 8 but your Java version from $JAVA does not meet this requirement", +    exit 1, +fi, +, +++ b/distribution/src/main/resources/bin/elasticsearch.in.bat, +, +%JAVA% -cp "%ES_CLASSPATH%" "org.elasticsearch.tools.JavaVersionChecker", +, +IF ERRORLEVEL 1 (, +    ECHO Elasticsearch requires at least Java 8 but your Java version from %JAVA% does not meet this requirement, +    EXIT /B 1, +), +, +++ b/distribution/tools/java-version-checker/build.gradle, +, +import org.elasticsearch.gradle.precommit.PrecommitTasks, +apply plugin: 'ru.vyarus.animalsniffer', +targetCompatibility = JavaVersion.VERSION_1_6, +, +dependencies {, +    signature "org.codehaus.mojo.signature:java16:1.0@signature", +}, +, +forbiddenApisMain {, +    // java-version-checker does not depend on core so only JDK signatures should be checked, +    signaturesURLs = [PrecommitTasks.getResource('/forbidden/jdk-signatures.txt')], +}, +jarHell.enabled=false, +++ b/distribution/src/main/resources/bin/elasticsearch, +"$JAVA" -cp "$ES_CLASSPATH" org.elasticsearch.tools.JavaVersionChecker, +, +if [ $? -ne 0 ]; then, +    echo "Elasticsearch requires at least Java 8 but your Java version from $JAVA does not meet this requirement", +    exit 1, +fi, +, +++ b/distribution/src/main/resources/bin/elasticsearch.in.bat, +, +%JAVA% -cp "%ES_CLASSPATH%" "org.elasticsearch.tools.JavaVersionChecker", +, +IF ERRORLEVEL 1 (, +    ECHO Elasticsearch requires at least Java 8 but your Java version from %JAVA% does not meet this requirement, +    EXIT /B 1, +), +, +++ b/distribution/tools/java-version-checker/build.gradle, +, +import org.elasticsearch.gradle.precommit.PrecommitTasks, +apply plugin: 'ru.vyarus.animalsniffer', +targetCompatibility = JavaVersion.VERSION_1_6, +, +dependencies {, +    signature "org.codehaus.mojo.signature:java16:1.0@signature", +}, +, +forbiddenApisMain {, +    // java-version-checker does not depend on core so only JDK signatures should be checked, +    signaturesURLs = [PrecommitTasks.getResource('/forbidden/jdk-signatures.txt')], +}, +jarHell.enabled=false, +++ b/distribution/tools/java-version-checker/src/main/java/org/elasticsearch/tools/JavaVersionChecker.java, +/*, + * Licensed to Elasticsearch under one or more contributor, + * license agreements. See the NOTICE file distributed with, + * this work for additional information regarding copyright, + * ownership. Elasticsearch licenses this file to you under, + * the Apache License, Version 2.0 (the "License"); you may, + * not use this file except in compliance with the License., + * You may obtain a copy of the License at, + *, + *    http://www.apache.org/licenses/LICENSE-2.0]