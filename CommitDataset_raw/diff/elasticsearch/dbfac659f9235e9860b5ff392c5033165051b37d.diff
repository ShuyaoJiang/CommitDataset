[+++ b/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/InternalTopHits.java, +    public InternalTopHits(String name, int from, int size, TopDocs topDocs, InternalSearchHits searchHits) {, +            final Sort sort;, +            if (topDocs instanceof TopFieldDocs) {, +                sort = new Sort(((TopFieldDocs) topDocs).fields);, +            } else {, +                sort = null;, +            }, +, +++ b/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/InternalTopHits.java, +    public InternalTopHits(String name, int from, int size, TopDocs topDocs, InternalSearchHits searchHits) {, +            final Sort sort;, +            if (topDocs instanceof TopFieldDocs) {, +                sort = new Sort(((TopFieldDocs) topDocs).fields);, +            } else {, +                sort = null;, +            }, +, +++ b/src/main/java/org/elasticsearch/search/aggregations/metrics/tophits/TopHitsAggregator.java, +            return new InternalTopHits(name, topHitsContext.from(), topHitsContext.size(), topDocs, fetchResult.hits());, +        return new InternalTopHits(name, topHitsContext.from(), topHitsContext.size(), Lucene.EMPTY_TOP_DOCS, InternalSearchHits.empty());]