[+++ b/client/client-benchmark-noop-api-plugin/src/main/java/org/elasticsearch/plugin/noop/action/bulk/RestNoopBulkAction.java, +import org.elasticsearch.action.DocumentRequest;, +        private final BulkItemResponse ITEM_RESPONSE = new BulkItemResponse(1, DocumentRequest.OpType.UPDATE,, +++ b/client/client-benchmark-noop-api-plugin/src/main/java/org/elasticsearch/plugin/noop/action/bulk/RestNoopBulkAction.java, +import org.elasticsearch.action.DocumentRequest;, +        private final BulkItemResponse ITEM_RESPONSE = new BulkItemResponse(1, DocumentRequest.OpType.UPDATE,, +++ b/client/client-benchmark-noop-api-plugin/src/main/java/org/elasticsearch/plugin/noop/action/bulk/TransportNoopBulkAction.java, +import org.elasticsearch.action.DocumentRequest;, +    private static final BulkItemResponse ITEM_RESPONSE = new BulkItemResponse(1, DocumentRequest.OpType.UPDATE,, +++ b/client/client-benchmark-noop-api-plugin/src/main/java/org/elasticsearch/plugin/noop/action/bulk/RestNoopBulkAction.java, +import org.elasticsearch.action.DocumentRequest;, +        private final BulkItemResponse ITEM_RESPONSE = new BulkItemResponse(1, DocumentRequest.OpType.UPDATE,, +++ b/client/client-benchmark-noop-api-plugin/src/main/java/org/elasticsearch/plugin/noop/action/bulk/TransportNoopBulkAction.java, +import org.elasticsearch.action.DocumentRequest;, +    private static final BulkItemResponse ITEM_RESPONSE = new BulkItemResponse(1, DocumentRequest.OpType.UPDATE,, +++ b/core/src/main/java/org/elasticsearch/action/DocumentRequest.java, +import org.elasticsearch.action.delete.DeleteRequest;, +import org.elasticsearch.action.index.IndexRequest;, +import org.elasticsearch.action.update.UpdateReplicaRequest;, +import org.elasticsearch.action.update.UpdateRequest;, +import org.elasticsearch.common.io.stream.StreamInput;, +import org.elasticsearch.common.io.stream.StreamOutput;, +import org.elasticsearch.action.support.replication.ReplicatedWriteRequest;, +import org.elasticsearch.index.VersionType;, +, +import java.io.IOException;, +import java.util.Locale;, + * Generic interface to group ActionRequest, which perform writes to a single document, + * Action requests implementing this can be part of {@link org.elasticsearch.action.bulk.BulkRequest}, +public abstract class DocumentRequest<T extends ReplicatedWriteRequest<T>> extends ReplicatedWriteRequest<T> {, +    public abstract String type();, +    public abstract String id();, +    public abstract T routing(String routing);, +    public abstract String routing();, +    public abstract String parent();, +    /**, +     * Get the document version for this request, +     * @return the document version, +     */, +    public abstract long version();, +, +    /**, +     * Sets the version, which will perform the operation only if a matching, +     * version exists and no changes happened on the doc since then., +     */, +    public abstract T version(long version);, +, +    /**, +     * Get the document version type for this request, +     * @return the document version type, +     */, +    public abstract VersionType versionType();, +, +    /**, +     * Sets the versioning type. Defaults to {@link VersionType#INTERNAL}., +     */, +    public abstract T versionType(VersionType versionType);, +, +    /**, +     * Get the requested document operation type of the request, +     * @return the operation type {@link OpType}, +     */, +    public abstract OpType opType();, +, +    /**, +     * Requested operation type to perform on the document, +     */, +    public enum OpType {, +        /**, +         * Index the source. If there an existing document with the id, it will, +         * be replaced., +         */, +        INDEX(0),, +        /**, +         * Creates the resource. Simply adds it to the index, if there is an existing, +         * document with the id, then it won't be removed., +         */, +        CREATE(1),, +        /** Updates a document */, +        UPDATE(2),, +        /** Deletes a document */, +        DELETE(3);, +, +        private final byte op;, +        private final String lowercase;, +, +        OpType(int op) {, +            this.op = (byte) op;, +            this.lowercase = this.toString().toLowerCase(Locale.ROOT);, +        }, +, +        public byte getId() {, +            return op;, +        }, +, +        public String getLowercase() {, +            return lowercase;, +        }, +, +        public static OpType fromId(byte id) {]