[+++ b/x-pack/plugin/security/src/test/java/org/elasticsearch/xpack/security/transport/AbstractSimpleSecurityTransportTestCase.java, +import java.util.concurrent.atomic.AtomicBoolean;, +            AtomicBoolean stopped = new AtomicBoolean(false);, +            socket.setSoTimeout(10);, +            Thread emptyReader = new Thread(() -> {, +                while (stopped.get() == false) {, +                        throw new AssertionError(e);, +                    }, +            emptyReader.start();, +            stopped.set(true);, +            emptyReader.join();]