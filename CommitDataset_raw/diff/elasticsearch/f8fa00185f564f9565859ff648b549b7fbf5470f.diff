[+++ b/core/src/main/java/org/elasticsearch/cluster/block/ClusterBlocks.java, +            Set<ClusterBlock> newGlobal = unmodifiableSet(global.stream(), +                    .filter(containsLevel), +                    .collect(toSet()));, +                indicesBuilder.put(entry.getKey(), unmodifiableSet(entry.getValue().stream(), +                        .filter(containsLevel), +                        .collect(toSet())));, +        Stream<ClusterBlock> blocks = concat(, +                global(level).stream(),, +                Stream.of(indices).flatMap(blocksForIndexAtLevel));, +++ b/core/src/main/java/org/elasticsearch/cluster/block/ClusterBlocks.java, +            Set<ClusterBlock> newGlobal = unmodifiableSet(global.stream(), +                    .filter(containsLevel), +                    .collect(toSet()));, +                indicesBuilder.put(entry.getKey(), unmodifiableSet(entry.getValue().stream(), +                        .filter(containsLevel), +                        .collect(toSet())));, +        Stream<ClusterBlock> blocks = concat(, +                global(level).stream(),, +                Stream.of(indices).flatMap(blocksForIndexAtLevel));, +++ b/core/src/main/java/org/elasticsearch/common/inject/MembersInjectorImpl.java, +        return unmodifiableSet(memberInjectors.stream(), +                .map(SingleMemberInjector::getInjectionPoint), +                .collect(toSet()));]