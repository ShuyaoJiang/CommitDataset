[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java, +import org.elasticsearch.indices.IndicesLifecycle;, +import org.elasticsearch.indices.InternalIndicesLifecycle;, +    private final InternalIndicesLifecycle indicesLifecycle;, +, +    @Inject public InternalIndexShard(ShardId shardId, @IndexSettings Settings indexSettings, IndicesLifecycle indicesLifecycle, Store store, Engine engine, Translog translog,, +        this.indicesLifecycle = (InternalIndicesLifecycle) indicesLifecycle;, +        indicesLifecycle.afterIndexShardStarted(this);, +        indicesLifecycle.afterIndexShardStarted(this);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java, +import org.elasticsearch.indices.IndicesLifecycle;, +import org.elasticsearch.indices.InternalIndicesLifecycle;, +    private final InternalIndicesLifecycle indicesLifecycle;, +, +    @Inject public InternalIndexShard(ShardId shardId, @IndexSettings Settings indexSettings, IndicesLifecycle indicesLifecycle, Store store, Engine engine, Translog translog,, +        this.indicesLifecycle = (InternalIndicesLifecycle) indicesLifecycle;, +        indicesLifecycle.afterIndexShardStarted(this);, +        indicesLifecycle.afterIndexShardStarted(this);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/indices/IndicesLifecycle.java, +         * Called after the index shard has been started., +         */, +        public void afterIndexShardStarted(IndexShard indexShard) {, +, +        }, +, +        /**, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java, +import org.elasticsearch.indices.IndicesLifecycle;, +import org.elasticsearch.indices.InternalIndicesLifecycle;, +    private final InternalIndicesLifecycle indicesLifecycle;, +, +    @Inject public InternalIndexShard(ShardId shardId, @IndexSettings Settings indexSettings, IndicesLifecycle indicesLifecycle, Store store, Engine engine, Translog translog,, +        this.indicesLifecycle = (InternalIndicesLifecycle) indicesLifecycle;, +        indicesLifecycle.afterIndexShardStarted(this);, +        indicesLifecycle.afterIndexShardStarted(this);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/indices/IndicesLifecycle.java, +         * Called after the index shard has been started., +         */, +        public void afterIndexShardStarted(IndexShard indexShard) {, +, +        }, +, +        /**, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/indices/InternalIndicesLifecycle.java, +    public void afterIndexShardStarted(IndexShard indexShard) {, +        for (Listener listener : listeners) {, +            listener.afterIndexShardStarted(indexShard);, +        }, +    }, +]