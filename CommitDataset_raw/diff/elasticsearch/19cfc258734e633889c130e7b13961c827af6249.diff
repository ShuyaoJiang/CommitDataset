[+++ b/docs/reference/aggregations/bucket/composite-aggregation.asciidoc, +====== Format, +, +Internally, a date is represented as a 64 bit number representing a timestamp in milliseconds-since-the-epoch., +These timestamps are returned as the bucket keys. It is possible to return a formatted date string instead using, +the format specified with the format parameter:, +, +[source,js], +--------------------------------------------------, +GET /_search, +{, +    "aggs" : {, +        "my_buckets": {, +            "composite" : {, +                "sources" : [, +                    {, +                        "date": {, +                            "date_histogram" : {, +                                "field": "timestamp",, +                                "interval": "1d",, +                                "format": "yyyy-MM-dd" <1>, +                            }, +                        }, +                    }, +                ], +            }, +        }, +    }, +}, +--------------------------------------------------, +// CONSOLE, +, +<1> Supports expressive date <<date-format-pattern,format pattern>>, +, +[float], +====== Time Zone, +++ b/docs/reference/aggregations/bucket/composite-aggregation.asciidoc, +====== Format, +, +Internally, a date is represented as a 64 bit number representing a timestamp in milliseconds-since-the-epoch., +These timestamps are returned as the bucket keys. It is possible to return a formatted date string instead using, +the format specified with the format parameter:, +, +[source,js], +--------------------------------------------------, +GET /_search, +{, +    "aggs" : {, +        "my_buckets": {, +            "composite" : {, +                "sources" : [, +                    {, +                        "date": {, +                            "date_histogram" : {, +                                "field": "timestamp",, +                                "interval": "1d",, +                                "format": "yyyy-MM-dd" <1>, +                            }, +                        }, +                    }, +                ], +            }, +        }, +    }, +}, +--------------------------------------------------, +// CONSOLE, +, +<1> Supports expressive date <<date-format-pattern,format pattern>>, +, +[float], +====== Time Zone, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/search.aggregation/230_composite.yml, +                    date:, +                      type: date, +      index:, +        index: test, +        type:  doc, +        id:    5, +        body:  { "date": "2017-10-20T03:08:45" }, +, +  - do:, +      index:, +        index: test, +        type:  doc, +        id:    6, +        body:  { "date": "2017-10-21T07:00:00" }, +, +  - do:, +  - match: {hits.total: 6}, +  - match: {hits.total: 6}, +  - match: {hits.total: 6}, +  - match: {hits.total: 6}, +, +---, +"Composite aggregation with format":, +  - skip:, +      version: " - 6.99.99", +      reason:  this uses a new option (format) added in 7.0.0, +]