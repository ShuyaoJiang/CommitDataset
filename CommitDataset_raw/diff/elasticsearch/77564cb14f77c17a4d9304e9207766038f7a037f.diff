[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/internal/InternalSearchHits.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/internal/InternalSearchHits.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/transport/local/LocalTransport.java, +import org.elasticsearch.util.io.stream.*;, +        HandlesStreamOutput stream = BytesStreamOutput.Cached.cachedHandles();, +        final byte[] data = ((BytesStreamOutput) stream.wrappedOut()).copiedByteArray();, +        StreamInput stream = new BytesStreamInput(data);, +        stream = HandlesStreamInput.Cached.cached(stream);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/internal/InternalSearchHits.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/transport/local/LocalTransport.java, +import org.elasticsearch.util.io.stream.*;, +        HandlesStreamOutput stream = BytesStreamOutput.Cached.cachedHandles();, +        final byte[] data = ((BytesStreamOutput) stream.wrappedOut()).copiedByteArray();, +        StreamInput stream = new BytesStreamInput(data);, +        stream = HandlesStreamInput.Cached.cached(stream);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/transport/local/LocalTransportChannel.java, +import org.elasticsearch.util.io.stream.HandlesStreamOutput;, +        HandlesStreamOutput stream = BytesStreamOutput.Cached.cachedHandles();, +        final byte[] data = ((BytesStreamOutput) stream.wrappedOut()).copiedByteArray();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/internal/InternalSearchHits.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/transport/local/LocalTransport.java, +import org.elasticsearch.util.io.stream.*;, +        HandlesStreamOutput stream = BytesStreamOutput.Cached.cachedHandles();, +        final byte[] data = ((BytesStreamOutput) stream.wrappedOut()).copiedByteArray();, +        StreamInput stream = new BytesStreamInput(data);, +        stream = HandlesStreamInput.Cached.cached(stream);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/transport/local/LocalTransportChannel.java, +import org.elasticsearch.util.io.stream.HandlesStreamOutput;, +        HandlesStreamOutput stream = BytesStreamOutput.Cached.cachedHandles();, +        final byte[] data = ((BytesStreamOutput) stream.wrappedOut()).copiedByteArray();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/transport/netty/MessageChannelHandler.java, +import org.elasticsearch.util.io.stream.HandlesStreamInput;, +        streamIn = HandlesStreamInput.Cached.cached(streamIn);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/internal/InternalSearchHits.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/transport/local/LocalTransport.java, +import org.elasticsearch.util.io.stream.*;, +        HandlesStreamOutput stream = BytesStreamOutput.Cached.cachedHandles();, +        final byte[] data = ((BytesStreamOutput) stream.wrappedOut()).copiedByteArray();, +        StreamInput stream = new BytesStreamInput(data);, +        stream = HandlesStreamInput.Cached.cached(stream);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/transport/local/LocalTransportChannel.java, +import org.elasticsearch.util.io.stream.HandlesStreamOutput;, +        HandlesStreamOutput stream = BytesStreamOutput.Cached.cachedHandles();, +        final byte[] data = ((BytesStreamOutput) stream.wrappedOut()).copiedByteArray();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/transport/netty/MessageChannelHandler.java, +import org.elasticsearch.util.io.stream.HandlesStreamInput;, +        streamIn = HandlesStreamInput.Cached.cached(streamIn);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/transport/netty/NettyTransport.java, +import org.elasticsearch.util.io.stream.HandlesStreamOutput;, +        HandlesStreamOutput stream = BytesStreamOutput.Cached.cachedHandles();, +        byte[] data = ((BytesStreamOutput) stream.wrappedOut()).copiedByteArray();, +        ChannelBuffer buffer = ChannelBuffers.wrappedBuffer(data);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/internal/InternalSearchHits.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/transport/local/LocalTransport.java, +import org.elasticsearch.util.io.stream.*;, +        HandlesStreamOutput stream = BytesStreamOutput.Cached.cachedHandles();, +        final byte[] data = ((BytesStreamOutput) stream.wrappedOut()).copiedByteArray();, +        StreamInput stream = new BytesStreamInput(data);, +        stream = HandlesStreamInput.Cached.cached(stream);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/transport/local/LocalTransportChannel.java, +import org.elasticsearch.util.io.stream.HandlesStreamOutput;, +        HandlesStreamOutput stream = BytesStreamOutput.Cached.cachedHandles();, +        final byte[] data = ((BytesStreamOutput) stream.wrappedOut()).copiedByteArray();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/transport/netty/MessageChannelHandler.java]