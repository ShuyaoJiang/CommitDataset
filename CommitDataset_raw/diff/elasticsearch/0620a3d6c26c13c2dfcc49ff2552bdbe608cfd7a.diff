[+++ b/core/src/main/java/org/elasticsearch/common/blobstore/fs/FsBlobContainer.java, +import java.nio.file.DirectoryNotEmptyException;, +        try {, +            if (!Files.deleteIfExists(blobPath)) {, +                throw new IOException("File " + blobPath.toString() + " does not exist");, +            }, +        } catch (DirectoryNotEmptyException | SecurityException e) {, +            throw new IOException(e);, +        }, +++ b/core/src/main/java/org/elasticsearch/common/blobstore/fs/FsBlobContainer.java, +import java.nio.file.DirectoryNotEmptyException;, +        try {, +            if (!Files.deleteIfExists(blobPath)) {, +                throw new IOException("File " + blobPath.toString() + " does not exist");, +            }, +        } catch (DirectoryNotEmptyException | SecurityException e) {, +            throw new IOException(e);, +        }, +++ b/plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsBlobContainer.java, +        } catch (FileNotFoundException e) {, +            throw new IOException(e);]