[+++ b/build.gradle, +    // minimum java 8, +    sourceCompatibility = JavaVersion.VERSION_1_8, +    targetCompatibility = sourceCompatibility, +, +      languageLevel = sourceCompatibility, +  task cleanEclipseSettings(type: Delete) {, +    delete '.settings', +  }, +  tasks.cleanEclipse.dependsOn(cleanEclipseSettings), +  tasks.eclipse.dependsOn(cleanEclipse), +  tasks.eclipse.dependsOn(copyEclipseSettings), +++ b/build.gradle, +    // minimum java 8, +    sourceCompatibility = JavaVersion.VERSION_1_8, +    targetCompatibility = sourceCompatibility, +, +      languageLevel = sourceCompatibility, +  task cleanEclipseSettings(type: Delete) {, +    delete '.settings', +  }, +  tasks.cleanEclipse.dependsOn(cleanEclipseSettings), +  tasks.eclipse.dependsOn(cleanEclipse), +  tasks.eclipse.dependsOn(copyEclipseSettings), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +        globalBuildInfo(project), +        configureRepositories(project), +            if (!JavaVersion.current().isJava8Compatible()) {, +                throw new GradleException('Java 8 or above is required to build Elasticsearch'), +            jvm System.getProperty("java.home") + File.separator + 'bin' + File.separator + 'java', +++ b/build.gradle, +    // minimum java 8, +    sourceCompatibility = JavaVersion.VERSION_1_8, +    targetCompatibility = sourceCompatibility, +, +      languageLevel = sourceCompatibility, +  task cleanEclipseSettings(type: Delete) {, +    delete '.settings', +  }, +  tasks.cleanEclipse.dependsOn(cleanEclipseSettings), +  tasks.eclipse.dependsOn(cleanEclipse), +  tasks.eclipse.dependsOn(copyEclipseSettings), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +        globalBuildInfo(project), +        configureRepositories(project), +            if (!JavaVersion.current().isJava8Compatible()) {, +                throw new GradleException('Java 8 or above is required to build Elasticsearch'), +            jvm System.getProperty("java.home") + File.separator + 'bin' + File.separator + 'java', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +            'JAVA_HOME' : System.getProperty('java.home'),, +                jps = getJpsExecutableByName("jps.exe"), +                jps = getJpsExecutableByName("jps"), +    private static File getJpsExecutableByName(String jpsExecutableName) {, +        return Paths.get(Jvm.current().javaHome.toString(), "bin/" + jpsExecutableName).toFile(), +++ b/build.gradle, +    // minimum java 8, +    sourceCompatibility = JavaVersion.VERSION_1_8, +    targetCompatibility = sourceCompatibility, +, +      languageLevel = sourceCompatibility, +  task cleanEclipseSettings(type: Delete) {, +    delete '.settings', +  }, +  tasks.cleanEclipse.dependsOn(cleanEclipseSettings), +  tasks.eclipse.dependsOn(cleanEclipse), +  tasks.eclipse.dependsOn(copyEclipseSettings), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +        globalBuildInfo(project), +        configureRepositories(project), +            if (!JavaVersion.current().isJava8Compatible()) {, +                throw new GradleException('Java 8 or above is required to build Elasticsearch'), +            jvm System.getProperty("java.home") + File.separator + 'bin' + File.separator + 'java', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +            'JAVA_HOME' : System.getProperty('java.home'),, +                jps = getJpsExecutableByName("jps.exe"), +                jps = getJpsExecutableByName("jps"), +    private static File getJpsExecutableByName(String jpsExecutableName) {, +        return Paths.get(Jvm.current().javaHome.toString(), "bin/" + jpsExecutableName).toFile(), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/StandaloneTestBasePlugin.groovy, +        BuildPlugin.configureRepositories(project), +, +++ b/build.gradle, +    // minimum java 8, +    sourceCompatibility = JavaVersion.VERSION_1_8, +    targetCompatibility = sourceCompatibility, +, +      languageLevel = sourceCompatibility, +  task cleanEclipseSettings(type: Delete) {, +    delete '.settings', +  }, +  tasks.cleanEclipse.dependsOn(cleanEclipseSettings), +  tasks.eclipse.dependsOn(cleanEclipse), +  tasks.eclipse.dependsOn(copyEclipseSettings), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +        globalBuildInfo(project), +        configureRepositories(project), +            if (!JavaVersion.current().isJava8Compatible()) {, +                throw new GradleException('Java 8 or above is required to build Elasticsearch'), +            jvm System.getProperty("java.home") + File.separator + 'bin' + File.separator + 'java', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy]