[+++ b/src/main/java/org/elasticsearch/gateway/local/state/meta/LocalGatewayMetaState.java, +            String stateFileName = "state-" + indexMetaData.version();, +                File stateFile = new File(stateLocation, stateFileName);, +                    File[] files = new File(indexLocation, "_state").listFiles();, +                    if (files == null) {, +                        continue;, +                    }, +                    for (File file : files) {, +                        if (!file.getName().startsWith("state-")) {, +                            continue;, +                        }, +                        if (file.getName().equals(stateFileName)) {, +                            continue;, +                        }, +                        file.delete();, +                    }, +            String globalFileName = "global-" + globalMetaData.version();, +                File stateFile = new File(stateLocation, globalFileName);, +                File[] files = new File(dataLocation, "_state").listFiles();, +                if (files == null) {, +                    continue;, +                }, +                for (File file : files) {, +                    if (!file.getName().startsWith("global-")) {, +                        continue;, +                    }, +                    if (file.getName().equals(globalFileName)) {, +                        continue;, +                    }, +                    file.delete();]