[+++ b/server/src/test/java/org/elasticsearch/indices/flush/FlushIT.java, +import java.util.Locale;, +            result = SyncedFlushUtil.attemptSyncedFlush(logger, internalCluster(), new ShardId(index, 0));, +        String detail = result.shardResponses().entrySet().stream(), +        return String.format(Locale.ROOT, "Total shards: [%d], failed: [%s], reason: [%s], detail: [%s]",, +            result.totalShards(), result.failed(), result.failureReason(), detail);, +    @TestLogging("_root:DEBUG"), +        final ShardsSyncedFlushResult partialResult = SyncedFlushUtil.attemptSyncedFlush(logger, internalCluster(), shardId);, +        final ShardsSyncedFlushResult fullResult = SyncedFlushUtil.attemptSyncedFlush(logger, internalCluster(), shardId);, +        final ShardsSyncedFlushResult firstSeal = SyncedFlushUtil.attemptSyncedFlush(logger, internalCluster(), shardId);, +        final ShardsSyncedFlushResult secondSeal = SyncedFlushUtil.attemptSyncedFlush(logger, internalCluster(), shardId);, +        final ShardsSyncedFlushResult thirdSeal = SyncedFlushUtil.attemptSyncedFlush(logger, internalCluster(), shardId);, +        final ShardsSyncedFlushResult forthSeal = SyncedFlushUtil.attemptSyncedFlush(logger, internalCluster(), shardId);, +++ b/server/src/test/java/org/elasticsearch/indices/flush/FlushIT.java, +import java.util.Locale;, +            result = SyncedFlushUtil.attemptSyncedFlush(logger, internalCluster(), new ShardId(index, 0));, +        String detail = result.shardResponses().entrySet().stream(), +        return String.format(Locale.ROOT, "Total shards: [%d], failed: [%s], reason: [%s], detail: [%s]",, +            result.totalShards(), result.failed(), result.failureReason(), detail);, +    @TestLogging("_root:DEBUG"), +        final ShardsSyncedFlushResult partialResult = SyncedFlushUtil.attemptSyncedFlush(logger, internalCluster(), shardId);, +        final ShardsSyncedFlushResult fullResult = SyncedFlushUtil.attemptSyncedFlush(logger, internalCluster(), shardId);, +        final ShardsSyncedFlushResult firstSeal = SyncedFlushUtil.attemptSyncedFlush(logger, internalCluster(), shardId);, +        final ShardsSyncedFlushResult secondSeal = SyncedFlushUtil.attemptSyncedFlush(logger, internalCluster(), shardId);, +        final ShardsSyncedFlushResult thirdSeal = SyncedFlushUtil.attemptSyncedFlush(logger, internalCluster(), shardId);, +        final ShardsSyncedFlushResult forthSeal = SyncedFlushUtil.attemptSyncedFlush(logger, internalCluster(), shardId);, +++ b/server/src/test/java/org/elasticsearch/indices/flush/SyncedFlushUtil.java, +import org.apache.logging.log4j.Logger;, +    public static ShardsSyncedFlushResult attemptSyncedFlush(Logger logger, InternalTestCluster cluster, ShardId shardId) {, +        logger.debug("Issue synced-flush on node [{}], shard [{}], cluster state [{}]",, +            service.nodeName(), shardId, cluster.clusterService(service.nodeName()).state());]