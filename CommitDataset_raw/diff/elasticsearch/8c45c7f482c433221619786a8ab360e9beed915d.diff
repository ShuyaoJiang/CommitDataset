[+++ b/core/src/main/java/org/elasticsearch/bootstrap/JarHell.java, +        final Map<String,Path> clazzes = new HashMap<>(32768);, +        Set<Path> seenJars = new HashSet<>();, +            final Path path = PathUtils.get(url.toURI());, +                try (JarFile file = new JarFile(path.toString())) {, +                            checkClass(clazzes, entry, path);, +                            checkClass(clazzes, entry, path);, +    static void checkClass(Map<String,Path> clazzes, String clazz, Path jarpath) {, +        Path previous = clazzes.put(clazz, jarpath);, +            if (previous.equals(jarpath)) {, +                        "exists multiple times in jar: " + jarpath + " !!!!!!!!!");, +                        "jar1: " + previous + System.lineSeparator() +, +                        "jar2: " + jarpath);, +++ b/core/src/main/java/org/elasticsearch/bootstrap/JarHell.java, +        final Map<String,Path> clazzes = new HashMap<>(32768);, +        Set<Path> seenJars = new HashSet<>();, +            final Path path = PathUtils.get(url.toURI());, +                try (JarFile file = new JarFile(path.toString())) {, +                            checkClass(clazzes, entry, path);, +                            checkClass(clazzes, entry, path);, +    static void checkClass(Map<String,Path> clazzes, String clazz, Path jarpath) {, +        Path previous = clazzes.put(clazz, jarpath);, +            if (previous.equals(jarpath)) {, +                        "exists multiple times in jar: " + jarpath + " !!!!!!!!!");, +                        "jar1: " + previous + System.lineSeparator() +, +                        "jar2: " + jarpath);, +++ b/dev-tools/src/main/resources/ant/integration-tests.xml, +  <!-- this is our working area -->, +  <property name="integ.scratch" location="${project.build.directory}/integ-tests"/>, +, +++ b/core/src/main/java/org/elasticsearch/bootstrap/JarHell.java, +        final Map<String,Path> clazzes = new HashMap<>(32768);, +        Set<Path> seenJars = new HashSet<>();, +            final Path path = PathUtils.get(url.toURI());, +                try (JarFile file = new JarFile(path.toString())) {, +                            checkClass(clazzes, entry, path);, +                            checkClass(clazzes, entry, path);, +    static void checkClass(Map<String,Path> clazzes, String clazz, Path jarpath) {, +        Path previous = clazzes.put(clazz, jarpath);, +            if (previous.equals(jarpath)) {, +                        "exists multiple times in jar: " + jarpath + " !!!!!!!!!");, +                        "jar1: " + previous + System.lineSeparator() +, +                        "jar2: " + jarpath);, +++ b/dev-tools/src/main/resources/ant/integration-tests.xml, +  <!-- this is our working area -->, +  <property name="integ.scratch" location="${project.build.directory}/integ-tests"/>, +, +++ b/pom.xml]