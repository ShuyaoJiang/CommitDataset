[+++ b/core/src/main/java/org/elasticsearch/common/logging/LogConfigurator.java, +import org.elasticsearch.node.Node;, +            public FileVisitResult visitFile(final Path file, final BasicFileAttributes attrs) throws IOException {, +    /**, +     * Set system properties that can be used in configuration files to specify paths and file patterns for log files. We expose three, +     * properties here:, +     * <ul>, +     * <li>, +     * {@code es.logs.base_path} the base path containing the log files, +     * </li>, +     * <li>, +     * {@code es.logs.cluster_name} the cluster name, used as the prefix of log filenames in the default configuration, +     * </li>, +     * <li>, +     * {@code es.logs.node_name} the node name, can be used as part of log filenames (only exposed if {@link Node#NODE_NAME_SETTING} is, +     * explicitly set), +     * </li>, +     * </ul>, +     *, +     * @param logsPath the path to the log files, +     * @param settings the settings to extract the cluster and node names, +     */, +        System.setProperty("es.logs.base_path", logsPath.toString());, +        System.setProperty("es.logs.cluster_name", ClusterName.CLUSTER_NAME_SETTING.get(settings).value());, +        if (Node.NODE_NAME_SETTING.exists(settings)) {, +            System.setProperty("es.logs.node_name", Node.NODE_NAME_SETTING.get(settings));, +        }, +++ b/core/src/main/java/org/elasticsearch/common/logging/LogConfigurator.java, +import org.elasticsearch.node.Node;, +            public FileVisitResult visitFile(final Path file, final BasicFileAttributes attrs) throws IOException {, +    /**, +     * Set system properties that can be used in configuration files to specify paths and file patterns for log files. We expose three, +     * properties here:, +     * <ul>, +     * <li>, +     * {@code es.logs.base_path} the base path containing the log files, +     * </li>, +     * <li>, +     * {@code es.logs.cluster_name} the cluster name, used as the prefix of log filenames in the default configuration, +     * </li>, +     * <li>, +     * {@code es.logs.node_name} the node name, can be used as part of log filenames (only exposed if {@link Node#NODE_NAME_SETTING} is, +     * explicitly set), +     * </li>, +     * </ul>, +     *, +     * @param logsPath the path to the log files, +     * @param settings the settings to extract the cluster and node names, +     */, +        System.setProperty("es.logs.base_path", logsPath.toString());, +        System.setProperty("es.logs.cluster_name", ClusterName.CLUSTER_NAME_SETTING.get(settings).value());, +        if (Node.NODE_NAME_SETTING.exists(settings)) {, +            System.setProperty("es.logs.node_name", Node.NODE_NAME_SETTING.get(settings));, +        }, +++ b/distribution/src/main/resources/config/log4j2.properties, +appender.rolling.fileName = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}.log, +appender.rolling.filePattern = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}-%d{yyyy-MM-dd}.log, +appender.deprecation_rolling.fileName = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}_deprecation.log, +appender.deprecation_rolling.filePattern = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}_deprecation-%i.log.gz, +appender.index_search_slowlog_rolling.fileName = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}_index_search_slowlog.log, +appender.index_search_slowlog_rolling.filePattern = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}_index_search_slowlog-%d{yyyy-MM-dd}.log, +appender.index_indexing_slowlog_rolling.fileName = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}_index_indexing_slowlog.log, +appender.index_indexing_slowlog_rolling.filePattern = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}_index_indexing_slowlog-%d{yyyy-MM-dd}.log, +++ b/core/src/main/java/org/elasticsearch/common/logging/LogConfigurator.java, +import org.elasticsearch.node.Node;, +            public FileVisitResult visitFile(final Path file, final BasicFileAttributes attrs) throws IOException {, +    /**, +     * Set system properties that can be used in configuration files to specify paths and file patterns for log files. We expose three, +     * properties here:, +     * <ul>, +     * <li>, +     * {@code es.logs.base_path} the base path containing the log files, +     * </li>, +     * <li>, +     * {@code es.logs.cluster_name} the cluster name, used as the prefix of log filenames in the default configuration, +     * </li>, +     * <li>, +     * {@code es.logs.node_name} the node name, can be used as part of log filenames (only exposed if {@link Node#NODE_NAME_SETTING} is, +     * explicitly set), +     * </li>, +     * </ul>, +     *, +     * @param logsPath the path to the log files, +     * @param settings the settings to extract the cluster and node names, +     */, +        System.setProperty("es.logs.base_path", logsPath.toString());, +        System.setProperty("es.logs.cluster_name", ClusterName.CLUSTER_NAME_SETTING.get(settings).value());, +        if (Node.NODE_NAME_SETTING.exists(settings)) {, +            System.setProperty("es.logs.node_name", Node.NODE_NAME_SETTING.get(settings));, +        }, +++ b/distribution/src/main/resources/config/log4j2.properties, +appender.rolling.fileName = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}.log, +appender.rolling.filePattern = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}-%d{yyyy-MM-dd}.log, +appender.deprecation_rolling.fileName = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}_deprecation.log, +appender.deprecation_rolling.filePattern = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}_deprecation-%i.log.gz, +appender.index_search_slowlog_rolling.fileName = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}_index_search_slowlog.log, +appender.index_search_slowlog_rolling.filePattern = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}_index_search_slowlog-%d{yyyy-MM-dd}.log, +appender.index_indexing_slowlog_rolling.fileName = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}_index_indexing_slowlog.log, +appender.index_indexing_slowlog_rolling.filePattern = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}_index_indexing_slowlog-%d{yyyy-MM-dd}.log, +++ b/docs/reference/setup/configuration.asciidoc]