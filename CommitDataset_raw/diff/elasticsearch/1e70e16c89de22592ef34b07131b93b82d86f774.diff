[+++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java, +                    segments = indexShard.segmentStats(flags.includeSegmentFileSizes());, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java, +                    segments = indexShard.segmentStats(flags.includeSegmentFileSizes());, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStatsFlags.java, +import org.elasticsearch.Version;, +    private boolean includeSegmentFileSizes = false;, +        includeSegmentFileSizes = false;, +        includeSegmentFileSizes = false;, +    public CommonStatsFlags includeSegmentFileSizes(boolean includeSegmentFileSizes) {, +        this.includeSegmentFileSizes = includeSegmentFileSizes;, +        return this;, +    }, +, +    public boolean includeSegmentFileSizes() {, +        return this.includeSegmentFileSizes;, +    }, +, +        if (out.getVersion().onOrAfter(Version.V_5_0_0)) {, +            out.writeBoolean(includeSegmentFileSizes);, +        }, +        if (in.getVersion().onOrAfter(Version.V_5_0_0)) {, +            includeSegmentFileSizes = in.readBoolean();, +        } else {, +            includeSegmentFileSizes = false;, +        }, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java, +                    segments = indexShard.segmentStats(flags.includeSegmentFileSizes());, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStatsFlags.java, +import org.elasticsearch.Version;, +    private boolean includeSegmentFileSizes = false;, +        includeSegmentFileSizes = false;, +        includeSegmentFileSizes = false;, +    public CommonStatsFlags includeSegmentFileSizes(boolean includeSegmentFileSizes) {, +        this.includeSegmentFileSizes = includeSegmentFileSizes;, +        return this;, +    }, +, +    public boolean includeSegmentFileSizes() {, +        return this.includeSegmentFileSizes;, +    }, +, +        if (out.getVersion().onOrAfter(Version.V_5_0_0)) {, +            out.writeBoolean(includeSegmentFileSizes);, +        }, +        if (in.getVersion().onOrAfter(Version.V_5_0_0)) {, +            includeSegmentFileSizes = in.readBoolean();, +        } else {, +            includeSegmentFileSizes = false;, +        }, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/IndicesStatsRequest.java, +    public boolean includeSegmentFileSizes() {, +        return flags.includeSegmentFileSizes();, +    }, +, +    public IndicesStatsRequest includeSegmentFileSizes(boolean includeSegmentFileSizes) {, +        flags.includeSegmentFileSizes(includeSegmentFileSizes);, +        return this;, +    }, +, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java, +                    segments = indexShard.segmentStats(flags.includeSegmentFileSizes());, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStatsFlags.java, +import org.elasticsearch.Version;, +    private boolean includeSegmentFileSizes = false;, +        includeSegmentFileSizes = false;, +        includeSegmentFileSizes = false;, +    public CommonStatsFlags includeSegmentFileSizes(boolean includeSegmentFileSizes) {, +        this.includeSegmentFileSizes = includeSegmentFileSizes;, +        return this;, +    }, +, +    public boolean includeSegmentFileSizes() {, +        return this.includeSegmentFileSizes;, +    }, +, +        if (out.getVersion().onOrAfter(Version.V_5_0_0)) {, +            out.writeBoolean(includeSegmentFileSizes);, +        }, +        if (in.getVersion().onOrAfter(Version.V_5_0_0)) {, +            includeSegmentFileSizes = in.readBoolean();, +        } else {, +            includeSegmentFileSizes = false;, +        }, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/IndicesStatsRequest.java, +    public boolean includeSegmentFileSizes() {, +        return flags.includeSegmentFileSizes();, +    }, +, +    public IndicesStatsRequest includeSegmentFileSizes(boolean includeSegmentFileSizes) {, +        flags.includeSegmentFileSizes(includeSegmentFileSizes);, +        return this;, +    }, +, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/IndicesStatsRequestBuilder.java, +, +    public IndicesStatsRequestBuilder setIncludeSegmentFileSizes(boolean includeSegmentFileSizes) {, +        request.includeSegmentFileSizes(includeSegmentFileSizes);, +        return this;, +    }]