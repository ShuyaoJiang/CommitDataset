[+++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java, +import org.elasticsearch.Version;, +import org.elasticsearch.node.AdaptiveSelectionStats;, +    @Nullable, +    private AdaptiveSelectionStats adaptiveSelectionStats;, +, +                     @Nullable IngestStats ingestStats,, +                     @Nullable AdaptiveSelectionStats adaptiveSelectionStats) {, +        this.adaptiveSelectionStats = adaptiveSelectionStats;, +    @Nullable, +    public AdaptiveSelectionStats getAdaptiveSelectionStats() {, +        return adaptiveSelectionStats;, +    }, +, +        if (in.getVersion().onOrAfter(Version.V_6_1_0)) {, +            adaptiveSelectionStats = in.readOptionalWriteable(AdaptiveSelectionStats::new);, +        } else {, +            adaptiveSelectionStats = null;, +        }, +        if (out.getVersion().onOrAfter(Version.V_6_1_0)) {, +            out.writeOptionalWriteable(adaptiveSelectionStats);, +        }, +        if (getAdaptiveSelectionStats() != null) {, +            getAdaptiveSelectionStats().toXContent(builder, params);, +        }, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java, +import org.elasticsearch.Version;, +import org.elasticsearch.node.AdaptiveSelectionStats;, +    @Nullable, +    private AdaptiveSelectionStats adaptiveSelectionStats;, +, +                     @Nullable IngestStats ingestStats,, +                     @Nullable AdaptiveSelectionStats adaptiveSelectionStats) {, +        this.adaptiveSelectionStats = adaptiveSelectionStats;, +    @Nullable, +    public AdaptiveSelectionStats getAdaptiveSelectionStats() {, +        return adaptiveSelectionStats;, +    }, +, +        if (in.getVersion().onOrAfter(Version.V_6_1_0)) {, +            adaptiveSelectionStats = in.readOptionalWriteable(AdaptiveSelectionStats::new);, +        } else {, +            adaptiveSelectionStats = null;, +        }, +        if (out.getVersion().onOrAfter(Version.V_6_1_0)) {, +            out.writeOptionalWriteable(adaptiveSelectionStats);, +        }, +        if (getAdaptiveSelectionStats() != null) {, +            getAdaptiveSelectionStats().toXContent(builder, params);, +        }, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodesStatsRequest.java, +import org.elasticsearch.Version;, +    private boolean adaptiveSelection;, +        this.adaptiveSelection = true;, +        this.adaptiveSelection = false;, +    public boolean adaptiveSelection() {, +        return adaptiveSelection;, +    }, +, +    /**, +     * Should adaptiveSelection statistics be returned., +     */, +    public NodesStatsRequest adaptiveSelection(boolean adaptiveSelection) {, +        this.adaptiveSelection = adaptiveSelection;, +        return this;, +    }, +, +        if (in.getVersion().onOrAfter(Version.V_6_1_0)) {, +            adaptiveSelection = in.readBoolean();, +        } else {, +            adaptiveSelection = false;, +        }, +        if (out.getVersion().onOrAfter(Version.V_6_1_0)) {, +            out.writeBoolean(adaptiveSelection);, +        }, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java, +import org.elasticsearch.Version;, +import org.elasticsearch.node.AdaptiveSelectionStats;, +    @Nullable, +    private AdaptiveSelectionStats adaptiveSelectionStats;, +, +                     @Nullable IngestStats ingestStats,, +                     @Nullable AdaptiveSelectionStats adaptiveSelectionStats) {, +        this.adaptiveSelectionStats = adaptiveSelectionStats;, +    @Nullable, +    public AdaptiveSelectionStats getAdaptiveSelectionStats() {, +        return adaptiveSelectionStats;, +    }, +, +        if (in.getVersion().onOrAfter(Version.V_6_1_0)) {, +            adaptiveSelectionStats = in.readOptionalWriteable(AdaptiveSelectionStats::new);, +        } else {, +            adaptiveSelectionStats = null;, +        }, +        if (out.getVersion().onOrAfter(Version.V_6_1_0)) {, +            out.writeOptionalWriteable(adaptiveSelectionStats);, +        }, +        if (getAdaptiveSelectionStats() != null) {, +            getAdaptiveSelectionStats().toXContent(builder, params);, +        }]