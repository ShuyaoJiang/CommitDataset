[+++ b/plugins/repository-hdfs/src/test/resources/rest-api-spec/test/hdfs_repository/20_repository.yaml, +              uri: "hdfs://localhost:39226", +++ b/plugins/repository-hdfs/src/test/resources/rest-api-spec/test/hdfs_repository/20_repository.yaml, +              uri: "hdfs://localhost:39226", +++ b/plugins/repository-hdfs/src/test/resources/rest-api-spec/test/hdfs_repository/30_snapshot.yaml, +# Integration tests for HDFS Repository plugin, +#, +# Actually perform a snapshot to hdfs, +#, +---, +setup:, +, +  - do:, +      snapshot.create_repository:, +        repository: test_repo_hdfs_snapshot, +        verify: false, +        body:, +          type: hdfs, +          settings:, +            uri: "hdfs://localhost:39226", +            path: "foo/bar", +, +  - do:, +      indices.create:, +        index: test_index, +        body:, +          settings:, +            number_of_shards:   1, +            number_of_replicas: 1, +, +  - do:, +      cluster.health:, +        wait_for_status: yellow, +, +---, +"Create a snapshot":, +, +  - do:, +      snapshot.create:, +        repository: test_repo_hdfs_snapshot, +        snapshot: test_snapshot, +        wait_for_completion: true, +, +  - match: { snapshot.snapshot: test_snapshot }, +  - match: { snapshot.state : SUCCESS }, +  - match: { snapshot.shards.successful: 1 }, +  - match: { snapshot.shards.failed : 0 }, +]