[+++ b/server/src/main/java/org/elasticsearch/search/aggregations/Aggregator.java, +import org.elasticsearch.common.xcontent.DeprecationHandler;, +import org.elasticsearch.common.xcontent.LoggingDeprecationHandler;, +        public static SubAggCollectionMode parse(String value, DeprecationHandler deprecationHandler) {, +                if (mode.parseField.match(value, deprecationHandler)) {, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/Aggregator.java, +import org.elasticsearch.common.xcontent.DeprecationHandler;, +import org.elasticsearch.common.xcontent.LoggingDeprecationHandler;, +        public static SubAggCollectionMode parse(String value, DeprecationHandler deprecationHandler) {, +                if (mode.parseField.match(value, deprecationHandler)) {, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/filter/FiltersAggregationBuilder.java, +                if (OTHER_BUCKET_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                if (OTHER_BUCKET_KEY_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                if (FILTERS_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                if (FILTERS_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/Aggregator.java, +import org.elasticsearch.common.xcontent.DeprecationHandler;, +import org.elasticsearch.common.xcontent.LoggingDeprecationHandler;, +        public static SubAggCollectionMode parse(String value, DeprecationHandler deprecationHandler) {, +                if (mode.parseField.match(value, deprecationHandler)) {, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/filter/FiltersAggregationBuilder.java, +                if (OTHER_BUCKET_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                if (OTHER_BUCKET_KEY_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                if (FILTERS_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                if (FILTERS_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregationBuilder.java, +                if (NestedAggregator.PATH_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/Aggregator.java, +import org.elasticsearch.common.xcontent.DeprecationHandler;, +import org.elasticsearch.common.xcontent.LoggingDeprecationHandler;, +        public static SubAggCollectionMode parse(String value, DeprecationHandler deprecationHandler) {, +                if (mode.parseField.match(value, deprecationHandler)) {, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/filter/FiltersAggregationBuilder.java, +                if (OTHER_BUCKET_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                if (OTHER_BUCKET_KEY_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                if (FILTERS_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                if (FILTERS_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregationBuilder.java, +                if (NestedAggregator.PATH_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/range/GeoDistanceAggregationBuilder.java, +                if (FROM_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                } else if (TO_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                if (KEY_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                } else if (FROM_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                } else if (TO_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                if (FROM_FIELD.match(currentFieldName, parser.getDeprecationHandler()), +                    || TO_FIELD.match(currentFieldName, parser.getDeprecationHandler()), +                    || KEY_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/Aggregator.java, +import org.elasticsearch.common.xcontent.DeprecationHandler;, +import org.elasticsearch.common.xcontent.LoggingDeprecationHandler;, +        public static SubAggCollectionMode parse(String value, DeprecationHandler deprecationHandler) {, +                if (mode.parseField.match(value, deprecationHandler)) {, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/filter/FiltersAggregationBuilder.java, +                if (OTHER_BUCKET_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                if (OTHER_BUCKET_KEY_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                if (FILTERS_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                if (FILTERS_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregationBuilder.java, +                if (NestedAggregator.PATH_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/range/GeoDistanceAggregationBuilder.java, +                if (FROM_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                } else if (TO_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                if (KEY_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                } else if (FROM_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                } else if (TO_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                if (FROM_FIELD.match(currentFieldName, parser.getDeprecationHandler()), +                    || TO_FIELD.match(currentFieldName, parser.getDeprecationHandler()), +                    || KEY_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/range/IpRangeAggregationBuilder.java, +            if (RangeAggregator.Range.KEY_FIELD.match(parser.currentName(), parser.getDeprecationHandler())) {, +            } else if (RangeAggregator.Range.FROM_FIELD.match(parser.currentName(), parser.getDeprecationHandler())) {, +            } else if (RangeAggregator.Range.TO_FIELD.match(parser.currentName(), parser.getDeprecationHandler())) {, +            } else if (MASK_FIELD.match(parser.currentName(), parser.getDeprecationHandler())) {, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/Aggregator.java, +import org.elasticsearch.common.xcontent.DeprecationHandler;, +import org.elasticsearch.common.xcontent.LoggingDeprecationHandler;, +        public static SubAggCollectionMode parse(String value, DeprecationHandler deprecationHandler) {, +                if (mode.parseField.match(value, deprecationHandler)) {, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/filter/FiltersAggregationBuilder.java, +                if (OTHER_BUCKET_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                if (OTHER_BUCKET_KEY_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                if (FILTERS_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                if (FILTERS_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/NestedAggregationBuilder.java, +                if (NestedAggregator.PATH_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/range/GeoDistanceAggregationBuilder.java, +                if (FROM_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                } else if (TO_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                if (KEY_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                } else if (FROM_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                } else if (TO_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +                if (FROM_FIELD.match(currentFieldName, parser.getDeprecationHandler()), +                    || TO_FIELD.match(currentFieldName, parser.getDeprecationHandler()), +                    || KEY_FIELD.match(currentFieldName, parser.getDeprecationHandler())) {, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/range/IpRangeAggregationBuilder.java, +            if (RangeAggregator.Range.KEY_FIELD.match(parser.currentName(), parser.getDeprecationHandler())) {, +            } else if (RangeAggregator.Range.FROM_FIELD.match(parser.currentName(), parser.getDeprecationHandler())) {, +            } else if (RangeAggregator.Range.TO_FIELD.match(parser.currentName(), parser.getDeprecationHandler())) {, +            } else if (MASK_FIELD.match(parser.currentName(), parser.getDeprecationHandler())) {]