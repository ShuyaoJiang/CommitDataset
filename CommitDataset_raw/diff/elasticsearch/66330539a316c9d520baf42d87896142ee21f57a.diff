[+++ b/plugins/ingest/src/main/java/org/elasticsearch/ingest/Data.java, +import java.util.*;, +    public Data(Data other) {, +        this(other.index, other.type, other.id, new HashMap<>(other.document));, +    }, +, +, +    public Map<String, Object> asMap() {, +        Map<String, Object> dataMap = new HashMap<>();, +        dataMap.put("_index", index);, +        dataMap.put("_type", type);, +        dataMap.put("_id", id);, +        dataMap.put("_source", document);, +, +        return dataMap;, +    }, +, +    @Override, +    public boolean equals(Object obj) {, +        if (obj == this) { return true; }, +        if (obj == null || getClass() != obj.getClass()) {, +            return false;, +        }, +, +        Data other = (Data) obj;, +        return Objects.equals(document, other.document) &&, +                Objects.equals(index, other.index) &&, +                Objects.equals(type, other.type) &&, +                Objects.equals(id, other.id);, +    }, +, +    @Override, +    public int hashCode() {, +        return Objects.hash(index, type, id, document);, +    }, +++ b/plugins/ingest/src/main/java/org/elasticsearch/ingest/Data.java, +import java.util.*;, +    public Data(Data other) {, +        this(other.index, other.type, other.id, new HashMap<>(other.document));, +    }, +, +, +    public Map<String, Object> asMap() {, +        Map<String, Object> dataMap = new HashMap<>();, +        dataMap.put("_index", index);, +        dataMap.put("_type", type);, +        dataMap.put("_id", id);, +        dataMap.put("_source", document);, +, +        return dataMap;, +    }, +, +    @Override, +    public boolean equals(Object obj) {, +        if (obj == this) { return true; }, +        if (obj == null || getClass() != obj.getClass()) {, +            return false;, +        }, +, +        Data other = (Data) obj;, +        return Objects.equals(document, other.document) &&, +                Objects.equals(index, other.index) &&, +                Objects.equals(type, other.type) &&, +                Objects.equals(id, other.id);, +    }, +, +    @Override, +    public int hashCode() {, +        return Objects.hash(index, type, id, document);, +    }, +++ b/plugins/ingest/src/main/java/org/elasticsearch/ingest/Pipeline.java, +    @Override, +    public boolean equals(Object o) {, +        if (this == o) return true;, +        if (o == null || getClass() != o.getClass()) return false;, +        Pipeline pipeline = (Pipeline) o;, +        return Objects.equals(id, pipeline.id) &&, +                Objects.equals(description, pipeline.description) &&, +                Objects.equals(processors, pipeline.processors);, +    }, +, +    @Override, +    public int hashCode() {, +        return Objects.hash(id, description, processors);, +    }, +, +++ b/plugins/ingest/src/main/java/org/elasticsearch/ingest/Data.java, +import java.util.*;, +    public Data(Data other) {, +        this(other.index, other.type, other.id, new HashMap<>(other.document));, +    }, +, +, +    public Map<String, Object> asMap() {, +        Map<String, Object> dataMap = new HashMap<>();, +        dataMap.put("_index", index);, +        dataMap.put("_type", type);, +        dataMap.put("_id", id);, +        dataMap.put("_source", document);, +]