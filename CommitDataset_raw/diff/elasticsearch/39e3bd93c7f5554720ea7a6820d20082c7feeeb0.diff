[+++ b/server/src/test/java/org/elasticsearch/index/engine/LuceneChangesSnapshotTests.java, +            followers[i] = new Follower(engine, isDone, readyLatch);, +        readyLatch.await();, +            IOUtils.close(follower.engine, follower.engine.store);, +        private final InternalEngine engine;, +        Follower(Engine leader, AtomicBoolean isDone, CountDownLatch readLatch) throws IOException {, +                leader.engineConfig.getIndexSettings().getSettings()));, +            this.engine = createEngine(createStore(), createTempDir());, +            try {, +                    engine.getLocalCheckpointTracker().getCheckpoint() < leader.getLocalCheckpoint()) {, +                    pullOperations(engine);, +                assertConsistentHistoryBetweenTranslogAndLuceneIndex(engine, mapperService);, +                assertThat(getDocIds(engine, true), equalTo(getDocIds(leader, true)));]