[+++ b/src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java, +                try {, +                } finally {, +                }, +                try {, +                } finally {, +                }, +                try {, +                } finally {, +                }, +++ b/src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java, +                try {, +                } finally {, +                }, +                try {, +                } finally {, +                }, +                try {, +                } finally {, +                }, +++ b/src/main/java/org/elasticsearch/index/search/child/ParentQuery.java, +        ChildWeight childWeight;, +        boolean releaseCollectorResource = true;, +        try {, +            childWeight = new ChildWeight(searchContext, parentQuery.createWeight(searcher), childrenFilter, parentIds, scores);, +            releaseCollectorResource = false;, +        } finally {, +            if (releaseCollectorResource) {, +                // either if we run into an exception or if we return early, +                Releasables.release(collector.parentIds, collector.scores);, +            }, +        }]