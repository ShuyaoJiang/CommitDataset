[+++ b/src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportRefreshAction.java, +        logger.debug("{} Refresh request executed. Force: [{}].", indexShard.shardId(), request.force());, +++ b/src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportRefreshAction.java, +        logger.debug("{} Refresh request executed. Force: [{}].", indexShard.shardId(), request.force());, +++ b/src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java, +                boolean hadOne = false;, +                    FirstResult result = firstResults.get(i);, +                    if (result == null) {, +                        continue; // failure, +                    }, +                    if (hadOne) {, +                    } else {, +                        hadOne = true;, +                    sb.append(result.shardTarget());, +]