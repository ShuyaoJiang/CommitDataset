[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/docset/AllDocSet.java, +    @Override public int length() {, +        return maxDoc;, +    }, +, +    @Override public boolean get(int doc) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/docset/AllDocSet.java, +    @Override public int length() {, +        return maxDoc;, +    }, +, +    @Override public boolean get(int doc) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/docset/AndDocSet.java, +    @Override public boolean get(int doc) {, +    @Override public int length() {, +        if (sets.isEmpty()) {, +            return 0;, +        }, +        return sets.get(0).length();, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/docset/AllDocSet.java, +    @Override public int length() {, +        return maxDoc;, +    }, +, +    @Override public boolean get(int doc) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/docset/AndDocSet.java, +    @Override public boolean get(int doc) {, +    @Override public int length() {, +        if (sets.isEmpty()) {, +            return 0;, +        }, +        return sets.get(0).length();, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/docset/DocSet.java, +import org.apache.lucene.util.Bits;, +public abstract class DocSet extends DocIdSet implements Bits {, +        @Override public boolean get(int doc) {, +, +        @Override public int length() {, +            return 0;, +        }, +    public abstract boolean get(int doc);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/docset/AllDocSet.java, +    @Override public int length() {, +        return maxDoc;, +    }, +, +    @Override public boolean get(int doc) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/docset/AndDocSet.java, +    @Override public boolean get(int doc) {, +    @Override public int length() {, +        if (sets.isEmpty()) {, +            return 0;, +        }, +        return sets.get(0).length();, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/docset/DocSet.java, +import org.apache.lucene.util.Bits;, +public abstract class DocSet extends DocIdSet implements Bits {, +        @Override public boolean get(int doc) {, +, +        @Override public int length() {, +            return 0;, +        }, +    public abstract boolean get(int doc);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/docset/FixedBitDocSet.java, +    @Override public int length() {, +        return set.length();, +    }, +, +    @Override public boolean get(int doc) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/docset/AllDocSet.java, +    @Override public int length() {, +        return maxDoc;, +    }, +, +    @Override public boolean get(int doc) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/docset/AndDocSet.java, +    @Override public boolean get(int doc) {, +    @Override public int length() {, +        if (sets.isEmpty()) {, +            return 0;, +        }, +        return sets.get(0).length();, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/docset/DocSet.java, +import org.apache.lucene.util.Bits;, +public abstract class DocSet extends DocIdSet implements Bits {, +        @Override public boolean get(int doc) {, +, +        @Override public int length() {, +            return 0;, +        }, +    public abstract boolean get(int doc);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/docset/FixedBitDocSet.java]