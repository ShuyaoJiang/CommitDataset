[+++ b/server/src/main/java/org/elasticsearch/common/settings/AddStringKeyStoreCommand.java, +        } catch (final IllegalArgumentException e) {, +            throw new UserException(ExitCodes.DATA_ERROR, e.getMessage());, +++ b/server/src/main/java/org/elasticsearch/common/settings/AddStringKeyStoreCommand.java, +        } catch (final IllegalArgumentException e) {, +            throw new UserException(ExitCodes.DATA_ERROR, e.getMessage());, +++ b/server/src/test/java/org/elasticsearch/common/settings/AddStringKeyStoreCommandTests.java, +import java.util.Locale;, +import static org.hamcrest.Matchers.hasToString;, +    public void testUpperCaseInName() throws Exception {, +        createKeystore("");, +        terminal.addSecretInput("value");, +        final String key = randomAlphaOfLength(4) + randomAlphaOfLength(1).toUpperCase(Locale.ROOT) + randomAlphaOfLength(4);, +        final UserException e = expectThrows(UserException.class, () -> execute(key));, +        assertThat(, +                e,, +                hasToString(containsString("Setting name [" + key + "] does not match the allowed setting name pattern [[a-z0-9_\\-.]+]")));, +    }, +]