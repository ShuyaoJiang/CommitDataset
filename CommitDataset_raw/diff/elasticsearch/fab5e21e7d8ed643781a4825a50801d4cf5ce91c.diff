[+++ b/build.gradle, +    "org.elasticsearch.distribution.zip:elasticsearch-oss:${version}": ':distribution:archives:oss-zip',, +    "org.elasticsearch.distribution.tar:elasticsearch-oss:${version}": ':distribution:archives:oss-tar',, +    "org.elasticsearch.distribution.rpm:elasticsearch-oss:${version}": ':distribution:packages:oss-rpm',, +    "org.elasticsearch.distribution.deb:elasticsearch-oss:${version}": ':distribution:packages:oss-deb',, +      if (snapshot.onOrAfter('6.3.0')) {, +        ext.projectSubstitutions["org.elasticsearch.distribution.deb:elasticsearch-oss:${snapshot}"] = snapshotProject, +        ext.projectSubstitutions["org.elasticsearch.distribution.rpm:elasticsearch-oss:${snapshot}"] = snapshotProject, +        ext.projectSubstitutions["org.elasticsearch.distribution.zip:elasticsearch-oss:${snapshot}"] = snapshotProject, +      }, +++ b/build.gradle, +    "org.elasticsearch.distribution.zip:elasticsearch-oss:${version}": ':distribution:archives:oss-zip',, +    "org.elasticsearch.distribution.tar:elasticsearch-oss:${version}": ':distribution:archives:oss-tar',, +    "org.elasticsearch.distribution.rpm:elasticsearch-oss:${version}": ':distribution:packages:oss-rpm',, +    "org.elasticsearch.distribution.deb:elasticsearch-oss:${version}": ':distribution:packages:oss-deb',, +      if (snapshot.onOrAfter('6.3.0')) {, +        ext.projectSubstitutions["org.elasticsearch.distribution.deb:elasticsearch-oss:${snapshot}"] = snapshotProject, +        ext.projectSubstitutions["org.elasticsearch.distribution.rpm:elasticsearch-oss:${snapshot}"] = snapshotProject, +        ext.projectSubstitutions["org.elasticsearch.distribution.zip:elasticsearch-oss:${snapshot}"] = snapshotProject, +      }, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/MetaPluginBuildPlugin.groovy, +        boolean isModule = project.path.startsWith(':modules:') || project.path.startsWith(':x-pack:plugin'), +            distribution = 'integ-test-zip', +++ b/build.gradle, +    "org.elasticsearch.distribution.zip:elasticsearch-oss:${version}": ':distribution:archives:oss-zip',, +    "org.elasticsearch.distribution.tar:elasticsearch-oss:${version}": ':distribution:archives:oss-tar',, +    "org.elasticsearch.distribution.rpm:elasticsearch-oss:${version}": ':distribution:packages:oss-rpm',, +    "org.elasticsearch.distribution.deb:elasticsearch-oss:${version}": ':distribution:packages:oss-deb',, +      if (snapshot.onOrAfter('6.3.0')) {, +        ext.projectSubstitutions["org.elasticsearch.distribution.deb:elasticsearch-oss:${snapshot}"] = snapshotProject, +        ext.projectSubstitutions["org.elasticsearch.distribution.rpm:elasticsearch-oss:${snapshot}"] = snapshotProject, +        ext.projectSubstitutions["org.elasticsearch.distribution.zip:elasticsearch-oss:${snapshot}"] = snapshotProject, +      }, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/MetaPluginBuildPlugin.groovy, +        boolean isModule = project.path.startsWith(':modules:') || project.path.startsWith(':x-pack:plugin'), +            distribution = 'integ-test-zip', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +            boolean isModule = project.path.startsWith(':modules:') || project.path.startsWith(':x-pack:plugin'), +                project.tasks.run.clusterConfig.distribution = 'integ-test-zip', +++ b/build.gradle, +    "org.elasticsearch.distribution.zip:elasticsearch-oss:${version}": ':distribution:archives:oss-zip',, +    "org.elasticsearch.distribution.tar:elasticsearch-oss:${version}": ':distribution:archives:oss-tar',, +    "org.elasticsearch.distribution.rpm:elasticsearch-oss:${version}": ':distribution:packages:oss-rpm',, +    "org.elasticsearch.distribution.deb:elasticsearch-oss:${version}": ':distribution:packages:oss-deb',, +      if (snapshot.onOrAfter('6.3.0')) {, +        ext.projectSubstitutions["org.elasticsearch.distribution.deb:elasticsearch-oss:${snapshot}"] = snapshotProject, +        ext.projectSubstitutions["org.elasticsearch.distribution.rpm:elasticsearch-oss:${snapshot}"] = snapshotProject, +        ext.projectSubstitutions["org.elasticsearch.distribution.zip:elasticsearch-oss:${snapshot}"] = snapshotProject, +      }, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/MetaPluginBuildPlugin.groovy, +        boolean isModule = project.path.startsWith(':modules:') || project.path.startsWith(':x-pack:plugin'), +            distribution = 'integ-test-zip', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +            boolean isModule = project.path.startsWith(':modules:') || project.path.startsWith(':x-pack:plugin'), +                project.tasks.run.clusterConfig.distribution = 'integ-test-zip', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        if (elasticsearchVersion.before('6.3.0') && distro.startsWith('oss-')) {, +            distro = distro.substring('oss-'.length()), +        }, +        if (distro.contains('tar')) {, +            packaging = 'tar.gz'\, +        } else if (distro.contains('zip')) {, +        String subgroup = distro, +        String artifactName = 'elasticsearch', +        if (distro.contains('oss')) {, +            artifactName += '-oss', +            subgroup = distro.substring('oss-'.length()), +        }, +        project.dependencies.add(configuration.name, "org.elasticsearch.distribution.${subgroup}:${artifactName}:${elasticsearchVersion}@${packaging}"), +            case 'oss-zip':, +            case 'oss-tar':, +++ b/build.gradle, +    "org.elasticsearch.distribution.zip:elasticsearch-oss:${version}": ':distribution:archives:oss-zip',, +    "org.elasticsearch.distribution.tar:elasticsearch-oss:${version}": ':distribution:archives:oss-tar',, +    "org.elasticsearch.distribution.rpm:elasticsearch-oss:${version}": ':distribution:packages:oss-rpm',, +    "org.elasticsearch.distribution.deb:elasticsearch-oss:${version}": ':distribution:packages:oss-deb',, +      if (snapshot.onOrAfter('6.3.0')) {, +        ext.projectSubstitutions["org.elasticsearch.distribution.deb:elasticsearch-oss:${snapshot}"] = snapshotProject, +        ext.projectSubstitutions["org.elasticsearch.distribution.rpm:elasticsearch-oss:${snapshot}"] = snapshotProject, +        ext.projectSubstitutions["org.elasticsearch.distribution.zip:elasticsearch-oss:${snapshot}"] = snapshotProject, +      }, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/MetaPluginBuildPlugin.groovy, +        boolean isModule = project.path.startsWith(':modules:') || project.path.startsWith(':x-pack:plugin'), +            distribution = 'integ-test-zip', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +            boolean isModule = project.path.startsWith(':modules:') || project.path.startsWith(':x-pack:plugin'), +                project.tasks.run.clusterConfig.distribution = 'integ-test-zip', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        if (elasticsearchVersion.before('6.3.0') && distro.startsWith('oss-')) {, +            distro = distro.substring('oss-'.length()), +        }, +        if (distro.contains('tar')) {, +            packaging = 'tar.gz'\, +        } else if (distro.contains('zip')) {, +        String subgroup = distro, +        String artifactName = 'elasticsearch', +        if (distro.contains('oss')) {, +            artifactName += '-oss', +            subgroup = distro.substring('oss-'.length()), +        }]