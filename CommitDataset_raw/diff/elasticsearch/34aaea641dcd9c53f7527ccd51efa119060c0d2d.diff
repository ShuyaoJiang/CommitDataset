[+++ b/core/src/main/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapper.java, +            if (upperTerm != null) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/ScaledFloatFieldMapper.java, +            if (upperTerm != null) {, +++ b/core/src/test/java/org/elasticsearch/index/mapper/ScaledFloatFieldTypeTests.java, +            Double l = randomBoolean() ? null : (randomDouble() * 2 - 1) * 10000;, +            Double u = randomBoolean() ? null : (randomDouble() * 2 - 1) * 10000;]