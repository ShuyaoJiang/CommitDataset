[+++ b/src/main/java/org/elasticsearch/node/internal/InternalNode.java, +    public static final String HTTP_ENABLED = "http.enabled";, +, +            if (settings.getAsBoolean(HTTP_ENABLED, true)) {, +++ b/src/main/java/org/elasticsearch/node/internal/InternalNode.java, +    public static final String HTTP_ENABLED = "http.enabled";, +, +            if (settings.getAsBoolean(HTTP_ENABLED, true)) {, +++ b/src/main/java/org/elasticsearch/rest/RestController.java, +++ b/src/main/java/org/elasticsearch/node/internal/InternalNode.java, +    public static final String HTTP_ENABLED = "http.enabled";, +, +            if (settings.getAsBoolean(HTTP_ENABLED, true)) {, +++ b/src/main/java/org/elasticsearch/rest/RestController.java, +++ b/src/test/java/org/elasticsearch/options/jsonp/JsonpOptionDisabledTest.java, +import org.elasticsearch.node.internal.InternalNode;, +                .put(InternalNode.HTTP_ENABLED, true), +++ b/src/main/java/org/elasticsearch/node/internal/InternalNode.java, +    public static final String HTTP_ENABLED = "http.enabled";, +, +            if (settings.getAsBoolean(HTTP_ENABLED, true)) {, +++ b/src/main/java/org/elasticsearch/rest/RestController.java, +++ b/src/test/java/org/elasticsearch/options/jsonp/JsonpOptionDisabledTest.java, +import org.elasticsearch.node.internal.InternalNode;, +                .put(InternalNode.HTTP_ENABLED, true), +++ b/src/test/java/org/elasticsearch/options/jsonp/JsonpOptionEnabledTest.java, +import org.elasticsearch.node.internal.InternalNode;, +                .put(InternalNode.HTTP_ENABLED, true), +++ b/src/main/java/org/elasticsearch/node/internal/InternalNode.java, +    public static final String HTTP_ENABLED = "http.enabled";, +, +            if (settings.getAsBoolean(HTTP_ENABLED, true)) {, +++ b/src/main/java/org/elasticsearch/rest/RestController.java, +++ b/src/test/java/org/elasticsearch/options/jsonp/JsonpOptionDisabledTest.java, +import org.elasticsearch.node.internal.InternalNode;, +                .put(InternalNode.HTTP_ENABLED, true), +++ b/src/test/java/org/elasticsearch/options/jsonp/JsonpOptionEnabledTest.java, +import org.elasticsearch.node.internal.InternalNode;, +                .put(InternalNode.HTTP_ENABLED, true), +++ b/src/test/java/org/elasticsearch/rest/CorsRegexTests.java, +import org.elasticsearch.node.internal.InternalNode;, +                .put(InternalNode.HTTP_ENABLED, true), +++ b/src/main/java/org/elasticsearch/node/internal/InternalNode.java, +    public static final String HTTP_ENABLED = "http.enabled";, +, +            if (settings.getAsBoolean(HTTP_ENABLED, true)) {, +++ b/src/main/java/org/elasticsearch/rest/RestController.java, +++ b/src/test/java/org/elasticsearch/options/jsonp/JsonpOptionDisabledTest.java, +import org.elasticsearch.node.internal.InternalNode;, +                .put(InternalNode.HTTP_ENABLED, true), +++ b/src/test/java/org/elasticsearch/options/jsonp/JsonpOptionEnabledTest.java, +import org.elasticsearch.node.internal.InternalNode;, +                .put(InternalNode.HTTP_ENABLED, true), +++ b/src/test/java/org/elasticsearch/rest/CorsRegexTests.java, +import org.elasticsearch.node.internal.InternalNode;, +                .put(InternalNode.HTTP_ENABLED, true), +++ b/src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java, +import org.elasticsearch.node.internal.InternalNode;, +import org.elasticsearch.rest.RestController;, +                return ImmutableSettings.builder().put(InternalNode.HTTP_ENABLED, false)., +                        put(nodeSettings(nodeOrdinal)).build();, +++ b/src/main/java/org/elasticsearch/node/internal/InternalNode.java, +    public static final String HTTP_ENABLED = "http.enabled";, +, +            if (settings.getAsBoolean(HTTP_ENABLED, true)) {, +++ b/src/main/java/org/elasticsearch/rest/RestController.java, +++ b/src/test/java/org/elasticsearch/options/jsonp/JsonpOptionDisabledTest.java, +import org.elasticsearch.node.internal.InternalNode;, +                .put(InternalNode.HTTP_ENABLED, true), +++ b/src/test/java/org/elasticsearch/options/jsonp/JsonpOptionEnabledTest.java, +import org.elasticsearch.node.internal.InternalNode;, +                .put(InternalNode.HTTP_ENABLED, true), +++ b/src/test/java/org/elasticsearch/rest/CorsRegexTests.java, +import org.elasticsearch.node.internal.InternalNode;, +                .put(InternalNode.HTTP_ENABLED, true), +++ b/src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java, +import org.elasticsearch.node.internal.InternalNode;, +import org.elasticsearch.rest.RestController;, +                return ImmutableSettings.builder().put(InternalNode.HTTP_ENABLED, false)., +                        put(nodeSettings(nodeOrdinal)).build();, +++ b/src/test/java/org/elasticsearch/test/InternalTestCluster.java, +        builder.put("transport.tcp.port", basePort + "-" + (basePort+100));, +        builder.put("http.port", basePort+101 + "-" + (basePort+200));]