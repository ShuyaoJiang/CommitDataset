[+++ b/core/src/test/java/org/elasticsearch/index/mapper/ExternalFieldMapperTests.java, +        } else if (version.onOrAfter(LatLonPointFieldMapper.LAT_LON_FIELD_VERSION)) {, +            GeoPoint point = new GeoPoint().resetFromIndexableField(doc.rootDoc().getField("field.point"));, +            assertThat(point.lat(), closeTo(42.0, 1e-5));, +            assertThat(point.lon(), closeTo(51.0, 1e-5));, +++ b/core/src/test/java/org/elasticsearch/index/mapper/ExternalFieldMapperTests.java, +        } else if (version.onOrAfter(LatLonPointFieldMapper.LAT_LON_FIELD_VERSION)) {, +            GeoPoint point = new GeoPoint().resetFromIndexableField(doc.rootDoc().getField("field.point"));, +            assertThat(point.lat(), closeTo(42.0, 1e-5));, +            assertThat(point.lon(), closeTo(51.0, 1e-5));, +++ b/core/src/test/java/org/elasticsearch/index/mapper/GeoPointFieldMapperTests.java, +        if (version.onOrAfter(LatLonPointFieldMapper.LAT_LON_FIELD_VERSION)) {, +            assertThat(doc.rootDoc().getFields("point").length, equalTo(4));, +        } else {, +        }, +++ b/core/src/test/java/org/elasticsearch/index/mapper/ExternalFieldMapperTests.java, +        } else if (version.onOrAfter(LatLonPointFieldMapper.LAT_LON_FIELD_VERSION)) {, +            GeoPoint point = new GeoPoint().resetFromIndexableField(doc.rootDoc().getField("field.point"));, +            assertThat(point.lat(), closeTo(42.0, 1e-5));, +            assertThat(point.lon(), closeTo(51.0, 1e-5));, +++ b/core/src/test/java/org/elasticsearch/index/mapper/GeoPointFieldMapperTests.java, +        if (version.onOrAfter(LatLonPointFieldMapper.LAT_LON_FIELD_VERSION)) {, +            assertThat(doc.rootDoc().getFields("point").length, equalTo(4));, +        } else {, +        }, +++ b/core/src/test/java/org/elasticsearch/search/sort/GeoDistanceIT.java, +    public void testLegacyGeoDistanceRangeQuery() throws Exception {, +        Version version = VersionUtils.randomVersionBetween(random(), Version.V_2_0_0, Version.V_2_4_0);]