[+++ b/core/src/main/java/org/elasticsearch/common/logging/log4j/LogConfigurator.java, +        props.setProperty("log4j.path.logs", cleanPath(environment.logsFile().toAbsolutePath().toString()));, +++ b/core/src/main/java/org/elasticsearch/common/logging/log4j/LogConfigurator.java, +        props.setProperty("log4j.path.logs", cleanPath(environment.logsFile().toAbsolutePath().toString()));, +++ b/core/src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java, +import static org.elasticsearch.common.Strings.cleanPath;, +        environment = new Environment(output.build());, +, +        // we put back the path.logs so we can use it in the logging configuration file, +        output.put("path.logs", cleanPath(environment.logsFile().toAbsolutePath().toString()));, +]