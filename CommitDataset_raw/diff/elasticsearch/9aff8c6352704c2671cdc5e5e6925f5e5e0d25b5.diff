[+++ b/plugins/ingest/src/test/java/org/elasticsearch/plugin/ingest/transport/simulate/SimulatePipelineRequestParsingTests.java, +import static org.elasticsearch.ingest.IngestDocument.MetaData.*;, +            doc.put(INDEX.getFieldName(), index);, +            doc.put(TYPE.getFieldName(), type);, +            doc.put(ID.getFieldName(), id);, +            expectedDoc.put(INDEX.getFieldName(), index);, +            expectedDoc.put(TYPE.getFieldName(), type);, +            expectedDoc.put(ID.getFieldName(), id);, +            assertThat(ingestDocument.getMetadata(INDEX), equalTo(expectedDocument.get(INDEX.getFieldName())));, +            assertThat(ingestDocument.getMetadata(TYPE), equalTo(expectedDocument.get(TYPE.getFieldName())));, +            assertThat(ingestDocument.getMetadata(ID), equalTo(expectedDocument.get(ID.getFieldName())));, +            doc.put(INDEX.getFieldName(), index);, +            doc.put(TYPE.getFieldName(), type);, +            doc.put(ID.getFieldName(), id);, +            expectedDoc.put(INDEX.getFieldName(), index);, +            expectedDoc.put(TYPE.getFieldName(), type);, +            expectedDoc.put(ID.getFieldName(), id);, +            assertThat(ingestDocument.getMetadata(INDEX), equalTo(expectedDocument.get(INDEX.getFieldName())));, +            assertThat(ingestDocument.getMetadata(TYPE), equalTo(expectedDocument.get(TYPE.getFieldName())));, +            assertThat(ingestDocument.getMetadata(ID), equalTo(expectedDocument.get(ID.getFieldName())));]