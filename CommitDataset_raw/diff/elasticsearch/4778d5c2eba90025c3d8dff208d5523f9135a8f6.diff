[+++ b/src/main/java/org/elasticsearch/common/lucene/search/XBooleanFilter.java, +import org.elasticsearch.common.lucene.docset.AllDocIdSet;, +import org.elasticsearch.common.lucene.docset.DocIdSets;, +import org.elasticsearch.common.lucene.docset.NotDocIdSet;, +        // optimize single case..., +        if (clauses.size() == 1) {, +            FilterClause clause = clauses.get(0);, +            DocIdSet set = clause.getFilter().getDocIdSet(context, acceptDocs);, +            if (clause.getOccur() == Occur.MUST_NOT) {, +                if (DocIdSets.isEmpty(set)) {, +                    return new AllDocIdSet(reader.maxDoc());, +                } else {, +                    return new NotDocIdSet(set, reader.maxDoc());, +                }, +            }, +            // SHOULD or MUST, just return the set..., +            return set;, +        }, +]