[+++ b/server/src/main/java/org/elasticsearch/action/bulk/TransportSingleItemBulkWriteAction.java, +import org.elasticsearch.action.support.HandledTransportAction;, +    > extends HandledTransportAction<Request, Response> {, +    protected TransportSingleItemBulkWriteAction(String actionName, TransportService transportService, ActionFilters actionFilters,, +                                                 Supplier<Request> request, TransportBulkAction bulkAction) {, +        super(actionName, transportService, actionFilters, request);, +++ b/server/src/main/java/org/elasticsearch/action/bulk/TransportSingleItemBulkWriteAction.java, +import org.elasticsearch.action.support.HandledTransportAction;, +    > extends HandledTransportAction<Request, Response> {, +    protected TransportSingleItemBulkWriteAction(String actionName, TransportService transportService, ActionFilters actionFilters,, +                                                 Supplier<Request> request, TransportBulkAction bulkAction) {, +        super(actionName, transportService, actionFilters, request);, +++ b/server/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java, +    public TransportDeleteAction(TransportService transportService, ActionFilters actionFilters, TransportBulkAction bulkAction) {, +        super(DeleteAction.NAME, transportService, actionFilters, DeleteRequest::new, bulkAction);, +++ b/server/src/main/java/org/elasticsearch/action/bulk/TransportSingleItemBulkWriteAction.java, +import org.elasticsearch.action.support.HandledTransportAction;, +    > extends HandledTransportAction<Request, Response> {, +    protected TransportSingleItemBulkWriteAction(String actionName, TransportService transportService, ActionFilters actionFilters,, +                                                 Supplier<Request> request, TransportBulkAction bulkAction) {, +        super(actionName, transportService, actionFilters, request);, +++ b/server/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java, +    public TransportDeleteAction(TransportService transportService, ActionFilters actionFilters, TransportBulkAction bulkAction) {, +        super(DeleteAction.NAME, transportService, actionFilters, DeleteRequest::new, bulkAction);, +++ b/server/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java, +    public TransportIndexAction(ActionFilters actionFilters, TransportService transportService, TransportBulkAction bulkAction) {, +        super(IndexAction.NAME, transportService, actionFilters, IndexRequest::new, bulkAction);, +++ b/server/src/main/java/org/elasticsearch/action/bulk/TransportSingleItemBulkWriteAction.java, +import org.elasticsearch.action.support.HandledTransportAction;, +    > extends HandledTransportAction<Request, Response> {, +    protected TransportSingleItemBulkWriteAction(String actionName, TransportService transportService, ActionFilters actionFilters,, +                                                 Supplier<Request> request, TransportBulkAction bulkAction) {, +        super(actionName, transportService, actionFilters, request);, +++ b/server/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java, +    public TransportDeleteAction(TransportService transportService, ActionFilters actionFilters, TransportBulkAction bulkAction) {, +        super(DeleteAction.NAME, transportService, actionFilters, DeleteRequest::new, bulkAction);, +++ b/server/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java, +    public TransportIndexAction(ActionFilters actionFilters, TransportService transportService, TransportBulkAction bulkAction) {, +        super(IndexAction.NAME, transportService, actionFilters, IndexRequest::new, bulkAction);, +++ b/server/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java, +        assert request.shardId() != null : "request shardId must be set";, +++ b/server/src/main/java/org/elasticsearch/action/bulk/TransportSingleItemBulkWriteAction.java, +import org.elasticsearch.action.support.HandledTransportAction;, +    > extends HandledTransportAction<Request, Response> {, +    protected TransportSingleItemBulkWriteAction(String actionName, TransportService transportService, ActionFilters actionFilters,, +                                                 Supplier<Request> request, TransportBulkAction bulkAction) {, +        super(actionName, transportService, actionFilters, request);, +++ b/server/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java, +    public TransportDeleteAction(TransportService transportService, ActionFilters actionFilters, TransportBulkAction bulkAction) {, +        super(DeleteAction.NAME, transportService, actionFilters, DeleteRequest::new, bulkAction);, +++ b/server/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java, +    public TransportIndexAction(ActionFilters actionFilters, TransportService transportService, TransportBulkAction bulkAction) {, +        super(IndexAction.NAME, transportService, actionFilters, IndexRequest::new, bulkAction);, +++ b/server/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java, +        assert request.shardId() != null : "request shardId must be set";, +++ b/server/src/test/java/org/elasticsearch/action/bulk/TransportBulkActionIngestTests.java, +            super(IndexAction.NAME, TransportBulkActionIngestTests.this.transportService,, +                    new ActionFilters(Collections.emptySet()), IndexRequest::new, bulkAction);]