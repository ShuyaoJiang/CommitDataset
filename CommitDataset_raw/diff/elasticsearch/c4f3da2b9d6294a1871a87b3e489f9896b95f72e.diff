[+++ b/src/main/java/org/elasticsearch/cluster/routing/operation/plain/PlainOperationRouting.java, +                String nodeId = preference.substring("_only_node:".length());, +                ensureNodeIdExists(nodes, nodeId);, +                return indexShard.onlyNodeActiveInitializingShardsIt(nodeId);, +, +    private void ensureNodeIdExists(DiscoveryNodes nodes, String nodeId) {, +        if (!nodes.dataNodes().keys().contains(nodeId)) {, +            throw new ElasticSearchIllegalArgumentException("No data node with id[" + nodeId + "] found");, +        }, +    }, +++ b/src/main/java/org/elasticsearch/cluster/routing/operation/plain/PlainOperationRouting.java, +                String nodeId = preference.substring("_only_node:".length());, +                ensureNodeIdExists(nodes, nodeId);, +                return indexShard.onlyNodeActiveInitializingShardsIt(nodeId);, +, +    private void ensureNodeIdExists(DiscoveryNodes nodes, String nodeId) {, +        if (!nodes.dataNodes().keys().contains(nodeId)) {, +            throw new ElasticSearchIllegalArgumentException("No data node with id[" + nodeId + "] found");, +        }, +    }, +++ b/src/test/java/org/elasticsearch/search/preference/SearchPreferenceTests.java, +import org.elasticsearch.ElasticSearchIllegalArgumentException;, +, +    @Test (expected = ElasticSearchIllegalArgumentException.class), +    public void testThatSpecifyingNonExistingNodesReturnsUsefulError() throws Exception {, +        createIndex("test");, +        ensureGreen();, +, +        client().prepareSearch().setQuery(matchAllQuery()).setPreference("_only_node:DOES-NOT-EXIST").execute().actionGet();, +    }]