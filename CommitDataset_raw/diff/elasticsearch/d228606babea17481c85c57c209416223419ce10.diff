[+++ b/src/main/java/org/elasticsearch/indices/recovery/RecoveryStatus.java, +    public synchronized Set<Entry<String, IndexOutput>> cancelAndClearOpenIndexInputs() {, +++ b/src/main/java/org/elasticsearch/indices/recovery/RecoveryStatus.java, +    public synchronized Set<Entry<String, IndexOutput>> cancelAndClearOpenIndexInputs() {, +++ b/src/main/java/org/elasticsearch/indices/recovery/RecoveryTarget.java, +            while (!recoveryStatus.sentCanceledToSource &&, +                    transportService.nodeConnected(recoveryStatus.sourceNode) &&, +                    rounds > 0) {, +        Set<Entry<String, IndexOutput>> entrySet = status.cancelAndClearOpenIndexInputs();, +            removeAndCleanOnGoingRecovery(onGoingRecovery);]