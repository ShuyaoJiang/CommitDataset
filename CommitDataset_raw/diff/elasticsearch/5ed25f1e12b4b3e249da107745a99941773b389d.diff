[+++ b/docs/reference/query-dsl/geo-bounding-box-query.asciidoc, +===== Bounding Box as Well-Known Text (WKT), +, +[source,js], +--------------------------------------------------, +GET /_search, +{, +    "query": {, +        "bool" : {, +            "must" : {, +                "match_all" : {}, +            },, +            "filter" : {, +                "geo_bounding_box" : {, +                    "pin.location" : {, +                        "wkt" : "BBOX (-74.1, -71.12, 40.73, 40.01)", +                    }, +                }, +            }, +        }, +    }, +}, +--------------------------------------------------, +// CONSOLE, +, +[float], +++ b/docs/reference/query-dsl/geo-bounding-box-query.asciidoc, +===== Bounding Box as Well-Known Text (WKT), +, +[source,js], +--------------------------------------------------, +GET /_search, +{, +    "query": {, +        "bool" : {, +            "must" : {, +                "match_all" : {}, +            },, +            "filter" : {, +                "geo_bounding_box" : {, +                    "pin.location" : {, +                        "wkt" : "BBOX (-74.1, -71.12, 40.73, 40.01)", +                    }, +                }, +            }, +        }, +    }, +}, +--------------------------------------------------, +// CONSOLE, +, +[float], +++ b/server/src/main/java/org/elasticsearch/common/geo/parsers/GeoWKTParser.java, +        return parseExpectedType(parser, null);, +    }, +, +    /** throws an exception if the parsed geometry type does not match the expected shape type */, +    public static ShapeBuilder parseExpectedType(XContentParser parser, final GeoShapeType shapeType), +            throws IOException, ElasticsearchParseException {, +            ShapeBuilder builder = parseGeometry(tokenizer, shapeType);, +    private static ShapeBuilder parseGeometry(StreamTokenizer stream, GeoShapeType shapeType), +            throws IOException, ElasticsearchParseException {, +        if (shapeType != null && shapeType != GeoShapeType.GEOMETRYCOLLECTION) {, +            if (type.wktName().equals(shapeType.wktName()) == false) {, +                throw new ElasticsearchParseException("Expected geometry type [{}] but found [{}]", shapeType, type);, +            }, +        }, +        GeometryCollectionBuilder builder = new GeometryCollectionBuilder().shape(, +            parseGeometry(stream, GeoShapeType.GEOMETRYCOLLECTION));, +            builder.shape(parseGeometry(stream, null));, +++ b/docs/reference/query-dsl/geo-bounding-box-query.asciidoc, +===== Bounding Box as Well-Known Text (WKT), +, +[source,js], +--------------------------------------------------, +GET /_search, +{, +    "query": {, +        "bool" : {, +            "must" : {, +                "match_all" : {}, +            },, +            "filter" : {, +                "geo_bounding_box" : {, +                    "pin.location" : {, +                        "wkt" : "BBOX (-74.1, -71.12, 40.73, 40.01)", +                    }, +                }, +            }, +        }, +    }, +}, +--------------------------------------------------, +// CONSOLE, +, +[float], +++ b/server/src/main/java/org/elasticsearch/common/geo/parsers/GeoWKTParser.java, +        return parseExpectedType(parser, null);, +    }, +]