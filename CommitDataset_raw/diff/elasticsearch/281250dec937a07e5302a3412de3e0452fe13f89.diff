[+++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchType.java, +    // 2 used to be DFS_QUERY_AND_FETCH, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchType.java, +    // 2 used to be DFS_QUERY_AND_FETCH, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchType.java, +    // 2 used to be DFS_QUERY_AND_FETCH, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchHelper.java, +        } else if (searchType == SearchType.QUERY_AND_FETCH) {, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchType.java, +    // 2 used to be DFS_QUERY_AND_FETCH, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchHelper.java, +        } else if (searchType == SearchType.QUERY_AND_FETCH) {, +++ b/core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java, +                "dfs_query_and_fetch".equals(searchType)) {, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchType.java, +    // 2 used to be DFS_QUERY_AND_FETCH, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchHelper.java, +        } else if (searchType == SearchType.QUERY_AND_FETCH) {, +++ b/core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java, +                "dfs_query_and_fetch".equals(searchType)) {, +++ b/core/src/main/java/org/elasticsearch/search/query/QueryPhase.java, +                                // for QUERY_AND_FETCH, we already know the last emitted doc, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchType.java, +    // 2 used to be DFS_QUERY_AND_FETCH, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchHelper.java, +        } else if (searchType == SearchType.QUERY_AND_FETCH) {, +++ b/core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java, +                "dfs_query_and_fetch".equals(searchType)) {, +++ b/core/src/main/java/org/elasticsearch/search/query/QueryPhase.java, +                                // for QUERY_AND_FETCH, we already know the last emitted doc, +++ b/core/src/main/java/org/elasticsearch/search/rescore/Rescorer.java, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchType.java, +    // 2 used to be DFS_QUERY_AND_FETCH, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchHelper.java, +        } else if (searchType == SearchType.QUERY_AND_FETCH) {, +++ b/core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java, +                "dfs_query_and_fetch".equals(searchType)) {, +++ b/core/src/main/java/org/elasticsearch/search/query/QueryPhase.java, +                                // for QUERY_AND_FETCH, we already know the last emitted doc, +++ b/core/src/main/java/org/elasticsearch/search/rescore/Rescorer.java, +++ b/core/src/test/java/org/elasticsearch/action/IndicesRequestIT.java, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchType.java, +    // 2 used to be DFS_QUERY_AND_FETCH, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchHelper.java, +        } else if (searchType == SearchType.QUERY_AND_FETCH) {, +++ b/core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java, +                "dfs_query_and_fetch".equals(searchType)) {, +++ b/core/src/main/java/org/elasticsearch/search/query/QueryPhase.java, +                                // for QUERY_AND_FETCH, we already know the last emitted doc, +++ b/core/src/main/java/org/elasticsearch/search/rescore/Rescorer.java, +++ b/core/src/test/java/org/elasticsearch/action/IndicesRequestIT.java, +++ b/core/src/test/java/org/elasticsearch/search/SearchWithRejectionsIT.java, +        SearchType searchType = randomFrom(SearchType.DEFAULT, SearchType.QUERY_AND_FETCH, SearchType.QUERY_THEN_FETCH, SearchType.DFS_QUERY_THEN_FETCH);, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchType.java, +    // 2 used to be DFS_QUERY_AND_FETCH, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchHelper.java, +        } else if (searchType == SearchType.QUERY_AND_FETCH) {, +++ b/core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java, +                "dfs_query_and_fetch".equals(searchType)) {, +++ b/core/src/main/java/org/elasticsearch/search/query/QueryPhase.java, +                                // for QUERY_AND_FETCH, we already know the last emitted doc, +++ b/core/src/main/java/org/elasticsearch/search/rescore/Rescorer.java, +++ b/core/src/test/java/org/elasticsearch/action/IndicesRequestIT.java, +++ b/core/src/test/java/org/elasticsearch/search/SearchWithRejectionsIT.java, +        SearchType searchType = randomFrom(SearchType.DEFAULT, SearchType.QUERY_AND_FETCH, SearchType.QUERY_THEN_FETCH, SearchType.DFS_QUERY_THEN_FETCH);, +++ b/core/src/test/java/org/elasticsearch/search/basic/TransportTwoNodesSearchIT.java, +        SearchResponse response = client().search(searchRequest("test").searchType(DFS_QUERY_THEN_FETCH).source(source)).actionGet();, +        response = client().search(searchRequest("test").searchType(DFS_QUERY_THEN_FETCH).source(source)).actionGet();, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchType.java, +    // 2 used to be DFS_QUERY_AND_FETCH, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchHelper.java, +        } else if (searchType == SearchType.QUERY_AND_FETCH) {, +++ b/core/src/main/java/org/elasticsearch/rest/action/search/RestSearchAction.java, +                "dfs_query_and_fetch".equals(searchType)) {, +++ b/core/src/main/java/org/elasticsearch/search/query/QueryPhase.java, +                                // for QUERY_AND_FETCH, we already know the last emitted doc, +++ b/core/src/main/java/org/elasticsearch/search/rescore/Rescorer.java, +++ b/core/src/test/java/org/elasticsearch/action/IndicesRequestIT.java, +++ b/core/src/test/java/org/elasticsearch/search/SearchWithRejectionsIT.java, +        SearchType searchType = randomFrom(SearchType.DEFAULT, SearchType.QUERY_AND_FETCH, SearchType.QUERY_THEN_FETCH, SearchType.DFS_QUERY_THEN_FETCH);]