[+++ b/core/src/test/java/org/elasticsearch/rest/DeprecationRestHandlerTests.java, +        if (value.trim().length() == 0) {, +            // empty text, not a valid header, +            assertFalse(DeprecationRestHandler.validHeaderValue(value));, +            Exception e = expectThrows(IllegalArgumentException.class, () -> DeprecationRestHandler.requireValidHeader(value));, +            assertEquals("header value must contain only US ASCII text", e.getMessage());, +        } else {, +    }]