[+++ b/src/main/java/org/elasticsearch/ExceptionsHelper.java, +import java.io.PrintWriter;, +import java.io.StringWriter;, +, +, +    public static String stackTrace(Throwable e) {, +        StringWriter stackTraceStringWriter = new StringWriter();, +        PrintWriter printWriter = new PrintWriter(stackTraceStringWriter);, +        e.printStackTrace(printWriter);, +        return stackTraceStringWriter.toString();, +    }, +++ b/src/main/java/org/elasticsearch/ExceptionsHelper.java, +import java.io.PrintWriter;, +import java.io.StringWriter;, +, +, +    public static String stackTrace(Throwable e) {, +        StringWriter stackTraceStringWriter = new StringWriter();, +        PrintWriter printWriter = new PrintWriter(stackTraceStringWriter);, +        e.printStackTrace(printWriter);, +        return stackTraceStringWriter.toString();, +    }, +++ b/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +        if (Loggers.getLogger(Bootstrap.class).isDebugEnabled()) {, +            errorMessage.append("\n").append(ExceptionsHelper.stackTrace(e));, +        }]