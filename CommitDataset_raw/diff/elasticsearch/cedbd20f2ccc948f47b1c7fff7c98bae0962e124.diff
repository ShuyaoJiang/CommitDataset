[+++ b/core/src/main/java/org/elasticsearch/plugins/PluginManager.java, +import org.elasticsearch.Build;, +                        addUrl(urls, String.format(Locale.ROOT, "http://download.elastic.co/elasticsearch/staging/%s/org/elasticsearch/plugin/%s/%s/%s-%s.zip", Build.CURRENT.hashShort(), repo, version, repo, version));, +++ b/core/src/main/java/org/elasticsearch/plugins/PluginManager.java, +import org.elasticsearch.Build;, +                        addUrl(urls, String.format(Locale.ROOT, "http://download.elastic.co/elasticsearch/staging/%s/org/elasticsearch/plugin/%s/%s/%s-%s.zip", Build.CURRENT.hashShort(), repo, version, repo, version));, +++ b/core/src/test/java/org/elasticsearch/plugins/PluginManagerUnitTests.java, +import org.elasticsearch.Build;, +            String expectedStagingURL = String.format(Locale.ROOT, "http://download.elastic.co/elasticsearch/staging/%s/org/elasticsearch/plugin/%s/%s/%s-%s.zip",, +                    Build.CURRENT.hashShort(), pluginName, Version.CURRENT.number(), pluginName, Version.CURRENT.number());, +            String expectedStagingUrl = String.format(Locale.ROOT, "http://download.elastic.co/elasticsearch/staging/%s/org/elasticsearch/plugin/%s/%s/%s-%s.zip",, +                    Build.CURRENT.hashShort(), randomPluginName, Version.CURRENT.number(), randomPluginName, Version.CURRENT.number());, +++ b/core/src/main/java/org/elasticsearch/plugins/PluginManager.java, +import org.elasticsearch.Build;, +                        addUrl(urls, String.format(Locale.ROOT, "http://download.elastic.co/elasticsearch/staging/%s/org/elasticsearch/plugin/%s/%s/%s-%s.zip", Build.CURRENT.hashShort(), repo, version, repo, version));, +++ b/core/src/test/java/org/elasticsearch/plugins/PluginManagerUnitTests.java, +import org.elasticsearch.Build;, +            String expectedStagingURL = String.format(Locale.ROOT, "http://download.elastic.co/elasticsearch/staging/%s/org/elasticsearch/plugin/%s/%s/%s-%s.zip",, +                    Build.CURRENT.hashShort(), pluginName, Version.CURRENT.number(), pluginName, Version.CURRENT.number());, +            String expectedStagingUrl = String.format(Locale.ROOT, "http://download.elastic.co/elasticsearch/staging/%s/org/elasticsearch/plugin/%s/%s/%s-%s.zip",, +                    Build.CURRENT.hashShort(), randomPluginName, Version.CURRENT.number(), randomPluginName, Version.CURRENT.number());, +++ b/dev-tools/pom.xml, +++ b/core/src/main/java/org/elasticsearch/plugins/PluginManager.java, +import org.elasticsearch.Build;, +                        addUrl(urls, String.format(Locale.ROOT, "http://download.elastic.co/elasticsearch/staging/%s/org/elasticsearch/plugin/%s/%s/%s-%s.zip", Build.CURRENT.hashShort(), repo, version, repo, version));, +++ b/core/src/test/java/org/elasticsearch/plugins/PluginManagerUnitTests.java, +import org.elasticsearch.Build;, +            String expectedStagingURL = String.format(Locale.ROOT, "http://download.elastic.co/elasticsearch/staging/%s/org/elasticsearch/plugin/%s/%s/%s-%s.zip",, +                    Build.CURRENT.hashShort(), pluginName, Version.CURRENT.number(), pluginName, Version.CURRENT.number());, +            String expectedStagingUrl = String.format(Locale.ROOT, "http://download.elastic.co/elasticsearch/staging/%s/org/elasticsearch/plugin/%s/%s/%s-%s.zip",, +                    Build.CURRENT.hashShort(), randomPluginName, Version.CURRENT.number(), randomPluginName, Version.CURRENT.number());, +++ b/dev-tools/pom.xml, +++ b/pom.xml, +                    <url>s3://download.elasticsearch.org/elasticsearch/staging</url>, +                <snapshotRepository>, +                    <id>aws-snapshot</id>, +                    <name>AWS Snapshot Repository</name>, +                    <url>s3://download.elasticsearch.org/elasticsearch/snapshot</url>, +                </snapshotRepository>, +++ b/core/src/main/java/org/elasticsearch/plugins/PluginManager.java, +import org.elasticsearch.Build;, +                        addUrl(urls, String.format(Locale.ROOT, "http://download.elastic.co/elasticsearch/staging/%s/org/elasticsearch/plugin/%s/%s/%s-%s.zip", Build.CURRENT.hashShort(), repo, version, repo, version));, +++ b/core/src/test/java/org/elasticsearch/plugins/PluginManagerUnitTests.java, +import org.elasticsearch.Build;, +            String expectedStagingURL = String.format(Locale.ROOT, "http://download.elastic.co/elasticsearch/staging/%s/org/elasticsearch/plugin/%s/%s/%s-%s.zip",, +                    Build.CURRENT.hashShort(), pluginName, Version.CURRENT.number(), pluginName, Version.CURRENT.number());, +            String expectedStagingUrl = String.format(Locale.ROOT, "http://download.elastic.co/elasticsearch/staging/%s/org/elasticsearch/plugin/%s/%s/%s-%s.zip",, +                    Build.CURRENT.hashShort(), randomPluginName, Version.CURRENT.number(), randomPluginName, Version.CURRENT.number());, +++ b/dev-tools/pom.xml, +++ b/pom.xml, +                    <url>s3://download.elasticsearch.org/elasticsearch/staging</url>, +                <snapshotRepository>, +                    <id>aws-snapshot</id>, +                    <name>AWS Snapshot Repository</name>, +                    <url>s3://download.elasticsearch.org/elasticsearch/snapshot</url>, +                </snapshotRepository>, +++ b/rest-api-spec/pom.xml]