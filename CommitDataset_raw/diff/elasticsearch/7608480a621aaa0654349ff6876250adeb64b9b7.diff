[+++ b/docs/reference/modules/cluster/allocation_awareness.asciidoc, +racks, or across multiple zones or domains, it is more likely that two nodes on, +the same physical server, in the same rack, or in the same zone or domain will, +With this config in place, let's say we start two nodes with, +`node.attr.rack_id` set to `rack_one`, and we create an index with 5 primary, +shards and 1 replica of each primary.  All primaries and replicas are, +allocated across the two nodes., +that no two copies of the same shard will be in the same rack. However if, +`rack_two` were to fail, taking down both of its nodes, Elasticsearch will, +still allocate the lost shard copies to nodes in `rack_one`. , +group -- to execute the request. This is usually faster than crossing between, +racks or across zone boundaries., +Multiple awareness attributes can be specified, in which case each attribute, +is considered separately when deciding where to allocate the shards., +NOTE: When using awareness attributes, shards will not be allocated to nodes, +that don't have values set for those attributes., +NOTE: Number of primary/replica of a shard allocated on a specific group of, +nodes with the same awareness attribute value is determined by the number of, +attribute values. When the number of nodes in groups is unbalanced and there, +are many replicas, replica shards may be left unassigned., +Imagine that you have two zones and enough hardware across the two zones to, +host all of your primary and replica shards.  But perhaps the hardware in a, +single zone, while sufficient to host half the shards, would be unable to host, +*ALL* the shards., +For example, lets say we have an awareness attribute called `zone`, and we, +know we are going to have two zones, `zone1` and `zone2`. Here is how we can, +force awareness on a node:, +Now, if we start 2 nodes with `node.attr.zone` set to `zone1` and create an, +index with 5 shards and 1 replica. The index will be created, but only the 5, +primary shards will be allocated (with no replicas). Only when we start more, +nodes with `node.attr.zone` set to `zone2` will the replicas be allocated.]