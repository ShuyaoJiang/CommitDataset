[+++ b/core/src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java, +        table.addCell("script.compilation_limit_triggered", "alias:scrclt,scriptCacheCompilationLimitTriggered;default:false;" +, +                "text-align:right;desc:script cache compilation limit triggered");, +            table.addCell(scriptStats == null ? null : scriptStats.getCompilationLimitTriggered());, +++ b/core/src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java, +        table.addCell("script.compilation_limit_triggered", "alias:scrclt,scriptCacheCompilationLimitTriggered;default:false;" +, +                "text-align:right;desc:script cache compilation limit triggered");, +            table.addCell(scriptStats == null ? null : scriptStats.getCompilationLimitTriggered());, +++ b/core/src/main/java/org/elasticsearch/script/ScriptMetrics.java, +    final CounterMetric compilationLimitTriggered = new CounterMetric();, +        return new ScriptStats(compilationsMetric.count(), cacheEvictionsMetric.count(), compilationLimitTriggered.count());, +, +    public void onCompilationLimit() {, +        compilationLimitTriggered.inc();, +    }, +++ b/core/src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java, +        table.addCell("script.compilation_limit_triggered", "alias:scrclt,scriptCacheCompilationLimitTriggered;default:false;" +, +                "text-align:right;desc:script cache compilation limit triggered");, +            table.addCell(scriptStats == null ? null : scriptStats.getCompilationLimitTriggered());, +++ b/core/src/main/java/org/elasticsearch/script/ScriptMetrics.java, +    final CounterMetric compilationLimitTriggered = new CounterMetric();, +        return new ScriptStats(compilationsMetric.count(), cacheEvictionsMetric.count(), compilationLimitTriggered.count());, +, +    public void onCompilationLimit() {, +        compilationLimitTriggered.inc();, +    }, +++ b/core/src/main/java/org/elasticsearch/script/ScriptService.java, +            scriptMetrics.onCompilationLimit();, +++ b/core/src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java, +        table.addCell("script.compilation_limit_triggered", "alias:scrclt,scriptCacheCompilationLimitTriggered;default:false;" +, +                "text-align:right;desc:script cache compilation limit triggered");, +            table.addCell(scriptStats == null ? null : scriptStats.getCompilationLimitTriggered());, +++ b/core/src/main/java/org/elasticsearch/script/ScriptMetrics.java, +    final CounterMetric compilationLimitTriggered = new CounterMetric();, +        return new ScriptStats(compilationsMetric.count(), cacheEvictionsMetric.count(), compilationLimitTriggered.count());, +, +    public void onCompilationLimit() {, +        compilationLimitTriggered.inc();, +    }, +++ b/core/src/main/java/org/elasticsearch/script/ScriptService.java, +            scriptMetrics.onCompilationLimit();, +++ b/core/src/main/java/org/elasticsearch/script/ScriptStats.java, +import org.elasticsearch.Version;, +    private final long compilationLimitTriggered;, +    public ScriptStats(long compilations, long cacheEvictions, long compilationLimitTriggered) {, +        this.compilationLimitTriggered = compilationLimitTriggered;, +        compilationLimitTriggered = in.getVersion().onOrAfter(Version.V_7_0_0_alpha1) ? in.readVLong() : 0;, +        if (out.getVersion().onOrAfter(Version.V_7_0_0_alpha1)) {, +            out.writeVLong(compilationLimitTriggered);, +        }, +    public long getCompilationLimitTriggered() {, +        return compilationLimitTriggered;, +    }, +, +        builder.field(Fields.COMPILATION_LIMIT_TRIGGERED, getCompilationLimitTriggered());, +        static final String COMPILATION_LIMIT_TRIGGERED = "compilation_limit_triggered";, +++ b/core/src/main/java/org/elasticsearch/rest/action/cat/RestNodesAction.java, +        table.addCell("script.compilation_limit_triggered", "alias:scrclt,scriptCacheCompilationLimitTriggered;default:false;" +, +                "text-align:right;desc:script cache compilation limit triggered");, +            table.addCell(scriptStats == null ? null : scriptStats.getCompilationLimitTriggered());, +++ b/core/src/main/java/org/elasticsearch/script/ScriptMetrics.java, +    final CounterMetric compilationLimitTriggered = new CounterMetric();, +        return new ScriptStats(compilationsMetric.count(), cacheEvictionsMetric.count(), compilationLimitTriggered.count());, +, +    public void onCompilationLimit() {, +        compilationLimitTriggered.inc();, +    }, +++ b/core/src/main/java/org/elasticsearch/script/ScriptService.java, +            scriptMetrics.onCompilationLimit();, +++ b/core/src/main/java/org/elasticsearch/script/ScriptStats.java, +import org.elasticsearch.Version;, +    private final long compilationLimitTriggered;, +    public ScriptStats(long compilations, long cacheEvictions, long compilationLimitTriggered) {, +        this.compilationLimitTriggered = compilationLimitTriggered;, +        compilationLimitTriggered = in.getVersion().onOrAfter(Version.V_7_0_0_alpha1) ? in.readVLong() : 0;, +        if (out.getVersion().onOrAfter(Version.V_7_0_0_alpha1)) {, +            out.writeVLong(compilationLimitTriggered);, +        }, +    public long getCompilationLimitTriggered() {, +        return compilationLimitTriggered;, +    }, +, +        builder.field(Fields.COMPILATION_LIMIT_TRIGGERED, getCompilationLimitTriggered());, +        static final String COMPILATION_LIMIT_TRIGGERED = "compilation_limit_triggered";, +++ b/core/src/test/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStatsTests.java, +        ScriptStats scriptStats = frequently() ?, +                new ScriptStats(randomNonNegativeLong(), randomNonNegativeLong(), randomNonNegativeLong()) : null;]