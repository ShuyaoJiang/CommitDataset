[+++ b/docs/reference/search/request/scroll.asciidoc, +, +* Aggregations are not supported., +, +++ b/docs/reference/search/request/scroll.asciidoc, +, +* Aggregations are not supported., +, +++ b/src/main/java/org/elasticsearch/search/SearchService.java, +import org.elasticsearch.ElasticsearchIllegalArgumentException;, +import org.elasticsearch.search.internal.*;, +        try {, +            if (context.aggregations() != null) {, +                throw new ElasticsearchIllegalArgumentException("aggregations are not supported with search_type=scan");, +            }, +, +++ b/docs/reference/search/request/scroll.asciidoc, +, +* Aggregations are not supported., +, +++ b/src/main/java/org/elasticsearch/search/SearchService.java, +import org.elasticsearch.ElasticsearchIllegalArgumentException;, +import org.elasticsearch.search.internal.*;, +        try {, +            if (context.aggregations() != null) {, +                throw new ElasticsearchIllegalArgumentException("aggregations are not supported with search_type=scan");, +            }, +, +++ b/src/test/java/org/elasticsearch/search/aggregations/AggregationsIntegrationTests.java, +import org.elasticsearch.action.search.SearchPhaseExecutionException;, +import org.elasticsearch.action.search.SearchType;, +    public void testScan() {, +        try {, +            client().prepareSearch("index").setSearchType(SearchType.SCAN).setScroll(new TimeValue(500)).addAggregation(terms("f").field("f")).get();, +            fail();, +        } catch (SearchPhaseExecutionException e) {, +            assertTrue(e.getMessage(), e.getMessage().contains("aggregations are not supported with search_type=scan"));, +        }, +    }, +]