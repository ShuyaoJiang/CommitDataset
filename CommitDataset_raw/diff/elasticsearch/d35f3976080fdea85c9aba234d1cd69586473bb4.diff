[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +                                                ClusterName clusterName) {, +            if (System.currentTimeMillis() > endTime) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +                                                ClusterName clusterName) {, +            if (System.currentTimeMillis() > endTime) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/client/transport/TransportClient.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +                                                ClusterName clusterName) {, +            if (System.currentTimeMillis() > endTime) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/client/transport/TransportClient.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/monitor/network/NetworkService.java, +    @Inject public NetworkService(Settings settings, NetworkProbe probe) {, +        if ((System.currentTimeMillis() - cachedStats.timestamp()) > refreshInterval.millis()) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +                                                ClusterName clusterName) {, +            if (System.currentTimeMillis() > endTime) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/client/transport/TransportClient.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/monitor/network/NetworkService.java, +    @Inject public NetworkService(Settings settings, NetworkProbe probe) {, +        if ((System.currentTimeMillis() - cachedStats.timestamp()) > refreshInterval.millis()) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/monitor/os/OsService.java, +    @Inject public OsService(Settings settings, OsProbe probe) {, +        if ((System.currentTimeMillis() - cachedStats.timestamp()) > refreshInterval.millis()) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +                                                ClusterName clusterName) {, +            if (System.currentTimeMillis() > endTime) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/client/transport/TransportClient.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/monitor/network/NetworkService.java, +    @Inject public NetworkService(Settings settings, NetworkProbe probe) {, +        if ((System.currentTimeMillis() - cachedStats.timestamp()) > refreshInterval.millis()) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/monitor/os/OsService.java, +    @Inject public OsService(Settings settings, OsProbe probe) {, +        if ((System.currentTimeMillis() - cachedStats.timestamp()) > refreshInterval.millis()) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/monitor/process/ProcessService.java, +    @Inject public ProcessService(Settings settings, ProcessProbe probe) {, +        if ((System.currentTimeMillis() - cachedStats.timestamp()) > refreshInterval.millis()) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +                                                ClusterName clusterName) {, +            if (System.currentTimeMillis() > endTime) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/client/transport/TransportClient.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/monitor/network/NetworkService.java, +    @Inject public NetworkService(Settings settings, NetworkProbe probe) {, +        if ((System.currentTimeMillis() - cachedStats.timestamp()) > refreshInterval.millis()) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/monitor/os/OsService.java, +    @Inject public OsService(Settings settings, OsProbe probe) {, +        if ((System.currentTimeMillis() - cachedStats.timestamp()) > refreshInterval.millis()) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/monitor/process/ProcessService.java, +    @Inject public ProcessService(Settings settings, ProcessProbe probe) {, +        if ((System.currentTimeMillis() - cachedStats.timestamp()) > refreshInterval.millis()) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/node/internal/InternalNode.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +                                                ClusterName clusterName) {, +            if (System.currentTimeMillis() > endTime) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/client/transport/TransportClient.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/monitor/network/NetworkService.java, +    @Inject public NetworkService(Settings settings, NetworkProbe probe) {, +        if ((System.currentTimeMillis() - cachedStats.timestamp()) > refreshInterval.millis()) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/monitor/os/OsService.java, +    @Inject public OsService(Settings settings, OsProbe probe) {, +        if ((System.currentTimeMillis() - cachedStats.timestamp()) > refreshInterval.millis()) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/monitor/process/ProcessService.java, +    @Inject public ProcessService(Settings settings, ProcessProbe probe) {, +        if ((System.currentTimeMillis() - cachedStats.timestamp()) > refreshInterval.millis()) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/node/internal/InternalNode.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/SearchService.java, +    @Inject public SearchService(Settings settings, ClusterService clusterService, IndicesService indicesService, IndicesLifecycle indicesLifecycle, ThreadPool threadPool,, +        context.accessed(System.currentTimeMillis());, +            long time = System.currentTimeMillis();, +                if ((time - context.lastAccessTime() > context.keepAlive())) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +                                                ClusterName clusterName) {, +            if (System.currentTimeMillis() > endTime) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/client/transport/TransportClient.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/monitor/network/NetworkService.java, +    @Inject public NetworkService(Settings settings, NetworkProbe probe) {, +        if ((System.currentTimeMillis() - cachedStats.timestamp()) > refreshInterval.millis()) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/monitor/os/OsService.java, +    @Inject public OsService(Settings settings, OsProbe probe) {, +        if ((System.currentTimeMillis() - cachedStats.timestamp()) > refreshInterval.millis()) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/monitor/process/ProcessService.java, +    @Inject public ProcessService(Settings settings, ProcessProbe probe) {, +        if ((System.currentTimeMillis() - cachedStats.timestamp()) > refreshInterval.millis()) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/node/internal/InternalNode.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/SearchService.java, +    @Inject public SearchService(Settings settings, ClusterService clusterService, IndicesService indicesService, IndicesLifecycle indicesLifecycle, ThreadPool threadPool,, +        context.accessed(System.currentTimeMillis());, +            long time = System.currentTimeMillis();, +                if ((time - context.lastAccessTime() > context.keepAlive())) {, +++ /dev/null, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +                                                ClusterName clusterName) {, +            if (System.currentTimeMillis() > endTime) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/client/transport/TransportClient.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/monitor/network/NetworkService.java, +    @Inject public NetworkService(Settings settings, NetworkProbe probe) {, +        if ((System.currentTimeMillis() - cachedStats.timestamp()) > refreshInterval.millis()) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/monitor/os/OsService.java, +    @Inject public OsService(Settings settings, OsProbe probe) {, +        if ((System.currentTimeMillis() - cachedStats.timestamp()) > refreshInterval.millis()) {]