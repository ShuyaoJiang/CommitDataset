[+++ b/buildSrc/version.properties, +lucene            = 5.5.0-snapshot-1721183, +++ b/buildSrc/version.properties, +lucene            = 5.5.0-snapshot-1721183, +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/buildSrc/version.properties, +lucene            = 5.5.0-snapshot-1721183, +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterModule.java, +        registerIndexDynamicSetting(TranslogConfig.INDEX_TRANSLOG_FS_TYPE, Validator.EMPTY);, +        registerIndexDynamicSetting(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_OPS, Validator.INTEGER);, +        registerIndexDynamicSetting(IndexShard.INDEX_TRANSLOG_DISABLE_FLUSH, Validator.EMPTY);, +++ b/buildSrc/version.properties, +lucene            = 5.5.0-snapshot-1721183, +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterModule.java, +        registerIndexDynamicSetting(TranslogConfig.INDEX_TRANSLOG_FS_TYPE, Validator.EMPTY);, +        registerIndexDynamicSetting(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_OPS, Validator.INTEGER);, +        registerIndexDynamicSetting(IndexShard.INDEX_TRANSLOG_DISABLE_FLUSH, Validator.EMPTY);, +++ b/core/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +            final DocIdSetIterator iterator = scorer.iterator();, +            for (int doc = iterator.nextDoc(); doc != DocIdSetIterator.NO_MORE_DOCS; doc = iterator.nextDoc()) {, +            public DocIdSetIterator iterator() {, +        final TwoPhaseIterator twoPhase = scorer.twoPhaseIterator();, +            iterator = scorer.iterator();, +++ b/buildSrc/version.properties, +lucene            = 5.5.0-snapshot-1721183, +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterModule.java, +        registerIndexDynamicSetting(TranslogConfig.INDEX_TRANSLOG_FS_TYPE, Validator.EMPTY);, +        registerIndexDynamicSetting(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_OPS, Validator.INTEGER);, +        registerIndexDynamicSetting(IndexShard.INDEX_TRANSLOG_DISABLE_FLUSH, Validator.EMPTY);, +++ b/core/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +            final DocIdSetIterator iterator = scorer.iterator();, +            for (int doc = iterator.nextDoc(); doc != DocIdSetIterator.NO_MORE_DOCS; doc = iterator.nextDoc()) {, +            public DocIdSetIterator iterator() {, +        final TwoPhaseIterator twoPhase = scorer.twoPhaseIterator();, +            iterator = scorer.iterator();, +++ b/core/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java, +import org.apache.lucene.search.DocIdSetIterator;, +                    int newDoc = scorer.iterator().advance(doc);, +        public DocIdSetIterator iterator() {, +            return postings;, +++ b/buildSrc/version.properties, +lucene            = 5.5.0-snapshot-1721183, +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterModule.java, +        registerIndexDynamicSetting(TranslogConfig.INDEX_TRANSLOG_FS_TYPE, Validator.EMPTY);, +        registerIndexDynamicSetting(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_OPS, Validator.INTEGER);, +        registerIndexDynamicSetting(IndexShard.INDEX_TRANSLOG_DISABLE_FLUSH, Validator.EMPTY);, +++ b/core/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +            final DocIdSetIterator iterator = scorer.iterator();, +            for (int doc = iterator.nextDoc(); doc != DocIdSetIterator.NO_MORE_DOCS; doc = iterator.nextDoc()) {, +            public DocIdSetIterator iterator() {, +        final TwoPhaseIterator twoPhase = scorer.twoPhaseIterator();, +            iterator = scorer.iterator();, +++ b/core/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java, +import org.apache.lucene.search.DocIdSetIterator;, +                    int newDoc = scorer.iterator().advance(doc);, +        public DocIdSetIterator iterator() {, +            return postings;, +++ b/core/src/main/java/org/elasticsearch/common/lucene/index/FilterableTermsEnum.java, +import org.apache.lucene.search.Scorer;, +                Scorer scorer = weight.scorer(context);, +                if (scorer == null) {, +                DocIdSetIterator docs = scorer.iterator();, +++ b/buildSrc/version.properties, +lucene            = 5.5.0-snapshot-1721183, +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterModule.java, +        registerIndexDynamicSetting(TranslogConfig.INDEX_TRANSLOG_FS_TYPE, Validator.EMPTY);, +        registerIndexDynamicSetting(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_OPS, Validator.INTEGER);, +        registerIndexDynamicSetting(IndexShard.INDEX_TRANSLOG_DISABLE_FLUSH, Validator.EMPTY);, +++ b/core/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +            final DocIdSetIterator iterator = scorer.iterator();, +            for (int doc = iterator.nextDoc(); doc != DocIdSetIterator.NO_MORE_DOCS; doc = iterator.nextDoc()) {, +            public DocIdSetIterator iterator() {, +        final TwoPhaseIterator twoPhase = scorer.twoPhaseIterator();, +            iterator = scorer.iterator();, +++ b/core/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java, +import org.apache.lucene.search.DocIdSetIterator;, +                    int newDoc = scorer.iterator().advance(doc);, +        public DocIdSetIterator iterator() {, +            return postings;, +++ b/core/src/main/java/org/elasticsearch/common/lucene/index/FilterableTermsEnum.java, +import org.apache.lucene.search.Scorer;, +                Scorer scorer = weight.scorer(context);, +                if (scorer == null) {, +                DocIdSetIterator docs = scorer.iterator();, +++ /dev/null, +++ b/buildSrc/version.properties, +lucene            = 5.5.0-snapshot-1721183, +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterModule.java, +        registerIndexDynamicSetting(TranslogConfig.INDEX_TRANSLOG_FS_TYPE, Validator.EMPTY);, +        registerIndexDynamicSetting(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_OPS, Validator.INTEGER);, +        registerIndexDynamicSetting(IndexShard.INDEX_TRANSLOG_DISABLE_FLUSH, Validator.EMPTY);, +++ b/core/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +            final DocIdSetIterator iterator = scorer.iterator();, +            for (int doc = iterator.nextDoc(); doc != DocIdSetIterator.NO_MORE_DOCS; doc = iterator.nextDoc()) {]