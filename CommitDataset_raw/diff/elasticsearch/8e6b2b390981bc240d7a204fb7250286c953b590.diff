[+++ b/docs/reference/migration/index.asciidoc, +* Migration between major versions -- e.g. `1.x` to `2.x` --, +* Migration between minor versions -- e.g. `1.x` to `1.y` -- can be, +  performed by <<rolling-upgrades,upgrading one node at a time>>., +++ b/docs/reference/migration/index.asciidoc, +* Migration between major versions -- e.g. `1.x` to `2.x` --, +* Migration between minor versions -- e.g. `1.x` to `1.y` -- can be, +  performed by <<rolling-upgrades,upgrading one node at a time>>., +++ b/modules/lang-expression/src/main/java/org/elasticsearch/script/expression/ExpressionSearchScript.java, +                // _value isn't used in script if specialValue == null, +                if (specialValue != null) {, +            }, +++ b/docs/reference/migration/index.asciidoc, +* Migration between major versions -- e.g. `1.x` to `2.x` --, +* Migration between minor versions -- e.g. `1.x` to `1.y` -- can be, +  performed by <<rolling-upgrades,upgrading one node at a time>>., +++ b/modules/lang-expression/src/main/java/org/elasticsearch/script/expression/ExpressionSearchScript.java, +                // _value isn't used in script if specialValue == null, +                if (specialValue != null) {, +            }, +++ b/modules/lang-expression/src/test/java/org/elasticsearch/script/expression/MoreExpressionTests.java, +                                .script(new Script("_value - 1.1", ScriptType.INLINE, ExpressionScriptEngineService.NAME, null))), +                .addAggregation(, +                        AggregationBuilders.stats("const_agg").field("x"), +                                .script(new Script("3.0", ScriptType.INLINE, ExpressionScriptEngineService.NAME, null)), +                );, +, +        stats = rsp.getAggregations().get("const_agg");, +        assertThat(stats.getMax(), equalTo(3.0));, +        assertThat(stats.getMin(), equalTo(3.0));, +        assertThat(stats.getAvg(), equalTo(3.0));]