[+++ b/plugin/src/main/java/org/elasticsearch/license/License.java, +import java.io.IOException;, +import java.nio.ByteBuffer;, +import java.util.ArrayList;, +import java.util.Base64;, +import java.util.Comparator;, +import java.util.List;, +import java.util.Locale;, +, +        if (bytes == null || bytes.length() == 0) {, +            throw new ElasticsearchParseException("failed to parse license - no content provided");, +        }, +        if (xContentType == null) {, +            throw new ElasticsearchParseException("failed to parse license - no content-type provided");, +        }, +++ b/plugin/src/main/java/org/elasticsearch/license/License.java, +import java.io.IOException;, +import java.nio.ByteBuffer;, +import java.util.ArrayList;, +import java.util.Base64;, +import java.util.Comparator;, +import java.util.List;, +import java.util.Locale;, +, +        if (bytes == null || bytes.length() == 0) {, +            throw new ElasticsearchParseException("failed to parse license - no content provided");, +        }, +        if (xContentType == null) {, +            throw new ElasticsearchParseException("failed to parse license - no content-type provided");, +        }, +++ b/plugin/src/main/java/org/elasticsearch/license/RestPutLicenseAction.java, +import java.io.IOException;, +, +import org.elasticsearch.ElasticsearchParseException;, +        if (request.hasContent() == false) {, +            throw new IllegalArgumentException("The license must be provided in the request body");, +        }, +++ b/plugin/src/main/java/org/elasticsearch/license/License.java, +import java.io.IOException;, +import java.nio.ByteBuffer;, +import java.util.ArrayList;, +import java.util.Base64;, +import java.util.Comparator;, +import java.util.List;, +import java.util.Locale;, +, +        if (bytes == null || bytes.length() == 0) {, +            throw new ElasticsearchParseException("failed to parse license - no content provided");, +        }, +        if (xContentType == null) {, +            throw new ElasticsearchParseException("failed to parse license - no content-type provided");, +        }, +++ b/plugin/src/main/java/org/elasticsearch/license/RestPutLicenseAction.java, +import java.io.IOException;, +, +import org.elasticsearch.ElasticsearchParseException;, +        if (request.hasContent() == false) {, +            throw new IllegalArgumentException("The license must be provided in the request body");, +        }, +++ b/plugin/src/test/resources/rest-api-spec/test/license/20_put_license.yml, +---, +"Should fail gracefully when body content is not provided":, +, +  - do:, +      catch: request, +      xpack.license.post:, +        acknowledge: true, +, +  - match: { error.root_cause.0.reason: 'The license must be provided in the request body' }]