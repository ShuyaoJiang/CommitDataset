[+++ b/plugins/mapper/attachments/src/main/java/org/elasticsearch/index/mapper/attachment/AttachmentMapper.java, +import org.elasticsearch.common.netty.util.internal.SystemPropertyUtil;, +        private StringFieldMapper.Builder contentTypeBuilder = stringField("content_type");, +, +        public Builder contentType(StringFieldMapper.Builder contentType) {, +            this.contentTypeBuilder = contentType;, +            return this;, +        }, +, +            StringFieldMapper contentTypeMapper = contentTypeBuilder.build(context);, +            return new AttachmentMapper(name, pathType, contentMapper, dateMapper, titleMapper, authorMapper, keywordsMapper, contentTypeMapper);, +                        } else if ("content_type".equals(propName)) {, +                            builder.contentType((StringFieldMapper.Builder) parserContext.typeParser("string").parse("content_type", (Map<String, Object>) propNode, parserContext));, +    private final StringFieldMapper contentTypeMapper;, +, +                            StringFieldMapper keywordsMapper, StringFieldMapper contentTypeMapper) {, +        this.contentTypeMapper = contentTypeMapper;, +, +        context.externalValue(metadata.get(Metadata.CONTENT_TYPE));, +        contentTypeMapper.parse(context);, +        contentTypeMapper.traverse(fieldMapperListener);, +        contentTypeMapper.close();, +        contentTypeMapper.toXContent(builder, params);]