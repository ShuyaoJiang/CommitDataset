[+++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java, +    private FsStats.Path fs;, +        this.fs = new FsStats.Path();, +    public FsStats.Path getFs() {, +        fs = FsStats.Path.readInfoFrom(in);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java, +    private FsStats.Path fs;, +        this.fs = new FsStats.Path();, +    public FsStats.Path getFs() {, +        fs = FsStats.Path.readInfoFrom(in);, +++ b/core/src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java, +                            for (FsStats.Path info : nodeStats.getFs()) {, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java, +    private FsStats.Path fs;, +        this.fs = new FsStats.Path();, +    public FsStats.Path getFs() {, +        fs = FsStats.Path.readInfoFrom(in);, +++ b/core/src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java, +                            for (FsStats.Path info : nodeStats.getFs()) {, +++ b/core/src/main/java/org/elasticsearch/env/NodeEnvironment.java, +import org.elasticsearch.monitor.fs.FsProbe;, +                FsStats.Path fsPath = FsProbe.getFSInfo(nodePath);, +                    .append(fsPath.getFree()), +                    .append(fsPath.getAvailable()), +                    .append(fsPath.getTotal()), +                    .append(fsPath.getMount()), +                    .append(fsPath.getType()), +            FsStats.Path totFSPath = new FsStats.Path();, +                FsStats.Path fsPath = FsProbe.getFSInfo(nodePath);, +                String mount = fsPath.getMount();, +                    String type = fsPath.getType();, +                    Boolean spins = fsPath.getSpins();, +                    totFSPath.add(fsPath);, +                                      totFSPath.getAvailable(),, +                                      totFSPath.getTotal(),, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java, +    private FsStats.Path fs;, +        this.fs = new FsStats.Path();, +    public FsStats.Path getFs() {, +        fs = FsStats.Path.readInfoFrom(in);, +++ b/core/src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java, +                            for (FsStats.Path info : nodeStats.getFs()) {, +++ b/core/src/main/java/org/elasticsearch/env/NodeEnvironment.java, +import org.elasticsearch.monitor.fs.FsProbe;, +                FsStats.Path fsPath = FsProbe.getFSInfo(nodePath);, +                    .append(fsPath.getFree()), +                    .append(fsPath.getAvailable()), +                    .append(fsPath.getTotal()), +                    .append(fsPath.getMount()), +                    .append(fsPath.getType()), +            FsStats.Path totFSPath = new FsStats.Path();, +                FsStats.Path fsPath = FsProbe.getFSInfo(nodePath);, +                String mount = fsPath.getMount();, +                    String type = fsPath.getType();, +                    Boolean spins = fsPath.getSpins();, +                    totFSPath.add(fsPath);, +                                      totFSPath.getAvailable(),, +                                      totFSPath.getTotal(),, +++ b/core/src/main/java/org/elasticsearch/monitor/MonitorModule.java, +        bind(FsProbe.class).asEagerSingleton();, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java, +    private FsStats.Path fs;, +        this.fs = new FsStats.Path();, +    public FsStats.Path getFs() {, +        fs = FsStats.Path.readInfoFrom(in);, +++ b/core/src/main/java/org/elasticsearch/cluster/InternalClusterInfoService.java, +                            for (FsStats.Path info : nodeStats.getFs()) {, +++ b/core/src/main/java/org/elasticsearch/env/NodeEnvironment.java, +import org.elasticsearch.monitor.fs.FsProbe;, +                FsStats.Path fsPath = FsProbe.getFSInfo(nodePath);, +                    .append(fsPath.getFree()), +                    .append(fsPath.getAvailable()), +                    .append(fsPath.getTotal()), +                    .append(fsPath.getMount()), +                    .append(fsPath.getType()), +            FsStats.Path totFSPath = new FsStats.Path();, +                FsStats.Path fsPath = FsProbe.getFSInfo(nodePath);, +                String mount = fsPath.getMount();, +                    String type = fsPath.getType();, +                    Boolean spins = fsPath.getSpins();, +                    totFSPath.add(fsPath);, +                                      totFSPath.getAvailable(),, +                                      totFSPath.getTotal(),, +++ b/core/src/main/java/org/elasticsearch/monitor/MonitorModule.java, +        bind(FsProbe.class).asEagerSingleton();, +++ b/core/src/main/java/org/elasticsearch/monitor/fs/FsProbe.java, +import org.elasticsearch.common.component.AbstractComponent;, +import org.elasticsearch.common.inject.Inject;, +import org.elasticsearch.common.settings.Settings;, +import org.elasticsearch.env.NodeEnvironment;, +import org.elasticsearch.env.NodeEnvironment.NodePath;, +, +public class FsProbe extends AbstractComponent {, +    private final NodeEnvironment nodeEnv;, +, +    @Inject, +    public FsProbe(Settings settings, NodeEnvironment nodeEnv) {, +        super(settings);, +        this.nodeEnv = nodeEnv;, +    }]