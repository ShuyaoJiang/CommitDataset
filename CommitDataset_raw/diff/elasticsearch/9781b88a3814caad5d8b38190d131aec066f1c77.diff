[+++ b/core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java, +import org.elasticsearch.common.logging.DeprecationLogger;, +import org.elasticsearch.common.logging.ESLoggerFactory;, +    private static final DeprecationLogger deprecationLogger = new DeprecationLogger(ESLoggerFactory.getLogger(IndexMetaData.class));, +, +            this.indexCreatedVersion, SETTING_SHARED_FILESYSTEM, isIndexUsingShadowReplicas(settings), deprecationLogger);, +        return settings.getAsBooleanLenientForPreEs6Indices(this.indexCreatedVersion, SETTING_SHADOW_REPLICAS, false, deprecationLogger);, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java, +import org.elasticsearch.common.logging.DeprecationLogger;, +import org.elasticsearch.common.logging.ESLoggerFactory;, +    private static final DeprecationLogger deprecationLogger = new DeprecationLogger(ESLoggerFactory.getLogger(IndexMetaData.class));, +, +            this.indexCreatedVersion, SETTING_SHARED_FILESYSTEM, isIndexUsingShadowReplicas(settings), deprecationLogger);, +        return settings.getAsBooleanLenientForPreEs6Indices(this.indexCreatedVersion, SETTING_SHADOW_REPLICAS, false, deprecationLogger);, +++ b/core/src/main/java/org/elasticsearch/common/settings/Settings.java, +    public Boolean getAsBooleanLenientForPreEs6Indices(, +        final Version indexVersion,, +        final String setting,, +        final Boolean defaultValue,, +        final DeprecationLogger deprecationLogger) {, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java, +import org.elasticsearch.common.logging.DeprecationLogger;, +import org.elasticsearch.common.logging.ESLoggerFactory;, +    private static final DeprecationLogger deprecationLogger = new DeprecationLogger(ESLoggerFactory.getLogger(IndexMetaData.class));, +, +            this.indexCreatedVersion, SETTING_SHARED_FILESYSTEM, isIndexUsingShadowReplicas(settings), deprecationLogger);, +        return settings.getAsBooleanLenientForPreEs6Indices(this.indexCreatedVersion, SETTING_SHADOW_REPLICAS, false, deprecationLogger);, +++ b/core/src/main/java/org/elasticsearch/common/settings/Settings.java, +    public Boolean getAsBooleanLenientForPreEs6Indices(, +        final Version indexVersion,, +        final String setting,, +        final Boolean defaultValue,, +        final DeprecationLogger deprecationLogger) {, +++ b/core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java, +                metaData.getCreationVersion(), IndexMetaData.SETTING_SHARED_FS_ALLOW_RECOVERY_ON_ANY_NODE, false, deprecationLogger) ||, +                    (metaData.getCreationVersion(), IndexMetaData.SETTING_SHARED_FS_ALLOW_RECOVERY_ON_ANY_NODE, false, deprecationLogger));, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java, +import org.elasticsearch.common.logging.DeprecationLogger;, +import org.elasticsearch.common.logging.ESLoggerFactory;, +    private static final DeprecationLogger deprecationLogger = new DeprecationLogger(ESLoggerFactory.getLogger(IndexMetaData.class));, +, +            this.indexCreatedVersion, SETTING_SHARED_FILESYSTEM, isIndexUsingShadowReplicas(settings), deprecationLogger);, +        return settings.getAsBooleanLenientForPreEs6Indices(this.indexCreatedVersion, SETTING_SHADOW_REPLICAS, false, deprecationLogger);, +++ b/core/src/main/java/org/elasticsearch/common/settings/Settings.java, +    public Boolean getAsBooleanLenientForPreEs6Indices(, +        final Version indexVersion,, +        final String setting,, +        final Boolean defaultValue,, +        final DeprecationLogger deprecationLogger) {, +++ b/core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java, +                metaData.getCreationVersion(), IndexMetaData.SETTING_SHARED_FS_ALLOW_RECOVERY_ON_ANY_NODE, false, deprecationLogger) ||, +                    (metaData.getCreationVersion(), IndexMetaData.SETTING_SHARED_FS_ALLOW_RECOVERY_ON_ANY_NODE, false, deprecationLogger));, +++ b/core/src/main/java/org/elasticsearch/index/IndexSettings.java, +import org.elasticsearch.common.logging.DeprecationLogger;, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java, +import org.elasticsearch.common.logging.DeprecationLogger;, +import org.elasticsearch.common.logging.ESLoggerFactory;, +    private static final DeprecationLogger deprecationLogger = new DeprecationLogger(ESLoggerFactory.getLogger(IndexMetaData.class));, +, +            this.indexCreatedVersion, SETTING_SHARED_FILESYSTEM, isIndexUsingShadowReplicas(settings), deprecationLogger);, +        return settings.getAsBooleanLenientForPreEs6Indices(this.indexCreatedVersion, SETTING_SHADOW_REPLICAS, false, deprecationLogger);, +++ b/core/src/main/java/org/elasticsearch/common/settings/Settings.java, +    public Boolean getAsBooleanLenientForPreEs6Indices(, +        final Version indexVersion,, +        final String setting,, +        final Boolean defaultValue,, +        final DeprecationLogger deprecationLogger) {, +++ b/core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java, +                metaData.getCreationVersion(), IndexMetaData.SETTING_SHARED_FS_ALLOW_RECOVERY_ON_ANY_NODE, false, deprecationLogger) ||, +                    (metaData.getCreationVersion(), IndexMetaData.SETTING_SHARED_FS_ALLOW_RECOVERY_ON_ANY_NODE, false, deprecationLogger));, +++ b/core/src/main/java/org/elasticsearch/index/IndexSettings.java, +import org.elasticsearch.common.logging.DeprecationLogger;, +++ b/core/src/main/java/org/elasticsearch/index/MergePolicyConfig.java, +import org.elasticsearch.common.logging.DeprecationLogger;, +            .getAsBooleanLenientForPreEs6Indices(indexSettings.getIndexVersionCreated(), INDEX_MERGE_ENABLED, true, new DeprecationLogger(logger));, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java, +import org.elasticsearch.common.logging.DeprecationLogger;, +import org.elasticsearch.common.logging.ESLoggerFactory;, +    private static final DeprecationLogger deprecationLogger = new DeprecationLogger(ESLoggerFactory.getLogger(IndexMetaData.class));, +, +            this.indexCreatedVersion, SETTING_SHARED_FILESYSTEM, isIndexUsingShadowReplicas(settings), deprecationLogger);, +        return settings.getAsBooleanLenientForPreEs6Indices(this.indexCreatedVersion, SETTING_SHADOW_REPLICAS, false, deprecationLogger);, +++ b/core/src/main/java/org/elasticsearch/common/settings/Settings.java, +    public Boolean getAsBooleanLenientForPreEs6Indices(, +        final Version indexVersion,, +        final String setting,, +        final Boolean defaultValue,, +        final DeprecationLogger deprecationLogger) {, +++ b/core/src/main/java/org/elasticsearch/gateway/PrimaryShardAllocator.java, +                metaData.getCreationVersion(), IndexMetaData.SETTING_SHARED_FS_ALLOW_RECOVERY_ON_ANY_NODE, false, deprecationLogger) ||, +                    (metaData.getCreationVersion(), IndexMetaData.SETTING_SHARED_FS_ALLOW_RECOVERY_ON_ANY_NODE, false, deprecationLogger));, +++ b/core/src/main/java/org/elasticsearch/index/IndexSettings.java, +import org.elasticsearch.common.logging.DeprecationLogger;, +++ b/core/src/main/java/org/elasticsearch/index/MergePolicyConfig.java, +import org.elasticsearch.common.logging.DeprecationLogger;, +            .getAsBooleanLenientForPreEs6Indices(indexSettings.getIndexVersionCreated(), INDEX_MERGE_ENABLED, true, new DeprecationLogger(logger));, +++ b/core/src/main/java/org/elasticsearch/index/analysis/ASCIIFoldingTokenFilterFactory.java, +            indexSettings.getIndexVersionCreated(), PRESERVE_ORIGINAL.getPreferredName(), DEFAULT_PRESERVE_ORIGINAL, deprecationLogger);, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java, +import org.elasticsearch.common.logging.DeprecationLogger;]