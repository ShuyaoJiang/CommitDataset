[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java, +                            indicesService.deleteIndex(request.index, "failed on parsing default mapping on index creation");, +                            indicesService.deleteIndex(request.index, "failed on parsing mappings on index creation");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java, +                            indicesService.deleteIndex(request.index, "failed on parsing default mapping on index creation");, +                            indicesService.deleteIndex(request.index, "failed on parsing mappings on index creation");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/IndexShardGatewayService.java, +            indexShard.recovering("from gateway");, +                        indexShard.start("post recovery from gateway");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java, +                            indicesService.deleteIndex(request.index, "failed on parsing default mapping on index creation");, +                            indicesService.deleteIndex(request.index, "failed on parsing mappings on index creation");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/IndexShardGatewayService.java, +            indexShard.recovering("from gateway");, +                        indexShard.start("post recovery from gateway");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/blobstore/BlobStoreIndexShardGateway.java, +            indexShard.start("post recovery from gateway, no translog");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java, +                            indicesService.deleteIndex(request.index, "failed on parsing default mapping on index creation");, +                            indicesService.deleteIndex(request.index, "failed on parsing mappings on index creation");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/IndexShardGatewayService.java, +            indexShard.recovering("from gateway");, +                        indexShard.start("post recovery from gateway");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/blobstore/BlobStoreIndexShardGateway.java, +            indexShard.start("post recovery from gateway, no translog");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/local/LocalIndexShardGateway.java, +            indexShard.start("post recovery from gateway, no translog");, +            indexShard.start("post recovery from gateway, no translog");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java, +                            indicesService.deleteIndex(request.index, "failed on parsing default mapping on index creation");, +                            indicesService.deleteIndex(request.index, "failed on parsing mappings on index creation");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/IndexShardGatewayService.java, +            indexShard.recovering("from gateway");, +                        indexShard.start("post recovery from gateway");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/blobstore/BlobStoreIndexShardGateway.java, +            indexShard.start("post recovery from gateway, no translog");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/local/LocalIndexShardGateway.java, +            indexShard.start("post recovery from gateway, no translog");, +            indexShard.start("post recovery from gateway, no translog");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/none/NoneIndexShardGateway.java, +        indexShard.start("post recovery from gateway");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java, +                            indicesService.deleteIndex(request.index, "failed on parsing default mapping on index creation");, +                            indicesService.deleteIndex(request.index, "failed on parsing mappings on index creation");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/IndexShardGatewayService.java, +            indexShard.recovering("from gateway");, +                        indexShard.start("post recovery from gateway");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/blobstore/BlobStoreIndexShardGateway.java, +            indexShard.start("post recovery from gateway, no translog");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/local/LocalIndexShardGateway.java, +            indexShard.start("post recovery from gateway, no translog");, +            indexShard.start("post recovery from gateway, no translog");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/none/NoneIndexShardGateway.java, +        indexShard.start("post recovery from gateway");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/service/IndexService.java, +public interface IndexService extends IndexComponent, Iterable<IndexShard> {, +    void cleanShard(int shardId, String reason) throws ElasticSearchException;, +    void removeShard(int shardId, String reason) throws ElasticSearchException;, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java, +                            indicesService.deleteIndex(request.index, "failed on parsing default mapping on index creation");, +                            indicesService.deleteIndex(request.index, "failed on parsing mappings on index creation");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/IndexShardGatewayService.java, +            indexShard.recovering("from gateway");, +                        indexShard.start("post recovery from gateway");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/blobstore/BlobStoreIndexShardGateway.java, +            indexShard.start("post recovery from gateway, no translog");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/local/LocalIndexShardGateway.java, +            indexShard.start("post recovery from gateway, no translog");, +            indexShard.start("post recovery from gateway, no translog");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/none/NoneIndexShardGateway.java, +        indexShard.start("post recovery from gateway");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/service/IndexService.java, +public interface IndexService extends IndexComponent, Iterable<IndexShard> {, +    void cleanShard(int shardId, String reason) throws ElasticSearchException;, +    void removeShard(int shardId, String reason) throws ElasticSearchException;, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/service/InternalIndexService.java, +import org.elasticsearch.index.shard.service.InternalIndexShard;, +    public void close(final boolean delete, final String reason) {, +                            deleteShard(shardId, delete, !delete, delete, reason);, +    @Override public synchronized void cleanShard(int shardId, String reason) throws ElasticSearchException {, +        deleteShard(shardId, true, false, false, reason);, +    @Override public synchronized void removeShard(int shardId, String reason) throws ElasticSearchException {, +        deleteShard(shardId, false, false, false, reason);, +    private void deleteShard(int shardId, boolean delete, boolean snapshotGateway, boolean deleteGateway, String reason) throws ElasticSearchException {, +            ((InternalIndexShard) indexShard).close(reason);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java, +                            indicesService.deleteIndex(request.index, "failed on parsing default mapping on index creation");, +                            indicesService.deleteIndex(request.index, "failed on parsing mappings on index creation");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/IndexShardGatewayService.java, +            indexShard.recovering("from gateway");, +                        indexShard.start("post recovery from gateway");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/blobstore/BlobStoreIndexShardGateway.java, +            indexShard.start("post recovery from gateway, no translog");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/local/LocalIndexShardGateway.java, +            indexShard.start("post recovery from gateway, no translog");, +            indexShard.start("post recovery from gateway, no translog");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/none/NoneIndexShardGateway.java, +        indexShard.start("post recovery from gateway");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/service/IndexService.java, +public interface IndexService extends IndexComponent, Iterable<IndexShard> {]