[+++ b/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java, +++ b/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java, +++ b/src/test/java/org/elasticsearch/cluster/metadata/ToAndFromJsonMetaDataTests.java, +                                .put("setting2", "value2")), +                                .put("setting2", "value2")), +        assertThat(indexMetaData.aliases().size(), equalTo(2));, +        assertThat(indexMetaData.aliases().size(), equalTo(3));, +++ b/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java, +++ b/src/test/java/org/elasticsearch/cluster/metadata/ToAndFromJsonMetaDataTests.java, +                                .put("setting2", "value2")), +                                .put("setting2", "value2")), +        assertThat(indexMetaData.aliases().size(), equalTo(2));, +        assertThat(indexMetaData.aliases().size(), equalTo(3));, +++ b/src/test/java/org/elasticsearch/document/AliasedIndexDocumentActionsTests.java, +import org.elasticsearch.action.admin.indices.alias.Alias;, +, +        client().admin().indices().create(createIndexRequest("test1").alias(new Alias("test"))).actionGet();]