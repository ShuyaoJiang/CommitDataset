[+++ b/elasticsearch/x-pack/src/main/java/org/elasticsearch/xpack/notification/hipchat/HipChatAccount.java, +import org.elasticsearch.common.Nullable;, +import org.elasticsearch.xpack.common.http.HttpProxy;, +    public abstract SentMessages send(HipChatMessage message, @Nullable HttpProxy proxy);, +++ b/elasticsearch/x-pack/src/main/java/org/elasticsearch/xpack/notification/hipchat/HipChatAccount.java, +import org.elasticsearch.common.Nullable;, +import org.elasticsearch.xpack.common.http.HttpProxy;, +    public abstract SentMessages send(HipChatMessage message, @Nullable HttpProxy proxy);, +++ b/elasticsearch/x-pack/src/main/java/org/elasticsearch/xpack/notification/hipchat/HipChatMessage.java, +import java.util.Objects;, +        return Objects.equals(body, that.body) &&, +               Objects.deepEquals(rooms, that.rooms) &&, +               Objects.deepEquals(users, that.users) &&, +               Objects.equals(from, that.from) &&, +               Objects.equals(format, that.format) &&, +               Objects.equals(color, that.color) &&, +               Objects.equals(notify, that.notify);, +        @Nullable final TextTemplate color;, +            return Objects.equals(body, template.body) &&, +                   Objects.deepEquals(rooms, template.rooms) &&, +                   Objects.deepEquals(users, template.users) &&, +                   Objects.equals(from, template.from) &&, +                   Objects.equals(format, template.format) &&, +                   Objects.equals(color, template.color) &&, +                   Objects.equals(notify, template.notify);, +            return Objects.hash(body, rooms, users, from, format, color, notify);, +            @Nullable TextTemplate color;, +++ b/elasticsearch/x-pack/src/main/java/org/elasticsearch/xpack/notification/hipchat/HipChatAccount.java, +import org.elasticsearch.common.Nullable;, +import org.elasticsearch.xpack.common.http.HttpProxy;, +    public abstract SentMessages send(HipChatMessage message, @Nullable HttpProxy proxy);, +++ b/elasticsearch/x-pack/src/main/java/org/elasticsearch/xpack/notification/hipchat/HipChatMessage.java, +import java.util.Objects;, +        return Objects.equals(body, that.body) &&, +               Objects.deepEquals(rooms, that.rooms) &&, +               Objects.deepEquals(users, that.users) &&, +               Objects.equals(from, that.from) &&, +               Objects.equals(format, that.format) &&, +               Objects.equals(color, that.color) &&, +               Objects.equals(notify, that.notify);, +        @Nullable final TextTemplate color;, +            return Objects.equals(body, template.body) &&, +                   Objects.deepEquals(rooms, template.rooms) &&, +                   Objects.deepEquals(users, template.users) &&, +                   Objects.equals(from, template.from) &&, +                   Objects.equals(format, template.format) &&, +                   Objects.equals(color, template.color) &&, +                   Objects.equals(notify, template.notify);, +            return Objects.hash(body, rooms, users, from, format, color, notify);, +            @Nullable TextTemplate color;, +++ b/elasticsearch/x-pack/src/main/java/org/elasticsearch/xpack/notification/hipchat/HipChatService.java, +++ b/elasticsearch/x-pack/src/main/java/org/elasticsearch/xpack/notification/hipchat/HipChatAccount.java, +import org.elasticsearch.common.Nullable;, +import org.elasticsearch.xpack.common.http.HttpProxy;, +    public abstract SentMessages send(HipChatMessage message, @Nullable HttpProxy proxy);, +++ b/elasticsearch/x-pack/src/main/java/org/elasticsearch/xpack/notification/hipchat/HipChatMessage.java, +import java.util.Objects;, +        return Objects.equals(body, that.body) &&, +               Objects.deepEquals(rooms, that.rooms) &&, +               Objects.deepEquals(users, that.users) &&, +               Objects.equals(from, that.from) &&, +               Objects.equals(format, that.format) &&, +               Objects.equals(color, that.color) &&, +               Objects.equals(notify, that.notify);, +        @Nullable final TextTemplate color;, +            return Objects.equals(body, template.body) &&, +                   Objects.deepEquals(rooms, template.rooms) &&, +                   Objects.deepEquals(users, template.users) &&, +                   Objects.equals(from, template.from) &&, +                   Objects.equals(format, template.format) &&, +                   Objects.equals(color, template.color) &&, +                   Objects.equals(notify, template.notify);, +            return Objects.hash(body, rooms, users, from, format, color, notify);, +            @Nullable TextTemplate color;, +++ b/elasticsearch/x-pack/src/main/java/org/elasticsearch/xpack/notification/hipchat/HipChatService.java, +++ b/elasticsearch/x-pack/src/main/java/org/elasticsearch/xpack/notification/hipchat/IntegrationAccount.java, +import org.elasticsearch.xpack.common.http.HttpProxy;, +    public SentMessages send(HipChatMessage message, @Nullable HttpProxy proxy) {, +        HttpRequest request = buildRoomRequest(room, message, proxy);, +    public HttpRequest buildRoomRequest(String room, final HipChatMessage message, HttpProxy proxy) {, +        HttpRequest.Builder builder = server.httpRequest(), +                }));, +        if (proxy != null) {, +            builder.proxy(proxy);, +        }, +        return builder.build();, +++ b/elasticsearch/x-pack/src/main/java/org/elasticsearch/xpack/notification/hipchat/HipChatAccount.java, +import org.elasticsearch.common.Nullable;, +import org.elasticsearch.xpack.common.http.HttpProxy;, +    public abstract SentMessages send(HipChatMessage message, @Nullable HttpProxy proxy);, +++ b/elasticsearch/x-pack/src/main/java/org/elasticsearch/xpack/notification/hipchat/HipChatMessage.java, +import java.util.Objects;, +        return Objects.equals(body, that.body) &&, +               Objects.deepEquals(rooms, that.rooms) &&, +               Objects.deepEquals(users, that.users) &&, +               Objects.equals(from, that.from) &&, +               Objects.equals(format, that.format) &&, +               Objects.equals(color, that.color) &&, +               Objects.equals(notify, that.notify);, +        @Nullable final TextTemplate color;]