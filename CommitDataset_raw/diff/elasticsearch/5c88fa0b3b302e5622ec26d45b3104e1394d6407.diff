[+++ b/docs/en/sql/endpoints/sql-rest.asciidoc, +, +    "query": "SELECT * FROM library ORDER BY page_count DESC LIMIT 5", +}, +--------------------------------------------------, +// CONSOLE, +// TEST[setup:library], +, +Which returns:, +, +[source,text], +--------------------------------------------------, +     author      |        name        |  page_count   | release_date, +-----------------+--------------------+---------------+---------------, +Peter F. Hamilton|Pandora's Star      |768            |1078185600000, +Vernor Vinge     |A Fire Upon the Deep|613            |707356800000, +Frank Herbert    |Dune                |604            |-144720000000, +Alastair Reynolds|Revelation Space    |585            |953078400000, +James S.A. Corey |Leviathan Wakes     |561            |1306972800000, +--------------------------------------------------, +// TESTRESPONSE[_cat], +, +You can also choose to get results in a structured format by adding the `format` parameter. Currently supported formats:, +- text (default), +- json, +- smile, +- yaml, +- cbor, +, +Alternatively you can set the Accept HTTP header to the appropriate media format., +All formats above are supported, the GET parameter takes precedence over the header., +, +, +[source,js], +--------------------------------------------------, +POST /_sql?format=json, +{, +You can continue to the next page by sending back the `cursor` field. In, +case of text format the cursor is returned as `Cursor` http header., +POST /_sql?format=json, +[source,text], +    author     |                name                |  page_count   | release_date, +---------------+------------------------------------+---------------+---------------, +Douglas Adams  |The Hitchhiker's Guide to the Galaxy|180            |308534400000, +// TESTRESPONSE[_cat], +++ b/docs/en/sql/endpoints/sql-rest.asciidoc, +, +    "query": "SELECT * FROM library ORDER BY page_count DESC LIMIT 5", +}, +--------------------------------------------------, +// CONSOLE, +// TEST[setup:library], +, +Which returns:, +, +[source,text], +--------------------------------------------------, +     author      |        name        |  page_count   | release_date, +-----------------+--------------------+---------------+---------------, +Peter F. Hamilton|Pandora's Star      |768            |1078185600000, +Vernor Vinge     |A Fire Upon the Deep|613            |707356800000, +Frank Herbert    |Dune                |604            |-144720000000, +Alastair Reynolds|Revelation Space    |585            |953078400000, +James S.A. Corey |Leviathan Wakes     |561            |1306972800000, +--------------------------------------------------, +// TESTRESPONSE[_cat], +, +You can also choose to get results in a structured format by adding the `format` parameter. Currently supported formats:, +- text (default), +- json, +- smile, +- yaml, +- cbor, +, +Alternatively you can set the Accept HTTP header to the appropriate media format., +All formats above are supported, the GET parameter takes precedence over the header., +, +, +[source,js], +--------------------------------------------------, +POST /_sql?format=json, +{, +You can continue to the next page by sending back the `cursor` field. In, +case of text format the cursor is returned as `Cursor` http header., +POST /_sql?format=json, +[source,text], +    author     |                name                |  page_count   | release_date, +---------------+------------------------------------+---------------+---------------, +Douglas Adams  |The Hitchhiker's Guide to the Galaxy|180            |308534400000, +// TESTRESPONSE[_cat], +++ b/plugin/src/test/resources/rest-api-spec/api/xpack.sql.json, +        "params": {, +          "format": {, +            "type" : "string",, +            "description" : "a short version of the Accept header, e.g. json, yaml", +          }, +        }, +++ b/docs/en/sql/endpoints/sql-rest.asciidoc, +, +    "query": "SELECT * FROM library ORDER BY page_count DESC LIMIT 5"]