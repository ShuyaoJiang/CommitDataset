[+++ b/core/src/test/java/org/elasticsearch/bootstrap/MaxMapCountCheckTests.java, +import org.hamcrest.Matcher;, +import org.mockito.ArgumentMatcher;, +import static org.mockito.Matchers.argThat;, +        verify(logger).warn(argThat(argumentMatcher("I/O exception while trying to read [/proc/sys/vm/max_map_count]")), eq(ioException));, +        verify(logger).warn(argThat(argumentMatcher("unable to parse vm.max_map_count [eof]")), any(NumberFormatException.class));, +    private ArgumentMatcher<Supplier<?>> argumentMatcher(final String message) {, +        return new ArgumentMatcher<Supplier<?>>() {, +            @Override, +            public boolean matches(Object o) {, +                final Supplier<?> supplier = (Supplier<?>)o;, +                final ParameterizedMessage parameterizedMessage = (ParameterizedMessage) supplier.get();, +                return parameterizedMessage.getFormattedMessage().equals(message);, +            }, +        };, +    }, +]