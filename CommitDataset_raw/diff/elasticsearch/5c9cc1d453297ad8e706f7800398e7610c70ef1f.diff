[+++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/PrecisionAtN.java, +import java.util.Objects;, +        //builder.startObject(NAME); TODO Why does roundtripping fail with the name?, +        builder.startObject();, +    @Override, +    public final boolean equals(Object obj) {, +        if (this == obj) {, +            return true;, +        }, +        if (obj == null || getClass() != obj.getClass()) {, +            return false;, +        }, +        PrecisionAtN other = (PrecisionAtN) obj;, +        return Objects.equals(n, other.n);, +    }, +    , +    @Override, +    public final int hashCode() {, +        return Objects.hash(getClass(), n);, +    }, +, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/PrecisionAtN.java, +import java.util.Objects;, +        //builder.startObject(NAME); TODO Why does roundtripping fail with the name?, +        builder.startObject();, +    @Override, +    public final boolean equals(Object obj) {, +        if (this == obj) {, +            return true;, +        }, +        if (obj == null || getClass() != obj.getClass()) {, +            return false;, +        }, +        PrecisionAtN other = (PrecisionAtN) obj;, +        return Objects.equals(n, other.n);, +    }, +    , +    @Override, +    public final int hashCode() {, +        return Objects.hash(getClass(), n);, +    }, +, +++ b/modules/rank-eval/src/test/java/org/elasticsearch/index/rankeval/PrecisionAtNTests.java, +public class PrecisionAtNTests extends XContentRoundtripTestCase<PrecisionAtN> {, +, +    public void testXContentRoundtrip() throws IOException {, +        int position = randomIntBetween(0, 1000);, +, +        PrecisionAtN testItem = new PrecisionAtN(position);, +        roundtrip(testItem);, +    }]