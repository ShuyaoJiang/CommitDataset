[+++ b/docs/reference/mapping/fields/source-field.asciidoc, +* The <<docs-update,`update`>>, <<docs-update-by-query,`update_by_query`>>,, +and <<docs-reindex,`reindex`>> APIs., +++ b/docs/reference/mapping/fields/source-field.asciidoc, +* The <<docs-update,`update`>>, <<docs-update-by-query,`update_by_query`>>,, +and <<docs-reindex,`reindex`>> APIs., +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkIndexByScrollAction.java, +            if (doc.isSourceEmpty()) {, +                throw new IllegalArgumentException("[" + doc.index() + "][" + doc.type() + "][" + doc.id() + "] didn't store _source");, +            }, +++ b/docs/reference/mapping/fields/source-field.asciidoc, +* The <<docs-update,`update`>>, <<docs-update-by-query,`update_by_query`>>,, +and <<docs-reindex,`reindex`>> APIs., +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkIndexByScrollAction.java, +            if (doc.isSourceEmpty()) {, +                throw new IllegalArgumentException("[" + doc.index() + "][" + doc.type() + "][" + doc.id() + "] didn't store _source");, +            }, +++ b/modules/reindex/src/test/resources/rest-api-spec/test/reindex/20_validation.yaml, +            index: test, +          dest:, +            index: dest, +, +---, +"reindex without source gives useful error message":, +  - do:, +      indices.create:, +        index: test, +        body:, +          mappings:, +            test:, +              _source:, +                enabled: false, +  - do:, +      index:, +        index:  test, +        type:   test, +        id:     1, +        body:   { age: 23 }, +  - do:, +      indices.refresh: {}, +, +  - do:, +      catch: /\[test\]\[test\]\[1\] didn't store _source/, +      reindex:, +        body:, +          source:, +            index: test, +++ b/docs/reference/mapping/fields/source-field.asciidoc, +* The <<docs-update,`update`>>, <<docs-update-by-query,`update_by_query`>>,, +and <<docs-reindex,`reindex`>> APIs., +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkIndexByScrollAction.java, +            if (doc.isSourceEmpty()) {, +                throw new IllegalArgumentException("[" + doc.index() + "][" + doc.type() + "][" + doc.id() + "] didn't store _source");, +            }, +++ b/modules/reindex/src/test/resources/rest-api-spec/test/reindex/20_validation.yaml, +            index: test, +          dest:, +            index: dest, +, +---, +"reindex without source gives useful error message":, +  - do:, +      indices.create:, +        index: test, +        body:, +          mappings:, +            test:, +              _source:, +                enabled: false, +  - do:, +      index:, +        index:  test, +        type:   test, +        id:     1, +        body:   { age: 23 }, +  - do:, +      indices.refresh: {}, +, +  - do:, +      catch: /\[test\]\[test\]\[1\] didn't store _source/, +      reindex:, +        body:, +          source:, +            index: test, +++ b/modules/reindex/src/test/resources/rest-api-spec/test/update_by_query/20_validation.yaml, +, +---, +"update_by_query without source gives useful error message":, +  - do:, +      indices.create:, +        index: test, +        body:, +          mappings:, +            test:, +              _source:, +                enabled: false, +  - do:, +      index:, +        index:  test, +        type:   test]