[+++ b/core/src/main/java/org/elasticsearch/common/blobstore/BlobPath.java, +        if (p.isEmpty() || p.endsWith(SEPARATOR)) {, +++ b/core/src/main/java/org/elasticsearch/common/blobstore/BlobPath.java, +        if (p.isEmpty() || p.endsWith(SEPARATOR)) {, +++ b/core/src/test/java/org/elasticsearch/common/blobstore/BlobPathTests.java, +        path = path.add("d/");, +        assertThat(path.buildAsString(), is("a/b/c/d/"));]