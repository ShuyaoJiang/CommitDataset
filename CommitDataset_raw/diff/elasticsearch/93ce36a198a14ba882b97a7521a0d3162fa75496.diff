[+++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]client[/\\]transport[/\\]TransportClient.java" checks="LineLength" />\, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]client[/\\]transport[/\\]TransportClient.java" checks="LineLength" />\, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java, +import org.elasticsearch.cluster.node.DiscoveryNode;, +import java.util.stream.Collectors;, +            builder.array("roles", nodeInfo.getNode().getRoles().stream().map(DiscoveryNode.Role::getRoleName), +                    .collect(Collectors.toList()).toArray());, +, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]client[/\\]transport[/\\]TransportClient.java" checks="LineLength" />\, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java, +import org.elasticsearch.cluster.node.DiscoveryNode;, +import java.util.stream.Collectors;, +            builder.array("roles", nodeInfo.getNode().getRoles().stream().map(DiscoveryNode.Role::getRoleName), +                    .collect(Collectors.toList()).toArray());, +, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/liveness/LivenessResponse.java, +        node = in.readOptionalWriteable(DiscoveryNode::new);, +        out.writeOptionalWriteable(node);, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]client[/\\]transport[/\\]TransportClient.java" checks="LineLength" />\, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java, +import org.elasticsearch.cluster.node.DiscoveryNode;, +import java.util.stream.Collectors;, +            builder.array("roles", nodeInfo.getNode().getRoles().stream().map(DiscoveryNode.Role::getRoleName), +                    .collect(Collectors.toList()).toArray());, +, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/liveness/LivenessResponse.java, +        node = in.readOptionalWriteable(DiscoveryNode::new);, +        out.writeOptionalWriteable(node);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java, +import java.util.stream.Collectors;, +            builder.array("roles", getNode().getRoles().stream().map(DiscoveryNode.Role::getRoleName), +                    .collect(Collectors.toList()).toArray());, +, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]client[/\\]transport[/\\]TransportClient.java" checks="LineLength" />\, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java, +import org.elasticsearch.cluster.node.DiscoveryNode;, +import java.util.stream.Collectors;, +            builder.array("roles", nodeInfo.getNode().getRoles().stream().map(DiscoveryNode.Role::getRoleName), +                    .collect(Collectors.toList()).toArray());, +, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/liveness/LivenessResponse.java, +        node = in.readOptionalWriteable(DiscoveryNode::new);, +        out.writeOptionalWriteable(node);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java, +import java.util.stream.Collectors;, +            builder.array("roles", getNode().getRoles().stream().map(DiscoveryNode.Role::getRoleName), +                    .collect(Collectors.toList()).toArray());, +, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/ListTasksResponse.java, +import java.util.stream.Collectors;, +            builder.array("roles", node.getRoles().stream().map(DiscoveryNode.Role::getRoleName), +                    .collect(Collectors.toList()).toArray());, +, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]client[/\\]transport[/\\]TransportClient.java" checks="LineLength" />\, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java, +import org.elasticsearch.cluster.node.DiscoveryNode;, +import java.util.stream.Collectors;, +            builder.array("roles", nodeInfo.getNode().getRoles().stream().map(DiscoveryNode.Role::getRoleName), +                    .collect(Collectors.toList()).toArray());, +, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/liveness/LivenessResponse.java, +        node = in.readOptionalWriteable(DiscoveryNode::new);, +        out.writeOptionalWriteable(node);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java, +import java.util.stream.Collectors;, +            builder.array("roles", getNode().getRoles().stream().map(DiscoveryNode.Role::getRoleName), +                    .collect(Collectors.toList()).toArray());, +, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/ListTasksResponse.java, +import java.util.stream.Collectors;, +            builder.array("roles", node.getRoles().stream().map(DiscoveryNode.Role::getRoleName), +                    .collect(Collectors.toList()).toArray());, +, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/TaskInfo.java, +        node = new DiscoveryNode(in);, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]client[/\\]transport[/\\]TransportClient.java" checks="LineLength" />\, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java, +import org.elasticsearch.cluster.node.DiscoveryNode;, +import java.util.stream.Collectors;, +            builder.array("roles", nodeInfo.getNode().getRoles().stream().map(DiscoveryNode.Role::getRoleName), +                    .collect(Collectors.toList()).toArray());, +, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/liveness/LivenessResponse.java, +        node = in.readOptionalWriteable(DiscoveryNode::new);, +        out.writeOptionalWriteable(node);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java, +import java.util.stream.Collectors;, +            builder.array("roles", getNode().getRoles().stream().map(DiscoveryNode.Role::getRoleName), +                    .collect(Collectors.toList()).toArray());, +, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/tasks/list/ListTasksResponse.java, +import java.util.stream.Collectors;, +            builder.array("roles", node.getRoles().stream().map(DiscoveryNode.Role::getRoleName)]