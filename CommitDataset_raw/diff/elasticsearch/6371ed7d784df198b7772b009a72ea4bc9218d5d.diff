[+++ b/.idea/modules.xml, +      <module fileurl="file://$PROJECT_DIR$/.idea/modules//plugin-lang-ruby.iml" filepath="$PROJECT_DIR$/.idea/modules//plugin-lang-ruby.iml" />, +++ b/.idea/modules.xml, +      <module fileurl="file://$PROJECT_DIR$/.idea/modules//plugin-lang-ruby.iml" filepath="$PROJECT_DIR$/.idea/modules//plugin-lang-ruby.iml" />, +++ b/.idea/modules/plugin-lang-ruby.iml, +<?xml version="1.0" encoding="UTF-8"?>, +<module type="JAVA_MODULE" version="4">, +  <component name="NewModuleRootManager" inherit-compiler-output="false">, +    <output url="file://$MODULE_DIR$/../../plugins/lang/ruby/build/classes/main" />, +    <output-test url="file://$MODULE_DIR$/../../plugins/lang/ruby/build/classes/test" />, +    <exclude-output />, +    <content url="file://$MODULE_DIR$/../../plugins/lang/ruby">, +      <sourceFolder url="file://$MODULE_DIR$/../../plugins/lang/ruby/src/main/java" isTestSource="false" />, +      <sourceFolder url="file://$MODULE_DIR$/../../plugins/lang/ruby/src/test/java" isTestSource="true" />, +    </content>, +    <orderEntry type="inheritedJdk" />, +    <orderEntry type="sourceFolder" forTests="false" />, +    <orderEntry type="module" module-name="elasticsearch" />, +    <orderEntry type="module-library">, +      <library name="jruby">, +        <CLASSES>, +          <root url="jar://$GRADLE_REPOSITORY$/org.jruby/jruby-complete/jars/jruby-complete-1.5.3.jar!/" />, +        </CLASSES>, +        <JAVADOC />, +        <SOURCES />, +      </library>, +    </orderEntry>, +    <orderEntry type="module" module-name="test-testng" scope="TEST" />, +    <orderEntry type="library" scope="TEST" name="testng" level="project" />, +    <orderEntry type="library" scope="TEST" name="hamcrest" level="project" />, +  </component>, +</module>, +, +++ b/.idea/modules.xml, +      <module fileurl="file://$PROJECT_DIR$/.idea/modules//plugin-lang-ruby.iml" filepath="$PROJECT_DIR$/.idea/modules//plugin-lang-ruby.iml" />, +++ b/.idea/modules/plugin-lang-ruby.iml, +<?xml version="1.0" encoding="UTF-8"?>, +<module type="JAVA_MODULE" version="4">, +  <component name="NewModuleRootManager" inherit-compiler-output="false">, +    <output url="file://$MODULE_DIR$/../../plugins/lang/ruby/build/classes/main" />, +    <output-test url="file://$MODULE_DIR$/../../plugins/lang/ruby/build/classes/test" />, +    <exclude-output />, +    <content url="file://$MODULE_DIR$/../../plugins/lang/ruby">, +      <sourceFolder url="file://$MODULE_DIR$/../../plugins/lang/ruby/src/main/java" isTestSource="false" />, +      <sourceFolder url="file://$MODULE_DIR$/../../plugins/lang/ruby/src/test/java" isTestSource="true" />, +    </content>, +    <orderEntry type="inheritedJdk" />, +    <orderEntry type="sourceFolder" forTests="false" />, +    <orderEntry type="module" module-name="elasticsearch" />, +    <orderEntry type="module-library">, +      <library name="jruby">, +        <CLASSES>, +          <root url="jar://$GRADLE_REPOSITORY$/org.jruby/jruby-complete/jars/jruby-complete-1.5.3.jar!/" />, +        </CLASSES>, +        <JAVADOC />, +        <SOURCES />, +      </library>, +    </orderEntry>, +    <orderEntry type="module" module-name="test-testng" scope="TEST" />, +    <orderEntry type="library" scope="TEST" name="testng" level="project" />, +    <orderEntry type="library" scope="TEST" name="hamcrest" level="project" />, +  </component>, +</module>, +, +++ b/plugins/lang/ruby/build.gradle, +dependsOn(':elasticsearch'), +, +apply plugin: 'java', +apply plugin: 'maven', +, +archivesBaseName = "elasticsearch-lang-ruby", +, +explodedDistDir = new File(distsDir, 'exploded'), +, +configurations.compile.transitive = true, +configurations.testCompile.transitive = true, +, +// no need to use the resource dir, +sourceSets.main.resources.srcDirs 'src/main/java', +sourceSets.test.resources.srcDirs 'src/test/java', +, +// add the source files to the dist jar, +//jar {, +//    from sourceSets.main.allSource, +//}, +, +configurations {, +    dists, +    distLib {, +        visible = false, +        transitive = false, +    }, +}, +, +dependencies {, +    compile project(':elasticsearch'), +, +    compile('org.jruby:jruby-complete:1.5.3'), +    distLib('org.jruby:jruby-complete:1.5.3') { transitive = false }, +]