[+++ b/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java, +import java.util.concurrent.atomic.AtomicLong;, +    private final AtomicLong recoveryIdGenerator = new AtomicLong();, +                        false, indexShard.store().list(), type, recoveryIdGenerator.incrementAndGet());, +++ b/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java, +import java.util.concurrent.atomic.AtomicLong;, +    private final AtomicLong recoveryIdGenerator = new AtomicLong();, +                        false, indexShard.store().list(), type, recoveryIdGenerator.incrementAndGet());, +++ b/src/main/java/org/elasticsearch/indices/recovery/StartRecoveryRequest.java, +                                StoreFileMetaData> existingFiles, RecoveryState.Type recoveryType, long recoveryId) {, +        this.recoveryId = recoveryId;]