[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java, +            if (!Float.isNaN(queryResultProvider.queryResult().topDocs().getMaxScore())) {, +        }, +        if (Float.isInfinite(maxScore)) {, +            maxScore = Float.NaN;, +        }]