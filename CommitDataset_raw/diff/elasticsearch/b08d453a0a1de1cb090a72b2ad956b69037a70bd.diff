[+++ b/plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImpl.java, +        if (CLOUD_EC2.PROXY_HOST_SETTING.exists(settings)) {, +        if (CLOUD_EC2.ENDPOINT_SETTING.exists(settings)) {, +            final String endpoint = CLOUD_EC2.ENDPOINT_SETTING.get(settings);, +            final String region = CLOUD_EC2.REGION_SETTING.get(settings);, +            final String endpoint;, +++ b/plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImpl.java, +        if (CLOUD_EC2.PROXY_HOST_SETTING.exists(settings)) {, +        if (CLOUD_EC2.ENDPOINT_SETTING.exists(settings)) {, +            final String endpoint = CLOUD_EC2.ENDPOINT_SETTING.get(settings);, +            final String region = CLOUD_EC2.REGION_SETTING.get(settings);, +            final String endpoint;, +++ b/plugins/discovery-ec2/src/test/java/org/elasticsearch/cloud/aws/AbstractAwsTestCase.java, +                .put(Environment.PATH_HOME_SETTING.getKey(), createTempDir());]