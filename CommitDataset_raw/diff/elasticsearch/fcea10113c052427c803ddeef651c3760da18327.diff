[+++ b/src/main/java/org/elasticsearch/index/engine/Engine.java, +    public abstract SyncedFlushResult syncFlush(String syncId, CommitId expectedCommitId) throws EngineException;, +++ b/src/main/java/org/elasticsearch/index/engine/Engine.java, +    public abstract SyncedFlushResult syncFlush(String syncId, CommitId expectedCommitId) throws EngineException;, +++ b/src/main/java/org/elasticsearch/index/engine/InternalEngine.java, +    public SyncedFlushResult syncFlush(String syncId, CommitId expectedCommitId) throws EngineException {, +++ b/src/main/java/org/elasticsearch/index/engine/Engine.java, +    public abstract SyncedFlushResult syncFlush(String syncId, CommitId expectedCommitId) throws EngineException;, +++ b/src/main/java/org/elasticsearch/index/engine/InternalEngine.java, +    public SyncedFlushResult syncFlush(String syncId, CommitId expectedCommitId) throws EngineException {, +++ b/src/main/java/org/elasticsearch/index/engine/ShadowEngine.java, +    public SyncedFlushResult syncFlush(String syncId, CommitId expectedCommitId) {, +++ b/src/main/java/org/elasticsearch/index/engine/Engine.java, +    public abstract SyncedFlushResult syncFlush(String syncId, CommitId expectedCommitId) throws EngineException;, +++ b/src/main/java/org/elasticsearch/index/engine/InternalEngine.java, +    public SyncedFlushResult syncFlush(String syncId, CommitId expectedCommitId) throws EngineException {, +++ b/src/main/java/org/elasticsearch/index/engine/ShadowEngine.java, +    public SyncedFlushResult syncFlush(String syncId, CommitId expectedCommitId) {, +++ b/src/main/java/org/elasticsearch/index/shard/IndexShard.java, +    public Engine.SyncedFlushResult syncFlush(String syncId, Engine.CommitId expectedCommitId) {, +        return engine().syncFlush(syncId, expectedCommitId);, +++ b/src/main/java/org/elasticsearch/index/engine/Engine.java, +    public abstract SyncedFlushResult syncFlush(String syncId, CommitId expectedCommitId) throws EngineException;, +++ b/src/main/java/org/elasticsearch/index/engine/InternalEngine.java, +    public SyncedFlushResult syncFlush(String syncId, CommitId expectedCommitId) throws EngineException {, +++ b/src/main/java/org/elasticsearch/index/engine/ShadowEngine.java, +    public SyncedFlushResult syncFlush(String syncId, CommitId expectedCommitId) {, +++ b/src/main/java/org/elasticsearch/index/shard/IndexShard.java, +    public Engine.SyncedFlushResult syncFlush(String syncId, Engine.CommitId expectedCommitId) {, +        return engine().syncFlush(syncId, expectedCommitId);, +++ b/src/main/java/org/elasticsearch/indices/SyncedFlushService.java, +        Engine.SyncedFlushResult result = indexShard.syncFlush(request.syncId(), request.expectedCommitId());, +++ b/src/main/java/org/elasticsearch/index/engine/Engine.java, +    public abstract SyncedFlushResult syncFlush(String syncId, CommitId expectedCommitId) throws EngineException;, +++ b/src/main/java/org/elasticsearch/index/engine/InternalEngine.java, +    public SyncedFlushResult syncFlush(String syncId, CommitId expectedCommitId) throws EngineException {, +++ b/src/main/java/org/elasticsearch/index/engine/ShadowEngine.java, +    public SyncedFlushResult syncFlush(String syncId, CommitId expectedCommitId) {, +++ b/src/main/java/org/elasticsearch/index/shard/IndexShard.java, +    public Engine.SyncedFlushResult syncFlush(String syncId, Engine.CommitId expectedCommitId) {, +        return engine().syncFlush(syncId, expectedCommitId);, +++ b/src/main/java/org/elasticsearch/indices/SyncedFlushService.java, +        Engine.SyncedFlushResult result = indexShard.syncFlush(request.syncId(), request.expectedCommitId());, +++ b/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java, +        assertThat("should fail to sync flush with wrong id (but no docs)", engine.syncFlush(syncId + "1", wrongId),, +        assertThat("should fail to sync flush with right id but pending doc", engine.syncFlush(syncId + "2", commitID),, +        assertThat("should succeed to flush commit with right id and no pending doc", engine.syncFlush(syncId, commitID),]