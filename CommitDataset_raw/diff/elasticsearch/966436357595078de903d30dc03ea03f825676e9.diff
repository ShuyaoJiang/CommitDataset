[+++ b/qa/sql/src/main/java/org/elasticsearch/xpack/qa/sql/embed/JdbcProtoHandler.java, +import org.elasticsearch.xpack.sql.analysis.index.IndexResolver;, +++ b/qa/sql/src/main/java/org/elasticsearch/xpack/qa/sql/embed/JdbcProtoHandler.java, +import org.elasticsearch.xpack.sql.analysis.index.IndexResolver;, +++ b/qa/sql/src/main/java/org/elasticsearch/xpack/qa/sql/embed/ProtoHandler.java, +import org.elasticsearch.xpack.sql.analysis.index.IndexResolver;, +++ b/qa/sql/src/main/java/org/elasticsearch/xpack/qa/sql/embed/JdbcProtoHandler.java, +import org.elasticsearch.xpack.sql.analysis.index.IndexResolver;, +++ b/qa/sql/src/main/java/org/elasticsearch/xpack/qa/sql/embed/ProtoHandler.java, +import org.elasticsearch.xpack.sql.analysis.index.IndexResolver;, +++ b/sql/server/src/main/java/org/elasticsearch/xpack/sql/analysis/analyzer/Analyzer.java, +import org.elasticsearch.xpack.sql.analysis.index.GetIndexResult;, +            GetIndexResult index = SqlSession.currentContext().getIndexResult;, +            assert index.matches(table.index());, +            LogicalPlan logicalPlan = new EsRelation(plan.location(), index.get());, +            SubQueryAlias sa = new SubQueryAlias(plan.location(), logicalPlan, table.index());, +++ b/qa/sql/src/main/java/org/elasticsearch/xpack/qa/sql/embed/JdbcProtoHandler.java, +import org.elasticsearch.xpack.sql.analysis.index.IndexResolver;, +++ b/qa/sql/src/main/java/org/elasticsearch/xpack/qa/sql/embed/ProtoHandler.java, +import org.elasticsearch.xpack.sql.analysis.index.IndexResolver;, +++ b/sql/server/src/main/java/org/elasticsearch/xpack/sql/analysis/analyzer/Analyzer.java, +import org.elasticsearch.xpack.sql.analysis.index.GetIndexResult;, +            GetIndexResult index = SqlSession.currentContext().getIndexResult;, +            assert index.matches(table.index());, +            LogicalPlan logicalPlan = new EsRelation(plan.location(), index.get());, +            SubQueryAlias sa = new SubQueryAlias(plan.location(), logicalPlan, table.index());, +++ /dev/null, +++ b/qa/sql/src/main/java/org/elasticsearch/xpack/qa/sql/embed/JdbcProtoHandler.java, +import org.elasticsearch.xpack.sql.analysis.index.IndexResolver;, +++ b/qa/sql/src/main/java/org/elasticsearch/xpack/qa/sql/embed/ProtoHandler.java, +import org.elasticsearch.xpack.sql.analysis.index.IndexResolver;, +++ b/sql/server/src/main/java/org/elasticsearch/xpack/sql/analysis/analyzer/Analyzer.java, +import org.elasticsearch.xpack.sql.analysis.index.GetIndexResult;, +            GetIndexResult index = SqlSession.currentContext().getIndexResult;, +            assert index.matches(table.index());, +            LogicalPlan logicalPlan = new EsRelation(plan.location(), index.get());, +            SubQueryAlias sa = new SubQueryAlias(plan.location(), logicalPlan, table.index());, +++ /dev/null, +++ /dev/null, +++ b/qa/sql/src/main/java/org/elasticsearch/xpack/qa/sql/embed/JdbcProtoHandler.java, +import org.elasticsearch.xpack.sql.analysis.index.IndexResolver;, +++ b/qa/sql/src/main/java/org/elasticsearch/xpack/qa/sql/embed/ProtoHandler.java, +import org.elasticsearch.xpack.sql.analysis.index.IndexResolver;, +++ b/sql/server/src/main/java/org/elasticsearch/xpack/sql/analysis/analyzer/Analyzer.java, +import org.elasticsearch.xpack.sql.analysis.index.GetIndexResult;, +            GetIndexResult index = SqlSession.currentContext().getIndexResult;, +            assert index.matches(table.index());, +            LogicalPlan logicalPlan = new EsRelation(plan.location(), index.get());, +            SubQueryAlias sa = new SubQueryAlias(plan.location(), logicalPlan, table.index());, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/qa/sql/src/main/java/org/elasticsearch/xpack/qa/sql/embed/JdbcProtoHandler.java, +import org.elasticsearch.xpack.sql.analysis.index.IndexResolver;, +++ b/qa/sql/src/main/java/org/elasticsearch/xpack/qa/sql/embed/ProtoHandler.java, +import org.elasticsearch.xpack.sql.analysis.index.IndexResolver;, +++ b/sql/server/src/main/java/org/elasticsearch/xpack/sql/analysis/analyzer/Analyzer.java, +import org.elasticsearch.xpack.sql.analysis.index.GetIndexResult;, +            GetIndexResult index = SqlSession.currentContext().getIndexResult;, +            assert index.matches(table.index());, +            LogicalPlan logicalPlan = new EsRelation(plan.location(), index.get());, +            SubQueryAlias sa = new SubQueryAlias(plan.location(), logicalPlan, table.index());, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/qa/sql/src/main/java/org/elasticsearch/xpack/qa/sql/embed/JdbcProtoHandler.java, +import org.elasticsearch.xpack.sql.analysis.index.IndexResolver;, +++ b/qa/sql/src/main/java/org/elasticsearch/xpack/qa/sql/embed/ProtoHandler.java, +import org.elasticsearch.xpack.sql.analysis.index.IndexResolver;, +++ b/sql/server/src/main/java/org/elasticsearch/xpack/sql/analysis/analyzer/Analyzer.java, +import org.elasticsearch.xpack.sql.analysis.index.GetIndexResult;, +            GetIndexResult index = SqlSession.currentContext().getIndexResult;, +            assert index.matches(table.index());, +            LogicalPlan logicalPlan = new EsRelation(plan.location(), index.get());, +            SubQueryAlias sa = new SubQueryAlias(plan.location(), logicalPlan, table.index());, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/sql/server/src/main/java/org/elasticsearch/xpack/sql/analysis/index/EsIndex.java, +/*, + * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one, + * or more contributor license agreements. Licensed under the Elastic License;, + * you may not use this file except in compliance with the Elastic License., + */, +package org.elasticsearch.xpack.sql.analysis.index;, +, +import org.elasticsearch.xpack.sql.type.DataType;, +, +import java.util.Map;, +, +public class EsIndex {, +, +    private final String name;, +    private final Map<String, DataType> mapping;, +, +    public EsIndex(String name, Map<String, DataType> mapping) {, +        assert name != null;, +        assert mapping != null;]