[+++ b/modules/benchmark/micro/src/main/java/org/elasticsearch/benchmark/trove/StringMapAdjustOrPutBenchmark.java, +import org.elasticsearch.common.trove.map.hash.TIntObjectHashMap;, +        int NUMBER_OF_KEYS = (int) SizeValue.parseSizeValue("20").singles();, +, +        // now test with THashMap, +        stopWatch = new StopWatch().start();, +        TIntObjectHashMap<IntEntry> tIntMap = new TIntObjectHashMap<IntEntry>();, +        for (long iter = 0; iter < ITERATIONS; iter++) {, +            if (REUSE) {, +                tIntMap.clear();, +            } else {, +                tIntMap = new TIntObjectHashMap<IntEntry>();, +            }, +            for (long i = 0; i < PUT_OPERATIONS; i++) {, +                int key = iValues[(int) (i % NUMBER_OF_KEYS)];, +                IntEntry intEntry = tIntMap.get(key);, +                if (intEntry == null) {, +                    intEntry = new IntEntry(key, 1);, +                    tIntMap.put(key, intEntry);, +                } else {, +                    intEntry.counter++;, +                }, +            }, +        }, +, +        tIntMap.clear();, +        tIntMap = null;, +, +        stopWatch.stop();, +        System.out.println("TIntObjectHashMap: " + stopWatch.totalTime() + ", " + stopWatch.totalTime().millisFrac() / ITERATIONS + "ms");, +, +    static class IntEntry {, +        int key;, +        int counter;, +, +        IntEntry(int key, int counter) {, +            this.key = key;, +            this.counter = counter;, +        }, +    }]