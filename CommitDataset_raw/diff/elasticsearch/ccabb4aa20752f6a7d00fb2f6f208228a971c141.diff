[+++ b/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java, +                        DiscoveryNodeService discoveryNodeService, ZenPingService pingService, Version version,, +                        DiscoverySettings discoverySettings) {, +                assert !newClusterState.blocks().hasGlobalBlock(discoverySettings.getNoMasterBlock()) : "received a cluster state with a master block";, +                        if (currentState.blocks().hasGlobalBlock(discoverySettings.getNoMasterBlock())) {]