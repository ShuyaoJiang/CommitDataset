[+++ b/.ci/java-versions.properties, +++ b/.ci/java-versions.properties, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +        if (bwcVersion != null && bwcVersion.before("6.5.0-SNAPSHOT")) {, +            return numNodes > 1 ? numNodes : -1, +        } else {, +            return numNodes > 1 ? numNodes.intdiv(2) + 1 : -1, +        }, +++ b/.ci/java-versions.properties, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +        if (bwcVersion != null && bwcVersion.before("6.5.0-SNAPSHOT")) {, +            return numNodes > 1 ? numNodes : -1, +        } else {, +            return numNodes > 1 ? numNodes.intdiv(2) + 1 : -1, +        }, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        if (esConfig.containsKey('discovery.zen.master_election.wait_for_joins_timeout') == false) {, +            // If a node decides to become master based on partial information from the pinging, don't let it hang for 30 seconds to correct, +            // its mistake. Instead, only wait 5s to do another round of pinging., +            // This is necessary since we use 30s as the default timeout in REST requests waiting for cluster formation, +            // so we need to bail quicker than the default 30s for the cluster to form in time., +            esConfig['discovery.zen.master_election.wait_for_joins_timeout'] = '5s', +        }, +++ b/.ci/java-versions.properties, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +        if (bwcVersion != null && bwcVersion.before("6.5.0-SNAPSHOT")) {, +            return numNodes > 1 ? numNodes : -1, +        } else {, +            return numNodes > 1 ? numNodes.intdiv(2) + 1 : -1, +        }, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        if (esConfig.containsKey('discovery.zen.master_election.wait_for_joins_timeout') == false) {, +            // If a node decides to become master based on partial information from the pinging, don't let it hang for 30 seconds to correct, +            // its mistake. Instead, only wait 5s to do another round of pinging., +            // This is necessary since we use 30s as the default timeout in REST requests waiting for cluster formation, +            // so we need to bail quicker than the default 30s for the cluster to form in time., +            esConfig['discovery.zen.master_election.wait_for_joins_timeout'] = '5s', +        }, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/.ci/java-versions.properties, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +        if (bwcVersion != null && bwcVersion.before("6.5.0-SNAPSHOT")) {, +            return numNodes > 1 ? numNodes : -1, +        } else {, +            return numNodes > 1 ? numNodes.intdiv(2) + 1 : -1, +        }, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        if (esConfig.containsKey('discovery.zen.master_election.wait_for_joins_timeout') == false) {, +            // If a node decides to become master based on partial information from the pinging, don't let it hang for 30 seconds to correct, +            // its mistake. Instead, only wait 5s to do another round of pinging., +            // This is necessary since we use 30s as the default timeout in REST requests waiting for cluster formation, +            // so we need to bail quicker than the default 30s for the cluster to form in time., +            esConfig['discovery.zen.master_election.wait_for_joins_timeout'] = '5s', +        }, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ /dev/null, +++ b/.ci/java-versions.properties, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +        if (bwcVersion != null && bwcVersion.before("6.5.0-SNAPSHOT")) {, +            return numNodes > 1 ? numNodes : -1, +        } else {, +            return numNodes > 1 ? numNodes.intdiv(2) + 1 : -1, +        }, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        if (esConfig.containsKey('discovery.zen.master_election.wait_for_joins_timeout') == false) {, +            // If a node decides to become master based on partial information from the pinging, don't let it hang for 30 seconds to correct, +            // its mistake. Instead, only wait 5s to do another round of pinging., +            // This is necessary since we use 30s as the default timeout in REST requests waiting for cluster formation, +            // so we need to bail quicker than the default 30s for the cluster to form in time., +            esConfig['discovery.zen.master_election.wait_for_joins_timeout'] = '5s', +        }, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ /dev/null, +++ /dev/null, +++ b/.ci/java-versions.properties, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +        if (bwcVersion != null && bwcVersion.before("6.5.0-SNAPSHOT")) {, +            return numNodes > 1 ? numNodes : -1, +        } else {, +            return numNodes > 1 ? numNodes.intdiv(2) + 1 : -1, +        }, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        if (esConfig.containsKey('discovery.zen.master_election.wait_for_joins_timeout') == false) {, +            // If a node decides to become master based on partial information from the pinging, don't let it hang for 30 seconds to correct, +            // its mistake. Instead, only wait 5s to do another round of pinging., +            // This is necessary since we use 30s as the default timeout in REST requests waiting for cluster formation, +            // so we need to bail quicker than the default 30s for the cluster to form in time., +            esConfig['discovery.zen.master_election.wait_for_joins_timeout'] = '5s', +        }, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ /dev/null, +++ /dev/null, +++ b/client/rest-high-level/src/main/java/org/elasticsearch/client/MLRequestConverters.java, +import org.elasticsearch.client.ml.UpdateDatafeedRequest;, +    static Request updateDatafeed(UpdateDatafeedRequest updateDatafeedRequest) throws IOException {, +        String endpoint = new EndpointBuilder(), +            .addPathPartAsIs("_xpack"), +            .addPathPartAsIs("ml"), +            .addPathPartAsIs("datafeeds"), +            .addPathPart(updateDatafeedRequest.getDatafeedUpdate().getId())]