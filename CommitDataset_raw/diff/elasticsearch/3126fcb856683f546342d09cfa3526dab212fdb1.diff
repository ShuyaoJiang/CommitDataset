[+++ b/elasticsearch/x-pack/license-plugin/src/test/java/org/elasticsearch/license/plugin/core/AbstractLicenseeTestCase.java, +import java.util.Locale;, +        assertThat(fromToMessage(fromMode, toMode), messages.length, equalTo(0));, +    /**, +     * Get a message to show with assertions for license transition., +     *, +     * @param fromMode Coming "from" mode, +     * @param toMode Going "to" mode, +     * @return Never {@code null}., +     */, +    public static String fromToMessage(OperationMode fromMode, OperationMode toMode) {, +        return String.format(Locale.ROOT, "From [%s] to [%s]", fromMode, toMode);, +    }, +, +++ b/elasticsearch/x-pack/license-plugin/src/test/java/org/elasticsearch/license/plugin/core/AbstractLicenseeTestCase.java, +import java.util.Locale;, +        assertThat(fromToMessage(fromMode, toMode), messages.length, equalTo(0));, +    /**, +     * Get a message to show with assertions for license transition., +     *, +     * @param fromMode Coming "from" mode, +     * @param toMode Going "to" mode, +     * @return Never {@code null}., +     */, +    public static String fromToMessage(OperationMode fromMode, OperationMode toMode) {, +        return String.format(Locale.ROOT, "From [%s] to [%s]", fromMode, toMode);, +    }, +, +++ b/elasticsearch/x-pack/marvel/src/test/java/org/elasticsearch/marvel/license/MarvelLicenseeTests.java, +        OperationMode from = randomModeExcept(OperationMode.BASIC);, +        OperationMode to = OperationMode.BASIC;, +, +        String[] messages = ackLicenseChange(from, to, licensee);, +        assertThat(fromToMessage(from, to), messages.length, equalTo(2));, +++ b/elasticsearch/x-pack/license-plugin/src/test/java/org/elasticsearch/license/plugin/core/AbstractLicenseeTestCase.java, +import java.util.Locale;, +        assertThat(fromToMessage(fromMode, toMode), messages.length, equalTo(0));, +    /**, +     * Get a message to show with assertions for license transition., +     *, +     * @param fromMode Coming "from" mode, +     * @param toMode Going "to" mode, +     * @return Never {@code null}., +     */, +    public static String fromToMessage(OperationMode fromMode, OperationMode toMode) {, +        return String.format(Locale.ROOT, "From [%s] to [%s]", fromMode, toMode);, +    }, +, +++ b/elasticsearch/x-pack/marvel/src/test/java/org/elasticsearch/marvel/license/MarvelLicenseeTests.java, +        OperationMode from = randomModeExcept(OperationMode.BASIC);, +        OperationMode to = OperationMode.BASIC;, +, +        String[] messages = ackLicenseChange(from, to, licensee);, +        assertThat(fromToMessage(from, to), messages.length, equalTo(2));, +++ b/elasticsearch/x-pack/shield/src/test/java/org/elasticsearch/shield/license/ShieldLicenseeTests.java, +    public void testAcknowledgementMessagesFromBasicToAnyNotGoldIsNoOp() {, +        assertEmptyAck(OperationMode.BASIC, randomModeExcept(OperationMode.GOLD), this::buildLicensee);, +        OperationMode from = randomTrialStandardGoldOrPlatinumMode();, +        OperationMode to = OperationMode.BASIC;, +, +        String[] messages = ackLicenseChange(from, to, this::buildLicensee);, +        assertThat(fromToMessage(from, to), messages.length, equalTo(3));]