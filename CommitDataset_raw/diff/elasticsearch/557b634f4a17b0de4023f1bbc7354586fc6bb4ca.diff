[+++ b/src/main/java/org/elasticsearch/common/lucene/index/FilterableTermsEnum.java, +    public FilterableTermsEnum(IndexReader reader, String field, int docsEnumFlag, @Nullable final Filter filter) throws IOException {, +        ApplyAcceptedDocsFilter acceptedDocsFilter = filter == null ? null : new ApplyAcceptedDocsFilter(filter);, +            if (acceptedDocsFilter != null) {, +                if (acceptedDocsFilter.filter() == Queries.MATCH_ALL_FILTER) {, +                    DocIdSet docIdSet = acceptedDocsFilter.getDocIdSet(context, context.reader().getLiveDocs());]