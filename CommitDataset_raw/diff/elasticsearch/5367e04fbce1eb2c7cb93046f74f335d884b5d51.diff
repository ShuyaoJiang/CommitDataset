[+++ b/src/main/java/org/elasticsearch/Version.java, +    public static final Version V_1_5_1 = new Version(V_1_5_1_ID, false, org.apache.lucene.util.Version.LUCENE_4_10_4);, +    public static final int V_1_5_2_ID = 1050299;, +    public static final Version V_1_5_2 = new Version(V_1_5_2_ID, true, org.apache.lucene.util.Version.LUCENE_4_10_4);, +            case V_1_5_2_ID:, +                return V_1_5_2;, +++ b/src/main/java/org/elasticsearch/Version.java, +    public static final Version V_1_5_1 = new Version(V_1_5_1_ID, false, org.apache.lucene.util.Version.LUCENE_4_10_4);, +    public static final int V_1_5_2_ID = 1050299;, +    public static final Version V_1_5_2 = new Version(V_1_5_2_ID, true, org.apache.lucene.util.Version.LUCENE_4_10_4);, +            case V_1_5_2_ID:, +                return V_1_5_2;, +++ b/src/main/java/org/elasticsearch/action/percolate/PercolateRequestBuilder.java, +     * Delegates to {@link PercolateSourceBuilder#addAggregation(AggregationBuilder)}, +    public PercolateRequestBuilder addAggregation(AggregationBuilder aggregationBuilder) {, +++ b/src/main/java/org/elasticsearch/Version.java, +    public static final Version V_1_5_1 = new Version(V_1_5_1_ID, false, org.apache.lucene.util.Version.LUCENE_4_10_4);, +    public static final int V_1_5_2_ID = 1050299;, +    public static final Version V_1_5_2 = new Version(V_1_5_2_ID, true, org.apache.lucene.util.Version.LUCENE_4_10_4);, +            case V_1_5_2_ID:, +                return V_1_5_2;, +++ b/src/main/java/org/elasticsearch/action/percolate/PercolateRequestBuilder.java, +     * Delegates to {@link PercolateSourceBuilder#addAggregation(AggregationBuilder)}, +    public PercolateRequestBuilder addAggregation(AggregationBuilder aggregationBuilder) {, +++ b/src/main/java/org/elasticsearch/action/percolate/PercolateShardResponse.java, +++ b/src/main/java/org/elasticsearch/Version.java, +    public static final Version V_1_5_1 = new Version(V_1_5_1_ID, false, org.apache.lucene.util.Version.LUCENE_4_10_4);, +    public static final int V_1_5_2_ID = 1050299;, +    public static final Version V_1_5_2 = new Version(V_1_5_2_ID, true, org.apache.lucene.util.Version.LUCENE_4_10_4);, +            case V_1_5_2_ID:, +                return V_1_5_2;, +++ b/src/main/java/org/elasticsearch/action/percolate/PercolateRequestBuilder.java, +     * Delegates to {@link PercolateSourceBuilder#addAggregation(AggregationBuilder)}, +    public PercolateRequestBuilder addAggregation(AggregationBuilder aggregationBuilder) {, +++ b/src/main/java/org/elasticsearch/action/percolate/PercolateShardResponse.java, +++ b/src/main/java/org/elasticsearch/action/percolate/PercolateSourceBuilder.java, +    private List<AggregationBuilder> aggregations;, +    public PercolateSourceBuilder addAggregation(AggregationBuilder aggregationBuilder) {, +++ b/src/main/java/org/elasticsearch/Version.java, +    public static final Version V_1_5_1 = new Version(V_1_5_1_ID, false, org.apache.lucene.util.Version.LUCENE_4_10_4);, +    public static final int V_1_5_2_ID = 1050299;, +    public static final Version V_1_5_2 = new Version(V_1_5_2_ID, true, org.apache.lucene.util.Version.LUCENE_4_10_4);, +            case V_1_5_2_ID:, +                return V_1_5_2;, +++ b/src/main/java/org/elasticsearch/action/percolate/PercolateRequestBuilder.java, +     * Delegates to {@link PercolateSourceBuilder#addAggregation(AggregationBuilder)}, +    public PercolateRequestBuilder addAggregation(AggregationBuilder aggregationBuilder) {, +++ b/src/main/java/org/elasticsearch/action/percolate/PercolateShardResponse.java, +++ b/src/main/java/org/elasticsearch/action/percolate/PercolateSourceBuilder.java, +    private List<AggregationBuilder> aggregations;, +    public PercolateSourceBuilder addAggregation(AggregationBuilder aggregationBuilder) {, +++ b/src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java, +++ b/src/main/java/org/elasticsearch/Version.java, +    public static final Version V_1_5_1 = new Version(V_1_5_1_ID, false, org.apache.lucene.util.Version.LUCENE_4_10_4);, +    public static final int V_1_5_2_ID = 1050299;, +    public static final Version V_1_5_2 = new Version(V_1_5_2_ID, true, org.apache.lucene.util.Version.LUCENE_4_10_4);, +            case V_1_5_2_ID:, +                return V_1_5_2;, +++ b/src/main/java/org/elasticsearch/action/percolate/PercolateRequestBuilder.java, +     * Delegates to {@link PercolateSourceBuilder#addAggregation(AggregationBuilder)}, +    public PercolateRequestBuilder addAggregation(AggregationBuilder aggregationBuilder) {, +++ b/src/main/java/org/elasticsearch/action/percolate/PercolateShardResponse.java, +++ b/src/main/java/org/elasticsearch/action/percolate/PercolateSourceBuilder.java, +    private List<AggregationBuilder> aggregations;, +    public PercolateSourceBuilder addAggregation(AggregationBuilder aggregationBuilder) {, +++ b/src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java, +++ b/src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java, + * stopwords. This query basically builds 2 queries off the {@link #add(Term), +++ b/src/main/java/org/elasticsearch/Version.java, +    public static final Version V_1_5_1 = new Version(V_1_5_1_ID, false, org.apache.lucene.util.Version.LUCENE_4_10_4);, +    public static final int V_1_5_2_ID = 1050299;, +    public static final Version V_1_5_2 = new Version(V_1_5_2_ID, true, org.apache.lucene.util.Version.LUCENE_4_10_4);, +            case V_1_5_2_ID:, +                return V_1_5_2;, +++ b/src/main/java/org/elasticsearch/action/percolate/PercolateRequestBuilder.java, +     * Delegates to {@link PercolateSourceBuilder#addAggregation(AggregationBuilder)}, +    public PercolateRequestBuilder addAggregation(AggregationBuilder aggregationBuilder) {, +++ b/src/main/java/org/elasticsearch/action/percolate/PercolateShardResponse.java, +++ b/src/main/java/org/elasticsearch/action/percolate/PercolateSourceBuilder.java, +    private List<AggregationBuilder> aggregations;, +    public PercolateSourceBuilder addAggregation(AggregationBuilder aggregationBuilder) {, +++ b/src/main/java/org/elasticsearch/action/search/SearchRequestBuilder.java, +++ b/src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java, + * stopwords. This query basically builds 2 queries off the {@link #add(Term), +++ b/src/main/java/org/elasticsearch/percolator/PercolatorService.java, +            return shardResults.get(0).aggregations();, +        }, +, +        return InternalAggregations.reduce(aggregationsList, new ReduceContext(bigArrays, scriptService));, +++ b/src/main/java/org/elasticsearch/Version.java, +    public static final Version V_1_5_1 = new Version(V_1_5_1_ID, false, org.apache.lucene.util.Version.LUCENE_4_10_4);, +    public static final int V_1_5_2_ID = 1050299;, +    public static final Version V_1_5_2 = new Version(V_1_5_2_ID, true, org.apache.lucene.util.Version.LUCENE_4_10_4);, +            case V_1_5_2_ID:, +                return V_1_5_2;, +++ b/src/main/java/org/elasticsearch/action/percolate/PercolateRequestBuilder.java, +     * Delegates to {@link PercolateSourceBuilder#addAggregation(AggregationBuilder)}, +    public PercolateRequestBuilder addAggregation(AggregationBuilder aggregationBuilder) {, +++ b/src/main/java/org/elasticsearch/action/percolate/PercolateShardResponse.java, +++ b/src/main/java/org/elasticsearch/action/percolate/PercolateSourceBuilder.java]