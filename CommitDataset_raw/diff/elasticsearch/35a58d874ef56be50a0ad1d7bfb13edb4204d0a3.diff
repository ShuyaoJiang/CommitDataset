[+++ b/docs/java-api/aggregations/metrics/scripted-metric-aggregation.asciidoc, +                .mapScript(new Script("if (doc['gender'].value == \"male\") " +, +                        "{ _agg.heights.add(-1 * doc['height'].value) }"));, +                .initScript(new Script("_agg['heights'] = []")), +                .mapScript(new Script("if (doc['gender'].value == \"male\") " +, +                        "{ _agg.heights.add(-1 * doc['height'].value) }")), +                .combineScript(new Script("heights_sum = 0; for (t in _agg.heights) { heights_sum += t }; return heights_sum"));, +                .initScript(new Script("_agg['heights'] = []")), +                .mapScript(new Script("if (doc['gender'].value == \"male\") " +, +                        "{ _agg.heights.add(-1 * doc['height'].value) }")), +                .combineScript(new Script("heights_sum = 0; for (t in _agg.heights) { heights_sum += t }; return heights_sum")), +                .reduceScript(new Script("heights_sum = 0; for (a in _aggs) { heights_sum += a }; return heights_sum"));, +++ b/docs/java-api/aggregations/metrics/scripted-metric-aggregation.asciidoc, +                .mapScript(new Script("if (doc['gender'].value == \"male\") " +, +                        "{ _agg.heights.add(-1 * doc['height'].value) }"));, +                .initScript(new Script("_agg['heights'] = []")), +                .mapScript(new Script("if (doc['gender'].value == \"male\") " +, +                        "{ _agg.heights.add(-1 * doc['height'].value) }")), +                .combineScript(new Script("heights_sum = 0; for (t in _agg.heights) { heights_sum += t }; return heights_sum"));, +                .initScript(new Script("_agg['heights'] = []")), +                .mapScript(new Script("if (doc['gender'].value == \"male\") " +, +                        "{ _agg.heights.add(-1 * doc['height'].value) }")), +                .combineScript(new Script("heights_sum = 0; for (t in _agg.heights) { heights_sum += t }; return heights_sum")), +                .reduceScript(new Script("heights_sum = 0; for (a in _aggs) { heights_sum += a }; return heights_sum"));, +++ b/docs/java-api/update.asciidoc, +        .setScript(new Script("ctx._source.gender = \"male\"" <1> , ScriptService.ScriptType.INLINE, null, null)), +        .script(new Script("ctx._source.gender = \"male\""));, +++ b/docs/java-api/aggregations/metrics/scripted-metric-aggregation.asciidoc, +                .mapScript(new Script("if (doc['gender'].value == \"male\") " +, +                        "{ _agg.heights.add(-1 * doc['height'].value) }"));, +                .initScript(new Script("_agg['heights'] = []")), +                .mapScript(new Script("if (doc['gender'].value == \"male\") " +, +                        "{ _agg.heights.add(-1 * doc['height'].value) }")), +                .combineScript(new Script("heights_sum = 0; for (t in _agg.heights) { heights_sum += t }; return heights_sum"));, +                .initScript(new Script("_agg['heights'] = []")), +                .mapScript(new Script("if (doc['gender'].value == \"male\") " +, +                        "{ _agg.heights.add(-1 * doc['height'].value) }")), +                .combineScript(new Script("heights_sum = 0; for (t in _agg.heights) { heights_sum += t }; return heights_sum")), +                .reduceScript(new Script("heights_sum = 0; for (a in _aggs) { heights_sum += a }; return heights_sum"));, +++ b/docs/java-api/update.asciidoc, +        .setScript(new Script("ctx._source.gender = \"male\"" <1> , ScriptService.ScriptType.INLINE, null, null)), +        .script(new Script("ctx._source.gender = \"male\""));, +++ b/docs/reference/aggregations.asciidoc, +++ b/docs/java-api/aggregations/metrics/scripted-metric-aggregation.asciidoc, +                .mapScript(new Script("if (doc['gender'].value == \"male\") " +, +                        "{ _agg.heights.add(-1 * doc['height'].value) }"));, +                .initScript(new Script("_agg['heights'] = []")), +                .mapScript(new Script("if (doc['gender'].value == \"male\") " +, +                        "{ _agg.heights.add(-1 * doc['height'].value) }")), +                .combineScript(new Script("heights_sum = 0; for (t in _agg.heights) { heights_sum += t }; return heights_sum"));, +                .initScript(new Script("_agg['heights'] = []")), +                .mapScript(new Script("if (doc['gender'].value == \"male\") " +, +                        "{ _agg.heights.add(-1 * doc['height'].value) }")), +                .combineScript(new Script("heights_sum = 0; for (t in _agg.heights) { heights_sum += t }; return heights_sum")), +                .reduceScript(new Script("heights_sum = 0; for (a in _aggs) { heights_sum += a }; return heights_sum"));, +++ b/docs/java-api/update.asciidoc, +        .setScript(new Script("ctx._source.gender = \"male\"" <1> , ScriptService.ScriptType.INLINE, null, null)), +        .script(new Script("ctx._source.gender = \"male\""));, +++ b/docs/reference/aggregations.asciidoc, +++ b/docs/reference/aggregations/bucket/range-aggregation.asciidoc, +This will interpret the `script` parameter as an `inline` script with the default script language and no script parameters. To use a file script use the following syntax:, +, +[source,js], +--------------------------------------------------, +{, +    "aggs" : {, +        "price_ranges" : {, +            "range" : {, +                "script" : {, +                    "file": "my_script",, +                    "params": {, +                        "field": "price", +                    }, +                },, +                "ranges" : [, +                    { "to" : 50 },, +                    { "from" : 50, "to" : 100 },, +                    { "from" : 100 }, +                ], +            }, +        }, +    }, +}, +--------------------------------------------------, +, +TIP: for indexed scripts replace the `file` parameter with an `id` parameter., +, +++ b/docs/java-api/aggregations/metrics/scripted-metric-aggregation.asciidoc, +                .mapScript(new Script("if (doc['gender'].value == \"male\") " +, +                        "{ _agg.heights.add(-1 * doc['height'].value) }"));, +                .initScript(new Script("_agg['heights'] = []")), +                .mapScript(new Script("if (doc['gender'].value == \"male\") " +, +                        "{ _agg.heights.add(-1 * doc['height'].value) }")), +                .combineScript(new Script("heights_sum = 0; for (t in _agg.heights) { heights_sum += t }; return heights_sum"));, +                .initScript(new Script("_agg['heights'] = []")), +                .mapScript(new Script("if (doc['gender'].value == \"male\") " +, +                        "{ _agg.heights.add(-1 * doc['height'].value) }")), +                .combineScript(new Script("heights_sum = 0; for (t in _agg.heights) { heights_sum += t }; return heights_sum")), +                .reduceScript(new Script("heights_sum = 0; for (a in _aggs) { heights_sum += a }; return heights_sum"));, +++ b/docs/java-api/update.asciidoc]