[+++ b/plugins/cloud/aws/src/main/java/org/elasticsearch/cloud/aws/AwsEc2Service.java, +        String proxyHost = settings.get("network.proxyHost");, +        if (proxyHost != null) {, +            String portString = settings.get("network.proxyPort","80");, +            Integer proxyPort;, +            try {, +                proxyPort = Integer.parseInt(portString,10);, +            } catch (NumberFormatException ex) {, +                throw new ElasticSearchIllegalArgumentException("The configured proxy port value [" + portString + "] is invalid",ex);, +            }, +            clientConfiguration.withProxyHost(proxyHost).setProxyPort(proxyPort);, +        }, +, +++ b/plugins/cloud/aws/src/main/java/org/elasticsearch/cloud/aws/AwsEc2Service.java, +        String proxyHost = settings.get("network.proxyHost");, +        if (proxyHost != null) {, +            String portString = settings.get("network.proxyPort","80");, +            Integer proxyPort;, +            try {, +                proxyPort = Integer.parseInt(portString,10);, +            } catch (NumberFormatException ex) {, +                throw new ElasticSearchIllegalArgumentException("The configured proxy port value [" + portString + "] is invalid",ex);, +            }, +            clientConfiguration.withProxyHost(proxyHost).setProxyPort(proxyPort);, +        }, +, +++ b/plugins/cloud/aws/src/main/java/org/elasticsearch/cloud/aws/AwsS3Service.java, +        String proxyHost = settings.get("network.proxyHost");, +        if (proxyHost != null) {, +            String portString = settings.get("network.proxyPort","80");, +            Integer proxyPort;, +            try {, +                proxyPort = Integer.parseInt(portString,10);, +            } catch (NumberFormatException ex) {, +                throw new ElasticSearchIllegalArgumentException("The configured proxy port value [" + portString + "] is invalid",ex);, +            }, +            clientConfiguration.withProxyHost(proxyHost).setProxyPort(proxyPort);, +        }, +]