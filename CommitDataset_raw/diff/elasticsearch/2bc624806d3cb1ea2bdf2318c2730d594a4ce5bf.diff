[+++ b/src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/DoubleValuesComparatorBase.java, +            readerValues = new MultiValueWrapper(readerValues, sortMode);, +    static final class MultiValueWrapper extends DoubleValues.FilteredDoubleValues {, +        public MultiValueWrapper(DoubleValues delegate, SortMode sortMode) {, +++ b/src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/DoubleValuesComparatorBase.java, +            readerValues = new MultiValueWrapper(readerValues, sortMode);, +    static final class MultiValueWrapper extends DoubleValues.FilteredDoubleValues {, +        public MultiValueWrapper(DoubleValues delegate, SortMode sortMode) {, +++ b/src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/LongValuesComparatorBase.java, +            readerValues = new MultiValueWrapper(readerValues, sortMode);, +    private static final class MultiValueWrapper extends LongValues.FilteredLongValues {, +        public MultiValueWrapper(LongValues delegate, SortMode sortMode) {]