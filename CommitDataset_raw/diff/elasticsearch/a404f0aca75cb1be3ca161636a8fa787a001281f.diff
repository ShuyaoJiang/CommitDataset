[+++ b/core/src/main/java/org/elasticsearch/action/search/SearchTransportService.java, +        if (connection.getVersion().before(Version.V_5_3_0_UNRELEASED) && fetchDocuments) {, +            // this is a BWC layer for pre 5.3 indices, +            if (request.scroll() != null) {, +                request.searchType(SearchType.QUERY_AND_FETCH);, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchTransportService.java, +        if (connection.getVersion().before(Version.V_5_3_0_UNRELEASED) && fetchDocuments) {, +            // this is a BWC layer for pre 5.3 indices, +            if (request.scroll() != null) {, +                request.searchType(SearchType.QUERY_AND_FETCH);, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchType.java, +    QUERY_THEN_FETCH((byte) 1),, +, +    /**, +     * Only used for pre 5.3 request where this type is still needed, +     */, +    @Deprecated, +    QUERY_AND_FETCH((byte) 3);]