[+++ b/src/main/java/org/elasticsearch/action/UnavailableShardsException.java, +import org.elasticsearch.common.Nullable;, +import org.elasticsearch.rest.RestStatus;, +    public UnavailableShardsException(@Nullable ShardId shardId, String message) {, +, +    @Override, +    public RestStatus status() {, +        return RestStatus.SERVICE_UNAVAILABLE;, +    }, +++ b/src/main/java/org/elasticsearch/action/UnavailableShardsException.java, +import org.elasticsearch.common.Nullable;, +import org.elasticsearch.rest.RestStatus;, +    public UnavailableShardsException(@Nullable ShardId shardId, String message) {, +, +    @Override, +    public RestStatus status() {, +        return RestStatus.SERVICE_UNAVAILABLE;, +    }, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/ping/broadcast/TransportBroadcastPingAction.java, +import org.elasticsearch.cluster.block.ClusterBlockException;, +import org.elasticsearch.cluster.block.ClusterBlockLevel;, +    protected GroupShardsIterator shards(ClusterState clusterState, BroadcastPingRequest request, String[] concreteIndices) {, +    protected ClusterBlockException checkGlobalBlock(ClusterState state, BroadcastPingRequest request) {, +        return state.blocks().globalBlockedException(ClusterBlockLevel.READ);, +    }, +, +    @Override, +    protected ClusterBlockException checkRequestBlock(ClusterState state, BroadcastPingRequest request, String[] concreteIndices) {, +        return null;, +    }, +, +    @Override, +++ b/src/main/java/org/elasticsearch/action/UnavailableShardsException.java, +import org.elasticsearch.common.Nullable;, +import org.elasticsearch.rest.RestStatus;, +    public UnavailableShardsException(@Nullable ShardId shardId, String message) {, +, +    @Override, +    public RestStatus status() {, +        return RestStatus.SERVICE_UNAVAILABLE;, +    }, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/ping/broadcast/TransportBroadcastPingAction.java, +import org.elasticsearch.cluster.block.ClusterBlockException;, +import org.elasticsearch.cluster.block.ClusterBlockLevel;, +    protected GroupShardsIterator shards(ClusterState clusterState, BroadcastPingRequest request, String[] concreteIndices) {, +    protected ClusterBlockException checkGlobalBlock(ClusterState state, BroadcastPingRequest request) {, +        return state.blocks().globalBlockedException(ClusterBlockLevel.READ);, +    }, +, +    @Override, +    protected ClusterBlockException checkRequestBlock(ClusterState state, BroadcastPingRequest request, String[] concreteIndices) {, +        return null;, +    }, +, +    @Override, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/ping/replication/TransportIndexReplicationPingAction.java, +import org.elasticsearch.cluster.ClusterState;, +import org.elasticsearch.cluster.block.ClusterBlockException;, +import org.elasticsearch.cluster.block.ClusterBlockLevel;, +, +    @Override, +    protected ClusterBlockException checkGlobalBlock(ClusterState state, IndexReplicationPingRequest request) {, +        return state.blocks().globalBlockedException(ClusterBlockLevel.READ);, +    }, +, +    @Override, +    protected ClusterBlockException checkRequestBlock(ClusterState state, IndexReplicationPingRequest request) {, +        return state.blocks().indexBlockedException(ClusterBlockLevel.READ, request.index());, +    }, +++ b/src/main/java/org/elasticsearch/action/UnavailableShardsException.java, +import org.elasticsearch.common.Nullable;, +import org.elasticsearch.rest.RestStatus;, +    public UnavailableShardsException(@Nullable ShardId shardId, String message) {, +, +    @Override, +    public RestStatus status() {, +        return RestStatus.SERVICE_UNAVAILABLE;, +    }, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/ping/broadcast/TransportBroadcastPingAction.java, +import org.elasticsearch.cluster.block.ClusterBlockException;, +import org.elasticsearch.cluster.block.ClusterBlockLevel;, +    protected GroupShardsIterator shards(ClusterState clusterState, BroadcastPingRequest request, String[] concreteIndices) {, +    protected ClusterBlockException checkGlobalBlock(ClusterState state, BroadcastPingRequest request) {, +        return state.blocks().globalBlockedException(ClusterBlockLevel.READ);, +    }, +, +    @Override, +    protected ClusterBlockException checkRequestBlock(ClusterState state, BroadcastPingRequest request, String[] concreteIndices) {, +        return null;, +    }, +, +    @Override, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/ping/replication/TransportIndexReplicationPingAction.java, +import org.elasticsearch.cluster.ClusterState;, +import org.elasticsearch.cluster.block.ClusterBlockException;, +import org.elasticsearch.cluster.block.ClusterBlockLevel;, +, +    @Override, +    protected ClusterBlockException checkGlobalBlock(ClusterState state, IndexReplicationPingRequest request) {, +        return state.blocks().globalBlockedException(ClusterBlockLevel.READ);]