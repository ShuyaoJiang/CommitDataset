[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java, +            Searcher searcher = indexingSearcher.get();, +            if (searcher != null) {, +            if (searcher != null) {, +                searcher.release();, +            }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java, +            Searcher searcher = indexingSearcher.get();, +            if (searcher != null) {, +            if (searcher != null) {, +                searcher.release();, +            }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java, +        // clear unreferenced files, +        translog.clearUnreferenced();, +        engine.refresh(new Engine.Refresh(true));]