[+++ b/src/test/java/org/elasticsearch/recovery/RecoveryWhileUnderLoadTests.java, +import java.util.concurrent.CopyOnWriteArrayList;, +import static org.hamcrest.Matchers.emptyIterable;, +        final int numShards = between(2, 10);, +        Thread[] writers = new Thread[atLeast(3)];, +        final CopyOnWriteArrayList<Throwable> failures = new CopyOnWriteArrayList<Throwable>();, +                    long id = -1;, +                            id = idGenerator.incrementAndGet();, +                        failures.add(e);, +                        logger.warn("**** failed indexing thread {} on doc id {}", e, indexerId, id);, +        final int numDocs = between(10000, 50000);, +        for (int i = 0; i < numDocs; i += between(100, 1000)) {, +            assertThat(failures, emptyIterable());, +        assertThat(failures, emptyIterable());]