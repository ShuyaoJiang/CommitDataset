[+++ b/CONTRIBUTING.md, +**Repository:** [https://github.com/elastic/elasticsearch](https://github.com/elastic/elasticsearch), +++ b/CONTRIBUTING.md, +**Repository:** [https://github.com/elastic/elasticsearch](https://github.com/elastic/elasticsearch), +++ b/TESTING.asciidoc, +mvn verify -Dtests.filter="@Rest" -Dskip.unit.tests=true, +++ b/CONTRIBUTING.md, +**Repository:** [https://github.com/elastic/elasticsearch](https://github.com/elastic/elasticsearch), +++ b/TESTING.asciidoc, +mvn verify -Dtests.filter="@Rest" -Dskip.unit.tests=true, +++ b/Vagrantfile, +    ubuntu_common config, extra: <<-SHELL, +      # Install Jayatana so we can work around it being present., +      [ -f /usr/share/java/jayatanaag.jar ] || install jayatana, +    SHELL, +def ubuntu_common(config, extra: ''), +  deb_common config, 'apt-add-repository -y ppa:openjdk-r/ppa > /dev/null 2>&1', 'openjdk-r-*', extra: extra, +def deb_common(config, add_openjdk_repository_command, openjdk_list, extra: ''), +      #{extra}, +++ b/CONTRIBUTING.md, +**Repository:** [https://github.com/elastic/elasticsearch](https://github.com/elastic/elasticsearch), +++ b/TESTING.asciidoc, +mvn verify -Dtests.filter="@Rest" -Dskip.unit.tests=true, +++ b/Vagrantfile, +    ubuntu_common config, extra: <<-SHELL, +      # Install Jayatana so we can work around it being present., +      [ -f /usr/share/java/jayatanaag.jar ] || install jayatana, +    SHELL, +def ubuntu_common(config, extra: ''), +  deb_common config, 'apt-add-repository -y ppa:openjdk-r/ppa > /dev/null 2>&1', 'openjdk-r-*', extra: extra, +def deb_common(config, add_openjdk_repository_command, openjdk_list, extra: ''), +      #{extra}, +++ b/core/pom.xml, +                                <include>org/elasticsearch/cluster/routing/TestShardRouting.class</include>, +                                <include>org/elasticsearch/cluster/routing/TestShardRouting$*.class</include>, +                                <include>org/elasticsearch/index/MockEngineFactoryPlugin.class</include>, +                        <!-- Forks of Lucene classes -->, +                        <!-- Guava -->, +                        <exclude>src/main/java/org/elasticsearch/common/network/InetAddresses.java</exclude>, +                        <exclude>src/test/java/org/elasticsearch/common/network/InetAddressesTests.java</exclude>, +                        <exclude>src/test/java/org/elasticsearch/common/collect/EvictingQueueTests.java</exclude>, +                        <!-- Joda -->, +                        <exclude>src/main/java/org/joda/time/base/BaseDateTime.java</exclude>, +                        <exclude>src/main/java/org/joda/time/format/StrictISODateTimeFormat.java</exclude>, +++ b/CONTRIBUTING.md, +**Repository:** [https://github.com/elastic/elasticsearch](https://github.com/elastic/elasticsearch), +++ b/TESTING.asciidoc, +mvn verify -Dtests.filter="@Rest" -Dskip.unit.tests=true, +++ b/Vagrantfile, +    ubuntu_common config, extra: <<-SHELL, +      # Install Jayatana so we can work around it being present., +      [ -f /usr/share/java/jayatanaag.jar ] || install jayatana, +    SHELL, +def ubuntu_common(config, extra: ''), +  deb_common config, 'apt-add-repository -y ppa:openjdk-r/ppa > /dev/null 2>&1', 'openjdk-r-*', extra: extra, +def deb_common(config, add_openjdk_repository_command, openjdk_list, extra: ''), +      #{extra}, +++ b/core/pom.xml, +                                <include>org/elasticsearch/cluster/routing/TestShardRouting.class</include>, +                                <include>org/elasticsearch/cluster/routing/TestShardRouting$*.class</include>, +                                <include>org/elasticsearch/index/MockEngineFactoryPlugin.class</include>, +                        <!-- Forks of Lucene classes -->, +                        <!-- Guava -->, +                        <exclude>src/main/java/org/elasticsearch/common/network/InetAddresses.java</exclude>, +                        <exclude>src/test/java/org/elasticsearch/common/network/InetAddressesTests.java</exclude>, +                        <exclude>src/test/java/org/elasticsearch/common/collect/EvictingQueueTests.java</exclude>, +                        <!-- Joda -->, +                        <exclude>src/main/java/org/joda/time/base/BaseDateTime.java</exclude>, +                        <exclude>src/main/java/org/joda/time/format/StrictISODateTimeFormat.java</exclude>, +++ b/core/src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java, +import org.apache.lucene.search.BooleanClause;, +import org.apache.lucene.search.DisjunctionMaxQuery;, +import org.apache.lucene.search.FuzzyQuery;, +import org.apache.lucene.search.MatchNoDocsQuery;, +import org.apache.lucene.search.MultiPhraseQuery;, +import org.apache.lucene.search.PhraseQuery;, +import org.apache.lucene.search.Query;, +import org.apache.lucene.util.automaton.RegExp;, +import java.util.HashMap;, +import java.util.Map;, +import static java.util.Collections.unmodifiableMap;, +    public static final Map<String, FieldQueryExtension> FIELD_QUERY_EXTENSIONS;, +        Map<String, FieldQueryExtension> fieldQueryExtensions = new HashMap<>();, +        fieldQueryExtensions.put(ExistsFieldQueryExtension.NAME, new ExistsFieldQueryExtension());, +        fieldQueryExtensions.put(MissingFieldQueryExtension.NAME, new MissingFieldQueryExtension());, +        FIELD_QUERY_EXTENSIONS = unmodifiableMap(fieldQueryExtensions);, +        FieldQueryExtension fieldQueryExtension = FIELD_QUERY_EXTENSIONS.get(field);, +                return FIELD_QUERY_EXTENSIONS.get(ExistsFieldQueryExtension.NAME).query(context, actualField);, +++ b/CONTRIBUTING.md, +**Repository:** [https://github.com/elastic/elasticsearch](https://github.com/elastic/elasticsearch), +++ b/TESTING.asciidoc, +mvn verify -Dtests.filter="@Rest" -Dskip.unit.tests=true, +++ b/Vagrantfile, +    ubuntu_common config, extra: <<-SHELL, +      # Install Jayatana so we can work around it being present., +      [ -f /usr/share/java/jayatanaag.jar ] || install jayatana, +    SHELL, +def ubuntu_common(config, extra: ''), +  deb_common config, 'apt-add-repository -y ppa:openjdk-r/ppa > /dev/null 2>&1', 'openjdk-r-*', extra: extra, +def deb_common(config, add_openjdk_repository_command, openjdk_list, extra: '')]