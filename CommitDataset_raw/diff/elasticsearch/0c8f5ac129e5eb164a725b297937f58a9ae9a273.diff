[+++ b/src/test/java/org/elasticsearch/index/engine/internal/InternalEngineTests.java, +        assertThat(engine.segmentsStats().getMemoryInBytes(), equalTo(0l));, +        SegmentsStats stats = engine.segmentsStats();, +        assertThat(stats.getCount(), equalTo(1l));, +        assertThat(stats.getTermsMemoryInBytes(), greaterThan(0l));, +        assertThat(stats.getStoredFieldsMemoryInBytes(), greaterThan(0l));, +        assertThat(stats.getTermVectorsMemoryInBytes(), equalTo(0l));, +        assertThat(stats.getNormsMemoryInBytes(), greaterThan(0l));, +        assertThat(stats.getDocValuesMemoryInBytes(), greaterThan(0l));, +        assertThat(engine.segmentsStats().getTermsMemoryInBytes(), greaterThan(stats.getTermsMemoryInBytes()));, +        assertThat(engine.segmentsStats().getStoredFieldsMemoryInBytes(), greaterThan(stats.getStoredFieldsMemoryInBytes()));, +        assertThat(engine.segmentsStats().getTermVectorsMemoryInBytes(), equalTo(0l));, +        assertThat(engine.segmentsStats().getNormsMemoryInBytes(), greaterThan(stats.getNormsMemoryInBytes()));, +        assertThat(engine.segmentsStats().getDocValuesMemoryInBytes(), greaterThan(stats.getDocValuesMemoryInBytes()));]