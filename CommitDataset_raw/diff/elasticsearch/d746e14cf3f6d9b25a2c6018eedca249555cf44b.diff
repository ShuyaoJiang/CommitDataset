[+++ b/src/main/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteResponse.java, +        state.writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteResponse.java, +        state.writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/state/ClusterStateResponse.java, +        clusterState.writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteResponse.java, +        state.writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/state/ClusterStateResponse.java, +        clusterState.writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java, +        builder.uuid(currentState.uuid());, +            for(ObjectObjectCursor<String, Custom> custom :  currentState.metaData().customs()) {, +                if(!custom.value.context().contains(MetaData.XContentContext.API)) {, +                    mdBuilder.removeCustom(custom.key);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteResponse.java, +        state.writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/state/ClusterStateResponse.java, +        clusterState.writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java, +        builder.uuid(currentState.uuid());, +            for(ObjectObjectCursor<String, Custom> custom :  currentState.metaData().customs()) {, +                if(!custom.value.context().contains(MetaData.XContentContext.API)) {, +                    mdBuilder.removeCustom(custom.key);, +++ b/src/main/java/org/elasticsearch/action/admin/indices/alias/get/GetAliasesResponse.java, +                aliasMetaData.writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteResponse.java, +        state.writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/state/ClusterStateResponse.java, +        clusterState.writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java, +        builder.uuid(currentState.uuid());, +            for(ObjectObjectCursor<String, Custom> custom :  currentState.metaData().customs()) {, +                if(!custom.value.context().contains(MetaData.XContentContext.API)) {, +                    mdBuilder.removeCustom(custom.key);, +++ b/src/main/java/org/elasticsearch/action/admin/indices/alias/get/GetAliasesResponse.java, +                aliasMetaData.writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequest.java, +                IndexMetaData.Custom proto = IndexMetaData.lookupPrototype(name);, +                if (proto != null) {, +                        customs.put(name, proto.fromMap((Map<String, Object>) entry.getValue()));, +            IndexMetaData.Custom customIndexMetaData = IndexMetaData.lookupPrototypeSafe(type).readFrom(in);, +            entry.getValue().writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteResponse.java, +        state.writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/state/ClusterStateResponse.java, +        clusterState.writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java, +        builder.uuid(currentState.uuid());, +            for(ObjectObjectCursor<String, Custom> custom :  currentState.metaData().customs()) {, +                if(!custom.value.context().contains(MetaData.XContentContext.API)) {, +                    mdBuilder.removeCustom(custom.key);, +++ b/src/main/java/org/elasticsearch/action/admin/indices/alias/get/GetAliasesResponse.java, +                aliasMetaData.writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequest.java, +                IndexMetaData.Custom proto = IndexMetaData.lookupPrototype(name);, +                if (proto != null) {, +                        customs.put(name, proto.fromMap((Map<String, Object>) entry.getValue()));, +            IndexMetaData.Custom customIndexMetaData = IndexMetaData.lookupPrototypeSafe(type).readFrom(in);, +            entry.getValue().writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/indices/get/GetIndexResponse.java, +                mappingEntryBuilder.put(in.readString(), MappingMetaData.PROTO.readFrom(in));, +                mappingEntry.value.writeTo(out);, +                aliasEntry.writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteResponse.java, +        state.writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/state/ClusterStateResponse.java, +        clusterState.writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java, +        builder.uuid(currentState.uuid());, +            for(ObjectObjectCursor<String, Custom> custom :  currentState.metaData().customs()) {, +                if(!custom.value.context().contains(MetaData.XContentContext.API)) {, +                    mdBuilder.removeCustom(custom.key);, +++ b/src/main/java/org/elasticsearch/action/admin/indices/alias/get/GetAliasesResponse.java, +                aliasMetaData.writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequest.java, +                IndexMetaData.Custom proto = IndexMetaData.lookupPrototype(name);, +                if (proto != null) {, +                        customs.put(name, proto.fromMap((Map<String, Object>) entry.getValue()));, +            IndexMetaData.Custom customIndexMetaData = IndexMetaData.lookupPrototypeSafe(type).readFrom(in);, +            entry.getValue().writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/indices/get/GetIndexResponse.java, +                mappingEntryBuilder.put(in.readString(), MappingMetaData.PROTO.readFrom(in));, +                mappingEntry.value.writeTo(out);, +                aliasEntry.writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/GetMappingsResponse.java, +                typeMapBuilder.put(in.readString(), MappingMetaData.PROTO.readFrom(in));, +                typeEntry.value.writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/reroute/ClusterRerouteResponse.java, +        state.writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/state/ClusterStateResponse.java, +        clusterState.writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java, +        builder.uuid(currentState.uuid());, +            for(ObjectObjectCursor<String, Custom> custom :  currentState.metaData().customs()) {, +                if(!custom.value.context().contains(MetaData.XContentContext.API)) {, +                    mdBuilder.removeCustom(custom.key);, +++ b/src/main/java/org/elasticsearch/action/admin/indices/alias/get/GetAliasesResponse.java, +                aliasMetaData.writeTo(out);, +++ b/src/main/java/org/elasticsearch/action/admin/indices/create/CreateIndexRequest.java]