[+++ b/src/main/java/org/elasticsearch/index/translog/TranslogService.java, +import org.elasticsearch.index.shard.IllegalIndexShardStateException;, +, +            // flush is disabled, but still reschedule, +                reschedule();, +            if (indexShard.state() == IndexShardState.CREATED) {, +                reschedule();, +                return;, +            }, +, +            if (flushThresholdOperations > 0) {, +            }, +            if (flushThresholdSize.bytes() > 0) {, +            }, +            if (flushThresholdPeriod.millis() > 0) {, +                if ((threadPool.estimatedTimeInMillis() - lastFlushTime) > flushThresholdPeriod.millis()) {, +            }, +            reschedule();, +        }, +, +        private void reschedule() {, +                    } catch (IllegalIndexShardStateException e) {, +                        // we are being closed, or in created state, ignore, +                    lastFlushTime = threadPool.estimatedTimeInMillis();]