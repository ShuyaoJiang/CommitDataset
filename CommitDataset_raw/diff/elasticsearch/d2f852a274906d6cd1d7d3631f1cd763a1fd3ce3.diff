[+++ b/docs/reference/migration/migrate_2_0.asciidoc, +The `histogram` and the `date_histogram` aggregation now support a simplified `offset` option that replaces the previous `pre_offset` and, +`post_offset` rounding options. Instead of having to specify two separate offset shifts of the underlying buckets, the `offset` option, +moves the bucket boundaries in positive or negative direction depending on its argument., +, +++ b/docs/reference/migration/migrate_2_0.asciidoc, +The `histogram` and the `date_histogram` aggregation now support a simplified `offset` option that replaces the previous `pre_offset` and, +`post_offset` rounding options. Instead of having to specify two separate offset shifts of the underlying buckets, the `offset` option, +moves the bucket boundaries in positive or negative direction depending on its argument., +, +++ b/docs/reference/search/aggregations/bucket/datehistogram-aggregation.asciidoc, +==== Offset, +The `offset` option can be provided for shifting the date bucket intervals boundaries after any other shifts because of, +time zones are applies. This for example makes it possible that daily buckets go from 6AM to 6AM the next day instead of starting at 12AM, +or that monthly buckets go from the 10th of the month to the 10th of the next month instead of the 1st., +, +The `offset` option accepts positive or negative time durations like "1h" for an hour or "1M" for a Month. See <<time-units>> for more, +possible time duration options., +++ b/docs/reference/migration/migrate_2_0.asciidoc, +The `histogram` and the `date_histogram` aggregation now support a simplified `offset` option that replaces the previous `pre_offset` and, +`post_offset` rounding options. Instead of having to specify two separate offset shifts of the underlying buckets, the `offset` option, +moves the bucket boundaries in positive or negative direction depending on its argument., +, +++ b/docs/reference/search/aggregations/bucket/datehistogram-aggregation.asciidoc, +==== Offset, +The `offset` option can be provided for shifting the date bucket intervals boundaries after any other shifts because of, +time zones are applies. This for example makes it possible that daily buckets go from 6AM to 6AM the next day instead of starting at 12AM, +or that monthly buckets go from the 10th of the month to the 10th of the next month instead of the 1st., +, +The `offset` option accepts positive or negative time durations like "1h" for an hour or "1M" for a Month. See <<time-units>> for more, +possible time duration options., +++ b/src/main/java/org/elasticsearch/common/rounding/Rounding.java, +    public static class OffsetRounding extends Rounding {, +        private long offset;, +        OffsetRounding() { // for serialization, +        public OffsetRounding(Rounding intervalRounding, long offset) {, +            this.offset = offset;, +            return rounding.roundKey(value - offset);, +            return offset + rounding.valueForKey(key);, +            return rounding.nextRoundingValue(value - offset) + offset;, +            offset = in.readLong();, +            out.writeLong(offset);, +                case OffsetRounding.ID: rounding = new OffsetRounding(); break;, +++ b/docs/reference/migration/migrate_2_0.asciidoc, +The `histogram` and the `date_histogram` aggregation now support a simplified `offset` option that replaces the previous `pre_offset` and, +`post_offset` rounding options. Instead of having to specify two separate offset shifts of the underlying buckets, the `offset` option, +moves the bucket boundaries in positive or negative direction depending on its argument., +, +++ b/docs/reference/search/aggregations/bucket/datehistogram-aggregation.asciidoc, +==== Offset, +The `offset` option can be provided for shifting the date bucket intervals boundaries after any other shifts because of, +time zones are applies. This for example makes it possible that daily buckets go from 6AM to 6AM the next day instead of starting at 12AM, +or that monthly buckets go from the 10th of the month to the 10th of the next month instead of the 1st., +, +The `offset` option accepts positive or negative time durations like "1h" for an hour or "1M" for a Month. See <<time-units>> for more, +possible time duration options., +++ b/src/main/java/org/elasticsearch/common/rounding/Rounding.java, +    public static class OffsetRounding extends Rounding {, +        private long offset;, +        OffsetRounding() { // for serialization, +        public OffsetRounding(Rounding intervalRounding, long offset) {, +            this.offset = offset;, +            return rounding.roundKey(value - offset);, +            return offset + rounding.valueForKey(key);, +            return rounding.nextRoundingValue(value - offset) + offset;, +            offset = in.readLong();, +            out.writeLong(offset);, +                case OffsetRounding.ID: rounding = new OffsetRounding(); break;, +++ b/src/main/java/org/elasticsearch/common/rounding/TimeZoneRounding.java, +        private long offset;, +        public Builder offset(long offset) {, +            this.offset = offset;, +            if (offset != 0) {, +                timeZoneRounding = new OffsetRounding(timeZoneRounding, offset);, +++ b/docs/reference/migration/migrate_2_0.asciidoc, +The `histogram` and the `date_histogram` aggregation now support a simplified `offset` option that replaces the previous `pre_offset` and, +`post_offset` rounding options. Instead of having to specify two separate offset shifts of the underlying buckets, the `offset` option, +moves the bucket boundaries in positive or negative direction depending on its argument., +, +++ b/docs/reference/search/aggregations/bucket/datehistogram-aggregation.asciidoc, +==== Offset, +The `offset` option can be provided for shifting the date bucket intervals boundaries after any other shifts because of, +time zones are applies. This for example makes it possible that daily buckets go from 6AM to 6AM the next day instead of starting at 12AM, +or that monthly buckets go from the 10th of the month to the 10th of the next month instead of the 1st., +, +The `offset` option accepts positive or negative time durations like "1h" for an hour or "1M" for a Month. See <<time-units>> for more, +possible time duration options., +++ b/src/main/java/org/elasticsearch/common/rounding/Rounding.java, +    public static class OffsetRounding extends Rounding {, +        private long offset;, +        OffsetRounding() { // for serialization, +        public OffsetRounding(Rounding intervalRounding, long offset) {, +            this.offset = offset;, +            return rounding.roundKey(value - offset);, +            return offset + rounding.valueForKey(key);, +            return rounding.nextRoundingValue(value - offset) + offset;, +            offset = in.readLong();, +            out.writeLong(offset);, +                case OffsetRounding.ID: rounding = new OffsetRounding(); break;, +++ b/src/main/java/org/elasticsearch/common/rounding/TimeZoneRounding.java]