[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/fs/FsIndexShardGateway.java, +    private volatile long lastIndexVersion;, +    private volatile long lastTranslogId = -1;, +    private volatile int lastTranslogSize;, +        // delete files that no longer exists in the index, +        if (indexDirty) {, +            File[] existingFiles = locationIndex.listFiles();, +            for (File existingFile : existingFiles) {, +                boolean found = false;, +                for (final String fileName : snapshotIndexCommit.getFiles()) {, +                    if (existingFile.getName().equals(fileName)) {, +                        found = true;, +                        break;, +                    }, +                }, +                if (!found) {, +                    existingFile.delete();, +                }, +            }, +        }, +]