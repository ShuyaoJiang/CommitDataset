[+++ b/docs/build.gradle, +, +// Used by iprange agg, +buildRestTests.setups['iprange'] = ''', +  - do:, +        indices.create:, +          index: ip_addresses, +          body:, +            settings:, +              number_of_shards: 1, +              number_of_replicas: 1, +            mappings:, +              data:, +                properties:, +                  ip:, +                    type: ip, +  - do:, +        bulk:, +          index: ip_addresses, +          type: data, +          refresh: true, +          body: |''', +, +, +for (int i = 0; i < 255; i++) {, +  buildRestTests.setups['iprange'] += """, +            {"index":{}}, +            {"ip": "10.0.0.$i"}""", +}, +for (int i = 0; i < 5; i++) {, +  buildRestTests.setups['iprange'] += """, +            {"index":{}}, +            {"ip": "9.0.0.$i"}""", +  buildRestTests.setups['iprange'] += """, +            {"index":{}}, +            {"ip": "11.0.0.$i"}""", +  buildRestTests.setups['iprange'] += """, +            {"index":{}}, +            {"ip": "12.0.0.$i"}""", +}, +++ b/docs/build.gradle, +, +// Used by iprange agg, +buildRestTests.setups['iprange'] = ''', +  - do:, +        indices.create:, +          index: ip_addresses, +          body:, +            settings:, +              number_of_shards: 1, +              number_of_replicas: 1, +            mappings:, +              data:, +                properties:, +                  ip:, +                    type: ip, +  - do:, +        bulk:, +          index: ip_addresses, +          type: data, +          refresh: true, +          body: |''', +, +, +for (int i = 0; i < 255; i++) {, +  buildRestTests.setups['iprange'] += """, +            {"index":{}}, +            {"ip": "10.0.0.$i"}""", +}, +for (int i = 0; i < 5; i++) {, +  buildRestTests.setups['iprange'] += """, +            {"index":{}}, +            {"ip": "9.0.0.$i"}""", +  buildRestTests.setups['iprange'] += """, +            {"index":{}}, +            {"ip": "11.0.0.$i"}""", +  buildRestTests.setups['iprange'] += """, +            {"index":{}}, +            {"ip": "12.0.0.$i"}""", +}, +++ b/docs/reference/aggregations/bucket/iprange-aggregation.asciidoc, +GET /ip_addresses/data/_search, +    "size": 10,, +// CONSOLE, +// TEST[setup:iprange], +                    "doc_count": 10, +                    "doc_count": 260, +// TESTRESPONSE[s/\.\.\./"took": $body.took,"timed_out": false,"_shards": $body._shards,"hits": $body.hits,/], +GET /ip_addresses/data/_search, +    "size": 0,, +// CONSOLE, +// TEST[setup:iprange], +    ..., +, +                    "to": "10.0.0.128",, +                    "doc_count": 128, +                    "to": "10.0.0.128",, +                    "doc_count": 128, +// TESTRESPONSE[s/\.\.\./"took": $body.took,"timed_out": false,"_shards": $body._shards,"hits": $body.hits,/], +GET /ip_addresses/data/_search]