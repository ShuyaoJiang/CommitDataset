[+++ b/core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java, +import org.elasticsearch.script.ScriptService;, +        PrimaryShardAllocator.NODE_INITIAL_SHARDS_SETTING,, +        ScriptService.SCRIPT_CACHE_SIZE_SETTING)));, +++ b/core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java, +import org.elasticsearch.script.ScriptService;, +        PrimaryShardAllocator.NODE_INITIAL_SHARDS_SETTING,, +        ScriptService.SCRIPT_CACHE_SIZE_SETTING)));, +++ b/core/src/main/java/org/elasticsearch/script/ScriptService.java, +import org.elasticsearch.common.settings.Setting;, +    public static final Setting<Integer> SCRIPT_CACHE_SIZE_SETTING = Setting.intSetting("script.cache.max_size", 100, 0, false, Setting.Scope.CLUSTER);, +        int cacheMaxSize = SCRIPT_CACHE_SIZE_SETTING.get(settings);, +++ b/core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java, +import org.elasticsearch.script.ScriptService;, +        PrimaryShardAllocator.NODE_INITIAL_SHARDS_SETTING,, +        ScriptService.SCRIPT_CACHE_SIZE_SETTING)));, +++ b/core/src/main/java/org/elasticsearch/script/ScriptService.java, +import org.elasticsearch.common.settings.Setting;, +    public static final Setting<Integer> SCRIPT_CACHE_SIZE_SETTING = Setting.intSetting("script.cache.max_size", 100, 0, false, Setting.Scope.CLUSTER);, +        int cacheMaxSize = SCRIPT_CACHE_SIZE_SETTING.get(settings);, +++ b/core/src/test/java/org/elasticsearch/script/ScriptServiceTests.java, +        builder.put(ScriptService.SCRIPT_CACHE_SIZE_SETTING.getKey(), 1);, +        builder.put(ScriptService.SCRIPT_CACHE_SIZE_SETTING.getKey(), 1);, +++ b/core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java, +import org.elasticsearch.script.ScriptService;, +        PrimaryShardAllocator.NODE_INITIAL_SHARDS_SETTING,, +        ScriptService.SCRIPT_CACHE_SIZE_SETTING)));, +++ b/core/src/main/java/org/elasticsearch/script/ScriptService.java, +import org.elasticsearch.common.settings.Setting;, +    public static final Setting<Integer> SCRIPT_CACHE_SIZE_SETTING = Setting.intSetting("script.cache.max_size", 100, 0, false, Setting.Scope.CLUSTER);, +        int cacheMaxSize = SCRIPT_CACHE_SIZE_SETTING.get(settings);, +++ b/core/src/test/java/org/elasticsearch/script/ScriptServiceTests.java, +        builder.put(ScriptService.SCRIPT_CACHE_SIZE_SETTING.getKey(), 1);, +        builder.put(ScriptService.SCRIPT_CACHE_SIZE_SETTING.getKey(), 1);, +++ b/test/framework/src/main/java/org/elasticsearch/test/InternalTestCluster.java, +            builder.put(ScriptService.SCRIPT_CACHE_SIZE_SETTING.getKey(), RandomInts.randomIntBetween(random, -100, 2000));]