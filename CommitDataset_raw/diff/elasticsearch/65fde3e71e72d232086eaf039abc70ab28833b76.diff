[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/gateway/local/LocalGateway.java, +import org.elasticsearch.cluster.routing.*;, +        // we only write the local metadata if this is a possible master node, +        // currently, we always write the metadata, since we want to keep it in sync with the latest version, but, +        // we need to think of a better way to not persist it when nothing changed, +        if (event.state().nodes().localNode().masterNode()) {, +                            if (indexShardRoutingTable.countWithState(ShardRoutingState.STARTED) == indexShardRoutingTable.size()) {]