[+++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        Configuration currentDistro = project.configurations.create(distroConfigName), +        configureDistributionDependency(project, config.distribution, currentDistro, VersionProperties.elasticsearch), +        for (int i = 0; i < config.numNodes; i++) {, +            Configuration distro = currentDistro, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        Configuration currentDistro = project.configurations.create(distroConfigName), +        configureDistributionDependency(project, config.distribution, currentDistro, VersionProperties.elasticsearch), +        for (int i = 0; i < config.numNodes; i++) {, +            Configuration distro = currentDistro, +++ b/core/src/main/java/org/elasticsearch/monitor/os/OsStats.java, +import org.elasticsearch.Version;, +    public static final Version V_5_1_0 = Version.fromId(5010099);, +        if (in.getVersion().onOrAfter(V_5_1_0)) {, +        } else {, +            this.cgroup = null;, +        }, +        if (out.getVersion().onOrAfter(V_5_1_0)) {, +    }, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        Configuration currentDistro = project.configurations.create(distroConfigName), +        configureDistributionDependency(project, config.distribution, currentDistro, VersionProperties.elasticsearch), +        for (int i = 0; i < config.numNodes; i++) {, +            Configuration distro = currentDistro, +++ b/core/src/main/java/org/elasticsearch/monitor/os/OsStats.java, +import org.elasticsearch.Version;, +    public static final Version V_5_1_0 = Version.fromId(5010099);, +        if (in.getVersion().onOrAfter(V_5_1_0)) {, +        } else {, +            this.cgroup = null;, +        }, +        if (out.getVersion().onOrAfter(V_5_1_0)) {, +    }, +++ b/core/src/test/java/org/elasticsearch/VersionTests.java, +import org.elasticsearch.monitor.os.OsStats;, +        assertUnknownVersion(OsStats.V_5_1_0); // once we released 5.1.0 and it's added to Version.java we need to remove this constant, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        Configuration currentDistro = project.configurations.create(distroConfigName), +        configureDistributionDependency(project, config.distribution, currentDistro, VersionProperties.elasticsearch), +        for (int i = 0; i < config.numNodes; i++) {, +            Configuration distro = currentDistro, +++ b/core/src/main/java/org/elasticsearch/monitor/os/OsStats.java, +import org.elasticsearch.Version;, +    public static final Version V_5_1_0 = Version.fromId(5010099);, +        if (in.getVersion().onOrAfter(V_5_1_0)) {, +        } else {, +            this.cgroup = null;, +        }, +        if (out.getVersion().onOrAfter(V_5_1_0)) {, +    }, +++ b/core/src/test/java/org/elasticsearch/VersionTests.java, +import org.elasticsearch.monitor.os.OsStats;, +        assertUnknownVersion(OsStats.V_5_1_0); // once we released 5.1.0 and it's added to Version.java we need to remove this constant, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/cat.aliases/10_basic.yaml, +  - skip:, +      version: " - 5.0.99", +      reason:  sorting was introduced in 5.1.0, +, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        Configuration currentDistro = project.configurations.create(distroConfigName), +        configureDistributionDependency(project, config.distribution, currentDistro, VersionProperties.elasticsearch), +        for (int i = 0; i < config.numNodes; i++) {, +            Configuration distro = currentDistro, +++ b/core/src/main/java/org/elasticsearch/monitor/os/OsStats.java, +import org.elasticsearch.Version;, +    public static final Version V_5_1_0 = Version.fromId(5010099);, +        if (in.getVersion().onOrAfter(V_5_1_0)) {, +        } else {, +            this.cgroup = null;, +        }, +        if (out.getVersion().onOrAfter(V_5_1_0)) {, +    }, +++ b/core/src/test/java/org/elasticsearch/VersionTests.java, +import org.elasticsearch.monitor.os.OsStats;, +        assertUnknownVersion(OsStats.V_5_1_0); // once we released 5.1.0 and it's added to Version.java we need to remove this constant, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/cat.aliases/10_basic.yaml, +  - skip:, +      version: " - 5.0.99", +      reason:  sorting was introduced in 5.1.0, +, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/cat.indices/10_basic.yaml, +  - skip:, +      version: " - 5.0.99", +      reason:  sorting was introduced in 5.1.0, +, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        Configuration currentDistro = project.configurations.create(distroConfigName), +        configureDistributionDependency(project, config.distribution, currentDistro, VersionProperties.elasticsearch), +        for (int i = 0; i < config.numNodes; i++) {, +            Configuration distro = currentDistro, +++ b/core/src/main/java/org/elasticsearch/monitor/os/OsStats.java, +import org.elasticsearch.Version;, +    public static final Version V_5_1_0 = Version.fromId(5010099);, +        if (in.getVersion().onOrAfter(V_5_1_0)) {, +        } else {, +            this.cgroup = null;, +        }, +        if (out.getVersion().onOrAfter(V_5_1_0)) {, +    }, +++ b/core/src/test/java/org/elasticsearch/VersionTests.java]