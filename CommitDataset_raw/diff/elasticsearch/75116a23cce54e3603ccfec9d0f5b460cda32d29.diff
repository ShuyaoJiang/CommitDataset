[+++ b/test/framework/src/main/java/org/elasticsearch/common/util/MockBigArrays.java, +, +import org.apache.lucene.util.LuceneTestCase;, +import java.util.Iterator;, +                    Iterator<Object> causes = masterCopy.values().iterator();, +                    Object firstCause = causes.next();, +                    RuntimeException exception = new RuntimeException(masterCopy.size() + " arrays have not been released",, +                            firstCause instanceof Throwable ? (Throwable) firstCause : null);, +                    while (causes.hasNext()) {, +                        Object cause = causes.next();, +                        if (cause instanceof Throwable) {, +                            exception.addSuppressed((Throwable) cause);, +                        }, +                    }, +                    throw exception;, +            ACQUIRED_ARRAYS.put(this,, +                    TRACK_ALLOCATIONS ? new RuntimeException("Unreleased array from test: " + LuceneTestCase.getTestClass().getName()), +                            : Boolean.TRUE);, +++ b/test/framework/src/main/java/org/elasticsearch/common/util/MockBigArrays.java, +, +import org.apache.lucene.util.LuceneTestCase;, +import java.util.Iterator;, +                    Iterator<Object> causes = masterCopy.values().iterator();, +                    Object firstCause = causes.next();, +                    RuntimeException exception = new RuntimeException(masterCopy.size() + " arrays have not been released",, +                            firstCause instanceof Throwable ? (Throwable) firstCause : null);, +                    while (causes.hasNext()) {, +                        Object cause = causes.next();, +                        if (cause instanceof Throwable) {, +                            exception.addSuppressed((Throwable) cause);, +                        }, +                    }, +                    throw exception;, +            ACQUIRED_ARRAYS.put(this,, +                    TRACK_ALLOCATIONS ? new RuntimeException("Unreleased array from test: " + LuceneTestCase.getTestClass().getName()), +                            : Boolean.TRUE);, +++ b/test/framework/src/main/java/org/elasticsearch/common/util/MockPageCacheRecycler.java, +import org.apache.lucene.util.LuceneTestCase;, +import java.util.Iterator;, +                    Iterator<Throwable> causes = masterCopy.values().iterator();, +                    Throwable firstCause = causes.next();, +                    RuntimeException exception = new RuntimeException(masterCopy.size() + " pages have not been released", firstCause);, +                    while (causes.hasNext()) {, +                        exception.addSuppressed(causes.next());, +                    }, +                    throw exception;, +        ACQUIRED_PAGES.put(v, new Throwable("Unreleased Page from test: " + LuceneTestCase.getTestClass().getName()));]