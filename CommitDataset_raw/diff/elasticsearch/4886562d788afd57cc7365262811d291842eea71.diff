[+++ b/core/src/main/java/org/elasticsearch/indices/cluster/IndicesClusterStateService.java, +            final DiscoveryNode localNode = clusterService.localNode();, +                final ShardId sId = indexShard.shardId();, +                        success = indexShard.recoverFromStore(shardRouting, localNode);, +                            success = indexShard.restoreFromRepository(shardRouting, indexShardRepository, localNode);, +                                restoreService.failRestore(restoreSource.snapshotId(), sId);, +                            restoreService.indexShardRestoreCompleted(restoreSource.snapshotId(), sId);]