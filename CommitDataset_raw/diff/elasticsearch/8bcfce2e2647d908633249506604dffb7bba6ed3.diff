[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/node/DiscoveryNode.java, +        attributes.remove("name"); // name is extracted in other places, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/node/DiscoveryNode.java, +        attributes.remove("name"); // name is extracted in other places, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/node/internal/InternalSettingsPerparer.java, +            if (name == null || name.isEmpty()) {, +                name = settingsBuilder.get("node.name");, +                if (name == null || name.isEmpty()) {, +                }, +            }]