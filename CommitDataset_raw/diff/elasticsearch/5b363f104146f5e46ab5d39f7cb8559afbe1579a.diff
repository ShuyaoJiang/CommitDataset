[+++ b/watcher/src/main/java/org/elasticsearch/watcher/WatcherPlugin.java, +import org.elasticsearch.watcher.support.text.TextTemplateModule;, +import org.elasticsearch.watcher.support.text.xmustache.XMustacheScriptEngineService;, +                new TextTemplateModule(),, +++ b/watcher/src/main/java/org/elasticsearch/watcher/WatcherPlugin.java, +import org.elasticsearch.watcher.support.text.TextTemplateModule;, +import org.elasticsearch.watcher.support.text.xmustache.XMustacheScriptEngineService;, +                new TextTemplateModule(),, +++ b/watcher/src/main/java/org/elasticsearch/watcher/actions/ActionBuilders.java, +import org.elasticsearch.watcher.support.text.TextTemplate;, +        return loggingAction(TextTemplate.inline(text));, +    public static LoggingAction.Builder loggingAction(TextTemplate.Builder text) {, +    public static LoggingAction.Builder loggingAction(TextTemplate text) {, +        return hipchatAction(TextTemplate.inline(message));, +        return hipchatAction(account, TextTemplate.inline(body));, +    public static HipChatAction.Builder hipchatAction(TextTemplate.Builder body) {, +    public static HipChatAction.Builder hipchatAction(String account, TextTemplate.Builder body) {, +    public static HipChatAction.Builder hipchatAction(TextTemplate body) {, +    public static HipChatAction.Builder hipchatAction(String account, TextTemplate body) {, +++ b/watcher/src/main/java/org/elasticsearch/watcher/WatcherPlugin.java, +import org.elasticsearch.watcher.support.text.TextTemplateModule;, +import org.elasticsearch.watcher.support.text.xmustache.XMustacheScriptEngineService;, +                new TextTemplateModule(),, +++ b/watcher/src/main/java/org/elasticsearch/watcher/actions/ActionBuilders.java, +import org.elasticsearch.watcher.support.text.TextTemplate;, +        return loggingAction(TextTemplate.inline(text));, +    public static LoggingAction.Builder loggingAction(TextTemplate.Builder text) {, +    public static LoggingAction.Builder loggingAction(TextTemplate text) {, +        return hipchatAction(TextTemplate.inline(message));, +        return hipchatAction(account, TextTemplate.inline(body));, +    public static HipChatAction.Builder hipchatAction(TextTemplate.Builder body) {, +    public static HipChatAction.Builder hipchatAction(String account, TextTemplate.Builder body) {, +    public static HipChatAction.Builder hipchatAction(TextTemplate body) {, +    public static HipChatAction.Builder hipchatAction(String account, TextTemplate body) {, +++ b/watcher/src/main/java/org/elasticsearch/watcher/actions/email/EmailActionFactory.java, +import org.elasticsearch.watcher.support.text.TextTemplateEngine;, +    private final TextTemplateEngine templateEngine;, +    public EmailActionFactory(Settings settings, EmailService emailService, TextTemplateEngine templateEngine, HtmlSanitizer htmlSanitizer) {, +++ b/watcher/src/main/java/org/elasticsearch/watcher/WatcherPlugin.java, +import org.elasticsearch.watcher.support.text.TextTemplateModule;, +import org.elasticsearch.watcher.support.text.xmustache.XMustacheScriptEngineService;, +                new TextTemplateModule(),, +++ b/watcher/src/main/java/org/elasticsearch/watcher/actions/ActionBuilders.java, +import org.elasticsearch.watcher.support.text.TextTemplate;, +        return loggingAction(TextTemplate.inline(text));, +    public static LoggingAction.Builder loggingAction(TextTemplate.Builder text) {, +    public static LoggingAction.Builder loggingAction(TextTemplate text) {, +        return hipchatAction(TextTemplate.inline(message));, +        return hipchatAction(account, TextTemplate.inline(body));, +    public static HipChatAction.Builder hipchatAction(TextTemplate.Builder body) {, +    public static HipChatAction.Builder hipchatAction(String account, TextTemplate.Builder body) {, +    public static HipChatAction.Builder hipchatAction(TextTemplate body) {, +    public static HipChatAction.Builder hipchatAction(String account, TextTemplate body) {, +++ b/watcher/src/main/java/org/elasticsearch/watcher/actions/email/EmailActionFactory.java, +import org.elasticsearch.watcher.support.text.TextTemplateEngine;, +    private final TextTemplateEngine templateEngine;, +    public EmailActionFactory(Settings settings, EmailService emailService, TextTemplateEngine templateEngine, HtmlSanitizer htmlSanitizer) {, +++ b/watcher/src/main/java/org/elasticsearch/watcher/actions/email/ExecutableEmailAction.java, +import org.elasticsearch.watcher.support.text.TextTemplateEngine;, +    final TextTemplateEngine templateEngine;, +    public ExecutableEmailAction(EmailAction action, ESLogger logger, EmailService emailService, TextTemplateEngine templateEngine, HtmlSanitizer htmlSanitizer) {, +++ b/watcher/src/main/java/org/elasticsearch/watcher/WatcherPlugin.java, +import org.elasticsearch.watcher.support.text.TextTemplateModule;, +import org.elasticsearch.watcher.support.text.xmustache.XMustacheScriptEngineService;, +                new TextTemplateModule(),, +++ b/watcher/src/main/java/org/elasticsearch/watcher/actions/ActionBuilders.java, +import org.elasticsearch.watcher.support.text.TextTemplate;, +        return loggingAction(TextTemplate.inline(text));, +    public static LoggingAction.Builder loggingAction(TextTemplate.Builder text) {, +    public static LoggingAction.Builder loggingAction(TextTemplate text) {, +        return hipchatAction(TextTemplate.inline(message));, +        return hipchatAction(account, TextTemplate.inline(body));, +    public static HipChatAction.Builder hipchatAction(TextTemplate.Builder body) {, +    public static HipChatAction.Builder hipchatAction(String account, TextTemplate.Builder body) {, +    public static HipChatAction.Builder hipchatAction(TextTemplate body) {, +    public static HipChatAction.Builder hipchatAction(String account, TextTemplate body) {, +++ b/watcher/src/main/java/org/elasticsearch/watcher/actions/email/EmailActionFactory.java, +import org.elasticsearch.watcher.support.text.TextTemplateEngine;, +    private final TextTemplateEngine templateEngine;, +    public EmailActionFactory(Settings settings, EmailService emailService, TextTemplateEngine templateEngine, HtmlSanitizer htmlSanitizer) {, +++ b/watcher/src/main/java/org/elasticsearch/watcher/actions/email/ExecutableEmailAction.java, +import org.elasticsearch.watcher.support.text.TextTemplateEngine;, +    final TextTemplateEngine templateEngine;, +    public ExecutableEmailAction(EmailAction action, ESLogger logger, EmailService emailService, TextTemplateEngine templateEngine, HtmlSanitizer htmlSanitizer) {, +++ b/watcher/src/main/java/org/elasticsearch/watcher/actions/email/service/EmailTemplate.java, +import org.elasticsearch.watcher.support.text.TextTemplate;, +import org.elasticsearch.watcher.support.text.TextTemplateEngine;, +    final TextTemplate from;, +    final TextTemplate[] replyTo;, +    final TextTemplate priority;, +    final TextTemplate[] to;, +    final TextTemplate[] cc;, +    final TextTemplate[] bcc;, +    final TextTemplate subject;, +    final TextTemplate textBody;, +    final TextTemplate htmlBody;, +    public EmailTemplate(TextTemplate from, TextTemplate[] replyTo, TextTemplate priority, TextTemplate[] to,, +                         TextTemplate[] cc, TextTemplate[] bcc, TextTemplate subject, TextTemplate textBody,, +                         TextTemplate htmlBody) {, +    public TextTemplate from() {]