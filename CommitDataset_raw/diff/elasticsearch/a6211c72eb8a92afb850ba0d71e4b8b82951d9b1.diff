[+++ b/core/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java, +import java.util.Collections;, +    private volatile List<DiscoveryNode> listedNodes = Collections.emptyList();, +    private volatile List<DiscoveryNode> nodes = Collections.emptyList();, +    private volatile List<DiscoveryNode> filteredNodes = Collections.emptyList();, +        return Collections.unmodifiableList(lstBuilder);, +                        transportAddress, Collections.emptyMap(), Collections.emptySet(), minCompatibilityVersion);, +            listedNodes = Collections.unmodifiableList(builder);, +            listedNodes = Collections.unmodifiableList(builder);, +            nodes = Collections.emptyList();, +            return Collections.unmodifiableList(new ArrayList<>(nodes));, +            filteredNodes = Collections.unmodifiableList(new ArrayList<>(newFilteredNodes));, +            filteredNodes = Collections.unmodifiableList(new ArrayList<>(newFilteredNodes));]