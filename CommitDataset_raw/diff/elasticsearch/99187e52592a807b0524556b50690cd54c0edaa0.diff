[+++ b/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java, +++ b/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java, +++ b/src/main/java/org/elasticsearch/discovery/zen/fd/MasterFaultDetection.java, +                            channel.sendResponse(new MasterPingResponseResponse());, +                channel.sendResponse(new MasterPingResponseResponse());, +            if (in.getVersion().onOrBefore(Version.V_1_4_0_Beta1)) {, +                // old listedOnMaster, +                in.readBoolean();, +            }, +            if (out.getVersion().onOrBefore(Version.V_1_4_0_Beta1)) {, +                // old listedOnMaster, +                out.writeBoolean(true);, +            }, +++ b/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java, +++ b/src/main/java/org/elasticsearch/discovery/zen/fd/MasterFaultDetection.java, +                            channel.sendResponse(new MasterPingResponseResponse());, +                channel.sendResponse(new MasterPingResponseResponse());, +            if (in.getVersion().onOrBefore(Version.V_1_4_0_Beta1)) {, +                // old listedOnMaster, +                in.readBoolean();, +            }, +            if (out.getVersion().onOrBefore(Version.V_1_4_0_Beta1)) {, +                // old listedOnMaster, +                out.writeBoolean(true);, +            }, +++ b/src/test/java/org/elasticsearch/discovery/ZenFaultDetectionTests.java]