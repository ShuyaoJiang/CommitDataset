[+++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]discovery[/\\]NoneDiscovery.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]search[/\\]aggregations[/\\]ParsedAggregation.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]search[/\\]aggregations[/\\]ParsedAggregationTests.java" checks="LineLength" />, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]discovery[/\\]NoneDiscovery.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]search[/\\]aggregations[/\\]ParsedAggregation.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]search[/\\]aggregations[/\\]ParsedAggregationTests.java" checks="LineLength" />, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +        ClusterHealthResponse response = clusterHealth(request, clusterState, clusterService.numberOfPendingTasks(),, +                gatewayAllocator.getNumberOfInFlightFetch(), clusterService.getMaxTaskWaitTime());, +        ClusterHealthResponse response = clusterHealth(request, clusterState, clusterService.numberOfPendingTasks(),, +                gatewayAllocator.getNumberOfInFlightFetch(), clusterService.getMaxTaskWaitTime());, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]discovery[/\\]NoneDiscovery.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]search[/\\]aggregations[/\\]ParsedAggregation.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]search[/\\]aggregations[/\\]ParsedAggregationTests.java" checks="LineLength" />, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +        ClusterHealthResponse response = clusterHealth(request, clusterState, clusterService.numberOfPendingTasks(),, +                gatewayAllocator.getNumberOfInFlightFetch(), clusterService.getMaxTaskWaitTime());, +        ClusterHealthResponse response = clusterHealth(request, clusterState, clusterService.numberOfPendingTasks(),, +                gatewayAllocator.getNumberOfInFlightFetch(), clusterService.getMaxTaskWaitTime());, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/tasks/TransportPendingClusterTasksAction.java, +        final List<PendingClusterTask> pendingTasks = clusterService.pendingTasks();, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]discovery[/\\]NoneDiscovery.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]search[/\\]aggregations[/\\]ParsedAggregation.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]search[/\\]aggregations[/\\]ParsedAggregationTests.java" checks="LineLength" />, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +        ClusterHealthResponse response = clusterHealth(request, clusterState, clusterService.numberOfPendingTasks(),, +                gatewayAllocator.getNumberOfInFlightFetch(), clusterService.getMaxTaskWaitTime());, +        ClusterHealthResponse response = clusterHealth(request, clusterState, clusterService.numberOfPendingTasks(),, +                gatewayAllocator.getNumberOfInFlightFetch(), clusterService.getMaxTaskWaitTime());, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/tasks/TransportPendingClusterTasksAction.java, +        final List<PendingClusterTask> pendingTasks = clusterService.pendingTasks();, +++ b/core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]discovery[/\\]NoneDiscovery.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]search[/\\]aggregations[/\\]ParsedAggregation.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]search[/\\]aggregations[/\\]ParsedAggregationTests.java" checks="LineLength" />, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +        ClusterHealthResponse response = clusterHealth(request, clusterState, clusterService.numberOfPendingTasks(),, +                gatewayAllocator.getNumberOfInFlightFetch(), clusterService.getMaxTaskWaitTime());, +        ClusterHealthResponse response = clusterHealth(request, clusterState, clusterService.numberOfPendingTasks(),, +                gatewayAllocator.getNumberOfInFlightFetch(), clusterService.getMaxTaskWaitTime());, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/tasks/TransportPendingClusterTasksAction.java, +        final List<PendingClusterTask> pendingTasks = clusterService.pendingTasks();, +++ b/core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterState.java, +import org.elasticsearch.Version;, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]discovery[/\\]NoneDiscovery.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]search[/\\]aggregations[/\\]ParsedAggregation.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]search[/\\]aggregations[/\\]ParsedAggregationTests.java" checks="LineLength" />, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +        ClusterHealthResponse response = clusterHealth(request, clusterState, clusterService.numberOfPendingTasks(),, +                gatewayAllocator.getNumberOfInFlightFetch(), clusterService.getMaxTaskWaitTime());, +        ClusterHealthResponse response = clusterHealth(request, clusterState, clusterService.numberOfPendingTasks(),, +                gatewayAllocator.getNumberOfInFlightFetch(), clusterService.getMaxTaskWaitTime());, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/tasks/TransportPendingClusterTasksAction.java, +        final List<PendingClusterTask> pendingTasks = clusterService.pendingTasks();, +++ b/core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterState.java, +import org.elasticsearch.Version;, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterStateObserver.java, +    private final ClusterService clusterService;, +        this.clusterService = clusterService;, +        ClusterState clusterState = clusterService.state();, +                    lastObservedState.set(new StoredState(clusterService.state()));, +        ClusterState newState = clusterService.state();, +            clusterService.addTimeoutListener(timeoutTimeLeftMS == null ? null : new TimeValue(timeoutTimeLeftMS), clusterStateListener);, +                    clusterService.removeTimeoutListener(this);, +            ClusterState newState = clusterService.state();, +                    clusterService.removeTimeoutListener(this);, +                clusterService.removeTimeoutListener(this);, +                clusterService.removeTimeoutListener(this);, +                lastObservedState.set(new StoredState(clusterService.state()));, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]discovery[/\\]NoneDiscovery.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]search[/\\]aggregations[/\\]ParsedAggregation.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]search[/\\]aggregations[/\\]ParsedAggregationTests.java" checks="LineLength" />, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +        ClusterHealthResponse response = clusterHealth(request, clusterState, clusterService.numberOfPendingTasks(),, +                gatewayAllocator.getNumberOfInFlightFetch(), clusterService.getMaxTaskWaitTime());, +        ClusterHealthResponse response = clusterHealth(request, clusterState, clusterService.numberOfPendingTasks(),, +                gatewayAllocator.getNumberOfInFlightFetch(), clusterService.getMaxTaskWaitTime());, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/tasks/TransportPendingClusterTasksAction.java, +        final List<PendingClusterTask> pendingTasks = clusterService.pendingTasks();, +++ b/core/src/main/java/org/elasticsearch/action/update/UpdateRequest.java, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterState.java, +import org.elasticsearch.Version;, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterStateObserver.java, +    private final ClusterService clusterService;, +        this.clusterService = clusterService;, +        ClusterState clusterState = clusterService.state();, +                    lastObservedState.set(new StoredState(clusterService.state()));, +        ClusterState newState = clusterService.state();, +            clusterService.addTimeoutListener(timeoutTimeLeftMS == null ? null : new TimeValue(timeoutTimeLeftMS), clusterStateListener);, +                    clusterService.removeTimeoutListener(this);, +            ClusterState newState = clusterService.state();]