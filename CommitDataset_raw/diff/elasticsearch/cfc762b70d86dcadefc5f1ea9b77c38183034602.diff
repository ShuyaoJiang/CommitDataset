[+++ b/client/rest/src/main/java/org/elasticsearch/client/RequestLogger.java, +import org.apache.http.RequestLine;, +            logger.debug("request [" + request.getMethod() + " " + host + getUri(request.getRequestLine()) +, +        logger.debug("request [" + request.getMethod() + " " + host + getUri(request.getRequestLine()) + "] failed", e);, +        String requestLine = "curl -iX " + request.getMethod() + " '" + host + getUri(request.getRequestLine()) + "'";, +, +    private static String getUri(RequestLine requestLine) {, +        if (requestLine.getUri().charAt(0) != '/') {, +            return "/" + requestLine.getUri();, +        }, +        return requestLine.getUri();, +    }, +++ b/client/rest/src/main/java/org/elasticsearch/client/RequestLogger.java, +import org.apache.http.RequestLine;, +            logger.debug("request [" + request.getMethod() + " " + host + getUri(request.getRequestLine()) +, +        logger.debug("request [" + request.getMethod() + " " + host + getUri(request.getRequestLine()) + "] failed", e);, +        String requestLine = "curl -iX " + request.getMethod() + " '" + host + getUri(request.getRequestLine()) + "'";, +, +    private static String getUri(RequestLine requestLine) {, +        if (requestLine.getUri().charAt(0) != '/') {, +            return "/" + requestLine.getUri();, +        }, +        return requestLine.getUri();, +    }, +++ b/client/rest/src/test/java/org/elasticsearch/client/RequestLoggerTests.java, +, +        String expectedEndpoint = "/index/type/_api";, +        URI uri;, +        if (randomBoolean()) {, +            uri = new URI(expectedEndpoint);, +        } else {, +            uri = new URI("index/type/_api");, +        }, +        String expected = "curl -iX " + request.getMethod() + " '" + host + expectedEndpoint + "'";]