[+++ b/qa/full-cluster-restart/src/test/java/org/elasticsearch/upgrades/FullClusterRestartIT.java, +            rsp = toMap(r);, +            logger.info("upgrade api response: {}", rsp);, +            Map<?, ?>  versions = (Map<?, ?>) XContentMapValues.extractValue("upgraded_indices." + index, rsp);, +            Version upgradeVersion = Version.fromString((String) versions.get("upgrade_version"));, +            assertEquals(Version.CURRENT, upgradeVersion);, +            org.apache.lucene.util.Version luceneVersion =, +                org.apache.lucene.util.Version.parse((String) versions.get("oldest_lucene_segment_version"));, +            assertEquals(Version.CURRENT.luceneVersion, luceneVersion);, +            rsp = toMap(client().performRequest("GET", "/_upgrade"));, +            logger.info("upgrade status api response: {}", rsp);, +            indexUpgradeStatus = (Map<?, ?>) XContentMapValues.extractValue("indices." + index, rsp);, +            assertNotNull(indexUpgradeStatus);, +            totalBytes = (Integer) indexUpgradeStatus.get("size_in_bytes");, +            assertThat(totalBytes, greaterThan(0));, +            toUpgradeBytes = (Integer) indexUpgradeStatus.get("size_to_upgrade_in_bytes");, +            assertEquals(0, toUpgradeBytes);, +                        luceneVersion = org.apache.lucene.util.Version.parse((String) segmentRsp.get("version"));]