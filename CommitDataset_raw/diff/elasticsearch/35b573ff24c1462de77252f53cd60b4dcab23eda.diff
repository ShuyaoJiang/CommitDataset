[+++ b/src/main/java/org/elasticsearch/action/bulk/BulkAction.java, +                .withType(TransportRequestOptions.Type.BULK), +++ b/src/main/java/org/elasticsearch/action/bulk/BulkAction.java, +                .withType(TransportRequestOptions.Type.BULK), +++ b/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java, +                            TransportRequestOptions.options().withType(TransportRequestOptions.Type.STATE).withTimeout(pingTimeout),, +                                    TransportRequestOptions.options().withType(TransportRequestOptions.Type.STATE).withTimeout(pingTimeout),, +++ b/src/main/java/org/elasticsearch/action/bulk/BulkAction.java, +                .withType(TransportRequestOptions.Type.BULK), +++ b/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java, +                            TransportRequestOptions.options().withType(TransportRequestOptions.Type.STATE).withTimeout(pingTimeout),, +                                    TransportRequestOptions.options().withType(TransportRequestOptions.Type.STATE).withTimeout(pingTimeout),, +++ b/src/main/java/org/elasticsearch/discovery/zen/fd/MasterFaultDetection.java, +            transportService.sendRequest(masterToPing, MasterPingRequestHandler.ACTION, new MasterPingRequest(nodesProvider.nodes().localNode().id(), masterToPing.id()), options().withType(TransportRequestOptions.Type.PING).withTimeout(pingRetryTimeout),, +                                        transportService.sendRequest(masterToPing, MasterPingRequestHandler.ACTION, new MasterPingRequest(nodesProvider.nodes().localNode().id(), masterToPing.id()), options().withType(TransportRequestOptions.Type.PING).withTimeout(pingRetryTimeout), this);, +++ b/src/main/java/org/elasticsearch/action/bulk/BulkAction.java, +                .withType(TransportRequestOptions.Type.BULK), +++ b/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java, +                            TransportRequestOptions.options().withType(TransportRequestOptions.Type.STATE).withTimeout(pingTimeout),, +                                    TransportRequestOptions.options().withType(TransportRequestOptions.Type.STATE).withTimeout(pingTimeout),, +++ b/src/main/java/org/elasticsearch/discovery/zen/fd/MasterFaultDetection.java, +            transportService.sendRequest(masterToPing, MasterPingRequestHandler.ACTION, new MasterPingRequest(nodesProvider.nodes().localNode().id(), masterToPing.id()), options().withType(TransportRequestOptions.Type.PING).withTimeout(pingRetryTimeout),, +                                        transportService.sendRequest(masterToPing, MasterPingRequestHandler.ACTION, new MasterPingRequest(nodesProvider.nodes().localNode().id(), masterToPing.id()), options().withType(TransportRequestOptions.Type.PING).withTimeout(pingRetryTimeout), this);, +++ b/src/main/java/org/elasticsearch/discovery/zen/fd/NodesFaultDetection.java, +            transportService.sendRequest(node, PingRequestHandler.ACTION, new PingRequest(node.id()), options().withType(TransportRequestOptions.Type.PING).withTimeout(pingRetryTimeout),, +                                            options().withType(TransportRequestOptions.Type.PING).withTimeout(pingRetryTimeout), this);, +++ b/src/main/java/org/elasticsearch/action/bulk/BulkAction.java, +                .withType(TransportRequestOptions.Type.BULK), +++ b/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java, +                            TransportRequestOptions.options().withType(TransportRequestOptions.Type.STATE).withTimeout(pingTimeout),, +                                    TransportRequestOptions.options().withType(TransportRequestOptions.Type.STATE).withTimeout(pingTimeout),, +++ b/src/main/java/org/elasticsearch/discovery/zen/fd/MasterFaultDetection.java, +            transportService.sendRequest(masterToPing, MasterPingRequestHandler.ACTION, new MasterPingRequest(nodesProvider.nodes().localNode().id(), masterToPing.id()), options().withType(TransportRequestOptions.Type.PING).withTimeout(pingRetryTimeout),, +                                        transportService.sendRequest(masterToPing, MasterPingRequestHandler.ACTION, new MasterPingRequest(nodesProvider.nodes().localNode().id(), masterToPing.id()), options().withType(TransportRequestOptions.Type.PING).withTimeout(pingRetryTimeout), this);, +++ b/src/main/java/org/elasticsearch/discovery/zen/fd/NodesFaultDetection.java, +            transportService.sendRequest(node, PingRequestHandler.ACTION, new PingRequest(node.id()), options().withType(TransportRequestOptions.Type.PING).withTimeout(pingRetryTimeout),, +                                            options().withType(TransportRequestOptions.Type.PING).withTimeout(pingRetryTimeout), this);, +++ b/src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java, +                TransportRequestOptions options = TransportRequestOptions.options().withType(TransportRequestOptions.Type.STATE).withCompress(false);, +++ b/src/main/java/org/elasticsearch/action/bulk/BulkAction.java, +                .withType(TransportRequestOptions.Type.BULK), +++ b/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java, +                            TransportRequestOptions.options().withType(TransportRequestOptions.Type.STATE).withTimeout(pingTimeout),, +                                    TransportRequestOptions.options().withType(TransportRequestOptions.Type.STATE).withTimeout(pingTimeout),, +++ b/src/main/java/org/elasticsearch/discovery/zen/fd/MasterFaultDetection.java, +            transportService.sendRequest(masterToPing, MasterPingRequestHandler.ACTION, new MasterPingRequest(nodesProvider.nodes().localNode().id(), masterToPing.id()), options().withType(TransportRequestOptions.Type.PING).withTimeout(pingRetryTimeout),, +                                        transportService.sendRequest(masterToPing, MasterPingRequestHandler.ACTION, new MasterPingRequest(nodesProvider.nodes().localNode().id(), masterToPing.id()), options().withType(TransportRequestOptions.Type.PING).withTimeout(pingRetryTimeout), this);, +++ b/src/main/java/org/elasticsearch/discovery/zen/fd/NodesFaultDetection.java, +            transportService.sendRequest(node, PingRequestHandler.ACTION, new PingRequest(node.id()), options().withType(TransportRequestOptions.Type.PING).withTimeout(pingRetryTimeout),, +                                            options().withType(TransportRequestOptions.Type.PING).withTimeout(pingRetryTimeout), this);, +++ b/src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java, +                TransportRequestOptions options = TransportRequestOptions.options().withType(TransportRequestOptions.Type.STATE).withCompress(false);, +++ b/src/main/java/org/elasticsearch/indices/recovery/RecoverySource.java, +                                                TransportRequestOptions.options().withCompress(shouldCompressRequest).withType(TransportRequestOptions.Type.RECOVERY).withTimeout(internalActionTimeout), EmptyTransportResponseHandler.INSTANCE_SAME).txGet();, +                        transportService.submitRequest(request.targetNode(), RecoveryTarget.Actions.TRANSLOG_OPS, translogOperationsRequest, TransportRequestOptions.options().withCompress(recoverySettings.compress()).withType(TransportRequestOptions.Type.RECOVERY).withTimeout(internalActionLongTimeout), EmptyTransportResponseHandler.INSTANCE_SAME).txGet();, +                    transportService.submitRequest(request.targetNode(), RecoveryTarget.Actions.TRANSLOG_OPS, translogOperationsRequest, TransportRequestOptions.options().withCompress(recoverySettings.compress()).withType(TransportRequestOptions.Type.RECOVERY).withTimeout(internalActionLongTimeout), EmptyTransportResponseHandler.INSTANCE_SAME).txGet();, +++ b/src/main/java/org/elasticsearch/action/bulk/BulkAction.java, +                .withType(TransportRequestOptions.Type.BULK), +++ b/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java, +                            TransportRequestOptions.options().withType(TransportRequestOptions.Type.STATE).withTimeout(pingTimeout),, +                                    TransportRequestOptions.options().withType(TransportRequestOptions.Type.STATE).withTimeout(pingTimeout),, +++ b/src/main/java/org/elasticsearch/discovery/zen/fd/MasterFaultDetection.java, +            transportService.sendRequest(masterToPing, MasterPingRequestHandler.ACTION, new MasterPingRequest(nodesProvider.nodes().localNode().id(), masterToPing.id()), options().withType(TransportRequestOptions.Type.PING).withTimeout(pingRetryTimeout),, +                                        transportService.sendRequest(masterToPing, MasterPingRequestHandler.ACTION, new MasterPingRequest(nodesProvider.nodes().localNode().id(), masterToPing.id()), options().withType(TransportRequestOptions.Type.PING).withTimeout(pingRetryTimeout), this);, +++ b/src/main/java/org/elasticsearch/discovery/zen/fd/NodesFaultDetection.java, +            transportService.sendRequest(node, PingRequestHandler.ACTION, new PingRequest(node.id()), options().withType(TransportRequestOptions.Type.PING).withTimeout(pingRetryTimeout),, +                                            options().withType(TransportRequestOptions.Type.PING).withTimeout(pingRetryTimeout), this);, +++ b/src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java, +                TransportRequestOptions options = TransportRequestOptions.options().withType(TransportRequestOptions.Type.STATE).withCompress(false);, +++ b/src/main/java/org/elasticsearch/indices/recovery/RecoverySource.java, +                                                TransportRequestOptions.options().withCompress(shouldCompressRequest).withType(TransportRequestOptions.Type.RECOVERY).withTimeout(internalActionTimeout), EmptyTransportResponseHandler.INSTANCE_SAME).txGet();, +                        transportService.submitRequest(request.targetNode(), RecoveryTarget.Actions.TRANSLOG_OPS, translogOperationsRequest, TransportRequestOptions.options().withCompress(recoverySettings.compress()).withType(TransportRequestOptions.Type.RECOVERY).withTimeout(internalActionLongTimeout), EmptyTransportResponseHandler.INSTANCE_SAME).txGet();, +                    transportService.submitRequest(request.targetNode(), RecoveryTarget.Actions.TRANSLOG_OPS, translogOperationsRequest, TransportRequestOptions.options().withCompress(recoverySettings.compress()).withType(TransportRequestOptions.Type.RECOVERY).withTimeout(internalActionLongTimeout), EmptyTransportResponseHandler.INSTANCE_SAME).txGet();, +++ b/src/main/java/org/elasticsearch/transport/TransportRequestOptions.java, +        RECOVERY,, +        BULK,, +        REG,, +        STATE,, +            if ("bulk".equalsIgnoreCase(type)) {, +                return BULK;, +            } else if ("reg".equalsIgnoreCase(type)) {, +                return REG;, +            } else if ("state".equalsIgnoreCase(type)) {, +                return STATE;, +            } else if ("recovery".equalsIgnoreCase(type)) {, +                return RECOVERY;, +    private Type type = Type.REG;, +++ b/src/main/java/org/elasticsearch/action/bulk/BulkAction.java, +                .withType(TransportRequestOptions.Type.BULK), +++ b/src/main/java/org/elasticsearch/client/transport/TransportClientNodesService.java, +                            TransportRequestOptions.options().withType(TransportRequestOptions.Type.STATE).withTimeout(pingTimeout),, +                                    TransportRequestOptions.options().withType(TransportRequestOptions.Type.STATE).withTimeout(pingTimeout),, +++ b/src/main/java/org/elasticsearch/discovery/zen/fd/MasterFaultDetection.java, +            transportService.sendRequest(masterToPing, MasterPingRequestHandler.ACTION, new MasterPingRequest(nodesProvider.nodes().localNode().id(), masterToPing.id()), options().withType(TransportRequestOptions.Type.PING).withTimeout(pingRetryTimeout),, +                                        transportService.sendRequest(masterToPing, MasterPingRequestHandler.ACTION, new MasterPingRequest(nodesProvider.nodes().localNode().id(), masterToPing.id()), options().withType(TransportRequestOptions.Type.PING).withTimeout(pingRetryTimeout), this);, +++ b/src/main/java/org/elasticsearch/discovery/zen/fd/NodesFaultDetection.java, +            transportService.sendRequest(node, PingRequestHandler.ACTION, new PingRequest(node.id()), options().withType(TransportRequestOptions.Type.PING).withTimeout(pingRetryTimeout),, +                                            options().withType(TransportRequestOptions.Type.PING).withTimeout(pingRetryTimeout), this);, +++ b/src/main/java/org/elasticsearch/discovery/zen/publish/PublishClusterStateAction.java, +                TransportRequestOptions options = TransportRequestOptions.options().withType(TransportRequestOptions.Type.STATE).withCompress(false);]