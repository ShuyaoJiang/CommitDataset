[+++ b/src/main/java/org/elasticsearch/alerts/actions/AlertActionEntry.java, +import org.elasticsearch.alerts.AlertUtils;, +            historyEntry.field("request");, +            AlertUtils.writeSearchRequest(searchRequest, historyEntry);, +            ByteArrayOutputStream out = new ByteArrayOutputStream();, +++ b/src/main/java/org/elasticsearch/alerts/actions/AlertActionEntry.java, +import org.elasticsearch.alerts.AlertUtils;, +            historyEntry.field("request");, +            AlertUtils.writeSearchRequest(searchRequest, historyEntry);, +            ByteArrayOutputStream out = new ByteArrayOutputStream();, +++ b/src/main/java/org/elasticsearch/alerts/actions/AlertActionManager.java, +    public static final String REQUEST = "request";, +                        case REQUEST:, +                            entry.setSearchRequest(AlertUtils.readSearchRequest(parser));, +                            break;, +++ b/src/main/java/org/elasticsearch/alerts/actions/AlertActionEntry.java, +import org.elasticsearch.alerts.AlertUtils;, +            historyEntry.field("request");, +            AlertUtils.writeSearchRequest(searchRequest, historyEntry);, +            ByteArrayOutputStream out = new ByteArrayOutputStream();, +++ b/src/main/java/org/elasticsearch/alerts/actions/AlertActionManager.java, +    public static final String REQUEST = "request";, +                        case REQUEST:, +                            entry.setSearchRequest(AlertUtils.readSearchRequest(parser));, +                            break;, +++ b/src/main/resources/alerthistory.json, +        "request" : {, +          "type" : "object",, +          "dynamic" : true, +++ b/src/main/java/org/elasticsearch/alerts/actions/AlertActionEntry.java, +import org.elasticsearch.alerts.AlertUtils;, +            historyEntry.field("request");, +            AlertUtils.writeSearchRequest(searchRequest, historyEntry);, +            ByteArrayOutputStream out = new ByteArrayOutputStream();, +++ b/src/main/java/org/elasticsearch/alerts/actions/AlertActionManager.java, +    public static final String REQUEST = "request";, +                        case REQUEST:, +                            entry.setSearchRequest(AlertUtils.readSearchRequest(parser));, +                            break;, +++ b/src/main/resources/alerthistory.json, +        "request" : {, +          "type" : "object",, +          "dynamic" : true, +++ b/src/test/java/org/elasticsearch/alerts/actions/AlertActionsTest.java, +import org.elasticsearch.alerts.AlertUtils;, +import org.elasticsearch.alerts.transport.actions.index.IndexAlertRequest;, +import org.elasticsearch.alerts.transport.actions.index.IndexAlertResponse;, +import org.elasticsearch.common.settings.ImmutableSettings;, +import org.elasticsearch.common.settings.Settings;, +import org.elasticsearch.common.xcontent.ToXContent;, +import org.elasticsearch.common.xcontent.XContentBuilder;, +import org.elasticsearch.common.xcontent.XContentFactory;, +import org.elasticsearch.common.xcontent.XContentParser;, +, +import static org.elasticsearch.common.xcontent.XContentFactory.jsonBuilder;, +        builder.field(AlertActionManager.REQUEST);, +        AlertUtils.writeSearchRequest(searchRequest, builder);]