[+++ b/.idea/projectCodeStyle.xml, +        <ADDITIONAL_INDENT_OPTIONS fileType="css">, +          <option name="INDENT_SIZE" value="4" />, +          <option name="CONTINUATION_INDENT_SIZE" value="8" />, +          <option name="TAB_SIZE" value="4" />, +          <option name="USE_TAB_CHARACTER" value="false" />, +          <option name="SMART_TABS" value="false" />, +          <option name="LABEL_INDENT_SIZE" value="0" />, +          <option name="LABEL_INDENT_ABSOLUTE" value="false" />, +          <option name="USE_RELATIVE_INDENTS" value="false" />, +        </ADDITIONAL_INDENT_OPTIONS>, +        <ADDITIONAL_INDENT_OPTIONS fileType="haml">, +          <option name="INDENT_SIZE" value="2" />, +          <option name="CONTINUATION_INDENT_SIZE" value="8" />, +          <option name="TAB_SIZE" value="4" />, +          <option name="USE_TAB_CHARACTER" value="false" />, +          <option name="SMART_TABS" value="false" />, +          <option name="LABEL_INDENT_SIZE" value="0" />, +          <option name="LABEL_INDENT_ABSOLUTE" value="false" />, +          <option name="USE_RELATIVE_INDENTS" value="false" />, +        </ADDITIONAL_INDENT_OPTIONS>, +        <codeStyleSettings language="JavaScript">, +          <option name="METHOD_ANNOTATION_WRAP" value="0" />, +          <option name="FIELD_ANNOTATION_WRAP" value="0" />, +          <option name="PARENT_SETTINGS_INSTALLED" value="true" />, +        </codeStyleSettings>, +++ b/.idea/projectCodeStyle.xml, +        <ADDITIONAL_INDENT_OPTIONS fileType="css">, +          <option name="INDENT_SIZE" value="4" />, +          <option name="CONTINUATION_INDENT_SIZE" value="8" />, +          <option name="TAB_SIZE" value="4" />, +          <option name="USE_TAB_CHARACTER" value="false" />, +          <option name="SMART_TABS" value="false" />, +          <option name="LABEL_INDENT_SIZE" value="0" />, +          <option name="LABEL_INDENT_ABSOLUTE" value="false" />, +          <option name="USE_RELATIVE_INDENTS" value="false" />, +        </ADDITIONAL_INDENT_OPTIONS>, +        <ADDITIONAL_INDENT_OPTIONS fileType="haml">, +          <option name="INDENT_SIZE" value="2" />, +          <option name="CONTINUATION_INDENT_SIZE" value="8" />, +          <option name="TAB_SIZE" value="4" />, +          <option name="USE_TAB_CHARACTER" value="false" />, +          <option name="SMART_TABS" value="false" />, +          <option name="LABEL_INDENT_SIZE" value="0" />, +          <option name="LABEL_INDENT_ABSOLUTE" value="false" />, +          <option name="USE_RELATIVE_INDENTS" value="false" />, +        </ADDITIONAL_INDENT_OPTIONS>, +        <codeStyleSettings language="JavaScript">, +          <option name="METHOD_ANNOTATION_WRAP" value="0" />, +          <option name="FIELD_ANNOTATION_WRAP" value="0" />, +          <option name="PARENT_SETTINGS_INSTALLED" value="true" />, +        </codeStyleSettings>, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/ClusterService.java, +     * Adds a priority listener for updated cluster states., +     */, +    void addPriority(ClusterStateListener listener);, +, +    /**, +++ b/.idea/projectCodeStyle.xml, +        <ADDITIONAL_INDENT_OPTIONS fileType="css">, +          <option name="INDENT_SIZE" value="4" />, +          <option name="CONTINUATION_INDENT_SIZE" value="8" />, +          <option name="TAB_SIZE" value="4" />, +          <option name="USE_TAB_CHARACTER" value="false" />, +          <option name="SMART_TABS" value="false" />, +          <option name="LABEL_INDENT_SIZE" value="0" />, +          <option name="LABEL_INDENT_ABSOLUTE" value="false" />, +          <option name="USE_RELATIVE_INDENTS" value="false" />, +        </ADDITIONAL_INDENT_OPTIONS>, +        <ADDITIONAL_INDENT_OPTIONS fileType="haml">, +          <option name="INDENT_SIZE" value="2" />, +          <option name="CONTINUATION_INDENT_SIZE" value="8" />, +          <option name="TAB_SIZE" value="4" />, +          <option name="USE_TAB_CHARACTER" value="false" />, +          <option name="SMART_TABS" value="false" />, +          <option name="LABEL_INDENT_SIZE" value="0" />, +          <option name="LABEL_INDENT_ABSOLUTE" value="false" />, +          <option name="USE_RELATIVE_INDENTS" value="false" />, +        </ADDITIONAL_INDENT_OPTIONS>, +        <codeStyleSettings language="JavaScript">, +          <option name="METHOD_ANNOTATION_WRAP" value="0" />, +          <option name="FIELD_ANNOTATION_WRAP" value="0" />, +          <option name="PARENT_SETTINGS_INSTALLED" value="true" />, +        </codeStyleSettings>, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/ClusterService.java, +     * Adds a priority listener for updated cluster states., +     */, +    void addPriority(ClusterStateListener listener);, +, +    /**, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java, +    private static final String CLUSTER_UPDATE_TASK_SOURCE = "routing-table-updater";, +, +        clusterService.addPriority(this);, +        if (event.source().equals(CLUSTER_UPDATE_TASK_SOURCE)) {, +                reroute();, +    private void reroute() {, +, +    private class RoutingTableUpdater implements Runnable {, +]