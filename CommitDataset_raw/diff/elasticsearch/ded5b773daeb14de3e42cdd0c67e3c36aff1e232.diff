[+++ b/src/main/java/org/elasticsearch/action/admin/indices/mapping/delete/TransportDeleteMappingAction.java, +import org.elasticsearch.action.admin.indices.flush.FlushResponse;, +import org.elasticsearch.action.admin.indices.flush.TransportFlushAction;, +    private final TransportFlushAction flushAction;, +, +                                        TransportDeleteByQueryAction deleteByQueryAction, TransportRefreshAction refreshAction, TransportFlushAction flushAction) {, +        this.flushAction = flushAction;, +        flushAction.execute(Requests.flushRequest(request.indices()), new ActionListener<FlushResponse>() {, +            @Override, +            public void onResponse(FlushResponse flushResponse) {, +            }, +, +            @Override, +            public void onFailure(Throwable e) {, +                failureRef.set(e);, +                latch.countDown();, +            }, +        });]