[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/MapperService.java, +import org.elasticsearch.common.lucene.search.TermFilter;, +     * A filter to filter based on several types. Will not throw types missing failure, and will, +     * simply filter it out also., +                return new TermFilter(new Term(types[0]));, +            }, +            return docMapper.typeFilter();, +        }, +        PublicTermsFilter termsFilter = new PublicTermsFilter();, +        for (String type : types) {, +            termsFilter.addTerm(new Term(TypeFieldMapper.NAME, type));, +        }, +        return termsFilter;, +    }, +, +    /**, +     * A filter to filter based on several types., +     */, +    public Filter typesFilterFailOnMissing(String... types) throws TypeMissingException {, +        if (types.length == 1) {, +            DocumentMapper docMapper = documentMapper(types[0]);, +            if (docMapper == null) {]