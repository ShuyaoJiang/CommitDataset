[+++ b/client/rest/src/test/java/org/elasticsearch/client/RequestLoggerTests.java, +import org.apache.http.nio.entity.NByteArrayEntity;, +import org.apache.http.nio.entity.NStringEntity;, +            switch(RandomInts.randomIntBetween(getRandom(), 0, 3)) {, +                case 0:, +                    break;, +                case 1:, +                    break;, +                case 2:, +                    entity = new NStringEntity(requestBody, StandardCharsets.UTF_8);, +                    break;, +                case 3:, +                    entity = new NByteArrayEntity(requestBody.getBytes(StandardCharsets.UTF_8));, +                    break;, +                default:, +                    throw new UnsupportedOperationException();]