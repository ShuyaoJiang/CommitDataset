[+++ b/src/main/java/org/elasticsearch/common/lucene/uid/UidField.java, +    public UidField(String uid) {, +        this(UidFieldMapper.NAME, uid, 0);, +    }, +, +++ b/src/main/java/org/elasticsearch/common/lucene/uid/UidField.java, +    public UidField(String uid) {, +        this(UidFieldMapper.NAME, uid, 0);, +    }, +, +++ b/src/main/java/org/elasticsearch/index/codec/postingsformat/BloomFilterPostingsFormatProvider.java, +    public static final class Defaults {, +        public static final float MAX_SATURATION = 0.1f;, +        public static final float SATURATION_LIMIT = 0.9f;, +    }, +, +        this.desiredMaxSaturation = postingsFormatSettings.getAsFloat("desired_max_saturation", Defaults.MAX_SATURATION);, +        this.saturationLimit = postingsFormatSettings.getAsFloat("saturation_limit", Defaults.SATURATION_LIMIT);, +    public static class CustomBloomFilterFactory extends BloomFilterFactory {, +        public CustomBloomFilterFactory() {, +            this(Defaults.MAX_SATURATION, Defaults.SATURATION_LIMIT);, +        }, +, +++ b/src/main/java/org/elasticsearch/common/lucene/uid/UidField.java, +    public UidField(String uid) {, +        this(UidFieldMapper.NAME, uid, 0);, +    }, +, +++ b/src/main/java/org/elasticsearch/index/codec/postingsformat/BloomFilterPostingsFormatProvider.java, +    public static final class Defaults {, +        public static final float MAX_SATURATION = 0.1f;, +        public static final float SATURATION_LIMIT = 0.9f;, +    }, +, +        this.desiredMaxSaturation = postingsFormatSettings.getAsFloat("desired_max_saturation", Defaults.MAX_SATURATION);, +        this.saturationLimit = postingsFormatSettings.getAsFloat("saturation_limit", Defaults.SATURATION_LIMIT);, +    public static class CustomBloomFilterFactory extends BloomFilterFactory {, +        public CustomBloomFilterFactory() {, +            this(Defaults.MAX_SATURATION, Defaults.SATURATION_LIMIT);, +        }, +, +++ b/src/main/java/org/elasticsearch/index/codec/postingsformat/PostingFormats.java, +        buildInPostingFormatsX.put("bloom_pulsing", new PreBuiltPostingsFormatProvider.Factory("bloom_pulsing", new BloomFilteringPostingsFormat(new Pulsing40PostingsFormat(), new BloomFilterPostingsFormatProvider.CustomBloomFilterFactory())));, +        buildInPostingFormatsX.put("bloom_default", new PreBuiltPostingsFormatProvider.Factory("bloom_default", new BloomFilteringPostingsFormat(new Lucene40PostingsFormat(), new BloomFilterPostingsFormatProvider.CustomBloomFilterFactory())));, +++ b/src/main/java/org/elasticsearch/common/lucene/uid/UidField.java, +    public UidField(String uid) {, +        this(UidFieldMapper.NAME, uid, 0);, +    }, +, +++ b/src/main/java/org/elasticsearch/index/codec/postingsformat/BloomFilterPostingsFormatProvider.java, +    public static final class Defaults {, +        public static final float MAX_SATURATION = 0.1f;, +        public static final float SATURATION_LIMIT = 0.9f;, +    }, +, +        this.desiredMaxSaturation = postingsFormatSettings.getAsFloat("desired_max_saturation", Defaults.MAX_SATURATION);, +        this.saturationLimit = postingsFormatSettings.getAsFloat("saturation_limit", Defaults.SATURATION_LIMIT);, +    public static class CustomBloomFilterFactory extends BloomFilterFactory {, +        public CustomBloomFilterFactory() {, +            this(Defaults.MAX_SATURATION, Defaults.SATURATION_LIMIT);, +        }, +, +++ b/src/main/java/org/elasticsearch/index/codec/postingsformat/PostingFormats.java, +        buildInPostingFormatsX.put("bloom_pulsing", new PreBuiltPostingsFormatProvider.Factory("bloom_pulsing", new BloomFilteringPostingsFormat(new Pulsing40PostingsFormat(), new BloomFilterPostingsFormatProvider.CustomBloomFilterFactory())));, +        buildInPostingFormatsX.put("bloom_default", new PreBuiltPostingsFormatProvider.Factory("bloom_default", new BloomFilteringPostingsFormat(new Lucene40PostingsFormat(), new BloomFilterPostingsFormatProvider.CustomBloomFilterFactory())));, +++ b/src/main/java/org/elasticsearch/index/engine/Engine.java, +            return doc.uid();, +            return doc.uid();, +++ b/src/main/java/org/elasticsearch/common/lucene/uid/UidField.java, +    public UidField(String uid) {, +        this(UidFieldMapper.NAME, uid, 0);, +    }, +, +++ b/src/main/java/org/elasticsearch/index/codec/postingsformat/BloomFilterPostingsFormatProvider.java, +    public static final class Defaults {, +        public static final float MAX_SATURATION = 0.1f;, +        public static final float SATURATION_LIMIT = 0.9f;, +    }, +, +        this.desiredMaxSaturation = postingsFormatSettings.getAsFloat("desired_max_saturation", Defaults.MAX_SATURATION);, +        this.saturationLimit = postingsFormatSettings.getAsFloat("saturation_limit", Defaults.SATURATION_LIMIT);, +    public static class CustomBloomFilterFactory extends BloomFilterFactory {, +        public CustomBloomFilterFactory() {, +            this(Defaults.MAX_SATURATION, Defaults.SATURATION_LIMIT);, +        }, +, +++ b/src/main/java/org/elasticsearch/index/codec/postingsformat/PostingFormats.java, +        buildInPostingFormatsX.put("bloom_pulsing", new PreBuiltPostingsFormatProvider.Factory("bloom_pulsing", new BloomFilteringPostingsFormat(new Pulsing40PostingsFormat(), new BloomFilterPostingsFormatProvider.CustomBloomFilterFactory())));, +        buildInPostingFormatsX.put("bloom_default", new PreBuiltPostingsFormatProvider.Factory("bloom_default", new BloomFilteringPostingsFormat(new Lucene40PostingsFormat(), new BloomFilterPostingsFormatProvider.CustomBloomFilterFactory())));, +++ b/src/main/java/org/elasticsearch/index/engine/Engine.java, +            return doc.uid();, +            return doc.uid();, +++ b/src/main/java/org/elasticsearch/index/mapper/ParseContext.java, +import org.elasticsearch.common.lucene.uid.UidField;, +    private UidField uid;, +    public UidField uid() {, +    public void uid(UidField uid) {, +++ b/src/main/java/org/elasticsearch/common/lucene/uid/UidField.java, +    public UidField(String uid) {, +        this(UidFieldMapper.NAME, uid, 0);]