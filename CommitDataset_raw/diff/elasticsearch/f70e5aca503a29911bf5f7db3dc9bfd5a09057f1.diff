[+++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/version.properties, +elasticsearch     = 5.0.0, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/version.properties, +elasticsearch     = 5.0.0, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final int V_5_0_0_ID = 5000099;, +    public static final Version V_5_0_0 = new Version(V_5_0_0_ID, org.apache.lucene.util.Version.LUCENE_5_5_0);, +    public static final Version CURRENT = V_5_0_0;, +            case V_5_0_0_ID:, +                return V_5_0_0;, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/version.properties, +elasticsearch     = 5.0.0, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final int V_5_0_0_ID = 5000099;, +    public static final Version V_5_0_0 = new Version(V_5_0_0_ID, org.apache.lucene.util.Version.LUCENE_5_5_0);, +    public static final Version CURRENT = V_5_0_0;, +            case V_5_0_0_ID:, +                return V_5_0_0;, +++ b/core/src/main/java/org/elasticsearch/action/ActionListener.java, +     * Handle action response. This response may constitute a failure or a, +     * success but it is up to the listener to make that decision., +     * A failure caused by an exception at some phase of the task., +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/version.properties, +elasticsearch     = 5.0.0, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final int V_5_0_0_ID = 5000099;, +    public static final Version V_5_0_0 = new Version(V_5_0_0_ID, org.apache.lucene.util.Version.LUCENE_5_5_0);, +    public static final Version CURRENT = V_5_0_0;, +            case V_5_0_0_ID:, +                return V_5_0_0;, +++ b/core/src/main/java/org/elasticsearch/action/ActionListener.java, +     * Handle action response. This response may constitute a failure or a, +     * success but it is up to the listener to make that decision., +     * A failure caused by an exception at some phase of the task., +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java, +                    segments = indexShard.segmentStats(flags.includeSegmentFileSizes());, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/version.properties, +elasticsearch     = 5.0.0, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final int V_5_0_0_ID = 5000099;, +    public static final Version V_5_0_0 = new Version(V_5_0_0_ID, org.apache.lucene.util.Version.LUCENE_5_5_0);, +    public static final Version CURRENT = V_5_0_0;, +            case V_5_0_0_ID:, +                return V_5_0_0;, +++ b/core/src/main/java/org/elasticsearch/action/ActionListener.java, +     * Handle action response. This response may constitute a failure or a, +     * success but it is up to the listener to make that decision., +     * A failure caused by an exception at some phase of the task., +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java, +                    segments = indexShard.segmentStats(flags.includeSegmentFileSizes());, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStatsFlags.java, +import org.elasticsearch.Version;, +    private boolean includeSegmentFileSizes = false;, +        includeSegmentFileSizes = false;, +        includeSegmentFileSizes = false;, +    public CommonStatsFlags includeSegmentFileSizes(boolean includeSegmentFileSizes) {, +        this.includeSegmentFileSizes = includeSegmentFileSizes;, +        return this;, +    }, +, +    public boolean includeSegmentFileSizes() {, +        return this.includeSegmentFileSizes;, +    }, +, +        if (out.getVersion().onOrAfter(Version.V_5_0_0)) {, +            out.writeBoolean(includeSegmentFileSizes);, +        }, +        if (in.getVersion().onOrAfter(Version.V_5_0_0)) {, +            includeSegmentFileSizes = in.readBoolean();, +        } else {, +            includeSegmentFileSizes = false;, +        }, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/version.properties, +elasticsearch     = 5.0.0, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final int V_5_0_0_ID = 5000099;, +    public static final Version V_5_0_0 = new Version(V_5_0_0_ID, org.apache.lucene.util.Version.LUCENE_5_5_0);, +    public static final Version CURRENT = V_5_0_0;, +            case V_5_0_0_ID:, +                return V_5_0_0;, +++ b/core/src/main/java/org/elasticsearch/action/ActionListener.java, +     * Handle action response. This response may constitute a failure or a, +     * success but it is up to the listener to make that decision., +     * A failure caused by an exception at some phase of the task., +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java, +                    segments = indexShard.segmentStats(flags.includeSegmentFileSizes());, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStatsFlags.java, +import org.elasticsearch.Version;, +    private boolean includeSegmentFileSizes = false;, +        includeSegmentFileSizes = false;, +        includeSegmentFileSizes = false;, +    public CommonStatsFlags includeSegmentFileSizes(boolean includeSegmentFileSizes) {, +        this.includeSegmentFileSizes = includeSegmentFileSizes;]