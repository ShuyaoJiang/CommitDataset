[+++ b/src/main/java/org/elasticsearch/index/shard/IndexShard.java, +        try {, +        } catch (Throwable t) {, +            verifyNotClosed(t);, +            throw t;, +        }, +        try {, +        } catch (Throwable t) {, +            verifyNotClosed(t);, +            throw t;, +        }, +        verifyNotClosed(null);, +    }, +, +    private void verifyNotClosed(Throwable suppressed) throws IllegalIndexShardStateException {, +            final IllegalIndexShardStateException exc = new IllegalIndexShardStateException(shardId, state, "operation only allowed when not closed");, +            if (suppressed != null) {, +                exc.addSuppressed(suppressed);, +            }, +            throw exc;]