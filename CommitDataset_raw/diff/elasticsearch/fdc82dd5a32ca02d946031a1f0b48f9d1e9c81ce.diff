[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/gateway/blobstore/BlobReuseExistingNodeAllocation.java, +                        if (logger.isTraceEnabled()) {, +                            logger.trace(sb.toString());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/gateway/blobstore/BlobReuseExistingNodeAllocation.java, +                        if (logger.isTraceEnabled()) {, +                            logger.trace(sb.toString());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java, +                translog.newTranslog(IndexReader.getCurrentVersion(store.directory()));, +                    translog.newTranslog(IndexReader.getCurrentVersion(store.directory()));, +                    translog.newTranslog(IndexReader.getCurrentVersion(store.directory()));, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/gateway/blobstore/BlobReuseExistingNodeAllocation.java, +                        if (logger.isTraceEnabled()) {, +                            logger.trace(sb.toString());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java, +                translog.newTranslog(IndexReader.getCurrentVersion(store.directory()));, +                    translog.newTranslog(IndexReader.getCurrentVersion(store.directory()));, +                    translog.newTranslog(IndexReader.getCurrentVersion(store.directory()));, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/blobstore/BlobStoreIndexShardGateway.java, +            // if we have a commit point, check that we have all the files listed in it in the blob store, +            try {, +            } catch (NumberFormatException e) {, +                logger.warn("file [{}] does not conform to the '__' schema");, +            }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/gateway/blobstore/BlobReuseExistingNodeAllocation.java, +                        if (logger.isTraceEnabled()) {, +                            logger.trace(sb.toString());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java, +                translog.newTranslog(IndexReader.getCurrentVersion(store.directory()));, +                    translog.newTranslog(IndexReader.getCurrentVersion(store.directory()));, +                    translog.newTranslog(IndexReader.getCurrentVersion(store.directory()));, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/blobstore/BlobStoreIndexShardGateway.java, +            // if we have a commit point, check that we have all the files listed in it in the blob store, +            try {, +            } catch (NumberFormatException e) {, +                logger.warn("file [{}] does not conform to the '__' schema");, +            }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/translog/Translog.java, +     * Creates a new transaction log internally. Note, users of this class should make, +     * sure that no operations are performed on the trans log when this is called., +     */, +    void newTranslog(long id) throws TranslogException;, +, +    /**, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/gateway/blobstore/BlobReuseExistingNodeAllocation.java, +                        if (logger.isTraceEnabled()) {, +                            logger.trace(sb.toString());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java, +                translog.newTranslog(IndexReader.getCurrentVersion(store.directory()));, +                    translog.newTranslog(IndexReader.getCurrentVersion(store.directory()));, +                    translog.newTranslog(IndexReader.getCurrentVersion(store.directory()));, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/gateway/blobstore/BlobStoreIndexShardGateway.java, +            // if we have a commit point, check that we have all the files listed in it in the blob store, +            try {, +            } catch (NumberFormatException e) {, +                logger.warn("file [{}] does not conform to the '__' schema");, +            }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/translog/Translog.java, +     * Creates a new transaction log internally. Note, users of this class should make, +     * sure that no operations are performed on the trans log when this is called., +     */, +    void newTranslog(long id) throws TranslogException;, +, +    /**, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/translog/fs/FsTranslog.java, +    @Override public void newTranslog(long id) throws TranslogException {, +        synchronized (mutex) {, +            operationCounter.set(0);, +            lastPosition = 0;, +            this.id = id;, +            if (raf != null) {, +                raf.decreaseRefCount();, +            }, +            try {, +                raf = new RafReference(new File(location, "translog-" + id));, +            } catch (FileNotFoundException e) {, +                raf = null;, +                throw new TranslogException(shardId, "translog not found", e);, +            }, +        }, +    }, +]