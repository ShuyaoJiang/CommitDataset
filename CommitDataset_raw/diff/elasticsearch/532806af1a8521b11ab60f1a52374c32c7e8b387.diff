[+++ b/core/src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java, +                ShardTargetType shardTarget = context.streamShardTarget();, +                InternalSearchHits value = InternalSearchHits.readSearchHits(in, context.streamShardTarget(ShardTargetType.NO_STREAM));, +                context.streamShardTarget(shardTarget);, +                ShardTargetType shardTarget = context.streamShardTarget();, +                entry.getValue().writeTo(out, context.streamShardTarget(ShardTargetType.NO_STREAM));, +                context.streamShardTarget(shardTarget);, +++ b/core/src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java, +                ShardTargetType shardTarget = context.streamShardTarget();, +                InternalSearchHits value = InternalSearchHits.readSearchHits(in, context.streamShardTarget(ShardTargetType.NO_STREAM));, +                context.streamShardTarget(shardTarget);, +                ShardTargetType shardTarget = context.streamShardTarget();, +                entry.getValue().writeTo(out, context.streamShardTarget(ShardTargetType.NO_STREAM));, +                context.streamShardTarget(shardTarget);, +++ b/core/src/test/java/org/elasticsearch/search/innerhits/InnerHitsIT.java]