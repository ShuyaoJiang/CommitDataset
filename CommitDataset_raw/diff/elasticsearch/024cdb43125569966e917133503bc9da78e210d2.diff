[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/gateway/GatewayService.java, +import java.util.concurrent.CountDownLatch;, +                                    final CountDownLatch latch = new CountDownLatch(1);, +                                    ClusterStateListener waitForIndex = new ClusterStateListener() {, +                                        @Override public void clusterChanged(ClusterChangedEvent event) {, +                                            if (event.state().metaData().hasIndex(indexMetaData.index())) {, +                                                latch.countDown();, +                                            }, +                                        }, +                                    };, +                                    clusterService.add(waitForIndex);, +                                        metaDataService.createIndex(indexMetaData.index(), indexMetaData.settings(), timeValueMillis(10));, +                                        latch.countDown();, +                                    try {, +                                        latch.await(5, TimeUnit.MINUTES);, +                                    } catch (InterruptedException e) {, +                                        logger.warn("Interrupted while waiting for index creation in gateway recovery");, +                                    }, +                                    clusterService.remove(waitForIndex);]