[+++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +                final compilerJavaHomeFile = new File(project.compilerJavaHome), +                // we only fork if the Gradle JDK is not the same as the compiler JDK, +                if (compilerJavaHomeFile.canonicalPath == Jvm.current().javaHome.canonicalPath) {, +                    options.fork = false, +                } else {, +                    options.forkOptions.javaHome = compilerJavaHomeFile, +                    options.compilerArgs << '--release' << JavaVersion.toVersion(it.targetCompatibility).majorVersion, +                }]