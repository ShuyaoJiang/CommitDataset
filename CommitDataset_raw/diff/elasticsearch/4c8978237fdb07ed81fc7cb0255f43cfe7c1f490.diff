[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/ping/broadcast/TransportBroadcastPingAction.java, +        return clusterService.operationRouting().searchShards(clusterState, request.indices(), request.queryHint());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/ping/broadcast/TransportBroadcastPingAction.java, +        return clusterService.operationRouting().searchShards(clusterState, request.indices(), request.queryHint());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java, +                shardId = clusterService.operationRouting().indexShards(clusterState, indexRequest.index(), indexRequest.type(), indexRequest.id()).shardId();, +                shardId = clusterService.operationRouting().deleteShards(clusterState, deleteRequest.index(), deleteRequest.type(), deleteRequest.id()).shardId();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/ping/broadcast/TransportBroadcastPingAction.java, +        return clusterService.operationRouting().searchShards(clusterState, request.indices(), request.queryHint());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java, +                shardId = clusterService.operationRouting().indexShards(clusterState, indexRequest.index(), indexRequest.type(), indexRequest.id()).shardId();, +                shardId = clusterService.operationRouting().deleteShards(clusterState, deleteRequest.index(), deleteRequest.type(), deleteRequest.id()).shardId();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/count/TransportCountAction.java, +        return clusterService.operationRouting().searchShards(clusterState, request.indices(), request.queryHint());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/ping/broadcast/TransportBroadcastPingAction.java, +        return clusterService.operationRouting().searchShards(clusterState, request.indices(), request.queryHint());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java, +                shardId = clusterService.operationRouting().indexShards(clusterState, indexRequest.index(), indexRequest.type(), indexRequest.id()).shardId();, +                shardId = clusterService.operationRouting().deleteShards(clusterState, deleteRequest.index(), deleteRequest.type(), deleteRequest.id()).shardId();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/count/TransportCountAction.java, +        return clusterService.operationRouting().searchShards(clusterState, request.indices(), request.queryHint());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java, +        return clusterService.operationRouting(), +                .deleteShards(clusterService.state(), request.index(), request.type(), request.id());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/ping/broadcast/TransportBroadcastPingAction.java, +        return clusterService.operationRouting().searchShards(clusterState, request.indices(), request.queryHint());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java, +                shardId = clusterService.operationRouting().indexShards(clusterState, indexRequest.index(), indexRequest.type(), indexRequest.id()).shardId();, +                shardId = clusterService.operationRouting().deleteShards(clusterState, deleteRequest.index(), deleteRequest.type(), deleteRequest.id()).shardId();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/count/TransportCountAction.java, +        return clusterService.operationRouting().searchShards(clusterState, request.indices(), request.queryHint());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java, +        return clusterService.operationRouting(), +                .deleteShards(clusterService.state(), request.index(), request.type(), request.id());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/deletebyquery/TransportIndexDeleteByQueryAction.java, +        return clusterService.operationRouting().deleteByQueryShards(clusterService.state(), request.index());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/ping/broadcast/TransportBroadcastPingAction.java, +        return clusterService.operationRouting().searchShards(clusterState, request.indices(), request.queryHint());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java, +                shardId = clusterService.operationRouting().indexShards(clusterState, indexRequest.index(), indexRequest.type(), indexRequest.id()).shardId();, +                shardId = clusterService.operationRouting().deleteShards(clusterState, deleteRequest.index(), deleteRequest.type(), deleteRequest.id()).shardId();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/count/TransportCountAction.java, +        return clusterService.operationRouting().searchShards(clusterState, request.indices(), request.queryHint());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java, +        return clusterService.operationRouting(), +                .deleteShards(clusterService.state(), request.index(), request.type(), request.id());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/deletebyquery/TransportIndexDeleteByQueryAction.java, +        return clusterService.operationRouting().deleteByQueryShards(clusterService.state(), request.index());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/deletebyquery/TransportShardDeleteByQueryAction.java, +        GroupShardsIterator group = clusterService.operationRouting().deleteByQueryShards(clusterService.state(), request.index());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/ping/broadcast/TransportBroadcastPingAction.java, +        return clusterService.operationRouting().searchShards(clusterState, request.indices(), request.queryHint());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java, +                shardId = clusterService.operationRouting().indexShards(clusterState, indexRequest.index(), indexRequest.type(), indexRequest.id()).shardId();, +                shardId = clusterService.operationRouting().deleteShards(clusterState, deleteRequest.index(), deleteRequest.type(), deleteRequest.id()).shardId();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/count/TransportCountAction.java, +        return clusterService.operationRouting().searchShards(clusterState, request.indices(), request.queryHint());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java, +        return clusterService.operationRouting(), +                .deleteShards(clusterService.state(), request.index(), request.type(), request.id());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/deletebyquery/TransportIndexDeleteByQueryAction.java, +        return clusterService.operationRouting().deleteByQueryShards(clusterService.state(), request.index());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/deletebyquery/TransportShardDeleteByQueryAction.java, +        GroupShardsIterator group = clusterService.operationRouting().deleteByQueryShards(clusterService.state(), request.index());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java, +        return clusterService.operationRouting(), +                .indexShards(clusterService.state(), request.index(), request.type(), request.id());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/ping/broadcast/TransportBroadcastPingAction.java, +        return clusterService.operationRouting().searchShards(clusterState, request.indices(), request.queryHint());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java, +                shardId = clusterService.operationRouting().indexShards(clusterState, indexRequest.index(), indexRequest.type(), indexRequest.id()).shardId();, +                shardId = clusterService.operationRouting().deleteShards(clusterState, deleteRequest.index(), deleteRequest.type(), deleteRequest.id()).shardId();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/count/TransportCountAction.java, +        return clusterService.operationRouting().searchShards(clusterState, request.indices(), request.queryHint());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java, +        return clusterService.operationRouting(), +                .deleteShards(clusterService.state(), request.index(), request.type(), request.id());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/deletebyquery/TransportIndexDeleteByQueryAction.java, +        return clusterService.operationRouting().deleteByQueryShards(clusterService.state(), request.index());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/deletebyquery/TransportShardDeleteByQueryAction.java, +        GroupShardsIterator group = clusterService.operationRouting().deleteByQueryShards(clusterService.state(), request.index());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java, +        return clusterService.operationRouting(), +                .indexShards(clusterService.state(), request.index(), request.type(), request.id());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java, +            shardsIts = clusterService.operationRouting().searchShards(clusterState, request.indices(), request.queryHint());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/ping/broadcast/TransportBroadcastPingAction.java, +        return clusterService.operationRouting().searchShards(clusterState, request.indices(), request.queryHint());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java, +                shardId = clusterService.operationRouting().indexShards(clusterState, indexRequest.index(), indexRequest.type(), indexRequest.id()).shardId();, +                shardId = clusterService.operationRouting().deleteShards(clusterState, deleteRequest.index(), deleteRequest.type(), deleteRequest.id()).shardId();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/count/TransportCountAction.java, +        return clusterService.operationRouting().searchShards(clusterState, request.indices(), request.queryHint());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java, +        return clusterService.operationRouting(), +                .deleteShards(clusterService.state(), request.index(), request.type(), request.id());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/deletebyquery/TransportIndexDeleteByQueryAction.java, +        return clusterService.operationRouting().deleteByQueryShards(clusterService.state(), request.index());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/deletebyquery/TransportShardDeleteByQueryAction.java, +        GroupShardsIterator group = clusterService.operationRouting().deleteByQueryShards(clusterService.state(), request.index());]