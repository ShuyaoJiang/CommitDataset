[+++ b/src/main/java/org/elasticsearch/common/bytes/ByteBufferBytesReference.java, +import java.nio.channels.GatheringByteChannel;, +    public void writeTo(GatheringByteChannel channel) throws IOException {, +        channel.write(buffer);, +    }, +, +    @Override, +++ b/src/main/java/org/elasticsearch/common/bytes/ByteBufferBytesReference.java, +import java.nio.channels.GatheringByteChannel;, +    public void writeTo(GatheringByteChannel channel) throws IOException {, +        channel.write(buffer);, +    }, +, +    @Override, +++ b/src/main/java/org/elasticsearch/common/bytes/BytesArray.java, +import com.google.common.base.Charsets;, +import java.io.IOException;, +import java.io.OutputStream;, +import java.nio.ByteBuffer;, +import java.nio.channels.GatheringByteChannel;, +import java.util.Arrays;, +    public void writeTo(GatheringByteChannel channel) throws IOException {, +        channel.write(ByteBuffer.wrap(bytes, offset, length()));, +    }, +, +    @Override, +++ b/src/main/java/org/elasticsearch/common/bytes/ByteBufferBytesReference.java, +import java.nio.channels.GatheringByteChannel;, +    public void writeTo(GatheringByteChannel channel) throws IOException {, +        channel.write(buffer);, +    }, +, +    @Override, +++ b/src/main/java/org/elasticsearch/common/bytes/BytesArray.java, +import com.google.common.base.Charsets;, +import java.io.IOException;, +import java.io.OutputStream;, +import java.nio.ByteBuffer;, +import java.nio.channels.GatheringByteChannel;, +import java.util.Arrays;, +    public void writeTo(GatheringByteChannel channel) throws IOException {, +        channel.write(ByteBuffer.wrap(bytes, offset, length()));, +    }, +, +    @Override, +++ b/src/main/java/org/elasticsearch/common/bytes/BytesReference.java, +import java.nio.channels.GatheringByteChannel;, +     * Writes the bytes directly to the channel., +     */, +    void writeTo(GatheringByteChannel channel) throws IOException;, +, +    /**, +++ b/src/main/java/org/elasticsearch/common/bytes/ByteBufferBytesReference.java, +import java.nio.channels.GatheringByteChannel;, +    public void writeTo(GatheringByteChannel channel) throws IOException {, +        channel.write(buffer);, +    }, +, +    @Override, +++ b/src/main/java/org/elasticsearch/common/bytes/BytesArray.java, +import com.google.common.base.Charsets;, +import java.io.IOException;, +import java.io.OutputStream;, +import java.nio.ByteBuffer;, +import java.nio.channels.GatheringByteChannel;, +import java.util.Arrays;, +    public void writeTo(GatheringByteChannel channel) throws IOException {, +        channel.write(ByteBuffer.wrap(bytes, offset, length()));, +    }, +, +    @Override, +++ b/src/main/java/org/elasticsearch/common/bytes/BytesReference.java, +import java.nio.channels.GatheringByteChannel;, +     * Writes the bytes directly to the channel., +     */, +    void writeTo(GatheringByteChannel channel) throws IOException;, +, +    /**, +++ b/src/main/java/org/elasticsearch/common/bytes/ChannelBufferBytesReference.java, +import java.nio.channels.GatheringByteChannel;, +import java.nio.channels.WritableByteChannel;, +    public void writeTo(GatheringByteChannel channel) throws IOException {, +        buffer.getBytes(buffer.readerIndex(), channel, length());, +    }, +, +    @Override, +++ b/src/main/java/org/elasticsearch/common/bytes/ByteBufferBytesReference.java, +import java.nio.channels.GatheringByteChannel;, +    public void writeTo(GatheringByteChannel channel) throws IOException {, +        channel.write(buffer);, +    }, +, +    @Override, +++ b/src/main/java/org/elasticsearch/common/bytes/BytesArray.java, +import com.google.common.base.Charsets;, +import java.io.IOException;, +import java.io.OutputStream;, +import java.nio.ByteBuffer;, +import java.nio.channels.GatheringByteChannel;, +import java.util.Arrays;]