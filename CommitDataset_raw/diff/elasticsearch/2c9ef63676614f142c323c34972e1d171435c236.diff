[+++ b/src/test/java/org/elasticsearch/discovery/DiscoveryWithNetworkFailuresTests.java, +import static org.hamcrest.Matchers.equalTo;, +import static org.hamcrest.Matchers.is;, +                .put("discovery.zen.fd.ping_retries", "1") // <-- for hitting simulated network failures quickly, +            // continuously ping until network failures have been resolved. However, +            final Client isolatedNodeClient = internalCluster().client(unluckyNode);, +            // It may a take a bit before the node detects it has been cut off from the elected master, +            applied = awaitBusy(new Predicate<Object>() {, +                @Override, +                public boolean apply(Object input) {, +                    logger.info("localDiscoveryNodes=" + localDiscoveryNodes.prettyPrint());, +                    return localDiscoveryNodes.masterNode() == null;, +                }, +            }, 10, TimeUnit.SECONDS);, +            assertThat(applied, is(true));]