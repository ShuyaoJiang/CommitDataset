[+++ b/core/src/main/java/org/elasticsearch/cluster/ClusterModule.java, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterModule.java, +++ b/core/src/main/java/org/elasticsearch/index/shard/IndexShard.java, +                return translog.sizeInBytes() > flushThresholdSize.bytes();, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterModule.java, +++ b/core/src/main/java/org/elasticsearch/index/shard/IndexShard.java, +                return translog.sizeInBytes() > flushThresholdSize.bytes();, +++ b/core/src/test/java/org/elasticsearch/get/GetActionIT.java, +                "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +                "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +                "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +            "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +                "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +                "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterModule.java, +++ b/core/src/main/java/org/elasticsearch/index/shard/IndexShard.java, +                return translog.sizeInBytes() > flushThresholdSize.bytes();, +++ b/core/src/test/java/org/elasticsearch/get/GetActionIT.java, +                "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +                "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +                "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +            "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +                "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +                "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +++ b/core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasIT.java, +import org.elasticsearch.common.unit.ByteSizeUnit;, +import org.elasticsearch.common.unit.ByteSizeValue;, +                .put(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_SIZE, new ByteSizeValue(1, ByteSizeUnit.PB)), +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterModule.java, +++ b/core/src/main/java/org/elasticsearch/index/shard/IndexShard.java, +                return translog.sizeInBytes() > flushThresholdSize.bytes();, +++ b/core/src/test/java/org/elasticsearch/get/GetActionIT.java, +                "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +                "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +                "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +            "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +                "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +                "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +++ b/core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasIT.java, +import org.elasticsearch.common.unit.ByteSizeUnit;, +import org.elasticsearch.common.unit.ByteSizeValue;, +                .put(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_SIZE, new ByteSizeValue(1, ByteSizeUnit.PB)), +++ b/core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java, +        client().admin().indices().prepareUpdateSettings("test").setSettings(settingsBuilder().put(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_SIZE, new ByteSizeValue(1, ByteSizeUnit.BYTES)).build()).get();, +        client().admin().indices().prepareUpdateSettings("test").setSettings(settingsBuilder().put(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_SIZE, new ByteSizeValue(size, ByteSizeUnit.BYTES)), +        client().admin().indices().prepareUpdateSettings("test").setSettings(settingsBuilder().put(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_SIZE, new ByteSizeValue(1, ByteSizeUnit.BYTES)).build()).get();, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterModule.java, +++ b/core/src/main/java/org/elasticsearch/index/shard/IndexShard.java, +                return translog.sizeInBytes() > flushThresholdSize.bytes();, +++ b/core/src/test/java/org/elasticsearch/get/GetActionIT.java, +                "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +                "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +                "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +            "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +                "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +                "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +++ b/core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasIT.java, +import org.elasticsearch.common.unit.ByteSizeUnit;, +import org.elasticsearch.common.unit.ByteSizeValue;, +                .put(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_SIZE, new ByteSizeValue(1, ByteSizeUnit.PB)), +++ b/core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java, +        client().admin().indices().prepareUpdateSettings("test").setSettings(settingsBuilder().put(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_SIZE, new ByteSizeValue(1, ByteSizeUnit.BYTES)).build()).get();, +        client().admin().indices().prepareUpdateSettings("test").setSettings(settingsBuilder().put(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_SIZE, new ByteSizeValue(size, ByteSizeUnit.BYTES)), +        client().admin().indices().prepareUpdateSettings("test").setSettings(settingsBuilder().put(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_SIZE, new ByteSizeValue(1, ByteSizeUnit.BYTES)).build()).get();, +++ b/core/src/test/java/org/elasticsearch/index/store/CorruptedFileIT.java, +import org.elasticsearch.common.unit.ByteSizeValue;, +                        .put(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_SIZE, new ByteSizeValue(1, ByteSizeUnit.PB)) // no translog based flush - it might change the .liv / segments.N files, +                        .put(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_SIZE, new ByteSizeValue(1, ByteSizeUnit.PB)) // no translog based flush - it might change the .liv / segments.N files, +                        .put(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_SIZE, new ByteSizeValue(1, ByteSizeUnit.PB)) // no translog based flush - it might change the .liv / segments.N files, +                        .put(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_SIZE, new ByteSizeValue(1, ByteSizeUnit.PB)) // no translog based flush - it might change the .liv / segments.N files, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterModule.java, +++ b/core/src/main/java/org/elasticsearch/index/shard/IndexShard.java, +                return translog.sizeInBytes() > flushThresholdSize.bytes();, +++ b/core/src/test/java/org/elasticsearch/get/GetActionIT.java, +                "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +                "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +                "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +            "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +                "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +                "    \"index.translog.flush_threshold_size\": \"1pb\",\n" +, +++ b/core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasIT.java, +import org.elasticsearch.common.unit.ByteSizeUnit;, +import org.elasticsearch.common.unit.ByteSizeValue;, +                .put(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_SIZE, new ByteSizeValue(1, ByteSizeUnit.PB)), +++ b/core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java, +        client().admin().indices().prepareUpdateSettings("test").setSettings(settingsBuilder().put(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_SIZE, new ByteSizeValue(1, ByteSizeUnit.BYTES)).build()).get();, +        client().admin().indices().prepareUpdateSettings("test").setSettings(settingsBuilder().put(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_SIZE, new ByteSizeValue(size, ByteSizeUnit.BYTES)), +        client().admin().indices().prepareUpdateSettings("test").setSettings(settingsBuilder().put(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_SIZE, new ByteSizeValue(1, ByteSizeUnit.BYTES)).build()).get();, +++ b/core/src/test/java/org/elasticsearch/index/store/CorruptedFileIT.java, +import org.elasticsearch.common.unit.ByteSizeValue;, +                        .put(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_SIZE, new ByteSizeValue(1, ByteSizeUnit.PB)) // no translog based flush - it might change the .liv / segments.N files, +                        .put(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_SIZE, new ByteSizeValue(1, ByteSizeUnit.PB)) // no translog based flush - it might change the .liv / segments.N files, +                        .put(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_SIZE, new ByteSizeValue(1, ByteSizeUnit.PB)) // no translog based flush - it might change the .liv / segments.N files, +                        .put(IndexShard.INDEX_TRANSLOG_FLUSH_THRESHOLD_SIZE, new ByteSizeValue(1, ByteSizeUnit.PB)) // no translog based flush - it might change the .liv / segments.N files, +++ b/core/src/test/java/org/elasticsearch/index/store/CorruptedTranslogIT.java, +import org.elasticsearch.common.unit.ByteSizeUnit;, +import org.elasticsearch.common.unit.ByteSizeValue;, +import org.elasticsearch.index.IndexSettings;, +, +    /** Disables translog flushing for the specified index */]