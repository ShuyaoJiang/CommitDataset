[+++ b/core/src/main/java/org/elasticsearch/search/aggregations/AggregatorParsers.java, +    public Aggregator.Parser parser(String type) {, +    public PipelineAggregator.Parser pipelineParser(String type) {, +                        Aggregator.Parser aggregatorParser = parser(fieldName);, +                            PipelineAggregator.Parser pipelineAggregatorParser = pipelineParser(fieldName);, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/AggregatorParsers.java, +    public Aggregator.Parser parser(String type) {, +    public PipelineAggregator.Parser pipelineParser(String type) {, +                        Aggregator.Parser aggregatorParser = parser(fieldName);, +                            PipelineAggregator.Parser pipelineAggregatorParser = pipelineParser(fieldName);, +++ b/core/src/test/java/org/elasticsearch/search/SearchModuleTests.java, +        assertNotNull(module.getAggregatorParsers().parser("test"));, +        assertNotNull(module.getAggregatorParsers().pipelineParser("test"));, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/AggregatorParsers.java, +    public Aggregator.Parser parser(String type) {, +    public PipelineAggregator.Parser pipelineParser(String type) {, +                        Aggregator.Parser aggregatorParser = parser(fieldName);, +                            PipelineAggregator.Parser pipelineAggregatorParser = pipelineParser(fieldName);, +++ b/core/src/test/java/org/elasticsearch/search/SearchModuleTests.java, +        assertNotNull(module.getAggregatorParsers().parser("test"));, +        assertNotNull(module.getAggregatorParsers().pipelineParser("test"));, +++ b/core/src/test/java/org/elasticsearch/search/aggregations/BaseAggregationTestCase.java, +        AggregationBuilder newAgg = aggParsers.parser(testAgg.getType()).parse(testAgg.name, parseContext);, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/AggregatorParsers.java, +    public Aggregator.Parser parser(String type) {, +    public PipelineAggregator.Parser pipelineParser(String type) {, +                        Aggregator.Parser aggregatorParser = parser(fieldName);, +                            PipelineAggregator.Parser pipelineAggregatorParser = pipelineParser(fieldName);, +++ b/core/src/test/java/org/elasticsearch/search/SearchModuleTests.java, +        assertNotNull(module.getAggregatorParsers().parser("test"));, +        assertNotNull(module.getAggregatorParsers().pipelineParser("test"));, +++ b/core/src/test/java/org/elasticsearch/search/aggregations/BaseAggregationTestCase.java, +        AggregationBuilder newAgg = aggParsers.parser(testAgg.getType()).parse(testAgg.name, parseContext);, +++ b/core/src/test/java/org/elasticsearch/search/aggregations/BasePipelineAggregationTestCase.java, +        PipelineAggregationBuilder newAgg = aggParsers.pipelineParser(testAgg.getWriteableName()), +++ b/core/src/main/java/org/elasticsearch/search/aggregations/AggregatorParsers.java, +    public Aggregator.Parser parser(String type) {, +    public PipelineAggregator.Parser pipelineParser(String type) {, +                        Aggregator.Parser aggregatorParser = parser(fieldName);, +                            PipelineAggregator.Parser pipelineAggregatorParser = pipelineParser(fieldName);, +++ b/core/src/test/java/org/elasticsearch/search/SearchModuleTests.java, +        assertNotNull(module.getAggregatorParsers().parser("test"));, +        assertNotNull(module.getAggregatorParsers().pipelineParser("test"));, +++ b/core/src/test/java/org/elasticsearch/search/aggregations/BaseAggregationTestCase.java, +        AggregationBuilder newAgg = aggParsers.parser(testAgg.getType()).parse(testAgg.name, parseContext);, +++ b/core/src/test/java/org/elasticsearch/search/aggregations/BasePipelineAggregationTestCase.java, +        PipelineAggregationBuilder newAgg = aggParsers.pipelineParser(testAgg.getWriteableName()), +++ b/core/src/test/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/ExtendedStatsBucketTests.java, +            .pipelineParser(ExtendedStatsBucketPipelineAggregationBuilder.NAME), +++ b/core/src/main/java/org/elasticsearch/search/aggregations/AggregatorParsers.java, +    public Aggregator.Parser parser(String type) {, +    public PipelineAggregator.Parser pipelineParser(String type) {, +                        Aggregator.Parser aggregatorParser = parser(fieldName);, +                            PipelineAggregator.Parser pipelineAggregatorParser = pipelineParser(fieldName);, +++ b/core/src/test/java/org/elasticsearch/search/SearchModuleTests.java, +        assertNotNull(module.getAggregatorParsers().parser("test"));, +        assertNotNull(module.getAggregatorParsers().pipelineParser("test"));, +++ b/core/src/test/java/org/elasticsearch/search/aggregations/BaseAggregationTestCase.java, +        AggregationBuilder newAgg = aggParsers.parser(testAgg.getType()).parse(testAgg.name, parseContext);, +++ b/core/src/test/java/org/elasticsearch/search/aggregations/BasePipelineAggregationTestCase.java, +        PipelineAggregationBuilder newAgg = aggParsers.pipelineParser(testAgg.getWriteableName()), +++ b/core/src/test/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/ExtendedStatsBucketTests.java, +            .pipelineParser(ExtendedStatsBucketPipelineAggregationBuilder.NAME), +++ b/core/src/test/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/PercentilesBucketTests.java, +            .pipelineParser(PercentilesBucketPipelineAggregationBuilder.NAME), +++ b/core/src/main/java/org/elasticsearch/search/aggregations/AggregatorParsers.java, +    public Aggregator.Parser parser(String type) {, +    public PipelineAggregator.Parser pipelineParser(String type) {, +                        Aggregator.Parser aggregatorParser = parser(fieldName);, +                            PipelineAggregator.Parser pipelineAggregatorParser = pipelineParser(fieldName);, +++ b/core/src/test/java/org/elasticsearch/search/SearchModuleTests.java, +        assertNotNull(module.getAggregatorParsers().parser("test"));, +        assertNotNull(module.getAggregatorParsers().pipelineParser("test"));, +++ b/core/src/test/java/org/elasticsearch/search/aggregations/BaseAggregationTestCase.java, +        AggregationBuilder newAgg = aggParsers.parser(testAgg.getType()).parse(testAgg.name, parseContext);, +++ b/core/src/test/java/org/elasticsearch/search/aggregations/BasePipelineAggregationTestCase.java, +        PipelineAggregationBuilder newAgg = aggParsers.pipelineParser(testAgg.getWriteableName()), +++ b/core/src/test/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/ExtendedStatsBucketTests.java, +            .pipelineParser(ExtendedStatsBucketPipelineAggregationBuilder.NAME), +++ b/core/src/test/java/org/elasticsearch/search/aggregations/pipeline/bucketmetrics/PercentilesBucketTests.java, +            .pipelineParser(PercentilesBucketPipelineAggregationBuilder.NAME), +++ b/core/src/test/java/org/elasticsearch/search/aggregations/pipeline/moving/avg/MovAvgTests.java, +import org.elasticsearch.search.aggregations.pipeline.movavg.models.SimpleModel;, +, +;, +        PipelineAggregationBuilder newAgg = aggParsers.pipelineParser(expected.getWriteableName()).parse(expected.getName(), parseContext);]