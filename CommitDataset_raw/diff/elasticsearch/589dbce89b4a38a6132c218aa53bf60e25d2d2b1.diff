[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/gateway/local/LocalGateway.java, +import java.util.concurrent.ExecutorService;, +import java.util.concurrent.TimeUnit;, +import static java.util.concurrent.Executors.*;, +import static org.elasticsearch.common.util.concurrent.EsExecutors.*;, +    private volatile ExecutorService executor;, +, +        this.executor = newSingleThreadExecutor(daemonThreadFactory(settings, "gateway"));, +        executor.shutdown();, +        try {, +            executor.awaitTermination(10, TimeUnit.SECONDS);, +        } catch (InterruptedException e) {, +            // ignore, +        }, +            executor.execute(new Runnable() {, +                @Override public void run() {, +            });, +        }, +            executor.execute(new Runnable() {, +                @Override public void run() {, +                        return;, +            });, +        }]