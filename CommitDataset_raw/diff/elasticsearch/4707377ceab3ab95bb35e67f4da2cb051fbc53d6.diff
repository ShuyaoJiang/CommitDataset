[+++ b/core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java, +        if (in.getVersion().before(Version.V_5_5_0_UNRELEASED)) {, +        if (in.getVersion().before(Version.V_5_5_0_UNRELEASED)) {, +        if (out.getVersion().before(Version.V_5_5_0_UNRELEASED)) {, +            throw new IOException("Invalid output version, must >= " + Version.V_5_5_0_UNRELEASED.toString());, +        assert out.getVersion().before(Version.V_5_5_0_UNRELEASED) :, +            "invalid output version, must be < " + Version.V_5_5_0_UNRELEASED.toString();, +        assert out.getVersion().before(Version.V_5_5_0_UNRELEASED) :, +            "invalid output version, must be < " + Version.V_5_5_0_UNRELEASED.toString();, +        assert(out.getVersion().before(Version.V_5_5_0_UNRELEASED)) :, +            "invalid output version, must be < " + Version.V_5_5_0_UNRELEASED.toString();, +++ b/core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java, +        if (in.getVersion().before(Version.V_5_5_0_UNRELEASED)) {, +        if (in.getVersion().before(Version.V_5_5_0_UNRELEASED)) {, +        if (out.getVersion().before(Version.V_5_5_0_UNRELEASED)) {, +            throw new IOException("Invalid output version, must >= " + Version.V_5_5_0_UNRELEASED.toString());, +        assert out.getVersion().before(Version.V_5_5_0_UNRELEASED) :, +            "invalid output version, must be < " + Version.V_5_5_0_UNRELEASED.toString();, +        assert out.getVersion().before(Version.V_5_5_0_UNRELEASED) :, +            "invalid output version, must be < " + Version.V_5_5_0_UNRELEASED.toString();, +        assert(out.getVersion().before(Version.V_5_5_0_UNRELEASED)) :, +            "invalid output version, must be < " + Version.V_5_5_0_UNRELEASED.toString();, +++ b/core/src/main/java/org/elasticsearch/index/query/NestedQueryBuilder.java, +        if (out.getVersion().before(Version.V_5_5_0_UNRELEASED)) {, +++ b/core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java, +        if (in.getVersion().before(Version.V_5_5_0_UNRELEASED)) {, +        if (in.getVersion().before(Version.V_5_5_0_UNRELEASED)) {, +        if (out.getVersion().before(Version.V_5_5_0_UNRELEASED)) {, +            throw new IOException("Invalid output version, must >= " + Version.V_5_5_0_UNRELEASED.toString());, +        assert out.getVersion().before(Version.V_5_5_0_UNRELEASED) :, +            "invalid output version, must be < " + Version.V_5_5_0_UNRELEASED.toString();, +        assert out.getVersion().before(Version.V_5_5_0_UNRELEASED) :, +            "invalid output version, must be < " + Version.V_5_5_0_UNRELEASED.toString();, +        assert(out.getVersion().before(Version.V_5_5_0_UNRELEASED)) :, +            "invalid output version, must be < " + Version.V_5_5_0_UNRELEASED.toString();, +++ b/core/src/main/java/org/elasticsearch/index/query/NestedQueryBuilder.java, +        if (out.getVersion().before(Version.V_5_5_0_UNRELEASED)) {, +++ b/core/src/main/java/org/elasticsearch/search/collapse/CollapseBuilder.java, +        if (out.getVersion().before(Version.V_5_5_0_UNRELEASED)) {, +++ b/core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java, +        if (in.getVersion().before(Version.V_5_5_0_UNRELEASED)) {, +        if (in.getVersion().before(Version.V_5_5_0_UNRELEASED)) {, +        if (out.getVersion().before(Version.V_5_5_0_UNRELEASED)) {, +            throw new IOException("Invalid output version, must >= " + Version.V_5_5_0_UNRELEASED.toString());, +        assert out.getVersion().before(Version.V_5_5_0_UNRELEASED) :, +            "invalid output version, must be < " + Version.V_5_5_0_UNRELEASED.toString();, +        assert out.getVersion().before(Version.V_5_5_0_UNRELEASED) :, +            "invalid output version, must be < " + Version.V_5_5_0_UNRELEASED.toString();, +        assert(out.getVersion().before(Version.V_5_5_0_UNRELEASED)) :, +            "invalid output version, must be < " + Version.V_5_5_0_UNRELEASED.toString();, +++ b/core/src/main/java/org/elasticsearch/index/query/NestedQueryBuilder.java, +        if (out.getVersion().before(Version.V_5_5_0_UNRELEASED)) {, +++ b/core/src/main/java/org/elasticsearch/search/collapse/CollapseBuilder.java, +        if (out.getVersion().before(Version.V_5_5_0_UNRELEASED)) {, +++ b/modules/parent-join/src/main/java/org/elasticsearch/join/query/HasChildQueryBuilder.java, +        if (out.getVersion().before(Version.V_5_5_0_UNRELEASED)) {, +++ b/core/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java, +        if (in.getVersion().before(Version.V_5_5_0_UNRELEASED)) {, +        if (in.getVersion().before(Version.V_5_5_0_UNRELEASED)) {, +        if (out.getVersion().before(Version.V_5_5_0_UNRELEASED)) {, +            throw new IOException("Invalid output version, must >= " + Version.V_5_5_0_UNRELEASED.toString());, +        assert out.getVersion().before(Version.V_5_5_0_UNRELEASED) :, +            "invalid output version, must be < " + Version.V_5_5_0_UNRELEASED.toString();, +        assert out.getVersion().before(Version.V_5_5_0_UNRELEASED) :, +            "invalid output version, must be < " + Version.V_5_5_0_UNRELEASED.toString();, +        assert(out.getVersion().before(Version.V_5_5_0_UNRELEASED)) :, +            "invalid output version, must be < " + Version.V_5_5_0_UNRELEASED.toString();, +++ b/core/src/main/java/org/elasticsearch/index/query/NestedQueryBuilder.java, +        if (out.getVersion().before(Version.V_5_5_0_UNRELEASED)) {, +++ b/core/src/main/java/org/elasticsearch/search/collapse/CollapseBuilder.java, +        if (out.getVersion().before(Version.V_5_5_0_UNRELEASED)) {, +++ b/modules/parent-join/src/main/java/org/elasticsearch/join/query/HasChildQueryBuilder.java, +        if (out.getVersion().before(Version.V_5_5_0_UNRELEASED)) {, +++ b/modules/parent-join/src/main/java/org/elasticsearch/join/query/HasParentQueryBuilder.java, +        if (out.getVersion().before(Version.V_5_5_0_UNRELEASED)) {]