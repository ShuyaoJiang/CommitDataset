[+++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java, +            return (IFD) builder.build(index, indexSettings, fieldType, cache, circuitBreakerService, indexService.mapperService());, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java, +            return (IFD) builder.build(index, indexSettings, fieldType, cache, circuitBreakerService, indexService.mapperService());, +++ b/core/src/main/java/org/elasticsearch/index/mapper/MapperService.java, +    public MapperService(Index index, @IndexSettings Settings indexSettings, AnalysisService analysisService,, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java, +            return (IFD) builder.build(index, indexSettings, fieldType, cache, circuitBreakerService, indexService.mapperService());, +++ b/core/src/main/java/org/elasticsearch/index/mapper/MapperService.java, +    public MapperService(Index index, @IndexSettings Settings indexSettings, AnalysisService analysisService,, +++ b/core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java, +, +            MapperService mapperService = new MapperService(index, settings, analysisService, similarityLookupService, null);, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java, +            return (IFD) builder.build(index, indexSettings, fieldType, cache, circuitBreakerService, indexService.mapperService());, +++ b/core/src/main/java/org/elasticsearch/index/mapper/MapperService.java, +    public MapperService(Index index, @IndexSettings Settings indexSettings, AnalysisService analysisService,, +++ b/core/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java, +, +            MapperService mapperService = new MapperService(index, settings, analysisService, similarityLookupService, null);, +++ b/core/src/test/java/org/elasticsearch/index/fielddata/IndexFieldDataServiceTests.java]