[+++ b/core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java, +                String message = "failed shard on node [" + shardToFail.currentNodeId() + "]: " + failedShardEntry.getMessage();, +                UnassignedInfo unassignedInfo = new UnassignedInfo(UnassignedInfo.Reason.ALLOCATION_FAILED, message,, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java, +                String message = "failed shard on node [" + shardToFail.currentNodeId() + "]: " + failedShardEntry.getMessage();, +                UnassignedInfo unassignedInfo = new UnassignedInfo(UnassignedInfo.Reason.ALLOCATION_FAILED, message,, +++ b/core/src/test/java/org/elasticsearch/cluster/routing/UnassignedInfoTests.java, +        assertThat(clusterState.getRoutingNodes().shardsWithState(UNASSIGNED).get(0).unassignedInfo().getMessage(), equalTo("failed shard on node [" + shardToFail.currentNodeId() + "]: test fail"));, +        assertThat(clusterState.getRoutingNodes().shardsWithState(UNASSIGNED).get(0).unassignedInfo().getDetails(), equalTo("failed shard on node [" + shardToFail.currentNodeId() + "]: test fail"));, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/allocation/AllocationService.java, +                String message = "failed shard on node [" + shardToFail.currentNodeId() + "]: " + failedShardEntry.getMessage();, +                UnassignedInfo unassignedInfo = new UnassignedInfo(UnassignedInfo.Reason.ALLOCATION_FAILED, message,, +++ b/core/src/test/java/org/elasticsearch/cluster/routing/UnassignedInfoTests.java, +        assertThat(clusterState.getRoutingNodes().shardsWithState(UNASSIGNED).get(0).unassignedInfo().getMessage(), equalTo("failed shard on node [" + shardToFail.currentNodeId() + "]: test fail"));, +        assertThat(clusterState.getRoutingNodes().shardsWithState(UNASSIGNED).get(0).unassignedInfo().getDetails(), equalTo("failed shard on node [" + shardToFail.currentNodeId() + "]: test fail"));, +++ b/core/src/test/java/org/elasticsearch/cluster/routing/allocation/MaxRetryAllocationDeciderTests.java, +import static org.hamcrest.Matchers.containsString;, +            assertThat(routingTable.index("idx").shard(0).shards().get(0).unassignedInfo().getMessage(), containsString("boom" + i));, +        assertThat(routingTable.index("idx").shard(0).shards().get(0).unassignedInfo().getMessage(), containsString("boom"));, +        assertThat(routingTable.index("idx").shard(0).shards().get(0).unassignedInfo().getMessage(), containsString("boom"));, +        assertThat(routingTable.index("idx").shard(0).shards().get(0).unassignedInfo().getMessage(), containsString("boom"));, +        assertThat(routingTable.index("idx").shard(0).shards().get(0).unassignedInfo().getMessage(), containsString("boom"));, +            assertThat(unassignedPrimary.unassignedInfo().getMessage(), containsString("boom" + i));, +            assertThat(unassignedPrimary.unassignedInfo().getMessage(), containsString("boom"));, +        assertThat(unassignedPrimary.unassignedInfo().getMessage(), containsString("boom"));, +        assertThat(unassignedPrimary.unassignedInfo().getMessage(), containsString("ZOOOMG"));]