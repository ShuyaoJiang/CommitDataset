[+++ b/core/src/test/java/org/elasticsearch/index/query/BaseQueryTestCase.java, +        Version version = randomBoolean() ? Version.CURRENT : VersionUtils.randomVersionBetween(random(), Version.V_2_0_0_beta1, Version.CURRENT);, +++ b/core/src/test/java/org/elasticsearch/index/query/BaseQueryTestCase.java, +        Version version = randomBoolean() ? Version.CURRENT : VersionUtils.randomVersionBetween(random(), Version.V_2_0_0_beta1, Version.CURRENT);, +++ b/core/src/test/java/org/elasticsearch/index/query/HasChildQueryBuilderTests.java, +import org.elasticsearch.common.xcontent.ToXContent;, +import org.elasticsearch.common.xcontent.XContentBuilder;, +import org.elasticsearch.common.xcontent.XContentFactory;, +import static org.hamcrest.CoreMatchers.instanceOf;, +        } else {, +++ b/core/src/test/java/org/elasticsearch/index/query/BaseQueryTestCase.java, +        Version version = randomBoolean() ? Version.CURRENT : VersionUtils.randomVersionBetween(random(), Version.V_2_0_0_beta1, Version.CURRENT);, +++ b/core/src/test/java/org/elasticsearch/index/query/HasChildQueryBuilderTests.java, +import org.elasticsearch.common.xcontent.ToXContent;, +import org.elasticsearch.common.xcontent.XContentBuilder;, +import org.elasticsearch.common.xcontent.XContentFactory;, +import static org.hamcrest.CoreMatchers.instanceOf;, +        } else {, +++ b/core/src/test/java/org/elasticsearch/index/query/HasParentQueryBuilderTests.java, +        } else {, +++ b/core/src/test/java/org/elasticsearch/index/query/BaseQueryTestCase.java, +        Version version = randomBoolean() ? Version.CURRENT : VersionUtils.randomVersionBetween(random(), Version.V_2_0_0_beta1, Version.CURRENT);, +++ b/core/src/test/java/org/elasticsearch/index/query/HasChildQueryBuilderTests.java, +import org.elasticsearch.common.xcontent.ToXContent;, +import org.elasticsearch.common.xcontent.XContentBuilder;, +import org.elasticsearch.common.xcontent.XContentFactory;, +import static org.hamcrest.CoreMatchers.instanceOf;, +        } else {, +++ b/core/src/test/java/org/elasticsearch/index/query/HasParentQueryBuilderTests.java, +        } else {, +++ /dev/null, +++ b/core/src/test/java/org/elasticsearch/index/query/BaseQueryTestCase.java, +        Version version = randomBoolean() ? Version.CURRENT : VersionUtils.randomVersionBetween(random(), Version.V_2_0_0_beta1, Version.CURRENT);, +++ b/core/src/test/java/org/elasticsearch/index/query/HasChildQueryBuilderTests.java, +import org.elasticsearch.common.xcontent.ToXContent;, +import org.elasticsearch.common.xcontent.XContentBuilder;, +import org.elasticsearch.common.xcontent.XContentFactory;, +import static org.hamcrest.CoreMatchers.instanceOf;, +        } else {, +++ b/core/src/test/java/org/elasticsearch/index/query/HasParentQueryBuilderTests.java, +        } else {, +++ /dev/null, +++ b/core/src/test/resources/org/elasticsearch/index/query/has-child-with-inner-hits.json, +{, +  "has_child" : {, +    "query" : {, +      "range" : {, +        "mapped_string" : {, +          "from" : "agJhRET",, +          "to" : "zvqIq",, +          "include_lower" : true,, +          "include_upper" : true,, +          "boost" : 1.0, +        }, +      }, +    },, +    "child_type" : "child",, +    "score_type" : "avg",, +    "min_children" : 883170873,, +    "max_children" : 1217235442,, +    "boost" : 2.0,, +    "_name" : "WNzYMJKRwePuRBh",, +    "inner_hits" : {, +      "name" : "inner_hits_name",, +      "size" : 100,, +      "sort" : [ {, +        "mapped_string" : {, +          "order" : "asc", +        }, +      } ], +    }, +  }, +}]