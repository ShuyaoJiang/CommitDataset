[+++ b/src/main/java/org/elasticsearch/action/deletebyquery/TransportShardDeleteByQueryAction.java, +    public final static String DELETE_BY_QUERY_API = "delete_by_query";, +, +                indexShard.acquireSearcher(DELETE_BY_QUERY_API), indexService, indexShard, scriptService, cacheRecycler,, +                indexShard.acquireSearcher(DELETE_BY_QUERY_API, IndexShard.Mode.WRITE), indexService, indexShard, scriptService,, +++ b/src/main/java/org/elasticsearch/action/deletebyquery/TransportShardDeleteByQueryAction.java, +    public final static String DELETE_BY_QUERY_API = "delete_by_query";, +, +                indexShard.acquireSearcher(DELETE_BY_QUERY_API), indexService, indexShard, scriptService, cacheRecycler,, +                indexShard.acquireSearcher(DELETE_BY_QUERY_API, IndexShard.Mode.WRITE), indexService, indexShard, scriptService,, +++ b/src/main/java/org/elasticsearch/index/query/HasChildFilterParser.java, +import org.elasticsearch.index.query.support.XContentStructure;, +import static org.elasticsearch.index.query.QueryParserUtils.ensureNotDeleteByQuery;, +, +        ensureNotDeleteByQuery(NAME, parseContext);, +, +++ b/src/main/java/org/elasticsearch/action/deletebyquery/TransportShardDeleteByQueryAction.java, +    public final static String DELETE_BY_QUERY_API = "delete_by_query";, +, +                indexShard.acquireSearcher(DELETE_BY_QUERY_API), indexService, indexShard, scriptService, cacheRecycler,, +                indexShard.acquireSearcher(DELETE_BY_QUERY_API, IndexShard.Mode.WRITE), indexService, indexShard, scriptService,, +++ b/src/main/java/org/elasticsearch/index/query/HasChildFilterParser.java, +import org.elasticsearch.index.query.support.XContentStructure;, +import static org.elasticsearch.index.query.QueryParserUtils.ensureNotDeleteByQuery;, +, +        ensureNotDeleteByQuery(NAME, parseContext);, +, +++ b/src/main/java/org/elasticsearch/index/query/HasChildQueryParser.java, +import org.elasticsearch.index.query.support.XContentStructure;, +import org.elasticsearch.index.search.child.ChildrenConstantScoreQuery;, +import org.elasticsearch.index.search.child.ChildrenQuery;, +import org.elasticsearch.index.search.child.CustomQueryWrappingFilter;, +import org.elasticsearch.index.search.child.ScoreType;, +import static org.elasticsearch.index.query.QueryParserUtils.ensureNotDeleteByQuery;, +, +        ensureNotDeleteByQuery(NAME, parseContext);, +        if (scoreType != null) {, +++ b/src/main/java/org/elasticsearch/action/deletebyquery/TransportShardDeleteByQueryAction.java, +    public final static String DELETE_BY_QUERY_API = "delete_by_query";, +, +                indexShard.acquireSearcher(DELETE_BY_QUERY_API), indexService, indexShard, scriptService, cacheRecycler,, +                indexShard.acquireSearcher(DELETE_BY_QUERY_API, IndexShard.Mode.WRITE), indexService, indexShard, scriptService,, +++ b/src/main/java/org/elasticsearch/index/query/HasChildFilterParser.java, +import org.elasticsearch.index.query.support.XContentStructure;, +import static org.elasticsearch.index.query.QueryParserUtils.ensureNotDeleteByQuery;, +, +        ensureNotDeleteByQuery(NAME, parseContext);, +, +++ b/src/main/java/org/elasticsearch/index/query/HasChildQueryParser.java, +import org.elasticsearch.index.query.support.XContentStructure;, +import org.elasticsearch.index.search.child.ChildrenConstantScoreQuery;, +import org.elasticsearch.index.search.child.ChildrenQuery;, +import org.elasticsearch.index.search.child.CustomQueryWrappingFilter;, +import org.elasticsearch.index.search.child.ScoreType;, +import static org.elasticsearch.index.query.QueryParserUtils.ensureNotDeleteByQuery;, +, +        ensureNotDeleteByQuery(NAME, parseContext);, +        if (scoreType != null) {, +++ b/src/main/java/org/elasticsearch/index/query/HasParentFilterParser.java, +import org.elasticsearch.index.query.support.XContentStructure;, +import static org.elasticsearch.index.query.QueryParserUtils.ensureNotDeleteByQuery;, +, +        ensureNotDeleteByQuery(NAME, parseContext);, +++ b/src/main/java/org/elasticsearch/action/deletebyquery/TransportShardDeleteByQueryAction.java, +    public final static String DELETE_BY_QUERY_API = "delete_by_query";, +, +                indexShard.acquireSearcher(DELETE_BY_QUERY_API), indexService, indexShard, scriptService, cacheRecycler,, +                indexShard.acquireSearcher(DELETE_BY_QUERY_API, IndexShard.Mode.WRITE), indexService, indexShard, scriptService,, +++ b/src/main/java/org/elasticsearch/index/query/HasChildFilterParser.java, +import org.elasticsearch.index.query.support.XContentStructure;, +import static org.elasticsearch.index.query.QueryParserUtils.ensureNotDeleteByQuery;, +, +        ensureNotDeleteByQuery(NAME, parseContext);, +, +++ b/src/main/java/org/elasticsearch/index/query/HasChildQueryParser.java, +import org.elasticsearch.index.query.support.XContentStructure;, +import org.elasticsearch.index.search.child.ChildrenConstantScoreQuery;, +import org.elasticsearch.index.search.child.ChildrenQuery;, +import org.elasticsearch.index.search.child.CustomQueryWrappingFilter;, +import org.elasticsearch.index.search.child.ScoreType;, +import static org.elasticsearch.index.query.QueryParserUtils.ensureNotDeleteByQuery;, +, +        ensureNotDeleteByQuery(NAME, parseContext);, +        if (scoreType != null) {, +++ b/src/main/java/org/elasticsearch/index/query/HasParentFilterParser.java, +import org.elasticsearch.index.query.support.XContentStructure;, +import static org.elasticsearch.index.query.QueryParserUtils.ensureNotDeleteByQuery;, +, +        ensureNotDeleteByQuery(NAME, parseContext);, +++ b/src/main/java/org/elasticsearch/index/query/HasParentQueryParser.java, +import org.elasticsearch.index.query.support.XContentStructure;, +import static org.elasticsearch.index.query.QueryParserUtils.ensureNotDeleteByQuery;, +, +        ensureNotDeleteByQuery(NAME, parseContext);, +        if (score) {, +++ b/src/main/java/org/elasticsearch/action/deletebyquery/TransportShardDeleteByQueryAction.java, +    public final static String DELETE_BY_QUERY_API = "delete_by_query";, +, +                indexShard.acquireSearcher(DELETE_BY_QUERY_API), indexService, indexShard, scriptService, cacheRecycler,, +                indexShard.acquireSearcher(DELETE_BY_QUERY_API, IndexShard.Mode.WRITE), indexService, indexShard, scriptService,]