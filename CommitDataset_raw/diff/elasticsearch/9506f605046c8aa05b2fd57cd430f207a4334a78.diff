[+++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/core/src/main/java/org/elasticsearch/common/settings/AbstractScopedSettings.java, +            } else {, +                msg += " please check that any required plugins are installed, or check the breaking changes documentation for removed " +, +                    "settings";, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/core/src/main/java/org/elasticsearch/common/settings/AbstractScopedSettings.java, +            } else {, +                msg += " please check that any required plugins are installed, or check the breaking changes documentation for removed " +, +                    "settings";, +++ b/core/src/test/java/org/elasticsearch/action/admin/indices/create/CreateIndexIT.java, +            assertEquals("unknown setting [index.creation_date] please check that any required plugins are installed, or check the " +, +                "breaking changes documentation for removed settings", ex.getMessage());, +            assertEquals("unknown setting [index.unknown.value] please check that any required plugins are installed, or check the" +, +                " breaking changes documentation for removed settings", e.getMessage());, +                             // recreate that index, +                             client().prepareIndex("test", "test").setSource("index_version", indexVersion.get()).get();, +                                 // we sync here since we have to ensure that all indexing operations below for a given ID are done before, +                                 // we increment the index version otherwise a doc that is in-flight could make it into an index that it, +                                 // was supposed to be deleted for and our assertion fail..., +                             // from here on all docs with index_version == 0|1 must be gone!!!! only 2 are ok;, +                             assertAcked(client().admin().indices().prepareDelete("test").get());, +        // we only really assert that we never reuse segments of old indices or anything like this here and that nothing fails with, +        // crazy exceptions, +        SearchResponse expected = client().prepareSearch("test").setIndicesOptions(IndicesOptions.lenientExpandOpen()), +            .setQuery(new RangeQueryBuilder("index_version").from(indexVersion.get(), true)).get();, +        client().admin().cluster().prepareUpdateSettings().setTransientSettings(Settings.builder().put("cluster.routing.allocation.enable",, +            "none")).get();, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/core/src/main/java/org/elasticsearch/common/settings/AbstractScopedSettings.java, +            } else {, +                msg += " please check that any required plugins are installed, or check the breaking changes documentation for removed " +, +                    "settings";, +++ b/core/src/test/java/org/elasticsearch/action/admin/indices/create/CreateIndexIT.java, +            assertEquals("unknown setting [index.creation_date] please check that any required plugins are installed, or check the " +, +                "breaking changes documentation for removed settings", ex.getMessage());, +            assertEquals("unknown setting [index.unknown.value] please check that any required plugins are installed, or check the" +, +                " breaking changes documentation for removed settings", e.getMessage());, +                             // recreate that index, +                             client().prepareIndex("test", "test").setSource("index_version", indexVersion.get()).get();, +                                 // we sync here since we have to ensure that all indexing operations below for a given ID are done before, +                                 // we increment the index version otherwise a doc that is in-flight could make it into an index that it, +                                 // was supposed to be deleted for and our assertion fail..., +                             // from here on all docs with index_version == 0|1 must be gone!!!! only 2 are ok;, +                             assertAcked(client().admin().indices().prepareDelete("test").get());, +        // we only really assert that we never reuse segments of old indices or anything like this here and that nothing fails with, +        // crazy exceptions, +        SearchResponse expected = client().prepareSearch("test").setIndicesOptions(IndicesOptions.lenientExpandOpen()), +            .setQuery(new RangeQueryBuilder("index_version").from(indexVersion.get(), true)).get();, +        client().admin().cluster().prepareUpdateSettings().setTransientSettings(Settings.builder().put("cluster.routing.allocation.enable",, +            "none")).get();, +++ b/core/src/test/java/org/elasticsearch/common/settings/ScopedSettingsTests.java, +        String unknownMsgSuffix = " please check that any required plugins are installed, or check the breaking changes documentation for" +, +            " removed settings";, +            assertEquals("unknown setting [i.am.not.a.setting]" + unknownMsgSuffix, e.getMessage());, +            assertEquals("unknown setting [i.am.not.a.setting]" + unknownMsgSuffix, e.getMessage());, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/core/src/main/java/org/elasticsearch/common/settings/AbstractScopedSettings.java, +            } else {, +                msg += " please check that any required plugins are installed, or check the breaking changes documentation for removed " +, +                    "settings";, +++ b/core/src/test/java/org/elasticsearch/action/admin/indices/create/CreateIndexIT.java, +            assertEquals("unknown setting [index.creation_date] please check that any required plugins are installed, or check the " +, +                "breaking changes documentation for removed settings", ex.getMessage());, +            assertEquals("unknown setting [index.unknown.value] please check that any required plugins are installed, or check the" +, +                " breaking changes documentation for removed settings", e.getMessage());, +                             // recreate that index, +                             client().prepareIndex("test", "test").setSource("index_version", indexVersion.get()).get();, +                                 // we sync here since we have to ensure that all indexing operations below for a given ID are done before, +                                 // we increment the index version otherwise a doc that is in-flight could make it into an index that it, +                                 // was supposed to be deleted for and our assertion fail..., +                             // from here on all docs with index_version == 0|1 must be gone!!!! only 2 are ok;, +                             assertAcked(client().admin().indices().prepareDelete("test").get());, +        // we only really assert that we never reuse segments of old indices or anything like this here and that nothing fails with, +        // crazy exceptions, +        SearchResponse expected = client().prepareSearch("test").setIndicesOptions(IndicesOptions.lenientExpandOpen()), +            .setQuery(new RangeQueryBuilder("index_version").from(indexVersion.get(), true)).get();, +        client().admin().cluster().prepareUpdateSettings().setTransientSettings(Settings.builder().put("cluster.routing.allocation.enable",, +            "none")).get();, +++ b/core/src/test/java/org/elasticsearch/common/settings/ScopedSettingsTests.java, +        String unknownMsgSuffix = " please check that any required plugins are installed, or check the breaking changes documentation for" +, +            " removed settings";, +            assertEquals("unknown setting [i.am.not.a.setting]" + unknownMsgSuffix, e.getMessage());, +            assertEquals("unknown setting [i.am.not.a.setting]" + unknownMsgSuffix, e.getMessage());, +++ b/core/src/test/java/org/elasticsearch/common/settings/SettingsModuleTests.java, +            assertEquals("unknown setting [some.foo.bar] please check that any required plugins are installed, or check the breaking " +, +                "changes documentation for removed settings", ex.getSuppressed()[0].getMessage());, +                assertEquals("tribe.blocks validation failed: unknown setting [wtf] please check that any required plugins are" +, +                    " installed, or check the breaking changes documentation for removed settings", ex.getMessage());, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/core/src/main/java/org/elasticsearch/common/settings/AbstractScopedSettings.java, +            } else {, +                msg += " please check that any required plugins are installed, or check the breaking changes documentation for removed " +, +                    "settings";, +++ b/core/src/test/java/org/elasticsearch/action/admin/indices/create/CreateIndexIT.java, +            assertEquals("unknown setting [index.creation_date] please check that any required plugins are installed, or check the " +, +                "breaking changes documentation for removed settings", ex.getMessage());, +            assertEquals("unknown setting [index.unknown.value] please check that any required plugins are installed, or check the" +, +                " breaking changes documentation for removed settings", e.getMessage());]