[+++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final Version V_1_6_2 = new Version(V_1_6_2_ID, true, org.apache.lucene.util.Version.LUCENE_4_10_4);, +    public static final Version V_1_7_1 = new Version(V_1_7_1_ID, true, org.apache.lucene.util.Version.LUCENE_4_10_4);, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final Version V_1_6_2 = new Version(V_1_6_2_ID, true, org.apache.lucene.util.Version.LUCENE_4_10_4);, +    public static final Version V_1_7_1 = new Version(V_1_7_1_ID, true, org.apache.lucene.util.Version.LUCENE_4_10_4);, +++ b/core/src/main/java/org/elasticsearch/action/ActionModule.java, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final Version V_1_6_2 = new Version(V_1_6_2_ID, true, org.apache.lucene.util.Version.LUCENE_4_10_4);, +    public static final Version V_1_7_1 = new Version(V_1_7_1_ID, true, org.apache.lucene.util.Version.LUCENE_4_10_4);, +++ b/core/src/main/java/org/elasticsearch/action/ActionModule.java, +++ b/core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java, +                               ActionFilters actionFilters, IndexNameExpressionResolver indexNameExpressionResolver) {, +        this.autoCreateIndex = new AutoCreateIndex(settings);, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final Version V_1_6_2 = new Version(V_1_6_2_ID, true, org.apache.lucene.util.Version.LUCENE_4_10_4);, +    public static final Version V_1_7_1 = new Version(V_1_7_1_ID, true, org.apache.lucene.util.Version.LUCENE_4_10_4);, +++ b/core/src/main/java/org/elasticsearch/action/ActionModule.java, +++ b/core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java, +                               ActionFilters actionFilters, IndexNameExpressionResolver indexNameExpressionResolver) {, +        this.autoCreateIndex = new AutoCreateIndex(settings);, +++ b/core/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java, +                                 IndexNameExpressionResolver indexNameExpressionResolver, MappingUpdatedAction mappingUpdatedAction) {, +        this.autoCreateIndex = new AutoCreateIndex(settings);, +        if (autoCreateIndex.shouldAutoCreate(request.index(), clusterService.state())) {, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final Version V_1_6_2 = new Version(V_1_6_2_ID, true, org.apache.lucene.util.Version.LUCENE_4_10_4);, +    public static final Version V_1_7_1 = new Version(V_1_7_1_ID, true, org.apache.lucene.util.Version.LUCENE_4_10_4);, +++ b/core/src/main/java/org/elasticsearch/action/ActionModule.java, +++ b/core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java, +                               ActionFilters actionFilters, IndexNameExpressionResolver indexNameExpressionResolver) {, +        this.autoCreateIndex = new AutoCreateIndex(settings);, +++ b/core/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java, +                                 IndexNameExpressionResolver indexNameExpressionResolver, MappingUpdatedAction mappingUpdatedAction) {, +        this.autoCreateIndex = new AutoCreateIndex(settings);, +        if (autoCreateIndex.shouldAutoCreate(request.index(), clusterService.state())) {, +++ b/core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java, +                                ActionFilters actionFilters, IndexNameExpressionResolver indexNameExpressionResolver) {, +        this.autoCreateIndex = new AutoCreateIndex(settings);, +        if (autoCreateIndex.shouldAutoCreate(request.index(), clusterService.state())) {, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final Version V_1_6_2 = new Version(V_1_6_2_ID, true, org.apache.lucene.util.Version.LUCENE_4_10_4);, +    public static final Version V_1_7_1 = new Version(V_1_7_1_ID, true, org.apache.lucene.util.Version.LUCENE_4_10_4);, +++ b/core/src/main/java/org/elasticsearch/action/ActionModule.java, +++ b/core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java, +                               ActionFilters actionFilters, IndexNameExpressionResolver indexNameExpressionResolver) {, +        this.autoCreateIndex = new AutoCreateIndex(settings);, +++ b/core/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java, +                                 IndexNameExpressionResolver indexNameExpressionResolver, MappingUpdatedAction mappingUpdatedAction) {, +        this.autoCreateIndex = new AutoCreateIndex(settings);, +        if (autoCreateIndex.shouldAutoCreate(request.index(), clusterService.state())) {, +++ b/core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java, +                                ActionFilters actionFilters, IndexNameExpressionResolver indexNameExpressionResolver) {, +        this.autoCreateIndex = new AutoCreateIndex(settings);, +        if (autoCreateIndex.shouldAutoCreate(request.index(), clusterService.state())) {, +++ b/core/src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java, +            String[] concreteIndices = indexNameExpressionResolver.concreteIndices(clusterState, request.indicesOptions(), request.indices());, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final Version V_1_6_2 = new Version(V_1_6_2_ID, true, org.apache.lucene.util.Version.LUCENE_4_10_4);, +    public static final Version V_1_7_1 = new Version(V_1_7_1_ID, true, org.apache.lucene.util.Version.LUCENE_4_10_4);, +++ b/core/src/main/java/org/elasticsearch/action/ActionModule.java, +++ b/core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java, +                               ActionFilters actionFilters, IndexNameExpressionResolver indexNameExpressionResolver) {, +        this.autoCreateIndex = new AutoCreateIndex(settings);, +++ b/core/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java, +                                 IndexNameExpressionResolver indexNameExpressionResolver, MappingUpdatedAction mappingUpdatedAction) {, +        this.autoCreateIndex = new AutoCreateIndex(settings);, +        if (autoCreateIndex.shouldAutoCreate(request.index(), clusterService.state())) {, +++ b/core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java, +                                ActionFilters actionFilters, IndexNameExpressionResolver indexNameExpressionResolver) {, +        this.autoCreateIndex = new AutoCreateIndex(settings);, +        if (autoCreateIndex.shouldAutoCreate(request.index(), clusterService.state())) {, +++ b/core/src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java, +            String[] concreteIndices = indexNameExpressionResolver.concreteIndices(clusterState, request.indicesOptions(), request.indices());, +++ b/core/src/main/java/org/elasticsearch/action/support/AutoCreateIndex.java, +public class AutoCreateIndex {, +    public AutoCreateIndex(Settings settings) {, +        if (state.metaData().hasConcreteIndex(index)) {, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final Version V_1_6_2 = new Version(V_1_6_2_ID, true, org.apache.lucene.util.Version.LUCENE_4_10_4);, +    public static final Version V_1_7_1 = new Version(V_1_7_1_ID, true, org.apache.lucene.util.Version.LUCENE_4_10_4);, +++ b/core/src/main/java/org/elasticsearch/action/ActionModule.java, +++ b/core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java, +                               ActionFilters actionFilters, IndexNameExpressionResolver indexNameExpressionResolver) {, +        this.autoCreateIndex = new AutoCreateIndex(settings);, +++ b/core/src/main/java/org/elasticsearch/action/delete/TransportDeleteAction.java, +                                 IndexNameExpressionResolver indexNameExpressionResolver, MappingUpdatedAction mappingUpdatedAction) {, +        this.autoCreateIndex = new AutoCreateIndex(settings);, +        if (autoCreateIndex.shouldAutoCreate(request.index(), clusterService.state())) {, +++ b/core/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java, +                                ActionFilters actionFilters, IndexNameExpressionResolver indexNameExpressionResolver) {, +        this.autoCreateIndex = new AutoCreateIndex(settings);, +        if (autoCreateIndex.shouldAutoCreate(request.index(), clusterService.state())) {, +++ b/core/src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java, +            String[] concreteIndices = indexNameExpressionResolver.concreteIndices(clusterState, request.indicesOptions(), request.indices());, +++ b/core/src/main/java/org/elasticsearch/action/support/AutoCreateIndex.java, +public class AutoCreateIndex {, +    public AutoCreateIndex(Settings settings) {, +        if (state.metaData().hasConcreteIndex(index)) {, +++ b/core/src/main/java/org/elasticsearch/action/update/TransportUpdateAction.java]