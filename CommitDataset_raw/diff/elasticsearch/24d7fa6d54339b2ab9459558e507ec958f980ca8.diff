[+++ b/core/src/main/java/org/elasticsearch/action/ingest/WriteableIngestDocument.java, +        Map<String, Object> ingestMetadata = in.readMap();, +        out.writeMap(ingestDocument.getIngestMetadata());, +        builder.field("_ingest", ingestDocument.getIngestMetadata());, +++ b/core/src/main/java/org/elasticsearch/action/ingest/WriteableIngestDocument.java, +        Map<String, Object> ingestMetadata = in.readMap();, +        out.writeMap(ingestDocument.getIngestMetadata());, +        builder.field("_ingest", ingestDocument.getIngestMetadata());, +++ b/core/src/main/java/org/elasticsearch/ingest/CompoundProcessor.java, +        Map<String, Object> ingestMetadata = ingestDocument.getIngestMetadata();, +        Map<String, Object> ingestMetadata = ingestDocument.getIngestMetadata();, +++ b/core/src/main/java/org/elasticsearch/action/ingest/WriteableIngestDocument.java, +        Map<String, Object> ingestMetadata = in.readMap();, +        out.writeMap(ingestDocument.getIngestMetadata());, +        builder.field("_ingest", ingestDocument.getIngestMetadata());, +++ b/core/src/main/java/org/elasticsearch/ingest/CompoundProcessor.java, +        Map<String, Object> ingestMetadata = ingestDocument.getIngestMetadata();, +        Map<String, Object> ingestMetadata = ingestDocument.getIngestMetadata();, +++ b/core/src/main/java/org/elasticsearch/ingest/IngestDocument.java, +    private final Map<String, Object> ingestMetadata;, +    public IngestDocument(Map<String, Object> sourceAndMetadata, Map<String, Object> ingestMetadata) {, +    public Map<String, Object> getIngestMetadata() {, +++ b/core/src/main/java/org/elasticsearch/action/ingest/WriteableIngestDocument.java, +        Map<String, Object> ingestMetadata = in.readMap();, +        out.writeMap(ingestDocument.getIngestMetadata());, +        builder.field("_ingest", ingestDocument.getIngestMetadata());, +++ b/core/src/main/java/org/elasticsearch/ingest/CompoundProcessor.java, +        Map<String, Object> ingestMetadata = ingestDocument.getIngestMetadata();, +        Map<String, Object> ingestMetadata = ingestDocument.getIngestMetadata();, +++ b/core/src/main/java/org/elasticsearch/ingest/IngestDocument.java, +    private final Map<String, Object> ingestMetadata;, +    public IngestDocument(Map<String, Object> sourceAndMetadata, Map<String, Object> ingestMetadata) {, +    public Map<String, Object> getIngestMetadata() {, +++ b/core/src/test/java/org/elasticsearch/action/ingest/SimulateExecutionServiceTests.java, +        Map<String, Object> metadata = ingestDocumentWithOnFailureMetadata.getIngestMetadata();, +++ b/core/src/main/java/org/elasticsearch/action/ingest/WriteableIngestDocument.java, +        Map<String, Object> ingestMetadata = in.readMap();, +        out.writeMap(ingestDocument.getIngestMetadata());, +        builder.field("_ingest", ingestDocument.getIngestMetadata());, +++ b/core/src/main/java/org/elasticsearch/ingest/CompoundProcessor.java, +        Map<String, Object> ingestMetadata = ingestDocument.getIngestMetadata();, +        Map<String, Object> ingestMetadata = ingestDocument.getIngestMetadata();, +++ b/core/src/main/java/org/elasticsearch/ingest/IngestDocument.java, +    private final Map<String, Object> ingestMetadata;, +    public IngestDocument(Map<String, Object> sourceAndMetadata, Map<String, Object> ingestMetadata) {, +    public Map<String, Object> getIngestMetadata() {, +++ b/core/src/test/java/org/elasticsearch/action/ingest/SimulateExecutionServiceTests.java, +        Map<String, Object> metadata = ingestDocumentWithOnFailureMetadata.getIngestMetadata();, +++ b/core/src/test/java/org/elasticsearch/action/ingest/TrackingResultProcessorTests.java, +        Map<String, Object> metadata = resultList.get(1).getIngestDocument().getIngestMetadata();, +++ b/core/src/main/java/org/elasticsearch/action/ingest/WriteableIngestDocument.java, +        Map<String, Object> ingestMetadata = in.readMap();, +        out.writeMap(ingestDocument.getIngestMetadata());, +        builder.field("_ingest", ingestDocument.getIngestMetadata());, +++ b/core/src/main/java/org/elasticsearch/ingest/CompoundProcessor.java, +        Map<String, Object> ingestMetadata = ingestDocument.getIngestMetadata();, +        Map<String, Object> ingestMetadata = ingestDocument.getIngestMetadata();, +++ b/core/src/main/java/org/elasticsearch/ingest/IngestDocument.java, +    private final Map<String, Object> ingestMetadata;, +    public IngestDocument(Map<String, Object> sourceAndMetadata, Map<String, Object> ingestMetadata) {, +    public Map<String, Object> getIngestMetadata() {, +++ b/core/src/test/java/org/elasticsearch/action/ingest/SimulateExecutionServiceTests.java, +        Map<String, Object> metadata = ingestDocumentWithOnFailureMetadata.getIngestMetadata();, +++ b/core/src/test/java/org/elasticsearch/action/ingest/TrackingResultProcessorTests.java, +        Map<String, Object> metadata = resultList.get(1).getIngestDocument().getIngestMetadata();, +++ b/core/src/test/java/org/elasticsearch/action/ingest/WriteableIngestDocumentTests.java, +        Map<String, Object> ingestMetadata = new HashMap<>();, +        Map<String, Object> otherIngestMetadata;, +        Map<String, Object> ingestMetadata = new HashMap<>();, +        Map<String, Object> toXContentIngestMetadata = (Map<String, Object>) toXContentDoc.get("_ingest");, +++ b/core/src/main/java/org/elasticsearch/action/ingest/WriteableIngestDocument.java, +        Map<String, Object> ingestMetadata = in.readMap();, +        out.writeMap(ingestDocument.getIngestMetadata());, +        builder.field("_ingest", ingestDocument.getIngestMetadata());, +++ b/core/src/main/java/org/elasticsearch/ingest/CompoundProcessor.java, +        Map<String, Object> ingestMetadata = ingestDocument.getIngestMetadata();, +        Map<String, Object> ingestMetadata = ingestDocument.getIngestMetadata();, +++ b/core/src/main/java/org/elasticsearch/ingest/IngestDocument.java, +    private final Map<String, Object> ingestMetadata;, +    public IngestDocument(Map<String, Object> sourceAndMetadata, Map<String, Object> ingestMetadata) {, +    public Map<String, Object> getIngestMetadata() {, +++ b/core/src/test/java/org/elasticsearch/action/ingest/SimulateExecutionServiceTests.java, +        Map<String, Object> metadata = ingestDocumentWithOnFailureMetadata.getIngestMetadata();, +++ b/core/src/test/java/org/elasticsearch/action/ingest/TrackingResultProcessorTests.java, +        Map<String, Object> metadata = resultList.get(1).getIngestDocument().getIngestMetadata();, +++ b/core/src/test/java/org/elasticsearch/action/ingest/WriteableIngestDocumentTests.java, +        Map<String, Object> ingestMetadata = new HashMap<>();, +        Map<String, Object> otherIngestMetadata;, +        Map<String, Object> ingestMetadata = new HashMap<>();, +        Map<String, Object> toXContentIngestMetadata = (Map<String, Object>) toXContentDoc.get("_ingest");, +++ b/core/src/test/java/org/elasticsearch/ingest/CompoundProcessorTests.java, +            Map<String, Object> ingestMetadata = ingestDocument.getIngestMetadata();, +            Map<String, Object> ingestMetadata = ingestDocument.getIngestMetadata();, +            Map<String, Object> ingestMetadata = ingestDocument.getIngestMetadata();, +            Map<String, Object> ingestMetadata = ingestDocument.getIngestMetadata();, +            Map<String, Object> ingestMetadata = ingestDocument.getIngestMetadata();, +            Map<String, Object> ingestMetadata = ingestDocument.getIngestMetadata();, +++ b/core/src/main/java/org/elasticsearch/action/ingest/WriteableIngestDocument.java, +        Map<String, Object> ingestMetadata = in.readMap();, +        out.writeMap(ingestDocument.getIngestMetadata());]