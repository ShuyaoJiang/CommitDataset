[+++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/persistence/AnomalyDetectorsIndex.java, +        return AnomalyDetectorsIndexFields.STATE_INDEX_PREFIX;, +    }, +, +    /**, +     * The name pattern to capture all .ml-state prefixed indices, +     * @return The .ml-state index pattern, +     */, +    public static String jobStateIndexPattern() {, +        return AnomalyDetectorsIndexFields.STATE_INDEX_PREFIX + "*";, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/persistence/AnomalyDetectorsIndex.java, +        return AnomalyDetectorsIndexFields.STATE_INDEX_PREFIX;, +    }, +, +    /**, +     * The name pattern to capture all .ml-state prefixed indices, +     * @return The .ml-state index pattern, +     */, +    public static String jobStateIndexPattern() {, +        return AnomalyDetectorsIndexFields.STATE_INDEX_PREFIX + "*";, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/persistence/AnomalyDetectorsIndexFields.java, +    public static final String STATE_INDEX_PREFIX = ".ml-state";, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/persistence/AnomalyDetectorsIndex.java, +        return AnomalyDetectorsIndexFields.STATE_INDEX_PREFIX;, +    }, +, +    /**, +     * The name pattern to capture all .ml-state prefixed indices, +     * @return The .ml-state index pattern, +     */, +    public static String jobStateIndexPattern() {, +        return AnomalyDetectorsIndexFields.STATE_INDEX_PREFIX + "*";, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/persistence/AnomalyDetectorsIndexFields.java, +    public static final String STATE_INDEX_PREFIX = ".ml-state";, +++ b/x-pack/plugin/ml/qa/native-multi-node-tests/src/test/java/org/elasticsearch/xpack/ml/integration/DeleteExpiredDataIT.java, +        SearchResponse stateDocsResponse = client().prepareSearch(AnomalyDetectorsIndex.jobStateIndexPattern()), +                .setTrackTotalHits(true), +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/persistence/AnomalyDetectorsIndex.java, +        return AnomalyDetectorsIndexFields.STATE_INDEX_PREFIX;, +    }, +, +    /**, +     * The name pattern to capture all .ml-state prefixed indices, +     * @return The .ml-state index pattern, +     */, +    public static String jobStateIndexPattern() {, +        return AnomalyDetectorsIndexFields.STATE_INDEX_PREFIX + "*";, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/persistence/AnomalyDetectorsIndexFields.java, +    public static final String STATE_INDEX_PREFIX = ".ml-state";, +++ b/x-pack/plugin/ml/qa/native-multi-node-tests/src/test/java/org/elasticsearch/xpack/ml/integration/DeleteExpiredDataIT.java, +        SearchResponse stateDocsResponse = client().prepareSearch(AnomalyDetectorsIndex.jobStateIndexPattern()), +                .setTrackTotalHits(true), +++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/MachineLearning.java, +                        .patterns(Collections.singletonList(AnomalyDetectorsIndex.jobStateIndexPattern())), +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/persistence/AnomalyDetectorsIndex.java, +        return AnomalyDetectorsIndexFields.STATE_INDEX_PREFIX;, +    }, +, +    /**, +     * The name pattern to capture all .ml-state prefixed indices, +     * @return The .ml-state index pattern, +     */, +    public static String jobStateIndexPattern() {, +        return AnomalyDetectorsIndexFields.STATE_INDEX_PREFIX + "*";, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/persistence/AnomalyDetectorsIndexFields.java, +    public static final String STATE_INDEX_PREFIX = ".ml-state";, +++ b/x-pack/plugin/ml/qa/native-multi-node-tests/src/test/java/org/elasticsearch/xpack/ml/integration/DeleteExpiredDataIT.java, +        SearchResponse stateDocsResponse = client().prepareSearch(AnomalyDetectorsIndex.jobStateIndexPattern()), +                .setTrackTotalHits(true), +++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/MachineLearning.java, +                        .patterns(Collections.singletonList(AnomalyDetectorsIndex.jobStateIndexPattern())), +++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/action/TransportDeleteJobAction.java, +        ActionListener<BulkByScrollResponse> deleteStateHandler = ActionListener.wrap(, +        DeleteByQueryRequest request = new DeleteByQueryRequest(AnomalyDetectorsIndex.jobStateIndexPattern());, +    private void deleteModelState(ParentTaskAssigningClient parentTaskClient, String jobId, ActionListener<BulkByScrollResponse> listener) {, +        DeleteByQueryRequest request = new DeleteByQueryRequest(AnomalyDetectorsIndex.jobStateIndexPattern());, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/persistence/AnomalyDetectorsIndex.java, +        return AnomalyDetectorsIndexFields.STATE_INDEX_PREFIX;, +    }, +, +    /**, +     * The name pattern to capture all .ml-state prefixed indices, +     * @return The .ml-state index pattern, +     */, +    public static String jobStateIndexPattern() {, +        return AnomalyDetectorsIndexFields.STATE_INDEX_PREFIX + "*";, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/persistence/AnomalyDetectorsIndexFields.java, +    public static final String STATE_INDEX_PREFIX = ".ml-state";, +++ b/x-pack/plugin/ml/qa/native-multi-node-tests/src/test/java/org/elasticsearch/xpack/ml/integration/DeleteExpiredDataIT.java, +        SearchResponse stateDocsResponse = client().prepareSearch(AnomalyDetectorsIndex.jobStateIndexPattern()), +                .setTrackTotalHits(true), +++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/MachineLearning.java, +                        .patterns(Collections.singletonList(AnomalyDetectorsIndex.jobStateIndexPattern())), +++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/action/TransportDeleteJobAction.java, +        ActionListener<BulkByScrollResponse> deleteStateHandler = ActionListener.wrap(, +        DeleteByQueryRequest request = new DeleteByQueryRequest(AnomalyDetectorsIndex.jobStateIndexPattern());, +    private void deleteModelState(ParentTaskAssigningClient parentTaskClient, String jobId, ActionListener<BulkByScrollResponse> listener) {, +        DeleteByQueryRequest request = new DeleteByQueryRequest(AnomalyDetectorsIndex.jobStateIndexPattern());, +++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/action/TransportDeleteModelSnapshotAction.java, +import org.elasticsearch.index.reindex.BulkByScrollResponse;]