[+++ b/core/src/main/java/org/elasticsearch/index/IndexSettings.java, +                    /*, +                     * An empty translog occupies 43 bytes on disk. If the generation threshold is, +                     * below this, the flush thread can get stuck in an infinite loop repeatedly, +                     * rolling the generation as every new generation will already exceed the, +                     * generation threshold. However, small thresholds are useful for testing so we, +                     * do not add a large lower bound here., +                     */, +                    new ByteSizeValue(64, ByteSizeUnit.BYTES),, +                    new ByteSizeValue(Long.MAX_VALUE, ByteSizeUnit.BYTES),, +++ b/core/src/main/java/org/elasticsearch/index/IndexSettings.java, +                    /*, +                     * An empty translog occupies 43 bytes on disk. If the generation threshold is, +                     * below this, the flush thread can get stuck in an infinite loop repeatedly, +                     * rolling the generation as every new generation will already exceed the, +                     * generation threshold. However, small thresholds are useful for testing so we, +                     * do not add a large lower bound here., +                     */, +                    new ByteSizeValue(64, ByteSizeUnit.BYTES),, +                    new ByteSizeValue(Long.MAX_VALUE, ByteSizeUnit.BYTES),, +++ b/core/src/test/java/org/elasticsearch/index/shard/IndexShardIT.java, +        final int generationThreshold = randomIntBetween(64, 512);, +        final int numberOfDocuments = randomIntBetween(32, 128);, +        for (int i = 0; i < numberOfDocuments; i++) {]