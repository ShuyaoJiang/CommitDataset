[+++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        Object[] args = [new File(node.homeDir, 'bin/plugin'), 'install', file], +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        Object[] args = [new File(node.homeDir, 'bin/plugin'), 'install', file], +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        Object[] args = [new File(node.homeDir, 'bin/plugin'), 'install', file], +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/core/src/main/java/org/elasticsearch/common/xcontent/XContentType.java, +        public String restContentType() {, +        public String restContentType() {, +        public String restContentType() {, +        public String restContentType() {, +    },;, +    public static XContentType fromRestContentType(String contentType) {, +        if (contentType == null) {, +        if ("application/json".equals(contentType) || "json".equalsIgnoreCase(contentType)) {, +        if ("application/smile".equals(contentType) || "smile".equalsIgnoreCase(contentType)) {, +            return SMILE;, +        if ("application/yaml".equals(contentType) || "yaml".equalsIgnoreCase(contentType)) {, +            return YAML;, +        }, +, +        if ("application/cbor".equals(contentType) || "cbor".equalsIgnoreCase(contentType)) {, +            return CBOR;, +        }, +, +        return null;, +    public abstract String restContentType();, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        Object[] args = [new File(node.homeDir, 'bin/plugin'), 'install', file], +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/core/src/main/java/org/elasticsearch/common/xcontent/XContentType.java, +        public String restContentType() {, +        public String restContentType() {, +        public String restContentType() {, +        public String restContentType() {, +    },;, +    public static XContentType fromRestContentType(String contentType) {, +        if (contentType == null) {, +        if ("application/json".equals(contentType) || "json".equalsIgnoreCase(contentType)) {, +        if ("application/smile".equals(contentType) || "smile".equalsIgnoreCase(contentType)) {, +            return SMILE;, +        if ("application/yaml".equals(contentType) || "yaml".equalsIgnoreCase(contentType)) {, +            return YAML;, +        }, +, +        if ("application/cbor".equals(contentType) || "cbor".equalsIgnoreCase(contentType)) {, +            return CBOR;, +        }, +, +        return null;, +    public abstract String restContentType();, +++ b/core/src/main/java/org/elasticsearch/gateway/MetaStateService.java, +        this.format = XContentType.fromRestContentType(settings.get(FORMAT_SETTING, "smile"));, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        Object[] args = [new File(node.homeDir, 'bin/plugin'), 'install', file], +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/core/src/main/java/org/elasticsearch/common/xcontent/XContentType.java, +        public String restContentType() {, +        public String restContentType() {, +        public String restContentType() {, +        public String restContentType() {, +    },;, +    public static XContentType fromRestContentType(String contentType) {, +        if (contentType == null) {, +        if ("application/json".equals(contentType) || "json".equalsIgnoreCase(contentType)) {, +        if ("application/smile".equals(contentType) || "smile".equalsIgnoreCase(contentType)) {, +            return SMILE;, +        if ("application/yaml".equals(contentType) || "yaml".equalsIgnoreCase(contentType)) {, +            return YAML;, +        }, +, +        if ("application/cbor".equals(contentType) || "cbor".equalsIgnoreCase(contentType)) {, +            return CBOR;, +        }, +, +        return null;, +    public abstract String restContentType();, +++ b/core/src/main/java/org/elasticsearch/gateway/MetaStateService.java, +        this.format = XContentType.fromRestContentType(settings.get(FORMAT_SETTING, "smile"));, +++ b/core/src/main/java/org/elasticsearch/rest/BytesRestResponse.java, +        this(status, builder.contentType().restContentType(), builder.bytes());, +            this.contentType = builder.contentType().restContentType();, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        Object[] args = [new File(node.homeDir, 'bin/plugin'), 'install', file], +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/core/src/main/java/org/elasticsearch/common/xcontent/XContentType.java, +        public String restContentType() {, +        public String restContentType() {, +        public String restContentType() {, +        public String restContentType() {, +    },;, +    public static XContentType fromRestContentType(String contentType) {, +        if (contentType == null) {, +        if ("application/json".equals(contentType) || "json".equalsIgnoreCase(contentType)) {, +        if ("application/smile".equals(contentType) || "smile".equalsIgnoreCase(contentType)) {, +            return SMILE;, +        if ("application/yaml".equals(contentType) || "yaml".equalsIgnoreCase(contentType)) {, +            return YAML;]