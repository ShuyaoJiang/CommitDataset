[+++ b/core/src/main/java/org/elasticsearch/index/query/RangeQueryBuilder.java, +            FieldStatsProvider.Relation relation = fieldStatsProvider.isFieldWithinQuery(fieldName, from, to, includeLower, includeUpper,, +                    newRangeQuery.from(fieldStats.getMinValue(), includeLower || fieldStats.match(, +                            new IndexConstraint(fieldName, Property.MIN, Comparison.GT, fieldStats.stringValueOf(from, dateFormatString))));, +                    newRangeQuery.to(fieldStats.getMaxValue(), includeUpper || fieldStats.match(, +                            new IndexConstraint(fieldName, Property.MAX, Comparison.LT, fieldStats.stringValueOf(to, dateFormatString))));, +++ b/core/src/main/java/org/elasticsearch/index/query/RangeQueryBuilder.java, +            FieldStatsProvider.Relation relation = fieldStatsProvider.isFieldWithinQuery(fieldName, from, to, includeLower, includeUpper,, +                    newRangeQuery.from(fieldStats.getMinValue(), includeLower || fieldStats.match(, +                            new IndexConstraint(fieldName, Property.MIN, Comparison.GT, fieldStats.stringValueOf(from, dateFormatString))));, +                    newRangeQuery.to(fieldStats.getMaxValue(), includeUpper || fieldStats.match(, +                            new IndexConstraint(fieldName, Property.MAX, Comparison.LT, fieldStats.stringValueOf(to, dateFormatString))));, +++ b/core/src/test/java/org/elasticsearch/search/matchedqueries/MatchedQueriesIT.java, +.setQuery(boolQuery().must(matchAllQuery()).filter(boolQuery(), +                        .should(rangeQuery("number").lt(2).queryName("test1")).should(rangeQuery("number").gte(2).queryName("test2")))), +                .get();, +            if (hit.id().equals("3") || hit.id().equals("2")) {, +            } else if (hit.id().equals("1")) {, +                assertThat(hit.matchedQueries().length, equalTo(1));, +                assertThat(hit.matchedQueries(), hasItemInArray("test1"));]