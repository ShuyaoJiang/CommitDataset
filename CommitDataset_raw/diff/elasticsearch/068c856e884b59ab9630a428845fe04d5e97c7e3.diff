[+++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/Ccr.java, +        this.repositoryManager.set(new CcrRepositoryManager(settings, clusterService, client));, +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/Ccr.java, +        this.repositoryManager.set(new CcrRepositoryManager(settings, clusterService, client));, +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/CcrRepositoryManager.java, +import org.elasticsearch.client.Client;, +    private final Client client;, +    CcrRepositoryManager(Settings settings, ClusterService clusterService, Client client) {, +            client.execute(DeleteInternalCcrRepositoryAction.INSTANCE, request, f);, +            client.execute(PutInternalCcrRepositoryAction.INSTANCE, request, f);, +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/Ccr.java, +        this.repositoryManager.set(new CcrRepositoryManager(settings, clusterService, client));, +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/CcrRepositoryManager.java, +import org.elasticsearch.client.Client;, +    private final Client client;, +    CcrRepositoryManager(Settings settings, ClusterService clusterService, Client client) {, +            client.execute(DeleteInternalCcrRepositoryAction.INSTANCE, request, f);, +            client.execute(PutInternalCcrRepositoryAction.INSTANCE, request, f);, +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/action/repositories/DeleteInternalCcrRepositoryAction.java, +    public static final String NAME = "internal:admin/ccr/internal_repository/delete";, +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/Ccr.java, +        this.repositoryManager.set(new CcrRepositoryManager(settings, clusterService, client));, +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/CcrRepositoryManager.java, +import org.elasticsearch.client.Client;, +    private final Client client;, +    CcrRepositoryManager(Settings settings, ClusterService clusterService, Client client) {, +            client.execute(DeleteInternalCcrRepositoryAction.INSTANCE, request, f);, +            client.execute(PutInternalCcrRepositoryAction.INSTANCE, request, f);, +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/action/repositories/DeleteInternalCcrRepositoryAction.java, +    public static final String NAME = "internal:admin/ccr/internal_repository/delete";, +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/action/repositories/PutInternalCcrRepositoryAction.java, +    public static final String NAME = "internal:admin/ccr/internal_repository/put";]