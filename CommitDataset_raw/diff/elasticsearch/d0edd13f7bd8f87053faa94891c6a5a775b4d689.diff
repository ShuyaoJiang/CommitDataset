[+++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsGroup.java, +import org.elasticsearch.index.shard.ShardId;, +    private ShardId shardId;, +    public ClusterSearchShardsGroup(ShardId shardId, ShardRouting[] shards) {, +        return shardId.getIndexName();, +        return shardId.id();, +        shardId = ShardId.readShardId(in);, +            shards[i] = new ShardRouting(shardId, in);, +        shardId.writeTo(out);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsGroup.java, +import org.elasticsearch.index.shard.ShardId;, +    private ShardId shardId;, +    public ClusterSearchShardsGroup(ShardId shardId, ShardRouting[] shards) {, +        return shardId.getIndexName();, +        return shardId.id();, +        shardId = ShardId.readShardId(in);, +            shards[i] = new ShardRouting(shardId, in);, +        shardId.writeTo(out);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/shards/TransportClusterSearchShardsAction.java, +import org.elasticsearch.index.shard.ShardId;, +            ShardId shardId = shardIt.shardId();, +            groupResponses[currentGroup++] = new ClusterSearchShardsGroup(shardId, shardRoutings);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsGroup.java, +import org.elasticsearch.index.shard.ShardId;, +    private ShardId shardId;, +    public ClusterSearchShardsGroup(ShardId shardId, ShardRouting[] shards) {, +        return shardId.getIndexName();, +        return shardId.id();, +        shardId = ShardId.readShardId(in);, +            shards[i] = new ShardRouting(shardId, in);, +        shardId.writeTo(out);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/shards/TransportClusterSearchShardsAction.java, +import org.elasticsearch.index.shard.ShardId;, +            ShardId shardId = shardIt.shardId();, +            groupResponses[currentGroup++] = new ClusterSearchShardsGroup(shardId, shardRoutings);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/segments/ShardSegments.java, +        shardRouting = new ShardRouting(in);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsGroup.java, +import org.elasticsearch.index.shard.ShardId;, +    private ShardId shardId;, +    public ClusterSearchShardsGroup(ShardId shardId, ShardRouting[] shards) {, +        return shardId.getIndexName();, +        return shardId.id();, +        shardId = ShardId.readShardId(in);, +            shards[i] = new ShardRouting(shardId, in);, +        shardId.writeTo(out);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/shards/TransportClusterSearchShardsAction.java, +import org.elasticsearch.index.shard.ShardId;, +            ShardId shardId = shardIt.shardId();, +            groupResponses[currentGroup++] = new ClusterSearchShardsGroup(shardId, shardRoutings);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/segments/ShardSegments.java, +        shardRouting = new ShardRouting(in);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/ShardStats.java, +        shardRouting = new ShardRouting(in);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsGroup.java, +import org.elasticsearch.index.shard.ShardId;, +    private ShardId shardId;, +    public ClusterSearchShardsGroup(ShardId shardId, ShardRouting[] shards) {, +        return shardId.getIndexName();, +        return shardId.id();, +        shardId = ShardId.readShardId(in);, +            shards[i] = new ShardRouting(shardId, in);, +        shardId.writeTo(out);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/shards/TransportClusterSearchShardsAction.java, +import org.elasticsearch.index.shard.ShardId;, +            ShardId shardId = shardIt.shardId();, +            groupResponses[currentGroup++] = new ClusterSearchShardsGroup(shardId, shardRoutings);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/segments/ShardSegments.java, +        shardRouting = new ShardRouting(in);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/ShardStats.java, +        shardRouting = new ShardRouting(in);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/get/ShardUpgradeStatus.java, +        shardRouting = new ShardRouting(in);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsGroup.java, +import org.elasticsearch.index.shard.ShardId;, +    private ShardId shardId;, +    public ClusterSearchShardsGroup(ShardId shardId, ShardRouting[] shards) {, +        return shardId.getIndexName();, +        return shardId.id();, +        shardId = ShardId.readShardId(in);, +            shards[i] = new ShardRouting(shardId, in);, +        shardId.writeTo(out);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/shards/TransportClusterSearchShardsAction.java, +import org.elasticsearch.index.shard.ShardId;, +            ShardId shardId = shardIt.shardId();, +            groupResponses[currentGroup++] = new ClusterSearchShardsGroup(shardId, shardRoutings);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/segments/ShardSegments.java, +        shardRouting = new ShardRouting(in);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/ShardStats.java, +        shardRouting = new ShardRouting(in);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/upgrade/get/ShardUpgradeStatus.java, +        shardRouting = new ShardRouting(in);, +++ b/core/src/main/java/org/elasticsearch/action/support/broadcast/node/TransportBroadcastByNodeAction.java, +                shards.add(new ShardRouting(in));, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsGroup.java, +import org.elasticsearch.index.shard.ShardId;, +    private ShardId shardId;, +    public ClusterSearchShardsGroup(ShardId shardId, ShardRouting[] shards) {, +        return shardId.getIndexName();, +        return shardId.id();]