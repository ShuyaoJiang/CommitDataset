[+++ b/plugin/src/main/java/org/elasticsearch/xpack/XPackPlugin.java, +import org.elasticsearch.cluster.metadata.IndexTemplateMetaData;, +    }, +    @Override, +    public UnaryOperator<Map<String, IndexTemplateMetaData>> getIndexTemplateMetaDataUpgrader() {, +        return watcher.getIndexTemplateMetaDataUpgrader();, +++ b/plugin/src/main/java/org/elasticsearch/xpack/XPackPlugin.java, +import org.elasticsearch.cluster.metadata.IndexTemplateMetaData;, +    }, +    @Override, +    public UnaryOperator<Map<String, IndexTemplateMetaData>> getIndexTemplateMetaDataUpgrader() {, +        return watcher.getIndexTemplateMetaDataUpgrader();, +++ b/plugin/src/main/java/org/elasticsearch/xpack/watcher/Watcher.java, +import org.elasticsearch.cluster.metadata.IndexTemplateMetaData;, +import java.util.function.UnaryOperator;, +, +    // These are all old templates from pre 6.0 era, that need to be deleted, +    public UnaryOperator<Map<String, IndexTemplateMetaData>> getIndexTemplateMetaDataUpgrader() {, +        return map -> {, +            map.keySet().removeIf(name -> "watches".equals(name) || "triggered_watches".equals(name), +                        || name.startsWith("watch_history_"));, +, +            return map;, +        };, +    }, +++ b/plugin/src/main/java/org/elasticsearch/xpack/XPackPlugin.java, +import org.elasticsearch.cluster.metadata.IndexTemplateMetaData;, +    }, +    @Override, +    public UnaryOperator<Map<String, IndexTemplateMetaData>> getIndexTemplateMetaDataUpgrader() {, +        return watcher.getIndexTemplateMetaDataUpgrader();, +++ b/plugin/src/main/java/org/elasticsearch/xpack/watcher/Watcher.java, +import org.elasticsearch.cluster.metadata.IndexTemplateMetaData;, +import java.util.function.UnaryOperator;, +, +    // These are all old templates from pre 6.0 era, that need to be deleted, +    public UnaryOperator<Map<String, IndexTemplateMetaData>> getIndexTemplateMetaDataUpgrader() {, +        return map -> {, +            map.keySet().removeIf(name -> "watches".equals(name) || "triggered_watches".equals(name), +                        || name.startsWith("watch_history_"));, +, +            return map;, +        };, +    }, +++ b/plugin/src/main/java/org/elasticsearch/xpack/watcher/support/WatcherIndexTemplateRegistry.java, +++ b/plugin/src/main/java/org/elasticsearch/xpack/XPackPlugin.java, +import org.elasticsearch.cluster.metadata.IndexTemplateMetaData;, +    }, +    @Override, +    public UnaryOperator<Map<String, IndexTemplateMetaData>> getIndexTemplateMetaDataUpgrader() {, +        return watcher.getIndexTemplateMetaDataUpgrader();, +++ b/plugin/src/main/java/org/elasticsearch/xpack/watcher/Watcher.java, +import org.elasticsearch.cluster.metadata.IndexTemplateMetaData;, +import java.util.function.UnaryOperator;, +, +    // These are all old templates from pre 6.0 era, that need to be deleted, +    public UnaryOperator<Map<String, IndexTemplateMetaData>> getIndexTemplateMetaDataUpgrader() {, +        return map -> {, +            map.keySet().removeIf(name -> "watches".equals(name) || "triggered_watches".equals(name), +                        || name.startsWith("watch_history_"));, +, +            return map;, +        };, +    }, +++ b/plugin/src/main/java/org/elasticsearch/xpack/watcher/support/WatcherIndexTemplateRegistry.java, +++ b/plugin/src/test/java/org/elasticsearch/xpack/watcher/OldWatcherIndicesBackwardsCompatibilityTests.java, +import org.elasticsearch.action.admin.indices.template.get.GetIndexTemplatesResponse;, +import org.elasticsearch.cluster.metadata.IndexTemplateMetaData;, +import static org.hamcrest.Matchers.hasItems;, +import static org.hamcrest.Matchers.startsWith;, +            assertOldTemplatesAreDeleted();, +    private void assertOldTemplatesAreDeleted() {, +        GetIndexTemplatesResponse response = client().admin().indices().prepareGetTemplates().get();, +        List<String> templateNames = response.getIndexTemplates().stream().map(IndexTemplateMetaData::getName).collect(Collectors.toList());, +        assertThat(templateNames, not(hasItems(is("watches"), startsWith("watch-history"), is("triggered_watches"))));, +    }, +, +++ b/plugin/src/main/java/org/elasticsearch/xpack/XPackPlugin.java, +import org.elasticsearch.cluster.metadata.IndexTemplateMetaData;, +    }, +    @Override, +    public UnaryOperator<Map<String, IndexTemplateMetaData>> getIndexTemplateMetaDataUpgrader() {, +        return watcher.getIndexTemplateMetaDataUpgrader();, +++ b/plugin/src/main/java/org/elasticsearch/xpack/watcher/Watcher.java, +import org.elasticsearch.cluster.metadata.IndexTemplateMetaData;, +import java.util.function.UnaryOperator;, +, +    // These are all old templates from pre 6.0 era, that need to be deleted, +    public UnaryOperator<Map<String, IndexTemplateMetaData>> getIndexTemplateMetaDataUpgrader() {, +        return map -> {, +            map.keySet().removeIf(name -> "watches".equals(name) || "triggered_watches".equals(name), +                        || name.startsWith("watch_history_"));, +, +            return map;, +        };, +    }, +++ b/plugin/src/main/java/org/elasticsearch/xpack/watcher/support/WatcherIndexTemplateRegistry.java, +++ b/plugin/src/test/java/org/elasticsearch/xpack/watcher/OldWatcherIndicesBackwardsCompatibilityTests.java, +import org.elasticsearch.action.admin.indices.template.get.GetIndexTemplatesResponse;, +import org.elasticsearch.cluster.metadata.IndexTemplateMetaData;]