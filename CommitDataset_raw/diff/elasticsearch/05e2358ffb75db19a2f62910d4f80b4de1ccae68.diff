[+++ b/core/src/main/java/org/elasticsearch/monitor/jvm/HotThreads.java, +import org.elasticsearch.ElasticsearchException;, +import org.elasticsearch.ExceptionsHelper;, +import org.elasticsearch.common.logging.ESLogger;, +import org.elasticsearch.common.logging.Loggers;, +    private static final ESLogger logger = Loggers.getLogger(HotThreads.class);, +        ThreadMXBean threadBean = ManagementFactory.getThreadMXBean();, +        if (threadBean.isThreadCpuTimeSupported() == false) {, +            throw new ElasticsearchException("thread CPU time is not supported on this JDK");, +        StringBuilder sb = new StringBuilder();, +                throw new IllegalArgumentException("expected thread type to be either 'cpu', 'wait', or 'block', but was " + type);]