[+++ b/src/main/java/org/apache/lucene/queryParser/MapperQueryParser.java, +    private boolean forcedAnalyzer;, +, +        super(Lucene.QUERYPARSER_VERSION, settings.defaultField(), settings.defaultAnalyzer());, +        this.forcedAnalyzer = settings.forcedAnalyzer() != null;, +        this.analyzer = forcedAnalyzer ? settings.forcedAnalyzer() : settings.defaultAnalyzer();, +                if (!forcedAnalyzer) {, +                }, +                if (!forcedAnalyzer) {, +                }, +                if (!forcedAnalyzer) {, +                }, +++ b/src/main/java/org/apache/lucene/queryParser/MapperQueryParser.java, +    private boolean forcedAnalyzer;, +, +        super(Lucene.QUERYPARSER_VERSION, settings.defaultField(), settings.defaultAnalyzer());, +        this.forcedAnalyzer = settings.forcedAnalyzer() != null;, +        this.analyzer = forcedAnalyzer ? settings.forcedAnalyzer() : settings.defaultAnalyzer();, +                if (!forcedAnalyzer) {, +                }, +                if (!forcedAnalyzer) {, +                }, +                if (!forcedAnalyzer) {, +                }, +++ b/src/main/java/org/apache/lucene/queryParser/QueryParserSettings.java, +    private Analyzer defaultAnalyzer = null;, +    private Analyzer forcedAnalyzer = null;, +    public Analyzer defaultAnalyzer() {, +        return defaultAnalyzer;, +    public void defaultAnalyzer(Analyzer defaultAnalyzer) {, +        this.defaultAnalyzer = defaultAnalyzer;, +    }, +, +    public Analyzer forcedAnalyzer() {, +        return forcedAnalyzer;, +    }, +, +    public void forcedAnalyzer(Analyzer forcedAnalyzer) {, +        this.forcedAnalyzer = forcedAnalyzer;, +        if (defaultAnalyzer != null ? !defaultAnalyzer.equals(that.defaultAnalyzer) : that.defaultAnalyzer != null), +            return false;, +        if (forcedAnalyzer != null ? !forcedAnalyzer.equals(that.forcedAnalyzer) : that.forcedAnalyzer != null), +            return false;, +        result = 31 * result + (defaultAnalyzer != null ? defaultAnalyzer.hashCode() : 0);, +        result = 31 * result + (forcedAnalyzer != null ? forcedAnalyzer.hashCode() : 0);, +++ b/src/main/java/org/apache/lucene/queryParser/MapperQueryParser.java, +    private boolean forcedAnalyzer;, +, +        super(Lucene.QUERYPARSER_VERSION, settings.defaultField(), settings.defaultAnalyzer());, +        this.forcedAnalyzer = settings.forcedAnalyzer() != null;, +        this.analyzer = forcedAnalyzer ? settings.forcedAnalyzer() : settings.defaultAnalyzer();, +                if (!forcedAnalyzer) {, +                }, +                if (!forcedAnalyzer) {, +                }, +                if (!forcedAnalyzer) {, +                }, +++ b/src/main/java/org/apache/lucene/queryParser/QueryParserSettings.java, +    private Analyzer defaultAnalyzer = null;, +    private Analyzer forcedAnalyzer = null;, +    public Analyzer defaultAnalyzer() {, +        return defaultAnalyzer;, +    public void defaultAnalyzer(Analyzer defaultAnalyzer) {, +        this.defaultAnalyzer = defaultAnalyzer;, +    }, +, +    public Analyzer forcedAnalyzer() {, +        return forcedAnalyzer;, +    }, +, +    public void forcedAnalyzer(Analyzer forcedAnalyzer) {, +        this.forcedAnalyzer = forcedAnalyzer;, +        if (defaultAnalyzer != null ? !defaultAnalyzer.equals(that.defaultAnalyzer) : that.defaultAnalyzer != null), +            return false;, +        if (forcedAnalyzer != null ? !forcedAnalyzer.equals(that.forcedAnalyzer) : that.forcedAnalyzer != null), +            return false;, +        result = 31 * result + (defaultAnalyzer != null ? defaultAnalyzer.hashCode() : 0);, +        result = 31 * result + (forcedAnalyzer != null ? forcedAnalyzer.hashCode() : 0);, +++ b/src/main/java/org/elasticsearch/index/query/FieldQueryParser.java, +                        qpSettings.forcedAnalyzer(parseContext.analysisService().analyzer(parser.text()));, +        qpSettings.defaultAnalyzer(parseContext.mapperService().searchAnalyzer());, +++ b/src/main/java/org/apache/lucene/queryParser/MapperQueryParser.java, +    private boolean forcedAnalyzer;, +, +        super(Lucene.QUERYPARSER_VERSION, settings.defaultField(), settings.defaultAnalyzer());, +        this.forcedAnalyzer = settings.forcedAnalyzer() != null;, +        this.analyzer = forcedAnalyzer ? settings.forcedAnalyzer() : settings.defaultAnalyzer();, +                if (!forcedAnalyzer) {, +                }, +                if (!forcedAnalyzer) {, +                }, +                if (!forcedAnalyzer) {, +                }, +++ b/src/main/java/org/apache/lucene/queryParser/QueryParserSettings.java, +    private Analyzer defaultAnalyzer = null;, +    private Analyzer forcedAnalyzer = null;, +    public Analyzer defaultAnalyzer() {, +        return defaultAnalyzer;, +    public void defaultAnalyzer(Analyzer defaultAnalyzer) {, +        this.defaultAnalyzer = defaultAnalyzer;]