[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/function/sort/DoubleFieldsFunctionDataComparator.java, +import org.apache.lucene.search.SortField;, +import org.elasticsearch.index.field.data.FieldDataType;, +    public static FieldDataType.ExtendedFieldComparatorSource comparatorSource(SearchScript script) {, +    private static class InnerSource extends FieldDataType.ExtendedFieldComparatorSource {, +, +        @Override public int reducedType() {, +            return SortField.DOUBLE;, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/function/sort/DoubleFieldsFunctionDataComparator.java, +import org.apache.lucene.search.SortField;, +import org.elasticsearch.index.field.data.FieldDataType;, +    public static FieldDataType.ExtendedFieldComparatorSource comparatorSource(SearchScript script) {, +    private static class InnerSource extends FieldDataType.ExtendedFieldComparatorSource {, +, +        @Override public int reducedType() {, +            return SortField.DOUBLE;, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/function/sort/StringFieldsFunctionDataComparator.java, +import org.apache.lucene.search.SortField;, +import org.elasticsearch.index.field.data.FieldDataType;, +    public static FieldDataType.ExtendedFieldComparatorSource comparatorSource(SearchScript script) {, +    private static class InnerSource extends FieldDataType.ExtendedFieldComparatorSource {, +, +        @Override public int reducedType() {, +            return SortField.STRING;, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/function/sort/DoubleFieldsFunctionDataComparator.java, +import org.apache.lucene.search.SortField;, +import org.elasticsearch.index.field.data.FieldDataType;, +    public static FieldDataType.ExtendedFieldComparatorSource comparatorSource(SearchScript script) {, +    private static class InnerSource extends FieldDataType.ExtendedFieldComparatorSource {, +, +        @Override public int reducedType() {, +            return SortField.DOUBLE;, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/function/sort/StringFieldsFunctionDataComparator.java, +import org.apache.lucene.search.SortField;, +import org.elasticsearch.index.field.data.FieldDataType;, +    public static FieldDataType.ExtendedFieldComparatorSource comparatorSource(SearchScript script) {, +    private static class InnerSource extends FieldDataType.ExtendedFieldComparatorSource {, +, +        @Override public int reducedType() {, +            return SortField.STRING;, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/search/geo/GeoDistanceDataComparator.java, +import org.apache.lucene.search.SortField;, +import org.elasticsearch.index.field.data.FieldDataType;, +    public static FieldDataType.ExtendedFieldComparatorSource comparatorSource(String fieldName, double lat, double lon, DistanceUnit unit, GeoDistance geoDistance,, +    static class InnerSource extends FieldDataType.ExtendedFieldComparatorSource {, +, +        @Override public int reducedType() {, +            return SortField.DOUBLE;, +        }]