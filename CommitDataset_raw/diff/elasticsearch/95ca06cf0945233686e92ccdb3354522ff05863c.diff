[+++ b/src/main/java/org/elasticsearch/action/admin/indices/segments/IndicesSegmentResponse.java, +                        builder.byteSizeField(Fields.MEMORY_IN_BYTES, Fields.MEMORY, segment.getMemoryInBytes());, +        static final XContentBuilderString MEMORY = new XContentBuilderString("memory");, +        static final XContentBuilderString MEMORY_IN_BYTES = new XContentBuilderString("memory_in_bytes");, +++ b/src/main/java/org/elasticsearch/action/admin/indices/segments/IndicesSegmentResponse.java, +                        builder.byteSizeField(Fields.MEMORY_IN_BYTES, Fields.MEMORY, segment.getMemoryInBytes());, +        static final XContentBuilderString MEMORY = new XContentBuilderString("memory");, +        static final XContentBuilderString MEMORY_IN_BYTES = new XContentBuilderString("memory_in_bytes");, +++ b/src/main/java/org/elasticsearch/index/engine/Segment.java, +    public long memoryInBytes;, +    /**, +     * Estimation of the memory usage used by a segment., +     */, +    public long getMemoryInBytes() {, +        return this.memoryInBytes;, +    }, +, +        if (in.getVersion().after(Version.V_0_90_8)) {, +            memoryInBytes = in.readLong();, +        }, +        if (out.getVersion().after(Version.V_0_90_8)) {, +            out.writeLong(memoryInBytes);, +        }, +++ b/src/main/java/org/elasticsearch/action/admin/indices/segments/IndicesSegmentResponse.java, +                        builder.byteSizeField(Fields.MEMORY_IN_BYTES, Fields.MEMORY, segment.getMemoryInBytes());, +        static final XContentBuilderString MEMORY = new XContentBuilderString("memory");, +        static final XContentBuilderString MEMORY_IN_BYTES = new XContentBuilderString("memory_in_bytes");, +++ b/src/main/java/org/elasticsearch/index/engine/Segment.java, +    public long memoryInBytes;, +    /**, +     * Estimation of the memory usage used by a segment., +     */, +    public long getMemoryInBytes() {, +        return this.memoryInBytes;, +    }, +, +        if (in.getVersion().after(Version.V_0_90_8)) {, +            memoryInBytes = in.readLong();, +        }, +        if (out.getVersion().after(Version.V_0_90_8)) {, +            out.writeLong(memoryInBytes);, +        }, +++ b/src/main/java/org/elasticsearch/index/engine/SegmentsStats.java, +import org.elasticsearch.Version;, +    private long memoryInBytes;, +    public void add(long count, long memoryInBytes) {, +        this.memoryInBytes += memoryInBytes;, +        this.memoryInBytes += mergeStats.memoryInBytes;, +    /**, +     * Estimation of the memory usage used by a segment., +     */, +    public long getMemoryInBytes() {, +        return this.memoryInBytes;, +    }, +, +        builder.byteSizeField(Fields.MEMORY_IN_BYTES, Fields.MEMORY, memoryInBytes);, +        static final XContentBuilderString MEMORY = new XContentBuilderString("memory");, +        static final XContentBuilderString MEMORY_IN_BYTES = new XContentBuilderString("memory_in_bytes");, +        if (in.getVersion().after(Version.V_0_90_8)) {, +            memoryInBytes = in.readLong();, +        }, +        if (out.getVersion().after(Version.V_0_90_8)) {, +            out.writeLong(memoryInBytes);, +        }, +++ b/src/main/java/org/elasticsearch/action/admin/indices/segments/IndicesSegmentResponse.java, +                        builder.byteSizeField(Fields.MEMORY_IN_BYTES, Fields.MEMORY, segment.getMemoryInBytes());, +        static final XContentBuilderString MEMORY = new XContentBuilderString("memory");, +        static final XContentBuilderString MEMORY_IN_BYTES = new XContentBuilderString("memory_in_bytes");, +++ b/src/main/java/org/elasticsearch/index/engine/Segment.java, +    public long memoryInBytes;, +    /**, +     * Estimation of the memory usage used by a segment., +     */, +    public long getMemoryInBytes() {, +        return this.memoryInBytes;, +    }, +, +        if (in.getVersion().after(Version.V_0_90_8)) {, +            memoryInBytes = in.readLong();, +        }, +        if (out.getVersion().after(Version.V_0_90_8)) {, +            out.writeLong(memoryInBytes);, +        }, +++ b/src/main/java/org/elasticsearch/index/engine/SegmentsStats.java, +import org.elasticsearch.Version;, +    private long memoryInBytes;, +    public void add(long count, long memoryInBytes) {, +        this.memoryInBytes += memoryInBytes;, +        this.memoryInBytes += mergeStats.memoryInBytes;, +    /**, +     * Estimation of the memory usage used by a segment., +     */, +    public long getMemoryInBytes() {, +        return this.memoryInBytes;, +    }, +, +        builder.byteSizeField(Fields.MEMORY_IN_BYTES, Fields.MEMORY, memoryInBytes);, +        static final XContentBuilderString MEMORY = new XContentBuilderString("memory");, +        static final XContentBuilderString MEMORY_IN_BYTES = new XContentBuilderString("memory_in_bytes");, +        if (in.getVersion().after(Version.V_0_90_8)) {]