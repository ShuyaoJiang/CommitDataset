[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/CustomFiltersScoreQueryParser.java, +                scoreFunction = new CustomScoreQueryParser.ScriptScoreFunction(script, vars, searchScript);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/CustomFiltersScoreQueryParser.java, +                scoreFunction = new CustomScoreQueryParser.ScriptScoreFunction(script, vars, searchScript);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/CustomScoreQueryParser.java, +        FunctionScoreQuery functionScoreQuery = new FunctionScoreQuery(query, new ScriptScoreFunction(script, vars, searchScript));, +        private final String sScript;, +, +        private final Map<String, Object> params;, +, +        public ScriptScoreFunction(String sScript, Map<String, Object> params, SearchScript script) {, +            this.sScript = sScript;, +            this.params = params;, +, +        @Override public String toString() {, +            return "script[" + sScript + "], params [" + params + "]";, +        }]