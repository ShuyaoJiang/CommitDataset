[+++ b/src/main/java/org/elasticsearch/index/query/HasChildQueryBuilder.java, +    public HasChildQueryBuilder scoreType(String scoreType) {, +        this.scoreType = scoreType;, +++ b/src/main/java/org/elasticsearch/index/query/HasChildQueryBuilder.java, +    public HasChildQueryBuilder scoreType(String scoreType) {, +        this.scoreType = scoreType;, +++ b/src/main/java/org/elasticsearch/index/search/child/ChildCollector.java, +        if (typeCache == null) {, +            return;, +        }, +, +++ b/src/main/java/org/elasticsearch/index/query/HasChildQueryBuilder.java, +    public HasChildQueryBuilder scoreType(String scoreType) {, +        this.scoreType = scoreType;, +++ b/src/main/java/org/elasticsearch/index/search/child/ChildCollector.java, +        if (typeCache == null) {, +            return;, +        }, +, +++ b/src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java, +            if (typeCache == null) {, +                return;, +            }, +, +            if (typeCache == null) {, +                return;, +            }, +, +++ b/src/main/java/org/elasticsearch/index/query/HasChildQueryBuilder.java, +    public HasChildQueryBuilder scoreType(String scoreType) {, +        this.scoreType = scoreType;, +++ b/src/main/java/org/elasticsearch/index/search/child/ChildCollector.java, +        if (typeCache == null) {, +            return;, +        }, +, +++ b/src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java, +            if (typeCache == null) {, +                return;, +            }, +, +            if (typeCache == null) {, +                return;, +            }, +, +++ b/src/main/java/org/elasticsearch/index/search/child/HasChildFilter.java, +                // It can happen that for particular segment no document exist for an specific type. This prevents NPE, +                if (typeCache != null) {, +            }, +, +++ b/src/main/java/org/elasticsearch/index/query/HasChildQueryBuilder.java, +    public HasChildQueryBuilder scoreType(String scoreType) {, +        this.scoreType = scoreType;, +++ b/src/main/java/org/elasticsearch/index/search/child/ChildCollector.java, +        if (typeCache == null) {, +            return;, +        }, +, +++ b/src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java, +            if (typeCache == null) {, +                return;, +            }, +, +            if (typeCache == null) {, +                return;, +            }, +, +++ b/src/main/java/org/elasticsearch/index/search/child/HasChildFilter.java, +                // It can happen that for particular segment no document exist for an specific type. This prevents NPE, +                if (typeCache != null) {, +            }, +, +++ b/src/main/java/org/elasticsearch/index/search/child/HasParentFilter.java, +                // It can happen that for particular segment no document exist for an specific type. This prevents NPE, +                if (typeCache != null) {, +            }, +            IdReaderTypeCache currentTypeCache = context.idCache().reader(readerContext.reader()).type(parentType);, +            if (currentTypeCache == null) {, +                return null;, +            } else {, +                return new ChildrenDocSet(readerContext.reader(), currentTypeCache, acceptDocs, parentDocs, context, parentType);, +            }, +            ChildrenDocSet(AtomicReader currentReader, IdReaderTypeCache currentTypeCache, @Nullable Bits acceptDocs,, +                           Map<Object, FixedBitSet> parentDocs, SearchContext context, String parentType) {, +                this.currentTypeCache = currentTypeCache;, +++ b/src/main/java/org/elasticsearch/index/query/HasChildQueryBuilder.java, +    public HasChildQueryBuilder scoreType(String scoreType) {, +        this.scoreType = scoreType;, +++ b/src/main/java/org/elasticsearch/index/search/child/ChildCollector.java, +        if (typeCache == null) {, +            return;, +        }, +, +++ b/src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java, +            if (typeCache == null) {, +                return;, +            }, +, +            if (typeCache == null) {, +                return;]