[+++ b/core/src/main/java/org/elasticsearch/bootstrap/JNANatives.java, +        logger.warn("Unable to lock JVM Memory: error=" + errno + ",reason=" + errMsg + ". This can result in part of the JVM being swapped out.");, +                                "\t# allow user 'esuser' mlockall\n" +, +                                "\tesuser soft memlock unlimited\n" +, +                                "\tesuser hard memlock unlimited", +++ b/core/src/main/java/org/elasticsearch/bootstrap/JNANatives.java, +        logger.warn("Unable to lock JVM Memory: error=" + errno + ",reason=" + errMsg + ". This can result in part of the JVM being swapped out.");, +                                "\t# allow user 'esuser' mlockall\n" +, +                                "\tesuser soft memlock unlimited\n" +, +                                "\tesuser hard memlock unlimited", +++ b/core/src/main/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPing.java, +    public static final String DISCOVERY_ZEN_PING_UNICAST_HOSTS = "discovery.zen.ping.unicast.hosts";, +        String[] hostArr = this.settings.getAsArray(DISCOVERY_ZEN_PING_UNICAST_HOSTS);, +++ b/core/src/main/java/org/elasticsearch/bootstrap/JNANatives.java, +        logger.warn("Unable to lock JVM Memory: error=" + errno + ",reason=" + errMsg + ". This can result in part of the JVM being swapped out.");, +                                "\t# allow user 'esuser' mlockall\n" +, +                                "\tesuser soft memlock unlimited\n" +, +                                "\tesuser hard memlock unlimited", +++ b/core/src/main/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPing.java, +    public static final String DISCOVERY_ZEN_PING_UNICAST_HOSTS = "discovery.zen.ping.unicast.hosts";, +        String[] hostArr = this.settings.getAsArray(DISCOVERY_ZEN_PING_UNICAST_HOSTS);, +++ b/core/src/test/java/org/elasticsearch/test/InternalTestCluster.java, +++ b/core/src/main/java/org/elasticsearch/bootstrap/JNANatives.java, +        logger.warn("Unable to lock JVM Memory: error=" + errno + ",reason=" + errMsg + ". This can result in part of the JVM being swapped out.");, +                                "\t# allow user 'esuser' mlockall\n" +, +                                "\tesuser soft memlock unlimited\n" +, +                                "\tesuser hard memlock unlimited", +++ b/core/src/main/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPing.java, +    public static final String DISCOVERY_ZEN_PING_UNICAST_HOSTS = "discovery.zen.ping.unicast.hosts";, +        String[] hostArr = this.settings.getAsArray(DISCOVERY_ZEN_PING_UNICAST_HOSTS);, +++ b/core/src/test/java/org/elasticsearch/test/InternalTestCluster.java, +++ b/core/src/test/java/org/elasticsearch/tribe/TribeIT.java, +import org.elasticsearch.action.admin.cluster.node.info.NodeInfo;, +import org.elasticsearch.action.admin.cluster.node.info.NodesInfoResponse;, +import org.elasticsearch.common.transport.TransportAddress;, +import org.elasticsearch.discovery.zen.ping.unicast.UnicastZenPing;, +import org.elasticsearch.test.SettingsSource;, +import java.util.ArrayList;, +import java.util.List;, +        SettingsSource source = new SettingsSource() {, +            @Override, +            public Settings node(int nodeOrdinal) {, +                final int base = InternalTestCluster.BASE_PORT + 1000;, +                return Settings.builder().put("transport.tcp.port", base + "-" + (base + 100)).build();, +            }, +, +            @Override, +            public Settings transportClient() {, +                return node(0);, +            }, +        };, +        cluster2 = new InternalTestCluster(InternalTestCluster.configuredNodeMode(), randomLong(), createTempDir(), 2, 2, Strings.randomBase64UUID(getRandom()), source, 0, false, SECOND_CLUSTER_NODE_PREFIX);, +, +        // give each tribe it's unicast hosts to connect to, +        tribe1Defaults.putArray("tribe.t1." + UnicastZenPing.DISCOVERY_ZEN_PING_UNICAST_HOSTS, getUnicastHosts(internalCluster().client()));, +        tribe1Defaults.putArray("tribe.t2." + UnicastZenPing.DISCOVERY_ZEN_PING_UNICAST_HOSTS, getUnicastHosts(cluster2.client()));, +, +, +    public String[] getUnicastHosts(Client client) {, +        ArrayList<String> unicastHosts = new ArrayList<>();, +        NodesInfoResponse nodeInfos = client.admin().cluster().prepareNodesInfo().clear().setTransport(true).get();, +        for (NodeInfo info : nodeInfos.getNodes()) {, +            TransportAddress address = info.getTransport().getAddress().publishAddress();, +            unicastHosts.add(address.getAddress() + ":" + address.getPort());, +        }, +        return unicastHosts.toArray(new String[unicastHosts.size()]);, +    }]