[+++ /dev/null, +++ /dev/null, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/ShardOperationFailedException.java, +import org.elasticsearch.util.io.Streamable;, +public interface ShardOperationFailedException extends Streamable {, +    /**, +     * The index the operation failed on. Might return <tt>null</tt> if it can't be derived., +     */, +    String index();, +    /**, +     * The index the operation failed on. Might return <tt>-1</tt> if it can't be derived., +     */, +    int shardId();, +, +    /**, +     * The reason of the failure., +     */, +    String reason();, +++ /dev/null, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/ShardOperationFailedException.java, +import org.elasticsearch.util.io.Streamable;, +public interface ShardOperationFailedException extends Streamable {, +    /**, +     * The index the operation failed on. Might return <tt>null</tt> if it can't be derived., +     */, +    String index();, +    /**, +     * The index the operation failed on. Might return <tt>-1</tt> if it can't be derived., +     */, +    int shardId();, +, +    /**, +     * The reason of the failure., +     */, +    String reason();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/ping/broadcast/BroadcastPingResponse.java, +import org.elasticsearch.action.ShardOperationFailedException;, +import java.util.List;, +    public BroadcastPingResponse(int successfulShards, int failedShards, List<ShardOperationFailedException> shardFailures) {, +        super(successfulShards, failedShards, shardFailures);, +++ /dev/null, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/ShardOperationFailedException.java, +import org.elasticsearch.util.io.Streamable;, +public interface ShardOperationFailedException extends Streamable {, +    /**, +     * The index the operation failed on. Might return <tt>null</tt> if it can't be derived., +     */, +    String index();, +    /**, +     * The index the operation failed on. Might return <tt>-1</tt> if it can't be derived., +     */, +    int shardId();, +, +    /**, +     * The reason of the failure., +     */, +    String reason();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/ping/broadcast/BroadcastPingResponse.java, +import org.elasticsearch.action.ShardOperationFailedException;, +import java.util.List;, +    public BroadcastPingResponse(int successfulShards, int failedShards, List<ShardOperationFailedException> shardFailures) {, +        super(successfulShards, failedShards, shardFailures);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/ping/broadcast/TransportBroadcastPingAction.java, +import org.elasticsearch.action.ShardOperationFailedException;, +import org.elasticsearch.action.support.DefaultShardOperationFailedException;, +import org.elasticsearch.action.support.broadcast.BroadcastShardOperationFailedException;, +import java.util.List;, +import static com.google.common.collect.Lists.*;, +        List<ShardOperationFailedException> shardFailures = null;, +            Object shardResponse = shardsResponses.get(i);, +            if (shardResponse == null) {, +            } else if (shardResponse instanceof BroadcastShardOperationFailedException) {, +                failedShards++;, +                if (shardFailures == null) {, +                    shardFailures = newArrayList();, +                }, +                shardFailures.add(new DefaultShardOperationFailedException((BroadcastShardOperationFailedException) shardResponse));, +        return new BroadcastPingResponse(successfulShards, failedShards, shardFailures);, +++ /dev/null, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/ShardOperationFailedException.java, +import org.elasticsearch.util.io.Streamable;, +public interface ShardOperationFailedException extends Streamable {, +    /**, +     * The index the operation failed on. Might return <tt>null</tt> if it can't be derived., +     */, +    String index();, +    /**, +     * The index the operation failed on. Might return <tt>-1</tt> if it can't be derived., +     */, +    int shardId();, +, +    /**, +     * The reason of the failure., +     */, +    String reason();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/ping/broadcast/BroadcastPingResponse.java, +import org.elasticsearch.action.ShardOperationFailedException;, +import java.util.List;, +    public BroadcastPingResponse(int successfulShards, int failedShards, List<ShardOperationFailedException> shardFailures) {, +        super(successfulShards, failedShards, shardFailures);]