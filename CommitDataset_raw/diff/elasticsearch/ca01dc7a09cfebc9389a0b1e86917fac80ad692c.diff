[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/network/NetworkService.java, +        String origHost = host;, +                NetworkUtils.StackType stackType = NetworkUtils.getIpStackType();, +                if (host.toLowerCase().endsWith(":ipv4")) {, +                    stackType = NetworkUtils.StackType.IPv4;, +                    host = host.substring(0, host.length() - 5);, +                } else if (host.toLowerCase().endsWith(":ipv6")) {, +                    stackType = NetworkUtils.StackType.IPv6;, +                    host = host.substring(0, host.length() - 5);, +                }, +                        return NetworkUtils.getFirstNonLoopbackAddress(ni, stackType);, +            throw new IOException("Failed to find network interface for [" + origHost + "]");]