[+++ b/src/test/java/org/elasticsearch/test/cache/recycler/MockBigArrays.java, +        // arrays that are not fully released., +        ArrayList<BigArrays> badBigArrays = new ArrayList<>();, +        synchronized (INSTANCES) {, +                        badBigArrays.add(bigArrays);, +        if (!badBigArrays.isEmpty()) {, +            INSTANCES.removeAll(badBigArrays);, +            StringBuilder msg = new StringBuilder("Found [").append(badBigArrays.size()).append("] big arrays which were not fully released. Here is a list of the first 20:");, +            for (int i = 0; i < Math.min(20, badBigArrays.size()); i++) {, +                msg.append("\nbigArray instance with [").append(badBigArrays.get(i).sizeInBytes()).append("] bytes");, +            }, +            throw new AssertionError(msg.toString());, +        }, +, +    }, +]