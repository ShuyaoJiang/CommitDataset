[+++ b/plugins/delete-by-query/src/main/java/org/elasticsearch/action/deletebyquery/TransportDeleteByQueryAction.java, +                // if scrollId is null we are on the first request - just pass the nextScrollId which sill be non-null if the query matched no docs, +                finishHim(scrollId == null ? nextScrollId : scrollId, false, null);, +                // if scrollId is null we are on the first request - just pass the nextScrollId which sill be non-null if the query matched no docs, +                finishHim(scrollId == null ? nextScrollId : scrollId, true, null);, +++ b/plugins/delete-by-query/src/main/java/org/elasticsearch/action/deletebyquery/TransportDeleteByQueryAction.java, +                // if scrollId is null we are on the first request - just pass the nextScrollId which sill be non-null if the query matched no docs, +                finishHim(scrollId == null ? nextScrollId : scrollId, false, null);, +                // if scrollId is null we are on the first request - just pass the nextScrollId which sill be non-null if the query matched no docs, +                finishHim(scrollId == null ? nextScrollId : scrollId, true, null);, +++ /dev/null, +++ b/plugins/delete-by-query/src/main/java/org/elasticsearch/action/deletebyquery/TransportDeleteByQueryAction.java, +                // if scrollId is null we are on the first request - just pass the nextScrollId which sill be non-null if the query matched no docs, +                finishHim(scrollId == null ? nextScrollId : scrollId, false, null);, +                // if scrollId is null we are on the first request - just pass the nextScrollId which sill be non-null if the query matched no docs, +                finishHim(scrollId == null ? nextScrollId : scrollId, true, null);, +++ /dev/null, +++ b/plugins/delete-by-query/src/main/java/org/elasticsearch/plugin/deletebyquery/DeleteByQueryPlugin.java, +import org.elasticsearch.action.ActionModule;, +import org.elasticsearch.action.deletebyquery.DeleteByQueryAction;, +import org.elasticsearch.action.deletebyquery.TransportDeleteByQueryAction;, +import org.elasticsearch.rest.RestModule;, +import org.elasticsearch.rest.action.deletebyquery.RestDeleteByQueryAction;, +    public void onModule(ActionModule actionModule) {, +        actionModule.registerAction(DeleteByQueryAction.INSTANCE, TransportDeleteByQueryAction.class);, +, +    public void onModule(RestModule restModule) {, +        restModule.addRestAction(RestDeleteByQueryAction.class);, +    }, +]