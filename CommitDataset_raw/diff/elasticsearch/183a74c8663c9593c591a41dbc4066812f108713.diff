[+++ b/src/test/java/org/elasticsearch/test/integration/cluster/allocation/AwarenessAllocationTests.java, +        long start = System.currentTimeMillis();, +        TObjectIntHashMap<String> counts;, +        // On slow machines the initial relocation might be delayed, +        do {, +            Thread.sleep(100);, +            logger.info("--> waiting for no relocation");, +            logger.info("--> checking current state");, +            counts = new TObjectIntHashMap<String>();, +        } while (counts.get("node3") != 10 && (System.currentTimeMillis() - start) < 10000);]