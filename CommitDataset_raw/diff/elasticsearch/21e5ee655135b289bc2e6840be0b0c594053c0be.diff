[+++ b/test/framework/src/main/java/org/elasticsearch/test/rest/yaml/ESClientYamlSuiteTestCase.java, +                try {, +                } catch (AssertionError | Exception e) {, +                    logger.info("Stash dump on setup failure [{}]",, +                            Strings.toString(restTestExecutionContext.stash(), true, true), +                                    .replace("\\n", "\n").replace("\\r", "\r").replace("\\t", "\t"));, +                    throw e;, +                }, +                try {, +                } catch (AssertionError | Exception e) {, +                    // Dump the stash on failure. Instead of dumping it in true json we escape `\n`s so stack traces are easier to read, +                    logger.info("Stash dump on test failure [{}]",, +                            Strings.toString(restTestExecutionContext.stash(), true, true), +                                    .replace("\\n", "\n").replace("\\r", "\r").replace("\\t", "\t"));, +                    throw e;, +                }, +                try {, +                } catch (AssertionError | Exception e) {, +                    logger.info("Stash dump on tear down failure [{}]",, +                            Strings.toString(restTestExecutionContext.stash(), true, true), +                                    .replace("\\n", "\n").replace("\\r", "\r").replace("\\t", "\t"));, +                    // Don't rethrow exception here, that could hide the exception caused by a test., +                }]