[+++ b/src/main/java/org/elasticsearch/common/lucene/HashedBytesRef.java, +, +    public HashedBytesRef deepCopy() {, +        return deepCopyOf(this);, +    }, +, +    public static HashedBytesRef deepCopyOf(HashedBytesRef other) {, +        BytesRef copy = new BytesRef();, +        copy.copyBytes(other.bytes);, +        return new HashedBytesRef(copy, other.hash);, +    }, +++ b/src/main/java/org/elasticsearch/common/lucene/HashedBytesRef.java, +, +    public HashedBytesRef deepCopy() {, +        return deepCopyOf(this);, +    }, +, +    public static HashedBytesRef deepCopyOf(HashedBytesRef other) {, +        BytesRef copy = new BytesRef();, +        copy.copyBytes(other.bytes);, +        return new HashedBytesRef(copy, other.hash);, +    }, +++ b/src/main/java/org/elasticsearch/index/fielddata/IndexNumericFieldData.java, +        BYTE {, +            @Override, +            public boolean isFloatingPoint() {, +                return false;, +            }, +        },, +        SHORT {, +            @Override, +            public boolean isFloatingPoint() {, +                return false;, +            }, +        },, +        INT {, +            @Override, +            public boolean isFloatingPoint() {, +                return false;, +            }, +        },, +        LONG {, +            @Override, +            public boolean isFloatingPoint() {, +                return false;, +            }, +        },, +        FLOAT {, +            @Override, +            public boolean isFloatingPoint() {, +                return true;, +            }, +        },, +        DOUBLE {, +            @Override, +            public boolean isFloatingPoint() {, +                return true;, +            }, +        };, +, +        public abstract boolean isFloatingPoint();, +++ b/src/main/java/org/elasticsearch/common/lucene/HashedBytesRef.java, +, +    public HashedBytesRef deepCopy() {, +        return deepCopyOf(this);, +    }, +, +    public static HashedBytesRef deepCopyOf(HashedBytesRef other) {, +        BytesRef copy = new BytesRef();, +        copy.copyBytes(other.bytes);, +        return new HashedBytesRef(copy, other.hash);, +    }, +++ b/src/main/java/org/elasticsearch/index/fielddata/IndexNumericFieldData.java, +        BYTE {, +            @Override, +            public boolean isFloatingPoint() {, +                return false;, +            }, +        },, +        SHORT {, +            @Override, +            public boolean isFloatingPoint() {, +                return false;, +            }, +        },, +        INT {, +            @Override, +            public boolean isFloatingPoint() {, +                return false;, +            }, +        },, +        LONG {, +            @Override, +            public boolean isFloatingPoint() {, +                return false;, +            }, +        },, +        FLOAT {, +            @Override, +            public boolean isFloatingPoint() {]