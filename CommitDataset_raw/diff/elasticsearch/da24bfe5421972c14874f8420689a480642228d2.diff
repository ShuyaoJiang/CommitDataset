[+++ b/core/src/main/java/org/elasticsearch/rest/action/suggest/RestSuggestAction.java, +                    suggest.toInnerXContent(builder, request);, +++ b/core/src/main/java/org/elasticsearch/rest/action/suggest/RestSuggestAction.java, +                    suggest.toInnerXContent(builder, request);, +++ b/core/src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java, +            suggest = hasSuggestions ? new Suggest(Suggest.reduce(groupedSuggestions)) : null;, +++ b/core/src/main/java/org/elasticsearch/rest/action/suggest/RestSuggestAction.java, +                    suggest.toInnerXContent(builder, request);, +++ b/core/src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java, +            suggest = hasSuggestions ? new Suggest(Suggest.reduce(groupedSuggestions)) : null;, +++ b/core/src/main/java/org/elasticsearch/search/internal/InternalSearchResponse.java, +            suggest = Suggest.readSuggest(in);, +++ b/core/src/main/java/org/elasticsearch/rest/action/suggest/RestSuggestAction.java, +                    suggest.toInnerXContent(builder, request);, +++ b/core/src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java, +            suggest = hasSuggestions ? new Suggest(Suggest.reduce(groupedSuggestions)) : null;, +++ b/core/src/main/java/org/elasticsearch/search/internal/InternalSearchResponse.java, +            suggest = Suggest.readSuggest(in);, +++ b/core/src/main/java/org/elasticsearch/search/query/QuerySearchResult.java, +            suggest = Suggest.readSuggest(in);, +++ b/core/src/main/java/org/elasticsearch/rest/action/suggest/RestSuggestAction.java, +                    suggest.toInnerXContent(builder, request);, +++ b/core/src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java, +            suggest = hasSuggestions ? new Suggest(Suggest.reduce(groupedSuggestions)) : null;, +++ b/core/src/main/java/org/elasticsearch/search/internal/InternalSearchResponse.java, +            suggest = Suggest.readSuggest(in);, +++ b/core/src/main/java/org/elasticsearch/search/query/QuerySearchResult.java, +            suggest = Suggest.readSuggest(in);, +++ b/core/src/main/java/org/elasticsearch/search/suggest/Suggest.java, +    private static final XContentBuilderString NAME = new XContentBuilderString("suggest");, +        builder.startObject(NAME);, +        toInnerXContent(builder, params);, +    /**, +     * use to write suggestion entries without <code>NAME</code> object, +     */, +    public XContentBuilder toInnerXContent(XContentBuilder builder, Params params) throws IOException {, +        for (Suggestion<?> suggestion : suggestions) {, +            suggestion.toXContent(builder, params);, +        }, +        return builder;, +    }, +, +    public static Suggest readSuggest(StreamInput in) throws IOException {, +        Suggest result = new Suggest();, +++ b/core/src/main/java/org/elasticsearch/rest/action/suggest/RestSuggestAction.java, +                    suggest.toInnerXContent(builder, request);, +++ b/core/src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java, +            suggest = hasSuggestions ? new Suggest(Suggest.reduce(groupedSuggestions)) : null;, +++ b/core/src/main/java/org/elasticsearch/search/internal/InternalSearchResponse.java, +            suggest = Suggest.readSuggest(in);, +++ b/core/src/main/java/org/elasticsearch/search/query/QuerySearchResult.java, +            suggest = Suggest.readSuggest(in);, +++ b/core/src/main/java/org/elasticsearch/search/suggest/Suggest.java, +    private static final XContentBuilderString NAME = new XContentBuilderString("suggest");, +        builder.startObject(NAME);, +        toInnerXContent(builder, params);, +    /**, +     * use to write suggestion entries without <code>NAME</code> object, +     */, +    public XContentBuilder toInnerXContent(XContentBuilder builder, Params params) throws IOException {, +        for (Suggestion<?> suggestion : suggestions) {, +            suggestion.toXContent(builder, params);, +        }, +        return builder;, +    }, +, +    public static Suggest readSuggest(StreamInput in) throws IOException {, +        Suggest result = new Suggest();, +++ b/core/src/main/java/org/elasticsearch/search/suggest/SuggestPhase.java, +            return new Suggest(suggestions);, +++ b/core/src/main/java/org/elasticsearch/rest/action/suggest/RestSuggestAction.java, +                    suggest.toInnerXContent(builder, request);, +++ b/core/src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java, +            suggest = hasSuggestions ? new Suggest(Suggest.reduce(groupedSuggestions)) : null;, +++ b/core/src/main/java/org/elasticsearch/search/internal/InternalSearchResponse.java, +            suggest = Suggest.readSuggest(in);, +++ b/core/src/main/java/org/elasticsearch/search/query/QuerySearchResult.java, +            suggest = Suggest.readSuggest(in);, +++ b/core/src/main/java/org/elasticsearch/search/suggest/Suggest.java, +    private static final XContentBuilderString NAME = new XContentBuilderString("suggest");, +        builder.startObject(NAME);, +        toInnerXContent(builder, params);, +    /**, +     * use to write suggestion entries without <code>NAME</code> object, +     */, +    public XContentBuilder toInnerXContent(XContentBuilder builder, Params params) throws IOException {, +        for (Suggestion<?> suggestion : suggestions) {, +            suggestion.toXContent(builder, params);, +        }, +        return builder;, +    }, +, +    public static Suggest readSuggest(StreamInput in) throws IOException {, +        Suggest result = new Suggest();, +++ b/core/src/main/java/org/elasticsearch/search/suggest/SuggestPhase.java, +            return new Suggest(suggestions);, +++ b/qa/vagrant/src/test/resources/packaging/scripts/packaging_test_utils.bash, +$timeoutCommand/tmp/elasticsearch/bin/elasticsearch $background -p /tmp/elasticsearch/elasticsearch.pid -Ees.path.conf=$CONF_DIR $commandLineArgs]