[+++ b/server/src/main/java/org/elasticsearch/common/Strings.java, +        if (s == null) {, +            return EMPTY_ARRAY;, +        }, +            return EMPTY_ARRAY;, +++ b/server/src/main/java/org/elasticsearch/common/Strings.java, +        if (s == null) {, +            return EMPTY_ARRAY;, +        }, +            return EMPTY_ARRAY;, +++ b/server/src/test/java/org/elasticsearch/cluster/routing/allocation/decider/FilterAllocationDeciderTests.java, +    public void testNull() {, +        Setting<String> filterSetting = randomFrom(IndexMetaData.INDEX_ROUTING_REQUIRE_GROUP_SETTING,, +            IndexMetaData.INDEX_ROUTING_INCLUDE_GROUP_SETTING, IndexMetaData.INDEX_ROUTING_EXCLUDE_GROUP_SETTING);, +, +        IndexMetaData.builder("test"), +            .settings(settings(Version.CURRENT).putNull(filterSetting.getKey() + "name")).numberOfShards(2).numberOfReplicas(0).build();, +    }, +]