[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequest.java, +    /**, +     * if this operation hits a node with a local relevant shard, should it be preferred, +     * to be executed on, or just do plain round robin. Defaults to <tt>true</tt>, +     */, +    @Override public AnalyzeRequest preferLocal(boolean preferLocal) {, +        super.preferLocal(preferLocal);, +        return this;, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequest.java, +    /**, +     * if this operation hits a node with a local relevant shard, should it be preferred, +     * to be executed on, or just do plain round robin. Defaults to <tt>true</tt>, +     */, +    @Override public AnalyzeRequest preferLocal(boolean preferLocal) {, +        super.preferLocal(preferLocal);, +        return this;, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java, +        return clusterState.routingTable().index(request.index()).randomAllShardsIt();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequest.java, +    /**, +     * if this operation hits a node with a local relevant shard, should it be preferred, +     * to be executed on, or just do plain round robin. Defaults to <tt>true</tt>, +     */, +    @Override public AnalyzeRequest preferLocal(boolean preferLocal) {, +        super.preferLocal(preferLocal);, +        return this;, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java, +        return clusterState.routingTable().index(request.index()).randomAllShardsIt();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/percolate/PercolateRequest.java, +    /**, +     * if this operation hits a node with a local relevant shard, should it be preferred, +     * to be executed on, or just do plain round robin. Defaults to <tt>true</tt>, +     */, +    @Override public PercolateRequest preferLocal(boolean preferLocal) {, +        super.preferLocal(preferLocal);, +        return this;, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequest.java, +    /**, +     * if this operation hits a node with a local relevant shard, should it be preferred, +     * to be executed on, or just do plain round robin. Defaults to <tt>true</tt>, +     */, +    @Override public AnalyzeRequest preferLocal(boolean preferLocal) {, +        super.preferLocal(preferLocal);, +        return this;, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java, +        return clusterState.routingTable().index(request.index()).randomAllShardsIt();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/percolate/PercolateRequest.java, +    /**, +     * if this operation hits a node with a local relevant shard, should it be preferred, +     * to be executed on, or just do plain round robin. Defaults to <tt>true</tt>, +     */, +    @Override public PercolateRequest preferLocal(boolean preferLocal) {, +        super.preferLocal(preferLocal);, +        return this;, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/percolate/TransportPercolateAction.java, +        return clusterState.routingTable().index(request.index()).randomAllShardsIt();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequest.java, +    /**, +     * if this operation hits a node with a local relevant shard, should it be preferred, +     * to be executed on, or just do plain round robin. Defaults to <tt>true</tt>, +     */, +    @Override public AnalyzeRequest preferLocal(boolean preferLocal) {, +        super.preferLocal(preferLocal);, +        return this;, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java, +        return clusterState.routingTable().index(request.index()).randomAllShardsIt();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/percolate/PercolateRequest.java, +    /**, +     * if this operation hits a node with a local relevant shard, should it be preferred, +     * to be executed on, or just do plain round robin. Defaults to <tt>true</tt>, +     */, +    @Override public PercolateRequest preferLocal(boolean preferLocal) {, +        super.preferLocal(preferLocal);, +        return this;, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/percolate/TransportPercolateAction.java, +        return clusterState.routingTable().index(request.index()).randomAllShardsIt();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/support/single/custom/SingleCustomOperationRequest.java, +    private boolean preferLocal = true;, +    /**, +     * if this operation hits a node with a local relevant shard, should it be preferred, +     * to be executed on, or just do plain round robin. Defaults to <tt>true</tt>, +     */, +    public SingleCustomOperationRequest preferLocal(boolean preferLocal) {, +        this.preferLocal = preferLocal;]