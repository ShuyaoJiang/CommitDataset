[+++ b/src/test/java/org/elasticsearch/bwcompat/BasicBackwardsCompatibilityTest.java, +        createIndexWithAlias();, +        assertAcked(client().admin().indices().preparePutMapping("test").setType("test").setSource(, +        createIndexWithAlias();, +        createIndexWithAlias();, +        createIndexWithAlias();, +        assertAcked(client().admin().indices().preparePutMapping("test").setType("test").setSource("field", "type=string,analyzer=keyword"));, +        createIndexWithAlias();, +        createIndexWithAlias();, +        assertAcked(client().admin().indices().preparePutMapping("test").setType("type1").setSource("field", "type=string,term_vector=with_positions_offsets_payloads").get());, +        createIndexWithAlias();, +, +    private void createIndexWithAlias() {, +        if (compatibilityVersion().onOrAfter(Version.V_1_1_0)) {, +            assertAcked(prepareCreate("test").addAlias(new Alias("alias")));, +        } else {, +            assertAcked(prepareCreate("test"));, +            assertAcked(client().admin().indices().prepareAliases().addAlias("test", "alias"));, +        }, +    }, +++ b/src/test/java/org/elasticsearch/bwcompat/BasicBackwardsCompatibilityTest.java, +        createIndexWithAlias();, +        assertAcked(client().admin().indices().preparePutMapping("test").setType("test").setSource(, +        createIndexWithAlias();, +        createIndexWithAlias();, +        createIndexWithAlias();, +        assertAcked(client().admin().indices().preparePutMapping("test").setType("test").setSource("field", "type=string,analyzer=keyword"));, +        createIndexWithAlias();, +        createIndexWithAlias();, +        assertAcked(client().admin().indices().preparePutMapping("test").setType("type1").setSource("field", "type=string,term_vector=with_positions_offsets_payloads").get());, +        createIndexWithAlias();, +, +    private void createIndexWithAlias() {, +        if (compatibilityVersion().onOrAfter(Version.V_1_1_0)) {, +            assertAcked(prepareCreate("test").addAlias(new Alias("alias")));, +        } else {, +            assertAcked(prepareCreate("test"));, +            assertAcked(client().admin().indices().prepareAliases().addAlias("test", "alias"));, +        }, +    }, +++ b/src/test/java/org/elasticsearch/test/ExternalNode.java, +import java.util.concurrent.TimeUnit;, +        }, 30, TimeUnit.SECONDS);]