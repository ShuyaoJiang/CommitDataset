[+++ b/src/main/java/org/elasticsearch/search/facet/terms/strings/TermsStringOrdinalsFacetExecutor.java, +import org.apache.lucene.util.CharsRef;, +import org.apache.lucene.util.UnicodeUtil;, +        final CharsRef spare = new CharsRef();, +                    if (matcher != null) {, +                        UnicodeUtil.UTF8toUTF16(value, spare);, +                        assert spare.toString().equals(value.utf8ToString());, +                        if (!matcher.reset(spare).matches()) {, +                    }, +                if (matcher != null) {, +                    UnicodeUtil.UTF8toUTF16(value, spare);, +                    assert spare.toString().equals(value.utf8ToString());, +                    if (!matcher.reset(spare).matches()) {, +                }]