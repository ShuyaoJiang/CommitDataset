[+++ b/core/src/main/java/org/elasticsearch/index/seqno/GlobalCheckpointSyncAction.java, +import java.io.IOException;, +, +        maybeSyncTranslog(indexShard);, +        maybeSyncTranslog(indexShard);, +        return new ReplicaResult();, +    }, +, +    private void maybeSyncTranslog(final IndexShard indexShard) throws IOException {, +        final Translog translog = indexShard.getTranslog();, +        if (indexShard.getTranslogDurability() == Translog.Durability.REQUEST &&, +                translog.getLastSyncedGlobalCheckpoint() < indexShard.getGlobalCheckpoint()) {, +++ b/core/src/main/java/org/elasticsearch/index/seqno/GlobalCheckpointSyncAction.java, +import java.io.IOException;, +, +        maybeSyncTranslog(indexShard);, +        maybeSyncTranslog(indexShard);, +        return new ReplicaResult();, +    }, +, +    private void maybeSyncTranslog(final IndexShard indexShard) throws IOException {, +        final Translog translog = indexShard.getTranslog();, +        if (indexShard.getTranslogDurability() == Translog.Durability.REQUEST &&, +                translog.getLastSyncedGlobalCheckpoint() < indexShard.getGlobalCheckpoint()) {, +++ b/core/src/test/java/org/elasticsearch/index/seqno/GlobalCheckpointSyncActionTests.java, +        final long globalCheckpoint = randomIntBetween(Math.toIntExact(SequenceNumbers.NO_OPS_PERFORMED), Integer.MAX_VALUE);, +        final long lastSyncedGlobalCheckpoint;, +        if (randomBoolean() && globalCheckpoint != SequenceNumbers.NO_OPS_PERFORMED) {, +            lastSyncedGlobalCheckpoint =, +                    randomIntBetween(Math.toIntExact(SequenceNumbers.NO_OPS_PERFORMED), Math.toIntExact(globalCheckpoint) - 1);, +            assert lastSyncedGlobalCheckpoint < globalCheckpoint;, +        } else {, +            lastSyncedGlobalCheckpoint = globalCheckpoint;, +        }, +, +        when(indexShard.getGlobalCheckpoint()).thenReturn(globalCheckpoint);, +        when(translog.getLastSyncedGlobalCheckpoint()).thenReturn(lastSyncedGlobalCheckpoint);, +, +        if (durability == Translog.Durability.ASYNC || lastSyncedGlobalCheckpoint == globalCheckpoint) {]