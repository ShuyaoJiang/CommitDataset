[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/MapperService.java, +                throw new InvalidTypeNameException("mapping type name [" + mapper.type() + "] can't start with '_'");, +            }, +            if (mapper.type().contains("#")) {, +                throw new InvalidTypeNameException("mapping type name [" + mapper.type() + "] should not include '#' in it");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/MapperService.java, +                throw new InvalidTypeNameException("mapping type name [" + mapper.type() + "] can't start with '_'");, +            }, +            if (mapper.type().contains("#")) {, +                throw new InvalidTypeNameException("mapping type name [" + mapper.type() + "] should not include '#' in it");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/Uid.java, +        int delimiterIndex = uid.indexOf(DELIMITER); // type is not allowed to have # in it..., ids can]