[+++ b/x-pack/plugin/ccr/src/test/java/org/elasticsearch/xpack/CcrIntegTestCase.java, +import org.elasticsearch.action.admin.indices.settings.put.UpdateSettingsRequest;, +import org.elasticsearch.cluster.routing.UnassignedInfo;, +    /**, +     * Follower indices don't get all the settings from leader, for example 'index.unassigned.node_left.delayed_timeout', +     * is not replicated and if tests kill nodes, we have to wait 60s by default..., +     */, +    protected void disableDelayedAllocation(String index) {, +        UpdateSettingsRequest updateSettingsRequest = new UpdateSettingsRequest(index);, +        Settings.Builder settingsBuilder = Settings.builder();, +        settingsBuilder.put(UnassignedInfo.INDEX_DELAYED_NODE_LEFT_TIMEOUT_SETTING.getKey(), 0);, +        updateSettingsRequest.settings(settingsBuilder);, +        assertAcked(followerClient().admin().indices().updateSettings(updateSettingsRequest).actionGet());, +    }, +, +                    builder.field(UnassignedInfo.INDEX_DELAYED_NODE_LEFT_TIMEOUT_SETTING.getKey(), 0);, +++ b/x-pack/plugin/ccr/src/test/java/org/elasticsearch/xpack/CcrIntegTestCase.java, +import org.elasticsearch.action.admin.indices.settings.put.UpdateSettingsRequest;, +import org.elasticsearch.cluster.routing.UnassignedInfo;, +    /**, +     * Follower indices don't get all the settings from leader, for example 'index.unassigned.node_left.delayed_timeout', +     * is not replicated and if tests kill nodes, we have to wait 60s by default..., +     */, +    protected void disableDelayedAllocation(String index) {, +        UpdateSettingsRequest updateSettingsRequest = new UpdateSettingsRequest(index);, +        Settings.Builder settingsBuilder = Settings.builder();, +        settingsBuilder.put(UnassignedInfo.INDEX_DELAYED_NODE_LEFT_TIMEOUT_SETTING.getKey(), 0);, +        updateSettingsRequest.settings(settingsBuilder);, +        assertAcked(followerClient().admin().indices().updateSettings(updateSettingsRequest).actionGet());, +    }, +, +                    builder.field(UnassignedInfo.INDEX_DELAYED_NODE_LEFT_TIMEOUT_SETTING.getKey(), 0);, +++ b/x-pack/plugin/ccr/src/test/java/org/elasticsearch/xpack/ccr/FollowerFailOverIT.java, +        disableDelayedAllocation("follower-index");, +        disableDelayedAllocation("index2");]