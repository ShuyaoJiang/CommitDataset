[+++ b/x-pack/plugin/data-frame/qa/single-node-tests/src/test/java/org/elasticsearch/xpack/dataframe/integration/DataFrameAuditorIT.java, +import static org.hamcrest.CoreMatchers.not;, +import static org.hamcrest.Matchers.empty;, +        final Request request = new Request("GET", DataFrameInternalIndex.AUDIT_INDEX + "/_search");, +        assertBusy(() -> {, +            assertTrue(indexExists(DataFrameInternalIndex.AUDIT_INDEX));, +        });, +        // Since calls to write the Auditor are sent and forgot (async) we could have returned from the start,, +        // finished the job (as this is a very short DF job), all without the audit being fully written., +        assertBusy(() -> {, +            refreshIndex(DataFrameInternalIndex.AUDIT_INDEX);, +            List<?> hitList = ((List<?>) ((Map<?, ?>)response.get("hits")).get("hits"));, +            assertThat(hitList, is(not(empty())));, +            Map<?, ?> hitRsp = (Map<?, ?>) hitList.get(0);, +        });, +]