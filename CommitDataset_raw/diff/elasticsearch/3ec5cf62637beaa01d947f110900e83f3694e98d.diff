[+++ b/core/src/main/java/org/elasticsearch/monitor/os/OsProbe.java, +            return Class.forName("com.sun.management.OperatingSystemMXBean").getMethod(methodName);, +}, +++ b/core/src/main/java/org/elasticsearch/monitor/os/OsProbe.java, +            return Class.forName("com.sun.management.OperatingSystemMXBean").getMethod(methodName);, +}, +++ b/core/src/main/java/org/elasticsearch/monitor/process/ProcessProbe.java, +        getMaxFileDescriptorCountField = getUnixMethod("getMaxFileDescriptorCount");, +        getOpenFileDescriptorCountField = getUnixMethod("getOpenFileDescriptorCount");, +            return Class.forName("com.sun.management.OperatingSystemMXBean").getMethod(methodName);, +    , +    /**, +     * Returns a given method of the UnixOperatingSystemMXBean,, +     * or null if the method is not found or unavailable., +     */, +    private static Method getUnixMethod(String methodName) {, +        try {, +            return Class.forName("com.sun.management.UnixOperatingSystemMXBean").getMethod(methodName);, +        } catch (Throwable t) {, +            // not available, +            return null;, +        }, +    }, +}]