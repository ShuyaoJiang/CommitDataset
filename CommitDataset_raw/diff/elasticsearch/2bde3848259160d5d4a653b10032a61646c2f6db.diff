[+++ b/plugins/ingest/src/test/resources/rest-api-spec/test/ingest/30_grok.yaml, +---, +"Test Grok Pipeline":, +  - do:, +      cluster.health:, +          wait_for_status: green, +, +  - do:, +      ingest.put_pipeline:, +        id: "my_pipeline", +        body:  >, +          {, +            "description": "_description",, +            "processors": [, +              {, +                "grok" : {, +                  "field" : "field1",, +                  "pattern" : "%{NUMBER:val:float} %{NUMBER:status:int} <%{WORD:msg}>", +                }, +              }, +            ], +          }, +  - match: { _id: "my_pipeline" }, +, +  # Simulate a Thread.sleep(), because pipeline are updated in the background, +  - do:, +      catch: request_timeout, +      cluster.health:, +        wait_for_nodes: 99, +        timeout: 2s, +  - match: { "timed_out": true }, +, +  - do:, +      ingest.index:, +        index: test, +        type: test, +        id: 1, +        pipeline_id: "my_pipeline", +        body: {field1: "123.42 400 <foo>"}, +, +  - do:, +      get:, +        index: test, +        type: test, +        id: 1, +  - match: { _source.val: 123.42 }, +  - match: { _source.status: 400 }, +  - match: { _source.msg: "foo" }, +, +++ b/plugins/ingest/src/test/resources/rest-api-spec/test/ingest/30_grok.yaml, +---, +"Test Grok Pipeline":, +  - do:, +      cluster.health:, +          wait_for_status: green, +, +  - do:, +      ingest.put_pipeline:, +        id: "my_pipeline", +        body:  >, +          {, +            "description": "_description",, +            "processors": [, +              {, +                "grok" : {, +                  "field" : "field1",, +                  "pattern" : "%{NUMBER:val:float} %{NUMBER:status:int} <%{WORD:msg}>", +                }, +              }, +            ], +          }, +  - match: { _id: "my_pipeline" }, +, +  # Simulate a Thread.sleep(), because pipeline are updated in the background, +  - do:, +      catch: request_timeout, +      cluster.health:, +        wait_for_nodes: 99, +        timeout: 2s, +  - match: { "timed_out": true }, +, +  - do:, +      ingest.index:, +        index: test, +        type: test, +        id: 1, +        pipeline_id: "my_pipeline", +        body: {field1: "123.42 400 <foo>"}, +, +  - do:, +      get:, +        index: test, +        type: test, +        id: 1, +  - match: { _source.val: 123.42 }, +  - match: { _source.status: 400 }, +  - match: { _source.msg: "foo" }, +, +++ b/plugins/ingest/src/test/resources/rest-api-spec/test/ingest/40_geoip_processor.yaml, +---]