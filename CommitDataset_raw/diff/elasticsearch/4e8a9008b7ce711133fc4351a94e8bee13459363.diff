[+++ b/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java, +                    fieldMappersAgg.mappers.add((FieldMapper) rootMapper);, +        this.fieldMappers = new DocumentFieldMappers(this, fieldMappersAgg.mappers);, +        // fire up any new mappers if exists, +        if (!context.newFieldMappers().mappers.isEmpty()) {, +            addFieldMappers(context.newFieldMappers().mappers);, +        }, +        if (!context.newObjectMappers().mappers.isEmpty()) {, +            addObjectMappers(context.newObjectMappers().mappers);, +        }, +, +    private void addFieldMappers(Collection<FieldMapper> fieldMappers) {, +    private void addFieldMappers(FieldMapper... fieldMappers) {, +    private void addObjectMappers(Collection<ObjectMapper> objectMappers) {, +    private void addObjectMappers(ObjectMapper... objectMappers) {, +            if (!mergeContext.newFieldMappers().mappers.isEmpty()) {, +                addFieldMappers(mergeContext.newFieldMappers().mappers);, +            }, +            if (!mergeContext.newObjectMappers().mappers.isEmpty()) {, +                addObjectMappers(mergeContext.newObjectMappers().mappers);, +            }, +++ b/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java, +                    fieldMappersAgg.mappers.add((FieldMapper) rootMapper);, +        this.fieldMappers = new DocumentFieldMappers(this, fieldMappersAgg.mappers);, +        // fire up any new mappers if exists, +        if (!context.newFieldMappers().mappers.isEmpty()) {, +            addFieldMappers(context.newFieldMappers().mappers);, +        }, +        if (!context.newObjectMappers().mappers.isEmpty()) {, +            addObjectMappers(context.newObjectMappers().mappers);, +        }, +, +    private void addFieldMappers(Collection<FieldMapper> fieldMappers) {, +    private void addFieldMappers(FieldMapper... fieldMappers) {, +    private void addObjectMappers(Collection<ObjectMapper> objectMappers) {, +    private void addObjectMappers(ObjectMapper... objectMappers) {, +            if (!mergeContext.newFieldMappers().mappers.isEmpty()) {, +                addFieldMappers(mergeContext.newFieldMappers().mappers);, +            }, +            if (!mergeContext.newObjectMappers().mappers.isEmpty()) {, +                addObjectMappers(mergeContext.newObjectMappers().mappers);, +            }, +++ b/src/main/java/org/elasticsearch/index/mapper/FieldMapperListener.java, +        public final List<FieldMapper> mappers = new ArrayList<FieldMapper>();, +            mappers.add(fieldMapper);, +++ b/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java, +                    fieldMappersAgg.mappers.add((FieldMapper) rootMapper);, +        this.fieldMappers = new DocumentFieldMappers(this, fieldMappersAgg.mappers);, +        // fire up any new mappers if exists, +        if (!context.newFieldMappers().mappers.isEmpty()) {, +            addFieldMappers(context.newFieldMappers().mappers);, +        }, +        if (!context.newObjectMappers().mappers.isEmpty()) {, +            addObjectMappers(context.newObjectMappers().mappers);, +        }, +, +    private void addFieldMappers(Collection<FieldMapper> fieldMappers) {, +    private void addFieldMappers(FieldMapper... fieldMappers) {, +    private void addObjectMappers(Collection<ObjectMapper> objectMappers) {, +    private void addObjectMappers(ObjectMapper... objectMappers) {, +            if (!mergeContext.newFieldMappers().mappers.isEmpty()) {, +                addFieldMappers(mergeContext.newFieldMappers().mappers);, +            }, +            if (!mergeContext.newObjectMappers().mappers.isEmpty()) {, +                addObjectMappers(mergeContext.newObjectMappers().mappers);, +            }, +++ b/src/main/java/org/elasticsearch/index/mapper/FieldMapperListener.java, +        public final List<FieldMapper> mappers = new ArrayList<FieldMapper>();, +            mappers.add(fieldMapper);, +++ b/src/main/java/org/elasticsearch/index/mapper/MapperService.java, +            addFieldMappers(fieldMappersAgg.mappers.toArray(new FieldMapper[fieldMappersAgg.mappers.size()]));, +            addObjectMappers(objectMappersAgg.mappers.toArray(new ObjectMapper[objectMappersAgg.mappers.size()]));, +++ b/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java, +                    fieldMappersAgg.mappers.add((FieldMapper) rootMapper);, +        this.fieldMappers = new DocumentFieldMappers(this, fieldMappersAgg.mappers);, +        // fire up any new mappers if exists, +        if (!context.newFieldMappers().mappers.isEmpty()) {, +            addFieldMappers(context.newFieldMappers().mappers);, +        }, +        if (!context.newObjectMappers().mappers.isEmpty()) {, +            addObjectMappers(context.newObjectMappers().mappers);, +        }, +, +    private void addFieldMappers(Collection<FieldMapper> fieldMappers) {, +    private void addFieldMappers(FieldMapper... fieldMappers) {, +    private void addObjectMappers(Collection<ObjectMapper> objectMappers) {, +    private void addObjectMappers(ObjectMapper... objectMappers) {, +            if (!mergeContext.newFieldMappers().mappers.isEmpty()) {, +                addFieldMappers(mergeContext.newFieldMappers().mappers);, +            }, +            if (!mergeContext.newObjectMappers().mappers.isEmpty()) {, +                addObjectMappers(mergeContext.newObjectMappers().mappers);, +            }, +++ b/src/main/java/org/elasticsearch/index/mapper/FieldMapperListener.java, +        public final List<FieldMapper> mappers = new ArrayList<FieldMapper>();, +            mappers.add(fieldMapper);, +++ b/src/main/java/org/elasticsearch/index/mapper/MapperService.java, +            addFieldMappers(fieldMappersAgg.mappers.toArray(new FieldMapper[fieldMappersAgg.mappers.size()]));, +            addObjectMappers(objectMappersAgg.mappers.toArray(new ObjectMapper[objectMappersAgg.mappers.size()]));, +++ b/src/main/java/org/elasticsearch/index/mapper/MergeContext.java]