[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +                    } else if (type == 7) {, +                        cFields[j] = in.readShort();, +                    } else if (type == 8) {, +                        cFields[j] = in.readBoolean();, +                        } else if (type == Short.class) {, +                            out.writeByte((byte) 7);, +                            out.writeShort((Short) field);, +                        } else if (type == Boolean.class) {, +                            out.writeByte((byte) 8);, +                            out.writeBoolean((Boolean) field);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +                    } else if (type == 7) {, +                        cFields[j] = in.readShort();, +                    } else if (type == 8) {, +                        cFields[j] = in.readBoolean();, +                        } else if (type == Short.class) {, +                            out.writeByte((byte) 7);, +                            out.writeShort((Short) field);, +                        } else if (type == Boolean.class) {, +                            out.writeByte((byte) 8);, +                            out.writeBoolean((Boolean) field);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/data/bytes/ByteFieldDataType.java, +                return new ByteFieldDataComparator(numHits, fieldname, cache);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +                    } else if (type == 7) {, +                        cFields[j] = in.readShort();, +                    } else if (type == 8) {, +                        cFields[j] = in.readBoolean();, +                        } else if (type == Short.class) {, +                            out.writeByte((byte) 7);, +                            out.writeShort((Short) field);, +                        } else if (type == Boolean.class) {, +                            out.writeByte((byte) 8);, +                            out.writeBoolean((Boolean) field);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/data/bytes/ByteFieldDataType.java, +                return new ByteFieldDataComparator(numHits, fieldname, cache);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java, +                } else if (type == 7) {, +                    sortValues[i] = in.readShort();, +                } else if (type == 8) {, +                    sortValues[i] = in.readBoolean();, +                    } else if (type == Short.class) {, +                        out.writeByte((byte) 7);, +                        out.writeShort((Short) sortValue);, +                    } else if (type == Boolean.class) {, +                        out.writeByte((byte) 8);, +                        out.writeBoolean((Boolean) sortValue);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +                    } else if (type == 7) {, +                        cFields[j] = in.readShort();, +                    } else if (type == 8) {, +                        cFields[j] = in.readBoolean();, +                        } else if (type == Short.class) {, +                            out.writeByte((byte) 7);, +                            out.writeShort((Short) field);, +                        } else if (type == Boolean.class) {, +                            out.writeByte((byte) 8);, +                            out.writeBoolean((Boolean) field);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/data/bytes/ByteFieldDataType.java, +                return new ByteFieldDataComparator(numHits, fieldname, cache);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/internal/InternalSearchHit.java, +                } else if (type == 7) {, +                    sortValues[i] = in.readShort();, +                } else if (type == 8) {, +                    sortValues[i] = in.readBoolean();, +                    } else if (type == Short.class) {, +                        out.writeByte((byte) 7);, +                        out.writeShort((Short) sortValue);, +                    } else if (type == Boolean.class) {, +                        out.writeByte((byte) 8);, +                        out.writeBoolean((Boolean) sortValue);, +++ b/modules/elasticsearch/src/test/java/org/elasticsearch/deps/lucene/SimpleLuceneTests.java, +    @Test public void testSortValues() throws Exception {, +        Directory dir = new RAMDirectory();, +        IndexWriter indexWriter = new IndexWriter(dir, Lucene.STANDARD_ANALYZER, true, IndexWriter.MaxFieldLength.UNLIMITED);, +        for (int i = 0; i < 10; i++) {, +            indexWriter.addDocument(doc().add(field("str", new String(new char[]{(char) (97 + i), (char) (97 + i)}))).build());, +        }, +        IndexReader reader = indexWriter.getReader();, +        IndexSearcher searcher = new IndexSearcher(reader);, +        TopFieldDocs docs = searcher.search(new MatchAllDocsQuery(), null, 10, new Sort(new SortField("str", SortField.STRING)));, +        for (int i = 0; i < 10; i++) {, +            FieldDoc fieldDoc = (FieldDoc) docs.scoreDocs[i];, +            assertThat(fieldDoc.fields[0].toString(), equalTo(new String(new char[]{(char) (97 + i), (char) (97 + i)})));, +        }, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +                    } else if (type == 7) {, +                        cFields[j] = in.readShort();, +                    } else if (type == 8) {, +                        cFields[j] = in.readBoolean();, +                        } else if (type == Short.class) {, +                            out.writeByte((byte) 7);, +                            out.writeShort((Short) field);, +                        } else if (type == Boolean.class) {, +                            out.writeByte((byte) 8);, +                            out.writeBoolean((Boolean) field);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/data/bytes/ByteFieldDataType.java]