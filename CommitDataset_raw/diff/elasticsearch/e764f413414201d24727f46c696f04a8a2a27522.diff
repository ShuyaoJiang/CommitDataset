[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/transport/netty/NettyTransport.java, +            nodeChannels.closeAndWait();, +, +        public void closeAndWait() {, +            closeChannelsAndWait(low);, +            closeChannelsAndWait(med);, +            closeChannelsAndWait(high);, +        }, +, +        private void closeChannelsAndWait(Channel[] channels) {, +            for (Channel channel : channels) {, +                try {, +                    if (channel != null && channel.isOpen()) {, +                        channel.close().awaitUninterruptibly();, +                    }, +                } catch (Exception e) {, +                    //ignore, +                }, +            }, +        }]