[+++ b/core/src/main/java/org/elasticsearch/index/query/FuzzyQueryParser.java, +                        rewriteMethod = QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null);, +++ b/core/src/main/java/org/elasticsearch/index/query/FuzzyQueryParser.java, +                        rewriteMethod = QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null);, +++ b/core/src/main/java/org/elasticsearch/index/query/MatchQueryParser.java, +                        matchQuery.setRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +                        matchQuery.setFuzzyRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +++ b/core/src/main/java/org/elasticsearch/index/query/FuzzyQueryParser.java, +                        rewriteMethod = QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null);, +++ b/core/src/main/java/org/elasticsearch/index/query/MatchQueryParser.java, +                        matchQuery.setRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +                        matchQuery.setFuzzyRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +++ b/core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryParser.java, +                    multiMatchQuery.setRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +                    multiMatchQuery.setFuzzyRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +++ b/core/src/main/java/org/elasticsearch/index/query/FuzzyQueryParser.java, +                        rewriteMethod = QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null);, +++ b/core/src/main/java/org/elasticsearch/index/query/MatchQueryParser.java, +                        matchQuery.setRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +                        matchQuery.setFuzzyRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +++ b/core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryParser.java, +                    multiMatchQuery.setRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +                    multiMatchQuery.setFuzzyRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +++ b/core/src/main/java/org/elasticsearch/index/query/PrefixQueryParser.java, +        MultiTermQuery.RewriteMethod method = QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), rewriteMethod, null);, +++ b/core/src/main/java/org/elasticsearch/index/query/FuzzyQueryParser.java, +                        rewriteMethod = QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null);, +++ b/core/src/main/java/org/elasticsearch/index/query/MatchQueryParser.java, +                        matchQuery.setRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +                        matchQuery.setFuzzyRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +++ b/core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryParser.java, +                    multiMatchQuery.setRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +                    multiMatchQuery.setFuzzyRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +++ b/core/src/main/java/org/elasticsearch/index/query/PrefixQueryParser.java, +        MultiTermQuery.RewriteMethod method = QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), rewriteMethod, null);, +++ b/core/src/main/java/org/elasticsearch/index/query/QueryStringQueryParser.java, +                    qpSettings.fuzzyRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull()));, +                    qpSettings.rewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull()));, +++ b/core/src/main/java/org/elasticsearch/index/query/FuzzyQueryParser.java, +                        rewriteMethod = QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null);, +++ b/core/src/main/java/org/elasticsearch/index/query/MatchQueryParser.java, +                        matchQuery.setRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +                        matchQuery.setFuzzyRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +++ b/core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryParser.java, +                    multiMatchQuery.setRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +                    multiMatchQuery.setFuzzyRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +++ b/core/src/main/java/org/elasticsearch/index/query/PrefixQueryParser.java, +        MultiTermQuery.RewriteMethod method = QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), rewriteMethod, null);, +++ b/core/src/main/java/org/elasticsearch/index/query/QueryStringQueryParser.java, +                    qpSettings.fuzzyRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull()));, +                    qpSettings.rewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull()));, +++ b/core/src/main/java/org/elasticsearch/index/query/RegexpQueryParser.java, +        MultiTermQuery.RewriteMethod method = QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), rewriteMethod, null);, +++ b/core/src/main/java/org/elasticsearch/index/query/FuzzyQueryParser.java, +                        rewriteMethod = QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null);, +++ b/core/src/main/java/org/elasticsearch/index/query/MatchQueryParser.java, +                        matchQuery.setRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +                        matchQuery.setFuzzyRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +++ b/core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryParser.java, +                    multiMatchQuery.setRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +                    multiMatchQuery.setFuzzyRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +++ b/core/src/main/java/org/elasticsearch/index/query/PrefixQueryParser.java, +        MultiTermQuery.RewriteMethod method = QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), rewriteMethod, null);, +++ b/core/src/main/java/org/elasticsearch/index/query/QueryStringQueryParser.java, +                    qpSettings.fuzzyRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull()));, +                    qpSettings.rewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull()));, +++ b/core/src/main/java/org/elasticsearch/index/query/RegexpQueryParser.java, +        MultiTermQuery.RewriteMethod method = QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), rewriteMethod, null);, +++ b/core/src/main/java/org/elasticsearch/index/query/WildcardQueryParser.java, +        QueryParsers.setRewriteMethod(wildcardQuery, parseContext.parseFieldMatcher(), rewriteMethod);, +        wildcardQuery.setRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), rewriteMethod));, +++ b/core/src/main/java/org/elasticsearch/index/query/FuzzyQueryParser.java, +                        rewriteMethod = QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null);, +++ b/core/src/main/java/org/elasticsearch/index/query/MatchQueryParser.java, +                        matchQuery.setRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +                        matchQuery.setFuzzyRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +++ b/core/src/main/java/org/elasticsearch/index/query/MultiMatchQueryParser.java, +                    multiMatchQuery.setRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +                    multiMatchQuery.setFuzzyRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull(), null));, +++ b/core/src/main/java/org/elasticsearch/index/query/PrefixQueryParser.java, +        MultiTermQuery.RewriteMethod method = QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), rewriteMethod, null);, +++ b/core/src/main/java/org/elasticsearch/index/query/QueryStringQueryParser.java, +                    qpSettings.fuzzyRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull()));, +                    qpSettings.rewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), parser.textOrNull()));, +++ b/core/src/main/java/org/elasticsearch/index/query/RegexpQueryParser.java, +        MultiTermQuery.RewriteMethod method = QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), rewriteMethod, null);, +++ b/core/src/main/java/org/elasticsearch/index/query/WildcardQueryParser.java, +        QueryParsers.setRewriteMethod(wildcardQuery, parseContext.parseFieldMatcher(), rewriteMethod);, +        wildcardQuery.setRewriteMethod(QueryParsers.parseRewriteMethod(parseContext.parseFieldMatcher(), rewriteMethod));, +++ b/core/src/main/java/org/elasticsearch/index/query/support/QueryParsers.java, +import org.elasticsearch.common.ParseField;, +import org.elasticsearch.common.ParseFieldMatcher;, +    private static final ParseField CONSTANT_SCORE = new ParseField("constant_score", "constant_score_auto", "constant_score_filter");, +    private static final ParseField SCORING_BOOLEAN = new ParseField("scoring_boolean");, +    private static final ParseField CONSTANT_SCORE_BOOLEAN = new ParseField("constant_score_boolean");, +    private static final ParseField TOP_TERMS = new ParseField("top_terms_");, +    private static final ParseField TOP_TERMS_BOOST = new ParseField("top_terms_boost_");, +    private static final ParseField TOP_TERMS_BLENDED_FREQS = new ParseField("top_terms_blended_freqs_");, +, +    public static void setRewriteMethod(MultiTermQuery query, ParseFieldMatcher matcher, @Nullable String rewriteMethod) {]