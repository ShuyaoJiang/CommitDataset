[+++ b/src/test/java/org/elasticsearch/search/basic/SearchWhileRelocatingTests.java, +import org.elasticsearch.action.search.SearchPhaseExecutionException;, +                        } catch (SearchPhaseExecutionException ex) {, +                            // it's possible that all shards fail if we have a small number of shards., +                            // with replicas this should not happen, +                            if (numberOfReplicas == 1 || !ex.getMessage().contains("all shards failed")) {, +                                thrownExceptions.add(ex);, +                            }]