[+++ b/core/src/main/java/org/elasticsearch/plugins/InstallPluginCommand.java, +++ b/core/src/main/java/org/elasticsearch/plugins/InstallPluginCommand.java, +++ b/qa/evil-tests/src/test/java/org/elasticsearch/plugins/InstallPluginCommandTests.java, +    public void testUnknownPlugin() throws Exception {, +        Tuple<Path, Environment> env = createEnv(fs, temp);, +        UserError e = expectThrows(UserError.class, () -> installPlugin("foo", env.v1()));, +        assertTrue(e.getMessage(), e.getMessage().contains("Unknown plugin foo"));, +    }, +]