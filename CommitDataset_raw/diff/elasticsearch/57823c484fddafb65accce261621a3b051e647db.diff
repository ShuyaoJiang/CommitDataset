[+++ b/docs/plugins/repository-s3.asciidoc, +NOTE: The option of defining client settings in the repository settings as documented below is considered deprecated:, +, +In addition to the above settings, you may also specify all non-secure client settings in the repository settings., +In this case, the client settings found in the repository settings will be merged with those of the named client used by the repository., +Conflicts between client and repository settings are resolved by the repository settings taking precedence over client settings., +, +For example:, +, +[source,js], +----, +PUT _snapshot/my_s3_repository, +{, +  "type": "s3",, +  "settings": {, +    "client": "my_client_name",, +    "bucket": "my_bucket_name",, +    "endpoint": "my.s3.endpoint", +  }, +}, +----, +// CONSOLE, +// TEST[skip:we don't have s3 set up while testing this], +, +This sets up a repository that uses all client settings from the client `my_client_named` except for the `endpoint` that is overridden, +to `my.s3.endpoint` by the repository settings., +, +++ b/docs/plugins/repository-s3.asciidoc, +NOTE: The option of defining client settings in the repository settings as documented below is considered deprecated:, +, +In addition to the above settings, you may also specify all non-secure client settings in the repository settings., +In this case, the client settings found in the repository settings will be merged with those of the named client used by the repository., +Conflicts between client and repository settings are resolved by the repository settings taking precedence over client settings., +, +For example:, +, +[source,js], +----, +PUT _snapshot/my_s3_repository, +{, +  "type": "s3",, +  "settings": {, +    "client": "my_client_name",, +    "bucket": "my_bucket_name",, +    "endpoint": "my.s3.endpoint", +  }, +}, +----, +// CONSOLE, +// TEST[skip:we don't have s3 set up while testing this], +, +This sets up a repository that uses all client settings from the client `my_client_named` except for the `endpoint` that is overridden, +to `my.s3.endpoint` by the repository settings., +, +++ b/plugins/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3BasicCredentials.java, +/*, + * Licensed to Elasticsearch under one or more contributor, + * license agreements. See the NOTICE file distributed with, + * this work for additional information regarding copyright, + * ownership. Elasticsearch licenses this file to you under, + * the Apache License, Version 2.0 (the "License"); you may, + * not use this file except in compliance with the License., + * You may obtain a copy of the License at, + *, + *    http://www.apache.org/licenses/LICENSE-2.0, + *, + * Unless required by applicable law or agreed to in writing,, + * software distributed under the License is distributed on an, + * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY, + * KIND, either express or implied.  See the License for the, + * specific language governing permissions and limitations, + * under the License., + */, +package org.elasticsearch.repositories.s3;, +, +import com.amazonaws.auth.AWSCredentials;, +, +import java.util.Objects;, +, +class S3BasicCredentials implements AWSCredentials {, +, +    private final String accessKey;, +, +    private final String secretKey;, +, +    S3BasicCredentials(String accessKey, String secretKey) {, +        this.accessKey = accessKey;, +        this.secretKey = secretKey;, +    }, +, +    @Override, +    public final String getAWSAccessKeyId() {, +        return accessKey;, +    }, +, +    @Override, +    public final String getAWSSecretKey() {, +        return secretKey;, +    }, +]