[+++ b/libs/nio/src/main/java/org/elasticsearch/nio/NioSelector.java, +        this.ioBuffer = ByteBuffer.allocateDirect(1 << 18);, +++ b/libs/nio/src/main/java/org/elasticsearch/nio/NioSelector.java, +        this.ioBuffer = ByteBuffer.allocateDirect(1 << 18);, +++ b/libs/nio/src/main/java/org/elasticsearch/nio/SocketChannelContext.java, +    // Currently we limit to 64KB. This is a trade-off which means more syscalls, in exchange for less, +    // copying., +    private final int WRITE_LIMIT = 1 << 16;, +, +        ioBuffer.limit(Math.min(WRITE_LIMIT, ioBuffer.limit()));, +            ioBuffer.limit(Math.min(WRITE_LIMIT, ioBuffer.limit()));]