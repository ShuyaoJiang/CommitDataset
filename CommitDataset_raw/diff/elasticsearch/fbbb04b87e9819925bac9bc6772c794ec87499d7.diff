[+++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/settings/ClusterUpdateSettingsRequest.java, +import java.util.*;, +    private Set<String> transientReset = new HashSet<>();, +    private Set<String> persistentReset = new HashSet<>();, +        if (transientSettings.getAsMap().isEmpty() && persistentSettings.getAsMap().isEmpty() && transientReset.isEmpty() && persistentReset.isEmpty()) {, +    public Set<String> getTransientReset() { return Collections.unmodifiableSet(transientReset); }, +, +    public Set<String> getPersistentReset() { return Collections.unmodifiableSet(persistentReset); }, +, +    public void addTransientResetKeys(Collection<String> keys) {, +        transientReset.addAll(keys);, +    }, +, +    public void addPersistentResetKeys(Collection<String> keys) {, +        persistentReset.addAll(keys);, +    }, +, +        transientReset = new HashSet<>(Arrays.asList(in.readStringArray()));, +        persistentReset = new HashSet<>(Arrays.asList(in.readStringArray()));, +        out.writeStringArray(transientReset.toArray(new String[0]));, +        out.writeStringArray(persistentReset.toArray(new String[0]));, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/settings/ClusterUpdateSettingsRequest.java, +import java.util.*;, +    private Set<String> transientReset = new HashSet<>();, +    private Set<String> persistentReset = new HashSet<>();, +        if (transientSettings.getAsMap().isEmpty() && persistentSettings.getAsMap().isEmpty() && transientReset.isEmpty() && persistentReset.isEmpty()) {, +    public Set<String> getTransientReset() { return Collections.unmodifiableSet(transientReset); }, +, +    public Set<String> getPersistentReset() { return Collections.unmodifiableSet(persistentReset); }, +, +    public void addTransientResetKeys(Collection<String> keys) {, +        transientReset.addAll(keys);, +    }, +, +    public void addPersistentResetKeys(Collection<String> keys) {, +        persistentReset.addAll(keys);, +    }, +, +        transientReset = new HashSet<>(Arrays.asList(in.readStringArray()));, +        persistentReset = new HashSet<>(Arrays.asList(in.readStringArray()));, +        out.writeStringArray(transientReset.toArray(new String[0]));, +        out.writeStringArray(persistentReset.toArray(new String[0]));, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/settings/ClusterUpdateSettingsRequestBuilder.java, +import java.util.Arrays;, +import java.util.Collection;, +, +    public ClusterUpdateSettingsRequestBuilder addTransientResetKeys(Collection<String> keys) {, +        request.addTransientResetKeys(keys);, +        return this;, +    }, +, +    public ClusterUpdateSettingsRequestBuilder addPersistentResetKeys(Collection<String> keys) {, +        request.addPersistentResetKeys(keys);, +        return this;, +    }, +, +    public ClusterUpdateSettingsRequestBuilder addTransientResetKeys(String... keys) {, +        request.addTransientResetKeys(Arrays.asList(keys));, +        return this;, +    }, +, +    public ClusterUpdateSettingsRequestBuilder addPersistentResetKeys(String... keys) {, +        request.addPersistentResetKeys(Arrays.asList(keys));, +        return this;, +    }, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/settings/ClusterUpdateSettingsRequest.java, +import java.util.*;, +    private Set<String> transientReset = new HashSet<>();, +    private Set<String> persistentReset = new HashSet<>();, +        if (transientSettings.getAsMap().isEmpty() && persistentSettings.getAsMap().isEmpty() && transientReset.isEmpty() && persistentReset.isEmpty()) {, +    public Set<String> getTransientReset() { return Collections.unmodifiableSet(transientReset); }, +, +    public Set<String> getPersistentReset() { return Collections.unmodifiableSet(persistentReset); }, +, +    public void addTransientResetKeys(Collection<String> keys) {, +        transientReset.addAll(keys);, +    }, +, +    public void addPersistentResetKeys(Collection<String> keys) {, +        persistentReset.addAll(keys);, +    }, +, +        transientReset = new HashSet<>(Arrays.asList(in.readStringArray()));, +        persistentReset = new HashSet<>(Arrays.asList(in.readStringArray()));, +        out.writeStringArray(transientReset.toArray(new String[0]));, +        out.writeStringArray(persistentReset.toArray(new String[0]));, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/settings/ClusterUpdateSettingsRequestBuilder.java, +import java.util.Arrays;, +import java.util.Collection;, +, +    public ClusterUpdateSettingsRequestBuilder addTransientResetKeys(Collection<String> keys) {, +        request.addTransientResetKeys(keys);, +        return this;, +    }, +, +    public ClusterUpdateSettingsRequestBuilder addPersistentResetKeys(Collection<String> keys) {, +        request.addPersistentResetKeys(keys);, +        return this;, +    }, +]