[+++ b/core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java, +import org.elasticsearch.index.query.support.InnerHitsBuilder;, +++ b/core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java, +import org.elasticsearch.index.query.support.InnerHitsBuilder;, +++ b/core/src/main/java/org/elasticsearch/search/rescore/RescoreBuilder.java, +import org.elasticsearch.action.support.ToXContentToBytes;, +public abstract class RescoreBuilder<RB extends RescoreBuilder<RB>> extends ToXContentToBytes implements NamedWriteable<RB> {, +++ b/core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java, +import org.elasticsearch.index.query.support.InnerHitsBuilder;, +++ b/core/src/main/java/org/elasticsearch/search/rescore/RescoreBuilder.java, +import org.elasticsearch.action.support.ToXContentToBytes;, +public abstract class RescoreBuilder<RB extends RescoreBuilder<RB>> extends ToXContentToBytes implements NamedWriteable<RB> {, +++ b/core/src/test/java/org/elasticsearch/bwcompat/OldIndexBackwardsCompatibilityIT.java, +    @AwaitsFix(bugUrl = "https://github.com/elastic/elasticsearch/issues/17514"), +++ b/core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java, +import org.elasticsearch.index.query.support.InnerHitsBuilder;, +++ b/core/src/main/java/org/elasticsearch/search/rescore/RescoreBuilder.java, +import org.elasticsearch.action.support.ToXContentToBytes;, +public abstract class RescoreBuilder<RB extends RescoreBuilder<RB>> extends ToXContentToBytes implements NamedWriteable<RB> {, +++ b/core/src/test/java/org/elasticsearch/bwcompat/OldIndexBackwardsCompatibilityIT.java, +    @AwaitsFix(bugUrl = "https://github.com/elastic/elasticsearch/issues/17514"), +++ b/core/src/test/java/org/elasticsearch/common/geo/builders/AbstractShapeBuilderTestCase.java, +import java.util.Collections;, +            XContentBuilder shuffled = shuffleXContent(builder, Collections.emptySet());, +            XContentParser shapeParser = XContentHelper.createParser(shuffled.bytes());, +++ b/core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java, +import org.elasticsearch.index.query.support.InnerHitsBuilder;, +++ b/core/src/main/java/org/elasticsearch/search/rescore/RescoreBuilder.java, +import org.elasticsearch.action.support.ToXContentToBytes;, +public abstract class RescoreBuilder<RB extends RescoreBuilder<RB>> extends ToXContentToBytes implements NamedWriteable<RB> {, +++ b/core/src/test/java/org/elasticsearch/bwcompat/OldIndexBackwardsCompatibilityIT.java, +    @AwaitsFix(bugUrl = "https://github.com/elastic/elasticsearch/issues/17514"), +++ b/core/src/test/java/org/elasticsearch/common/geo/builders/AbstractShapeBuilderTestCase.java, +import java.util.Collections;, +            XContentBuilder shuffled = shuffleXContent(builder, Collections.emptySet());, +            XContentParser shapeParser = XContentHelper.createParser(shuffled.bytes());, +++ b/core/src/test/java/org/elasticsearch/ingest/IngestMetadataTests.java, +import java.util.Collections;, +        XContentBuilder builder = XContentFactory.contentBuilder(randomFrom(XContentType.values()));, +        XContentBuilder shuffled = shuffleXContent(builder, Collections.emptySet());, +        final XContentParser parser = XContentFactory.xContent(shuffled.bytes()).createParser(shuffled.bytes());, +++ b/core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java, +import org.elasticsearch.index.query.support.InnerHitsBuilder;, +++ b/core/src/main/java/org/elasticsearch/search/rescore/RescoreBuilder.java, +import org.elasticsearch.action.support.ToXContentToBytes;, +public abstract class RescoreBuilder<RB extends RescoreBuilder<RB>> extends ToXContentToBytes implements NamedWriteable<RB> {, +++ b/core/src/test/java/org/elasticsearch/bwcompat/OldIndexBackwardsCompatibilityIT.java, +    @AwaitsFix(bugUrl = "https://github.com/elastic/elasticsearch/issues/17514"), +++ b/core/src/test/java/org/elasticsearch/common/geo/builders/AbstractShapeBuilderTestCase.java, +import java.util.Collections;, +            XContentBuilder shuffled = shuffleXContent(builder, Collections.emptySet());, +            XContentParser shapeParser = XContentHelper.createParser(shuffled.bytes());, +++ b/core/src/test/java/org/elasticsearch/ingest/IngestMetadataTests.java, +import java.util.Collections;, +        XContentBuilder builder = XContentFactory.contentBuilder(randomFrom(XContentType.values()));, +        XContentBuilder shuffled = shuffleXContent(builder, Collections.emptySet());, +        final XContentParser parser = XContentFactory.xContent(shuffled.bytes()).createParser(shuffled.bytes());, +++ b/core/src/test/java/org/elasticsearch/search/highlight/HighlightBuilderTests.java, +import java.util.Collections;, +            XContentBuilder shuffled = shuffleXContent(builder, Collections.emptySet());, +            XContentParser parser = XContentHelper.createParser(shuffled.bytes());, +++ b/core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java, +import org.elasticsearch.index.query.support.InnerHitsBuilder;, +++ b/core/src/main/java/org/elasticsearch/search/rescore/RescoreBuilder.java, +import org.elasticsearch.action.support.ToXContentToBytes;, +public abstract class RescoreBuilder<RB extends RescoreBuilder<RB>> extends ToXContentToBytes implements NamedWriteable<RB> {, +++ b/core/src/test/java/org/elasticsearch/bwcompat/OldIndexBackwardsCompatibilityIT.java, +    @AwaitsFix(bugUrl = "https://github.com/elastic/elasticsearch/issues/17514"), +++ b/core/src/test/java/org/elasticsearch/common/geo/builders/AbstractShapeBuilderTestCase.java, +import java.util.Collections;, +            XContentBuilder shuffled = shuffleXContent(builder, Collections.emptySet());, +            XContentParser shapeParser = XContentHelper.createParser(shuffled.bytes());, +++ b/core/src/test/java/org/elasticsearch/ingest/IngestMetadataTests.java, +import java.util.Collections;, +        XContentBuilder builder = XContentFactory.contentBuilder(randomFrom(XContentType.values()));, +        XContentBuilder shuffled = shuffleXContent(builder, Collections.emptySet());, +        final XContentParser parser = XContentFactory.xContent(shuffled.bytes()).createParser(shuffled.bytes());, +++ b/core/src/test/java/org/elasticsearch/search/highlight/HighlightBuilderTests.java, +import java.util.Collections;, +            XContentBuilder shuffled = shuffleXContent(builder, Collections.emptySet());, +            XContentParser parser = XContentHelper.createParser(shuffled.bytes());, +++ b/core/src/test/java/org/elasticsearch/search/rescore/QueryRescoreBuilderTests.java, +import java.util.Collections;, +            XContentBuilder builder = XContentFactory.contentBuilder(randomFrom(XContentType.values()));, +            if (randomBoolean()) {, +                builder.prettyPrint();, +            }, +            rescoreBuilder.toXContent(builder, ToXContent.EMPTY_PARAMS);, +            XContentBuilder shuffled = shuffleXContent(builder, Collections.emptySet());, +, +            XContentParser parser = XContentHelper.createParser(shuffled.bytes());, +++ b/core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java, +import org.elasticsearch.index.query.support.InnerHitsBuilder;, +++ b/core/src/main/java/org/elasticsearch/search/rescore/RescoreBuilder.java, +import org.elasticsearch.action.support.ToXContentToBytes;, +public abstract class RescoreBuilder<RB extends RescoreBuilder<RB>> extends ToXContentToBytes implements NamedWriteable<RB> {, +++ b/core/src/test/java/org/elasticsearch/bwcompat/OldIndexBackwardsCompatibilityIT.java, +    @AwaitsFix(bugUrl = "https://github.com/elastic/elasticsearch/issues/17514"), +++ b/core/src/test/java/org/elasticsearch/common/geo/builders/AbstractShapeBuilderTestCase.java, +import java.util.Collections;]