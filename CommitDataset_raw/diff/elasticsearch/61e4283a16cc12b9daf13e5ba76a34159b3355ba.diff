[+++ b/core/src/main/java/org/elasticsearch/ingest/core/CompoundProcessor.java, +    static final String ON_FAILURE_PROCESSOR_TYPE_FIELD = "on_failure_processor_type";, +    static final String ON_FAILURE_PROCESSOR_TAG_FIELD = "on_failure_processor_tag";, +                    executeOnFailure(ingestDocument, e, processor.getType(), processor.getTag());, +    void executeOnFailure(IngestDocument ingestDocument, Exception cause, String failedProcessorType, String failedProcessorTag) throws Exception {, +            ingestMetadata.put(ON_FAILURE_PROCESSOR_TYPE_FIELD, failedProcessorType);, +            ingestMetadata.put(ON_FAILURE_PROCESSOR_TAG_FIELD, failedProcessorTag);, +            ingestMetadata.remove(ON_FAILURE_PROCESSOR_TYPE_FIELD);, +            ingestMetadata.remove(ON_FAILURE_PROCESSOR_TAG_FIELD);, +++ b/core/src/main/java/org/elasticsearch/ingest/core/CompoundProcessor.java, +    static final String ON_FAILURE_PROCESSOR_TYPE_FIELD = "on_failure_processor_type";, +    static final String ON_FAILURE_PROCESSOR_TAG_FIELD = "on_failure_processor_tag";, +                    executeOnFailure(ingestDocument, e, processor.getType(), processor.getTag());, +    void executeOnFailure(IngestDocument ingestDocument, Exception cause, String failedProcessorType, String failedProcessorTag) throws Exception {, +            ingestMetadata.put(ON_FAILURE_PROCESSOR_TYPE_FIELD, failedProcessorType);, +            ingestMetadata.put(ON_FAILURE_PROCESSOR_TAG_FIELD, failedProcessorTag);, +            ingestMetadata.remove(ON_FAILURE_PROCESSOR_TYPE_FIELD);, +            ingestMetadata.remove(ON_FAILURE_PROCESSOR_TAG_FIELD);, +++ b/core/src/test/java/org/elasticsearch/ingest/core/CompoundProcessorTests.java, +            assertThat(ingestMetadata.size(), equalTo(3));, +            assertThat(ingestMetadata.get(CompoundProcessor.ON_FAILURE_PROCESSOR_TYPE_FIELD), equalTo("first"));, +            assertThat(ingestMetadata.get(CompoundProcessor.ON_FAILURE_PROCESSOR_TAG_FIELD), equalTo("id"));, +        TestProcessor processorToFail = new TestProcessor("id2", "second", ingestDocument -> {, +            assertThat(ingestMetadata.size(), equalTo(3));, +            assertThat(ingestMetadata.get(CompoundProcessor.ON_FAILURE_PROCESSOR_TYPE_FIELD), equalTo("first"));, +            assertThat(ingestMetadata.get(CompoundProcessor.ON_FAILURE_PROCESSOR_TAG_FIELD), equalTo("id"));, +            assertThat(ingestMetadata.size(), equalTo(3));, +            assertThat(ingestMetadata.get(CompoundProcessor.ON_FAILURE_PROCESSOR_TYPE_FIELD), equalTo("second"));, +            assertThat(ingestMetadata.get(CompoundProcessor.ON_FAILURE_PROCESSOR_TAG_FIELD), equalTo("id2"));, +++ b/core/src/main/java/org/elasticsearch/ingest/core/CompoundProcessor.java, +    static final String ON_FAILURE_PROCESSOR_TYPE_FIELD = "on_failure_processor_type";, +    static final String ON_FAILURE_PROCESSOR_TAG_FIELD = "on_failure_processor_tag";, +                    executeOnFailure(ingestDocument, e, processor.getType(), processor.getTag());, +    void executeOnFailure(IngestDocument ingestDocument, Exception cause, String failedProcessorType, String failedProcessorTag) throws Exception {, +            ingestMetadata.put(ON_FAILURE_PROCESSOR_TYPE_FIELD, failedProcessorType);, +            ingestMetadata.put(ON_FAILURE_PROCESSOR_TAG_FIELD, failedProcessorTag);, +            ingestMetadata.remove(ON_FAILURE_PROCESSOR_TYPE_FIELD);, +            ingestMetadata.remove(ON_FAILURE_PROCESSOR_TAG_FIELD);, +++ b/core/src/test/java/org/elasticsearch/ingest/core/CompoundProcessorTests.java, +            assertThat(ingestMetadata.size(), equalTo(3));, +            assertThat(ingestMetadata.get(CompoundProcessor.ON_FAILURE_PROCESSOR_TYPE_FIELD), equalTo("first"));, +            assertThat(ingestMetadata.get(CompoundProcessor.ON_FAILURE_PROCESSOR_TAG_FIELD), equalTo("id"));, +        TestProcessor processorToFail = new TestProcessor("id2", "second", ingestDocument -> {, +            assertThat(ingestMetadata.size(), equalTo(3));, +            assertThat(ingestMetadata.get(CompoundProcessor.ON_FAILURE_PROCESSOR_TYPE_FIELD), equalTo("first"));, +            assertThat(ingestMetadata.get(CompoundProcessor.ON_FAILURE_PROCESSOR_TAG_FIELD), equalTo("id"));, +            assertThat(ingestMetadata.size(), equalTo(3));, +            assertThat(ingestMetadata.get(CompoundProcessor.ON_FAILURE_PROCESSOR_TYPE_FIELD), equalTo("second"));, +            assertThat(ingestMetadata.get(CompoundProcessor.ON_FAILURE_PROCESSOR_TAG_FIELD), equalTo("id2"));, +++ b/docs/reference/ingest/ingest.asciidoc, +`on_failure_message`, `on_failure_processor_type`, `on_failure_processor_tag`. These fields are only accessible , +++ b/core/src/main/java/org/elasticsearch/ingest/core/CompoundProcessor.java, +    static final String ON_FAILURE_PROCESSOR_TYPE_FIELD = "on_failure_processor_type";, +    static final String ON_FAILURE_PROCESSOR_TAG_FIELD = "on_failure_processor_tag";, +                    executeOnFailure(ingestDocument, e, processor.getType(), processor.getTag());, +    void executeOnFailure(IngestDocument ingestDocument, Exception cause, String failedProcessorType, String failedProcessorTag) throws Exception {, +            ingestMetadata.put(ON_FAILURE_PROCESSOR_TYPE_FIELD, failedProcessorType);, +            ingestMetadata.put(ON_FAILURE_PROCESSOR_TAG_FIELD, failedProcessorTag);, +            ingestMetadata.remove(ON_FAILURE_PROCESSOR_TYPE_FIELD);, +            ingestMetadata.remove(ON_FAILURE_PROCESSOR_TAG_FIELD);, +++ b/core/src/test/java/org/elasticsearch/ingest/core/CompoundProcessorTests.java, +            assertThat(ingestMetadata.size(), equalTo(3));, +            assertThat(ingestMetadata.get(CompoundProcessor.ON_FAILURE_PROCESSOR_TYPE_FIELD), equalTo("first"));, +            assertThat(ingestMetadata.get(CompoundProcessor.ON_FAILURE_PROCESSOR_TAG_FIELD), equalTo("id"));, +        TestProcessor processorToFail = new TestProcessor("id2", "second", ingestDocument -> {, +            assertThat(ingestMetadata.size(), equalTo(3));, +            assertThat(ingestMetadata.get(CompoundProcessor.ON_FAILURE_PROCESSOR_TYPE_FIELD), equalTo("first"));, +            assertThat(ingestMetadata.get(CompoundProcessor.ON_FAILURE_PROCESSOR_TAG_FIELD), equalTo("id"));, +            assertThat(ingestMetadata.size(), equalTo(3));, +            assertThat(ingestMetadata.get(CompoundProcessor.ON_FAILURE_PROCESSOR_TYPE_FIELD), equalTo("second"));, +            assertThat(ingestMetadata.get(CompoundProcessor.ON_FAILURE_PROCESSOR_TAG_FIELD), equalTo("id2"));, +++ b/docs/reference/ingest/ingest.asciidoc, +`on_failure_message`, `on_failure_processor_type`, `on_failure_processor_tag`. These fields are only accessible , +++ b/qa/ingest-with-mustache/src/test/resources/rest-api-spec/test/ingest_mustache/10_pipeline_with_mustache_templates.yaml, +                  "tag" : "first_processor",, +                        "value" : "processor {{ _ingest.on_failure_processor_tag }} [{{ _ingest.on_failure_processor_type }}]: {{ _ingest.on_failure_message }}", +  - match: { _source.error: "processor first_processor [remove]: field [field_to_remove] not present as part of path [field_to_remove]" }]