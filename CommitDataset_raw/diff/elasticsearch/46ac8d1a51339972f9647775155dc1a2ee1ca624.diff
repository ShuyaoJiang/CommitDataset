[+++ b/server/src/test/java/org/elasticsearch/common/util/BigArraysTests.java, +            final int maxSize = randomIntBetween(1 << 10, 1 << 22);, +            final int size = scaledRandomIntBetween(10, maxSize / 8);, +            final long newSize = maxSize + 1;, +            InvocationTargetException e = expectThrows(InvocationTargetException.class, () -> resize.invoke(bigArrays, array, newSize));]