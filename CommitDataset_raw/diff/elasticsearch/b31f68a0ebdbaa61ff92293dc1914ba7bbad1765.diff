[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/segments/TransportIndicesSegmentsAction.java, +    @Override protected ShardRouting firstShardOrNull(ShardIterator shardIt) {, +        return shardIt.firstAssignedOrNull();, +    }, +, +    /**, +     * We want to go over all assigned nodes (to get recovery status) and not just active ones., +     */, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/segments/TransportIndicesSegmentsAction.java, +    @Override protected ShardRouting firstShardOrNull(ShardIterator shardIt) {, +        return shardIt.firstAssignedOrNull();, +    }, +, +    /**, +     * We want to go over all assigned nodes (to get recovery status) and not just active ones., +     */, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/status/TransportIndicesStatusAction.java, +    @Override protected ShardRouting firstShardOrNull(ShardIterator shardIt) {, +        return shardIt.firstAssignedOrNull();, +    }, +, +    /**, +     * We want to go over all assigned nodes (to get recovery status) and not just active ones., +     */, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/segments/TransportIndicesSegmentsAction.java, +    @Override protected ShardRouting firstShardOrNull(ShardIterator shardIt) {, +        return shardIt.firstAssignedOrNull();, +    }, +, +    /**, +     * We want to go over all assigned nodes (to get recovery status) and not just active ones., +     */, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/status/TransportIndicesStatusAction.java, +    @Override protected ShardRouting firstShardOrNull(ShardIterator shardIt) {, +        return shardIt.firstAssignedOrNull();, +    }, +, +    /**, +     * We want to go over all assigned nodes (to get recovery status) and not just active ones., +     */, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java, +                final ShardRouting shard = shardIt.firstActiveOrNull();, +                        performFirstPhase(shardIt);, +                                final ShardRouting shard = shardIt.firstActiveOrNull();, +                                        performFirstPhase(shardIt);, +                        final ShardRouting shard = shardIt.firstActiveOrNull();, +                                            performFirstPhase(shardIt);, +                                    performFirstPhase(shardIt);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/segments/TransportIndicesSegmentsAction.java, +    @Override protected ShardRouting firstShardOrNull(ShardIterator shardIt) {, +        return shardIt.firstAssignedOrNull();, +    }, +, +    /**, +     * We want to go over all assigned nodes (to get recovery status) and not just active ones., +     */, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/status/TransportIndicesStatusAction.java, +    @Override protected ShardRouting firstShardOrNull(ShardIterator shardIt) {, +        return shardIt.firstAssignedOrNull();, +    }, +, +    /**, +     * We want to go over all assigned nodes (to get recovery status) and not just active ones., +     */, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java, +                final ShardRouting shard = shardIt.firstActiveOrNull();, +                        performFirstPhase(shardIt);, +                                final ShardRouting shard = shardIt.firstActiveOrNull();, +                                        performFirstPhase(shardIt);, +                        final ShardRouting shard = shardIt.firstActiveOrNull();, +                                            performFirstPhase(shardIt);, +                                    performFirstPhase(shardIt);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastOperationAction.java, +     * <p>Note, if overriding this method, make sure to also override {@link #hasNextShard(org.elasticsearch.cluster.routing.ShardIterator)},, +     * and {@link #firstShardOrNull(org.elasticsearch.cluster.routing.ShardIterator)}., +    protected ShardRouting firstShardOrNull(ShardIterator shardIt) {, +        return shardIt.firstActiveOrNull();, +    }, +, +                final ShardRouting shard = firstShardOrNull(shardIt);, +                        performOperation(shardIt, true);, +                                final ShardRouting shard = firstShardOrNull(shardIt);, +                                        performOperation(shardIt, false);, +                        final ShardRouting shard = firstShardOrNull(shardIt);, +                                performOperation(shardIt, localAsync);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/segments/TransportIndicesSegmentsAction.java, +    @Override protected ShardRouting firstShardOrNull(ShardIterator shardIt) {, +        return shardIt.firstAssignedOrNull();, +    }, +, +    /**, +     * We want to go over all assigned nodes (to get recovery status) and not just active ones., +     */, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/status/TransportIndicesStatusAction.java, +    @Override protected ShardRouting firstShardOrNull(ShardIterator shardIt) {, +        return shardIt.firstAssignedOrNull();, +    }, +, +    /**, +     * We want to go over all assigned nodes (to get recovery status) and not just active ones.]