[+++ b/core/src/test/java/org/elasticsearch/search/suggest/AbstractSuggestionBuilderTestCase.java, +    protected Tuple<MappedFieldType, SB> randomFieldTypeAndSuggestionBuilder() {, +        return new Tuple<>(type, randomTestBuilder());, +            final Tuple<MappedFieldType, SB> mappedFieldTypeSBTuple = randomFieldTypeAndSuggestionBuilder();, +            final MapperService mapperService = new MapperService(idxSettings, mockAnalysisService, null,, +                new IndicesModule().getMapperRegistry(), null) {, +                @Override, +                public MappedFieldType fullName(String fullName) {, +                    return mappedFieldTypeSBTuple.v1();, +                }, +            };, +            SB suggestionBuilder = mappedFieldTypeSBTuple.v2();, +                null, null, mapperService, null, scriptService, null) {, +++ b/core/src/test/java/org/elasticsearch/search/suggest/AbstractSuggestionBuilderTestCase.java, +    protected Tuple<MappedFieldType, SB> randomFieldTypeAndSuggestionBuilder() {, +        return new Tuple<>(type, randomTestBuilder());, +            final Tuple<MappedFieldType, SB> mappedFieldTypeSBTuple = randomFieldTypeAndSuggestionBuilder();, +            final MapperService mapperService = new MapperService(idxSettings, mockAnalysisService, null,, +                new IndicesModule().getMapperRegistry(), null) {, +                @Override, +                public MappedFieldType fullName(String fullName) {, +                    return mappedFieldTypeSBTuple.v1();, +                }, +            };, +            SB suggestionBuilder = mappedFieldTypeSBTuple.v2();, +                null, null, mapperService, null, scriptService, null) {, +++ b/core/src/test/java/org/elasticsearch/search/suggest/completion/CompletionSuggesterBuilderTests.java, +    protected Tuple<MappedFieldType, CompletionSuggestionBuilder> randomFieldTypeAndSuggestionBuilder() {, +        return new Tuple<>(type, builderAndInfo.builder);]