[+++ b/client/rest/src/test/java/org/elasticsearch/client/RestClientSingleHostIntegTests.java, +import static org.junit.Assert.fail;, +            restClientBuilder.setPathPrefix(pathPrefix);, +    public void testUrlWithoutLeadingSlash() throws Exception {, +        if (pathPrefix.length() == 0) {, +            try {, +                restClient.performRequest("GET", "200");, +                fail("request should have failed");, +            } catch(ResponseException e) {, +                assertEquals(404, e.getResponse().getStatusLine().getStatusCode());, +            }, +        } else {, +            {, +                Response response = restClient.performRequest("GET", "200");, +                //a trailing slash gets automatically added if a pathPrefix is configured, +                assertEquals(200, response.getStatusLine().getStatusCode());, +            }, +            {, +                //pathPrefix is not required to start with '/', will be added automatically, +                try (RestClient restClient = RestClient.builder(, +                        new HttpHost(httpServer.getAddress().getHostString(), httpServer.getAddress().getPort())), +                        .setPathPrefix(pathPrefix.substring(1)).build()) {, +                    Response response = restClient.performRequest("GET", "200");, +                    //a trailing slash gets automatically added if a pathPrefix is configured, +                    assertEquals(200, response.getStatusLine().getStatusCode());, +                }, +            }, +        }, +    }, +]