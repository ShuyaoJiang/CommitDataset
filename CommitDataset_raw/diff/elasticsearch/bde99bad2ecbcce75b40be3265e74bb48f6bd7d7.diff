[+++ b/core/src/main/java/org/elasticsearch/search/aggregations/metrics/cardinality/CardinalityAggregatorFactory.java, +        return new CardinalityAggregator(name, null, precision(), context, parent, pipelineAggregators, metaData);, +        return new CardinalityAggregator(name, valuesSource, precision(), context, parent, pipelineAggregators,, +    private int precision() {, +        return precisionThreshold == null, +                ? HyperLogLogPlusPlus.DEFAULT_PRECISION, +                : HyperLogLogPlusPlus.precisionFromThreshold(precisionThreshold);, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/metrics/cardinality/CardinalityAggregatorFactory.java, +        return new CardinalityAggregator(name, null, precision(), context, parent, pipelineAggregators, metaData);, +        return new CardinalityAggregator(name, valuesSource, precision(), context, parent, pipelineAggregators,, +    private int precision() {, +        return precisionThreshold == null, +                ? HyperLogLogPlusPlus.DEFAULT_PRECISION, +                : HyperLogLogPlusPlus.precisionFromThreshold(precisionThreshold);, +++ b/docs/reference/aggregations/metrics/cardinality-aggregation.asciidoc, +effect as a threshold of 40000. The default values is +3000+.]