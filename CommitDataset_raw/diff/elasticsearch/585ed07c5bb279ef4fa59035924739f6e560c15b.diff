[+++ b/core/src/main/java/org/elasticsearch/action/admin/indices/get/GetIndexResponse.java, +import org.elasticsearch.search.builder.SearchSourceBuilder;, +                        SearchSourceBuilder.PROTOTYPE.readFrom(in)), +                warmerEntry.source().writeTo(out);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/get/GetIndexResponse.java, +import org.elasticsearch.search.builder.SearchSourceBuilder;, +                        SearchSourceBuilder.PROTOTYPE.readFrom(in)), +                warmerEntry.source().writeTo(out);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/warmer/get/GetWarmersResponse.java, +, +import org.elasticsearch.search.builder.SearchSourceBuilder;, +                SearchSourceBuilder source = SearchSourceBuilder.PROTOTYPE.readFrom(in);, +                warmerEntry.source().writeTo(out);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/get/GetIndexResponse.java, +import org.elasticsearch.search.builder.SearchSourceBuilder;, +                        SearchSourceBuilder.PROTOTYPE.readFrom(in)), +                warmerEntry.source().writeTo(out);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/warmer/get/GetWarmersResponse.java, +, +import org.elasticsearch.search.builder.SearchSourceBuilder;, +                SearchSourceBuilder source = SearchSourceBuilder.PROTOTYPE.readFrom(in);, +                warmerEntry.source().writeTo(out);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/warmer/put/TransportPutWarmerAction.java, +import org.elasticsearch.search.builder.SearchSourceBuilder;, +                        SearchSourceBuilder source = null;, +                        if (request.searchRequest().source() != null) {, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/get/GetIndexResponse.java, +import org.elasticsearch.search.builder.SearchSourceBuilder;, +                        SearchSourceBuilder.PROTOTYPE.readFrom(in)), +                warmerEntry.source().writeTo(out);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/warmer/get/GetWarmersResponse.java, +, +import org.elasticsearch.search.builder.SearchSourceBuilder;, +                SearchSourceBuilder source = SearchSourceBuilder.PROTOTYPE.readFrom(in);, +                warmerEntry.source().writeTo(out);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/warmer/put/TransportPutWarmerAction.java, +import org.elasticsearch.search.builder.SearchSourceBuilder;, +                        SearchSourceBuilder source = null;, +                        if (request.searchRequest().source() != null) {, +++ b/core/src/main/java/org/elasticsearch/action/count/CountRequest.java, +import org.elasticsearch.index.query.QueryBuilder;, +    private SearchSourceBuilder searchSourceBuilder = new SearchSourceBuilder();, +, +     * The query to execute, +    public CountRequest query(QueryBuilder queryBuilder) {, +        this.searchSourceBuilder = new SearchSourceBuilder().query(queryBuilder);, +    public CountRequest searchSource(SearchSourceBuilder searchSourceBuilder) {, +        this.searchSourceBuilder = searchSourceBuilder;, +            sSource = XContentHelper.toString(searchSourceBuilder);, +        SearchRequest searchRequest = new SearchRequest(indices());, +        searchRequest.source(searchSourceBuilder);, +        searchRequest.indicesOptions(indicesOptions());, +        searchRequest.types(types());, +        searchRequest.routing(routing());, +        searchRequest.preference(preference());, +, +    SearchSourceBuilder sourceBuilder() {, +        return searchSourceBuilder;, +    }, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/get/GetIndexResponse.java, +import org.elasticsearch.search.builder.SearchSourceBuilder;, +                        SearchSourceBuilder.PROTOTYPE.readFrom(in)), +                warmerEntry.source().writeTo(out);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/warmer/get/GetWarmersResponse.java, +, +import org.elasticsearch.search.builder.SearchSourceBuilder;, +                SearchSourceBuilder source = SearchSourceBuilder.PROTOTYPE.readFrom(in);, +                warmerEntry.source().writeTo(out);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/warmer/put/TransportPutWarmerAction.java, +import org.elasticsearch.search.builder.SearchSourceBuilder;, +                        SearchSourceBuilder source = null;, +                        if (request.searchRequest().source() != null) {, +++ b/core/src/main/java/org/elasticsearch/action/count/CountRequest.java, +import org.elasticsearch.index.query.QueryBuilder;, +    private SearchSourceBuilder searchSourceBuilder = new SearchSourceBuilder();, +, +     * The query to execute, +    public CountRequest query(QueryBuilder queryBuilder) {, +        this.searchSourceBuilder = new SearchSourceBuilder().query(queryBuilder);, +    public CountRequest searchSource(SearchSourceBuilder searchSourceBuilder) {, +        this.searchSourceBuilder = searchSourceBuilder;, +            sSource = XContentHelper.toString(searchSourceBuilder);, +        SearchRequest searchRequest = new SearchRequest(indices());, +        searchRequest.source(searchSourceBuilder);, +        searchRequest.indicesOptions(indicesOptions());, +        searchRequest.types(types());, +        searchRequest.routing(routing());, +        searchRequest.preference(preference());, +, +    SearchSourceBuilder sourceBuilder() {, +        return searchSourceBuilder;, +    }, +++ b/core/src/main/java/org/elasticsearch/action/count/CountRequestBuilder.java, +import org.elasticsearch.search.builder.SearchSourceBuilder;, +    public CountRequestBuilder setSource(SearchSourceBuilder source) {, +        request().searchSource(source);, +    public CountRequestBuilder setQuery(QueryBuilder<?> builder) {, +        request.query(builder);, +        if (request.sourceBuilder() != null) {, +            return request.sourceBuilder().toString();]