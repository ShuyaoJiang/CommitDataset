[+++ b/plugin/src/test/java/org/elasticsearch/test/SecurityIntegTestCase.java, +        assertSecurityIndexActive(cluster());, +    public void assertSecurityIndexActive(TestCluster testCluster) throws Exception {, +        for (Client client : testCluster.getClients()) {, +                ClusterState clusterState = client.admin().cluster().prepareState().setLocal(true).get().getState();, +        assertSecurityIndexWriteable(cluster());, +    }, +, +    public void assertSecurityIndexWriteable(TestCluster testCluster) throws Exception {, +        for (Client client : testCluster.getClients()) {, +                ClusterState clusterState = client.admin().cluster().prepareState().setLocal(true).get().getState();, +++ b/plugin/src/test/java/org/elasticsearch/test/SecurityIntegTestCase.java, +        assertSecurityIndexActive(cluster());, +    public void assertSecurityIndexActive(TestCluster testCluster) throws Exception {, +        for (Client client : testCluster.getClients()) {, +                ClusterState clusterState = client.admin().cluster().prepareState().setLocal(true).get().getState();, +        assertSecurityIndexWriteable(cluster());, +    }, +, +    public void assertSecurityIndexWriteable(TestCluster testCluster) throws Exception {, +        for (Client client : testCluster.getClients()) {, +                ClusterState clusterState = client.admin().cluster().prepareState().setLocal(true).get().getState();, +++ b/qa/tribe-tests-with-security/src/test/java/org/elasticsearch/test/TribeWithSecurityIT.java, +        assertSecurityIndexWriteable();, +        assertSecurityIndexWriteable();, +        assertSecurityIndexWriteable(cluster2);, +        assertSecurityIndexWriteable();]