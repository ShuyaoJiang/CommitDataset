[+++ b/src/test/java/org/elasticsearch/recovery/RecoveryWhileUnderLoadTests.java, +            final int totalNumDocs = scaledRandomIntBetween(200, 20000);, +            int waitFor = totalNumDocs / 3;, +            logger.info("--> waiting for {} docs to be indexed ...", waitFor);, +            waitForDocs(waitFor);, +            logger.info("--> {} docs indexed",  waitFor);, +            waitFor += totalNumDocs / 3;, +            logger.info("--> waiting for {} docs to be indexed ...", waitFor);, +            waitForDocs(waitFor);, +            logger.info("--> {} docs indexed",  waitFor);, +            logger.info("--> waiting for {} docs to be indexed ...", totalNumDocs);, +            waitForDocs(totalNumDocs);, +            logger.info("--> {} docs indexed", totalNumDocs);, +        final int totalNumDocs = scaledRandomIntBetween(200, 20000);, +        int waitFor = totalNumDocs / 3;, +            logger.info("--> waiting for {} docs to be indexed ...", waitFor);, +            waitForDocs(waitFor);, +            logger.info("--> {} docs indexed",  waitFor);, +            waitFor += totalNumDocs / 3;, +            logger.info("--> waiting for {} docs to be indexed ...", waitFor);, +            waitForDocs(waitFor);, +            logger.info("--> {} docs indexed",  waitFor);, +            logger.info("--> waiting for {} docs to be indexed ...", totalNumDocs);, +            waitForDocs(totalNumDocs);, +            logger.info("--> {} docs indexed", totalNumDocs);, +        final int totalNumDocs = scaledRandomIntBetween(200, 20000);, +        int waitFor = totalNumDocs / 3;, +            logger.info("--> waiting for {} docs to be indexed ...", waitFor);, +            waitForDocs(waitFor);, +            logger.info("--> {} docs indexed",  waitFor);, +            waitFor += totalNumDocs / 3;, +            logger.info("--> waiting for {} docs to be indexed ...", waitFor);, +            waitForDocs(waitFor);, +            logger.info("--> {} docs indexed",  waitFor);, +            logger.info("--> waiting for {} docs to be indexed ...", totalNumDocs);, +            waitForDocs(totalNumDocs);, +            logger.info("--> {} docs indexed",  totalNumDocs);, +        final CountDownLatch startLatch = new CountDownLatch(1);, +                        startLatch.await();, +            final int numDocs = scaledRandomIntBetween(200, 50000);, +            logger.info("--> indexing {} docs in total ...", numDocs);, +            startLatch.countDown();, +            for (int i = 0; i < numDocs; i += scaledRandomIntBetween(100, Math.min(1000, numDocs))) {]