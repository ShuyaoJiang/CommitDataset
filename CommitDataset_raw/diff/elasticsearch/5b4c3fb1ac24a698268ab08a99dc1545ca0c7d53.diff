[+++ b/core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java, +            if (logger.isTraceEnabled()) {, +                logger.trace("[{}] op [{}] completed on primary for request [{}]", primaryId, opType, request);, +            }, +, +++ b/core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java, +            if (logger.isTraceEnabled()) {, +                logger.trace("[{}] op [{}] completed on primary for request [{}]", primaryId, opType, request);, +            }, +, +++ b/core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java, +++ b/core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java, +            if (logger.isTraceEnabled()) {, +                logger.trace("[{}] op [{}] completed on primary for request [{}]", primaryId, opType, request);, +            }, +, +++ b/core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java, +++ b/core/src/main/java/org/elasticsearch/index/shard/IndexShardOperationsLock.java, +                releasable = tryAcquire();, +    @Nullable private Releasable tryAcquire() throws InterruptedException {, +++ b/core/src/main/java/org/elasticsearch/action/support/replication/ReplicationOperation.java, +            if (logger.isTraceEnabled()) {, +                logger.trace("[{}] op [{}] completed on primary for request [{}]", primaryId, opType, request);, +            }, +, +++ b/core/src/main/java/org/elasticsearch/action/support/replication/TransportReplicationAction.java, +++ b/core/src/main/java/org/elasticsearch/index/shard/IndexShardOperationsLock.java, +                releasable = tryAcquire();, +    @Nullable private Releasable tryAcquire() throws InterruptedException {, +++ b/core/src/test/java/org/elasticsearch/discovery/DiscoveryWithServiceDisruptionsIT.java, +            + "org.elasticsearch.indices.recovery:TRACE,org.elasticsearch.indices.cluster:TRACE")]