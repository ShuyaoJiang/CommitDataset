[+++ b/src/main/java/org/elasticsearch/indices/fielddata/cache/IndicesFieldDataCache.java, +        assert sizeInBytes >= 0 || value != null : "Expected size [" + sizeInBytes + "] to be positive or value [" + value + "] to be non-null";, +        if (sizeInBytes == -1 && value != null) {, +            sizeInBytes = value.ramBytesUsed();, +        }]