[+++ b/src/test/java/org/elasticsearch/test/unit/discovery/zen/ping/multicast/MulticastZenPingTests.java, +import org.elasticsearch.test.integration.ElasticsearchTestCase;, +public class MulticastZenPingTests extends ElasticsearchTestCase {, +, +    private Settings buildRandomMulticast(Settings settings) {, +        ImmutableSettings.Builder builder = ImmutableSettings.builder().put(settings);, +        builder.put("discovery.zen.ping.multicast.group", "224.2.3." + randomIntBetween(0, 255));, +        builder.put("discovery.zen.ping.multicast.port", randomIntBetween(55000, 56000));, +        return builder.build();, +    }, +        settings = buildRandomMulticast(settings);, +, +        settings = buildRandomMulticast(settings);, +, +++ b/src/test/java/org/elasticsearch/test/unit/discovery/zen/ping/multicast/MulticastZenPingTests.java, +import org.elasticsearch.test.integration.ElasticsearchTestCase;, +public class MulticastZenPingTests extends ElasticsearchTestCase {, +, +    private Settings buildRandomMulticast(Settings settings) {, +        ImmutableSettings.Builder builder = ImmutableSettings.builder().put(settings);, +        builder.put("discovery.zen.ping.multicast.group", "224.2.3." + randomIntBetween(0, 255));, +        builder.put("discovery.zen.ping.multicast.port", randomIntBetween(55000, 56000));, +        return builder.build();, +    }, +        settings = buildRandomMulticast(settings);, +, +        settings = buildRandomMulticast(settings);, +, +++ b/src/test/java/org/elasticsearch/test/unit/discovery/zen/ping/unicast/UnicastZenPingTests.java, +import org.elasticsearch.test.integration.ElasticsearchTestCase;, +public class UnicastZenPingTests extends ElasticsearchTestCase {, +        int startPort = 11000 + randomIntBetween(0, 1000);, +        int endPort = startPort + 10;, +        settings = ImmutableSettings.builder().put(settings).put("transport.tcp.port", startPort + "-" + endPort).build();, +, +++ b/src/test/java/org/elasticsearch/test/unit/discovery/zen/ping/multicast/MulticastZenPingTests.java, +import org.elasticsearch.test.integration.ElasticsearchTestCase;, +public class MulticastZenPingTests extends ElasticsearchTestCase {, +, +    private Settings buildRandomMulticast(Settings settings) {, +        ImmutableSettings.Builder builder = ImmutableSettings.builder().put(settings);, +        builder.put("discovery.zen.ping.multicast.group", "224.2.3." + randomIntBetween(0, 255));, +        builder.put("discovery.zen.ping.multicast.port", randomIntBetween(55000, 56000));, +        return builder.build();, +    }, +        settings = buildRandomMulticast(settings);, +, +        settings = buildRandomMulticast(settings);, +, +++ b/src/test/java/org/elasticsearch/test/unit/discovery/zen/ping/unicast/UnicastZenPingTests.java, +import org.elasticsearch.test.integration.ElasticsearchTestCase;, +public class UnicastZenPingTests extends ElasticsearchTestCase {, +        int startPort = 11000 + randomIntBetween(0, 1000);, +        int endPort = startPort + 10;, +        settings = ImmutableSettings.builder().put(settings).put("transport.tcp.port", startPort + "-" + endPort).build();, +, +++ b/src/test/java/org/elasticsearch/test/unit/transport/AbstractSimpleTransportTests.java, +import org.elasticsearch.test.integration.ElasticsearchTestCase;, +public abstract class AbstractSimpleTransportTests extends ElasticsearchTestCase {, +++ b/src/test/java/org/elasticsearch/test/unit/discovery/zen/ping/multicast/MulticastZenPingTests.java, +import org.elasticsearch.test.integration.ElasticsearchTestCase;, +public class MulticastZenPingTests extends ElasticsearchTestCase {, +, +    private Settings buildRandomMulticast(Settings settings) {, +        ImmutableSettings.Builder builder = ImmutableSettings.builder().put(settings);, +        builder.put("discovery.zen.ping.multicast.group", "224.2.3." + randomIntBetween(0, 255));, +        builder.put("discovery.zen.ping.multicast.port", randomIntBetween(55000, 56000));, +        return builder.build();, +    }, +        settings = buildRandomMulticast(settings);, +, +        settings = buildRandomMulticast(settings);, +, +++ b/src/test/java/org/elasticsearch/test/unit/discovery/zen/ping/unicast/UnicastZenPingTests.java, +import org.elasticsearch.test.integration.ElasticsearchTestCase;, +public class UnicastZenPingTests extends ElasticsearchTestCase {, +        int startPort = 11000 + randomIntBetween(0, 1000);, +        int endPort = startPort + 10;, +        settings = ImmutableSettings.builder().put(settings).put("transport.tcp.port", startPort + "-" + endPort).build();, +, +++ b/src/test/java/org/elasticsearch/test/unit/transport/AbstractSimpleTransportTests.java, +import org.elasticsearch.test.integration.ElasticsearchTestCase;, +public abstract class AbstractSimpleTransportTests extends ElasticsearchTestCase {, +++ b/src/test/java/org/elasticsearch/test/unit/transport/netty/SimpleNettyTransportTests.java, +import org.elasticsearch.common.settings.ImmutableSettings;, +        int startPort = 11000 + randomIntBetween(0, 255);, +        int endPort = startPort + 10;, +        settings = ImmutableSettings.builder().put(settings).put("transport.tcp.port", startPort + "-" + endPort).build();]