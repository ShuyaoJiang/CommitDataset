[+++ b/core/src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java, +                ClearIndicesCacheRequest::new, ThreadPool.Names.MANAGEMENT, false);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java, +                ClearIndicesCacheRequest::new, ThreadPool.Names.MANAGEMENT, false);, +++ b/core/src/main/java/org/elasticsearch/action/support/broadcast/node/TransportBroadcastByNodeAction.java, +        this(settings, actionName, threadPool, clusterService, transportService, actionFilters, indexNameExpressionResolver, request,, +            executor, true);, +    }, +, +    public TransportBroadcastByNodeAction(, +            Settings settings,, +            String actionName,, +            ThreadPool threadPool,, +            ClusterService clusterService,, +            TransportService transportService,, +            ActionFilters actionFilters,, +            IndexNameExpressionResolver indexNameExpressionResolver,, +            Supplier<Request> request,, +            String executor,, +            boolean canTripCircuitBreaker) {, +        transportService.registerRequestHandler(transportNodeBroadcastAction, NodeRequest::new, executor, false, canTripCircuitBreaker,, +            new BroadcastByNodeTransportRequestHandler());, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java, +                ClearIndicesCacheRequest::new, ThreadPool.Names.MANAGEMENT, false);, +++ b/core/src/main/java/org/elasticsearch/action/support/broadcast/node/TransportBroadcastByNodeAction.java, +        this(settings, actionName, threadPool, clusterService, transportService, actionFilters, indexNameExpressionResolver, request,, +            executor, true);, +    }, +, +    public TransportBroadcastByNodeAction(, +            Settings settings,, +            String actionName,, +            ThreadPool threadPool,, +            ClusterService clusterService,, +            TransportService transportService,, +            ActionFilters actionFilters,, +            IndexNameExpressionResolver indexNameExpressionResolver,, +            Supplier<Request> request,, +            String executor,, +            boolean canTripCircuitBreaker) {, +        transportService.registerRequestHandler(transportNodeBroadcastAction, NodeRequest::new, executor, false, canTripCircuitBreaker,, +            new BroadcastByNodeTransportRequestHandler());, +++ b/core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java, +                } else if (context.getParseFieldMatcher().match(currentFieldName, RESCORE_FIELD)) {, +                    rescoreBuilders = new ArrayList<>();, +                    rescoreBuilders.add(RescoreBuilder.parseFromXContent(context));, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java, +                ClearIndicesCacheRequest::new, ThreadPool.Names.MANAGEMENT, false);, +++ b/core/src/main/java/org/elasticsearch/action/support/broadcast/node/TransportBroadcastByNodeAction.java, +        this(settings, actionName, threadPool, clusterService, transportService, actionFilters, indexNameExpressionResolver, request,, +            executor, true);, +    }, +, +    public TransportBroadcastByNodeAction(, +            Settings settings,, +            String actionName,, +            ThreadPool threadPool,, +            ClusterService clusterService,, +            TransportService transportService,, +            ActionFilters actionFilters,, +            IndexNameExpressionResolver indexNameExpressionResolver,, +            Supplier<Request> request,, +            String executor,, +            boolean canTripCircuitBreaker) {, +        transportService.registerRequestHandler(transportNodeBroadcastAction, NodeRequest::new, executor, false, canTripCircuitBreaker,, +            new BroadcastByNodeTransportRequestHandler());, +++ b/core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java, +                } else if (context.getParseFieldMatcher().match(currentFieldName, RESCORE_FIELD)) {, +                    rescoreBuilders = new ArrayList<>();, +                    rescoreBuilders.add(RescoreBuilder.parseFromXContent(context));, +++ b/core/src/test/java/org/elasticsearch/indices/memory/breaker/CircuitBreakerServiceIT.java, +        // clear all caches, we could be very close (or even above) the limit and then we will not be able to reset the breaker settings, +        client().admin().indices().prepareClearCache().setFieldDataCache(true).setQueryCache(true).setRequestCache(true).get();, +, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java, +                ClearIndicesCacheRequest::new, ThreadPool.Names.MANAGEMENT, false);, +++ b/core/src/main/java/org/elasticsearch/action/support/broadcast/node/TransportBroadcastByNodeAction.java, +        this(settings, actionName, threadPool, clusterService, transportService, actionFilters, indexNameExpressionResolver, request,, +            executor, true);, +    }, +, +    public TransportBroadcastByNodeAction(, +            Settings settings,, +            String actionName,, +            ThreadPool threadPool,, +            ClusterService clusterService,, +            TransportService transportService,, +            ActionFilters actionFilters,, +            IndexNameExpressionResolver indexNameExpressionResolver,, +            Supplier<Request> request,, +            String executor,, +            boolean canTripCircuitBreaker) {, +        transportService.registerRequestHandler(transportNodeBroadcastAction, NodeRequest::new, executor, false, canTripCircuitBreaker,, +            new BroadcastByNodeTransportRequestHandler());, +++ b/core/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java, +                } else if (context.getParseFieldMatcher().match(currentFieldName, RESCORE_FIELD)) {, +                    rescoreBuilders = new ArrayList<>();, +                    rescoreBuilders.add(RescoreBuilder.parseFromXContent(context));, +++ b/core/src/test/java/org/elasticsearch/indices/memory/breaker/CircuitBreakerServiceIT.java, +        // clear all caches, we could be very close (or even above) the limit and then we will not be able to reset the breaker settings]