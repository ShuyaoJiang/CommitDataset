[+++ b/src/main/java/org/elasticsearch/index/engine/Engine.java, +    protected final ESLogger logger;, +    protected final EngineConfig engineConfig;, +    public final EngineConfig config() {, +        return engineConfig;, +    }, +, +++ b/src/main/java/org/elasticsearch/index/engine/Engine.java, +    protected final ESLogger logger;, +    protected final EngineConfig engineConfig;, +    public final EngineConfig config() {, +        return engineConfig;, +    }, +, +++ b/src/main/java/org/elasticsearch/index/engine/EngineConfig.java, +     * Sets the GC deletes cycle in milliseconds., +    public void setGcDeletesInMillis(long gcDeletesInMillis) {, +        this.gcDeletesInMillis = gcDeletesInMillis;, +     * Sets if flushed segments should be written as compound file system. Defaults to <code>true</code>, +    public void setCompoundOnFlush(boolean compoundOnFlush) {, +        this.compoundOnFlush = compoundOnFlush;, +    }, +, +    /**, +     * Sets if the engine should be failed in the case of a corrupted index. Defaults to <code>true</code>, +     */, +    public void setFailEngineOnCorruption(boolean failEngineOnCorruption) {, +        this.failEngineOnCorruption = failEngineOnCorruption;, +    }, +, +    /**, +     * Sets if the engine should be failed if a merge error is hit. Defaults to <code>true</code>, +     */, +    public void setFailOnMergeFailure(boolean failOnMergeFailure) {, +        this.failOnMergeFailure = failOnMergeFailure;, +++ b/src/main/java/org/elasticsearch/index/engine/Engine.java, +    protected final ESLogger logger;, +    protected final EngineConfig engineConfig;, +    public final EngineConfig config() {, +        return engineConfig;, +    }, +, +++ b/src/main/java/org/elasticsearch/index/engine/EngineConfig.java, +     * Sets the GC deletes cycle in milliseconds., +    public void setGcDeletesInMillis(long gcDeletesInMillis) {, +        this.gcDeletesInMillis = gcDeletesInMillis;, +     * Sets if flushed segments should be written as compound file system. Defaults to <code>true</code>, +    public void setCompoundOnFlush(boolean compoundOnFlush) {, +        this.compoundOnFlush = compoundOnFlush;, +    }, +, +    /**, +     * Sets if the engine should be failed in the case of a corrupted index. Defaults to <code>true</code>, +     */, +    public void setFailEngineOnCorruption(boolean failEngineOnCorruption) {, +        this.failEngineOnCorruption = failEngineOnCorruption;, +    }, +, +    /**, +     * Sets if the engine should be failed if a merge error is hit. Defaults to <code>true</code>, +     */, +    public void setFailOnMergeFailure(boolean failOnMergeFailure) {, +        this.failOnMergeFailure = failOnMergeFailure;, +++ b/src/main/java/org/elasticsearch/index/engine/InternalEngine.java, +    private void updateIndexWriterSettings() {, +        try {, +            iwc.setRAMBufferSizeMB(engineConfig.getIndexingBufferSize().mbFrac());, +        } catch (AlreadyClosedException ex) {, +            // ignore, +            updateIndexWriterSettings();, +        updateIndexWriterSettings();, +++ b/src/main/java/org/elasticsearch/index/engine/Engine.java, +    protected final ESLogger logger;, +    protected final EngineConfig engineConfig;, +    public final EngineConfig config() {, +        return engineConfig;, +    }, +, +++ b/src/main/java/org/elasticsearch/index/engine/EngineConfig.java, +     * Sets the GC deletes cycle in milliseconds., +    public void setGcDeletesInMillis(long gcDeletesInMillis) {, +        this.gcDeletesInMillis = gcDeletesInMillis;, +     * Sets if flushed segments should be written as compound file system. Defaults to <code>true</code>, +    public void setCompoundOnFlush(boolean compoundOnFlush) {, +        this.compoundOnFlush = compoundOnFlush;, +    }, +, +    /**, +     * Sets if the engine should be failed in the case of a corrupted index. Defaults to <code>true</code>, +     */, +    public void setFailEngineOnCorruption(boolean failEngineOnCorruption) {, +        this.failEngineOnCorruption = failEngineOnCorruption;, +    }, +, +    /**, +     * Sets if the engine should be failed if a merge error is hit. Defaults to <code>true</code>, +     */, +    public void setFailOnMergeFailure(boolean failOnMergeFailure) {, +        this.failOnMergeFailure = failOnMergeFailure;, +++ b/src/main/java/org/elasticsearch/index/engine/InternalEngine.java]