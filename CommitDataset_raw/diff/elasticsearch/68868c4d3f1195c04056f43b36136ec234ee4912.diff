[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/gateway/local/LocalGatewayNodeAllocation.java, +, +        logger.debug("using initial_shards [{}], list_timeout [{}]", initialShards, listTimeout);, +            try {, +                } else if ("quorum-1".equals(initialShards) || "half".equals(initialShards)) {, +                    if (indexMetaData.numberOfReplicas() > 2) {, +                        requiredAllocation = ((1 + indexMetaData.numberOfReplicas()) / 2);, +                    }, +            } catch (Exception e) {, +                logger.warn("[{}][{}] failed to derived initial_shards from value {}, ignore allocation for {}", shard.index(), shard.id(), initialShards, shard);, +            }]