[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java, +                            if (flush.force()) {, +                                // if we force, we might not have committed, we need to check that its the same id, +                                Map<String, String> commitUserData = IndexReader.getCommitUserData(store.directory());, +                                long committedTranslogId = Long.parseLong(commitUserData.get(Translog.TRANSLOG_ID_KEY));, +                                if (committedTranslogId != translogId) {, +                                    // we did not commit anything, revert to the old translog, +                                    translog.revertTransient();, +                                } else {, +                                }, +                            } else {, +                                translog.makeTransientCurrent();, +                            }]