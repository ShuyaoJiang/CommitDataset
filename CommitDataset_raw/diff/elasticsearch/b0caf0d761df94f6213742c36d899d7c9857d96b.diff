[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/shard/recovery/RecoveryTarget.java, +import org.elasticsearch.index.store.support.AbstractStore;, +                // don't delete snapshot file, or the checksums file (note, this is extra protection since the Store won't delete checksum), +                if (!request.snapshotFiles().contains(existingFile) && !AbstractStore.isChecksum(existingFile)) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/shard/recovery/RecoveryTarget.java, +import org.elasticsearch.index.store.support.AbstractStore;, +                // don't delete snapshot file, or the checksums file (note, this is extra protection since the Store won't delete checksum), +                if (!request.snapshotFiles().contains(existingFile) && !AbstractStore.isChecksum(existingFile)) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/store/support/AbstractStore.java, +    public static final boolean isChecksum(String name) {, +        return name.startsWith(CHECKSUMS_PREFIX);, +    }, +, +            if (isChecksum(file)) {, +            if (!isChecksum(name)) {, +            if (isChecksum(name)) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/shard/recovery/RecoveryTarget.java, +import org.elasticsearch.index.store.support.AbstractStore;, +                // don't delete snapshot file, or the checksums file (note, this is extra protection since the Store won't delete checksum), +                if (!request.snapshotFiles().contains(existingFile) && !AbstractStore.isChecksum(existingFile)) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/store/support/AbstractStore.java, +    public static final boolean isChecksum(String name) {, +        return name.startsWith(CHECKSUMS_PREFIX);, +    }, +, +            if (isChecksum(file)) {, +            if (!isChecksum(name)) {, +            if (isChecksum(name)) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/indices/store/TransportNodesListShardStoreMetaData.java, +                if (AbstractStore.isChecksum(file.getName())) {]