[+++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/action/StartDatafeedAction.java, +            // If the persistent task framework wants us to stop then we should do so immediately and, +            // we should wait for an existing datafeed import to realize we want it to stop., +            // Note that this only applied when task cancel is invoked and stop datafeed api doesn't use this., +            // Also stop datafeed api will obey the timeout., +            stop(getReasonCancelled(), TimeValue.ZERO);, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/action/StartDatafeedAction.java, +            // If the persistent task framework wants us to stop then we should do so immediately and, +            // we should wait for an existing datafeed import to realize we want it to stop., +            // Note that this only applied when task cancel is invoked and stop datafeed api doesn't use this., +            // Also stop datafeed api will obey the timeout., +            stop(getReasonCancelled(), TimeValue.ZERO);, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/datafeed/DatafeedManager.java, +    public void stopDatafeed(String datafeedId, String reason, TimeValue timeout) {, +    public void stopAllDatafeeds(String reason) {, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/action/StartDatafeedAction.java, +            // If the persistent task framework wants us to stop then we should do so immediately and, +            // we should wait for an existing datafeed import to realize we want it to stop., +            // Note that this only applied when task cancel is invoked and stop datafeed api doesn't use this., +            // Also stop datafeed api will obey the timeout., +            stop(getReasonCancelled(), TimeValue.ZERO);, +++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/datafeed/DatafeedManager.java, +    public void stopDatafeed(String datafeedId, String reason, TimeValue timeout) {, +    public void stopAllDatafeeds(String reason) {, +++ b/plugin/src/test/java/org/elasticsearch/xpack/ml/datafeed/DatafeedManagerTests.java, +import org.elasticsearch.xpack.ml.action.StopDatafeedAction;, +            task.stop("test", StopDatafeedAction.DEFAULT_TIMEOUT);]