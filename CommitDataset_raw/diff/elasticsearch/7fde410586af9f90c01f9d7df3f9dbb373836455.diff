[+++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +            pom.withXml(removeTransitiveDependencies(project)), +    /** Returns a closure which can be used with a MavenPom for removing transitive dependencies. */, +    private static Closure removeTransitiveDependencies(Project project) {, +        // TODO: remove this when enforcing gradle 2.13+, it now properly handles exclusions, +                // we now know we have something to exclude, so add the exclusion elements, +                Node exclusions = depNode.appendNode('exclusions'), +                for (ResolvedArtifact transitiveArtifact : artifacts) {, +                    ModuleVersionIdentifier transitiveDep = transitiveArtifact.moduleVersion.id, +                    if (transitiveDep.group == groupId && transitiveDep.name == artifactId) {, +                        continue; // don't exclude the dependency itself!, +                    }, +                    Node exclusion = exclusions.appendNode('exclusion'), +                    exclusion.appendNode('groupId', transitiveDep.group), +                    exclusion.appendNode('artifactId', transitiveDep.name), +                }, +                        publication.pom.withXml(removeTransitiveDependencies(project)), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +            pom.withXml(removeTransitiveDependencies(project)), +    /** Returns a closure which can be used with a MavenPom for removing transitive dependencies. */, +    private static Closure removeTransitiveDependencies(Project project) {, +        // TODO: remove this when enforcing gradle 2.13+, it now properly handles exclusions, +                // we now know we have something to exclude, so add the exclusion elements, +                Node exclusions = depNode.appendNode('exclusions'), +                for (ResolvedArtifact transitiveArtifact : artifacts) {, +                    ModuleVersionIdentifier transitiveDep = transitiveArtifact.moduleVersion.id, +                    if (transitiveDep.group == groupId && transitiveDep.name == artifactId) {, +                        continue; // don't exclude the dependency itself!, +                    }, +                    Node exclusion = exclusions.appendNode('exclusion'), +                    exclusion.appendNode('groupId', transitiveDep.group), +                    exclusion.appendNode('artifactId', transitiveDep.name), +                }, +                        publication.pom.withXml(removeTransitiveDependencies(project)), +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]bulk[/\\]RestBulkAction.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]get[/\\]RestMultiGetAction.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]script[/\\]RestDeleteIndexedScriptAction.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]script[/\\]RestPutIndexedScriptAction.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]search[/\\]RestClearScrollAction.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]search[/\\]RestSearchScrollAction.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]suggest[/\\]RestSuggestAction.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]termvectors[/\\]RestTermVectorsAction.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]admin[/\\]indices[/\\]settings[/\\]RestGetSettingsAction.java" checks="LineLength" />, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +            pom.withXml(removeTransitiveDependencies(project)), +    /** Returns a closure which can be used with a MavenPom for removing transitive dependencies. */, +    private static Closure removeTransitiveDependencies(Project project) {, +        // TODO: remove this when enforcing gradle 2.13+, it now properly handles exclusions, +                // we now know we have something to exclude, so add the exclusion elements, +                Node exclusions = depNode.appendNode('exclusions'), +                for (ResolvedArtifact transitiveArtifact : artifacts) {, +                    ModuleVersionIdentifier transitiveDep = transitiveArtifact.moduleVersion.id, +                    if (transitiveDep.group == groupId && transitiveDep.name == artifactId) {, +                        continue; // don't exclude the dependency itself!, +                    }, +                    Node exclusion = exclusions.appendNode('exclusion'), +                    exclusion.appendNode('groupId', transitiveDep.group), +                    exclusion.appendNode('artifactId', transitiveDep.name), +                }, +                        publication.pom.withXml(removeTransitiveDependencies(project)), +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]bulk[/\\]RestBulkAction.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]get[/\\]RestMultiGetAction.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]script[/\\]RestDeleteIndexedScriptAction.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]script[/\\]RestPutIndexedScriptAction.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]search[/\\]RestClearScrollAction.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]search[/\\]RestSearchScrollAction.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]suggest[/\\]RestSuggestAction.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]termvectors[/\\]RestTermVectorsAction.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]admin[/\\]indices[/\\]settings[/\\]RestGetSettingsAction.java" checks="LineLength" />, +++ b/core/src/main/java/org/apache/lucene/search/vectorhighlight/CustomFieldQuery.java, +        if (sourceQuery instanceof SpanTermQuery) {, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +            pom.withXml(removeTransitiveDependencies(project)), +    /** Returns a closure which can be used with a MavenPom for removing transitive dependencies. */, +    private static Closure removeTransitiveDependencies(Project project) {, +        // TODO: remove this when enforcing gradle 2.13+, it now properly handles exclusions, +                // we now know we have something to exclude, so add the exclusion elements, +                Node exclusions = depNode.appendNode('exclusions'), +                for (ResolvedArtifact transitiveArtifact : artifacts) {, +                    ModuleVersionIdentifier transitiveDep = transitiveArtifact.moduleVersion.id, +                    if (transitiveDep.group == groupId && transitiveDep.name == artifactId) {, +                        continue; // don't exclude the dependency itself!, +                    }, +                    Node exclusion = exclusions.appendNode('exclusion'), +                    exclusion.appendNode('groupId', transitiveDep.group), +                    exclusion.appendNode('artifactId', transitiveDep.name), +                }, +                        publication.pom.withXml(removeTransitiveDependencies(project)), +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]bulk[/\\]RestBulkAction.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]get[/\\]RestMultiGetAction.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]script[/\\]RestDeleteIndexedScriptAction.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]script[/\\]RestPutIndexedScriptAction.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]search[/\\]RestClearScrollAction.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]search[/\\]RestSearchScrollAction.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]suggest[/\\]RestSuggestAction.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]termvectors[/\\]RestTermVectorsAction.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]rest[/\\]action[/\\]admin[/\\]indices[/\\]settings[/\\]RestGetSettingsAction.java" checks="LineLength" />]