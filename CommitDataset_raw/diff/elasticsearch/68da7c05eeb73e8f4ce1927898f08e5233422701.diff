[+++ b/NOTICE.txt, +Copyright 2009-2015 Elasticsearch, +++ b/NOTICE.txt, +Copyright 2009-2015 Elasticsearch, +++ b/README.textile, +Copyright 2009-2015 Elasticsearch <http://www.elasticsearch.org>, +++ b/NOTICE.txt, +Copyright 2009-2015 Elasticsearch, +++ b/README.textile, +Copyright 2009-2015 Elasticsearch <http://www.elasticsearch.org>, +++ b/dev-tools/build_release.py, +# Checks the jar files in each package, +# Barfs if any of the package jar files differ, +def check_artifacts_for_same_jars(artifacts):, +  jars = [], +  for file in artifacts:, +    if file.endswith('.zip'):, +      jars.append(subprocess.check_output("unzip -l %s  | grep '\.jar$' | awk -F '/' '{ print $NF }' | sort" % file, shell=True)), +    if file.endswith('.tar.gz'):, +      jars.append(subprocess.check_output("tar tzvf %s  | grep '\.jar$' | awk -F '/' '{ print $NF }' | sort" % file, shell=True)), +    if file.endswith('.rpm'):, +      jars.append(subprocess.check_output("rpm -pqli %s | grep '\.jar$' | awk -F '/' '{ print $NF }' | sort" % file, shell=True)), +    if file.endswith('.deb'):, +      jars.append(subprocess.check_output("dpkg -c %s   | grep '\.jar$' | awk -F '/' '{ print $NF }' | sort" % file, shell=True)), +  if len(set(jars)) != 1:, +    raise RuntimeError('JAR contents of packages are not the same, please check the package contents. Use [unzip -l], [tar tzvf], [dpkg -c], [rpm -pqli] to inspect'), +, +      print('Checking if all artifacts contain the same jars'), +      check_artifacts_for_same_jars(artifacts), +++ b/NOTICE.txt, +Copyright 2009-2015 Elasticsearch, +++ b/README.textile, +Copyright 2009-2015 Elasticsearch <http://www.elasticsearch.org>, +++ b/dev-tools/build_release.py, +# Checks the jar files in each package, +# Barfs if any of the package jar files differ, +def check_artifacts_for_same_jars(artifacts):, +  jars = [], +  for file in artifacts:, +    if file.endswith('.zip'):, +      jars.append(subprocess.check_output("unzip -l %s  | grep '\.jar$' | awk -F '/' '{ print $NF }' | sort" % file, shell=True)), +    if file.endswith('.tar.gz'):, +      jars.append(subprocess.check_output("tar tzvf %s  | grep '\.jar$' | awk -F '/' '{ print $NF }' | sort" % file, shell=True)), +    if file.endswith('.rpm'):, +      jars.append(subprocess.check_output("rpm -pqli %s | grep '\.jar$' | awk -F '/' '{ print $NF }' | sort" % file, shell=True)), +    if file.endswith('.deb'):, +      jars.append(subprocess.check_output("dpkg -c %s   | grep '\.jar$' | awk -F '/' '{ print $NF }' | sort" % file, shell=True)), +  if len(set(jars)) != 1:, +    raise RuntimeError('JAR contents of packages are not the same, please check the package contents. Use [unzip -l], [tar tzvf], [dpkg -c], [rpm -pqli] to inspect'), +, +      print('Checking if all artifacts contain the same jars'), +      check_artifacts_for_same_jars(artifacts), +++ b/dev-tools/create-bwc-index.py, +      },, +      '_boost': {, +        'null_value': 2.0, +    mappings['custom_formats'] = {, +      'properties': {, +        'string_with_custom_postings': {, +          'type': 'string',, +          'postings_format': 'Lucene41', +        },, +        'long_with_custom_doc_values': {, +          'type': 'long',, +          'doc_values_format': 'Lucene42', +        }, +      }, +    }, +  client.snapshot.delete_repository(repository='test_repo'), +++ b/NOTICE.txt, +Copyright 2009-2015 Elasticsearch, +++ b/README.textile, +Copyright 2009-2015 Elasticsearch <http://www.elasticsearch.org>, +++ b/dev-tools/build_release.py, +# Checks the jar files in each package, +# Barfs if any of the package jar files differ, +def check_artifacts_for_same_jars(artifacts):, +  jars = [], +  for file in artifacts:, +    if file.endswith('.zip'):, +      jars.append(subprocess.check_output("unzip -l %s  | grep '\.jar$' | awk -F '/' '{ print $NF }' | sort" % file, shell=True)), +    if file.endswith('.tar.gz'):, +      jars.append(subprocess.check_output("tar tzvf %s  | grep '\.jar$' | awk -F '/' '{ print $NF }' | sort" % file, shell=True)), +    if file.endswith('.rpm'):, +      jars.append(subprocess.check_output("rpm -pqli %s | grep '\.jar$' | awk -F '/' '{ print $NF }' | sort" % file, shell=True)), +    if file.endswith('.deb'):, +      jars.append(subprocess.check_output("dpkg -c %s   | grep '\.jar$' | awk -F '/' '{ print $NF }' | sort" % file, shell=True)), +  if len(set(jars)) != 1:, +    raise RuntimeError('JAR contents of packages are not the same, please check the package contents. Use [unzip -l], [tar tzvf], [dpkg -c], [rpm -pqli] to inspect'), +, +      print('Checking if all artifacts contain the same jars'), +      check_artifacts_for_same_jars(artifacts), +++ b/dev-tools/create-bwc-index.py, +      },, +      '_boost': {, +        'null_value': 2.0, +    mappings['custom_formats'] = {, +      'properties': {, +        'string_with_custom_postings': {, +          'type': 'string',]