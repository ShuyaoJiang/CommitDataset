[+++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/client/Client.java, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/client/Client.java, +++ b/core/src/main/java/org/elasticsearch/client/IndicesAdminClient.java, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/client/Client.java, +++ b/core/src/main/java/org/elasticsearch/client/IndicesAdminClient.java, +++ b/core/src/main/java/org/elasticsearch/client/Requests.java, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/client/Client.java, +++ b/core/src/main/java/org/elasticsearch/client/IndicesAdminClient.java, +++ b/core/src/main/java/org/elasticsearch/client/Requests.java, +++ b/core/src/main/java/org/elasticsearch/client/support/AbstractClient.java, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/client/Client.java, +++ b/core/src/main/java/org/elasticsearch/client/IndicesAdminClient.java, +++ b/core/src/main/java/org/elasticsearch/client/Requests.java, +++ b/core/src/main/java/org/elasticsearch/client/support/AbstractClient.java, +++ b/core/src/main/java/org/elasticsearch/rest/action/cat/RestCountAction.java, +import org.elasticsearch.action.search.SearchRequest;, +import org.elasticsearch.action.search.SearchResponse;, +import org.elasticsearch.search.builder.SearchSourceBuilder;, +        SearchRequest countRequest = new SearchRequest(indices);, +        SearchSourceBuilder searchSourceBuilder = new SearchSourceBuilder().size(0);, +        countRequest.source(searchSourceBuilder);, +            searchSourceBuilder.query(RestActions.getQueryContent(new BytesArray(source), context));, +                searchSourceBuilder.query(queryBuilder);, +        client.search(countRequest, new RestResponseListener<SearchResponse>(channel) {, +            public RestResponse buildResponse(SearchResponse countResponse) throws Exception {, +    private Table buildTable(RestRequest request, SearchResponse response) {, +        table.addCell(response.getHits().totalHits());, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/client/Client.java, +++ b/core/src/main/java/org/elasticsearch/client/IndicesAdminClient.java, +++ b/core/src/main/java/org/elasticsearch/client/Requests.java, +++ b/core/src/main/java/org/elasticsearch/client/support/AbstractClient.java, +++ b/core/src/main/java/org/elasticsearch/rest/action/cat/RestCountAction.java, +import org.elasticsearch.action.search.SearchRequest;, +import org.elasticsearch.action.search.SearchResponse;, +import org.elasticsearch.search.builder.SearchSourceBuilder;, +        SearchRequest countRequest = new SearchRequest(indices);, +        SearchSourceBuilder searchSourceBuilder = new SearchSourceBuilder().size(0);, +        countRequest.source(searchSourceBuilder);, +            searchSourceBuilder.query(RestActions.getQueryContent(new BytesArray(source), context));, +                searchSourceBuilder.query(queryBuilder);, +        client.search(countRequest, new RestResponseListener<SearchResponse>(channel) {, +            public RestResponse buildResponse(SearchResponse countResponse) throws Exception {, +    private Table buildTable(RestRequest request, SearchResponse response) {, +        table.addCell(response.getHits().totalHits());, +++ b/core/src/main/java/org/elasticsearch/rest/action/count/RestCountAction.java, +import org.elasticsearch.action.search.SearchRequest;, +import org.elasticsearch.action.search.SearchResponse;, +import org.elasticsearch.rest.*;, +import org.elasticsearch.search.builder.SearchSourceBuilder;, +        SearchRequest countRequest = new SearchRequest(Strings.splitStringByCommaToArray(request.param("index")));, +        SearchSourceBuilder searchSourceBuilder = new SearchSourceBuilder().size(0);, +        countRequest.source(searchSourceBuilder);, +            searchSourceBuilder.query(RestActions.getQueryContent(restContent, context));, +                searchSourceBuilder.query(queryBuilder);, +            searchSourceBuilder.minScore(minScore);]