[+++ b/x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/expression/predicate/In.java, +        return Expressions.foldable(children()) ||, +            (Expressions.foldable(list) && list().stream().allMatch(e -> e.dataType() == DataType.NULL));, +        if (value.dataType() == DataType.NULL) {, +            return null;, +        }, +        if (list.size() == 1 && list.get(0).dataType() == DataType.NULL) {, +            return false;, +        }, +, +++ b/x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/expression/predicate/In.java, +        return Expressions.foldable(children()) ||, +            (Expressions.foldable(list) && list().stream().allMatch(e -> e.dataType() == DataType.NULL));, +        if (value.dataType() == DataType.NULL) {, +            return null;, +        }, +        if (list.size() == 1 && list.get(0).dataType() == DataType.NULL) {, +            return false;, +        }, +, +++ b/x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/querydsl/query/TermsQuery.java, +import java.util.Collections;, +import java.util.Set;, +    private final Set<Object> values;, +        if (values.isEmpty()) {, +            this.values = Collections.emptySet();, +        } else {, +        }, +++ b/x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/expression/predicate/In.java, +        return Expressions.foldable(children()) ||, +            (Expressions.foldable(list) && list().stream().allMatch(e -> e.dataType() == DataType.NULL));, +        if (value.dataType() == DataType.NULL) {, +            return null;, +        }, +        if (list.size() == 1 && list.get(0).dataType() == DataType.NULL) {, +            return false;, +        }, +, +++ b/x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/querydsl/query/TermsQuery.java, +import java.util.Collections;, +import java.util.Set;, +    private final Set<Object> values;, +        if (values.isEmpty()) {, +            this.values = Collections.emptySet();, +        } else {, +        }, +++ b/x-pack/plugin/sql/src/test/java/org/elasticsearch/xpack/sql/optimizer/OptimizerTests.java, +    private static final Literal NULL = L(null);, +    public void testConstantFoldingIn_RightValueIsNull() {, +        In in = new In(EMPTY, getFieldAttribute(), Arrays.asList(NULL, NULL));, +        Literal result= (Literal) new ConstantFolding().rule(in);, +        assertEquals(false, result.value());, +    }, +, +    public void testConstantFoldingIn_LeftValueIsNull() {, +        In in = new In(EMPTY, NULL, Arrays.asList(ONE, TWO, THREE));, +        Literal result= (Literal) new ConstantFolding().rule(in);, +        assertNull(result.value());, +    }, +, +++ b/x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/expression/predicate/In.java, +        return Expressions.foldable(children()) ||, +            (Expressions.foldable(list) && list().stream().allMatch(e -> e.dataType() == DataType.NULL));, +        if (value.dataType() == DataType.NULL) {, +            return null;, +        }, +        if (list.size() == 1 && list.get(0).dataType() == DataType.NULL) {, +            return false;, +        }, +, +++ b/x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/querydsl/query/TermsQuery.java, +import java.util.Collections;, +import java.util.Set;, +    private final Set<Object> values;, +        if (values.isEmpty()) {, +            this.values = Collections.emptySet();, +        } else {, +        }, +++ b/x-pack/plugin/sql/src/test/java/org/elasticsearch/xpack/sql/optimizer/OptimizerTests.java, +    private static final Literal NULL = L(null);, +    public void testConstantFoldingIn_RightValueIsNull() {, +        In in = new In(EMPTY, getFieldAttribute(), Arrays.asList(NULL, NULL));, +        Literal result= (Literal) new ConstantFolding().rule(in);, +        assertEquals(false, result.value());, +    }, +, +    public void testConstantFoldingIn_LeftValueIsNull() {, +        In in = new In(EMPTY, NULL, Arrays.asList(ONE, TWO, THREE));, +        Literal result= (Literal) new ConstantFolding().rule(in);, +        assertNull(result.value());, +    }, +, +++ b/x-pack/plugin/sql/src/test/java/org/elasticsearch/xpack/sql/planner/QueryFolderTests.java, +    public void testFoldingToLocalExecWithProject_FoldableIn() {, +        PhysicalPlan p = plan("SELECT keyword FROM test WHERE int IN (null, null)");, +        assertEquals(LocalExec.class, p.getClass());, +        LocalExec le = (LocalExec) p;, +        assertEquals(EmptyExecutable.class, le.executable().getClass());, +        EmptyExecutable ee = (EmptyExecutable) le.executable();, +        assertEquals(1, ee.output().size());]