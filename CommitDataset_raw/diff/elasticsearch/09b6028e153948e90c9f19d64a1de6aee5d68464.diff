[+++ b/docs/build.gradle, +                  row:, +                    type: long, +                  number:, +                    type: long, +                  sold:, +                    type: boolean, +            {"index":{"_id": "1"}}, +            {"theatre": "Skyline", "cost": 37, "row": 1, "number": 7, "sold": false}, +            {"index":{"_id": "2"}}, +            {"theatre": "Graye", "cost": 30, "row": 3, "number": 5, "sold": false}, +            {"index":{"_id": "3"}}, +            {"theatre": "Graye", "cost": 33, "row": 2, "number": 6, "sold": false}, +            {"index":{"_id": "4"}}, +            {"theatre": "Skyline", "cost": 20, "row": 5, "number": 2, "sold": false}''', +++ b/docs/build.gradle, +                  row:, +                    type: long, +                  number:, +                    type: long, +                  sold:, +                    type: boolean, +            {"index":{"_id": "1"}}, +            {"theatre": "Skyline", "cost": 37, "row": 1, "number": 7, "sold": false}, +            {"index":{"_id": "2"}}, +            {"theatre": "Graye", "cost": 30, "row": 3, "number": 5, "sold": false}, +            {"index":{"_id": "3"}}, +            {"theatre": "Graye", "cost": 33, "row": 2, "number": 6, "sold": false}, +            {"index":{"_id": "4"}}, +            {"theatre": "Skyline", "cost": 20, "row": 5, "number": 2, "sold": false}''', +++ b/docs/painless/painless-contexts/painless-update-by-query-context.asciidoc, +, +*Example*, +, +To run this example, first follow the steps in, +<<painless-context-examples, context examples>>., +, +The following query finds all seats in a specific section that have not been, +sold and lowers the price by 2:, +, +[source,js], +--------------------------------------------------, +POST /seats/_update_by_query, +{, +    "query": {, +        "bool": {, +            "filter": [, +            {, +                "range": {, +                    "row": {, +                        "lte": 3, +                    }, +                }, +            },, +            {, +                "match": {, +                    "sold": false, +                }, +            }], +        }, +    },, +    "script": {, +        "source": "ctx._source.cost -= params.discount",, +        "lang": "painless",, +        "params": {, +            "discount": 2, +        }, +    }, +}, +--------------------------------------------------, +// CONSOLE, +// TEST[setup:seats], +++ b/docs/build.gradle, +                  row:, +                    type: long, +                  number:, +                    type: long, +                  sold:, +                    type: boolean, +            {"index":{"_id": "1"}}, +            {"theatre": "Skyline", "cost": 37, "row": 1, "number": 7, "sold": false}, +            {"index":{"_id": "2"}}, +            {"theatre": "Graye", "cost": 30, "row": 3, "number": 5, "sold": false}, +            {"index":{"_id": "3"}}, +            {"theatre": "Graye", "cost": 33, "row": 2, "number": 6, "sold": false}, +            {"index":{"_id": "4"}}, +            {"theatre": "Skyline", "cost": 20, "row": 5, "number": 2, "sold": false}''', +++ b/docs/painless/painless-contexts/painless-update-by-query-context.asciidoc, +, +*Example*, +, +To run this example, first follow the steps in, +<<painless-context-examples, context examples>>., +, +The following query finds all seats in a specific section that have not been, +sold and lowers the price by 2:, +, +[source,js], +--------------------------------------------------, +POST /seats/_update_by_query]