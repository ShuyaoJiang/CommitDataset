[+++ b/docs/reference/commands/index.asciidoc, +* <<node-tool>>, +include::node-tool.asciidoc[], +++ b/docs/reference/commands/index.asciidoc, +* <<node-tool>>, +include::node-tool.asciidoc[], +++ b/docs/reference/commands/node-tool.asciidoc, +[[node-tool]], +== elasticsearch-node, +, +The `elasticsearch-node` command enables you to perform unsafe operations that, +risk data loss but which may help to recover some data in a disaster., +, +[float], +=== Synopsis, +, +[source,shell], +--------------------------------------------------, +bin/elasticsearch-node unsafe-bootstrap|detach-cluster, +  [--ordinal <Integer>] [-E <KeyValuePair>], +  [-h, --help] ([-s, --silent] | [-v, --verbose]), +--------------------------------------------------, +, +[float], +=== Description, +, +Sometimes {es} nodes are temporarily stopped, perhaps because of the need to, +perform some maintenance activity or perhaps because of a hardware failure., +After you resolve the temporary condition and restart the node,, +it will rejoin the cluster and continue normally. Depending on your, +configuration, your cluster may be able to remain completely available even, +while one or more of its nodes are stopped., +, +Sometimes it might not be possible to restart a node after it has stopped. For, +example, the node's host may suffer from a hardware problem that cannot be, +repaired. If the cluster is still available then you can start up a fresh node, +on another host and {es} will bring this node into the cluster in place of the, +failed node., +, +Each node stores its data in the data directories defined by the, +<<path-settings,`path.data` setting>>. This means that in a disaster you can, +also restart a node by moving its data directories to another host, presuming, +that those data directories can be recovered from the faulty host., +, +{es} <<modules-discovery-quorums,requires a response from a majority of the, +master-eligible nodes>> in order to elect a master and to update the cluster, +state. This means that if you have three master-eligible nodes then the cluster, +will remain available even if one of them has failed. However if two of the, +three master-eligible nodes fail then the cluster will be unavailable until at, +least one of them is restarted., +, +In very rare circumstances it may not be possible to restart enough nodes to, +restore the cluster's availability. If such a disaster occurs, you should, +build a new cluster from a recent snapshot and re-import any data that was, +ingested since that snapshot was taken., +, +However, if the disaster is serious enough then it may not be possible to, +recover from a recent snapshot either. Unfortunately in this case there is no, +way forward that does not risk data loss, but it may be possible to use the, +`elasticsearch-node` tool to construct a new cluster that contains some of the, +data from the failed cluster., +, +This tool has two modes:, +, +* `elastisearch-node unsafe-bootstap` can be used if there is at least one, +  remaining master-eligible node. It forces one of the remaining nodes to form, +  a brand-new cluster on its own, using its local copy of the cluster metadata., +  This is known as _unsafe cluster bootstrapping_., +, +* `elastisearch-node detach-cluster` enables you to move nodes from one cluster, +  to another. This can be used to move nodes into the new cluster created with, +  the `elastisearch-node unsafe-bootstap` command. If unsafe cluster bootstrapping was not, +  possible, it also enables you to, +  move nodes into a brand-new cluster., +, +[[node-tool-unsafe-bootstrap]], +[float], +==== Unsafe cluster bootstrapping, +, +If there is at least one remaining master-eligible node, but it is not possible, +to restart a majority of them, then the `elasticsearch-node unsafe-bootstrap`, +command will unsafely override the cluster's <<modules-discovery-voting,voting, +configuration>> as if performing another, +<<modules-discovery-bootstrap-cluster,cluster bootstrapping process>>. , +The target node can then form a new cluster on its own by using, +the cluster metadata held locally on the target node. , +, +[WARNING], +These steps can lead to arbitrary data loss since the target node may not hold the latest cluster, +metadata, and this out-of-date metadata may make it impossible to use some or, +all of the indices in the cluster., +, +Since unsafe bootstrapping forms a new cluster containing a single node, once, +you have run it you must use the <<node-tool-detach-cluster,`elasticsearch-node, +detach-cluster` tool>> to migrate any other surviving nodes from the failed, +cluster into this new cluster., +, +When you run the `elasticsearch-node unsafe-bootstrap` tool it will analyse the, +state of the node and ask for confirmation before taking any action. Before, +asking for confirmation it reports the term and version of the cluster state on]