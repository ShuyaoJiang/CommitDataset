[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java, +            boolean emptyDoc = false;, +            if (token == XContentParser.Token.END_OBJECT) {, +                // empty doc, we can handle it..., +                emptyDoc = true;, +            } else if (token != XContentParser.Token.FIELD_NAME) {, +            if (type.equals(parser.currentName())) {, +            if (!emptyDoc) {, +            }]