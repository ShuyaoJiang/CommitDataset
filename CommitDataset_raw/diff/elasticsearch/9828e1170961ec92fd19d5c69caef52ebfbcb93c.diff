[+++ b/server/src/main/java/org/elasticsearch/action/admin/indices/stats/IndicesStatsRequest.java, +     * Returns the underlying stats flags., +     */, +    public CommonStatsFlags flags() {, +        return flags;, +    }, +, +    /**, +     * Sets the underlying stats flags., +     */, +    public IndicesStatsRequest flags(CommonStatsFlags flags) {, +        this.flags = flags;, +        return this;, +    }, +, +    /**, +++ b/server/src/main/java/org/elasticsearch/action/admin/indices/stats/IndicesStatsRequest.java, +     * Returns the underlying stats flags., +     */, +    public CommonStatsFlags flags() {, +        return flags;, +    }, +, +    /**, +     * Sets the underlying stats flags., +     */, +    public IndicesStatsRequest flags(CommonStatsFlags flags) {, +        this.flags = flags;, +        return this;, +    }, +, +    /**, +++ b/server/src/main/java/org/elasticsearch/action/admin/indices/stats/TransportIndicesStatsAction.java, +        CommonStats commonStats = new CommonStats(indicesService.getIndicesQueryCache(), indexShard, request.flags());, +        return new ShardStats(indexShard.routingEntry(), indexShard.shardPath(), commonStats,, +            indexShard.commitStats(), indexShard.seqNoStats());, +++ b/server/src/main/java/org/elasticsearch/action/admin/indices/stats/IndicesStatsRequest.java, +     * Returns the underlying stats flags., +     */, +    public CommonStatsFlags flags() {, +        return flags;, +    }, +, +    /**, +     * Sets the underlying stats flags., +     */, +    public IndicesStatsRequest flags(CommonStatsFlags flags) {, +        this.flags = flags;, +        return this;, +    }, +, +    /**, +++ b/server/src/main/java/org/elasticsearch/action/admin/indices/stats/TransportIndicesStatsAction.java, +        CommonStats commonStats = new CommonStats(indicesService.getIndicesQueryCache(), indexShard, request.flags());, +        return new ShardStats(indexShard.routingEntry(), indexShard.shardPath(), commonStats,, +            indexShard.commitStats(), indexShard.seqNoStats());, +++ b/server/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndicesStatsAction.java, +import org.elasticsearch.action.admin.indices.stats.CommonStatsFlags;, +import org.elasticsearch.action.admin.indices.stats.CommonStatsFlags.Flag;, +        Map<String, Consumer<IndicesStatsRequest>> metrics = new HashMap<>();, +        for (Flag flag : CommonStatsFlags.Flag.values()) {, +            metrics.put(flag.getRestName(), m -> m.flags().set(flag, true));, +        }]