[+++ b/core/src/main/java/org/elasticsearch/cluster/routing/allocation/allocator/BalancedShardsAllocator.java, +        private final float theta0;, +        private final float theta1;, +            theta0 = shardBalance / sum;, +            theta1 = indexBalance / sum;, +            return theta0 * weightShard + theta1 * weightIndex;]