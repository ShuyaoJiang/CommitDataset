[+++ b/server/src/main/java/org/elasticsearch/index/query/QueryShardContext.java, +    public static final String TYPES_DEPRECATION_MESSAGE = "[types removal] Using the _type field " +, +        "in queries and aggregations is deprecated, prefer to use a field instead.";, +++ b/server/src/main/java/org/elasticsearch/index/query/QueryShardContext.java, +    public static final String TYPES_DEPRECATION_MESSAGE = "[types removal] Using the _type field " +, +        "in queries and aggregations is deprecated, prefer to use a field instead.";, +++ b/server/src/test/java/org/elasticsearch/search/aggregations/support/ValuesSourceConfigTests.java, +import org.elasticsearch.index.mapper.TypeFieldMapper;, +    public void testTypeFieldDeprecation() {, +        IndexService indexService = createIndex("index", Settings.EMPTY, "type");, +        try (Searcher searcher = indexService.getShard(0).acquireSearcher("test")) {, +            QueryShardContext context = indexService.newQueryShardContext(0, searcher.reader(), () -> 42L, null);, +, +            ValuesSourceConfig<ValuesSource.Bytes> config = ValuesSourceConfig.resolve(, +                context, null, TypeFieldMapper.NAME, null, null, null, null);, +            assertWarnings(QueryShardContext.TYPES_DEPRECATION_MESSAGE);, +        }, +    }]