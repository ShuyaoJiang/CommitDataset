[+++ b/core/src/test/java/org/elasticsearch/common/settings/SettingsTests.java, +import java.io.StringBufferInputStream;, +import java.io.StringReader;, +    public void testYamlLegacyList() throws IOException {, +        Settings settings = Settings.builder(), +            .loadFromStream("foo.yml", new ByteArrayInputStream("foo.bar.baz.0: 1\nfoo.bar.baz.1: 2".getBytes(StandardCharsets.UTF_8)),, +                false).build();, +        assertThat(settings.getAsArray("foo.bar.baz").length, equalTo(2));, +        assertThat(settings.getAsArray("foo.bar.baz")[0], equalTo("1"));, +        assertThat(settings.getAsArray("foo.bar.baz")[1], equalTo("2"));, +    }, +]