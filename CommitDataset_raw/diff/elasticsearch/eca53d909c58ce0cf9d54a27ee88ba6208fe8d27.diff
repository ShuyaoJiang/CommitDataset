[+++ b/core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java, +        Objects.requireNonNull(request, "'request' must not be null");, +++ b/core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java, +        Objects.requireNonNull(request, "'request' must not be null");, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexUpgradeService.java, +     * Elasticsearch 5.0 no longer supports indices with pre Lucene v5.0 (Elasticsearch v2.0.0.beta1) segments. All indices, +     * that were created before Elasticsearch v2.0.0.beta1 should be reindexed in Elasticsearch 2.x, +     * before they can be opened by this version of elasticsearch.     */, +            throw new IllegalStateException("The index [" + indexMetaData.getIndex() + "] was created before v2.0.0.beta1.", +                    + " It should be reindexed in Elasticsearch 2.x before upgrading to " + Version.CURRENT + ".");, +++ b/core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java, +        Objects.requireNonNull(request, "'request' must not be null");, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexUpgradeService.java, +     * Elasticsearch 5.0 no longer supports indices with pre Lucene v5.0 (Elasticsearch v2.0.0.beta1) segments. All indices, +     * that were created before Elasticsearch v2.0.0.beta1 should be reindexed in Elasticsearch 2.x, +     * before they can be opened by this version of elasticsearch.     */, +            throw new IllegalStateException("The index [" + indexMetaData.getIndex() + "] was created before v2.0.0.beta1.", +                    + " It should be reindexed in Elasticsearch 2.x before upgrading to " + Version.CURRENT + ".");, +++ b/core/src/test/java/org/elasticsearch/action/bulk/BulkRequestTests.java, +, +    public void testCannotAddNullRequests() throws Exception {, +        BulkRequest bulkRequest = new BulkRequest();, +        expectThrows(NullPointerException.class, () -> bulkRequest.add((IndexRequest) null));, +        expectThrows(NullPointerException.class, () -> bulkRequest.add((UpdateRequest) null));, +        expectThrows(NullPointerException.class, () -> bulkRequest.add((DeleteRequest) null));, +    }, +++ b/core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java, +        Objects.requireNonNull(request, "'request' must not be null");, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexUpgradeService.java, +     * Elasticsearch 5.0 no longer supports indices with pre Lucene v5.0 (Elasticsearch v2.0.0.beta1) segments. All indices, +     * that were created before Elasticsearch v2.0.0.beta1 should be reindexed in Elasticsearch 2.x, +     * before they can be opened by this version of elasticsearch.     */, +            throw new IllegalStateException("The index [" + indexMetaData.getIndex() + "] was created before v2.0.0.beta1.", +                    + " It should be reindexed in Elasticsearch 2.x before upgrading to " + Version.CURRENT + ".");, +++ b/core/src/test/java/org/elasticsearch/action/bulk/BulkRequestTests.java, +, +    public void testCannotAddNullRequests() throws Exception {, +        BulkRequest bulkRequest = new BulkRequest();, +        expectThrows(NullPointerException.class, () -> bulkRequest.add((IndexRequest) null));, +        expectThrows(NullPointerException.class, () -> bulkRequest.add((UpdateRequest) null));, +        expectThrows(NullPointerException.class, () -> bulkRequest.add((DeleteRequest) null));, +    }, +++ b/docs/reference/search/request/search-after.asciidoc, +GET twitter/tweet/_search, +    "size": 10,, +        {"date": "asc"},, +// CONSOLE, +// TEST[setup:twitter], +GET twitter/tweet/_search, +    "size": 10,, +    "search_after": [1463538857, "tweet#654323"],, +        {"date": "asc"},, +// CONSOLE, +// TEST[setup:twitter], +++ b/core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java, +        Objects.requireNonNull(request, "'request' must not be null");, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexUpgradeService.java, +     * Elasticsearch 5.0 no longer supports indices with pre Lucene v5.0 (Elasticsearch v2.0.0.beta1) segments. All indices, +     * that were created before Elasticsearch v2.0.0.beta1 should be reindexed in Elasticsearch 2.x, +     * before they can be opened by this version of elasticsearch.     */, +            throw new IllegalStateException("The index [" + indexMetaData.getIndex() + "] was created before v2.0.0.beta1.", +                    + " It should be reindexed in Elasticsearch 2.x before upgrading to " + Version.CURRENT + ".");, +++ b/core/src/test/java/org/elasticsearch/action/bulk/BulkRequestTests.java, +, +    public void testCannotAddNullRequests() throws Exception {, +        BulkRequest bulkRequest = new BulkRequest();, +        expectThrows(NullPointerException.class, () -> bulkRequest.add((IndexRequest) null));, +        expectThrows(NullPointerException.class, () -> bulkRequest.add((UpdateRequest) null));, +        expectThrows(NullPointerException.class, () -> bulkRequest.add((DeleteRequest) null));, +    }, +++ b/docs/reference/search/request/search-after.asciidoc, +GET twitter/tweet/_search, +    "size": 10,, +        {"date": "asc"},, +// CONSOLE, +// TEST[setup:twitter], +GET twitter/tweet/_search, +    "size": 10,, +    "search_after": [1463538857, "tweet#654323"],, +        {"date": "asc"},, +// CONSOLE, +// TEST[setup:twitter], +++ b/docs/reference/search/request/sort.asciidoc, +Assuming the following index mapping:, +, +PUT /my_index, +{, +    "mappings": {, +        "my_type": {, +            "properties": {, +                "post_date": { "type": "date" },, +                "user": { , +                    "type": "keyword", +                },, +                "name": {, +                    "type": "keyword", +                },, +                "age": { "type": "integer" }, +            }, +        }]