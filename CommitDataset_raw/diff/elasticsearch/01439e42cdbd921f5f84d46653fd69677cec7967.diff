[+++ b/plugin/src/main/java/org/elasticsearch/license/plugin/core/LicensesService.java, +import org.elasticsearch.common.collect.Iterables;, +        for (final ListenerHolder listenerHolder : Iterables.concat(registeredListeners, pendingListeners)) {, +            if (listenerHolder.feature.equals(feature)) {, +                throw new IllegalStateException("feature: [" + feature + "] has been already registered");, +            }, +        }]