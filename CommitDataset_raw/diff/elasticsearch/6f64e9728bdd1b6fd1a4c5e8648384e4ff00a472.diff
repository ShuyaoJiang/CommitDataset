[+++ b/modules/reindex/src/test/java/org/elasticsearch/index/reindex/CancelTests.java, +import org.apache.logging.log4j.Logger;, +import org.elasticsearch.common.logging.Loggers;, +        logger.debug("chose to modify [{}] out of [{}] docs", numModifiedDocs, numDocs);, +        boolean blocked = awaitBusy(() -> ALLOWED_OPERATIONS.hasQueuedThreads() && ALLOWED_OPERATIONS.availablePermits() == 0);, +        assertTrue("updates blocked", blocked);, +        // Cancel the request while the action is blocked by the indexing operation listeners., +        private static final Logger log = Loggers.getLogger(CancelTests.class);, +                log.debug("checking");, +                    log.debug("passed");]