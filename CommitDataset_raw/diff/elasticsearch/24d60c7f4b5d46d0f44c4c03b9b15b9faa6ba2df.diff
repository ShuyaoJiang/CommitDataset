[+++ b/modules/parent-join/src/test/java/org/elasticsearch/join/query/ParentChildTestCase.java, +++ b/modules/parent-join/src/test/java/org/elasticsearch/join/query/ParentChildTestCase.java, +++ b/server/src/main/java/org/elasticsearch/index/engine/LuceneChangesSnapshot.java, +        final Query rangeQuery = LongPoint.newRangeQuery(SeqNoFieldMapper.NAME, Math.max(fromSeqNo, lastSeenSeqNo), toSeqNo);, +++ b/modules/parent-join/src/test/java/org/elasticsearch/join/query/ParentChildTestCase.java, +++ b/server/src/main/java/org/elasticsearch/index/engine/LuceneChangesSnapshot.java, +        final Query rangeQuery = LongPoint.newRangeQuery(SeqNoFieldMapper.NAME, Math.max(fromSeqNo, lastSeenSeqNo), toSeqNo);, +++ b/server/src/test/java/org/elasticsearch/index/engine/LuceneChangesSnapshotTests.java, +        engine.refresh("test");, +        Engine.Searcher searcher = engine.acquireSearcher("test", Engine.SearcherScope.INTERNAL);, +        try (Translog.Snapshot snapshot = new LuceneChangesSnapshot(searcher, mapperService, between(1, 100), 0, maxSeqNo, false)) {, +            searcher = null;, +        } finally {, +            IOUtils.close(searcher);]