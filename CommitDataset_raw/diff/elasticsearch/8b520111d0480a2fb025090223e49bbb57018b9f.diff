[+++ b/core/src/main/java/org/elasticsearch/action/ingest/PutPipelineRequest.java, +import java.util.Objects;, +        return null;, +    public String getId() {, +    public void setId(String id) {, +        this.id = Objects.requireNonNull(id);, +    public BytesReference getSource() {, +    public void setSource(BytesReference source) {, +        this.source = Objects.requireNonNull(source);, +++ b/core/src/main/java/org/elasticsearch/action/ingest/PutPipelineRequest.java, +import java.util.Objects;, +        return null;, +    public String getId() {, +    public void setId(String id) {, +        this.id = Objects.requireNonNull(id);, +    public BytesReference getSource() {, +    public void setSource(BytesReference source) {, +        this.source = Objects.requireNonNull(source);, +++ b/core/src/main/java/org/elasticsearch/action/ingest/PutPipelineRequestBuilder.java, +        request.setId(id);, +        request.setSource(source);, +++ b/core/src/main/java/org/elasticsearch/action/ingest/PutPipelineRequest.java, +import java.util.Objects;, +        return null;, +    public String getId() {, +    public void setId(String id) {, +        this.id = Objects.requireNonNull(id);, +    public BytesReference getSource() {, +    public void setSource(BytesReference source) {, +        this.source = Objects.requireNonNull(source);, +++ b/core/src/main/java/org/elasticsearch/action/ingest/PutPipelineRequestBuilder.java, +        request.setId(id);, +        request.setSource(source);, +++ b/core/src/main/java/org/elasticsearch/ingest/PipelineStore.java, +            Map<String, Object> pipelineConfig = XContentHelper.convertToMap(request.getSource(), false).v2();, +            constructPipeline(request.getId(), pipelineConfig);, +        clusterService.submitStateUpdateTask("put-pipeline-" + request.getId(), new AckedClusterStateUpdateTask<WritePipelineResponse>(request, listener) {, +        pipelines.put(request.getId(), new PipelineConfiguration(request.getId(), request.getSource()));, +++ b/core/src/main/java/org/elasticsearch/action/ingest/PutPipelineRequest.java, +import java.util.Objects;, +        return null;, +    public String getId() {, +    public void setId(String id) {, +        this.id = Objects.requireNonNull(id);, +    public BytesReference getSource() {, +    public void setSource(BytesReference source) {, +        this.source = Objects.requireNonNull(source);, +++ b/core/src/main/java/org/elasticsearch/action/ingest/PutPipelineRequestBuilder.java, +        request.setId(id);, +        request.setSource(source);, +++ b/core/src/main/java/org/elasticsearch/ingest/PipelineStore.java, +            Map<String, Object> pipelineConfig = XContentHelper.convertToMap(request.getSource(), false).v2();, +            constructPipeline(request.getId(), pipelineConfig);, +        clusterService.submitStateUpdateTask("put-pipeline-" + request.getId(), new AckedClusterStateUpdateTask<WritePipelineResponse>(request, listener) {, +        pipelines.put(request.getId(), new PipelineConfiguration(request.getId(), request.getSource()));, +++ b/core/src/main/java/org/elasticsearch/rest/action/ingest/RestPutPipelineAction.java, +        request.setId(restRequest.param("id"));, +            request.setSource(restRequest.content());, +++ b/core/src/main/java/org/elasticsearch/action/ingest/PutPipelineRequest.java, +import java.util.Objects;, +        return null;, +    public String getId() {, +    public void setId(String id) {, +        this.id = Objects.requireNonNull(id);, +    public BytesReference getSource() {, +    public void setSource(BytesReference source) {, +        this.source = Objects.requireNonNull(source);, +++ b/core/src/main/java/org/elasticsearch/action/ingest/PutPipelineRequestBuilder.java, +        request.setId(id);, +        request.setSource(source);, +++ b/core/src/main/java/org/elasticsearch/ingest/PipelineStore.java, +            Map<String, Object> pipelineConfig = XContentHelper.convertToMap(request.getSource(), false).v2();, +            constructPipeline(request.getId(), pipelineConfig);, +        clusterService.submitStateUpdateTask("put-pipeline-" + request.getId(), new AckedClusterStateUpdateTask<WritePipelineResponse>(request, listener) {, +        pipelines.put(request.getId(), new PipelineConfiguration(request.getId(), request.getSource()));, +++ b/core/src/main/java/org/elasticsearch/rest/action/ingest/RestPutPipelineAction.java, +        request.setId(restRequest.param("id"));, +            request.setSource(restRequest.content());, +++ b/core/src/test/java/org/elasticsearch/ingest/IngestClientIT.java, +        putPipelineRequest.setId("_id");, +        putPipelineRequest.setSource(jsonBuilder().startObject(), +        putPipelineRequest.setId("_id");, +        putPipelineRequest.setSource(jsonBuilder().startObject(), +++ b/core/src/main/java/org/elasticsearch/action/ingest/PutPipelineRequest.java, +import java.util.Objects;, +        return null;, +    public String getId() {, +    public void setId(String id) {, +        this.id = Objects.requireNonNull(id);, +    public BytesReference getSource() {, +    public void setSource(BytesReference source) {, +        this.source = Objects.requireNonNull(source);, +++ b/core/src/main/java/org/elasticsearch/action/ingest/PutPipelineRequestBuilder.java, +        request.setId(id);, +        request.setSource(source);, +++ b/core/src/main/java/org/elasticsearch/ingest/PipelineStore.java, +            Map<String, Object> pipelineConfig = XContentHelper.convertToMap(request.getSource(), false).v2();, +            constructPipeline(request.getId(), pipelineConfig);, +        clusterService.submitStateUpdateTask("put-pipeline-" + request.getId(), new AckedClusterStateUpdateTask<WritePipelineResponse>(request, listener) {, +        pipelines.put(request.getId(), new PipelineConfiguration(request.getId(), request.getSource()));]