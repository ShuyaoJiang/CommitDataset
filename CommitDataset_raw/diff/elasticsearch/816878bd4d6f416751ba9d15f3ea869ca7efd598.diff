[+++ b/core/src/test/java/org/elasticsearch/index/mapper/GeoShapeFieldTypeTests.java, +import org.elasticsearch.common.geo.SpatialStrategy;, +import org.elasticsearch.index.mapper.GeoShapeFieldMapper.GeoShapeFieldType;, +import java.io.IOException;, +, +, +    /**, +     * Test for {@link GeoShapeFieldType#setStrategyName(String)} that checks that {@link GeoShapeFieldType#pointsOnly()}, +     * gets set as a side effect when using SpatialStrategy.TERM, +     */, +    public void testSetStrategyName() throws IOException {, +        GeoShapeFieldType fieldType = new GeoShapeFieldMapper.GeoShapeFieldType();, +        assertFalse(fieldType.pointsOnly());, +        fieldType.setStrategyName(SpatialStrategy.RECURSIVE.getStrategyName());, +        assertFalse(fieldType.pointsOnly());, +        fieldType.setStrategyName(SpatialStrategy.TERM.getStrategyName());, +        assertTrue(fieldType.pointsOnly());, +    }]