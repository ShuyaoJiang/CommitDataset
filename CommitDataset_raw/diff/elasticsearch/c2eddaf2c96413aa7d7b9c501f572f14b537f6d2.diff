[+++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +            provided "log4j:log4j:${project.versions.log4j}", +            provided "log4j:apache-log4j-extras:${project.versions.log4j}", +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +            provided "log4j:log4j:${project.versions.log4j}", +            provided "log4j:apache-log4j-extras:${project.versions.log4j}", +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/precommit/PrecommitTasks.groovy, +            precommitTasks.add(configureLoggerUsage(project)), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +            provided "log4j:log4j:${project.versions.log4j}", +            provided "log4j:apache-log4j-extras:${project.versions.log4j}", +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/precommit/PrecommitTasks.groovy, +            precommitTasks.add(configureLoggerUsage(project)), +++ b/buildSrc/version.properties, +log4j             = 1.2.17, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +            provided "log4j:log4j:${project.versions.log4j}", +            provided "log4j:apache-log4j-extras:${project.versions.log4j}", +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/precommit/PrecommitTasks.groovy, +            precommitTasks.add(configureLoggerUsage(project)), +++ b/buildSrc/version.properties, +log4j             = 1.2.17, +++ b/client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/bulk/BulkBenchmarkTask.java, +import org.elasticsearch.common.logging.ESLogger;, +        private static final ESLogger logger = ESLoggerFactory.getLogger(BulkIndexer.class.getName());, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +            provided "log4j:log4j:${project.versions.log4j}", +            provided "log4j:apache-log4j-extras:${project.versions.log4j}", +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/precommit/PrecommitTasks.groovy, +            precommitTasks.add(configureLoggerUsage(project)), +++ b/buildSrc/version.properties, +log4j             = 1.2.17, +++ b/client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/bulk/BulkBenchmarkTask.java, +import org.elasticsearch.common.logging.ESLogger;, +        private static final ESLogger logger = ESLoggerFactory.getLogger(BulkIndexer.class.getName());, +++ b/core/build.gradle, +  compile "log4j:log4j:${versions.log4j}", optional, +  compile "log4j:apache-log4j-extras:${versions.log4j}", optional, +  // from org.apache.log4j.receivers.net.JMSReceiver (log4j-extras), +  'javax.jms.TopicConnection', , +  'javax.jms.TopicConnectionFactory', , +  'javax.jms.TopicPublisher', , +  'javax.jms.TopicSession', , +  'javax.jms.TopicSubscriber', , +, +   // from org.apache.log4j.net.SMTPAppender (log4j), +  'javax.mail.Message', , +  'javax.mail.Multipart', , +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +            provided "log4j:log4j:${project.versions.log4j}", +            provided "log4j:apache-log4j-extras:${project.versions.log4j}", +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/precommit/PrecommitTasks.groovy, +            precommitTasks.add(configureLoggerUsage(project)), +++ b/buildSrc/version.properties, +log4j             = 1.2.17, +++ b/client/benchmark/src/main/java/org/elasticsearch/client/benchmark/ops/bulk/BulkBenchmarkTask.java, +import org.elasticsearch.common.logging.ESLogger;, +        private static final ESLogger logger = ESLoggerFactory.getLogger(BulkIndexer.class.getName());, +++ b/core/build.gradle, +  compile "log4j:log4j:${versions.log4j}", optional, +  compile "log4j:apache-log4j-extras:${versions.log4j}", optional, +  // from org.apache.log4j.receivers.net.JMSReceiver (log4j-extras), +  'javax.jms.TopicConnection', , +  'javax.jms.TopicConnectionFactory', , +  'javax.jms.TopicPublisher', , +  'javax.jms.TopicSession', , +  'javax.jms.TopicSubscriber', , +, +   // from org.apache.log4j.net.SMTPAppender (log4j), +  'javax.mail.Message', , +  'javax.mail.Multipart', , +++ b/core/src/main/java/org/apache/log4j/Java9Hack.java, +/*, + * Licensed to Elasticsearch under one or more contributor, + * license agreements. See the NOTICE file distributed with, + * this work for additional information regarding copyright, + * ownership. Elasticsearch licenses this file to you under, + * the Apache License, Version 2.0 (the "License"); you may, + * not use this file except in compliance with the License., + * You may obtain a copy of the License at, + *, + *    http://www.apache.org/licenses/LICENSE-2.0, + *, + * Unless required by applicable law or agreed to in writing,, + * software distributed under the License is distributed on an, + * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY, + * KIND, either express or implied.  See the License for the, + * specific language governing permissions and limitations, + * under the License., + */, +, +package org.apache.log4j;, +, +import org.apache.log4j.helpers.ThreadLocalMap;, +, +/**, + * Log4j 1.2 MDC breaks because it parses java.version incorrectly (does not handle new java9 versioning)., + *, + * This hack fixes up the pkg private members as if it had detected the java version correctly., + */]