[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/store/fs/FsStores.java, +import org.elasticsearch.util.Nullable;, +    public static final String MAIN_INDEX_SUFFIX = "index";, +, +    public static synchronized File createStoreFilePath(File basePath, String localNodeId, ShardId shardId, @Nullable String suffix) throws IOException {, +        if (suffix != null) {, +            f = new File(f, suffix);, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/store/fs/FsStores.java, +import org.elasticsearch.util.Nullable;, +    public static final String MAIN_INDEX_SUFFIX = "index";, +, +    public static synchronized File createStoreFilePath(File basePath, String localNodeId, ShardId shardId, @Nullable String suffix) throws IOException {, +        if (suffix != null) {, +            f = new File(f, suffix);, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/store/fs/MmapFsStore.java, +        this.directory = new CustomMMapDirectory(createStoreFilePath(environment.workWithClusterFile(), localNodeId, shardId, MAIN_INDEX_SUFFIX), syncToDisk);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/store/fs/FsStores.java, +import org.elasticsearch.util.Nullable;, +    public static final String MAIN_INDEX_SUFFIX = "index";, +, +    public static synchronized File createStoreFilePath(File basePath, String localNodeId, ShardId shardId, @Nullable String suffix) throws IOException {, +        if (suffix != null) {, +            f = new File(f, suffix);, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/store/fs/MmapFsStore.java, +        this.directory = new CustomMMapDirectory(createStoreFilePath(environment.workWithClusterFile(), localNodeId, shardId, MAIN_INDEX_SUFFIX), syncToDisk);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/store/fs/NioFsStore.java, +        this.directory = new CustomNioFSDirectory(createStoreFilePath(environment.workWithClusterFile(), localNodeId, shardId, MAIN_INDEX_SUFFIX), syncToDisk);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/store/fs/FsStores.java, +import org.elasticsearch.util.Nullable;, +    public static final String MAIN_INDEX_SUFFIX = "index";, +, +    public static synchronized File createStoreFilePath(File basePath, String localNodeId, ShardId shardId, @Nullable String suffix) throws IOException {, +        if (suffix != null) {, +            f = new File(f, suffix);, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/store/fs/MmapFsStore.java, +        this.directory = new CustomMMapDirectory(createStoreFilePath(environment.workWithClusterFile(), localNodeId, shardId, MAIN_INDEX_SUFFIX), syncToDisk);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/store/fs/NioFsStore.java, +        this.directory = new CustomNioFSDirectory(createStoreFilePath(environment.workWithClusterFile(), localNodeId, shardId, MAIN_INDEX_SUFFIX), syncToDisk);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/store/fs/SimpleFsStore.java, +        this.directory = new CustomSimpleFSDirectory(createStoreFilePath(environment.workWithClusterFile(), localNodeId, shardId, MAIN_INDEX_SUFFIX), syncToDisk);]