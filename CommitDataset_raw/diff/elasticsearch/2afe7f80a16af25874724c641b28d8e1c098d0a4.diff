[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/IdsFilterParser.java, +import org.elasticsearch.search.internal.SearchContext;, +import java.util.Arrays;, +            SearchContext searchContext = SearchContext.current();, +            if (searchContext.hasTypes()) {, +                types = Arrays.asList(searchContext.types());, +            } else {, +            }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/IdsFilterParser.java, +import org.elasticsearch.search.internal.SearchContext;, +import java.util.Arrays;, +            SearchContext searchContext = SearchContext.current();, +            if (searchContext.hasTypes()) {, +                types = Arrays.asList(searchContext.types());, +            } else {, +            }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/IdsQueryParser.java, +import org.elasticsearch.search.internal.SearchContext;, +import java.util.Arrays;, +            SearchContext searchContext = SearchContext.current();, +            if (searchContext.hasTypes()) {, +                types = Arrays.asList(searchContext.types());, +            } else {, +            }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/IdsFilterParser.java, +import org.elasticsearch.search.internal.SearchContext;, +import java.util.Arrays;, +            SearchContext searchContext = SearchContext.current();, +            if (searchContext.hasTypes()) {, +                types = Arrays.asList(searchContext.types());, +            } else {, +            }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/IdsQueryParser.java, +import org.elasticsearch.search.internal.SearchContext;, +import java.util.Arrays;, +            SearchContext searchContext = SearchContext.current();, +            if (searchContext.hasTypes()) {, +                types = Arrays.asList(searchContext.types());, +            } else {, +            }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/internal/SearchContext.java, +    public boolean hasTypes() {, +        return types != null && types.length > 0;, +    }, +]