[+++ b/src/test/java/org/elasticsearch/gateway/local/SimpleRecoveryLocalGatewayTests.java, +import org.elasticsearch.cluster.routing.allocation.decider.EnableAllocationDecider;, +                .put(MockDirectoryHelper.CRASH_INDEX, false);, +        // prevent any rebalance actions during the peer recovery, +        // if we run into a relocation the reuse count will be 0 and this fails the test. We are testing here if, +        // we reuse the files on disk after full restarts for replicas., +        client().admin().cluster().prepareUpdateSettings(), +                .setPersistentSettings(settingsBuilder().put(BalancedShardsAllocator.SETTING_THRESHOLD, 100.0f)).get();, +        client().admin().cluster().prepareUpdateSettings(), +                .setTransientSettings(settingsBuilder(), +                        .put(EnableAllocationDecider.CLUSTER_ROUTING_ALLOCATION_ENABLE, EnableAllocationDecider.Allocation.NONE)), +                .get();, +        client().admin().cluster().prepareUpdateSettings(), +                .setTransientSettings(settingsBuilder(), +                        .put(EnableAllocationDecider.CLUSTER_ROUTING_ALLOCATION_ENABLE, EnableAllocationDecider.Allocation.NONE)), +                .get();]