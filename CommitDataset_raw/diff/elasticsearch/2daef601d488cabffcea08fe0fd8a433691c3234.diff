[+++ b/elasticsearch/x-pack/watcher/src/test/java/org/elasticsearch/watcher/support/http/HttpReadTimeoutTests.java, +        webServer.start();, +        HttpRequest request = HttpRequest.builder("localhost", webServer.getPort()), +        final String path = '/' + randomAsciiOfLength(5);, +        webServer.setDispatcher(new CountDownLatchDispatcher(path, latch));, +        HttpRequest request = HttpRequest.builder("localhost", webServer.getPort()), +                .path(path), +        final String path = '/' + randomAsciiOfLength(5);, +        webServer.setDispatcher(new CountDownLatchDispatcher(path, latch));, +        HttpRequest request = HttpRequest.builder("localhost", webServer.getPort()), +                .path(path), +, +    private class CountDownLatchDispatcher extends Dispatcher {, +, +        private final String path;, +        private final CountDownLatch latch;, +, +        public CountDownLatchDispatcher(String path, CountDownLatch latch) {, +            this.path = path;, +            this.latch = latch;, +        }, +, +        @Override, +        public MockResponse dispatch(RecordedRequest request) throws InterruptedException {, +            if (path.equals(request.getPath())) {, +                Thread.sleep(5000);, +                latch.countDown();, +            }, +            return new MockResponse().setStatus("200");, +        }, +    }]