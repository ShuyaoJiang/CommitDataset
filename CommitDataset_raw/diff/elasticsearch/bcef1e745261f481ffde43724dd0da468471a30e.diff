[+++ b/core/src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java, +                if (false == fieldNode instanceof Map) {, +                    throw new IllegalArgumentException("[_parent] must be an object containing [type]");, +                }, +++ b/core/src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java, +                if (false == fieldNode instanceof Map) {, +                    throw new IllegalArgumentException("[_parent] must be an object containing [type]");, +                }, +++ b/core/src/test/java/org/elasticsearch/cluster/metadata/MetaDataMappingServiceTests.java, +import org.elasticsearch.index.mapper.MapperParsingException;, +    public void testParentIsAString() throws Exception {, +        // Shouldn't be able the add the _parent field pointing to an already existing type, which isn't a parent type, +        Exception e = expectThrows(MapperParsingException.class, () -> client().admin().indices().prepareCreate("test"), +                .addMapping("parent", "{\"properties\":{}}"), +                .addMapping("child", "{\"_parent\": \"parent\",\"properties\":{}}"), +                .get());, +        assertEquals("Failed to parse mapping [child]: [_parent] must be an object containing [type]", e.getMessage());, +    }, +]