[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/settings/ImmutableSettings.java, +import org.elasticsearch.common.collect.ImmutableMap;, +import org.elasticsearch.common.collect.Lists;, + * @author kimchy (shay.banon), +    private ImmutableMap<String, String> settings;, +        this.settings = ImmutableMap.copyOf(settings);, +    @Override public ImmutableMap<String, String> getAsMap() {, +        return this.settings;, +        List<String> result = Lists.newArrayList();, +, +        if (get(settingPrefix) != null) {, +            Collections.addAll(result, Strings.commaDelimitedListToStringArray(get(settingPrefix)));, +        }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/settings/ImmutableSettings.java, +import org.elasticsearch.common.collect.ImmutableMap;, +import org.elasticsearch.common.collect.Lists;, + * @author kimchy (shay.banon), +    private ImmutableMap<String, String> settings;, +        this.settings = ImmutableMap.copyOf(settings);, +    @Override public ImmutableMap<String, String> getAsMap() {, +        return this.settings;, +        List<String> result = Lists.newArrayList();, +, +        if (get(settingPrefix) != null) {, +            Collections.addAll(result, Strings.commaDelimitedListToStringArray(get(settingPrefix)));, +        }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/settings/Settings.java, +import org.elasticsearch.common.collect.ImmutableMap;, +    ImmutableMap<String, String> getAsMap();, +     * <p>It will also automatically load a comma separated list under the settingPrefix and merge with, +     * the numbered format., +     *, +     * <p>It will also automatically load a comma separated list under the settingPrefix and merge with, +     * the numbered format., +     *, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/settings/ImmutableSettings.java, +import org.elasticsearch.common.collect.ImmutableMap;, +import org.elasticsearch.common.collect.Lists;, + * @author kimchy (shay.banon), +    private ImmutableMap<String, String> settings;, +        this.settings = ImmutableMap.copyOf(settings);, +    @Override public ImmutableMap<String, String> getAsMap() {, +        return this.settings;, +        List<String> result = Lists.newArrayList();, +, +        if (get(settingPrefix) != null) {, +            Collections.addAll(result, Strings.commaDelimitedListToStringArray(get(settingPrefix)));, +        }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/settings/Settings.java, +import org.elasticsearch.common.collect.ImmutableMap;, +    ImmutableMap<String, String> getAsMap();, +     * <p>It will also automatically load a comma separated list under the settingPrefix and merge with, +     * the numbered format., +     *, +     * <p>It will also automatically load a comma separated list under the settingPrefix and merge with, +     * the numbered format., +     *, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPing.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/settings/ImmutableSettings.java, +import org.elasticsearch.common.collect.ImmutableMap;, +import org.elasticsearch.common.collect.Lists;, + * @author kimchy (shay.banon), +    private ImmutableMap<String, String> settings;, +        this.settings = ImmutableMap.copyOf(settings);, +    @Override public ImmutableMap<String, String> getAsMap() {, +        return this.settings;, +        List<String> result = Lists.newArrayList();, +, +        if (get(settingPrefix) != null) {, +            Collections.addAll(result, Strings.commaDelimitedListToStringArray(get(settingPrefix)));, +        }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/settings/Settings.java, +import org.elasticsearch.common.collect.ImmutableMap;, +    ImmutableMap<String, String> getAsMap();, +     * <p>It will also automatically load a comma separated list under the settingPrefix and merge with, +     * the numbered format., +     *, +     * <p>It will also automatically load a comma separated list under the settingPrefix and merge with, +     * the numbered format., +     *, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPing.java, +++ b/plugins/cloud/aws/src/main/java/org/elasticsearch/discovery/ec2/AwsEc2UnicastHostsProvider.java, +        this.groups = ImmutableSet.copyOf(componentSettings.getAsArray("groups"));]