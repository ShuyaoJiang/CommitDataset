[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/transport/netty/NettyTransport.java, +import java.util.concurrent.CountDownLatch;, +import java.util.concurrent.TimeUnit;, +            final CountDownLatch latch = new CountDownLatch(1);, +            threadPool.cached().execute(new Runnable() {, +                @Override public void run() {, +                    try {, +                    } finally {, +                        latch.countDown();, +                    }, +                }, +            });, +            try {, +                latch.await(30, TimeUnit.SECONDS);, +            } catch (InterruptedException e) {, +                // ignore, +            }, +            final CountDownLatch latch = new CountDownLatch(1);, +            threadPool.cached().execute(new Runnable() {, +                @Override public void run() {, +                    try {, +                    } finally {, +                        latch.countDown();, +                    }, +                }, +            });, +            try {, +                latch.await(30, TimeUnit.SECONDS);, +            } catch (InterruptedException e) {, +                // ignore, +            }]