[+++ b/client/rest/src/main/java/org/elasticsearch/client/RestClient.java, +        List<Node> livingNodes = new ArrayList<>(Math.max(0, nodeTuple.nodes.size() - blacklist.size()));, +++ b/client/rest/src/main/java/org/elasticsearch/client/RestClient.java, +        List<Node> livingNodes = new ArrayList<>(Math.max(0, nodeTuple.nodes.size() - blacklist.size()));, +++ b/client/rest/src/test/java/org/elasticsearch/client/RestClientTests.java, +             * case when fewer nodeTuple than blacklist, wont result in any IllegalCapacityException, +             */, +            {, +                NodeTuple<List<Node>> fewerNodeTuple = new NodeTuple<>(Arrays.asList(n1, n2), null);, +                assertSelectLivingHosts(Arrays.asList(n1), fewerNodeTuple, blacklist, NodeSelector.ANY);, +                assertSelectLivingHosts(Arrays.asList(n2), fewerNodeTuple, blacklist, not1);, +            }, +, +            /*]