[+++ b/docs/reference/setup/as-a-service.asciidoc, +`MAX_MAP_COUNT`::         Maximum number of memory map areas a process may have. If you use `mmapfs` as index store type, make sure this is set to a high value. For more information, check the https://github.com/torvalds/linux/blob/master/Documentation/sysctl/vm.txt[linux kernel documentation] about `max_map_count`. This is set via `sysctl` before starting elasticsearch. Defaults to `65535`, +Also note that changing the `MAX_MAP_COUNT` setting in `/etc/sysconfig/elasticsearch` does not have any effect, you will have to change it in `/usr/lib/sysctl.d/elasticsearch.conf` in order to have it applied at startup., +++ b/docs/reference/setup/as-a-service.asciidoc, +`MAX_MAP_COUNT`::         Maximum number of memory map areas a process may have. If you use `mmapfs` as index store type, make sure this is set to a high value. For more information, check the https://github.com/torvalds/linux/blob/master/Documentation/sysctl/vm.txt[linux kernel documentation] about `max_map_count`. This is set via `sysctl` before starting elasticsearch. Defaults to `65535`, +Also note that changing the `MAX_MAP_COUNT` setting in `/etc/sysconfig/elasticsearch` does not have any effect, you will have to change it in `/usr/lib/sysctl.d/elasticsearch.conf` in order to have it applied at startup., +++ b/pom.xml, +                            <directory>/usr/lib/sysctl.d/</directory>, +                            <filemode>755</filemode>, +                            <configuration>true</configuration>, +                            <sources>, +                                <source>, +                                    <location>src/rpm/systemd/sysctl.d</location>, +                                    <includes>, +                                        <include>elasticsearch.conf</include>, +                                    </includes>, +                                </source>, +                            </sources>, +                        </mapping>, +                        <mapping>, +++ b/docs/reference/setup/as-a-service.asciidoc, +`MAX_MAP_COUNT`::         Maximum number of memory map areas a process may have. If you use `mmapfs` as index store type, make sure this is set to a high value. For more information, check the https://github.com/torvalds/linux/blob/master/Documentation/sysctl/vm.txt[linux kernel documentation] about `max_map_count`. This is set via `sysctl` before starting elasticsearch. Defaults to `65535`, +Also note that changing the `MAX_MAP_COUNT` setting in `/etc/sysconfig/elasticsearch` does not have any effect, you will have to change it in `/usr/lib/sysctl.d/elasticsearch.conf` in order to have it applied at startup., +++ b/pom.xml, +                            <directory>/usr/lib/sysctl.d/</directory>, +                            <filemode>755</filemode>, +                            <configuration>true</configuration>, +                            <sources>, +                                <source>, +                                    <location>src/rpm/systemd/sysctl.d</location>, +                                    <includes>, +                                        <include>elasticsearch.conf</include>, +                                    </includes>, +                                </source>, +                            </sources>, +                        </mapping>, +                        <mapping>, +++ b/src/deb/default/elasticsearch, +# Maximum number of VMA (Virtual Memory Areas) a process can own, +#MAX_MAP_COUNT=65535, +, +++ b/docs/reference/setup/as-a-service.asciidoc, +`MAX_MAP_COUNT`::         Maximum number of memory map areas a process may have. If you use `mmapfs` as index store type, make sure this is set to a high value. For more information, check the https://github.com/torvalds/linux/blob/master/Documentation/sysctl/vm.txt[linux kernel documentation] about `max_map_count`. This is set via `sysctl` before starting elasticsearch. Defaults to `65535`, +Also note that changing the `MAX_MAP_COUNT` setting in `/etc/sysconfig/elasticsearch` does not have any effect, you will have to change it in `/usr/lib/sysctl.d/elasticsearch.conf` in order to have it applied at startup., +++ b/pom.xml, +                            <directory>/usr/lib/sysctl.d/</directory>, +                            <filemode>755</filemode>, +                            <configuration>true</configuration>, +                            <sources>, +                                <source>, +                                    <location>src/rpm/systemd/sysctl.d</location>, +                                    <includes>, +                                        <include>elasticsearch.conf</include>, +                                    </includes>, +                                </source>, +                            </sources>, +                        </mapping>, +                        <mapping>, +++ b/src/deb/default/elasticsearch, +# Maximum number of VMA (Virtual Memory Areas) a process can own, +#MAX_MAP_COUNT=65535, +, +++ b/src/deb/init.d/elasticsearch, +# Maximum number of VMA (Virtual Memory Areas) a process can own, +MAX_MAP_COUNT=65535, +, +	if [ -n "$MAX_MAP_COUNT" ]; then, +		sysctl -qw vm.max_map_count=$MAX_MAP_COUNT, +	fi, +, +++ b/docs/reference/setup/as-a-service.asciidoc, +`MAX_MAP_COUNT`::         Maximum number of memory map areas a process may have. If you use `mmapfs` as index store type, make sure this is set to a high value. For more information, check the https://github.com/torvalds/linux/blob/master/Documentation/sysctl/vm.txt[linux kernel documentation] about `max_map_count`. This is set via `sysctl` before starting elasticsearch. Defaults to `65535`, +Also note that changing the `MAX_MAP_COUNT` setting in `/etc/sysconfig/elasticsearch` does not have any effect, you will have to change it in `/usr/lib/sysctl.d/elasticsearch.conf` in order to have it applied at startup., +++ b/pom.xml, +                            <directory>/usr/lib/sysctl.d/</directory>, +                            <filemode>755</filemode>, +                            <configuration>true</configuration>, +                            <sources>, +                                <source>, +                                    <location>src/rpm/systemd/sysctl.d</location>, +                                    <includes>, +                                        <include>elasticsearch.conf</include>, +                                    </includes>, +                                </source>, +                            </sources>, +                        </mapping>, +                        <mapping>, +++ b/src/deb/default/elasticsearch, +# Maximum number of VMA (Virtual Memory Areas) a process can own, +#MAX_MAP_COUNT=65535, +, +++ b/src/deb/init.d/elasticsearch, +# Maximum number of VMA (Virtual Memory Areas) a process can own, +MAX_MAP_COUNT=65535, +, +	if [ -n "$MAX_MAP_COUNT" ]; then, +		sysctl -qw vm.max_map_count=$MAX_MAP_COUNT, +	fi, +, +++ b/src/rpm/init.d/elasticsearch]