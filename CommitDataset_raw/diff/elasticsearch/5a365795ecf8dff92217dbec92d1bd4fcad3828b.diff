[+++ b/pom.xml, +        <tests.client.ratio>0.0</tests.client.ratio>, +                                <tests.client.ratio>${tests.client.ratio}</tests.client.ratio>, +++ b/pom.xml, +        <tests.client.ratio>0.0</tests.client.ratio>, +                                <tests.client.ratio>${tests.client.ratio}</tests.client.ratio>, +++ b/src/test/java/org/elasticsearch/index/store/mock/MockDirectoryHelper.java, +import org.elasticsearch.test.AbstractIntegrationTest;, +        final long seed = indexSettings.getAsLong(AbstractIntegrationTest.INDEX_SEED_SETTING, 0l);, +++ b/pom.xml, +        <tests.client.ratio>0.0</tests.client.ratio>, +                                <tests.client.ratio>${tests.client.ratio}</tests.client.ratio>, +++ b/src/test/java/org/elasticsearch/index/store/mock/MockDirectoryHelper.java, +import org.elasticsearch.test.AbstractIntegrationTest;, +        final long seed = indexSettings.getAsLong(AbstractIntegrationTest.INDEX_SEED_SETTING, 0l);, +++ b/src/test/java/org/elasticsearch/junit/listeners/ReproduceInfoPrinter.java, +import org.elasticsearch.test.AbstractIntegrationTest;, +import org.elasticsearch.test.ElasticSearchTestCase;, +            builder.appendOpt("tests.cluster_seed", SeedUtils.formatSeed(AbstractIntegrationTest.SHARED_CLUSTER_SEED));, +++ b/pom.xml, +        <tests.client.ratio>0.0</tests.client.ratio>, +                                <tests.client.ratio>${tests.client.ratio}</tests.client.ratio>, +++ b/src/test/java/org/elasticsearch/index/store/mock/MockDirectoryHelper.java, +import org.elasticsearch.test.AbstractIntegrationTest;, +        final long seed = indexSettings.getAsLong(AbstractIntegrationTest.INDEX_SEED_SETTING, 0l);, +++ b/src/test/java/org/elasticsearch/junit/listeners/ReproduceInfoPrinter.java, +import org.elasticsearch.test.AbstractIntegrationTest;, +import org.elasticsearch.test.ElasticSearchTestCase;, +            builder.appendOpt("tests.cluster_seed", SeedUtils.formatSeed(AbstractIntegrationTest.SHARED_CLUSTER_SEED));, +++ b/src/test/java/org/elasticsearch/test/AbstractIntegrationTest.java, +import com.carrotsearch.randomizedtesting.SeedUtils;, +    public static final String INDEX_SEED_SETTING = "index.tests.seed";, +    , +    public static final long SHARED_CLUSTER_SEED = clusterSeed();, +    , +    private static final double TRANSPORT_CLIENT_RATIO = transportClientRatio();, +, +    , +    , +        currentCluster.beforeTest(getRandom(), Double.isNaN(TRANSPORT_CLIENT_RATIO) ? randomDouble() : TRANSPORT_CLIENT_RATIO);, +    private static long clusterSeed() {, +        String property = System.getProperty("tests.cluster_seed");, +        if (property == null || property.isEmpty()) {, +            return System.nanoTime();, +        }, +        return SeedUtils.parseSeed(property);, +    }, +    , +    private static double transportClientRatio() {, +        String property = System.getProperty("tests.client.ratio");, +        if (property == null || property.isEmpty()) {, +            return Double.NaN;, +        }, +        return Double.parseDouble(property);, +    }, +, +++ b/pom.xml, +        <tests.client.ratio>0.0</tests.client.ratio>, +                                <tests.client.ratio>${tests.client.ratio}</tests.client.ratio>, +++ b/src/test/java/org/elasticsearch/index/store/mock/MockDirectoryHelper.java, +import org.elasticsearch.test.AbstractIntegrationTest;, +        final long seed = indexSettings.getAsLong(AbstractIntegrationTest.INDEX_SEED_SETTING, 0l);, +++ b/src/test/java/org/elasticsearch/junit/listeners/ReproduceInfoPrinter.java, +import org.elasticsearch.test.AbstractIntegrationTest;, +import org.elasticsearch.test.ElasticSearchTestCase;, +            builder.appendOpt("tests.cluster_seed", SeedUtils.formatSeed(AbstractIntegrationTest.SHARED_CLUSTER_SEED));, +++ b/src/test/java/org/elasticsearch/test/AbstractIntegrationTest.java, +import com.carrotsearch.randomizedtesting.SeedUtils;, +    public static final String INDEX_SEED_SETTING = "index.tests.seed";, +    , +    public static final long SHARED_CLUSTER_SEED = clusterSeed();, +    , +    private static final double TRANSPORT_CLIENT_RATIO = transportClientRatio();, +, +    , +    , +        currentCluster.beforeTest(getRandom(), Double.isNaN(TRANSPORT_CLIENT_RATIO) ? randomDouble() : TRANSPORT_CLIENT_RATIO);, +    private static long clusterSeed() {, +        String property = System.getProperty("tests.cluster_seed");, +        if (property == null || property.isEmpty()) {, +            return System.nanoTime();, +        }, +        return SeedUtils.parseSeed(property);, +    }, +    , +    private static double transportClientRatio() {, +        String property = System.getProperty("tests.client.ratio");, +        if (property == null || property.isEmpty()) {, +            return Double.NaN;, +        }, +        return Double.parseDouble(property);, +    }, +, +++ b/src/test/java/org/elasticsearch/test/ElasticSearchTestCase.java, +++ b/pom.xml, +        <tests.client.ratio>0.0</tests.client.ratio>, +                                <tests.client.ratio>${tests.client.ratio}</tests.client.ratio>, +++ b/src/test/java/org/elasticsearch/index/store/mock/MockDirectoryHelper.java, +import org.elasticsearch.test.AbstractIntegrationTest;, +        final long seed = indexSettings.getAsLong(AbstractIntegrationTest.INDEX_SEED_SETTING, 0l);]