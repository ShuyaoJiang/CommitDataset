[+++ b/pom.xml, +        <artifactId>plugins</artifactId>, +        <version>2.0.0-beta1-SNAPSHOT</version>, +        <elasticsearch.version>2.0.0-beta1-SNAPSHOT</elasticsearch.version>, +++ b/pom.xml, +        <artifactId>plugins</artifactId>, +        <version>2.0.0-beta1-SNAPSHOT</version>, +        <elasticsearch.version>2.0.0-beta1-SNAPSHOT</elasticsearch.version>, +++ b/src/main/java/org/elasticsearch/index/mapper/attachment/AttachmentMapper.java, +            if (context.indexCreatedVersion().before(Version.V_2_0_0_beta1)) {, +                if (fieldName.equals("path") && parserContext.indexVersionCreated().before(Version.V_2_0_0_beta1)) {, +                        } else if (propName.equals(name) && parserContext.indexVersionCreated().before(Version.V_2_0_0_beta1)) {, +++ b/pom.xml, +        <artifactId>plugins</artifactId>, +        <version>2.0.0-beta1-SNAPSHOT</version>, +        <elasticsearch.version>2.0.0-beta1-SNAPSHOT</elasticsearch.version>, +++ b/src/main/java/org/elasticsearch/index/mapper/attachment/AttachmentMapper.java, +            if (context.indexCreatedVersion().before(Version.V_2_0_0_beta1)) {, +                if (fieldName.equals("path") && parserContext.indexVersionCreated().before(Version.V_2_0_0_beta1)) {, +                        } else if (propName.equals(name) && parserContext.indexVersionCreated().before(Version.V_2_0_0_beta1)) {, +++ b/src/main/java/org/elasticsearch/plugin/mapper/attachments/MapperAttachmentsPlugin.java, +import org.elasticsearch.common.settings.Settings;, +import org.elasticsearch.plugins.Plugin;, +import java.util.Collections;, +public class MapperAttachmentsPlugin extends Plugin {, +    public Collection<Module> indexModules(Settings indexSettings) {, +        return Collections.<Module>singletonList(new AttachmentsIndexModule());, +++ b/pom.xml, +        <artifactId>plugins</artifactId>, +        <version>2.0.0-beta1-SNAPSHOT</version>, +        <elasticsearch.version>2.0.0-beta1-SNAPSHOT</elasticsearch.version>, +++ b/src/main/java/org/elasticsearch/index/mapper/attachment/AttachmentMapper.java, +            if (context.indexCreatedVersion().before(Version.V_2_0_0_beta1)) {, +                if (fieldName.equals("path") && parserContext.indexVersionCreated().before(Version.V_2_0_0_beta1)) {, +                        } else if (propName.equals(name) && parserContext.indexVersionCreated().before(Version.V_2_0_0_beta1)) {, +++ b/src/main/java/org/elasticsearch/plugin/mapper/attachments/MapperAttachmentsPlugin.java, +import org.elasticsearch.common.settings.Settings;, +import org.elasticsearch.plugins.Plugin;, +import java.util.Collections;, +public class MapperAttachmentsPlugin extends Plugin {, +    public Collection<Module> indexModules(Settings indexSettings) {, +        return Collections.<Module>singletonList(new AttachmentsIndexModule());, +++ b/src/test/java/org/elasticsearch/index/mapper/attachment/test/MapperTestUtils.java, +        Injector parentInjector = new ModulesBuilder().add(new SettingsModule(indexSettings), new EnvironmentModule(new Environment(indexSettings))).createInjector();]