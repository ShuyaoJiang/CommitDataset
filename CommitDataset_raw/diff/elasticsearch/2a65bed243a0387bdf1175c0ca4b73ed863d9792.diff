[+++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/doc/RestTestsFromSnippetsTask.groovy, +            dest = dest.parent.resolve(fileName.replace('.asciidoc', '.yml')), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/doc/RestTestsFromSnippetsTask.groovy, +            dest = dest.parent.resolve(fileName.replace('.asciidoc', '.yml')), +++ /dev/null, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/doc/RestTestsFromSnippetsTask.groovy, +            dest = dest.parent.resolve(fileName.replace('.asciidoc', '.yml')), +++ /dev/null, +++ b/distribution/deb/src/test/resources/rest-api-spec/test/smoke_test_plugins/10_modules.yml, +# Integration tests for distributions with modules, +#, +"Correct Modules Count":, +    - do:, +        cluster.state: {}, +, +    # Get master node id, +    - set: { master_node: master }, +, +    - do:, +        nodes.info: {}, +, +    - length:  { nodes.$master.modules: ${expected.modules.count}  }, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/doc/RestTestsFromSnippetsTask.groovy, +            dest = dest.parent.resolve(fileName.replace('.asciidoc', '.yml')), +++ /dev/null, +++ b/distribution/deb/src/test/resources/rest-api-spec/test/smoke_test_plugins/10_modules.yml, +# Integration tests for distributions with modules, +#, +"Correct Modules Count":, +    - do:, +        cluster.state: {}, +, +    # Get master node id, +    - set: { master_node: master }, +, +    - do:, +        nodes.info: {}, +, +    - length:  { nodes.$master.modules: ${expected.modules.count}  }, +++ /dev/null, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/doc/RestTestsFromSnippetsTask.groovy, +            dest = dest.parent.resolve(fileName.replace('.asciidoc', '.yml')), +++ /dev/null, +++ b/distribution/deb/src/test/resources/rest-api-spec/test/smoke_test_plugins/10_modules.yml, +# Integration tests for distributions with modules, +#, +"Correct Modules Count":, +    - do:, +        cluster.state: {}, +, +    # Get master node id, +    - set: { master_node: master }, +, +    - do:, +        nodes.info: {}, +, +    - length:  { nodes.$master.modules: ${expected.modules.count}  }, +++ /dev/null, +++ b/distribution/rpm/src/test/resources/rest-api-spec/test/smoke_test_plugins/10_modules.yml, +# Integration tests for distributions with modules, +#, +"Correct Modules Count":, +    - do:, +        cluster.state: {}, +, +    # Get master node id, +    - set: { master_node: master }, +, +    - do:, +        nodes.info: {}, +, +    - length:  { nodes.$master.modules: ${expected.modules.count}  }, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/doc/RestTestsFromSnippetsTask.groovy, +            dest = dest.parent.resolve(fileName.replace('.asciidoc', '.yml')), +++ /dev/null, +++ b/distribution/deb/src/test/resources/rest-api-spec/test/smoke_test_plugins/10_modules.yml, +# Integration tests for distributions with modules, +#, +"Correct Modules Count":, +    - do:, +        cluster.state: {}, +, +    # Get master node id, +    - set: { master_node: master }, +, +    - do:, +        nodes.info: {}, +, +    - length:  { nodes.$master.modules: ${expected.modules.count}  }, +++ /dev/null, +++ b/distribution/rpm/src/test/resources/rest-api-spec/test/smoke_test_plugins/10_modules.yml, +# Integration tests for distributions with modules, +#, +"Correct Modules Count":, +    - do:, +        cluster.state: {}, +, +    # Get master node id, +    - set: { master_node: master }, +]