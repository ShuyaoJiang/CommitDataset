[+++ b/src/main/java/org/elasticsearch/common/unit/TimeValue.java, +import java.util.Locale;, +            String lowerSValue = sValue.toLowerCase(Locale.ROOT);, +            if (lowerSValue.endsWith("S")) {, +                millis = (long) Double.parseDouble(lowerSValue.substring(0, lowerSValue.length() - 1)) * 1000;, +            } else if (lowerSValue.endsWith("ms")) {, +                millis = (long) (Double.parseDouble(lowerSValue.substring(0, lowerSValue.length() - 2)));, +            } else if (lowerSValue.endsWith("s")) {, +                millis = (long) (Double.parseDouble(lowerSValue.substring(0, lowerSValue.length() - 1)) * 1000);, +            } else if (lowerSValue.endsWith("m")) {, +                millis = (long) (Double.parseDouble(lowerSValue.substring(0, lowerSValue.length() - 1)) * 60 * 1000);, +            } else if (lowerSValue.endsWith("H") || lowerSValue.endsWith("h")) {, +                millis = (long) (Double.parseDouble(lowerSValue.substring(0, lowerSValue.length() - 1)) * 60 * 60 * 1000);, +            } else if (lowerSValue.endsWith("d")) {, +                millis = (long) (Double.parseDouble(lowerSValue.substring(0, lowerSValue.length() - 1)) * 24 * 60 * 60 * 1000);, +            } else if (lowerSValue.endsWith("w")) {, +                millis = (long) (Double.parseDouble(lowerSValue.substring(0, lowerSValue.length() - 1)) * 7 * 24 * 60 * 60 * 1000);, +            } else if (lowerSValue.equals("-1")) {, +            } else if (lowerSValue.equals("0")) {, +++ b/src/main/java/org/elasticsearch/common/unit/TimeValue.java, +import java.util.Locale;, +            String lowerSValue = sValue.toLowerCase(Locale.ROOT);, +            if (lowerSValue.endsWith("S")) {, +                millis = (long) Double.parseDouble(lowerSValue.substring(0, lowerSValue.length() - 1)) * 1000;, +            } else if (lowerSValue.endsWith("ms")) {, +                millis = (long) (Double.parseDouble(lowerSValue.substring(0, lowerSValue.length() - 2)));, +            } else if (lowerSValue.endsWith("s")) {, +                millis = (long) (Double.parseDouble(lowerSValue.substring(0, lowerSValue.length() - 1)) * 1000);, +            } else if (lowerSValue.endsWith("m")) {, +                millis = (long) (Double.parseDouble(lowerSValue.substring(0, lowerSValue.length() - 1)) * 60 * 1000);, +            } else if (lowerSValue.endsWith("H") || lowerSValue.endsWith("h")) {, +                millis = (long) (Double.parseDouble(lowerSValue.substring(0, lowerSValue.length() - 1)) * 60 * 60 * 1000);, +            } else if (lowerSValue.endsWith("d")) {, +                millis = (long) (Double.parseDouble(lowerSValue.substring(0, lowerSValue.length() - 1)) * 24 * 60 * 60 * 1000);, +            } else if (lowerSValue.endsWith("w")) {, +                millis = (long) (Double.parseDouble(lowerSValue.substring(0, lowerSValue.length() - 1)) * 7 * 24 * 60 * 60 * 1000);, +            } else if (lowerSValue.equals("-1")) {, +            } else if (lowerSValue.equals("0")) {, +++ b/src/test/java/org/elasticsearch/common/unit/TimeValueTests.java, +    public void testCapsAllowed() {, +        TimeValue result = TimeValue.parseTimeValue("42MS", null, "test");, +        assertEquals(42, result.millis());]