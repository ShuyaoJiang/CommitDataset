[+++ b/test/build.gradle, +++ b/test/build.gradle, +++ b/test/fixtures/build.gradle, +, +subprojects {, +  // fixtures are mostly external and by default we don't want to check forbidden apis, +  forbiddenApisMain.enabled = false, +}, +++ b/test/build.gradle, +++ b/test/fixtures/build.gradle, +, +subprojects {, +  // fixtures are mostly external and by default we don't want to check forbidden apis, +  forbiddenApisMain.enabled = false, +}, +++ b/test/framework/build.gradle, +  signaturesURLs = [PrecommitTasks.getResource('/forbidden/jdk-signatures.txt'),, +                    PrecommitTasks.getResource('/forbidden/es-all-signatures.txt'),, +                    PrecommitTasks.getResource('/forbidden/es-test-signatures.txt')], +++ b/test/build.gradle, +++ b/test/fixtures/build.gradle, +, +subprojects {, +  // fixtures are mostly external and by default we don't want to check forbidden apis, +  forbiddenApisMain.enabled = false, +}, +++ b/test/framework/build.gradle, +  signaturesURLs = [PrecommitTasks.getResource('/forbidden/jdk-signatures.txt'),, +                    PrecommitTasks.getResource('/forbidden/es-all-signatures.txt'),, +                    PrecommitTasks.getResource('/forbidden/es-test-signatures.txt')], +++ b/test/framework/src/main/java/org/elasticsearch/indices/analysis/AnalysisFactoryTestCase.java, +            m.appendReplacement(sb, m.group(1).toUpperCase(Locale.ROOT));, +++ b/test/build.gradle, +++ b/test/fixtures/build.gradle, +, +subprojects {, +  // fixtures are mostly external and by default we don't want to check forbidden apis, +  forbiddenApisMain.enabled = false, +}, +++ b/test/framework/build.gradle, +  signaturesURLs = [PrecommitTasks.getResource('/forbidden/jdk-signatures.txt'),, +                    PrecommitTasks.getResource('/forbidden/es-all-signatures.txt'),, +                    PrecommitTasks.getResource('/forbidden/es-test-signatures.txt')], +++ b/test/framework/src/main/java/org/elasticsearch/indices/analysis/AnalysisFactoryTestCase.java, +            m.appendReplacement(sb, m.group(1).toUpperCase(Locale.ROOT));, +++ b/test/framework/src/main/java/org/elasticsearch/test/AbstractBuilderTestCase.java, +import org.elasticsearch.core.internal.io.IOUtils;, +        IOUtils.close(serviceHolder);, +        IOUtils.close(serviceHolderWithNoType);, +++ b/test/build.gradle, +++ b/test/fixtures/build.gradle, +, +subprojects {, +  // fixtures are mostly external and by default we don't want to check forbidden apis, +  forbiddenApisMain.enabled = false, +}, +++ b/test/framework/build.gradle, +  signaturesURLs = [PrecommitTasks.getResource('/forbidden/jdk-signatures.txt'),, +                    PrecommitTasks.getResource('/forbidden/es-all-signatures.txt'),, +                    PrecommitTasks.getResource('/forbidden/es-test-signatures.txt')], +++ b/test/framework/src/main/java/org/elasticsearch/indices/analysis/AnalysisFactoryTestCase.java, +            m.appendReplacement(sb, m.group(1).toUpperCase(Locale.ROOT));, +++ b/test/framework/src/main/java/org/elasticsearch/test/AbstractBuilderTestCase.java, +import org.elasticsearch.core.internal.io.IOUtils;, +        IOUtils.close(serviceHolder);, +        IOUtils.close(serviceHolderWithNoType);, +++ b/test/framework/src/main/java/org/elasticsearch/test/ESTestCase.java, +import org.elasticsearch.common.SuppressForbidden;, +        setTestSysProps();, +    @SuppressForbidden(reason = "force log4j and netty sysprops"), +    private static void setTestSysProps() {, +        System.setProperty("log4j.shutdownHookEnabled", "false");, +        System.setProperty("log4j2.disable.jmx", "true");, +, +        // Enable Netty leak detection and monitor logger for logged leak errors, +        System.setProperty("io.netty.leakDetection.level", "paranoid");, +    }, +++ b/test/build.gradle, +++ b/test/fixtures/build.gradle, +, +subprojects {, +  // fixtures are mostly external and by default we don't want to check forbidden apis, +  forbiddenApisMain.enabled = false, +}, +++ b/test/framework/build.gradle, +  signaturesURLs = [PrecommitTasks.getResource('/forbidden/jdk-signatures.txt'),, +                    PrecommitTasks.getResource('/forbidden/es-all-signatures.txt'),, +                    PrecommitTasks.getResource('/forbidden/es-test-signatures.txt')], +++ b/test/framework/src/main/java/org/elasticsearch/indices/analysis/AnalysisFactoryTestCase.java, +            m.appendReplacement(sb, m.group(1).toUpperCase(Locale.ROOT));, +++ b/test/framework/src/main/java/org/elasticsearch/test/AbstractBuilderTestCase.java, +import org.elasticsearch.core.internal.io.IOUtils;, +        IOUtils.close(serviceHolder);, +        IOUtils.close(serviceHolderWithNoType);, +++ b/test/framework/src/main/java/org/elasticsearch/test/ESTestCase.java, +import org.elasticsearch.common.SuppressForbidden;, +        setTestSysProps();, +    @SuppressForbidden(reason = "force log4j and netty sysprops"), +    private static void setTestSysProps() {, +        System.setProperty("log4j.shutdownHookEnabled", "false");]