[+++ b/server/src/main/java/org/elasticsearch/cluster/coordination/Coordinator.java, +import org.elasticsearch.threadpool.Scheduler;, +        private final Scheduler.ScheduledCancellable scheduledCancellable;, +            this.scheduledCancellable = transportService.getThreadPool().schedule(new Runnable() {, +                @Override, +                public void run() {, +                    synchronized (mutex) {, +                        cancel("timed out after " + publishTimeout);, +                    }, +                }, +, +                @Override, +                public String toString() {, +                    return "scheduled timeout for " + this;, +                }, +            }, publishTimeout, Names.GENERIC);, +                                scheduledCancellable.cancel();, +                                scheduledCancellable.cancel();, +                    scheduledCancellable.cancel();]