[+++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/build.gradle, +description = 'Builds the Prelert Engine native binaries and Java classes', +import org.gradle.internal.os.OperatingSystem, +import org.gradle.plugins.ide.eclipse.model.SourceFolder, +import org.apache.tools.ant.taskdefs.condition.Os, +, +project.ext.make = OperatingSystem.current().isLinux() ? "make" : "gnumake", +project.ext.numCpus = Runtime.runtime.availableProcessors(), +, +task cppclean(type: Exec) {, +    commandLine make, +    args 'clean', +}, +, +task cppobjcompile(type: Exec) {, +    commandLine make, +    args '-j' + numCpus, 'objcompile', +}, +, +task cppmake(type: Exec) {, +    commandLine make, +    args '-j' + numCpus, +}, +, +task cpptest(type: Exec) {, +    commandLine make, +    args '-j' + numCpus, 'test', +    apply plugin: 'eclipse', +    apply plugin: 'idea', +    apply plugin: 'maven', +    apply plugin: 'java', +    , +    buildscript {, +        repositories {, +            if (System.getProperty("repos.mavenlocal") != null) {, +                // with -Drepos.mavenlocal=true we can force checking the local .m2 repo which is useful for building against, +                // elasticsearch snapshots, +                mavenLocal(), +            }, +            mavenCentral(), +            maven {, +                name 'sonatype-snapshots', +                url "https://oss.sonatype.org/content/repositories/snapshots/", +            }, +            jcenter(), +        }, +    }, +, +    group = 'org.elasticsearch.prelert', +, +    repositories {, +        if (System.getProperty("repos.mavenlocal") != null) {, +            // with -Drepos.mavenlocal=true we can force checking the local .m2 repo which is useful for building against, +            // elasticsearch snapshots, +            mavenLocal(), +        }, +        mavenCentral(), +        maven {, +            name 'sonatype-snapshots', +            url "https://oss.sonatype.org/content/repositories/snapshots/", +        }, +        jcenter(), +    }, +, +    configurations.all {, +    }, +, +    dependencies {, +        testCompile group: 'org.ini4j', name: 'ini4j', version:'0.5.2', +    }, +}, +, +allprojects {, +  // injecting groovy property variables into all projects, +  project.ext {, +    // for ide hacks..., +    isEclipse = System.getProperty("eclipse.launcher") != null || gradle.startParameter.taskNames.contains('eclipse') || gradle.startParameter.taskNames.contains('cleanEclipse'), +    isIdea = System.getProperty("idea.active") != null || gradle.startParameter.taskNames.contains('idea') || gradle.startParameter.taskNames.contains('cleanIdea'), +  }, +}, +, +allprojects {, +  apply plugin: 'idea', +, +  if (isIdea) {, +    project.buildDir = file('build-idea')]