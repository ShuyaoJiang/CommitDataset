[+++ b/core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java, +import org.elasticsearch.discovery.Discovery;, +    private static Set<Class<?>> MASTER_CHANNEL_EXCEPTIONS =, +        new HashSet<>(Arrays.asList(, +            NotMasterException.class,, +            NodeDisconnectedException.class,, +            Discovery.FailedToCommitClusterStateException.class, +        ));, +++ b/core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java, +import org.elasticsearch.discovery.Discovery;, +    private static Set<Class<?>> MASTER_CHANNEL_EXCEPTIONS =, +        new HashSet<>(Arrays.asList(, +            NotMasterException.class,, +            NodeDisconnectedException.class,, +            Discovery.FailedToCommitClusterStateException.class, +        ));, +++ b/core/src/test/java/org/elasticsearch/cluster/action/shard/ShardStateActionTests.java, +import org.elasticsearch.discovery.Discovery;, +import java.util.concurrent.atomic.AtomicReference;, +        AtomicReference<Exception> exception = new AtomicReference<>();, +                exception.set(e);, +        possibleExceptions.add(new Discovery.FailedToCommitClusterStateException("simulated"));, +        assertNull(exception.get());]