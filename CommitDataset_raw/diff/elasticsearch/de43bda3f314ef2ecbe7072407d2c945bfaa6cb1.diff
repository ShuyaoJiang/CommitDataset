[+++ b/core/src/test/java/org/elasticsearch/index/mapper/ip/IpFieldTypeTests.java, +import org.apache.lucene.index.IndexOptions;, +, +        ft.setIndexOptions(IndexOptions.NONE);, +        IllegalArgumentException e = expectThrows(IllegalArgumentException.class,, +                () -> ft.termQuery("::1", null));, +        assertEquals("Cannot search on field [field] since it is not indexed.", e.getMessage());, +, +        ft.setIndexOptions(IndexOptions.NONE);, +        IllegalArgumentException e = expectThrows(IllegalArgumentException.class,, +                () -> ft.rangeQuery("::1", "2001::", true, true));, +        assertEquals("Cannot search on field [field] since it is not indexed.", e.getMessage());]