[+++ b/server/src/test/java/org/elasticsearch/cluster/coordination/NodeJoinTests.java, +import static java.util.Collections.singletonList;, +        DiscoveryNode localNode = nodes.get(0);, +        VotingConfiguration votingConfiguration = new VotingConfiguration(randomValueOtherThan(singletonList(localNode),, +            () -> randomSubsetOf(randomIntBetween(1, nodes.size()), nodes)).stream().map(DiscoveryNode::getId).collect(Collectors.toSet()));]