[+++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/config/AnalysisConfig.java, +                           Boolean multivariateByFields) {, +        // BWC for removed per-partition normalization, +        // Version check is temporarily against the latest to satisfy CI tests, +        // TODO change to V_6_5_0 after successful backport to 6.x, +        if (in.getVersion().before(Version.V_7_0_0_alpha1)) {, +            in.readBoolean();, +        }, +        // BWC for removed per-partition normalization, +        // Version check is temporarily against the latest to satisfy CI tests, +        // TODO change to V_6_5_0 after successful backport to 6.x, +        if (out.getVersion().before(Version.V_7_0_0_alpha1)) {, +            out.writeBoolean(false);, +        }, +                multivariateByFields, +                    resultFinalizationWindow, multivariateByFields);, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/config/AnalysisConfig.java, +                           Boolean multivariateByFields) {, +        // BWC for removed per-partition normalization, +        // Version check is temporarily against the latest to satisfy CI tests, +        // TODO change to V_6_5_0 after successful backport to 6.x, +        if (in.getVersion().before(Version.V_7_0_0_alpha1)) {, +            in.readBoolean();, +        }, +        // BWC for removed per-partition normalization, +        // Version check is temporarily against the latest to satisfy CI tests, +        // TODO change to V_6_5_0 after successful backport to 6.x, +        if (out.getVersion().before(Version.V_7_0_0_alpha1)) {, +            out.writeBoolean(false);, +        }, +                multivariateByFields, +                    resultFinalizationWindow, multivariateByFields);, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/messages/Messages.java, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/config/AnalysisConfig.java, +                           Boolean multivariateByFields) {, +        // BWC for removed per-partition normalization, +        // Version check is temporarily against the latest to satisfy CI tests, +        // TODO change to V_6_5_0 after successful backport to 6.x, +        if (in.getVersion().before(Version.V_7_0_0_alpha1)) {, +            in.readBoolean();, +        }, +        // BWC for removed per-partition normalization, +        // Version check is temporarily against the latest to satisfy CI tests, +        // TODO change to V_6_5_0 after successful backport to 6.x, +        if (out.getVersion().before(Version.V_7_0_0_alpha1)) {, +            out.writeBoolean(false);, +        }, +                multivariateByFields, +                    resultFinalizationWindow, multivariateByFields);, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/messages/Messages.java, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/persistence/ElasticsearchMappings.java, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/config/AnalysisConfig.java, +                           Boolean multivariateByFields) {, +        // BWC for removed per-partition normalization, +        // Version check is temporarily against the latest to satisfy CI tests, +        // TODO change to V_6_5_0 after successful backport to 6.x, +        if (in.getVersion().before(Version.V_7_0_0_alpha1)) {, +            in.readBoolean();, +        }, +        // BWC for removed per-partition normalization, +        // Version check is temporarily against the latest to satisfy CI tests, +        // TODO change to V_6_5_0 after successful backport to 6.x, +        if (out.getVersion().before(Version.V_7_0_0_alpha1)) {, +            out.writeBoolean(false);, +        }, +                multivariateByFields, +                    resultFinalizationWindow, multivariateByFields);, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/messages/Messages.java, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/persistence/ElasticsearchMappings.java, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/results/Bucket.java, +    /* *, +     * Read and discard the old (prior to 6.5) perPartitionNormalization values, +     */, +    public static Bucket readOldPerPartitionNormalization(StreamInput in)  throws IOException {, +        in.readString();, +        in.readString();, +        in.readDouble();, +        in.readDouble();, +        in.readDouble();, +, +        return null;, +    }, +, +        // bwc for perPartitionNormalization, +        if (in.getVersion().before(Version.V_6_5_0)) {, +            in.readList(Bucket::readOldPerPartitionNormalization);, +        }, +        // bwc for perPartitionNormalization, +        if (out.getVersion().before(Version.V_6_5_0)) {, +            out.writeList(Collections.emptyList());, +        }, +, +                isInterim, bucketSpan, bucketInfluencers, processingTimeMs, scheduledEvents);, +        return anomalyScore > 0.0;, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/config/AnalysisConfig.java, +                           Boolean multivariateByFields) {, +        // BWC for removed per-partition normalization, +        // Version check is temporarily against the latest to satisfy CI tests, +        // TODO change to V_6_5_0 after successful backport to 6.x, +        if (in.getVersion().before(Version.V_7_0_0_alpha1)) {]