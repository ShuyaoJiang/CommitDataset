[+++ b/buildSrc/build.gradle, +  compile 'de.thetaphi:forbiddenapis:2.1', +++ b/buildSrc/build.gradle, +  compile 'de.thetaphi:forbiddenapis:2.1', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/doc/RestTestsFromSnippetsTask.groovy, +            body(test), +                String body, String catchPart) {, +            body(setup), +        private void body(Snippet snippet) {, +                emitDo(method, pathAndQuery, body, catchPart), +++ b/buildSrc/build.gradle, +  compile 'de.thetaphi:forbiddenapis:2.1', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/doc/RestTestsFromSnippetsTask.groovy, +            body(test), +                String body, String catchPart) {, +            body(setup), +        private void body(Snippet snippet) {, +                emitDo(method, pathAndQuery, body, catchPart), +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]action[/\\]admin[/\\]indices[/\\]create[/\\]CreateIndexIT.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]discovery[/\\]zen[/\\]ping[/\\]unicast[/\\]UnicastZenPingIT.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]indices[/\\]state[/\\]SimpleIndexStateIT.java" checks="LineLength" />, +++ b/buildSrc/build.gradle, +  compile 'de.thetaphi:forbiddenapis:2.1', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/doc/RestTestsFromSnippetsTask.groovy, +            body(test), +                String body, String catchPart) {, +            body(setup), +        private void body(Snippet snippet) {, +                emitDo(method, pathAndQuery, body, catchPart), +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]action[/\\]admin[/\\]indices[/\\]create[/\\]CreateIndexIT.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]discovery[/\\]zen[/\\]ping[/\\]unicast[/\\]UnicastZenPingIT.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]indices[/\\]state[/\\]SimpleIndexStateIT.java" checks="LineLength" />, +++ b/buildSrc/src/main/resources/forbidden/es-all-signatures.txt, +@defaultMessage Don't use MethodHandles in slow ways, dont be lenient in tests., +# unfortunately, invoke() cannot be banned, because forbidden apis does not support signature polymorphic methods, +++ b/buildSrc/build.gradle, +  compile 'de.thetaphi:forbiddenapis:2.1', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/doc/RestTestsFromSnippetsTask.groovy, +            body(test), +                String body, String catchPart) {, +            body(setup), +        private void body(Snippet snippet) {, +                emitDo(method, pathAndQuery, body, catchPart), +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]action[/\\]admin[/\\]indices[/\\]create[/\\]CreateIndexIT.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]discovery[/\\]zen[/\\]ping[/\\]unicast[/\\]UnicastZenPingIT.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]indices[/\\]state[/\\]SimpleIndexStateIT.java" checks="LineLength" />, +++ b/buildSrc/src/main/resources/forbidden/es-all-signatures.txt, +@defaultMessage Don't use MethodHandles in slow ways, dont be lenient in tests., +# unfortunately, invoke() cannot be banned, because forbidden apis does not support signature polymorphic methods, +++ b/core/src/main/java/org/elasticsearch/Version.java, +import org.elasticsearch.common.inject.AbstractModule;, +, +    public static class Module extends AbstractModule {, +, +        private final Version version;, +, +        public Module(Version version) {, +            this.version = version;, +        }, +, +        @Override, +        protected void configure() {, +            bind(Version.class).toInstance(version);, +        }, +    }, +++ b/buildSrc/build.gradle, +  compile 'de.thetaphi:forbiddenapis:2.1', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/doc/RestTestsFromSnippetsTask.groovy, +            body(test), +                String body, String catchPart) {, +            body(setup), +        private void body(Snippet snippet) {, +                emitDo(method, pathAndQuery, body, catchPart), +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]action[/\\]admin[/\\]indices[/\\]create[/\\]CreateIndexIT.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]discovery[/\\]zen[/\\]ping[/\\]unicast[/\\]UnicastZenPingIT.java" checks="LineLength" />, +  <suppress files="core[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]indices[/\\]state[/\\]SimpleIndexStateIT.java" checks="LineLength" />, +++ b/buildSrc/src/main/resources/forbidden/es-all-signatures.txt, +@defaultMessage Don't use MethodHandles in slow ways, dont be lenient in tests., +# unfortunately, invoke() cannot be banned, because forbidden apis does not support signature polymorphic methods, +++ b/core/src/main/java/org/elasticsearch/Version.java, +import org.elasticsearch.common.inject.AbstractModule;, +, +    public static class Module extends AbstractModule {, +, +        private final Version version;, +, +        public Module(Version version) {, +            this.version = version;, +        }, +, +        @Override, +        protected void configure() {, +            bind(Version.class).toInstance(version);, +        }, +    }, +++ b/core/src/main/java/org/elasticsearch/action/main/TransportMainAction.java]