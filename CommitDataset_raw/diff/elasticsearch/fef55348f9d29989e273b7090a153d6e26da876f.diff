[+++ b/dev-tools/src/main/resources/ant/integration-tests.xml, +  <!-- distribution tests: .zip -->, +, +  <target name="setup-workspace-zip" depends="stop-external-cluster" unless="${shouldskip}">, +    <sequential>, +      <delete dir="${integ.scratch}"/>, +      <unzip src="${project.build.directory}/releases/elasticsearch-${project.version}.zip" , +             dest="${integ.scratch}"/>, +    </sequential>, +  </target>, +, +  <target name="start-external-cluster-zip" depends="setup-workspace-zip" unless="${shouldskip}">, +    <startup-elasticsearch/>, +  </target>, +, +, +++ b/dev-tools/src/main/resources/ant/integration-tests.xml, +  <!-- distribution tests: .zip -->, +, +  <target name="setup-workspace-zip" depends="stop-external-cluster" unless="${shouldskip}">, +    <sequential>, +      <delete dir="${integ.scratch}"/>, +      <unzip src="${project.build.directory}/releases/elasticsearch-${project.version}.zip" , +             dest="${integ.scratch}"/>, +    </sequential>, +  </target>, +, +  <target name="start-external-cluster-zip" depends="setup-workspace-zip" unless="${shouldskip}">, +    <startup-elasticsearch/>, +  </target>, +, +, +++ b/distribution/zip/pom.xml, +                                <ant antfile="${elasticsearch.integ.antfile}" target="start-external-cluster-zip"/>, +++ b/dev-tools/src/main/resources/ant/integration-tests.xml, +  <!-- distribution tests: .zip -->, +, +  <target name="setup-workspace-zip" depends="stop-external-cluster" unless="${shouldskip}">, +    <sequential>, +      <delete dir="${integ.scratch}"/>, +      <unzip src="${project.build.directory}/releases/elasticsearch-${project.version}.zip" , +             dest="${integ.scratch}"/>, +    </sequential>, +  </target>, +, +  <target name="start-external-cluster-zip" depends="setup-workspace-zip" unless="${shouldskip}">, +    <startup-elasticsearch/>, +  </target>, +, +, +++ b/distribution/zip/pom.xml, +                                <ant antfile="${elasticsearch.integ.antfile}" target="start-external-cluster-zip"/>, +++ b/plugins/pom.xml, +                <plugin>, +                    <groupId>org.apache.maven.plugins</groupId>, +                    <artifactId>maven-dependency-plugin</artifactId>, +                    <executions>, +                        <execution>, +                            <id>integ-setup-dependencies</id>, +                            <phase>pre-integration-test</phase>, +                            <goals>, +                                <goal>copy</goal>, +                            </goals>, +                            <configuration>, +                                <skip>${skip.integ.tests}</skip>, +                                <artifactItems>, +                                    <artifactItem>, +                                        <groupId>org.elasticsearch.distribution</groupId>, +                                        <artifactId>elasticsearch-zip</artifactId>, +                                        <version>${elasticsearch.version}</version>, +                                        <type>zip</type>, +                                        <overWrite>true</overWrite>, +                                        <!-- these packaging builds sneakily rename their artifacts to look nothing, +                                             like their artifact id, so we must duplicate that rename here -->, +                                        <destFileName>elasticsearch-${elasticsearch.version}.zip</destFileName>, +                                    </artifactItem>, +                                </artifactItems>, +                                <outputDirectory>${integ.deps}</outputDirectory>, +                            </configuration>, +                        </execution>, +                    </executions>, +                </plugin>, +++ b/dev-tools/src/main/resources/ant/integration-tests.xml, +  <!-- distribution tests: .zip -->, +, +  <target name="setup-workspace-zip" depends="stop-external-cluster" unless="${shouldskip}">, +    <sequential>, +      <delete dir="${integ.scratch}"/>, +      <unzip src="${project.build.directory}/releases/elasticsearch-${project.version}.zip" , +             dest="${integ.scratch}"/>, +    </sequential>, +  </target>, +, +  <target name="start-external-cluster-zip" depends="setup-workspace-zip" unless="${shouldskip}">, +    <startup-elasticsearch/>, +  </target>, +, +, +++ b/distribution/zip/pom.xml, +                                <ant antfile="${elasticsearch.integ.antfile}" target="start-external-cluster-zip"/>]