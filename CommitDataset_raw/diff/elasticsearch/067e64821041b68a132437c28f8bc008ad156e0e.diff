[+++ b/server/src/test/java/org/elasticsearch/common/time/DateFormattersTests.java, +import java.time.Clock;, +import java.time.ZoneOffset;, +, +, +, +    public void test0MillisAreFormatted() {, +        DateFormatter formatter = DateFormatter.forPattern("strict_date_time");, +        Clock clock = Clock.fixed(ZonedDateTime.of(2019, 02, 8, 11, 43, 00, 0,, +            ZoneOffset.UTC).toInstant(), ZoneOffset.UTC);, +        String formatted = formatter.formatMillis(clock.millis());, +        assertThat(formatted, is("2019-02-08T11:43:00.000Z"));, +    }, +++ b/server/src/test/java/org/elasticsearch/common/time/DateFormattersTests.java, +import java.time.Clock;, +import java.time.ZoneOffset;, +, +, +, +    public void test0MillisAreFormatted() {, +        DateFormatter formatter = DateFormatter.forPattern("strict_date_time");, +        Clock clock = Clock.fixed(ZonedDateTime.of(2019, 02, 8, 11, 43, 00, 0,, +            ZoneOffset.UTC).toInstant(), ZoneOffset.UTC);, +        String formatted = formatter.formatMillis(clock.millis());, +        assertThat(formatted, is("2019-02-08T11:43:00.000Z"));, +    }, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/monitoring/exporter/MonitoringDoc.java, +    private static final DateFormatter dateTimeFormatter = DateFormatter.forPattern("strict_date_time").withZone(ZoneOffset.UTC);, +        return dateTimeFormatter.formatMillis(timestamp);, +++ b/server/src/test/java/org/elasticsearch/common/time/DateFormattersTests.java, +import java.time.Clock;, +import java.time.ZoneOffset;, +, +, +, +    public void test0MillisAreFormatted() {, +        DateFormatter formatter = DateFormatter.forPattern("strict_date_time");, +        Clock clock = Clock.fixed(ZonedDateTime.of(2019, 02, 8, 11, 43, 00, 0,, +            ZoneOffset.UTC).toInstant(), ZoneOffset.UTC);, +        String formatted = formatter.formatMillis(clock.millis());, +        assertThat(formatted, is("2019-02-08T11:43:00.000Z"));, +    }, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/monitoring/exporter/MonitoringDoc.java, +    private static final DateFormatter dateTimeFormatter = DateFormatter.forPattern("strict_date_time").withZone(ZoneOffset.UTC);, +        return dateTimeFormatter.formatMillis(timestamp);, +++ b/x-pack/plugin/monitoring/src/test/java/org/elasticsearch/xpack/monitoring/exporter/BaseMonitoringDocTestCase.java]