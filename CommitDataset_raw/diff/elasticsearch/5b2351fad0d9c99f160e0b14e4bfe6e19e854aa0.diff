[+++ b/plugin/src/main/java/org/elasticsearch/xpack/watcher/support/xcontent/XContentSource.java, +++ b/plugin/src/main/java/org/elasticsearch/xpack/watcher/support/xcontent/XContentSource.java, +++ b/plugin/src/test/java/org/elasticsearch/xpack/watcher/test/integration/SlackServiceTests.java, +import org.elasticsearch.common.xcontent.XContentType;, +import org.elasticsearch.search.SearchHit;, +import org.elasticsearch.xpack.watcher.support.xcontent.XContentSource;, +import java.util.Locale;, +, +                .must(termQuery("result.actions.slack.account", account))));, +, +        SearchHit hit = response.getHits().getAt(0);, +        assertSuccess(hit, "result.actions.0.slack.sent_messages.0.status");, +        assertSuccess(hit, "result.actions.0.slack.sent_messages.1.status");, +        assertSuccess(hit, "result.actions.0.status");, +    }, +, +    private void assertSuccess(SearchHit hit, String path) {, +        XContentSource source = new XContentSource(hit.getSourceRef(), XContentType.JSON);, +        String json = hit.getSourceAsString();, +        String message = String.format(Locale.ROOT, "Expected path [%s] to be [success], json is %s", path, json);, +        assertThat(message, source.getValue(path), is("success"));]