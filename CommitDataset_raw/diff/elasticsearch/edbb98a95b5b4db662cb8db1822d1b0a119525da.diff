[+++ b/server/src/main/java/org/elasticsearch/search/query/QueryPhase.java, +import java.util.concurrent.ExecutorService;, +    private final RescorePhase rescorePhase;, +                            query = new BooleanQuery.Builder(), +                            query = new BooleanQuery.Builder(), +            ExecutorService executor = searchContext.indexShard().getThreadPool().executor(ThreadPool.Names.SEARCH);, +    private static boolean returnsDocsInOrder(Query query, SortAndFormats sf) {, +    private static boolean canEarlyTerminate(IndexReader reader, SortAndFormats sortAndFormats) {]