[+++ b/core/pom.xml, +                                <include>org/elasticsearch/index/MockEngineFactoryPlugin.class</include>, +++ b/core/pom.xml, +                                <include>org/elasticsearch/index/MockEngineFactoryPlugin.class</include>, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsIndices.java, +import org.elasticsearch.index.percolator.PercolateStats;, +++ b/core/pom.xml, +                                <include>org/elasticsearch/index/MockEngineFactoryPlugin.class</include>, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsIndices.java, +import org.elasticsearch.index.percolator.PercolateStats;, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java, +            IndexShard shard = service.getShardOrNull(shardRouting.id());, +++ b/core/pom.xml, +                                <include>org/elasticsearch/index/MockEngineFactoryPlugin.class</include>, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsIndices.java, +import org.elasticsearch.index.percolator.PercolateStats;, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java, +            IndexShard shard = service.getShardOrNull(shardRouting.id());, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/flush/TransportShardFlushAction.java, +        IndexShard indexShard = indicesService.indexServiceSafe(shardRequest.shardId.getIndex()).getShard(shardRequest.shardId.id());, +        IndexShard indexShard = indicesService.indexServiceSafe(request.shardId().getIndex()).getShard(request.shardId().id());, +++ b/core/pom.xml, +                                <include>org/elasticsearch/index/MockEngineFactoryPlugin.class</include>, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsIndices.java, +import org.elasticsearch.index.percolator.PercolateStats;, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java, +            IndexShard shard = service.getShardOrNull(shardRouting.id());, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/flush/TransportShardFlushAction.java, +        IndexShard indexShard = indicesService.indexServiceSafe(shardRequest.shardId.getIndex()).getShard(shardRequest.shardId.id());, +        IndexShard indexShard = indicesService.indexServiceSafe(request.shardId().getIndex()).getShard(request.shardId().id());, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/get/GetIndexResponse.java, +                        in.readBoolean() ? new IndexWarmersMetaData.SearchSource(in) : null), +                boolean hasSource = warmerEntry.source() != null;, +                out.writeBoolean(hasSource);, +                if (hasSource) {, +                    warmerEntry.source().writeTo(out);, +                }, +++ b/core/pom.xml, +                                <include>org/elasticsearch/index/MockEngineFactoryPlugin.class</include>, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsIndices.java, +import org.elasticsearch.index.percolator.PercolateStats;, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java, +            IndexShard shard = service.getShardOrNull(shardRouting.id());, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/flush/TransportShardFlushAction.java, +        IndexShard indexShard = indicesService.indexServiceSafe(shardRequest.shardId.getIndex()).getShard(shardRequest.shardId.id());, +        IndexShard indexShard = indicesService.indexServiceSafe(request.shardId().getIndex()).getShard(request.shardId().id());, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/get/GetIndexResponse.java, +                        in.readBoolean() ? new IndexWarmersMetaData.SearchSource(in) : null), +                boolean hasSource = warmerEntry.source() != null;, +                out.writeBoolean(hasSource);, +                if (hasSource) {, +                    warmerEntry.source().writeTo(out);, +                }, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/optimize/TransportOptimizeAction.java, +        IndexShard indexShard = indicesService.indexServiceSafe(shardRouting.shardId().getIndex()).getShard(shardRouting.shardId().id());, +++ b/core/pom.xml, +                                <include>org/elasticsearch/index/MockEngineFactoryPlugin.class</include>, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsIndices.java, +import org.elasticsearch.index.percolator.PercolateStats;, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java, +            IndexShard shard = service.getShardOrNull(shardRouting.id());, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/flush/TransportShardFlushAction.java, +        IndexShard indexShard = indicesService.indexServiceSafe(shardRequest.shardId.getIndex()).getShard(shardRequest.shardId.id());, +        IndexShard indexShard = indicesService.indexServiceSafe(request.shardId().getIndex()).getShard(request.shardId().id());, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/get/GetIndexResponse.java, +                        in.readBoolean() ? new IndexWarmersMetaData.SearchSource(in) : null), +                boolean hasSource = warmerEntry.source() != null;, +                out.writeBoolean(hasSource);, +                if (hasSource) {, +                    warmerEntry.source().writeTo(out);, +                }, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/optimize/TransportOptimizeAction.java, +        IndexShard indexShard = indicesService.indexServiceSafe(shardRouting.shardId().getIndex()).getShard(shardRouting.shardId().id());, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/recovery/TransportRecoveryAction.java, +        IndexShard indexShard = indexService.getShard(shardRouting.shardId().id());, +++ b/core/pom.xml, +                                <include>org/elasticsearch/index/MockEngineFactoryPlugin.class</include>, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsIndices.java, +import org.elasticsearch.index.percolator.PercolateStats;, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java, +            IndexShard shard = service.getShardOrNull(shardRouting.id());, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/flush/TransportShardFlushAction.java, +        IndexShard indexShard = indicesService.indexServiceSafe(shardRequest.shardId.getIndex()).getShard(shardRequest.shardId.id());, +        IndexShard indexShard = indicesService.indexServiceSafe(request.shardId().getIndex()).getShard(request.shardId().id());, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/get/GetIndexResponse.java, +                        in.readBoolean() ? new IndexWarmersMetaData.SearchSource(in) : null), +                boolean hasSource = warmerEntry.source() != null;, +                out.writeBoolean(hasSource);, +                if (hasSource) {, +                    warmerEntry.source().writeTo(out);, +                }, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/optimize/TransportOptimizeAction.java, +        IndexShard indexShard = indicesService.indexServiceSafe(shardRouting.shardId().getIndex()).getShard(shardRouting.shardId().id());, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/recovery/TransportRecoveryAction.java, +        IndexShard indexShard = indexService.getShard(shardRouting.shardId().id());, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/refresh/TransportShardRefreshAction.java, +        IndexShard indexShard = indicesService.indexServiceSafe(shardRequest.shardId.getIndex()).getShard(shardRequest.shardId.id());, +        IndexShard indexShard = indicesService.indexServiceSafe(shardId.getIndex()).getShard(shardId.id());, +++ b/core/pom.xml, +                                <include>org/elasticsearch/index/MockEngineFactoryPlugin.class</include>]