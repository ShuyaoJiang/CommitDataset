[+++ b/rest-api-spec/src/main/resources/rest-api-spec/test/search.aggregation/40_range.yml, +        body: { "date" : "10000" }, +                missing: "0", +                  from: "200000", +                  to: "200000", +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/search.aggregation/40_range.yml, +        body: { "date" : "10000" }, +                missing: "0", +                  from: "200000", +                  to: "200000", +++ b/server/src/main/java/org/elasticsearch/common/joda/Joda.java, +                // check for deprecations, but after it has parsed correctly so invalid values aren't counted as deprecated, +                if (millis < 0) {, +                    deprecationLogger.deprecatedAndMaybeLog("epoch-negative", "Use of negative values" +, +                        " in epoch time formats is deprecated and will not be supported in the next major version of Elasticsearch.");, +                }, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/search.aggregation/40_range.yml, +        body: { "date" : "10000" }, +                missing: "0", +                  from: "200000", +                  to: "200000", +++ b/server/src/main/java/org/elasticsearch/common/joda/Joda.java, +                // check for deprecations, but after it has parsed correctly so invalid values aren't counted as deprecated, +                if (millis < 0) {, +                    deprecationLogger.deprecatedAndMaybeLog("epoch-negative", "Use of negative values" +, +                        " in epoch time formats is deprecated and will not be supported in the next major version of Elasticsearch.");, +                }, +++ b/server/src/test/java/org/elasticsearch/common/joda/JavaJodaTimeDuellingTests.java, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/search.aggregation/40_range.yml, +        body: { "date" : "10000" }, +                missing: "0", +                  from: "200000", +                  to: "200000", +++ b/server/src/main/java/org/elasticsearch/common/joda/Joda.java, +                // check for deprecations, but after it has parsed correctly so invalid values aren't counted as deprecated, +                if (millis < 0) {, +                    deprecationLogger.deprecatedAndMaybeLog("epoch-negative", "Use of negative values" +, +                        " in epoch time formats is deprecated and will not be supported in the next major version of Elasticsearch.");, +                }, +++ b/server/src/test/java/org/elasticsearch/common/joda/JavaJodaTimeDuellingTests.java, +++ b/server/src/test/java/org/elasticsearch/common/joda/SimpleJodaTests.java, +, +        assertWarnings("Use of negative values" +, +            " in epoch time formats is deprecated and will not be supported in the next major version of Elasticsearch.");, +    public void testDeprecatedEpochScientificNotation() {, +    public void testDeprecatedEpochNegative() {, +        assertValidDateFormatParsing("epoch_second", "-12345", "-12345");, +        assertWarnings("Use of negative values" +, +            " in epoch time formats is deprecated and will not be supported in the next major version of Elasticsearch.");, +        assertValidDateFormatParsing("epoch_millis", "-12345", "-12345");, +        assertWarnings("Use of negative values" +, +            " in epoch time formats is deprecated and will not be supported in the next major version of Elasticsearch.");, +    }, +, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/search.aggregation/40_range.yml, +        body: { "date" : "10000" }, +                missing: "0", +                  from: "200000", +                  to: "200000", +++ b/server/src/main/java/org/elasticsearch/common/joda/Joda.java, +                // check for deprecations, but after it has parsed correctly so invalid values aren't counted as deprecated, +                if (millis < 0) {, +                    deprecationLogger.deprecatedAndMaybeLog("epoch-negative", "Use of negative values" +, +                        " in epoch time formats is deprecated and will not be supported in the next major version of Elasticsearch.");, +                }, +++ b/server/src/test/java/org/elasticsearch/common/joda/JavaJodaTimeDuellingTests.java, +++ b/server/src/test/java/org/elasticsearch/common/joda/SimpleJodaTests.java, +, +        assertWarnings("Use of negative values" +, +            " in epoch time formats is deprecated and will not be supported in the next major version of Elasticsearch.");, +    public void testDeprecatedEpochScientificNotation() {, +    public void testDeprecatedEpochNegative() {, +        assertValidDateFormatParsing("epoch_second", "-12345", "-12345");, +        assertWarnings("Use of negative values" +, +            " in epoch time formats is deprecated and will not be supported in the next major version of Elasticsearch.");, +        assertValidDateFormatParsing("epoch_millis", "-12345", "-12345");, +        assertWarnings("Use of negative values" +, +            " in epoch time formats is deprecated and will not be supported in the next major version of Elasticsearch.");, +    }, +, +++ b/server/src/test/java/org/elasticsearch/index/mapper/DateFieldMapperTests.java, +        long epochMillis = randomNonNegativeLong();, +        String epochFloatValue = epochMillis + "." + randomIntBetween(0, 999);, +        assertEquals(epochMillis, pointField.numericValue().longValue());, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/search.aggregation/40_range.yml, +        body: { "date" : "10000" }, +                missing: "0", +                  from: "200000", +                  to: "200000", +++ b/server/src/main/java/org/elasticsearch/common/joda/Joda.java, +                // check for deprecations, but after it has parsed correctly so invalid values aren't counted as deprecated, +                if (millis < 0) {, +                    deprecationLogger.deprecatedAndMaybeLog("epoch-negative", "Use of negative values" +, +                        " in epoch time formats is deprecated and will not be supported in the next major version of Elasticsearch.");, +                }, +++ b/server/src/test/java/org/elasticsearch/common/joda/JavaJodaTimeDuellingTests.java, +++ b/server/src/test/java/org/elasticsearch/common/joda/SimpleJodaTests.java, +, +        assertWarnings("Use of negative values" +, +            " in epoch time formats is deprecated and will not be supported in the next major version of Elasticsearch.");]