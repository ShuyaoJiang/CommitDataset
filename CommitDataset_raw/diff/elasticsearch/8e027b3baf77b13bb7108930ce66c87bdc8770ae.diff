[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/search/AndFilter.java, +            if (set == null) { // none matching for this filter, we AND, so return EMPTY, +                return DocSet.EMPTY_DOC_SET;, +            }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/search/AndFilter.java, +            if (set == null) { // none matching for this filter, we AND, so return EMPTY, +                return DocSet.EMPTY_DOC_SET;, +            }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/search/NotFilter.java, +import org.elasticsearch.common.lucene.docset.AllDocSet;, +        if (set == null) {, +            return new AllDocSet(reader.maxDoc());, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/search/AndFilter.java, +            if (set == null) { // none matching for this filter, we AND, so return EMPTY, +                return DocSet.EMPTY_DOC_SET;, +            }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/search/NotFilter.java, +import org.elasticsearch.common.lucene.docset.AllDocSet;, +        if (set == null) {, +            return new AllDocSet(reader.maxDoc());, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/search/OrFilter.java, +            if (set == null) { // none matching for this filter, continue, +                continue;, +            }, +        if (sets.size() == 0) {, +            return DocSet.EMPTY_DOC_SET;, +        }, +        if (sets.size() == 1) {, +            return (DocIdSet) sets.get(0);, +        }]