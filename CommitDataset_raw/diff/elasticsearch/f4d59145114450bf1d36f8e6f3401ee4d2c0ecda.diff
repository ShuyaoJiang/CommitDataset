[+++ b/docs/reference/search/aggregations/bucket/terms-aggregation.asciidoc, +         the returned terms which have a document count of zero might only belong to deleted documents or documents, +         from other types, so there is no warranty that a `match_all` query would find a positive document count for, +         those terms., +++ b/docs/reference/search/aggregations/bucket/terms-aggregation.asciidoc, +         the returned terms which have a document count of zero might only belong to deleted documents or documents, +         from other types, so there is no warranty that a `match_all` query would find a positive document count for, +         those terms., +++ b/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java, +import com.google.common.collect.Lists;, +                Collection<FieldMapper<?>> remainingFieldMappers = Lists.newLinkedList(allFieldMappers);, +++ b/docs/reference/search/aggregations/bucket/terms-aggregation.asciidoc, +         the returned terms which have a document count of zero might only belong to deleted documents or documents, +         from other types, so there is no warranty that a `match_all` query would find a positive document count for, +         those terms., +++ b/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java, +import com.google.common.collect.Lists;, +                Collection<FieldMapper<?>> remainingFieldMappers = Lists.newLinkedList(allFieldMappers);, +++ b/src/main/java/org/elasticsearch/action/mlt/TransportMoreLikeThisAction.java, +                            FieldMapper fieldMapper = docMapper.mappers().smartNameFieldMapper(field);, +                            if (fieldMapper != null) {, +                                fields.add(fieldMapper.names().indexName());, +++ b/docs/reference/search/aggregations/bucket/terms-aggregation.asciidoc, +         the returned terms which have a document count of zero might only belong to deleted documents or documents, +         from other types, so there is no warranty that a `match_all` query would find a positive document count for, +         those terms., +++ b/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java, +import com.google.common.collect.Lists;, +                Collection<FieldMapper<?>> remainingFieldMappers = Lists.newLinkedList(allFieldMappers);, +++ b/src/main/java/org/elasticsearch/action/mlt/TransportMoreLikeThisAction.java, +                            FieldMapper fieldMapper = docMapper.mappers().smartNameFieldMapper(field);, +                            if (fieldMapper != null) {, +                                fields.add(fieldMapper.names().indexName());, +++ b/src/main/java/org/elasticsearch/bootstrap/JVMCheck.java, +                sb.append(" to the JAVA_OPTS environment variable.");, +++ b/docs/reference/search/aggregations/bucket/terms-aggregation.asciidoc, +         the returned terms which have a document count of zero might only belong to deleted documents or documents, +         from other types, so there is no warranty that a `match_all` query would find a positive document count for, +         those terms., +++ b/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java, +import com.google.common.collect.Lists;, +                Collection<FieldMapper<?>> remainingFieldMappers = Lists.newLinkedList(allFieldMappers);, +++ b/src/main/java/org/elasticsearch/action/mlt/TransportMoreLikeThisAction.java, +                            FieldMapper fieldMapper = docMapper.mappers().smartNameFieldMapper(field);, +                            if (fieldMapper != null) {, +                                fields.add(fieldMapper.names().indexName());, +++ b/src/main/java/org/elasticsearch/bootstrap/JVMCheck.java, +                sb.append(" to the JAVA_OPTS environment variable.");, +++ b/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +++ b/docs/reference/search/aggregations/bucket/terms-aggregation.asciidoc, +         the returned terms which have a document count of zero might only belong to deleted documents or documents, +         from other types, so there is no warranty that a `match_all` query would find a positive document count for, +         those terms., +++ b/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java, +import com.google.common.collect.Lists;, +                Collection<FieldMapper<?>> remainingFieldMappers = Lists.newLinkedList(allFieldMappers);, +++ b/src/main/java/org/elasticsearch/action/mlt/TransportMoreLikeThisAction.java, +                            FieldMapper fieldMapper = docMapper.mappers().smartNameFieldMapper(field);, +                            if (fieldMapper != null) {, +                                fields.add(fieldMapper.names().indexName());, +++ b/src/main/java/org/elasticsearch/bootstrap/JVMCheck.java, +                sb.append(" to the JAVA_OPTS environment variable.");, +++ b/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +++ b/src/main/java/org/elasticsearch/index/get/ShardGetService.java, +                FieldMapper fieldMapper = docMapper.mappers().smartNameFieldMapper(field);, +                } else if (!fieldMapper.fieldType().stored() && !fieldMapper.isGenerated()) {, +                            values.set(i, fieldMapper.valueForSearch(values.get(i)));, +++ b/docs/reference/search/aggregations/bucket/terms-aggregation.asciidoc, +         the returned terms which have a document count of zero might only belong to deleted documents or documents, +         from other types, so there is no warranty that a `match_all` query would find a positive document count for, +         those terms., +++ b/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java, +import com.google.common.collect.Lists;, +                Collection<FieldMapper<?>> remainingFieldMappers = Lists.newLinkedList(allFieldMappers);, +++ b/src/main/java/org/elasticsearch/action/mlt/TransportMoreLikeThisAction.java, +                            FieldMapper fieldMapper = docMapper.mappers().smartNameFieldMapper(field);, +                            if (fieldMapper != null) {, +                                fields.add(fieldMapper.names().indexName());, +++ b/src/main/java/org/elasticsearch/bootstrap/JVMCheck.java, +                sb.append(" to the JAVA_OPTS environment variable.");, +++ b/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +++ b/src/main/java/org/elasticsearch/index/get/ShardGetService.java, +                FieldMapper fieldMapper = docMapper.mappers().smartNameFieldMapper(field);, +                } else if (!fieldMapper.fieldType().stored() && !fieldMapper.isGenerated()) {, +                            values.set(i, fieldMapper.valueForSearch(values.get(i)));, +++ b/src/main/java/org/elasticsearch/index/mapper/DocumentFieldMappers.java, +import java.util.Iterator;, +public final class DocumentFieldMappers implements Iterable<FieldMapper<?>> {, +    FieldMappers smartName(String name) {, +    public Iterator<FieldMapper<?>> iterator() {, +        return fieldMappers.iterator();, +++ b/docs/reference/search/aggregations/bucket/terms-aggregation.asciidoc, +         the returned terms which have a document count of zero might only belong to deleted documents or documents, +         from other types, so there is no warranty that a `match_all` query would find a positive document count for, +         those terms., +++ b/src/main/java/org/elasticsearch/action/admin/indices/mapping/get/TransportGetFieldMappingsIndexAction.java, +import com.google.common.collect.Lists;, +                Collection<FieldMapper<?>> remainingFieldMappers = Lists.newLinkedList(allFieldMappers);, +++ b/src/main/java/org/elasticsearch/action/mlt/TransportMoreLikeThisAction.java, +                            FieldMapper fieldMapper = docMapper.mappers().smartNameFieldMapper(field);]