[+++ b/src/main/java/org/elasticsearch/search/highlight/FastVectorHighlighter.java, +                    cache.fieldMatchFieldQuery = new CustomFieldQuery(highlighterContext.query, hitContext.topLevelReader(), true, field.fieldOptions().requireFieldMatch());, +                    cache.noFieldMatchFieldQuery = new CustomFieldQuery(highlighterContext.query, hitContext.topLevelReader(), true, field.fieldOptions().requireFieldMatch());, +++ b/src/main/java/org/elasticsearch/search/highlight/FastVectorHighlighter.java, +                    cache.fieldMatchFieldQuery = new CustomFieldQuery(highlighterContext.query, hitContext.topLevelReader(), true, field.fieldOptions().requireFieldMatch());, +                    cache.noFieldMatchFieldQuery = new CustomFieldQuery(highlighterContext.query, hitContext.topLevelReader(), true, field.fieldOptions().requireFieldMatch());, +++ b/src/main/java/org/elasticsearch/search/highlight/HighlightPhase.java, +import org.apache.lucene.search.Query;, +                Query highlightQuery = field.fieldOptions().highlightQuery() == null ? context.parsedQuery().query() : field.fieldOptions().highlightQuery();, +++ b/src/main/java/org/elasticsearch/search/highlight/FastVectorHighlighter.java, +                    cache.fieldMatchFieldQuery = new CustomFieldQuery(highlighterContext.query, hitContext.topLevelReader(), true, field.fieldOptions().requireFieldMatch());, +                    cache.noFieldMatchFieldQuery = new CustomFieldQuery(highlighterContext.query, hitContext.topLevelReader(), true, field.fieldOptions().requireFieldMatch());, +++ b/src/main/java/org/elasticsearch/search/highlight/HighlightPhase.java, +import org.apache.lucene.search.Query;, +                Query highlightQuery = field.fieldOptions().highlightQuery() == null ? context.parsedQuery().query() : field.fieldOptions().highlightQuery();, +++ b/src/main/java/org/elasticsearch/search/highlight/HighlighterContext.java, +    public final Query query;, +            FetchSubPhase.HitContext hitContext, Query query) {, +++ b/src/main/java/org/elasticsearch/search/highlight/FastVectorHighlighter.java, +                    cache.fieldMatchFieldQuery = new CustomFieldQuery(highlighterContext.query, hitContext.topLevelReader(), true, field.fieldOptions().requireFieldMatch());, +                    cache.noFieldMatchFieldQuery = new CustomFieldQuery(highlighterContext.query, hitContext.topLevelReader(), true, field.fieldOptions().requireFieldMatch());, +++ b/src/main/java/org/elasticsearch/search/highlight/HighlightPhase.java, +import org.apache.lucene.search.Query;, +                Query highlightQuery = field.fieldOptions().highlightQuery() == null ? context.parsedQuery().query() : field.fieldOptions().highlightQuery();, +++ b/src/main/java/org/elasticsearch/search/highlight/HighlighterContext.java, +    public final Query query;, +            FetchSubPhase.HitContext hitContext, Query query) {, +++ b/src/main/java/org/elasticsearch/search/highlight/PlainHighlighter.java, +            QueryScorer queryScorer = new CustomQueryScorer(highlighterContext.query, field.fieldOptions().requireFieldMatch() ? mapper.names().indexName() : null);, +++ b/src/main/java/org/elasticsearch/search/highlight/FastVectorHighlighter.java, +                    cache.fieldMatchFieldQuery = new CustomFieldQuery(highlighterContext.query, hitContext.topLevelReader(), true, field.fieldOptions().requireFieldMatch());, +                    cache.noFieldMatchFieldQuery = new CustomFieldQuery(highlighterContext.query, hitContext.topLevelReader(), true, field.fieldOptions().requireFieldMatch());, +++ b/src/main/java/org/elasticsearch/search/highlight/HighlightPhase.java, +import org.apache.lucene.search.Query;, +                Query highlightQuery = field.fieldOptions().highlightQuery() == null ? context.parsedQuery().query() : field.fieldOptions().highlightQuery();, +++ b/src/main/java/org/elasticsearch/search/highlight/HighlighterContext.java, +    public final Query query;, +            FetchSubPhase.HitContext hitContext, Query query) {, +++ b/src/main/java/org/elasticsearch/search/highlight/PlainHighlighter.java, +            QueryScorer queryScorer = new CustomQueryScorer(highlighterContext.query, field.fieldOptions().requireFieldMatch() ? mapper.names().indexName() : null);, +++ b/src/main/java/org/elasticsearch/search/highlight/PostingsHighlighter.java, +            Snippet[] fieldSnippets = highlighter.highlightField(fieldMapper.names().indexName(), highlighterContext.query, searcher, hitContext.docId(), numberOfFragments);]