[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/inject/InheritingState.java, +    private WeakKeySet blacklistedKeys = new WeakKeySet();, +    @Override public void clearBlacklisted() {, +        blacklistedKeys = new WeakKeySet();, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/inject/InheritingState.java, +    private WeakKeySet blacklistedKeys = new WeakKeySet();, +    @Override public void clearBlacklisted() {, +        blacklistedKeys = new WeakKeySet();, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/inject/InjectorImpl.java, +    Map<Key<?>, BindingImpl<?>> jitBindings = Maps.newHashMap();, +    ConstructorInjectorStore constructors = new ConstructorInjectorStore(this);, +    // ES_GUICE: clear caches, +    public void clearCache() {, +        state.clearBlacklisted();, +        constructors = new ConstructorInjectorStore(this);, +        membersInjectorStore = new MembersInjectorStore(this, state.getTypeListenerBindings());, +        jitBindings = Maps.newHashMap();, +    }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/inject/InheritingState.java, +    private WeakKeySet blacklistedKeys = new WeakKeySet();, +    @Override public void clearBlacklisted() {, +        blacklistedKeys = new WeakKeySet();, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/inject/InjectorImpl.java, +    Map<Key<?>, BindingImpl<?>> jitBindings = Maps.newHashMap();, +    ConstructorInjectorStore constructors = new ConstructorInjectorStore(this);, +    // ES_GUICE: clear caches, +    public void clearCache() {, +        state.clearBlacklisted();, +        constructors = new ConstructorInjectorStore(this);, +        membersInjectorStore = new MembersInjectorStore(this, state.getTypeListenerBindings());, +        jitBindings = Maps.newHashMap();, +    }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/inject/Injectors.java, +        ((InjectorImpl) injector).clearCache();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/inject/InheritingState.java, +    private WeakKeySet blacklistedKeys = new WeakKeySet();, +    @Override public void clearBlacklisted() {, +        blacklistedKeys = new WeakKeySet();, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/inject/InjectorImpl.java, +    Map<Key<?>, BindingImpl<?>> jitBindings = Maps.newHashMap();, +    ConstructorInjectorStore constructors = new ConstructorInjectorStore(this);, +    // ES_GUICE: clear caches, +    public void clearCache() {, +        state.clearBlacklisted();, +        constructors = new ConstructorInjectorStore(this);, +        membersInjectorStore = new MembersInjectorStore(this, state.getTypeListenerBindings());, +        jitBindings = Maps.newHashMap();, +    }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/inject/Injectors.java, +        ((InjectorImpl) injector).clearCache();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/inject/State.java, +        @Override public void clearBlacklisted() {, +        }, +, +, +    // ES_GUICE: clean blacklist keys, +    void clearBlacklisted();]