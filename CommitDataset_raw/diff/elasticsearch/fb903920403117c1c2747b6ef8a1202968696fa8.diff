[+++ b/modules/test/integration/src/test/java/org/elasticsearch/test/stress/rollingrestart/RollingRestartStressTest.java, +import org.elasticsearch.action.admin.indices.status.IndexShardStatus;, +import org.elasticsearch.action.admin.indices.status.IndicesStatusResponse;, +import org.elasticsearch.action.admin.indices.status.ShardStatus;, +        // check the status, +        IndicesStatusResponse status = client.client().admin().indices().prepareStatus("test").execute().actionGet();, +        for (IndexShardStatus shardStatus : status.index("test")) {, +            ShardStatus shard = shardStatus.shards()[0];, +            logger.info("shard [{}], docs [{}]", shard.shardId(), shard.getDocs().numDocs());, +            for (ShardStatus shardStatu : shardStatus) {, +                if (shard.docs().numDocs() != shardStatu.docs().numDocs()) {, +                    logger.warn("shard doc number does not match!, got {} and {}", shard.docs().numDocs(), shardStatu.docs().numDocs());, +                }, +            }, +        }, +]