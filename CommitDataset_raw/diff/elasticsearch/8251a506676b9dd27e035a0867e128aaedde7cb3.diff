[+++ b/core/src/main/java/org/elasticsearch/ingest/ProcessorFactoryProvider.java, +import java.util.function.BiFunction;, +, + * Functional interface that allows to create a {@link org.elasticsearch.ingest.Processor.Factory} once all the needed, + * components are available at a later stage, more specifically the {@link Environment} and the {@link TemplateService}, + * which some processors need., +public interface ProcessorFactoryProvider extends BiFunction<Environment, TemplateService, Processor.Factory> {, +, +++ b/core/src/main/java/org/elasticsearch/ingest/ProcessorFactoryProvider.java, +import java.util.function.BiFunction;, +, + * Functional interface that allows to create a {@link org.elasticsearch.ingest.Processor.Factory} once all the needed, + * components are available at a later stage, more specifically the {@link Environment} and the {@link TemplateService}, + * which some processors need., +public interface ProcessorFactoryProvider extends BiFunction<Environment, TemplateService, Processor.Factory> {, +, +++ b/plugins/ingest/src/main/java/org/elasticsearch/plugin/ingest/PipelineStore.java, +            Processor.Factory processorFactory = entry.getValue().apply(environment, templateService);]