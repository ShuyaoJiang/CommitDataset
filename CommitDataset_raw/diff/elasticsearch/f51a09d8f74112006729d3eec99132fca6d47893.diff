[+++ b/src/main/java/org/elasticsearch/search/controller/SearchPhaseController.java, +                ScoreDoc[] scoreDocs = result.topDocs().scoreDocs;, +                if (scoreDocs.length == 0 || scoreDocs.length < offset) {, +                    return EMPTY_DOCS;, +                }, +, +                int resultDocsSize = result.size();, +                if ((scoreDocs.length - offset) < resultDocsSize) {, +                    resultDocsSize = scoreDocs.length - offset;, +                }]