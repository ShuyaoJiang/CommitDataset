[+++ b/core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java, +++ b/core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/IndexRoutingTable.java, +                if (shardRouting.active() &&, +                    indexMetaData.activeAllocationIds(shardRouting.id()).contains(shardRouting.allocationId().getId()) == false) {, +                        throw new IllegalStateException("active shard routing " + shardRouting + " has no corresponding entry in the " +, +                            "in-sync allocation set " + indexMetaData.activeAllocationIds(shardRouting.id()));, +                    }, +++ b/core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/IndexRoutingTable.java, +                if (shardRouting.active() &&, +                    indexMetaData.activeAllocationIds(shardRouting.id()).contains(shardRouting.allocationId().getId()) == false) {, +                        throw new IllegalStateException("active shard routing " + shardRouting + " has no corresponding entry in the " +, +                            "in-sync allocation set " + indexMetaData.activeAllocationIds(shardRouting.id()));, +                    }, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/IndexRoutingTable.java, +                if (shardRouting.active() &&, +                    indexMetaData.activeAllocationIds(shardRouting.id()).contains(shardRouting.allocationId().getId()) == false) {, +                        throw new IllegalStateException("active shard routing " + shardRouting + " has no corresponding entry in the " +, +                            "in-sync allocation set " + indexMetaData.activeAllocationIds(shardRouting.id()));, +                    }, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/IndexRoutingTable.java, +                if (shardRouting.active() &&, +                    indexMetaData.activeAllocationIds(shardRouting.id()).contains(shardRouting.allocationId().getId()) == false) {, +                        throw new IllegalStateException("active shard routing " + shardRouting + " has no corresponding entry in the " +, +                            "in-sync allocation set " + indexMetaData.activeAllocationIds(shardRouting.id()));, +                    }, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/IndexRoutingTable.java, +                if (shardRouting.active() &&, +                    indexMetaData.activeAllocationIds(shardRouting.id()).contains(shardRouting.allocationId().getId()) == false) {, +                        throw new IllegalStateException("active shard routing " + shardRouting + " has no corresponding entry in the " +, +                            "in-sync allocation set " + indexMetaData.activeAllocationIds(shardRouting.id()));, +                    }, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/IndexRoutingTable.java, +                if (shardRouting.active() &&, +                    indexMetaData.activeAllocationIds(shardRouting.id()).contains(shardRouting.allocationId().getId()) == false) {, +                        throw new IllegalStateException("active shard routing " + shardRouting + " has no corresponding entry in the " +, +                            "in-sync allocation set " + indexMetaData.activeAllocationIds(shardRouting.id()));, +                    }, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/IndexRoutingTable.java, +                if (shardRouting.active() &&, +                    indexMetaData.activeAllocationIds(shardRouting.id()).contains(shardRouting.allocationId().getId()) == false) {, +                        throw new IllegalStateException("active shard routing " + shardRouting + " has no corresponding entry in the " +, +                            "in-sync allocation set " + indexMetaData.activeAllocationIds(shardRouting.id()));, +                    }, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/IndexRoutingTable.java, +                if (shardRouting.active() &&, +                    indexMetaData.activeAllocationIds(shardRouting.id()).contains(shardRouting.allocationId().getId()) == false) {, +                        throw new IllegalStateException("active shard routing " + shardRouting + " has no corresponding entry in the " +, +                            "in-sync allocation set " + indexMetaData.activeAllocationIds(shardRouting.id()));, +                    }, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/IndexRoutingTable.java, +                if (shardRouting.active() &&, +                    indexMetaData.activeAllocationIds(shardRouting.id()).contains(shardRouting.allocationId().getId()) == false) {, +                        throw new IllegalStateException("active shard routing " + shardRouting + " has no corresponding entry in the " +, +                            "in-sync allocation set " + indexMetaData.activeAllocationIds(shardRouting.id()));, +                    }, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null]