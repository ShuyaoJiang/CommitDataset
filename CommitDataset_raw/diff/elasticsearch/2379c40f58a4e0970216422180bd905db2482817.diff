[+++ b/sql/server/build.gradle, +import org.elasticsearch.gradle.test.RunTask, +, +// Configure integration tests, +apply plugin: 'elasticsearch.rest-test', +integTest.mustRunAfter test, +, +integTestCluster {, +  distribution = 'zip' // NOCOMMIT make double sure we want all the modules, +  plugin project(':x-pack-elasticsearch:plugin').path, +  /* Get a "clean" test without the other x-pack features here and check them, +   * all together later on. */, +  setting 'xpack.security.enabled', 'false', +  setting 'xpack.monitoring.enabled', 'false', +  setting 'xpack.ml.enabled', 'false', +  setting 'xpack.watcher.enabled', 'false', +  setting 'script.max_compilations_per_minute', '1000', +}, +, +task run(type: RunTask) {, +  distribution = 'zip' // NOCOMMIT make double sure we want all the modules, +  plugin project(':x-pack-elasticsearch:plugin').path, +  /* Get a "clean" test without the other x-pack features here and check them, +   * all together later on. */, +  setting 'xpack.security.enabled', 'false', +  setting 'xpack.monitoring.enabled', 'false', +  setting 'xpack.ml.enabled', 'false', +  setting 'xpack.watcher.enabled', 'false', +  setting 'script.max_compilations_per_minute', '1000', +}, +, +++ b/sql/server/build.gradle, +import org.elasticsearch.gradle.test.RunTask, +, +// Configure integration tests, +apply plugin: 'elasticsearch.rest-test', +integTest.mustRunAfter test, +, +integTestCluster {, +  distribution = 'zip' // NOCOMMIT make double sure we want all the modules, +  plugin project(':x-pack-elasticsearch:plugin').path, +  /* Get a "clean" test without the other x-pack features here and check them, +   * all together later on. */, +  setting 'xpack.security.enabled', 'false', +  setting 'xpack.monitoring.enabled', 'false', +  setting 'xpack.ml.enabled', 'false', +  setting 'xpack.watcher.enabled', 'false', +  setting 'script.max_compilations_per_minute', '1000', +}, +, +task run(type: RunTask) {, +  distribution = 'zip' // NOCOMMIT make double sure we want all the modules, +  plugin project(':x-pack-elasticsearch:plugin').path, +  /* Get a "clean" test without the other x-pack features here and check them, +   * all together later on. */, +  setting 'xpack.security.enabled', 'false', +  setting 'xpack.monitoring.enabled', 'false', +  setting 'xpack.ml.enabled', 'false', +  setting 'xpack.watcher.enabled', 'false', +  setting 'script.max_compilations_per_minute', '1000', +}, +, +++ b/sql/server/src/main/java/org/elasticsearch/xpack/sql/plugin/sql/action/TransportSqlAction.java, +++ b/sql/server/build.gradle, +import org.elasticsearch.gradle.test.RunTask, +, +// Configure integration tests, +apply plugin: 'elasticsearch.rest-test', +integTest.mustRunAfter test, +, +integTestCluster {, +  distribution = 'zip' // NOCOMMIT make double sure we want all the modules, +  plugin project(':x-pack-elasticsearch:plugin').path, +  /* Get a "clean" test without the other x-pack features here and check them, +   * all together later on. */, +  setting 'xpack.security.enabled', 'false', +  setting 'xpack.monitoring.enabled', 'false', +  setting 'xpack.ml.enabled', 'false', +  setting 'xpack.watcher.enabled', 'false', +  setting 'script.max_compilations_per_minute', '1000', +}, +, +task run(type: RunTask) {, +  distribution = 'zip' // NOCOMMIT make double sure we want all the modules, +  plugin project(':x-pack-elasticsearch:plugin').path, +  /* Get a "clean" test without the other x-pack features here and check them, +   * all together later on. */, +  setting 'xpack.security.enabled', 'false', +  setting 'xpack.monitoring.enabled', 'false', +  setting 'xpack.ml.enabled', 'false', +  setting 'xpack.watcher.enabled', 'false', +  setting 'script.max_compilations_per_minute', '1000', +}, +, +++ b/sql/server/src/main/java/org/elasticsearch/xpack/sql/plugin/sql/action/TransportSqlAction.java, +++ b/sql/server/src/test/java/org/elasticsearch/xpack/sql/server/RestSqlIT.java, +/*, + * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one, + * or more contributor license agreements. Licensed under the Elastic License;, + * you may not use this file except in compliance with the Elastic License.]