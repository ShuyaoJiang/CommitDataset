[+++ b/server/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java, +            Set<Long> seqNosInSafeCommit = null;, +                    seqNosInSafeCommit = commits.get(i).stream().map(Engine.Operation::seqNo).collect(Collectors.toSet());, +            assertThat(seqNosInSafeCommit, notNullValue());, +                    assertThat(, +                        "seq_no=" + op.seqNo() + " max_seq_no=" + tracker.getMaxSeqNo() + "checkpoint=" + tracker.getCheckpoint(),, +                        tracker.contains(op.seqNo()), equalTo(seqNosInSafeCommit.contains(op.seqNo())));]