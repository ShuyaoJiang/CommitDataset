[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java, +                if (!routing.equals(aliasMd.indexRouting())) {, +            routing = aliasMd.indexRouting();, +        if (routing != null) {, +            if (routing.indexOf(',') != -1) {, +                throw new ElasticSearchIllegalArgumentException("index/alias [" + aliasOrIndex + "] provided with routing value [" + routing + "] that resolved to several routing values, rejecting operation");, +            }, +        }, +        return routing;, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java, +                if (!routing.equals(aliasMd.indexRouting())) {, +            routing = aliasMd.indexRouting();, +        if (routing != null) {, +            if (routing.indexOf(',') != -1) {, +                throw new ElasticSearchIllegalArgumentException("index/alias [" + aliasOrIndex + "] provided with routing value [" + routing + "] that resolved to several routing values, rejecting operation");, +            }, +        }, +        return routing;, +++ b/modules/test/integration/src/test/java/org/elasticsearch/test/integration/routing/AliasResolveRoutingTests.java, +            assert false : "should fail";, +        } catch (ElasticSearchIllegalArgumentException e) {, +            // all is well, we can't have two mappings, one provided, and one in the alias, +        }, +        try {, +            clusterService.state().metaData().resolveIndexRouting(null, "alias110");, +            assert false : "should fail";]