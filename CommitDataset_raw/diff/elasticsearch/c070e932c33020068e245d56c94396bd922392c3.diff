[+++ b/src/main/java/org/elasticsearch/alerts/AlertManager.java, +import org.elasticsearch.alerts.actions.AlertActionEntry;, +import org.elasticsearch.common.util.concurrent.KeyedLock;, +    private final KeyedLock<String> alertLock = new KeyedLock<>();, +, +        alertLock.acquire(name);, +        try {, +        } finally {, +            alertLock.release(name);, +        }, +        alertLock.acquire(alertName);, +        try {, +        } finally {, +            alertLock.release(alertName);, +        }, +        alertLock.acquire(alertName);, +        try {, +        } finally {, +            alertLock.release(alertName);, +        }, +    public TriggerResult executeAlert(AlertActionEntry entry) throws IOException {, +        alertLock.acquire(entry.getAlertName());, +        try {, +            Alert alert = alertsStore.getAlert(entry.getAlertName());, +            TriggerResult triggerResult = triggerManager.isTriggered(alert, entry.getScheduledTime(), entry.getFireTime());, +            entry.setSearchRequest(triggerResult.getRequest());, +            entry.setSearchResponse(triggerResult.getResponse());, +                entry.setTriggered(true);, +                alert.lastActionFire(entry.getFireTime());, +        } finally {, +            alertLock.release(entry.getAlertName());, +        }, +++ b/src/main/java/org/elasticsearch/alerts/AlertManager.java, +import org.elasticsearch.alerts.actions.AlertActionEntry;, +import org.elasticsearch.common.util.concurrent.KeyedLock;, +    private final KeyedLock<String> alertLock = new KeyedLock<>();, +, +        alertLock.acquire(name);, +        try {, +        } finally {, +            alertLock.release(name);, +        }, +        alertLock.acquire(alertName);, +        try {, +        } finally {, +            alertLock.release(alertName);, +        }, +        alertLock.acquire(alertName);, +        try {, +        } finally {, +            alertLock.release(alertName);, +        }, +    public TriggerResult executeAlert(AlertActionEntry entry) throws IOException {, +        alertLock.acquire(entry.getAlertName());, +        try {, +            Alert alert = alertsStore.getAlert(entry.getAlertName());, +            TriggerResult triggerResult = triggerManager.isTriggered(alert, entry.getScheduledTime(), entry.getFireTime());, +            entry.setSearchRequest(triggerResult.getRequest());, +            entry.setSearchResponse(triggerResult.getResponse());, +                entry.setTriggered(true);, +                alert.lastActionFire(entry.getFireTime());, +        } finally {, +            alertLock.release(entry.getAlertName());, +        }, +++ b/src/main/java/org/elasticsearch/alerts/actions/AlertActionManager.java, +                } else if (!alert.enabled()) {, +                    updateHistoryEntry(entry, AlertActionState.NO_ACTION_NEEDED); ///@TODO DISABLED, +                    return;, +                TriggerResult trigger = alertManager.executeAlert(entry);]