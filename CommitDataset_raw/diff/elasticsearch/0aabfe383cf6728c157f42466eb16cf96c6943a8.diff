[+++ b/core/src/main/java/org/elasticsearch/index/shard/IndexShard.java, +    /** Record that this shard is now inactive, and decrease the indexing and translog buffers to tiny values. */, +++ b/core/src/main/java/org/elasticsearch/index/shard/IndexShard.java, +    /** Record that this shard is now inactive, and decrease the indexing and translog buffers to tiny values. */, +++ b/core/src/main/java/org/elasticsearch/indices/memory/IndexingMemoryController.java, +    /** set new indexing and translog buffers on this shard.  this may cause the shard to refresh to free up heap. */, +    /** returns {@code Boolean.TRUE} if no indexing operations have arrived to this shard since the {@code inactiveTimeNS},, +     *  {@code Boolean.FALSE} if they have, and {@code null} if the shard is unknown */, +    /** check if any shards active status changed, now. */, +         * @return the changes applied, +    /** notify this shard that it is now inactive, so it can drop its indexing buffer to 512 KB */]