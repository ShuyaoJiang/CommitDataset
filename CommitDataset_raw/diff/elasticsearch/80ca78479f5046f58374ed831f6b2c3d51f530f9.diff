[+++ b/benchmarks/build.gradle, +++ b/benchmarks/build.gradle, +++ b/benchmarks/src/main/java/org/elasticsearch/benchmark/routing/allocation/Allocators.java, +        return createAllocationService(settings, new ClusterSettings(Settings.Builder.EMPTY_SETTINGS, ClusterSettings, +        List<AllocationDecider> list = new ArrayList<>();, +        // Keep a deterministic order of allocation deciders for the benchmark, +        for (Class<? extends AllocationDecider> deciderClass : ClusterModule.DEFAULT_ALLOCATION_DECIDERS) {, +            try {, +                Constructor<? extends AllocationDecider> constructor = deciderClass.getConstructor(Settings.class, ClusterSettings, +                    .class);, +                list.add(constructor.newInstance(settings, clusterSettings));, +            } catch (NoSuchMethodException e) {, +                Constructor<? extends AllocationDecider> constructor = deciderClass.getConstructor(Settings.class);, +                list.add(constructor.newInstance(settings));, +            }, +        }, +        return new AllocationDeciders(settings, list.toArray(new AllocationDecider[0]));, +++ b/benchmarks/build.gradle, +++ b/benchmarks/src/main/java/org/elasticsearch/benchmark/routing/allocation/Allocators.java, +        return createAllocationService(settings, new ClusterSettings(Settings.Builder.EMPTY_SETTINGS, ClusterSettings, +        List<AllocationDecider> list = new ArrayList<>();, +        // Keep a deterministic order of allocation deciders for the benchmark, +        for (Class<? extends AllocationDecider> deciderClass : ClusterModule.DEFAULT_ALLOCATION_DECIDERS) {, +            try {, +                Constructor<? extends AllocationDecider> constructor = deciderClass.getConstructor(Settings.class, ClusterSettings, +                    .class);, +                list.add(constructor.newInstance(settings, clusterSettings));, +            } catch (NoSuchMethodException e) {, +                Constructor<? extends AllocationDecider> constructor = deciderClass.getConstructor(Settings.class);, +                list.add(constructor.newInstance(settings));, +            }, +        }, +        return new AllocationDeciders(settings, list.toArray(new AllocationDecider[0]));, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +                options.compilerArgs << '-Werror' << '-proc:none' << '-Xlint:all,-path,-serial,-options,-deprecation' << '-Xdoclint:all' << '-Xdoclint:-missing', +++ b/benchmarks/build.gradle, +++ b/benchmarks/src/main/java/org/elasticsearch/benchmark/routing/allocation/Allocators.java, +        return createAllocationService(settings, new ClusterSettings(Settings.Builder.EMPTY_SETTINGS, ClusterSettings, +        List<AllocationDecider> list = new ArrayList<>();, +        // Keep a deterministic order of allocation deciders for the benchmark, +        for (Class<? extends AllocationDecider> deciderClass : ClusterModule.DEFAULT_ALLOCATION_DECIDERS) {, +            try {, +                Constructor<? extends AllocationDecider> constructor = deciderClass.getConstructor(Settings.class, ClusterSettings, +                    .class);, +                list.add(constructor.newInstance(settings, clusterSettings));, +            } catch (NoSuchMethodException e) {, +                Constructor<? extends AllocationDecider> constructor = deciderClass.getConstructor(Settings.class);, +                list.add(constructor.newInstance(settings));, +            }, +        }, +        return new AllocationDeciders(settings, list.toArray(new AllocationDecider[0]));, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +                options.compilerArgs << '-Werror' << '-proc:none' << '-Xlint:all,-path,-serial,-options,-deprecation' << '-Xdoclint:all' << '-Xdoclint:-missing', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +    String jvmArgs = System.getProperty('tests.jvm.argline', ''), +++ b/benchmarks/build.gradle, +++ b/benchmarks/src/main/java/org/elasticsearch/benchmark/routing/allocation/Allocators.java, +        return createAllocationService(settings, new ClusterSettings(Settings.Builder.EMPTY_SETTINGS, ClusterSettings, +        List<AllocationDecider> list = new ArrayList<>();, +        // Keep a deterministic order of allocation deciders for the benchmark, +        for (Class<? extends AllocationDecider> deciderClass : ClusterModule.DEFAULT_ALLOCATION_DECIDERS) {, +            try {, +                Constructor<? extends AllocationDecider> constructor = deciderClass.getConstructor(Settings.class, ClusterSettings, +                    .class);, +                list.add(constructor.newInstance(settings, clusterSettings));, +            } catch (NoSuchMethodException e) {, +                Constructor<? extends AllocationDecider> constructor = deciderClass.getConstructor(Settings.class);, +                list.add(constructor.newInstance(settings));, +            }, +        }, +        return new AllocationDeciders(settings, list.toArray(new AllocationDecider[0]));, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +                options.compilerArgs << '-Werror' << '-proc:none' << '-Xlint:all,-path,-serial,-options,-deprecation' << '-Xdoclint:all' << '-Xdoclint:-missing', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +    String jvmArgs = System.getProperty('tests.jvm.argline', ''), +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]cluster[/\\]routing[/\\]allocation[/\\]CatAllocationTestCase.java" checks="LineLength" />, +  <suppress files="test[/\\]framework[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]test[/\\]ESAllocationTestCase.java" checks="LineLength" />, +++ b/benchmarks/build.gradle, +++ b/benchmarks/src/main/java/org/elasticsearch/benchmark/routing/allocation/Allocators.java, +        return createAllocationService(settings, new ClusterSettings(Settings.Builder.EMPTY_SETTINGS, ClusterSettings, +        List<AllocationDecider> list = new ArrayList<>();, +        // Keep a deterministic order of allocation deciders for the benchmark, +        for (Class<? extends AllocationDecider> deciderClass : ClusterModule.DEFAULT_ALLOCATION_DECIDERS) {, +            try {, +                Constructor<? extends AllocationDecider> constructor = deciderClass.getConstructor(Settings.class, ClusterSettings, +                    .class);, +                list.add(constructor.newInstance(settings, clusterSettings));, +            } catch (NoSuchMethodException e) {, +                Constructor<? extends AllocationDecider> constructor = deciderClass.getConstructor(Settings.class);, +                list.add(constructor.newInstance(settings));, +            }, +        }, +        return new AllocationDeciders(settings, list.toArray(new AllocationDecider[0]));, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +                options.compilerArgs << '-Werror' << '-proc:none' << '-Xlint:all,-path,-serial,-options,-deprecation' << '-Xdoclint:all' << '-Xdoclint:-missing', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +    String jvmArgs = System.getProperty('tests.jvm.argline', ''), +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]cluster[/\\]routing[/\\]allocation[/\\]CatAllocationTestCase.java" checks="LineLength" />]