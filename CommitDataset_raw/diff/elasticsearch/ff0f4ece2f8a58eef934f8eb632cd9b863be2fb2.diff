[+++ b/x-pack/docs/build.gradle, +setups['sample_job'] = ''', +  - do:, +      xpack.ml.put_job:, +        job_id: "sample_job", +        body:  >, +          {, +            "description" : "Very basic job",, +            "analysis_config" : {, +              "bucket_span":"10m",, +              "detectors" :[, +              {, +                "function": "count", +              }, +            ]},, +            "data_description" : {, +              "time_field":"timestamp",, +              "time_format": "epoch_ms", +            }, +          }, +''', +++ b/x-pack/docs/build.gradle, +setups['sample_job'] = ''', +  - do:, +      xpack.ml.put_job:, +        job_id: "sample_job", +        body:  >, +          {, +            "description" : "Very basic job",, +            "analysis_config" : {, +              "bucket_span":"10m",, +              "detectors" :[, +              {, +                "function": "count", +              }, +            ]},, +            "data_description" : {, +              "time_field":"timestamp",, +              "time_format": "epoch_ms", +            }, +          }, +''', +++ b/x-pack/docs/en/ml/customurl.asciidoc, +[role="xpack"], +=== Adding custom URLs to machine learning results, +attach one or more custom URLs. , +The custom URLs provide links from the anomalies table in the *Anomaly Explorer*, +or *Single Metric Viewer* window in {kib} to {kib} dashboards, the *Discovery* , +page, or external websites. For example, you can define a custom URL that , +provides a way for users to drill down to the source data from the results set., +When you edit a job in {kib}, it simplifies the creation of the custom URLs for  , +{kib} dashboards and the *Discover* page and it enables you to test your URLs. , +For example:, +image::images/ml-customurl-edit.jpg["Edit a job to add a custom URL"], +, +For each custom URL, you must supply the URL and a label, which is the link text, +that appears in the anomalies table. You can also optionally supply a time , +range. For example, these are the values that are added for `My link 1`:, +, +[role="screenshot"], +image::images/ml-customurl-detail.jpg["An example of a label and URL"], +, +As in this case, the custom URL can contain , +<<ml-configuring-url-strings,dollar sign delimited tokens>>, which , +are populated when you click the link in the anomalies table. In this example, , +the custom URL contains `$earliest$`, `$latest$`, and `$service$` tokens, which , +pass the beginning and end of the time span of the selected anomaly and the , +pertinent `service` field value to the target page. If you were interested in the following anomaly, for example: , +, +[role="screenshot"], +image::images/ml-customurl.jpg["An example of the custom URL links in the Anomaly Explorer anomalies table"], +, +...clicking `My Link 1` opens the *Discover* page and shows results for the , +service and date that were identified in the anomaly:, +, +[role="screenshot"], +image::images/ml-customurl-discover.jpg["An example of the results on the Discover page"], +, +Since we specified a time range of 2 hours, the time filter restricts the , +results to the time period two hours before and after the anomaly., +, +You can also specify these custom URL settings when you create or update jobs by , +using the {ml} APIs., +[[ml-configuring-url-strings]], +set to `Auto` and a one hour interval was chosen. You can override this behavior , +by using the `time_range` setting. , +For example, the following API updates a job to add a custom URL that uses , +`$earliest$`, `$latest$`, and `$mlcategoryterms$` tokens:, +POST _xpack/ml/anomaly_detectors/sample_job/_update, +            "time_range": "1h",, +//CONSOLE, +//TEST[setup:sample_job], +*Discover* page and displays source data for the period one hour before and , +after the anomaly occurred. Since this job was categorizing log messages, some , +`$mlcategoryterms$` token values that were passed to the target page for an , +example anomaly are as follows:, +++ b/x-pack/docs/build.gradle, +setups['sample_job'] = ''', +  - do:, +      xpack.ml.put_job:]