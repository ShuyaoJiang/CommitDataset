[+++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java, +                    shardsStats.add(new ShardStats(indexShard, SHARD_STATS_FLAGS));, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java, +                    shardsStats.add(new ShardStats(indexShard, SHARD_STATS_FLAGS));, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/ShardStats.java, +import org.elasticsearch.index.shard.ShardPath;, +    private CommonStats commonStats;, +    private CommitStats commitStats;, +    private String dataPath;, +    private String statePath;, +    private boolean isCustomDataPath;, +    public ShardStats(IndexShard indexShard, CommonStatsFlags flags) {, +        this.shardRouting = indexShard.routingEntry();, +        this.dataPath = indexShard.shardPath().getRootDataPath().toString();, +        this.statePath = indexShard.shardPath().getRootStatePath().toString();, +        this.isCustomDataPath = indexShard.shardPath().isCustomDataPath();, +    public String getDataPath() {, +        return dataPath;, +    }, +, +    public String getStatePath() {, +        return statePath;, +    }, +, +    public boolean isCustomDataPath() {, +        return isCustomDataPath;, +    }, +, +        statePath = in.readString();, +        dataPath = in.readString();, +        isCustomDataPath = in.readBoolean();, +        out.writeString(statePath);, +        out.writeString(dataPath);, +        out.writeBoolean(isCustomDataPath);, +        builder.startObject(Fields.SHARD_PATH);, +        builder.field(Fields.STATE_PATH, statePath);, +        builder.field(Fields.DATA_PATH, dataPath);, +        builder.field(Fields.IS_CUSTOM_DATA_PATH, isCustomDataPath);, +        builder.endObject();, +        static final XContentBuilderString STATE_PATH = new XContentBuilderString("state_path");, +        static final XContentBuilderString DATA_PATH = new XContentBuilderString("data_path");, +        static final XContentBuilderString IS_CUSTOM_DATA_PATH = new XContentBuilderString("is_custom_data_path");, +        static final XContentBuilderString SHARD_PATH = new XContentBuilderString("shard_path");, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java, +                    shardsStats.add(new ShardStats(indexShard, SHARD_STATS_FLAGS));, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/ShardStats.java, +import org.elasticsearch.index.shard.ShardPath;, +    private CommonStats commonStats;, +    private CommitStats commitStats;, +    private String dataPath;, +    private String statePath;, +    private boolean isCustomDataPath;, +    public ShardStats(IndexShard indexShard, CommonStatsFlags flags) {, +        this.shardRouting = indexShard.routingEntry();, +        this.dataPath = indexShard.shardPath().getRootDataPath().toString();, +        this.statePath = indexShard.shardPath().getRootStatePath().toString();, +        this.isCustomDataPath = indexShard.shardPath().isCustomDataPath();, +    public String getDataPath() {, +        return dataPath;, +    }, +, +    public String getStatePath() {, +        return statePath;, +    }, +, +    public boolean isCustomDataPath() {, +        return isCustomDataPath;, +    }, +, +        statePath = in.readString();, +        dataPath = in.readString();, +        isCustomDataPath = in.readBoolean();, +        out.writeString(statePath);, +        out.writeString(dataPath);, +        out.writeBoolean(isCustomDataPath);, +        builder.startObject(Fields.SHARD_PATH);, +        builder.field(Fields.STATE_PATH, statePath);, +        builder.field(Fields.DATA_PATH, dataPath);, +        builder.field(Fields.IS_CUSTOM_DATA_PATH, isCustomDataPath);, +        builder.endObject();, +        static final XContentBuilderString STATE_PATH = new XContentBuilderString("state_path");, +        static final XContentBuilderString DATA_PATH = new XContentBuilderString("data_path");, +        static final XContentBuilderString IS_CUSTOM_DATA_PATH = new XContentBuilderString("is_custom_data_path");, +        static final XContentBuilderString SHARD_PATH = new XContentBuilderString("shard_path");, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/TransportIndicesStatsAction.java, +        return new ShardStats(indexShard, flags);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java, +                    shardsStats.add(new ShardStats(indexShard, SHARD_STATS_FLAGS));, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/ShardStats.java, +import org.elasticsearch.index.shard.ShardPath;, +    private CommonStats commonStats;, +    private CommitStats commitStats;, +    private String dataPath;, +    private String statePath;, +    private boolean isCustomDataPath;, +    public ShardStats(IndexShard indexShard, CommonStatsFlags flags) {, +        this.shardRouting = indexShard.routingEntry();, +        this.dataPath = indexShard.shardPath().getRootDataPath().toString();, +        this.statePath = indexShard.shardPath().getRootStatePath().toString();, +        this.isCustomDataPath = indexShard.shardPath().isCustomDataPath();]