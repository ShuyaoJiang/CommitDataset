[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/xcontent/AbstractFieldMapper.java, +        if (!names.name().equals(names.indexNameClean())) {, +        }, +        if (boost != 1.0f) {, +        }, +        if (indexAnalyzer != null && searchAnalyzer != null && indexAnalyzer.name().equals(searchAnalyzer.name()) && !indexAnalyzer.name().startsWith("_")) {, +            // same analyzers, output it once, +            builder.field("analyzer", indexAnalyzer.name());, +        } else {, +    }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/xcontent/AbstractFieldMapper.java, +        if (!names.name().equals(names.indexNameClean())) {, +        }, +        if (boost != 1.0f) {, +        }, +        if (indexAnalyzer != null && searchAnalyzer != null && indexAnalyzer.name().equals(searchAnalyzer.name()) && !indexAnalyzer.name().startsWith("_")) {, +            // same analyzers, output it once, +            builder.field("analyzer", indexAnalyzer.name());, +        } else {, +    }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/xcontent/AllFieldMapper.java, +        // if all are defaults, no need to write it at all, +        if (enabled == Defaults.ENABLED && store == Defaults.STORE && termVector == Defaults.TERM_VECTOR && indexAnalyzer == null && searchAnalyzer == null) {, +            return;, +        }, +        if (enabled != Defaults.ENABLED) {, +        }, +        if (store != Defaults.STORE) {, +        }, +        if (termVector != Defaults.TERM_VECTOR) {, +        }, +        if (indexAnalyzer != null && searchAnalyzer != null && indexAnalyzer.name().equals(searchAnalyzer.name()) && !indexAnalyzer.name().startsWith("_")) {, +            // same analyzers, output it once, +            builder.field("analyzer", indexAnalyzer.name());, +        } else {, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/xcontent/AbstractFieldMapper.java, +        if (!names.name().equals(names.indexNameClean())) {, +        }, +        if (boost != 1.0f) {, +        }, +        if (indexAnalyzer != null && searchAnalyzer != null && indexAnalyzer.name().equals(searchAnalyzer.name()) && !indexAnalyzer.name().startsWith("_")) {, +            // same analyzers, output it once, +            builder.field("analyzer", indexAnalyzer.name());, +        } else {, +    }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/xcontent/AllFieldMapper.java, +        // if all are defaults, no need to write it at all, +        if (enabled == Defaults.ENABLED && store == Defaults.STORE && termVector == Defaults.TERM_VECTOR && indexAnalyzer == null && searchAnalyzer == null) {, +            return;, +        }, +        if (enabled != Defaults.ENABLED) {, +        }, +        if (store != Defaults.STORE) {, +        }, +        if (termVector != Defaults.TERM_VECTOR) {, +        }, +        if (indexAnalyzer != null && searchAnalyzer != null && indexAnalyzer.name().equals(searchAnalyzer.name()) && !indexAnalyzer.name().startsWith("_")) {, +            // same analyzers, output it once, +            builder.field("analyzer", indexAnalyzer.name());, +        } else {, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/xcontent/BinaryFieldMapper.java, +        if (!names.name().equals(names.indexNameClean())) {, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java, + * @author kimchy (shay.banon), +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/xcontent/AbstractFieldMapper.java, +        if (!names.name().equals(names.indexNameClean())) {, +        }, +        if (boost != 1.0f) {, +        }, +        if (indexAnalyzer != null && searchAnalyzer != null && indexAnalyzer.name().equals(searchAnalyzer.name()) && !indexAnalyzer.name().startsWith("_")) {, +            // same analyzers, output it once, +            builder.field("analyzer", indexAnalyzer.name());, +        } else {, +    }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/xcontent/AllFieldMapper.java, +        // if all are defaults, no need to write it at all, +        if (enabled == Defaults.ENABLED && store == Defaults.STORE && termVector == Defaults.TERM_VECTOR && indexAnalyzer == null && searchAnalyzer == null) {, +            return;, +        }, +        if (enabled != Defaults.ENABLED) {, +        }, +        if (store != Defaults.STORE) {, +        }, +        if (termVector != Defaults.TERM_VECTOR) {, +        }, +        if (indexAnalyzer != null && searchAnalyzer != null && indexAnalyzer.name().equals(searchAnalyzer.name()) && !indexAnalyzer.name().startsWith("_")) {, +            // same analyzers, output it once, +            builder.field("analyzer", indexAnalyzer.name());, +        } else {]