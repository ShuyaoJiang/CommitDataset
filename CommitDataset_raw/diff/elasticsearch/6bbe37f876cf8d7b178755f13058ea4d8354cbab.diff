[+++ b/src/test/java/org/elasticsearch/test/integration/nested/SimpleNestedTests.java, +        assertThat(termsStatsFacet.entries().get(0).term().string(), equalTo("blue"));, +        assertThat(termsStatsFacet.entries().get(1).term().string(), equalTo("yellow"));, +        assertThat(termsStatsFacet.entries().get(2).term().string(), equalTo("green"));, +        assertThat(termsStatsFacet.entries().get(3).term().string(), equalTo("red"));, +        assertThat(termsStatsFacet.entries().get(0).term().string(), equalTo("blue"));, +++ b/src/test/java/org/elasticsearch/test/integration/nested/SimpleNestedTests.java, +        assertThat(termsStatsFacet.entries().get(0).term().string(), equalTo("blue"));, +        assertThat(termsStatsFacet.entries().get(1).term().string(), equalTo("yellow"));, +        assertThat(termsStatsFacet.entries().get(2).term().string(), equalTo("green"));, +        assertThat(termsStatsFacet.entries().get(3).term().string(), equalTo("red"));, +        assertThat(termsStatsFacet.entries().get(0).term().string(), equalTo("blue"));, +++ b/src/test/java/org/elasticsearch/test/integration/search/child/SimpleChildQuerySearchTests.java, +        assertThat(termsFacet.entries().get(0).term().string(), equalTo("red"));, +        assertThat(termsFacet.entries().get(1).term().string(), equalTo("yellow"));, +++ b/src/test/java/org/elasticsearch/test/integration/nested/SimpleNestedTests.java, +        assertThat(termsStatsFacet.entries().get(0).term().string(), equalTo("blue"));, +        assertThat(termsStatsFacet.entries().get(1).term().string(), equalTo("yellow"));, +        assertThat(termsStatsFacet.entries().get(2).term().string(), equalTo("green"));, +        assertThat(termsStatsFacet.entries().get(3).term().string(), equalTo("red"));, +        assertThat(termsStatsFacet.entries().get(0).term().string(), equalTo("blue"));, +++ b/src/test/java/org/elasticsearch/test/integration/search/child/SimpleChildQuerySearchTests.java, +        assertThat(termsFacet.entries().get(0).term().string(), equalTo("red"));, +        assertThat(termsFacet.entries().get(1).term().string(), equalTo("yellow"));, +++ b/src/test/java/org/elasticsearch/test/integration/search/facet/SimpleFacetsTests.java, +            assertThat(facet.entries().get(0).term().string(), anyOf(equalTo("green"), equalTo("blue")));, +            assertThat(facet.entries().get(1).term().string(), anyOf(equalTo("green"), equalTo("blue")));, +            assertThat(facet.entries().get(0).term().string(), anyOf(equalTo("green"), equalTo("blue")));, +            assertThat(facet.entries().get(1).term().string(), anyOf(equalTo("green"), equalTo("blue")));, +            assertThat(facet.entries().get(0).term().string(), anyOf(equalTo("green"), equalTo("blue")));, +            assertThat(facet.entries().get(1).term().string(), anyOf(equalTo("green"), equalTo("blue")));, +            assertThat(facet.entries().get(0).term().string(), equalTo("111"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("111"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("test1"));, +            assertThat(facet.entries().get(1).term().string(), equalTo("test2"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("111"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("yyy"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("111"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("2000"));, +            assertThat(facet.entries().get(1).term().string(), anyOf(equalTo("1000"), equalTo("3000")));, +            assertThat(facet.entries().get(2).term().string(), anyOf(equalTo("1000"), equalTo("3000")));, +            assertThat(facet.entries().get(0).term().string(), equalTo("2000"));, +            assertThat(facet.entries().get(1).term().string(), equalTo("1000"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("111.1"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("2000.1"));, +            assertThat(facet.entries().get(1).term().string(), anyOf(equalTo("1000.1"), equalTo("3000.1")));, +            assertThat(facet.entries().get(2).term().string(), anyOf(equalTo("1000.1"), equalTo("3000.1")));, +            assertThat(facet.entries().get(0).term().string(), equalTo("111"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("111"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("111"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("111"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("111"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("111"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("yyy"));, +            assertThat(facet.entries().get(1).term().string(), anyOf(equalTo("xxx"), equalTo("zzz")));, +            assertThat(facet.entries().get(2).term().string(), anyOf(equalTo("xxx"), equalTo("zzz")));, +            assertThat(facet.entries().get(0).term().string(), equalTo("yyy"));, +            assertThat(facet.entries().get(1).term().string(), anyOf(equalTo("xxx"), equalTo("zzz")));, +            assertThat(facet.entries().get(0).term().string(), anyOf(equalTo("xxx"), equalTo("zzz")));, +            assertThat(facet.entries().get(1).term().string(), anyOf(equalTo("xxx"), equalTo("zzz")));, +            assertThat(facet.entries().get(0).term().string(), equalTo("xxx"));, +            assertThat(facet.entries().get(1).term().string(), equalTo("yyy"));, +            assertThat(facet.entries().get(2).term().string(), equalTo("zzz"));, +            assertThat(facet.entries().get(2).term().string(), equalTo("xxx"));, +            assertThat(facet.entries().get(1).term().string(), equalTo("yyy"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("zzz"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("xxxa"));, +            assertThat(facet.entries().get(1).term().string(), equalTo("yyya"));, +            assertThat(facet.entries().get(2).term().string(), equalTo("zzza"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("yyy"));, +            assertThat(facet.entries().get(1).term().string(), equalTo("zzz"));, +            assertThat(facet.entries().get(0).term().string(), anyOf(equalTo("111"), equalTo("yyy")));, +            assertThat(facet.entries().get(1).term().string(), anyOf(equalTo("111"), equalTo("yyy")));, +            assertThat(facet.entries().get(2).term().string(), anyOf(equalTo("zzz"), equalTo("xxx")));, +            assertThat(facet.entries().get(3).term().string(), anyOf(equalTo("zzz"), equalTo("xxx")));, +            assertThat(facet.entries().get(0).term().string(), anyOf(equalTo("xxx"), equalTo("yyy"), equalTo("zzz")));, +            assertThat(facet.entries().get(1).term().string(), anyOf(equalTo("xxx"), equalTo("yyy"), equalTo("zzz")));, +            assertThat(facet.entries().get(2).term().string(), anyOf(equalTo("xxx"), equalTo("yyy"), equalTo("zzz")));, +            assertThat(facet.entries().get(0).term().string(), equalTo("111"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("yyy"));, +                assertThat(facet.entries().get(j).term().string(), anyOf(equalTo("foo"), equalTo("bar"), equalTo("baz")));, +            assertThat(facet.entries().get(0).term().string(), equalTo("xxx"));, +            assertThat(facet.entries().get(1).term().string(), equalTo("yyy"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("xxx"));, +            assertThat(facet.entries().get(1).term().string(), equalTo("yyy"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("xxx"));, +            assertThat(facet.entries().get(1).term().string(), equalTo("yyy"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("xxx"));, +            assertThat(facet.entries().get(1).term().string(), equalTo("yyy"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("yyy"));, +            assertThat(facet.entries().get(1).term().string(), equalTo("xxx"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("yyy"));, +            assertThat(facet.entries().get(1).term().string(), equalTo("xxx"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("xxx"));, +            assertThat(facet.entries().get(1).term().string(), equalTo("yyy"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("xxx"));, +            assertThat(facet.entries().get(1).term().string(), equalTo("yyy"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("xxx"));, +            assertThat(facet.entries().get(1).term().string(), equalTo("yyy"));, +            assertThat(facet.entries().get(0).term().string(), equalTo("xxx"));]