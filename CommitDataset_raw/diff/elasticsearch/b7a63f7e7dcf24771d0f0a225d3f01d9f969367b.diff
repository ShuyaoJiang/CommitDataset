[+++ b/docs/build.gradle, +/* List of files that have snippets that will not work until platinum tests can occur ... */, +        'reference/ml/apis/delete-calendar-event.asciidoc',, +        'reference/ml/apis/get-bucket.asciidoc',, +        'reference/ml/apis/get-category.asciidoc',, +        'reference/ml/apis/get-influencer.asciidoc',, +        'reference/ml/apis/get-job-stats.asciidoc',, +        'reference/ml/apis/get-overall-buckets.asciidoc',, +        'reference/ml/apis/get-record.asciidoc',, +        'reference/ml/apis/get-snapshot.asciidoc',, +        'reference/ml/apis/post-data.asciidoc',, +        'reference/ml/apis/revert-snapshot.asciidoc',, +        'reference/ml/apis/update-snapshot.asciidoc',, +buildRestTests.setups['sample_job'] = ''', +  - do:, +      xpack.ml.put_job:, +        job_id: "sample_job", +        body:  >, +          {, +            "description" : "Very basic job",, +            "analysis_config" : {, +              "bucket_span":"10m",, +              "detectors" :[, +              {, +                "function": "count", +              }, +            ]},, +            "data_description" : {, +              "time_field":"timestamp",, +              "time_format": "epoch_ms", +            }, +          }, +''', +buildRestTests.setups['farequote_index'] = ''', +  - do:, +        indices.create:, +          index: farequote, +          body:, +            settings:, +              number_of_shards: 1, +              number_of_replicas: 0, +            mappings:, +              metric:, +                properties:, +                  time:, +                    type: date, +                  responsetime:, +                    type: float, +                  airline:, +                     type: keyword, +                  doc_count:, +                     type: integer       , +''', +buildRestTests.setups['farequote_data'] = buildRestTests.setups['farequote_index'] + ''', +  - do:, +        bulk:, +          index: farequote, +          type: metric, +          refresh: true, +          body: |, +            {"index": {"_id":"1"}}, +            {"airline":"JZA","responsetime":990.4628,"time":"2016-02-07T00:00:00+0000", "doc_count": 5}, +            {"index": {"_id":"2"}}, +            {"airline":"JBU","responsetime":877.5927,"time":"2016-02-07T00:00:00+0000", "doc_count": 23}, +            {"index": {"_id":"3"}}            , +            {"airline":"KLM","responsetime":1355.4812,"time":"2016-02-07T00:00:00+0000", "doc_count": 42}, +''', +buildRestTests.setups['farequote_job'] = buildRestTests.setups['farequote_data'] + ''', +  - do:, +      xpack.ml.put_job:, +        job_id: "farequote", +        body:  >, +          {, +            "analysis_config": {, +              "bucket_span": "60m",, +              "detectors": [{, +                "function": "mean",, +                "field_name": "responsetime",, +                "by_field_name": "airline", +              }],, +            "summary_count_field_name": "doc_count", +            },, +            "data_description": {, +              "time_field": "time", +            }, +          }, +''', +buildRestTests.setups['farequote_datafeed'] = buildRestTests.setups['farequote_job'] + ''', +  - do:, +      xpack.ml.put_datafeed:, +        datafeed_id: "datafeed-farequote", +        body:  >, +          {, +          "job_id":"farequote",, +          "indexes":"farequote", +          }, +'''          , +buildRestTests.setups['server_metrics_index'] = ''', +  - do:, +        indices.create:]