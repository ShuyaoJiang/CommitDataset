[+++ b/src/main/java/org/elasticsearch/action/percolate/TransportMultiPercolateAction.java, +                    new ASyncAction(request, percolateRequests, listener, clusterState).run();, +            new ASyncAction(request, percolateRequests, listener, clusterState).run();, +        final MultiPercolateRequest multiPercolateRequest;, +        ASyncAction(MultiPercolateRequest multiPercolateRequest, List<Object> percolateRequests, ActionListener<MultiPercolateResponse> finalListener, ClusterState clusterState) {, +            this.multiPercolateRequest = multiPercolateRequest;, +                            requestsByShard.put(shardId, requests = new TransportShardMultiPercolateAction.Request(multiPercolateRequest, shardId.getIndex(), shardId.getId(), percolateRequest.preference()));, +++ b/src/main/java/org/elasticsearch/action/percolate/TransportMultiPercolateAction.java, +                    new ASyncAction(request, percolateRequests, listener, clusterState).run();, +            new ASyncAction(request, percolateRequests, listener, clusterState).run();, +        final MultiPercolateRequest multiPercolateRequest;, +        ASyncAction(MultiPercolateRequest multiPercolateRequest, List<Object> percolateRequests, ActionListener<MultiPercolateResponse> finalListener, ClusterState clusterState) {, +            this.multiPercolateRequest = multiPercolateRequest;, +                            requestsByShard.put(shardId, requests = new TransportShardMultiPercolateAction.Request(multiPercolateRequest, shardId.getIndex(), shardId.getId(), percolateRequest.preference()));, +++ b/src/main/java/org/elasticsearch/action/percolate/TransportShardMultiPercolateAction.java, +        Request(MultiPercolateRequest multiPercolateRequest, String concreteIndex, int shardId, String preference) {, +            super(multiPercolateRequest, concreteIndex);]