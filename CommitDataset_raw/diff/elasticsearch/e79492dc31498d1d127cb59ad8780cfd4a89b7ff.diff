[+++ b/plugins/discovery-ec2/build.gradle, +++ b/plugins/discovery-ec2/build.gradle, +++ b/plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImpl.java, +import com.amazonaws.auth.DefaultAWSCredentialsProviderChain;, +            credentials = new DefaultAWSCredentialsProviderChain();, +            credentials = new StaticCredentialsProvider(new BasicAWSCredentials(key, secret));, +++ b/plugins/discovery-ec2/build.gradle, +++ b/plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImpl.java, +import com.amazonaws.auth.DefaultAWSCredentialsProviderChain;, +            credentials = new DefaultAWSCredentialsProviderChain();, +            credentials = new StaticCredentialsProvider(new BasicAWSCredentials(key, secret));, +++ b/plugins/discovery-ec2/src/test/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImplTests.java, +import com.amazonaws.auth.DefaultAWSCredentialsProviderChain;, +import static org.hamcrest.Matchers.instanceOf;, +        assertThat(credentialsProvider, instanceOf(DefaultAWSCredentialsProviderChain.class));, +++ b/plugins/discovery-ec2/build.gradle, +++ b/plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImpl.java, +import com.amazonaws.auth.DefaultAWSCredentialsProviderChain;, +            credentials = new DefaultAWSCredentialsProviderChain();, +            credentials = new StaticCredentialsProvider(new BasicAWSCredentials(key, secret));, +++ b/plugins/discovery-ec2/src/test/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImplTests.java, +import com.amazonaws.auth.DefaultAWSCredentialsProviderChain;, +import static org.hamcrest.Matchers.instanceOf;, +        assertThat(credentialsProvider, instanceOf(DefaultAWSCredentialsProviderChain.class));, +++ b/plugins/repository-s3/build.gradle, +++ b/plugins/discovery-ec2/build.gradle, +++ b/plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImpl.java, +import com.amazonaws.auth.DefaultAWSCredentialsProviderChain;, +            credentials = new DefaultAWSCredentialsProviderChain();, +            credentials = new StaticCredentialsProvider(new BasicAWSCredentials(key, secret));, +++ b/plugins/discovery-ec2/src/test/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImplTests.java, +import com.amazonaws.auth.DefaultAWSCredentialsProviderChain;, +import static org.hamcrest.Matchers.instanceOf;, +        assertThat(credentialsProvider, instanceOf(DefaultAWSCredentialsProviderChain.class));, +++ b/plugins/repository-s3/build.gradle, +++ b/plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/InternalAwsS3Service.java, +import com.amazonaws.auth.DefaultAWSCredentialsProviderChain;, +            credentials = new DefaultAWSCredentialsProviderChain();, +            credentials = new StaticCredentialsProvider(new BasicAWSCredentials(key, secret));, +++ b/plugins/discovery-ec2/build.gradle, +++ b/plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImpl.java, +import com.amazonaws.auth.DefaultAWSCredentialsProviderChain;, +            credentials = new DefaultAWSCredentialsProviderChain();, +            credentials = new StaticCredentialsProvider(new BasicAWSCredentials(key, secret));, +++ b/plugins/discovery-ec2/src/test/java/org/elasticsearch/cloud/aws/AwsEc2ServiceImplTests.java, +import com.amazonaws.auth.DefaultAWSCredentialsProviderChain;, +import static org.hamcrest.Matchers.instanceOf;, +        assertThat(credentialsProvider, instanceOf(DefaultAWSCredentialsProviderChain.class));, +++ b/plugins/repository-s3/build.gradle, +++ b/plugins/repository-s3/src/main/java/org/elasticsearch/cloud/aws/InternalAwsS3Service.java, +import com.amazonaws.auth.DefaultAWSCredentialsProviderChain;, +            credentials = new DefaultAWSCredentialsProviderChain();, +            credentials = new StaticCredentialsProvider(new BasicAWSCredentials(key, secret));, +++ b/plugins/repository-s3/src/test/java/org/elasticsearch/cloud/aws/AwsS3ServiceImplTests.java, +import com.amazonaws.auth.DefaultAWSCredentialsProviderChain;, +import static org.hamcrest.Matchers.instanceOf;, +        assertThat(credentialsProvider, instanceOf(DefaultAWSCredentialsProviderChain.class));]