[+++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/process/autodetect/state/CategorizerState.java, +    /**, +     * Given the id of a categorizer state document it extracts the job id, +     * @param docId the categorizer state document id, +     * @return the job id or {@code null} if the id is not valid, +     */, +    public static final String extractJobId(String docId) {, +        int suffixIndex = docId.lastIndexOf("_" + TYPE);, +        return suffixIndex <= 0 ? null : docId.substring(0, suffixIndex);, +    }, +, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/process/autodetect/state/CategorizerState.java, +    /**, +     * Given the id of a categorizer state document it extracts the job id, +     * @param docId the categorizer state document id, +     * @return the job id or {@code null} if the id is not valid, +     */, +    public static final String extractJobId(String docId) {, +        int suffixIndex = docId.lastIndexOf("_" + TYPE);, +        return suffixIndex <= 0 ? null : docId.substring(0, suffixIndex);, +    }, +, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/process/autodetect/state/ModelState.java, +    /**, +     * Given the id of a state document it extracts the job id, +     * @param docId the state document id, +     * @return the job id or {@code null} if the id is not valid, +     */, +    public static final String extractJobId(String docId) {, +        int suffixIndex = docId.lastIndexOf("_" + TYPE + "_");, +        return suffixIndex <= 0 ? null : docId.substring(0, suffixIndex);, +    }, +, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/process/autodetect/state/CategorizerState.java, +    /**, +     * Given the id of a categorizer state document it extracts the job id, +     * @param docId the categorizer state document id, +     * @return the job id or {@code null} if the id is not valid, +     */, +    public static final String extractJobId(String docId) {, +        int suffixIndex = docId.lastIndexOf("_" + TYPE);, +        return suffixIndex <= 0 ? null : docId.substring(0, suffixIndex);, +    }, +, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/process/autodetect/state/ModelState.java, +    /**, +     * Given the id of a state document it extracts the job id, +     * @param docId the state document id, +     * @return the job id or {@code null} if the id is not valid, +     */, +    public static final String extractJobId(String docId) {, +        int suffixIndex = docId.lastIndexOf("_" + TYPE + "_");, +        return suffixIndex <= 0 ? null : docId.substring(0, suffixIndex);, +    }, +, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/process/autodetect/state/Quantiles.java, +    /**, +     * Given the id of a quantiles document it extracts the job id, +     * @param docId the quantiles document id, +     * @return the job id or {@code null} if the id is not valid, +     */, +    public static final String extractJobId(String docId) {, +        int suffixIndex = docId.lastIndexOf("_" + TYPE);, +        return suffixIndex <= 0 ? null : docId.substring(0, suffixIndex);, +    }, +, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/process/autodetect/state/CategorizerState.java, +    /**, +     * Given the id of a categorizer state document it extracts the job id, +     * @param docId the categorizer state document id, +     * @return the job id or {@code null} if the id is not valid, +     */, +    public static final String extractJobId(String docId) {, +        int suffixIndex = docId.lastIndexOf("_" + TYPE);, +        return suffixIndex <= 0 ? null : docId.substring(0, suffixIndex);, +    }, +, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/process/autodetect/state/ModelState.java, +    /**, +     * Given the id of a state document it extracts the job id, +     * @param docId the state document id, +     * @return the job id or {@code null} if the id is not valid, +     */, +    public static final String extractJobId(String docId) {, +        int suffixIndex = docId.lastIndexOf("_" + TYPE + "_");, +        return suffixIndex <= 0 ? null : docId.substring(0, suffixIndex);, +    }, +, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/process/autodetect/state/Quantiles.java, +    /**, +     * Given the id of a quantiles document it extracts the job id, +     * @param docId the quantiles document id, +     * @return the job id or {@code null} if the id is not valid, +     */, +    public static final String extractJobId(String docId) {, +        int suffixIndex = docId.lastIndexOf("_" + TYPE);, +        return suffixIndex <= 0 ? null : docId.substring(0, suffixIndex);, +    }, +, +++ b/x-pack/plugin/core/src/test/java/org/elasticsearch/xpack/core/ml/job/process/autodetect/state/CategorizerStateTests.java]