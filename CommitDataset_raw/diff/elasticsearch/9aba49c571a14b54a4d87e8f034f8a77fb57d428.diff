[+++ b/core/src/test/java/org/elasticsearch/discovery/zen/ZenDiscoveryUnitTests.java, +import java.io.Closeable;, +import java.io.IOException;, +import java.util.ArrayDeque;, +import java.util.ArrayList;, +import java.util.Arrays;, +import java.util.Collections;, +import java.util.EnumSet;, +import java.util.HashSet;, +import java.util.List;, +import java.util.Set;, +import java.util.concurrent.TimeUnit;, +import java.util.concurrent.atomic.AtomicBoolean;, +import java.util.stream.Collectors;, +, +        ArrayDeque<Closeable> toClose = new ArrayDeque<>();, +            toClose.addFirst(masterTransport);, +            toClose.addFirst(masterClusterService);, +            toClose.addFirst(masterZen);, +            toClose.addFirst(otherTransport);, +            toClose.addFirst(otherClusterService);, +            toClose.addFirst(otherZen);, +        ArrayDeque<Closeable> toClose = new ArrayDeque<>();, +            toClose.addFirst(masterTransport);, +            toClose.addFirst(masterClusterService);, +            toClose.addFirst(masterZen);]