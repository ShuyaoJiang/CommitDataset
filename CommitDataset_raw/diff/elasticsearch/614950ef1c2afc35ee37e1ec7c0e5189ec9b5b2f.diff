[+++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +                rootProject.rootProject.ext.requiredJavaVersions = null // reset to null to indicate the pre-execution checks have executed, +        } else if (rootProject.rootProject.requiredJavaVersions == null) {, +            // check directly if the version is present since we are already executing, +            if (rootProject.javaVersions.get(version) == null) {, +                throw new GradleException("JAVA${version}_HOME required to run task:\n${task}"), +        } else {, +    }]