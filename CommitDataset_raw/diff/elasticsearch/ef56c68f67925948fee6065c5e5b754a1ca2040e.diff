[+++ b/src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/TransportDeleteWarmerAction.java, +                            IndexMetaData.Builder indexBuilder = IndexMetaData.builder(indexMetaData).putCustom(IndexWarmersMetaData.TYPE, warmers);, +++ b/src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/TransportDeleteWarmerAction.java, +                            IndexMetaData.Builder indexBuilder = IndexMetaData.builder(indexMetaData).putCustom(IndexWarmersMetaData.TYPE, warmers);, +++ b/src/main/java/org/elasticsearch/action/admin/indices/warmer/put/TransportPutWarmerAction.java, +                            IndexMetaData.Builder indexBuilder = IndexMetaData.builder(indexMetaData).putCustom(IndexWarmersMetaData.TYPE, warmers);, +++ b/src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/TransportDeleteWarmerAction.java, +                            IndexMetaData.Builder indexBuilder = IndexMetaData.builder(indexMetaData).putCustom(IndexWarmersMetaData.TYPE, warmers);, +++ b/src/main/java/org/elasticsearch/action/admin/indices/warmer/put/TransportPutWarmerAction.java, +                            IndexMetaData.Builder indexBuilder = IndexMetaData.builder(indexMetaData).putCustom(IndexWarmersMetaData.TYPE, warmers);, +++ b/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java, +    public static Builder builder(IndexMetaData indexMetaData) {, +++ b/src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/TransportDeleteWarmerAction.java, +                            IndexMetaData.Builder indexBuilder = IndexMetaData.builder(indexMetaData).putCustom(IndexWarmersMetaData.TYPE, warmers);, +++ b/src/main/java/org/elasticsearch/action/admin/indices/warmer/put/TransportPutWarmerAction.java, +                            IndexMetaData.Builder indexBuilder = IndexMetaData.builder(indexMetaData).putCustom(IndexWarmersMetaData.TYPE, warmers);, +++ b/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java, +    public static Builder builder(IndexMetaData indexMetaData) {, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java, +                indexMetaData = IndexMetaData.builder(indexMetaData).version(indexMetaData.version() + 1).build();, +                put(IndexMetaData.builder(indexMetaData), +                put(IndexMetaData.builder(indexMetaData).numberOfReplicas(numberOfReplicas));, +++ b/src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/TransportDeleteWarmerAction.java, +                            IndexMetaData.Builder indexBuilder = IndexMetaData.builder(indexMetaData).putCustom(IndexWarmersMetaData.TYPE, warmers);, +++ b/src/main/java/org/elasticsearch/action/admin/indices/warmer/put/TransportPutWarmerAction.java, +                            IndexMetaData.Builder indexBuilder = IndexMetaData.builder(indexMetaData).putCustom(IndexWarmersMetaData.TYPE, warmers);, +++ b/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java, +    public static Builder builder(IndexMetaData indexMetaData) {, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java, +                indexMetaData = IndexMetaData.builder(indexMetaData).version(indexMetaData.version() + 1).build();, +                put(IndexMetaData.builder(indexMetaData), +                put(IndexMetaData.builder(indexMetaData).numberOfReplicas(numberOfReplicas));, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java, +                    final IndexMetaData.Builder indexMetaDataBuilder = IndexMetaData.builder(request.index).settings(actualIndexSettings);, +++ b/src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/TransportDeleteWarmerAction.java, +                            IndexMetaData.Builder indexBuilder = IndexMetaData.builder(indexMetaData).putCustom(IndexWarmersMetaData.TYPE, warmers);, +++ b/src/main/java/org/elasticsearch/action/admin/indices/warmer/put/TransportPutWarmerAction.java, +                            IndexMetaData.Builder indexBuilder = IndexMetaData.builder(indexMetaData).putCustom(IndexWarmersMetaData.TYPE, warmers);, +++ b/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java, +    public static Builder builder(IndexMetaData indexMetaData) {, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java, +                indexMetaData = IndexMetaData.builder(indexMetaData).version(indexMetaData.version() + 1).build();, +                put(IndexMetaData.builder(indexMetaData), +                put(IndexMetaData.builder(indexMetaData).numberOfReplicas(numberOfReplicas));, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java, +                    final IndexMetaData.Builder indexMetaDataBuilder = IndexMetaData.builder(request.index).settings(actualIndexSettings);, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesService.java, +                        IndexMetaData.Builder indexMetaDataBuilder = IndexMetaData.builder(indexMetaData);, +++ b/src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/TransportDeleteWarmerAction.java, +                            IndexMetaData.Builder indexBuilder = IndexMetaData.builder(indexMetaData).putCustom(IndexWarmersMetaData.TYPE, warmers);, +++ b/src/main/java/org/elasticsearch/action/admin/indices/warmer/put/TransportPutWarmerAction.java, +                            IndexMetaData.Builder indexBuilder = IndexMetaData.builder(indexMetaData).putCustom(IndexWarmersMetaData.TYPE, warmers);, +++ b/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java, +    public static Builder builder(IndexMetaData indexMetaData) {, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java, +                indexMetaData = IndexMetaData.builder(indexMetaData).version(indexMetaData.version() + 1).build();, +                put(IndexMetaData.builder(indexMetaData), +                put(IndexMetaData.builder(indexMetaData).numberOfReplicas(numberOfReplicas));, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java, +                    final IndexMetaData.Builder indexMetaDataBuilder = IndexMetaData.builder(request.index).settings(actualIndexSettings);, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesService.java, +                        IndexMetaData.Builder indexMetaDataBuilder = IndexMetaData.builder(indexMetaData);, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexStateService.java, +                    mdBuilder.put(IndexMetaData.builder(currentState.metaData().index(index)).state(IndexMetaData.State.CLOSE));, +                    mdBuilder.put(IndexMetaData.builder(currentState.metaData().index(index)).state(IndexMetaData.State.OPEN));, +++ b/src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/TransportDeleteWarmerAction.java, +                            IndexMetaData.Builder indexBuilder = IndexMetaData.builder(indexMetaData).putCustom(IndexWarmersMetaData.TYPE, warmers);, +++ b/src/main/java/org/elasticsearch/action/admin/indices/warmer/put/TransportPutWarmerAction.java, +                            IndexMetaData.Builder indexBuilder = IndexMetaData.builder(indexMetaData).putCustom(IndexWarmersMetaData.TYPE, warmers);, +++ b/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java, +    public static Builder builder(IndexMetaData indexMetaData) {, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java, +                indexMetaData = IndexMetaData.builder(indexMetaData).version(indexMetaData.version() + 1).build();, +                put(IndexMetaData.builder(indexMetaData), +                put(IndexMetaData.builder(indexMetaData).numberOfReplicas(numberOfReplicas));, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java, +                    final IndexMetaData.Builder indexMetaDataBuilder = IndexMetaData.builder(request.index).settings(actualIndexSettings);, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesService.java, +                        IndexMetaData.Builder indexMetaDataBuilder = IndexMetaData.builder(indexMetaData);, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexStateService.java, +                    mdBuilder.put(IndexMetaData.builder(currentState.metaData().index(index)).state(IndexMetaData.State.CLOSE));, +                    mdBuilder.put(IndexMetaData.builder(currentState.metaData().index(index)).state(IndexMetaData.State.OPEN));, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java, +                        IndexMetaData.Builder indexMetaDataBuilder = IndexMetaData.builder(indexMetaData);, +                        mdBuilder.put(IndexMetaData.builder(indexMetaData).putMapping(new MappingMetaData(updatedMapper)));, +                            builder.put(IndexMetaData.builder(indexMetaData).removeMapping(request.type()));, +                            builder.put(IndexMetaData.builder(indexMetaData).putMapping(mappingMd));, +++ b/src/main/java/org/elasticsearch/action/admin/indices/warmer/delete/TransportDeleteWarmerAction.java, +                            IndexMetaData.Builder indexBuilder = IndexMetaData.builder(indexMetaData).putCustom(IndexWarmersMetaData.TYPE, warmers);, +++ b/src/main/java/org/elasticsearch/action/admin/indices/warmer/put/TransportPutWarmerAction.java, +                            IndexMetaData.Builder indexBuilder = IndexMetaData.builder(indexMetaData).putCustom(IndexWarmersMetaData.TYPE, warmers);, +++ b/src/main/java/org/elasticsearch/cluster/metadata/IndexMetaData.java, +    public static Builder builder(IndexMetaData indexMetaData) {, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java, +                indexMetaData = IndexMetaData.builder(indexMetaData).version(indexMetaData.version() + 1).build();, +                put(IndexMetaData.builder(indexMetaData), +                put(IndexMetaData.builder(indexMetaData).numberOfReplicas(numberOfReplicas));, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java, +                    final IndexMetaData.Builder indexMetaDataBuilder = IndexMetaData.builder(request.index).settings(actualIndexSettings);, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexAliasesService.java]