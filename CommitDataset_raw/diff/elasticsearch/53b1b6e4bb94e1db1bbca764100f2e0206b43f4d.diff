[+++ b/src/main/java/org/apache/lucene/store/bytebuffer/ByteBufferDirectory.java, +import java.util.concurrent.atomic.AtomicLong;, +    final AtomicLong sizeInBytes = new AtomicLong();, +, +    /**, +     * Returns the size in bytes of the directory, chunk by buffer size., +     */, +    public long sizeInBytes() {, +        return sizeInBytes.get();, +    }, +, +        sizeInBytes.addAndGet(-file.sizeInBytes.get());, +            sizeInBytes.addAndGet(-existing.sizeInBytes.get());, +++ b/src/main/java/org/apache/lucene/store/bytebuffer/ByteBufferDirectory.java, +import java.util.concurrent.atomic.AtomicLong;, +    final AtomicLong sizeInBytes = new AtomicLong();, +, +    /**, +     * Returns the size in bytes of the directory, chunk by buffer size., +     */, +    public long sizeInBytes() {, +        return sizeInBytes.get();, +    }, +, +        sizeInBytes.addAndGet(-file.sizeInBytes.get());, +            sizeInBytes.addAndGet(-existing.sizeInBytes.get());, +++ b/src/main/java/org/apache/lucene/store/bytebuffer/ByteBufferFile.java, +import java.util.concurrent.atomic.AtomicLong;, +    final AtomicLong sizeInBytes = new AtomicLong();, +, +        sizeInBytes.addAndGet(buffer.remaining());, +        dir.sizeInBytes.addAndGet(buffer.remaining());]