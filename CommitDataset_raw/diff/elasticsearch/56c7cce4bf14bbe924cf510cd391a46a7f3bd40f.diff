[+++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final Version V_2_0_0 = new Version(V_2_0_0_ID, true, org.apache.lucene.util.Version.LUCENE_5_2_1);, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final Version V_2_0_0 = new Version(V_2_0_0_ID, true, org.apache.lucene.util.Version.LUCENE_5_2_1);, +++ b/core/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java, +        return new AllTermWeight(this, searcher, needsScores);, +        AllTermWeight(AllTermQuery query, IndexSearcher searcher, boolean needsScores) throws IOException {, +            super(query, searcher, needsScores);, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final Version V_2_0_0 = new Version(V_2_0_0_ID, true, org.apache.lucene.util.Version.LUCENE_5_2_1);, +++ b/core/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java, +        return new AllTermWeight(this, searcher, needsScores);, +        AllTermWeight(AllTermQuery query, IndexSearcher searcher, boolean needsScores) throws IOException {, +            super(query, searcher, needsScores);, +++ b/core/src/main/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQuery.java, +        indexSearcher.setSimilarity(searcher.getSimilarity(true));, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final Version V_2_0_0 = new Version(V_2_0_0_ID, true, org.apache.lucene.util.Version.LUCENE_5_2_1);, +++ b/core/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java, +        return new AllTermWeight(this, searcher, needsScores);, +        AllTermWeight(AllTermQuery query, IndexSearcher searcher, boolean needsScores) throws IOException {, +            super(query, searcher, needsScores);, +++ b/core/src/main/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQuery.java, +        indexSearcher.setSimilarity(searcher.getSimilarity(true));, +++ b/core/src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java, +        indexSearcher.setSimilarity(searcher.getSimilarity(true));, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final Version V_2_0_0 = new Version(V_2_0_0_ID, true, org.apache.lucene.util.Version.LUCENE_5_2_1);, +++ b/core/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java, +        return new AllTermWeight(this, searcher, needsScores);, +        AllTermWeight(AllTermQuery query, IndexSearcher searcher, boolean needsScores) throws IOException {, +            super(query, searcher, needsScores);, +++ b/core/src/main/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQuery.java, +        indexSearcher.setSimilarity(searcher.getSimilarity(true));, +++ b/core/src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java, +        indexSearcher.setSimilarity(searcher.getSimilarity(true));, +++ b/core/src/main/java/org/elasticsearch/index/search/child/ParentConstantScoreQuery.java, +        indexSearcher.setSimilarity(searcher.getSimilarity(true));, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final Version V_2_0_0 = new Version(V_2_0_0_ID, true, org.apache.lucene.util.Version.LUCENE_5_2_1);, +++ b/core/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java, +        return new AllTermWeight(this, searcher, needsScores);, +        AllTermWeight(AllTermQuery query, IndexSearcher searcher, boolean needsScores) throws IOException {, +            super(query, searcher, needsScores);, +++ b/core/src/main/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQuery.java, +        indexSearcher.setSimilarity(searcher.getSimilarity(true));, +++ b/core/src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java, +        indexSearcher.setSimilarity(searcher.getSimilarity(true));, +++ b/core/src/main/java/org/elasticsearch/index/search/child/ParentConstantScoreQuery.java, +        indexSearcher.setSimilarity(searcher.getSimilarity(true));, +++ b/core/src/main/java/org/elasticsearch/index/search/child/ParentQuery.java, +            indexSearcher.setSimilarity(searcher.getSimilarity(true));, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final Version V_2_0_0 = new Version(V_2_0_0_ID, true, org.apache.lucene.util.Version.LUCENE_5_2_1);, +++ b/core/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java, +        return new AllTermWeight(this, searcher, needsScores);, +        AllTermWeight(AllTermQuery query, IndexSearcher searcher, boolean needsScores) throws IOException {, +            super(query, searcher, needsScores);, +++ b/core/src/main/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQuery.java, +        indexSearcher.setSimilarity(searcher.getSimilarity(true));, +++ b/core/src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java, +        indexSearcher.setSimilarity(searcher.getSimilarity(true));, +++ b/core/src/main/java/org/elasticsearch/index/search/child/ParentConstantScoreQuery.java, +        indexSearcher.setSimilarity(searcher.getSimilarity(true));, +++ b/core/src/main/java/org/elasticsearch/index/search/child/ParentQuery.java, +            indexSearcher.setSimilarity(searcher.getSimilarity(true));, +++ b/core/src/main/java/org/elasticsearch/search/internal/ContextIndexSearcher.java, +        setSimilarity(searcher.searcher().getSimilarity(true));, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final Version V_2_0_0 = new Version(V_2_0_0_ID, true, org.apache.lucene.util.Version.LUCENE_5_2_1);, +++ b/core/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java, +        return new AllTermWeight(this, searcher, needsScores);, +        AllTermWeight(AllTermQuery query, IndexSearcher searcher, boolean needsScores) throws IOException {, +            super(query, searcher, needsScores);, +++ b/core/src/main/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQuery.java, +        indexSearcher.setSimilarity(searcher.getSimilarity(true));, +++ b/core/src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java, +        indexSearcher.setSimilarity(searcher.getSimilarity(true));, +++ b/core/src/main/java/org/elasticsearch/index/search/child/ParentConstantScoreQuery.java, +        indexSearcher.setSimilarity(searcher.getSimilarity(true));, +++ b/core/src/main/java/org/elasticsearch/index/search/child/ParentQuery.java, +            indexSearcher.setSimilarity(searcher.getSimilarity(true));, +++ b/core/src/main/java/org/elasticsearch/search/internal/ContextIndexSearcher.java, +        setSimilarity(searcher.searcher().getSimilarity(true));, +++ b/core/src/test/java/org/elasticsearch/common/lucene/IndexCacheableQueryTests.java, +        assert Version.LATEST == Version.LUCENE_5_2_1;, +        assert Version.LATEST == Version.LUCENE_5_2_1;, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final Version V_2_0_0 = new Version(V_2_0_0_ID, true, org.apache.lucene.util.Version.LUCENE_5_2_1);, +++ b/core/src/main/java/org/elasticsearch/common/lucene/all/AllTermQuery.java, +        return new AllTermWeight(this, searcher, needsScores);, +        AllTermWeight(AllTermQuery query, IndexSearcher searcher, boolean needsScores) throws IOException {, +            super(query, searcher, needsScores);, +++ b/core/src/main/java/org/elasticsearch/index/search/child/ChildrenConstantScoreQuery.java, +        indexSearcher.setSimilarity(searcher.getSimilarity(true));, +++ b/core/src/main/java/org/elasticsearch/index/search/child/ChildrenQuery.java, +        indexSearcher.setSimilarity(searcher.getSimilarity(true));, +++ b/core/src/main/java/org/elasticsearch/index/search/child/ParentConstantScoreQuery.java, +        indexSearcher.setSimilarity(searcher.getSimilarity(true));, +++ b/core/src/main/java/org/elasticsearch/index/search/child/ParentQuery.java]