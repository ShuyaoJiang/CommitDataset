[+++ b/core/src/main/java/org/elasticsearch/common/geo/builders/BaseLineStringBuilder.java, +    public BaseLineStringBuilder(ArrayList<Coordinate> points) {, +++ b/core/src/main/java/org/elasticsearch/common/geo/builders/BaseLineStringBuilder.java, +    public BaseLineStringBuilder(ArrayList<Coordinate> points) {, +++ b/core/src/main/java/org/elasticsearch/common/geo/builders/BasePolygonBuilder.java, +    // line string defining the shell of the polygon, +    protected LineStringBuilder shell;, +    // List of line strings defining the holes of the polygon, +    protected final ArrayList<LineStringBuilder> holes = new ArrayList<>();, +    public E hole(LineStringBuilder hole) {, +    public BasePolygonBuilder close() {, +        shell.close();, +        return this;, +        for(BaseLineStringBuilder hole : holes) {, +        Iterator<LineStringBuilder> iterator = this.holes.iterator();, +    private static int createEdges(int component, Orientation orientation, BaseLineStringBuilder shell,, +                                   BaseLineStringBuilder hole,, +++ b/core/src/main/java/org/elasticsearch/common/geo/builders/BaseLineStringBuilder.java, +    public BaseLineStringBuilder(ArrayList<Coordinate> points) {, +++ b/core/src/main/java/org/elasticsearch/common/geo/builders/BasePolygonBuilder.java, +    // line string defining the shell of the polygon, +    protected LineStringBuilder shell;, +    // List of line strings defining the holes of the polygon, +    protected final ArrayList<LineStringBuilder> holes = new ArrayList<>();, +    public E hole(LineStringBuilder hole) {, +    public BasePolygonBuilder close() {, +        shell.close();, +        return this;, +        for(BaseLineStringBuilder hole : holes) {, +        Iterator<LineStringBuilder> iterator = this.holes.iterator();, +    private static int createEdges(int component, Orientation orientation, BaseLineStringBuilder shell,, +                                   BaseLineStringBuilder hole,, +++ b/core/src/main/java/org/elasticsearch/common/geo/builders/GeometryCollectionBuilder.java, +    public GeometryCollectionBuilder line(BaseLineStringBuilder line) {, +++ b/core/src/main/java/org/elasticsearch/common/geo/builders/BaseLineStringBuilder.java, +    public BaseLineStringBuilder(ArrayList<Coordinate> points) {, +++ b/core/src/main/java/org/elasticsearch/common/geo/builders/BasePolygonBuilder.java, +    // line string defining the shell of the polygon, +    protected LineStringBuilder shell;, +    // List of line strings defining the holes of the polygon, +    protected final ArrayList<LineStringBuilder> holes = new ArrayList<>();, +    public E hole(LineStringBuilder hole) {, +    public BasePolygonBuilder close() {, +        shell.close();, +        return this;, +        for(BaseLineStringBuilder hole : holes) {, +        Iterator<LineStringBuilder> iterator = this.holes.iterator();, +    private static int createEdges(int component, Orientation orientation, BaseLineStringBuilder shell,, +                                   BaseLineStringBuilder hole,, +++ b/core/src/main/java/org/elasticsearch/common/geo/builders/GeometryCollectionBuilder.java, +    public GeometryCollectionBuilder line(BaseLineStringBuilder line) {, +++ b/core/src/main/java/org/elasticsearch/common/geo/builders/LineStringBuilder.java, +import com.vividsolutions.jts.geom.Coordinate;, +, +import java.util.ArrayList;, +    public LineStringBuilder() {, +        this(new ArrayList<Coordinate>());, +    }, +, +    public LineStringBuilder(ArrayList<Coordinate> points) {, +        super(points);, +    }, +, +    /**, +     * Closes the current lineString by adding the starting point as the end point, +     */, +    public LineStringBuilder close() {, +        Coordinate start = points.get(0);, +        Coordinate end = points.get(points.size()-1);, +        if(start.x != end.x || start.y != end.y) {, +            points.add(start);, +        }, +        return this;, +    }, +, +++ b/core/src/main/java/org/elasticsearch/common/geo/builders/BaseLineStringBuilder.java, +    public BaseLineStringBuilder(ArrayList<Coordinate> points) {, +++ b/core/src/main/java/org/elasticsearch/common/geo/builders/BasePolygonBuilder.java, +    // line string defining the shell of the polygon, +    protected LineStringBuilder shell;, +    // List of line strings defining the holes of the polygon, +    protected final ArrayList<LineStringBuilder> holes = new ArrayList<>();, +    public E hole(LineStringBuilder hole) {, +    public BasePolygonBuilder close() {, +        shell.close();, +        return this;, +        for(BaseLineStringBuilder hole : holes) {, +        Iterator<LineStringBuilder> iterator = this.holes.iterator();, +    private static int createEdges(int component, Orientation orientation, BaseLineStringBuilder shell,, +                                   BaseLineStringBuilder hole,, +++ b/core/src/main/java/org/elasticsearch/common/geo/builders/GeometryCollectionBuilder.java, +    public GeometryCollectionBuilder line(BaseLineStringBuilder line) {, +++ b/core/src/main/java/org/elasticsearch/common/geo/builders/LineStringBuilder.java, +import com.vividsolutions.jts.geom.Coordinate;, +, +import java.util.ArrayList;, +    public LineStringBuilder() {, +        this(new ArrayList<Coordinate>());, +    }, +]