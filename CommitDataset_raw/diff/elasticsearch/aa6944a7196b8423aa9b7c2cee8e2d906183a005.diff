[+++ b/x-pack/plugin/index-lifecycle/src/main/java/org/elasticsearch/xpack/indexlifecycle/IndexLifecycleRunner.java, +        ElasticsearchException.generateThrowableXContent(causeXContentBuilder, ToXContent.EMPTY_PARAMS, cause);, +++ b/x-pack/plugin/index-lifecycle/src/main/java/org/elasticsearch/xpack/indexlifecycle/IndexLifecycleRunner.java, +        ElasticsearchException.generateThrowableXContent(causeXContentBuilder, ToXContent.EMPTY_PARAMS, cause);, +++ b/x-pack/plugin/index-lifecycle/src/test/java/org/elasticsearch/xpack/indexlifecycle/IndexLifecycleRunnerTests.java, +, +        assertClusterStateOnErrorStep(clusterState, index, currentStep, newClusterState, now,, +            "{\"type\":\"exception\",\"reason\":\"THIS IS AN EXPECTED CAUSE\"}");, +, +        cause = new IllegalArgumentException("non elasticsearch-exception");, +        newClusterState = IndexLifecycleRunner.moveClusterStateToErrorStep(index, clusterState, currentStep, cause, () -> now);, +        assertClusterStateOnErrorStep(clusterState, index, currentStep, newClusterState, now,, +            "{\"type\":\"illegal_argument_exception\",\"reason\":\"non elasticsearch-exception\"}");, +    private void assertClusterStateOnErrorStep(ClusterState oldClusterState, Index index, StepKey currentStep,, +                                               ClusterState newClusterState, long now, String expectedCauseValue) throws IOException {, +++ b/x-pack/plugin/index-lifecycle/src/main/java/org/elasticsearch/xpack/indexlifecycle/IndexLifecycleRunner.java, +        ElasticsearchException.generateThrowableXContent(causeXContentBuilder, ToXContent.EMPTY_PARAMS, cause);, +++ b/x-pack/plugin/index-lifecycle/src/test/java/org/elasticsearch/xpack/indexlifecycle/IndexLifecycleRunnerTests.java, +, +        assertClusterStateOnErrorStep(clusterState, index, currentStep, newClusterState, now,, +            "{\"type\":\"exception\",\"reason\":\"THIS IS AN EXPECTED CAUSE\"}");, +, +        cause = new IllegalArgumentException("non elasticsearch-exception");, +        newClusterState = IndexLifecycleRunner.moveClusterStateToErrorStep(index, clusterState, currentStep, cause, () -> now);, +        assertClusterStateOnErrorStep(clusterState, index, currentStep, newClusterState, now,, +            "{\"type\":\"illegal_argument_exception\",\"reason\":\"non elasticsearch-exception\"}");, +    private void assertClusterStateOnErrorStep(ClusterState oldClusterState, Index index, StepKey currentStep,, +                                               ClusterState newClusterState, long now, String expectedCauseValue) throws IOException {, +++ b/x-pack/plugin/index-lifecycle/src/test/java/org/elasticsearch/xpack/indexlifecycle/MoveToErrorStepUpdateTaskTests.java, +        ElasticsearchException.generateThrowableXContent(causeXContentBuilder, ToXContent.EMPTY_PARAMS, cause);]