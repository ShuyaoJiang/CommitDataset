[+++ b/modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EComp.java, +++ b/modules/lang-painless/src/main/java/org/elasticsearch/painless/node/EComp.java, +++ b/modules/lang-painless/src/test/java/org/elasticsearch/painless/EqualsTests.java, +    public void testBranchEqualsDefAndPrimitive() {, +        assertEquals(true, exec("def x = 1000; int y = 1000; return x == y;"));, +        assertEquals(false, exec("def x = 1000; int y = 1000; return x === y;"));, +        assertEquals(true, exec("def x = 1000; int y = 1000; return y == x;"));, +        assertEquals(false, exec("def x = 1000; int y = 1000; return y === x;"));, +    }, +, +    public void testBranchNotEqualsDefAndPrimitive() {, +        assertEquals(false, exec("def x = 1000; int y = 1000; return x != y;"));, +        assertEquals(true, exec("def x = 1000; int y = 1000; return x !== y;"));, +        assertEquals(false, exec("def x = 1000; int y = 1000; return y != x;"));, +        assertEquals(true, exec("def x = 1000; int y = 1000; return y !== x;"));, +    }, +]