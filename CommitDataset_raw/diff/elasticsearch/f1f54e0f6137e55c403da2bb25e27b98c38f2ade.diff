[+++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/action/TransportUnfollowAction.java, +        final IndexMetaData.Builder newIndexMetaData = IndexMetaData.builder(followerIMD);, +        newIndexMetaData.settings(builder);, +        newIndexMetaData.settingsVersion(followerIMD.getSettingsVersion() + 1);, +        newIndexMetaData.removeCustom(Ccr.CCR_CUSTOM_METADATA_KEY);, +            .put(newIndexMetaData), +++ b/x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/action/TransportUnfollowAction.java, +        final IndexMetaData.Builder newIndexMetaData = IndexMetaData.builder(followerIMD);, +        newIndexMetaData.settings(builder);, +        newIndexMetaData.settingsVersion(followerIMD.getSettingsVersion() + 1);, +        newIndexMetaData.removeCustom(Ccr.CCR_CUSTOM_METADATA_KEY);, +            .put(newIndexMetaData), +++ b/x-pack/plugin/ccr/src/test/java/org/elasticsearch/xpack/ccr/action/TransportUnfollowActionTests.java, +        final long settingsVersion = randomNonNegativeLong();, +            .settingsVersion(settingsVersion), +        assertThat(resultIMD.getSettingsVersion(), equalTo(settingsVersion + 1));]