[+++ b/bin/elasticsearch, +                   `dirname "$0"`/elasticsearch.in.sh; do, +++ b/bin/elasticsearch, +                   `dirname "$0"`/elasticsearch.in.sh; do, +++ b/bin/elasticsearch-service-mgr.exe, +++ b/bin/elasticsearch, +                   `dirname "$0"`/elasticsearch.in.sh; do, +++ b/bin/elasticsearch-service-mgr.exe, +++ b/bin/elasticsearch-service-x64.exe, +++ b/bin/elasticsearch, +                   `dirname "$0"`/elasticsearch.in.sh; do, +++ b/bin/elasticsearch-service-mgr.exe, +++ b/bin/elasticsearch-service-x64.exe, +++ b/bin/elasticsearch-service-x86.exe, +++ b/bin/elasticsearch, +                   `dirname "$0"`/elasticsearch.in.sh; do, +++ b/bin/elasticsearch-service-mgr.exe, +++ b/bin/elasticsearch-service-x64.exe, +++ b/bin/elasticsearch-service-x86.exe, +++ b/bin/service.bat, +@echo off, +SETLOCAL, +, +if NOT DEFINED JAVA_HOME goto err, +, +set SCRIPT_DIR=%~dp0, +for %%I in ("%SCRIPT_DIR%..") do set ES_HOME=%%~dpfI, +, +rem Detect JVM version to figure out appropriate executable to use, +%JAVA_HOME%\bin\java -version 2>&1 | find "64-Bit" >nul:, +, +if errorlevel 1 (, +    set EXECUTABLE=%ES_HOME%\bin\elasticsearch-service-x86.exe, +    set SERVICE_ID=elasticsearch-service-x86, +    set ARCH=32-bit, +) else (, +    set EXECUTABLE=%ES_HOME%\bin\elasticsearch-service-x64.exe, +    set SERVICE_ID=elasticsearch-service-x64, +    set ARCH=64-bit, +), +, +if EXIST "%EXECUTABLE%" goto okExe, +echo elasticsearch-service-(x86|x64).exe was not found..., +, +:okExe, +set ES_VERSION=${project.version}, +, +if "%LOG_DIR%" == "" (, +set LOG_DIR=%ES_HOME%\logs, +), +, +if "x%1x" == "xx" goto displayUsage, +set SERVICE_CMD=%1, +shift, +if "x%1x" == "xx" goto checkServiceCmd, +set SERVICE_ID=%1, +, +:checkServiceCmd, +, +if "%LOG_OPTS%" == "" (, +set LOG_OPTS=--LogPath "%LOG_DIR%" --LogPrefix "%SERVICE_ID%" --StdError auto --StdOutput auto, +), +, +if /i %SERVICE_CMD% == install goto doInstall, +if /i %SERVICE_CMD% == remove goto doRemove, +if /i %SERVICE_CMD% == start goto doStart, +if /i %SERVICE_CMD% == stop goto doStop, +if /i %SERVICE_CMD% == manager goto doManagment, +echo Unknown option "%SERVICE_CMD%", +, +:displayUsage, +echo., +echo Usage: service.bat install^|remove^|start^|stop^|manager [SERVICE_ID], +goto finally, +, +:doStart, +"%EXECUTABLE%" //ES//%SERVICE_ID% %LOG_OPTS%, +if not errorlevel 1 goto started, +echo Failed starting '%SERVICE_ID%' service, +goto finally, +:started, +echo The service '%SERVICE_ID%' has been started, +goto finally, +, +:doStop, +"%EXECUTABLE%" //SS//%SERVICE_ID% %LOG_OPTS%, +if not errorlevel 1 goto stopped, +echo Failed stopping '%SERVICE_ID%' service, +goto finally, +:stopped, +echo The service '%SERVICE_ID%' has been stopped, +goto finally, +, +:doManagment, +set EXECUTABLE_MGR=%ES_HOME%\bin\elasticsearch-service-mgr.exe, +"%EXECUTABLE_MGR%" //ES//%SERVICE_ID%, +if not errorlevel 1 goto managed, +echo Failed starting service manager for '%SERVICE_ID%', +goto finally, +:managed]