[+++ b/src/main/java/org/elasticsearch/index/IndexService.java, +import org.elasticsearch.index.shard.IndexShard;, +                        SimilarityService similarityService, IndexAliasesService aliasesService, IndexCache indexCache,, +                        IndexGateway indexGateway, IndexStore indexStore, IndexSettingsService settingsService,, +                        IndexFieldDataService indexFieldData, BitsetFilterCache bitSetFilterCache) {, +++ b/src/main/java/org/elasticsearch/index/IndexService.java, +import org.elasticsearch.index.shard.IndexShard;, +                        SimilarityService similarityService, IndexAliasesService aliasesService, IndexCache indexCache,, +                        IndexGateway indexGateway, IndexStore indexStore, IndexSettingsService settingsService,, +                        IndexFieldDataService indexFieldData, BitsetFilterCache bitSetFilterCache) {, +++ b/src/main/java/org/elasticsearch/index/engine/EngineModule.java, +import org.elasticsearch.index.engine.internal.InternalEngineModule;, +    public static final String ENGINE_TYPE = "index.engine.type";, +    public static final Class<? extends Module> DEFAULT_ENGINE = InternalEngineModule.class;, +, +        return ImmutableList.of(Modules.createModule(settings.getAsClass(ENGINE_TYPE, DEFAULT_ENGINE,, +                "org.elasticsearch.index.engine.", "EngineModule"), settings));, +++ b/src/main/java/org/elasticsearch/index/IndexService.java, +import org.elasticsearch.index.shard.IndexShard;, +                        SimilarityService similarityService, IndexAliasesService aliasesService, IndexCache indexCache,, +                        IndexGateway indexGateway, IndexStore indexStore, IndexSettingsService settingsService,, +                        IndexFieldDataService indexFieldData, BitsetFilterCache bitSetFilterCache) {, +++ b/src/main/java/org/elasticsearch/index/engine/EngineModule.java, +import org.elasticsearch.index.engine.internal.InternalEngineModule;, +    public static final String ENGINE_TYPE = "index.engine.type";, +    public static final Class<? extends Module> DEFAULT_ENGINE = InternalEngineModule.class;, +, +        return ImmutableList.of(Modules.createModule(settings.getAsClass(ENGINE_TYPE, DEFAULT_ENGINE,, +                "org.elasticsearch.index.engine.", "EngineModule"), settings));, +++ /dev/null, +++ b/src/main/java/org/elasticsearch/index/IndexService.java, +import org.elasticsearch.index.shard.IndexShard;, +                        SimilarityService similarityService, IndexAliasesService aliasesService, IndexCache indexCache,, +                        IndexGateway indexGateway, IndexStore indexStore, IndexSettingsService settingsService,, +                        IndexFieldDataService indexFieldData, BitsetFilterCache bitSetFilterCache) {, +++ b/src/main/java/org/elasticsearch/index/engine/EngineModule.java, +import org.elasticsearch.index.engine.internal.InternalEngineModule;, +    public static final String ENGINE_TYPE = "index.engine.type";, +    public static final Class<? extends Module> DEFAULT_ENGINE = InternalEngineModule.class;, +, +        return ImmutableList.of(Modules.createModule(settings.getAsClass(ENGINE_TYPE, DEFAULT_ENGINE,, +                "org.elasticsearch.index.engine.", "EngineModule"), settings));, +++ /dev/null, +++ /dev/null, +++ b/src/main/java/org/elasticsearch/index/IndexService.java, +import org.elasticsearch.index.shard.IndexShard;, +                        SimilarityService similarityService, IndexAliasesService aliasesService, IndexCache indexCache,, +                        IndexGateway indexGateway, IndexStore indexStore, IndexSettingsService settingsService,, +                        IndexFieldDataService indexFieldData, BitsetFilterCache bitSetFilterCache) {, +++ b/src/main/java/org/elasticsearch/index/engine/EngineModule.java, +import org.elasticsearch.index.engine.internal.InternalEngineModule;, +    public static final String ENGINE_TYPE = "index.engine.type";, +    public static final Class<? extends Module> DEFAULT_ENGINE = InternalEngineModule.class;, +, +        return ImmutableList.of(Modules.createModule(settings.getAsClass(ENGINE_TYPE, DEFAULT_ENGINE,, +                "org.elasticsearch.index.engine.", "EngineModule"), settings));, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/src/main/java/org/elasticsearch/index/IndexService.java, +import org.elasticsearch.index.shard.IndexShard;, +                        SimilarityService similarityService, IndexAliasesService aliasesService, IndexCache indexCache,, +                        IndexGateway indexGateway, IndexStore indexStore, IndexSettingsService settingsService,, +                        IndexFieldDataService indexFieldData, BitsetFilterCache bitSetFilterCache) {, +++ b/src/main/java/org/elasticsearch/index/engine/EngineModule.java, +import org.elasticsearch.index.engine.internal.InternalEngineModule;, +    public static final String ENGINE_TYPE = "index.engine.type";, +    public static final Class<? extends Module> DEFAULT_ENGINE = InternalEngineModule.class;, +, +        return ImmutableList.of(Modules.createModule(settings.getAsClass(ENGINE_TYPE, DEFAULT_ENGINE,, +                "org.elasticsearch.index.engine.", "EngineModule"), settings));, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/src/main/java/org/elasticsearch/index/IndexService.java, +import org.elasticsearch.index.shard.IndexShard;, +                        SimilarityService similarityService, IndexAliasesService aliasesService, IndexCache indexCache,, +                        IndexGateway indexGateway, IndexStore indexStore, IndexSettingsService settingsService,, +                        IndexFieldDataService indexFieldData, BitsetFilterCache bitSetFilterCache) {, +++ b/src/main/java/org/elasticsearch/index/engine/EngineModule.java, +import org.elasticsearch.index.engine.internal.InternalEngineModule;, +    public static final String ENGINE_TYPE = "index.engine.type";, +    public static final Class<? extends Module> DEFAULT_ENGINE = InternalEngineModule.class;, +, +        return ImmutableList.of(Modules.createModule(settings.getAsClass(ENGINE_TYPE, DEFAULT_ENGINE,, +                "org.elasticsearch.index.engine.", "EngineModule"), settings));, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/src/main/java/org/elasticsearch/index/query/IndexQueryParserService.java, +                                   BitsetFilterCache bitsetFilterCache,, +++ b/src/main/java/org/elasticsearch/index/IndexService.java, +import org.elasticsearch.index.shard.IndexShard;, +                        SimilarityService similarityService, IndexAliasesService aliasesService, IndexCache indexCache,, +                        IndexGateway indexGateway, IndexStore indexStore, IndexSettingsService settingsService,, +                        IndexFieldDataService indexFieldData, BitsetFilterCache bitSetFilterCache) {, +++ b/src/main/java/org/elasticsearch/index/engine/EngineModule.java, +import org.elasticsearch.index.engine.internal.InternalEngineModule;]