[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java, +        if (requestsByShard.isEmpty()) {, +            // all failures, no shards to process, send a response, +            if (bulkRequest.listenerThreaded()) {, +                threadPool.execute(new Runnable() {, +                    @Override public void run() {, +                        listener.onResponse(new BulkResponse(responses, System.currentTimeMillis() - startTime));, +                    }, +                });, +            } else {, +                listener.onResponse(new BulkResponse(responses, System.currentTimeMillis() - startTime));, +            }, +            return;, +        }, +]