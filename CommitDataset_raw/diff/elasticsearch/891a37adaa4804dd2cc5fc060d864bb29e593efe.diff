[+++ b/client/rest-high-level/src/main/java/org/elasticsearch/client/ml/job/config/Job.java, +import java.util.LinkedHashMap;, +        PARSER.declareField(Builder::setCustomSettings, (p, c) -> p.mapOrdered(), CUSTOM_SETTINGS, ValueType.OBJECT);, +            this.customSettings = job.getCustomSettings() == null ? null : new LinkedHashMap<>(job.getCustomSettings());, +++ b/client/rest-high-level/src/main/java/org/elasticsearch/client/ml/job/config/Job.java, +import java.util.LinkedHashMap;, +        PARSER.declareField(Builder::setCustomSettings, (p, c) -> p.mapOrdered(), CUSTOM_SETTINGS, ValueType.OBJECT);, +            this.customSettings = job.getCustomSettings() == null ? null : new LinkedHashMap<>(job.getCustomSettings());, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/datafeed/DatafeedConfig.java, +            parser.declareObject(Builder::setQuery, (p, c) -> p.mapOrdered(), QUERY);, +            parser.declareObject(Builder::setAggregations, (p, c) -> p.mapOrdered(), AGGREGATIONS);, +            parser.declareObject(Builder::setAggregations, (p, c) -> p.mapOrdered(), AGGS);, +++ b/client/rest-high-level/src/main/java/org/elasticsearch/client/ml/job/config/Job.java, +import java.util.LinkedHashMap;, +        PARSER.declareField(Builder::setCustomSettings, (p, c) -> p.mapOrdered(), CUSTOM_SETTINGS, ValueType.OBJECT);, +            this.customSettings = job.getCustomSettings() == null ? null : new LinkedHashMap<>(job.getCustomSettings());, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/datafeed/DatafeedConfig.java, +            parser.declareObject(Builder::setQuery, (p, c) -> p.mapOrdered(), QUERY);, +            parser.declareObject(Builder::setAggregations, (p, c) -> p.mapOrdered(), AGGREGATIONS);, +            parser.declareObject(Builder::setAggregations, (p, c) -> p.mapOrdered(), AGGS);, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/job/config/Job.java, +import java.util.LinkedHashMap;, +        parser.declareField(Builder::setCustomSettings, (p, c) -> p.mapOrdered(), CUSTOM_SETTINGS, ValueType.OBJECT);, +            this.customSettings = job.getCustomSettings() == null ? null : new LinkedHashMap<>(job.getCustomSettings());]