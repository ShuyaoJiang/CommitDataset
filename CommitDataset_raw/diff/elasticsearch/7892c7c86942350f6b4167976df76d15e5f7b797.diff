[+++ b/src/main/java/org/elasticsearch/ElasticsearchException.java, +import java.util.List;, +import java.util.Map;, +, +, +++ b/src/main/java/org/elasticsearch/ElasticsearchException.java, +import java.util.List;, +import java.util.Map;, +, +, +++ b/src/main/java/org/elasticsearch/ExceptionsHelper.java, +++ b/src/main/java/org/elasticsearch/ElasticsearchException.java, +import java.util.List;, +import java.util.Map;, +, +, +++ b/src/main/java/org/elasticsearch/ExceptionsHelper.java, +++ b/src/main/java/org/elasticsearch/action/ActionWriteResponse.java, +++ b/src/main/java/org/elasticsearch/ElasticsearchException.java, +import java.util.List;, +import java.util.Map;, +, +, +++ b/src/main/java/org/elasticsearch/ExceptionsHelper.java, +++ b/src/main/java/org/elasticsearch/action/ActionWriteResponse.java, +++ b/src/main/java/org/elasticsearch/action/ShardOperationFailedException.java, +public interface ShardOperationFailedException extends Streamable, Serializable {, +++ b/src/main/java/org/elasticsearch/ElasticsearchException.java, +import java.util.List;, +import java.util.Map;, +, +, +++ b/src/main/java/org/elasticsearch/ExceptionsHelper.java, +++ b/src/main/java/org/elasticsearch/action/ActionWriteResponse.java, +++ b/src/main/java/org/elasticsearch/action/ShardOperationFailedException.java, +public interface ShardOperationFailedException extends Streamable, Serializable {, +++ b/src/main/java/org/elasticsearch/action/bulk/BulkItemResponse.java, +        private final String message;, +            this.message = t.toString();, +, +        public Failure(String index, String type, String id, String message, RestStatus status) {, +            this.index = index;, +            this.type = type;, +            this.id = id;, +            this.message = message;, +            this.status = status;, +        }, +, +            return this.message;, +            String fMessage = in.readString();, +            RestStatus status = RestStatus.readFrom(in);, +            failure = new Failure(fIndex, fType, fId, fMessage, status);, +            out.writeString(failure.getMessage());, +            RestStatus.writeTo(out, failure.getStatus());, +++ b/src/main/java/org/elasticsearch/ElasticsearchException.java, +import java.util.List;, +import java.util.Map;, +, +, +++ b/src/main/java/org/elasticsearch/ExceptionsHelper.java, +++ b/src/main/java/org/elasticsearch/action/ActionWriteResponse.java, +++ b/src/main/java/org/elasticsearch/action/ShardOperationFailedException.java, +public interface ShardOperationFailedException extends Streamable, Serializable {, +++ b/src/main/java/org/elasticsearch/action/bulk/BulkItemResponse.java, +        private final String message;, +            this.message = t.toString();, +, +        public Failure(String index, String type, String id, String message, RestStatus status) {, +            this.index = index;, +            this.type = type;, +            this.id = id;, +            this.message = message;, +            this.status = status;, +        }, +, +            return this.message;, +            String fMessage = in.readString();, +            RestStatus status = RestStatus.readFrom(in);, +            failure = new Failure(fIndex, fType, fId, fMessage, status);, +            out.writeString(failure.getMessage());, +            RestStatus.writeTo(out, failure.getStatus());, +++ b/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java, +                            updateRequest.id(), "routing is required for this item", RestStatus.BAD_REQUEST);, +                    String message = ExceptionsHelper.detailedMessage(e);, +                    RestStatus status = ExceptionsHelper.status(e);, +                                    new BulkItemResponse.Failure(concreteIndices.getConcreteIndex(indexRequest.index()), indexRequest.type(), indexRequest.id(), message, status)));, +                                    new BulkItemResponse.Failure(concreteIndices.getConcreteIndex(deleteRequest.index()), deleteRequest.type(), deleteRequest.id(), message, status)));, +                                    new BulkItemResponse.Failure(concreteIndices.getConcreteIndex(updateRequest.index()), updateRequest.type(), updateRequest.id(), message, status)));, +++ b/src/main/java/org/elasticsearch/ElasticsearchException.java, +import java.util.List;, +import java.util.Map;, +, +, +++ b/src/main/java/org/elasticsearch/ExceptionsHelper.java, +++ b/src/main/java/org/elasticsearch/action/ActionWriteResponse.java, +++ b/src/main/java/org/elasticsearch/action/ShardOperationFailedException.java, +public interface ShardOperationFailedException extends Streamable, Serializable {, +++ b/src/main/java/org/elasticsearch/action/bulk/BulkItemResponse.java, +        private final String message;, +            this.message = t.toString();]