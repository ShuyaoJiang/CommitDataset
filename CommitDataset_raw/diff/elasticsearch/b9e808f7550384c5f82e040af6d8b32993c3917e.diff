[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/SearchModule.java, +import org.elasticsearch.search.fetch.version.VersionSearchHitPhase;, +        bind(VersionSearchHitPhase.class).asEagerSingleton();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/SearchModule.java, +import org.elasticsearch.search.fetch.version.VersionSearchHitPhase;, +        bind(VersionSearchHitPhase.class).asEagerSingleton();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java, +import org.elasticsearch.search.fetch.version.VersionSearchHitPhase;, +                              MatchedFiltersSearchHitPhase matchFiltersPhase, ExplainSearchHitPhase explainPhase, VersionSearchHitPhase versionPhase) {, +        this.hitPhases = new SearchHitPhase[]{scriptFieldsPhase, matchFiltersPhase, explainPhase, highlightPhase, versionPhase};, +            InternalSearchHit searchHit = new InternalSearchHit(docId, uid.id(), uid.type(), source, null);, +                SearchHitPhase.HitContext hitContext = new SearchHitPhase.HitContext();, +                    hitContext.reset(searchHit, subReader, subDoc, doc);, +                    hitPhase.execute(context, hitContext);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/SearchModule.java, +import org.elasticsearch.search.fetch.version.VersionSearchHitPhase;, +        bind(VersionSearchHitPhase.class).asEagerSingleton();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java, +import org.elasticsearch.search.fetch.version.VersionSearchHitPhase;, +                              MatchedFiltersSearchHitPhase matchFiltersPhase, ExplainSearchHitPhase explainPhase, VersionSearchHitPhase versionPhase) {, +        this.hitPhases = new SearchHitPhase[]{scriptFieldsPhase, matchFiltersPhase, explainPhase, highlightPhase, versionPhase};, +            InternalSearchHit searchHit = new InternalSearchHit(docId, uid.id(), uid.type(), source, null);, +                SearchHitPhase.HitContext hitContext = new SearchHitPhase.HitContext();, +                    hitContext.reset(searchHit, subReader, subDoc, doc);, +                    hitPhase.execute(context, hitContext);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/fetch/SearchHitPhase.java, +import org.apache.lucene.document.Document;, +    public static class HitContext {, +        private InternalSearchHit hit;, +        private IndexReader reader;, +        private int docId;, +        private Document doc;, +, +        public void reset(InternalSearchHit hit, IndexReader reader, int docId, Document doc) {, +            this.hit = hit;, +            this.reader = reader;, +            this.docId = docId;, +            this.doc = doc;, +        }, +, +        public InternalSearchHit hit() {, +            return hit;, +        }, +, +        public IndexReader reader() {, +            return reader;, +        }, +, +        public int docId() {, +            return docId;, +        }, +, +        public Document doc() {, +            return doc;, +        }, +    }, +, +    void execute(SearchContext context, HitContext hitContext) throws ElasticSearchException;, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/SearchModule.java, +import org.elasticsearch.search.fetch.version.VersionSearchHitPhase;, +        bind(VersionSearchHitPhase.class).asEagerSingleton();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java, +import org.elasticsearch.search.fetch.version.VersionSearchHitPhase;, +                              MatchedFiltersSearchHitPhase matchFiltersPhase, ExplainSearchHitPhase explainPhase, VersionSearchHitPhase versionPhase) {, +        this.hitPhases = new SearchHitPhase[]{scriptFieldsPhase, matchFiltersPhase, explainPhase, highlightPhase, versionPhase};, +            InternalSearchHit searchHit = new InternalSearchHit(docId, uid.id(), uid.type(), source, null);, +                SearchHitPhase.HitContext hitContext = new SearchHitPhase.HitContext();, +                    hitContext.reset(searchHit, subReader, subDoc, doc);, +                    hitPhase.execute(context, hitContext);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/fetch/SearchHitPhase.java, +import org.apache.lucene.document.Document;, +    public static class HitContext {, +        private InternalSearchHit hit;, +        private IndexReader reader;, +        private int docId;, +        private Document doc;, +, +        public void reset(InternalSearchHit hit, IndexReader reader, int docId, Document doc) {, +            this.hit = hit;, +            this.reader = reader;, +            this.docId = docId;, +            this.doc = doc;, +        }, +, +        public InternalSearchHit hit() {, +            return hit;, +        }, +, +        public IndexReader reader() {, +            return reader;, +        }, +, +        public int docId() {, +            return docId;, +        }, +, +        public Document doc() {, +            return doc;, +        }, +    }]