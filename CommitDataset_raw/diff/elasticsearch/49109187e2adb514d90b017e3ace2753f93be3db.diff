[+++ b/server/src/main/java/org/elasticsearch/action/search/SearchPhaseExecutionException.java, +        builder.field("grouped", true); // notify that it's grouped, +        ShardOperationFailedException[] failures = ExceptionsHelper.groupBy(shardFailures);, +++ b/server/src/main/java/org/elasticsearch/action/search/SearchPhaseExecutionException.java, +        builder.field("grouped", true); // notify that it's grouped, +        ShardOperationFailedException[] failures = ExceptionsHelper.groupBy(shardFailures);, +++ b/server/src/main/java/org/elasticsearch/rest/action/RestActions.java, +            for (ShardOperationFailedException shardFailure : ExceptionsHelper.groupBy(shardFailures)) {, +++ b/server/src/main/java/org/elasticsearch/action/search/SearchPhaseExecutionException.java, +        builder.field("grouped", true); // notify that it's grouped, +        ShardOperationFailedException[] failures = ExceptionsHelper.groupBy(shardFailures);, +++ b/server/src/main/java/org/elasticsearch/rest/action/RestActions.java, +            for (ShardOperationFailedException shardFailure : ExceptionsHelper.groupBy(shardFailures)) {, +++ b/server/src/test/java/org/elasticsearch/action/search/SearchPhaseExecutionExceptionTests.java, +++ b/server/src/main/java/org/elasticsearch/action/search/SearchPhaseExecutionException.java, +        builder.field("grouped", true); // notify that it's grouped, +        ShardOperationFailedException[] failures = ExceptionsHelper.groupBy(shardFailures);, +++ b/server/src/main/java/org/elasticsearch/rest/action/RestActions.java, +            for (ShardOperationFailedException shardFailure : ExceptionsHelper.groupBy(shardFailures)) {, +++ b/server/src/test/java/org/elasticsearch/action/search/SearchPhaseExecutionExceptionTests.java, +++ b/server/src/test/java/org/elasticsearch/action/support/broadcast/AbstractBroadcastResponseTestCase.java]