[+++ b/test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java, +import java.util.stream.Collectors;, +import java.util.stream.Stream;, +                                assertBusy(() -> {, +                                    final ClusterState[] states = zenDiscovery.pendingClusterStates();, +                                    assertThat(zenDiscovery.localNode().getName() + " still having pending states:\n" +, +                                            Stream.of(states).map(ClusterState::toString).collect(Collectors.joining("\n")),, +                                        states, emptyArray());, +                                });]