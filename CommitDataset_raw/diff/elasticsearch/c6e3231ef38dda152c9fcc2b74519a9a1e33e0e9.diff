[+++ b/x-pack/plugin/sql/src/test/java/org/elasticsearch/xpack/sql/expression/function/scalar/datetime/NamedDateTimeProcessorTests.java, +import org.elasticsearch.bootstrap.JavaVersion;, +import org.elasticsearch.common.Strings;, +import org.junit.Assume;, +    , +        assumeJava9PlusAndCompatLocaleProviderSetting();, +        assumeJava9PlusAndCompatLocaleProviderSetting();, +        assumeJava9PlusAndCompatLocaleProviderSetting();, +        assumeJava9PlusAndCompatLocaleProviderSetting();, +    , +    /*, +     * This method checks the existence of a jvm parameter that should exist in ES jvm.options for Java 9+. If the parameter is, +     * missing, the tests will be skipped. Not doing this, the tests will fail because the day and month names will be in the narrow, +     * format (Mon, Tue, Jan, Feb etc) instead of full format (Monday, Tuesday, January, February etc)., +     * , +     * Related infra issue: https://github.com/elastic/elasticsearch/issues/33796, +     */, +    private void assumeJava9PlusAndCompatLocaleProviderSetting() {, +        // at least Java 9, +        if (JavaVersion.current().compareTo(JavaVersion.parse("9")) < 0) {, +            return;, +        }, +        String beforeJava9CompatibleLocale = System.getProperty("java.locale.providers");, +        // and COMPAT setting needs to be first on the list, +        boolean isBeforeJava9Compatible = beforeJava9CompatibleLocale != null , +                && Strings.tokenizeToStringArray(beforeJava9CompatibleLocale, ",")[0].equals("COMPAT");, +        Assume.assumeTrue(isBeforeJava9Compatible);, +    }]