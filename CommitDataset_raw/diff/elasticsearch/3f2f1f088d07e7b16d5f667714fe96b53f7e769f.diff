[+++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/tophits/InternalTopHits.java, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/tophits/InternalTopHits.java, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/tophits/TopHitsAggregator.java, +                ScoreDoc scoreDoc = topDocs.scoreDocs[i];, +                searchHitFields.score(scoreDoc.score);, +                if (scoreDoc instanceof FieldDoc) {, +                    FieldDoc fieldDoc = (FieldDoc) scoreDoc;, +                    searchHitFields.sortValues(fieldDoc.fields);, +                }]