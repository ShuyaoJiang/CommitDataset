[+++ b/core/src/main/java/org/elasticsearch/action/support/ActiveShardCount.java, +        final int activeShardCount = shardRoutingTable.activeShards().size();, +            // adding 1 for the primary in addition to the total number of replicas,, +            // which gives us the total number of shard copies, +            return activeShardCount == shardRoutingTable.replicaShards().size() + 1;, +            return activeShardCount >= 1;, +            return activeShardCount >= value;, +++ b/core/src/main/java/org/elasticsearch/action/support/ActiveShardCount.java, +        final int activeShardCount = shardRoutingTable.activeShards().size();, +            // adding 1 for the primary in addition to the total number of replicas,, +            // which gives us the total number of shard copies, +            return activeShardCount == shardRoutingTable.replicaShards().size() + 1;, +            return activeShardCount >= 1;, +            return activeShardCount >= value;, +++ b/core/src/test/java/org/elasticsearch/index/IndexWithShadowReplicasIT.java, +import java.util.concurrent.TimeUnit;, +        }, 1, TimeUnit.MINUTES);, +        }, 1, TimeUnit.MINUTES);]