[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/aliases/IndexAliasesService.java, +import org.apache.lucene.search.BooleanClause;, +import org.apache.lucene.search.Filter;, +import org.apache.lucene.search.FilterClause;, +import static org.elasticsearch.common.collect.Lists.*;, +import static org.elasticsearch.common.collect.MapBuilder.*;, +    /**, +     * Returns the filter associated with a possibly aliased indices., +     *, +     * <p>Returns <tt>null</tt> if no filtering is required. Note, if no alias if found for the provided value, +     * then no filtering is done.</p>, +     */, +        if (indices == null) {, +            return null;, +        }, +        // optimize for the most common single index/alias scenario, +        if (indices.length == 1) {, +            String alias = indices[0];, +            // The list contains the index itself - no filtering needed, +            if (alias.equals(index.name())) {, +                return null;, +            }, +            IndexAlias indexAlias = aliases.get(alias);, +            if (indexAlias == null) {, +                return null;, +            }, +            return indexAlias.parsedFilter();, +        }]