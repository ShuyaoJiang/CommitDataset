[+++ b/modules/benchmark/micro/src/main/java/org/elasticsearch/benchmark/index/engine/SimpleEngineBenchmark.java, +        engine.refresh(new Engine.Refresh(true));, +        engine.refresh(new Engine.Refresh(true));, +            engine.flush(new Engine.Flush());, +            engine.refresh(new Engine.Refresh(true));, +++ b/modules/benchmark/micro/src/main/java/org/elasticsearch/benchmark/index/engine/SimpleEngineBenchmark.java, +        engine.refresh(new Engine.Refresh(true));, +        engine.refresh(new Engine.Refresh(true));, +            engine.flush(new Engine.Flush());, +            engine.refresh(new Engine.Refresh(true));, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/TransportActionModule.java, +import org.elasticsearch.action.admin.indices.optimize.TransportOptimizeAction;, +        bind(TransportOptimizeAction.class).asEagerSingleton();, +++ b/modules/benchmark/micro/src/main/java/org/elasticsearch/benchmark/index/engine/SimpleEngineBenchmark.java, +        engine.refresh(new Engine.Refresh(true));, +        engine.refresh(new Engine.Refresh(true));, +            engine.flush(new Engine.Flush());, +            engine.refresh(new Engine.Refresh(true));, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/TransportActionModule.java, +import org.elasticsearch.action.admin.indices.optimize.TransportOptimizeAction;, +        bind(TransportOptimizeAction.class).asEagerSingleton();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/TransportActions.java, +            public static final String OPTIMIZE = "indices/optimize";, +++ b/modules/benchmark/micro/src/main/java/org/elasticsearch/benchmark/index/engine/SimpleEngineBenchmark.java, +        engine.refresh(new Engine.Refresh(true));, +        engine.refresh(new Engine.Refresh(true));, +            engine.flush(new Engine.Flush());, +            engine.refresh(new Engine.Refresh(true));, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/TransportActionModule.java, +import org.elasticsearch.action.admin.indices.optimize.TransportOptimizeAction;, +        bind(TransportOptimizeAction.class).asEagerSingleton();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/TransportActions.java, +            public static final String OPTIMIZE = "indices/optimize";, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/ping/broadcast/BroadcastPingRequest.java, +++ b/modules/benchmark/micro/src/main/java/org/elasticsearch/benchmark/index/engine/SimpleEngineBenchmark.java, +        engine.refresh(new Engine.Refresh(true));, +        engine.refresh(new Engine.Refresh(true));, +            engine.flush(new Engine.Flush());, +            engine.refresh(new Engine.Refresh(true));, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/TransportActionModule.java, +import org.elasticsearch.action.admin.indices.optimize.TransportOptimizeAction;, +        bind(TransportOptimizeAction.class).asEagerSingleton();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/TransportActions.java, +            public static final String OPTIMIZE = "indices/optimize";, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/ping/broadcast/BroadcastPingRequest.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/ping/replication/ReplicationPingRequest.java, +++ b/modules/benchmark/micro/src/main/java/org/elasticsearch/benchmark/index/engine/SimpleEngineBenchmark.java, +        engine.refresh(new Engine.Refresh(true));, +        engine.refresh(new Engine.Refresh(true));, +            engine.flush(new Engine.Flush());, +            engine.refresh(new Engine.Refresh(true));, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/TransportActionModule.java, +import org.elasticsearch.action.admin.indices.optimize.TransportOptimizeAction;, +        bind(TransportOptimizeAction.class).asEagerSingleton();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/TransportActions.java, +            public static final String OPTIMIZE = "indices/optimize";, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/ping/broadcast/BroadcastPingRequest.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/ping/replication/ReplicationPingRequest.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/flush/FlushRequest.java, +++ b/modules/benchmark/micro/src/main/java/org/elasticsearch/benchmark/index/engine/SimpleEngineBenchmark.java, +        engine.refresh(new Engine.Refresh(true));, +        engine.refresh(new Engine.Refresh(true));, +            engine.flush(new Engine.Flush());, +            engine.refresh(new Engine.Refresh(true));, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/TransportActionModule.java, +import org.elasticsearch.action.admin.indices.optimize.TransportOptimizeAction;, +        bind(TransportOptimizeAction.class).asEagerSingleton();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/TransportActions.java, +            public static final String OPTIMIZE = "indices/optimize";, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/ping/broadcast/BroadcastPingRequest.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/ping/replication/ReplicationPingRequest.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/flush/FlushRequest.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/flush/TransportFlushAction.java, +import org.elasticsearch.index.engine.Engine;, +        indexShard.flush(new Engine.Flush());, +++ b/modules/benchmark/micro/src/main/java/org/elasticsearch/benchmark/index/engine/SimpleEngineBenchmark.java, +        engine.refresh(new Engine.Refresh(true));, +        engine.refresh(new Engine.Refresh(true));, +            engine.flush(new Engine.Flush());, +            engine.refresh(new Engine.Refresh(true));, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/TransportActionModule.java, +import org.elasticsearch.action.admin.indices.optimize.TransportOptimizeAction;, +        bind(TransportOptimizeAction.class).asEagerSingleton();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/TransportActions.java, +            public static final String OPTIMIZE = "indices/optimize";, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/ping/broadcast/BroadcastPingRequest.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/ping/replication/ReplicationPingRequest.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/flush/FlushRequest.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/flush/TransportFlushAction.java, +import org.elasticsearch.index.engine.Engine;, +        indexShard.flush(new Engine.Flush());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/gateway/snapshot/GatewaySnapshotRequest.java, +++ b/modules/benchmark/micro/src/main/java/org/elasticsearch/benchmark/index/engine/SimpleEngineBenchmark.java, +        engine.refresh(new Engine.Refresh(true));, +        engine.refresh(new Engine.Refresh(true));, +            engine.flush(new Engine.Flush());, +            engine.refresh(new Engine.Refresh(true));, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/TransportActionModule.java, +import org.elasticsearch.action.admin.indices.optimize.TransportOptimizeAction;, +        bind(TransportOptimizeAction.class).asEagerSingleton();]