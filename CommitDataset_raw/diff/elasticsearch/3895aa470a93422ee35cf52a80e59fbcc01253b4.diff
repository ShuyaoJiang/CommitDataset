[+++ b/core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java, +import java.util.Collections;, +++ b/core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java, +import java.util.Collections;, +++ b/core/src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java, +            throw new IllegalArgumentException("text cannot be null.");, +        XContentParser.Token token = parser.nextToken();, +        if (token != XContentParser.Token.FIELD_NAME) {, +            throw new ParsingException(parser.getTokenLocation(), "[" + NAME + "] query malformed, no field");, +        }, +        String fieldName = parser.currentName();, +        token = parser.nextToken();, +        if (token == XContentParser.Token.START_OBJECT) {, +            parser.nextToken();, +            // move to the next token, +            token = parser.nextToken();, +            if (token != XContentParser.Token.END_OBJECT) {, +                throw new ParsingException(parser.getTokenLocation(),, +                        "[common] query parsed in simplified form, with direct field name, but included more options than just " +, +                                "the field name, possibly use its 'options' form, with 'query' element?");, +        if (text == null) {, +            throw new ParsingException(parser.getTokenLocation(), "No text specified for text query");, +        }, +++ b/core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java, +import java.util.Collections;, +++ b/core/src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java, +            throw new IllegalArgumentException("text cannot be null.");, +        XContentParser.Token token = parser.nextToken();, +        if (token != XContentParser.Token.FIELD_NAME) {, +            throw new ParsingException(parser.getTokenLocation(), "[" + NAME + "] query malformed, no field");, +        }, +        String fieldName = parser.currentName();, +        token = parser.nextToken();, +        if (token == XContentParser.Token.START_OBJECT) {, +            parser.nextToken();, +            // move to the next token, +            token = parser.nextToken();, +            if (token != XContentParser.Token.END_OBJECT) {, +                throw new ParsingException(parser.getTokenLocation(),, +                        "[common] query parsed in simplified form, with direct field name, but included more options than just " +, +                                "the field name, possibly use its 'options' form, with 'query' element?");, +        if (text == null) {, +            throw new ParsingException(parser.getTokenLocation(), "No text specified for text query");, +        }, +++ b/core/src/main/java/org/elasticsearch/index/query/FuzzyQueryBuilder.java, +            throw new IllegalArgumentException("field name cannot be null or empty.");, +, +        XContentParser.Token token = parser.nextToken();, +        if (token != XContentParser.Token.FIELD_NAME) {, +            throw new ParsingException(parser.getTokenLocation(), "[fuzzy] query malformed, no field");, +        }, +, +        String fieldName = parser.currentName();, +, +, +, +        token = parser.nextToken();, +        if (token == XContentParser.Token.START_OBJECT) {, +                        throw new ParsingException(parser.getTokenLocation(), "[fuzzy] query does not support [" + currentFieldName + "]");, +            parser.nextToken();, +            // move to the next token, +            parser.nextToken();, +, +        if (value == null) {, +            throw new ParsingException(parser.getTokenLocation(), "no value specified for fuzzy query");, +++ b/core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java, +import java.util.Collections;, +++ b/core/src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java, +            throw new IllegalArgumentException("text cannot be null.");, +        XContentParser.Token token = parser.nextToken();, +        if (token != XContentParser.Token.FIELD_NAME) {, +            throw new ParsingException(parser.getTokenLocation(), "[" + NAME + "] query malformed, no field");, +        }, +        String fieldName = parser.currentName();, +        token = parser.nextToken();, +        if (token == XContentParser.Token.START_OBJECT) {, +            parser.nextToken();, +            // move to the next token, +            token = parser.nextToken();, +            if (token != XContentParser.Token.END_OBJECT) {, +                throw new ParsingException(parser.getTokenLocation(),, +                        "[common] query parsed in simplified form, with direct field name, but included more options than just " +, +                                "the field name, possibly use its 'options' form, with 'query' element?");, +        if (text == null) {, +            throw new ParsingException(parser.getTokenLocation(), "No text specified for text query");, +        }, +++ b/core/src/main/java/org/elasticsearch/index/query/FuzzyQueryBuilder.java, +            throw new IllegalArgumentException("field name cannot be null or empty.");, +, +        XContentParser.Token token = parser.nextToken();, +        if (token != XContentParser.Token.FIELD_NAME) {, +            throw new ParsingException(parser.getTokenLocation(), "[fuzzy] query malformed, no field");, +        }, +, +        String fieldName = parser.currentName();, +, +, +, +        token = parser.nextToken();, +        if (token == XContentParser.Token.START_OBJECT) {]