[+++ b/src/main/java/org/elasticsearch/index/percolator/PercolatorExecutor.java, +                        query = percolatorIndexServiceSafe().queryParserService().parse(parser).query();, +            query = percolatorIndexServiceSafe().queryParserService().parse(QueryBuilders.queryString(request.query())).query();, +    private Response percolate(DocAndQueryRequest request) throws ElasticSearchException {, +                IndexService percolatorIndex = percolatorIndexServiceSafe();, +    private IndexService percolatorIndexServiceSafe() {, +        IndexService indexService = indicesService.indexService(PercolatorService.INDEX_NAME);, +        if (indexService == null) {, +            throw new PercolateIndexUnavailable(new Index(PercolatorService.INDEX_NAME));, +        }, +        return indexService;, +    }, +]