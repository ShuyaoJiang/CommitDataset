[+++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java, +                    // allow to change any settings to a close index, and only allow dynamic settings to be changed, +                    // on an open index, +                    Set<String> openIndices = Sets.newHashSet();, +                    Set<String> closeIndices = Sets.newHashSet();, +                    for (String index : actualIndices) {, +                        if (currentState.metaData().index(index).state() == IndexMetaData.State.OPEN) {, +                            openIndices.add(index);, +                        } else {, +                            closeIndices.add(index);, +                        }, +                    }, +, +                    if (!removedSettings.isEmpty() && !openIndices.isEmpty()) {, +                        listener.onFailure(new ElasticSearchIllegalArgumentException(String.format(, +                                "Can't update non dynamic settings[%s] for open indices[%s]",, +                                removedSettings,, +                                openIndices, +                        )));, +                        return currentState;, +                    }, +]