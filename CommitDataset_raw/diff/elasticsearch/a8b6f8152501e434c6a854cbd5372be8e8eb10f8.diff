[+++ b/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +import org.elasticsearch.action.support.IndicesOptions;, +                    clusterState.metaData().concreteIndices(request.indices(), IndicesOptions.ERROR_UNAVAILABLE_EXPAND_OPEN_CLOSE);, +            concreteIndices = clusterState.metaData().concreteIndices(request.indices(), IndicesOptions.IGNORE_UNAVAILABLE_EXPAND_OPEN_ONLY);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +import org.elasticsearch.action.support.IndicesOptions;, +                    clusterState.metaData().concreteIndices(request.indices(), IndicesOptions.ERROR_UNAVAILABLE_EXPAND_OPEN_CLOSE);, +            concreteIndices = clusterState.metaData().concreteIndices(request.indices(), IndicesOptions.IGNORE_UNAVAILABLE_EXPAND_OPEN_ONLY);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java, +import org.elasticsearch.action.support.IndicesOptions;, +                String[] indices = currentState.metaData().concreteIndices(request.indices(), IndicesOptions.IGNORE_UNAVAILABLE_EXPAND_OPEN_ONLY);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +import org.elasticsearch.action.support.IndicesOptions;, +                    clusterState.metaData().concreteIndices(request.indices(), IndicesOptions.ERROR_UNAVAILABLE_EXPAND_OPEN_CLOSE);, +            concreteIndices = clusterState.metaData().concreteIndices(request.indices(), IndicesOptions.IGNORE_UNAVAILABLE_EXPAND_OPEN_ONLY);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java, +import org.elasticsearch.action.support.IndicesOptions;, +                String[] indices = currentState.metaData().concreteIndices(request.indices(), IndicesOptions.IGNORE_UNAVAILABLE_EXPAND_OPEN_ONLY);, +++ b/src/main/java/org/elasticsearch/action/support/IndicesOptions.java, +    /**, +     * Indices option that ignores unavailable indices, allows no indices and expand wildcards to open only indices, +     */, +    public static IndicesOptions IGNORE_UNAVAILABLE_EXPAND_OPEN_ONLY = fromOptions(true, true, true, false);, +    /**, +     * Indices option that doesn't ignore unavailable indices, allows no indices and expand wildcards to both open and closed indices, +     */, +    public static IndicesOptions ERROR_UNAVAILABLE_EXPAND_OPEN_CLOSE = fromOptions(false, true, true, true);, +, +, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +import org.elasticsearch.action.support.IndicesOptions;, +                    clusterState.metaData().concreteIndices(request.indices(), IndicesOptions.ERROR_UNAVAILABLE_EXPAND_OPEN_CLOSE);, +            concreteIndices = clusterState.metaData().concreteIndices(request.indices(), IndicesOptions.IGNORE_UNAVAILABLE_EXPAND_OPEN_ONLY);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java, +import org.elasticsearch.action.support.IndicesOptions;, +                String[] indices = currentState.metaData().concreteIndices(request.indices(), IndicesOptions.IGNORE_UNAVAILABLE_EXPAND_OPEN_ONLY);, +++ b/src/main/java/org/elasticsearch/action/support/IndicesOptions.java, +    /**, +     * Indices option that ignores unavailable indices, allows no indices and expand wildcards to open only indices, +     */, +    public static IndicesOptions IGNORE_UNAVAILABLE_EXPAND_OPEN_ONLY = fromOptions(true, true, true, false);, +    /**, +     * Indices option that doesn't ignore unavailable indices, allows no indices and expand wildcards to both open and closed indices, +     */, +    public static IndicesOptions ERROR_UNAVAILABLE_EXPAND_OPEN_CLOSE = fromOptions(false, true, true, true);, +, +, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +import org.elasticsearch.action.support.IndicesOptions;, +                    clusterState.metaData().concreteIndices(request.indices(), IndicesOptions.ERROR_UNAVAILABLE_EXPAND_OPEN_CLOSE);, +            concreteIndices = clusterState.metaData().concreteIndices(request.indices(), IndicesOptions.IGNORE_UNAVAILABLE_EXPAND_OPEN_ONLY);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java, +import org.elasticsearch.action.support.IndicesOptions;, +                String[] indices = currentState.metaData().concreteIndices(request.indices(), IndicesOptions.IGNORE_UNAVAILABLE_EXPAND_OPEN_ONLY);, +++ b/src/main/java/org/elasticsearch/action/support/IndicesOptions.java, +    /**, +     * Indices option that ignores unavailable indices, allows no indices and expand wildcards to open only indices, +     */, +    public static IndicesOptions IGNORE_UNAVAILABLE_EXPAND_OPEN_ONLY = fromOptions(true, true, true, false);, +    /**, +     * Indices option that doesn't ignore unavailable indices, allows no indices and expand wildcards to both open and closed indices, +     */, +    public static IndicesOptions ERROR_UNAVAILABLE_EXPAND_OPEN_CLOSE = fromOptions(false, true, true, true);, +, +, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java, +import org.elasticsearch.action.support.IndicesOptions;, +                String[] actualIndices = currentState.metaData().concreteIndices(request.indices(), IndicesOptions.ERROR_UNAVAILABLE_EXPAND_OPEN_CLOSE);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +import org.elasticsearch.action.support.IndicesOptions;, +                    clusterState.metaData().concreteIndices(request.indices(), IndicesOptions.ERROR_UNAVAILABLE_EXPAND_OPEN_CLOSE);, +            concreteIndices = clusterState.metaData().concreteIndices(request.indices(), IndicesOptions.IGNORE_UNAVAILABLE_EXPAND_OPEN_ONLY);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java, +import org.elasticsearch.action.support.IndicesOptions;, +                String[] indices = currentState.metaData().concreteIndices(request.indices(), IndicesOptions.IGNORE_UNAVAILABLE_EXPAND_OPEN_ONLY);, +++ b/src/main/java/org/elasticsearch/action/support/IndicesOptions.java, +    /**, +     * Indices option that ignores unavailable indices, allows no indices and expand wildcards to open only indices, +     */, +    public static IndicesOptions IGNORE_UNAVAILABLE_EXPAND_OPEN_ONLY = fromOptions(true, true, true, false);, +    /**, +     * Indices option that doesn't ignore unavailable indices, allows no indices and expand wildcards to both open and closed indices, +     */, +    public static IndicesOptions ERROR_UNAVAILABLE_EXPAND_OPEN_CLOSE = fromOptions(false, true, true, true);, +, +, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java, +import org.elasticsearch.action.support.IndicesOptions;, +                String[] actualIndices = currentState.metaData().concreteIndices(request.indices(), IndicesOptions.ERROR_UNAVAILABLE_EXPAND_OPEN_CLOSE);, +++ b/src/main/java/org/elasticsearch/index/query/IndicesFilterParser.java, +import org.elasticsearch.action.support.IndicesOptions;, +        final String[] concreteIndices = clusterService.state().metaData().concreteIndices(indices, IndicesOptions.IGNORE_UNAVAILABLE_EXPAND_OPEN_ONLY);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/health/TransportClusterHealthAction.java, +import org.elasticsearch.action.support.IndicesOptions;, +                    clusterState.metaData().concreteIndices(request.indices(), IndicesOptions.ERROR_UNAVAILABLE_EXPAND_OPEN_CLOSE);, +            concreteIndices = clusterState.metaData().concreteIndices(request.indices(), IndicesOptions.IGNORE_UNAVAILABLE_EXPAND_OPEN_ONLY);, +++ b/src/main/java/org/elasticsearch/action/admin/cluster/state/TransportClusterStateAction.java]