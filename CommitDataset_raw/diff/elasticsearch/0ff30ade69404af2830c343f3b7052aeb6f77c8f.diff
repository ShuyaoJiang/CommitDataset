[+++ b/rest-api-spec/test/suggest/20_context.yaml, +# This test creates one huge mapping in the setup, +# Every test should use its own field to make sure it works, +, +setup:, +, +  - do:, +      indices.create:, +          index: test, +          body:, +            mappings:, +              test:, +                "properties":, +                  "suggest_context":, +                     "type" : "completion", +                     "context":, +                        "color":, +                            "type" : "category", +                  "suggest_context_default_hardcoded":, +                     "type" : "completion", +                     "context":, +                        "color":, +                            "type" : "category", +                            "default" : "red", +                  "suggest_context_default_path":, +                     "type" : "completion", +                     "context":, +                        "color":, +                            "type" : "category", +                            "default" : "red", +                            "path" : "color", +                  "suggest_geo":, +                     "type" : "completion", +                     "context":, +                        "location":, +                            "type" : "geo", +, +---, +"Simple context suggestion should work":, +, +  - do:, +      index:, +        index: test, +        type:  test, +        id:    1, +        body:, +          suggest_context:, +            input: "Hoodie red", +            context:, +              color: "red", +, +  - do:, +      index:, +        index: test, +        type:  test, +        id:    2, +        body:, +          suggest_context:, +            input: "Hoodie blue", +            context:, +              color: "blue", +, +  - do:, +      indices.refresh: {}, +, +  - do:, +      suggest:, +        body:, +          result:, +            text: "hoo", +            completion:, +              field: suggest_context, +              context:, +                color: "red", +, +  - match: {result.0.options.0.text: "Hoodie red" }, +, +---, +"Hardcoded category value should work":, +, +  - do:, +      index:, +        index: test, +        type:  test, +        id:    1, +        body:, +          suggest_context_default_hardcoded:, +            input: "Hoodie red", +, +  - do:, +      index:, +        index: test, +        type:  test, +        id:    2, +        body:, +          suggest_context_default_hardcoded:, +            input: "Hoodie blue", +            context:, +              color: "blue", +]