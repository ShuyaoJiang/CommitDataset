[+++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java, +++ b/core/src/main/java/org/elasticsearch/common/network/Cidrs.java, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java, +++ b/core/src/main/java/org/elasticsearch/common/network/Cidrs.java, +++ b/core/src/main/java/org/elasticsearch/common/rounding/Rounding.java, +            rounding = (TimeZoneRounding) Rounding.Streams.read(in);, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java, +++ b/core/src/main/java/org/elasticsearch/common/network/Cidrs.java, +++ b/core/src/main/java/org/elasticsearch/common/rounding/Rounding.java, +            rounding = (TimeZoneRounding) Rounding.Streams.read(in);, +++ b/core/src/main/java/org/elasticsearch/common/rounding/TimeZoneRounding.java, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java, +++ b/core/src/main/java/org/elasticsearch/common/network/Cidrs.java, +++ b/core/src/main/java/org/elasticsearch/common/rounding/Rounding.java, +            rounding = (TimeZoneRounding) Rounding.Streams.read(in);, +++ b/core/src/main/java/org/elasticsearch/common/rounding/TimeZoneRounding.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java, +    public DocumentMapper parse(@Nullable String type, CompressedXContent source) throws MapperParsingException {, +    public DocumentMapper parse(@Nullable String type, CompressedXContent source, String defaultSource) throws MapperParsingException {, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java, +++ b/core/src/main/java/org/elasticsearch/common/network/Cidrs.java, +++ b/core/src/main/java/org/elasticsearch/common/rounding/Rounding.java, +            rounding = (TimeZoneRounding) Rounding.Streams.read(in);, +++ b/core/src/main/java/org/elasticsearch/common/rounding/TimeZoneRounding.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java, +    public DocumentMapper parse(@Nullable String type, CompressedXContent source) throws MapperParsingException {, +    public DocumentMapper parse(@Nullable String type, CompressedXContent source, String defaultSource) throws MapperParsingException {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/MapperService.java, +            DocumentMapper mapper = documentParser.parse(type, mappingSource);, +        return documentParser.parse(mappingType, mappingSource, applyDefault ? defaultMappingSource : null);, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java, +++ b/core/src/main/java/org/elasticsearch/common/network/Cidrs.java, +++ b/core/src/main/java/org/elasticsearch/common/rounding/Rounding.java, +            rounding = (TimeZoneRounding) Rounding.Streams.read(in);, +++ b/core/src/main/java/org/elasticsearch/common/rounding/TimeZoneRounding.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java, +    public DocumentMapper parse(@Nullable String type, CompressedXContent source) throws MapperParsingException {, +    public DocumentMapper parse(@Nullable String type, CompressedXContent source, String defaultSource) throws MapperParsingException {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/MapperService.java, +            DocumentMapper mapper = documentParser.parse(type, mappingSource);, +        return documentParser.parse(mappingType, mappingSource, applyDefault ? defaultMappingSource : null);, +++ b/core/src/main/java/org/elasticsearch/percolator/QueryCollector.java, +            Aggregator[] aggregators = context.aggregations().factories().createTopLevelAggregators(aggregationContext);, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java, +++ b/core/src/main/java/org/elasticsearch/common/network/Cidrs.java, +++ b/core/src/main/java/org/elasticsearch/common/rounding/Rounding.java, +            rounding = (TimeZoneRounding) Rounding.Streams.read(in);, +++ b/core/src/main/java/org/elasticsearch/common/rounding/TimeZoneRounding.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java, +    public DocumentMapper parse(@Nullable String type, CompressedXContent source) throws MapperParsingException {, +    public DocumentMapper parse(@Nullable String type, CompressedXContent source, String defaultSource) throws MapperParsingException {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/MapperService.java, +            DocumentMapper mapper = documentParser.parse(type, mappingSource);, +        return documentParser.parse(mappingType, mappingSource, applyDefault ? defaultMappingSource : null);, +++ b/core/src/main/java/org/elasticsearch/percolator/QueryCollector.java, +            Aggregator[] aggregators = context.aggregations().factories().createTopLevelAggregators(aggregationContext);, +++ b/core/src/main/java/org/elasticsearch/script/Script.java, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java, +++ b/core/src/main/java/org/elasticsearch/common/network/Cidrs.java, +++ b/core/src/main/java/org/elasticsearch/common/rounding/Rounding.java, +            rounding = (TimeZoneRounding) Rounding.Streams.read(in);, +++ b/core/src/main/java/org/elasticsearch/common/rounding/TimeZoneRounding.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java, +    public DocumentMapper parse(@Nullable String type, CompressedXContent source) throws MapperParsingException {, +    public DocumentMapper parse(@Nullable String type, CompressedXContent source, String defaultSource) throws MapperParsingException {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/MapperService.java, +            DocumentMapper mapper = documentParser.parse(type, mappingSource);, +        return documentParser.parse(mappingType, mappingSource, applyDefault ? defaultMappingSource : null);, +++ b/core/src/main/java/org/elasticsearch/percolator/QueryCollector.java, +            Aggregator[] aggregators = context.aggregations().factories().createTopLevelAggregators(aggregationContext);, +++ b/core/src/main/java/org/elasticsearch/script/Script.java, +++ b/core/src/main/java/org/elasticsearch/search/SearchModule.java, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java, +++ b/core/src/main/java/org/elasticsearch/common/network/Cidrs.java, +++ b/core/src/main/java/org/elasticsearch/common/rounding/Rounding.java, +            rounding = (TimeZoneRounding) Rounding.Streams.read(in);, +++ b/core/src/main/java/org/elasticsearch/common/rounding/TimeZoneRounding.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/DocumentMapperParser.java, +    public DocumentMapper parse(@Nullable String type, CompressedXContent source) throws MapperParsingException {, +    public DocumentMapper parse(@Nullable String type, CompressedXContent source, String defaultSource) throws MapperParsingException {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/MapperService.java, +            DocumentMapper mapper = documentParser.parse(type, mappingSource);, +        return documentParser.parse(mappingType, mappingSource, applyDefault ? defaultMappingSource : null);, +++ b/core/src/main/java/org/elasticsearch/percolator/QueryCollector.java, +            Aggregator[] aggregators = context.aggregations().factories().createTopLevelAggregators(aggregationContext);, +++ b/core/src/main/java/org/elasticsearch/script/Script.java, +++ b/core/src/main/java/org/elasticsearch/search/SearchModule.java, +++ b/core/src/main/java/org/elasticsearch/search/SearchService.java]