[+++ b/server/src/test/java/org/elasticsearch/index/shard/IndexShardIT.java, +import static org.hamcrest.Matchers.either;, +                assertFalse(shard.shouldPeriodicallyFlush());, +                assertThat(msg, currentStats.getPeriodic(),, +                    either(equalTo(initialStats.getPeriodic() + 1)).or(equalTo(initialStats.getPeriodic() + 2)));, +                assertThat(msg, currentStats.getTotal(),, +                    either(equalTo(initialStats.getTotal() + 1)).or(equalTo(initialStats.getTotal() + 2)));, +            check = () -> {, +                assertFalse(shard.shouldRollTranslogGeneration());, +                assertEquals(generation + 1, getTranslog(shard).currentFileGeneration());, +            };]