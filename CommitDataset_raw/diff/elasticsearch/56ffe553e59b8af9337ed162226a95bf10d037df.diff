[+++ b/modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpPipeliningHandler.java, +import io.netty.handler.codec.http.FullHttpRequest;, +        assert msg instanceof FullHttpRequest : "Invalid message type: " + msg.getClass();, +        HttpPipelinedRequest<FullHttpRequest> pipelinedRequest = aggregator.read(((FullHttpRequest) msg));, +        assert msg instanceof Netty4HttpResponse : "Invalid message type: " + msg.getClass();;, +++ b/modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpPipeliningHandler.java, +import io.netty.handler.codec.http.FullHttpRequest;, +        assert msg instanceof FullHttpRequest : "Invalid message type: " + msg.getClass();, +        HttpPipelinedRequest<FullHttpRequest> pipelinedRequest = aggregator.read(((FullHttpRequest) msg));, +        assert msg instanceof Netty4HttpResponse : "Invalid message type: " + msg.getClass();;, +++ b/modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4HttpPipeliningHandlerTests.java, +++ b/modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpPipeliningHandler.java, +import io.netty.handler.codec.http.FullHttpRequest;, +        assert msg instanceof FullHttpRequest : "Invalid message type: " + msg.getClass();, +        HttpPipelinedRequest<FullHttpRequest> pipelinedRequest = aggregator.read(((FullHttpRequest) msg));, +        assert msg instanceof Netty4HttpResponse : "Invalid message type: " + msg.getClass();;, +++ b/modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4HttpPipeliningHandlerTests.java, +++ b/plugins/transport-nio/src/main/java/org/elasticsearch/http/nio/NioHttpPipeliningHandler.java, +import io.netty.handler.codec.http.FullHttpRequest;, +        assert msg instanceof FullHttpRequest : "Invalid message type: " + msg.getClass();, +        HttpPipelinedRequest<FullHttpRequest> pipelinedRequest = aggregator.read(((FullHttpRequest) msg));, +        assert msg instanceof NioHttpResponse : "Invalid message type: " + msg.getClass();, +++ b/modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpPipeliningHandler.java, +import io.netty.handler.codec.http.FullHttpRequest;, +        assert msg instanceof FullHttpRequest : "Invalid message type: " + msg.getClass();, +        HttpPipelinedRequest<FullHttpRequest> pipelinedRequest = aggregator.read(((FullHttpRequest) msg));, +        assert msg instanceof Netty4HttpResponse : "Invalid message type: " + msg.getClass();;, +++ b/modules/transport-netty4/src/test/java/org/elasticsearch/http/netty4/Netty4HttpPipeliningHandlerTests.java, +++ b/plugins/transport-nio/src/main/java/org/elasticsearch/http/nio/NioHttpPipeliningHandler.java, +import io.netty.handler.codec.http.FullHttpRequest;, +        assert msg instanceof FullHttpRequest : "Invalid message type: " + msg.getClass();, +        HttpPipelinedRequest<FullHttpRequest> pipelinedRequest = aggregator.read(((FullHttpRequest) msg));, +        assert msg instanceof NioHttpResponse : "Invalid message type: " + msg.getClass();, +++ b/plugins/transport-nio/src/test/java/org/elasticsearch/http/nio/NioHttpPipeliningHandlerTests.java]