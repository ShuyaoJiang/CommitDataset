[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/analysis/SynonymTokenFilterFactory.java, +import org.elasticsearch.indices.analysis.IndicesAnalysisService;, +    @Inject public SynonymTokenFilterFactory(Index index, @IndexSettings Settings indexSettings, Environment env, IndicesAnalysisService indicesAnalysisService, Map<String, TokenizerFactoryFactory> tokenizerFactories,, +        String tokenizerName = settings.get("tokenizer", "whitespace");, +, +        TokenizerFactoryFactory tokenizerFactoryFactory = tokenizerFactories.get(tokenizerName);, +        if (tokenizerFactoryFactory == null) {, +            tokenizerFactoryFactory = indicesAnalysisService.tokenizerFactoryFactory(tokenizerName);, +        }, +        if (tokenizerFactoryFactory == null) {, +            throw new ElasticSearchIllegalArgumentException("failed to fine tokenizer [" + tokenizerName + "] for synonym token filter");, +        }, +        TokenizerFactory tokenizerFactory = tokenizerFactoryFactory.create(tokenizerName, settings);]