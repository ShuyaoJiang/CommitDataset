[+++ b/docs/reference/mapping/types/dense-vector.asciidoc, +These vectors can be used for <<vector-functions,document scoring>>., +++ b/docs/reference/mapping/types/dense-vector.asciidoc, +These vectors can be used for <<vector-functions,document scoring>>., +++ b/docs/reference/mapping/types/sparse-vector.asciidoc, +These vectors can be used for <<vector-functions,document scoring>>., +++ b/docs/reference/mapping/types/dense-vector.asciidoc, +These vectors can be used for <<vector-functions,document scoring>>., +++ b/docs/reference/mapping/types/sparse-vector.asciidoc, +These vectors can be used for <<vector-functions,document scoring>>., +++ b/docs/reference/query-dsl/script-score-query.asciidoc, +[[vector-functions]], +===== Functions for vector fields, +These functions are used for, +for <<dense-vector,`dense_vector`>>  and, +<<sparse-vector,`sparse_vector`>> fields., +, +For dense_vector fields, `cosineSimilarity` calculates the measure of, +cosine similarity between a given query vector and document vectors., +, +[source,js], +--------------------------------------------------, +{, +  "query": {, +    "script_score": {, +      "query": {, +        "match_all": {}, +      },, +      "script": {, +        "source": "cosineSimilarity(params.queryVector, doc['my_dense_vector'])",, +        "params": {, +          "queryVector": [4, 3.4, -0.2]  <1>, +        }, +      }, +    }, +  }, +}, +--------------------------------------------------, +// NOTCONSOLE, +<1> To take advantage of the script optimizations, provide a query vector as a script parameter., +, +Similarly, for sparse_vector fields, `cosineSimilaritySparse` calculates cosine similarity, +between a given query vector and document vectors., +, +[source,js], +--------------------------------------------------, +{, +  "query": {, +    "script_score": {, +      "query": {, +        "match_all": {}, +      },, +      "script": {, +        "source": "cosineSimilaritySparse(params.queryVector, doc['my_sparse_vector'])",, +        "params": {, +          "queryVector": {"2": 0.5, "10" : 111.3, "50": -1.3, "113": 14.8, "4545": 156.0}, +        }, +      }, +    }, +  }, +}, +--------------------------------------------------, +// NOTCONSOLE, +, +For dense_vector fields, `dotProduct` calculates the measure of, +dot product between a given query vector and document vectors., +, +[source,js], +--------------------------------------------------, +{, +  "query": {, +    "script_score": {, +      "query": {, +        "match_all": {}, +      },, +      "script": {, +        "source": "dotProduct(params.queryVector, doc['my_dense_vector'])",, +        "params": {, +          "queryVector": [4, 3.4, -0.2], +        }, +      }, +    }, +  }, +}, +--------------------------------------------------, +// NOTCONSOLE, +, +Similarly, for sparse_vector fields, `dotProductSparse` calculates dot product, +between a given query vector and document vectors., +, +[source,js], +--------------------------------------------------, +{, +  "query": {, +    "script_score": {, +      "query": {, +        "match_all": {}, +      },, +      "script": {, +        "source": "dotProductSparse(params.queryVector, doc['my_sparse_vector'])",]