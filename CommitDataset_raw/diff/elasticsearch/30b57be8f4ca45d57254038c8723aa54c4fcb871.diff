[+++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java, +                if (!clusterService.state().nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java, +                if (!clusterService.state().nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java, +        if (clusterService.state().nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java, +                if (!clusterService.state().nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java, +        if (clusterService.state().nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeAction.java, +            if (nodes.isLocalNodeElectedMaster() || localExecute(request)) {, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java, +                if (!clusterService.state().nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java, +        if (clusterService.state().nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeAction.java, +            if (nodes.isLocalNodeElectedMaster() || localExecute(request)) {, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterChangedEvent.java, +        return state.nodes().isLocalNodeElectedMaster();, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java, +                if (!clusterService.state().nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java, +        if (clusterService.state().nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeAction.java, +            if (nodes.isLocalNodeElectedMaster() || localExecute(request)) {, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterChangedEvent.java, +        return state.nodes().isLocalNodeElectedMaster();, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java, +        if (!event.state().nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java, +                if (!clusterService.state().nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java, +        if (clusterService.state().nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeAction.java, +            if (nodes.isLocalNodeElectedMaster() || localExecute(request)) {, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterChangedEvent.java, +        return state.nodes().isLocalNodeElectedMaster();, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java, +        if (!event.state().nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodes.java, +     * Returns <tt>true</tt> if the local node is the elected master node., +    public boolean isLocalNodeElectedMaster() {, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java, +                if (!clusterService.state().nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java, +        if (clusterService.state().nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeAction.java, +            if (nodes.isLocalNodeElectedMaster() || localExecute(request)) {, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterChangedEvent.java, +        return state.nodes().isLocalNodeElectedMaster();, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java, +        if (!event.state().nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodes.java, +     * Returns <tt>true</tt> if the local node is the elected master node., +    public boolean isLocalNodeElectedMaster() {, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java, +        if (event.state().nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java, +                if (!clusterService.state().nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java, +        if (clusterService.state().nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeAction.java, +            if (nodes.isLocalNodeElectedMaster() || localExecute(request)) {, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterChangedEvent.java, +        return state.nodes().isLocalNodeElectedMaster();, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java, +        if (!event.state().nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodes.java, +     * Returns <tt>true</tt> if the local node is the elected master node., +    public boolean isLocalNodeElectedMaster() {, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java, +        if (event.state().nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java, +        if (!previousClusterState.nodes().isLocalNodeElectedMaster() && executor.runOnlyOnMaster()) {, +            if (newClusterState.nodes().isLocalNodeElectedMaster()) {, +            if (newClusterState.nodes().isLocalNodeElectedMaster()) {, +            if (newClusterState.nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/settings/TransportClusterUpdateSettingsAction.java, +                if (!clusterService.state().nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java, +        if (clusterService.state().nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/action/support/master/TransportMasterNodeAction.java, +            if (nodes.isLocalNodeElectedMaster() || localExecute(request)) {, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterChangedEvent.java, +        return state.nodes().isLocalNodeElectedMaster();, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java, +        if (!event.state().nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/cluster/node/DiscoveryNodes.java, +     * Returns <tt>true</tt> if the local node is the elected master node., +    public boolean isLocalNodeElectedMaster() {, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java, +        if (event.state().nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java, +        if (!previousClusterState.nodes().isLocalNodeElectedMaster() && executor.runOnlyOnMaster()) {, +            if (newClusterState.nodes().isLocalNodeElectedMaster()) {, +            if (newClusterState.nodes().isLocalNodeElectedMaster()) {, +            if (newClusterState.nodes().isLocalNodeElectedMaster()) {, +++ b/core/src/main/java/org/elasticsearch/discovery/zen/NodeJoinController.java, +            assert state.nodes().isLocalNodeElectedMaster() : "onElectedAsMaster called but local node is not master";]