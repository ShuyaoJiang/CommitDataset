[+++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java, +import org.elasticsearch.common.unit.ByteSizeValue;, +    @Nullable, +    private ByteSizeValue totalIndexingBuffer;, +, +                    @Nullable TransportInfo transport, @Nullable HttpInfo http, @Nullable PluginsAndModules plugins, @Nullable IngestInfo ingest,, +                    ByteSizeValue totalIndexingBuffer) {, +        this.totalIndexingBuffer = totalIndexingBuffer;, +    @Nullable, +    public ByteSizeValue getTotalIndexingBuffer() {, +        return totalIndexingBuffer;, +    }, +, +        totalIndexingBuffer = new ByteSizeValue(in.readLong());, +        if (totalIndexingBuffer == null) {, +            out.writeLong(0);, +        } else {, +            out.writeLong(totalIndexingBuffer.bytes());, +        }, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java, +import org.elasticsearch.common.unit.ByteSizeValue;, +    @Nullable, +    private ByteSizeValue totalIndexingBuffer;, +, +                    @Nullable TransportInfo transport, @Nullable HttpInfo http, @Nullable PluginsAndModules plugins, @Nullable IngestInfo ingest,, +                    ByteSizeValue totalIndexingBuffer) {, +        this.totalIndexingBuffer = totalIndexingBuffer;, +    @Nullable, +    public ByteSizeValue getTotalIndexingBuffer() {, +        return totalIndexingBuffer;, +    }, +, +        totalIndexingBuffer = new ByteSizeValue(in.readLong());, +        if (totalIndexingBuffer == null) {, +            out.writeLong(0);, +        } else {, +            out.writeLong(totalIndexingBuffer.bytes());, +        }, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java, +            builder.field("total_indexing_buffer_in_bytes", nodeInfo.getTotalIndexingBuffer().bytes());, +            builder.field("total_indexing_buffer", nodeInfo.getTotalIndexingBuffer());, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java, +import org.elasticsearch.common.unit.ByteSizeValue;, +    @Nullable, +    private ByteSizeValue totalIndexingBuffer;, +, +                    @Nullable TransportInfo transport, @Nullable HttpInfo http, @Nullable PluginsAndModules plugins, @Nullable IngestInfo ingest,, +                    ByteSizeValue totalIndexingBuffer) {, +        this.totalIndexingBuffer = totalIndexingBuffer;, +    @Nullable, +    public ByteSizeValue getTotalIndexingBuffer() {, +        return totalIndexingBuffer;, +    }, +, +        totalIndexingBuffer = new ByteSizeValue(in.readLong());, +        if (totalIndexingBuffer == null) {, +            out.writeLong(0);, +        } else {, +            out.writeLong(totalIndexingBuffer.bytes());, +        }, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java, +            builder.field("total_indexing_buffer_in_bytes", nodeInfo.getTotalIndexingBuffer().bytes());, +            builder.field("total_indexing_buffer", nodeInfo.getTotalIndexingBuffer());, +++ b/core/src/main/java/org/elasticsearch/indices/IndicesService.java, +import org.elasticsearch.action.admin.indices.stats.CommonStatsFlags;, +import org.elasticsearch.action.fieldstats.FieldStats;, +import org.elasticsearch.common.settings.Setting;, +import org.elasticsearch.common.unit.ByteSizeValue;, +    public ByteSizeValue getTotalIndexingBufferBytes() {, +        return indexingMemoryController.indexingBufferSize();, +    }, +, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodeInfo.java, +import org.elasticsearch.common.unit.ByteSizeValue;, +    @Nullable, +    private ByteSizeValue totalIndexingBuffer;, +, +                    @Nullable TransportInfo transport, @Nullable HttpInfo http, @Nullable PluginsAndModules plugins, @Nullable IngestInfo ingest,, +                    ByteSizeValue totalIndexingBuffer) {, +        this.totalIndexingBuffer = totalIndexingBuffer;, +    @Nullable, +    public ByteSizeValue getTotalIndexingBuffer() {, +        return totalIndexingBuffer;, +    }, +, +        totalIndexingBuffer = new ByteSizeValue(in.readLong());, +        if (totalIndexingBuffer == null) {, +            out.writeLong(0);, +        } else {, +            out.writeLong(totalIndexingBuffer.bytes());, +        }, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/info/NodesInfoResponse.java, +            builder.field("total_indexing_buffer_in_bytes", nodeInfo.getTotalIndexingBuffer().bytes());, +            builder.field("total_indexing_buffer", nodeInfo.getTotalIndexingBuffer());, +++ b/core/src/main/java/org/elasticsearch/indices/IndicesService.java, +import org.elasticsearch.action.admin.indices.stats.CommonStatsFlags;, +import org.elasticsearch.action.fieldstats.FieldStats;, +import org.elasticsearch.common.settings.Setting;, +import org.elasticsearch.common.unit.ByteSizeValue;, +    public ByteSizeValue getTotalIndexingBufferBytes() {]