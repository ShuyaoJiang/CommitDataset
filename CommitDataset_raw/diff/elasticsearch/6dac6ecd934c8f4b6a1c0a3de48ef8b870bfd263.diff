[+++ b/src/main/java/org/elasticsearch/index/search/child/TopChildrenQuery.java, +                        //The number of docs in the reader and in the query both upper bound the size of parentDocsPerReader, +                        int mapSize =  Math.min(indexReader.maxDoc(), context.from() + context.size());, +                        readerParentDocs = new IntObjectOpenHashMap<>(mapSize);]