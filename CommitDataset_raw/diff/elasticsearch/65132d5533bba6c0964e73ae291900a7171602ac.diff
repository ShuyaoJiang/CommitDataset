[+++ b/bin/plugin, +export HOSTNAME=`hostname -s`, +, +++ b/bin/plugin, +export HOSTNAME=`hostname -s`, +, +++ b/bin/plugin.bat, +SET HOSTNAME=%COMPUTERNAME%, +, +++ b/bin/plugin, +export HOSTNAME=`hostname -s`, +, +++ b/bin/plugin.bat, +SET HOSTNAME=%COMPUTERNAME%, +, +++ b/rest-api-spec/test/indices.upgrade/10_basic.yaml, +---, +"Basic test for upgrade indices":, +, +  - do:, +      indices.create:, +        index: test_index, +, +  - do:, +      cluster.health:, +        wait_for_status: yellow, +, +  - do:, +      indices.upgrade:, +        index: test_index, +, +  - match: {upgraded_indices.test_index: '/(\d\.)+\d/'}, +++ b/bin/plugin, +export HOSTNAME=`hostname -s`, +, +++ b/bin/plugin.bat, +SET HOSTNAME=%COMPUTERNAME%, +, +++ b/rest-api-spec/test/indices.upgrade/10_basic.yaml, +---, +"Basic test for upgrade indices":, +, +  - do:, +      indices.create:, +        index: test_index, +, +  - do:, +      cluster.health:, +        wait_for_status: yellow, +, +  - do:, +      indices.upgrade:, +        index: test_index, +, +  - match: {upgraded_indices.test_index: '/(\d\.)+\d/'}, +++ b/src/main/java/org/elasticsearch/discovery/zen/ping/multicast/MulticastZenPing.java, +import org.elasticsearch.common.io.stream.BytesStreamOutput;, +import org.elasticsearch.common.io.stream.StreamInput;, +import org.elasticsearch.common.io.stream.StreamOutput;, +    private static final int PING_SIZE_ESTIMATE = 150;, +, +            BytesStreamOutput out = new BytesStreamOutput(PING_SIZE_ESTIMATE);, +++ b/bin/plugin, +export HOSTNAME=`hostname -s`, +, +++ b/bin/plugin.bat, +SET HOSTNAME=%COMPUTERNAME%, +, +++ b/rest-api-spec/test/indices.upgrade/10_basic.yaml, +---, +"Basic test for upgrade indices":, +, +  - do:, +      indices.create:, +        index: test_index, +, +  - do:, +      cluster.health:, +        wait_for_status: yellow, +, +  - do:, +      indices.upgrade:, +        index: test_index, +, +  - match: {upgraded_indices.test_index: '/(\d\.)+\d/'}, +++ b/src/main/java/org/elasticsearch/discovery/zen/ping/multicast/MulticastZenPing.java, +import org.elasticsearch.common.io.stream.BytesStreamOutput;, +import org.elasticsearch.common.io.stream.StreamInput;, +import org.elasticsearch.common.io.stream.StreamOutput;, +    private static final int PING_SIZE_ESTIMATE = 150;, +, +            BytesStreamOutput out = new BytesStreamOutput(PING_SIZE_ESTIMATE);, +++ b/src/main/java/org/elasticsearch/rest/action/admin/indices/upgrade/RestUpgradeAction.java, +                builder.startObject("upgraded_indices");, +++ b/bin/plugin, +export HOSTNAME=`hostname -s`, +, +++ b/bin/plugin.bat, +SET HOSTNAME=%COMPUTERNAME%, +]