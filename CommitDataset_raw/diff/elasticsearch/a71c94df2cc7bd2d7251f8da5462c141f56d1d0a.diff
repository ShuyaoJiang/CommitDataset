[+++ b/server/src/test/java/org/elasticsearch/action/search/SearchResponseMergerTests.java, +        // the sort fields and the collapse field are not returned when hits are empty, +        if (searchHits.getHits().length > 0) {, +        } else {, +            assertNull(searchHits.getSortFields());, +            assertNull(searchHits.getCollapseField());, +        }, +        if (collapseField != null, +                // the collapse field is not returned when hits are empty, +                && hits.length > 0) {]