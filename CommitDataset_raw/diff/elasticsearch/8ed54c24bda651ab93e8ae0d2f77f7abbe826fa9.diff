[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/env/NodeEnvironment.java, +    public File nodeLocation() {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/env/NodeEnvironment.java, +    public File nodeLocation() {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/gateway/local/LocalGateway.java, +                                NodeEnvironment nodeEnv, TransportNodesListGatewayState listGatewayState) {, +        this.location = new File(nodeEnv.nodeLocation(), "_state");, +        FileSystemUtils.deleteRecursively(nodeEnv.nodeLocation());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/env/NodeEnvironment.java, +    public File nodeLocation() {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/gateway/local/LocalGateway.java, +                                NodeEnvironment nodeEnv, TransportNodesListGatewayState listGatewayState) {, +        this.location = new File(nodeEnv.nodeLocation(), "_state");, +        FileSystemUtils.deleteRecursively(nodeEnv.nodeLocation());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/store/fs/FsIndexStore.java, +            this.location = new File(new File(nodeEnv.nodeLocation(), "indices"), index.name());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/env/NodeEnvironment.java, +    public File nodeLocation() {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/gateway/local/LocalGateway.java, +                                NodeEnvironment nodeEnv, TransportNodesListGatewayState listGatewayState) {, +        this.location = new File(nodeEnv.nodeLocation(), "_state");, +        FileSystemUtils.deleteRecursively(nodeEnv.nodeLocation());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/store/fs/FsIndexStore.java, +            this.location = new File(new File(nodeEnv.nodeLocation(), "indices"), index.name());, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/translog/fs/FsTranslog.java, +        this.location = new File(new File(new File(new File(nodeEnv.nodeLocation(), "indices"), shardId.index().name()), Integer.toString(shardId.id())), "translog");]