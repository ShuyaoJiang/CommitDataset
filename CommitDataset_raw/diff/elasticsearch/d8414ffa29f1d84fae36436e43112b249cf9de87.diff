[+++ b/docs/build.gradle, +, +// Used by percentile/percentile-rank aggregations, +buildRestTests.setups['latency'] = ''', +  - do:, +        indices.create:, +          index: latency, +          body:, +            settings:, +              number_of_shards: 1, +              number_of_replicas: 1, +            mappings:, +              data:, +                properties:, +                  load_time:, +                    type: long, +  - do:, +        bulk:, +          index: latency, +          type: data, +          refresh: true, +          body: |''', +, +, +for (int i = 0; i < 100; i++) {, +  def value = i, +  if (i % 10) {, +    value = i*10, +  }, +  buildRestTests.setups['latency'] += """, +            {"index":{}}, +            {"load_time": "$value"}""", +}, +++ b/docs/build.gradle, +, +// Used by percentile/percentile-rank aggregations, +buildRestTests.setups['latency'] = ''', +  - do:, +        indices.create:, +          index: latency, +          body:, +            settings:, +              number_of_shards: 1, +              number_of_replicas: 1, +            mappings:, +              data:, +                properties:, +                  load_time:, +                    type: long, +  - do:, +        bulk:, +          index: latency, +          type: data, +          refresh: true, +          body: |''', +, +, +for (int i = 0; i < 100; i++) {, +  def value = i, +  if (i % 10) {, +    value = i*10, +  }, +  buildRestTests.setups['latency'] += """, +            {"index":{}}, +            {"load_time": "$value"}""", +}, +++ b/docs/reference/aggregations/metrics/percentile-aggregation.asciidoc, +GET latency/data/_search, +    "size": 0,, +// CONSOLE, +// TEST[setup:latency], +            "1.0": 9.9,, +            "5.0": 29.500000000000004,, +            "25.0": 167.5,, +            "50.0": 445.0,, +            "75.0": 722.5,, +            "95.0": 940.5,, +            "99.0": 980.1000000000001, +// TESTRESPONSE[s/\.\.\./"took": $body.took,"timed_out": false,"_shards": $body._shards,"hits": $body.hits,/], +GET latency/data/_search, +    "size": 0,, +// CONSOLE, +// TEST[setup:latency], +GET latency/data/_search, +    "size": 0,, +        "load_time_outlier": {, +                "field": "load_time",, +// TEST[setup:latency], +        "load_time_outlier": {, +                    "value": 9.9, +                    "value": 29.500000000000004, +                    "value": 167.5, +                    "value": 445.0, +                    "value": 722.5, +                    "value": 940.5, +                    "value": 980.1000000000001, +GET latency/data/_search, +    "size": 0,, +// CONSOLE, +// TEST[setup:latency]]