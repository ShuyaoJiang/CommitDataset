[+++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/precommit/PrecommitTasks.groovy, +        // We want to get any compilation error before running the pre-commit checks., +        project.sourceSets.all { sourceSet ->, +            precommitTasks.each { task ->, +                task.shouldRunAfter(sourceSet.getClassesTaskName()), +            }, +        }, +        return project.tasks.create([, +        ])]