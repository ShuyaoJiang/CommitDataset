[+++ b/plugins/discovery-ec2/src/main/java/org/elasticsearch/discovery/ec2/AwsEc2UnicastHostsProvider.java, +                } else {, +                    throw new IllegalArgumentException(hostType + " is unknown for discovery.ec2.host_type");, +                            discoNodes.add(new DiscoveryNode(instance.getInstanceId(), "#cloud-" + instance.getInstanceId() + "-" + i,, +                                addresses[i], emptyMap(), emptySet(), Version.CURRENT.minimumCompatibilityVersion()));, +++ b/plugins/discovery-ec2/src/main/java/org/elasticsearch/discovery/ec2/AwsEc2UnicastHostsProvider.java, +                } else {, +                    throw new IllegalArgumentException(hostType + " is unknown for discovery.ec2.host_type");, +                            discoNodes.add(new DiscoveryNode(instance.getInstanceId(), "#cloud-" + instance.getInstanceId() + "-" + i,, +                                addresses[i], emptyMap(), emptySet(), Version.CURRENT.minimumCompatibilityVersion()));, +++ b/plugins/discovery-ec2/src/test/java/org/elasticsearch/discovery/ec2/Ec2DiscoveryTests.java, +            assertThat(e.getMessage(), containsString("does_not_exist is unknown for discovery.ec2.host_type"));]