[+++ b/src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java, +import org.apache.lucene.index.IndexFileNames;, +import org.apache.lucene.util.Constants;, +        final List<Path> foundFiles = new ArrayList<>();, +                        foundFiles.add(file);, +        if (Constants.WINDOWS) {, +            if (foundFiles.size() > 0) {, +                for (Path file : foundFiles) {, +                    // for now on windows we only ensure that there is at least no segments_N file left on the path, +                    // we don't have a retry mechanism in place yet., +                    assertFalse(foundFiles.size() + " files exist that should have been cleaned:\n" + sb.toString(), file.getFileName().toString().startsWith(IndexFileNames.SEGMENTS));, +                }, +            }, +        } else {, +            assertThat(foundFiles.size() + " files exist that should have been cleaned:\n" + sb.toString(), foundFiles.size(), equalTo(0));, +        }]