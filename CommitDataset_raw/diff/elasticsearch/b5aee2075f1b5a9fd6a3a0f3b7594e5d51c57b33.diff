[+++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java, +                indicesService.clearRequestCache(shard);, +                    indicesService.clearRequestCache(shard);, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java, +                indicesService.clearRequestCache(shard);, +                    indicesService.clearRequestCache(shard);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java, +import org.elasticsearch.indices.IndicesQueryCache;, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java, +                indicesService.clearRequestCache(shard);, +                    indicesService.clearRequestCache(shard);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java, +import org.elasticsearch.indices.IndicesQueryCache;, +++ b/core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java, +import org.elasticsearch.indices.IndicesQueryCache;, +import org.elasticsearch.indices.IndicesRequestCache;, +                    IndicesService.INDICES_CACHE_CLEAN_INTERVAL_SETTING,, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java, +                indicesService.clearRequestCache(shard);, +                    indicesService.clearRequestCache(shard);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java, +import org.elasticsearch.indices.IndicesQueryCache;, +++ b/core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java, +import org.elasticsearch.indices.IndicesQueryCache;, +import org.elasticsearch.indices.IndicesRequestCache;, +                    IndicesService.INDICES_CACHE_CLEAN_INTERVAL_SETTING,, +++ b/core/src/main/java/org/elasticsearch/common/settings/IndexScopedSettings.java, +import org.elasticsearch.indices.IndicesRequestCache;, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java, +                indicesService.clearRequestCache(shard);, +                    indicesService.clearRequestCache(shard);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java, +import org.elasticsearch.indices.IndicesQueryCache;, +++ b/core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java, +import org.elasticsearch.indices.IndicesQueryCache;, +import org.elasticsearch.indices.IndicesRequestCache;, +                    IndicesService.INDICES_CACHE_CLEAN_INTERVAL_SETTING,, +++ b/core/src/main/java/org/elasticsearch/common/settings/IndexScopedSettings.java, +import org.elasticsearch.indices.IndicesRequestCache;, +++ b/core/src/main/java/org/elasticsearch/index/IndexModule.java, +import org.elasticsearch.indices.IndicesQueryCache;, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java, +                indicesService.clearRequestCache(shard);, +                    indicesService.clearRequestCache(shard);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java, +import org.elasticsearch.indices.IndicesQueryCache;, +++ b/core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java, +import org.elasticsearch.indices.IndicesQueryCache;, +import org.elasticsearch.indices.IndicesRequestCache;, +                    IndicesService.INDICES_CACHE_CLEAN_INTERVAL_SETTING,, +++ b/core/src/main/java/org/elasticsearch/common/settings/IndexScopedSettings.java, +import org.elasticsearch.indices.IndicesRequestCache;, +++ b/core/src/main/java/org/elasticsearch/index/IndexModule.java, +import org.elasticsearch.indices.IndicesQueryCache;, +++ b/core/src/main/java/org/elasticsearch/index/cache/query/index/IndexQueryCache.java, +import org.elasticsearch.indices.IndicesQueryCache;, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java, +                indicesService.clearRequestCache(shard);, +                    indicesService.clearRequestCache(shard);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java, +import org.elasticsearch.indices.IndicesQueryCache;, +++ b/core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java, +import org.elasticsearch.indices.IndicesQueryCache;, +import org.elasticsearch.indices.IndicesRequestCache;, +                    IndicesService.INDICES_CACHE_CLEAN_INTERVAL_SETTING,, +++ b/core/src/main/java/org/elasticsearch/common/settings/IndexScopedSettings.java, +import org.elasticsearch.indices.IndicesRequestCache;, +++ b/core/src/main/java/org/elasticsearch/index/IndexModule.java, +import org.elasticsearch.indices.IndicesQueryCache;, +++ b/core/src/main/java/org/elasticsearch/index/cache/query/index/IndexQueryCache.java, +import org.elasticsearch.indices.IndicesQueryCache;, +++ b/core/src/main/java/org/elasticsearch/index/cache/request/ShardRequestCache.java, +import org.apache.lucene.util.Accountable;, +import org.elasticsearch.indices.IndicesRequestCache;, +public final class ShardRequestCache {, +    public void onCached(Accountable key, Accountable value) {, +    public void onRemoval(Accountable key, Accountable value, boolean evicted) {, +        if (evicted) {, +        if (key != null) {, +            dec += key.ramBytesUsed();, +        if (value != null) {, +            dec += value.ramBytesUsed();, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java, +                indicesService.clearRequestCache(shard);, +                    indicesService.clearRequestCache(shard);, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java, +import org.elasticsearch.indices.IndicesQueryCache;, +++ b/core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java, +import org.elasticsearch.indices.IndicesQueryCache;, +import org.elasticsearch.indices.IndicesRequestCache;, +                    IndicesService.INDICES_CACHE_CLEAN_INTERVAL_SETTING,]