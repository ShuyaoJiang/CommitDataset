[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/xcontent/DateFieldMapper.java, +        return parseStringValue(value);, +                lowerTerm == null ? null : parseStringValue(lowerTerm),, +                upperTerm == null ? null : parseStringValue(upperTerm),, +                lowerTerm == null ? null : parseStringValue(lowerTerm),, +                upperTerm == null ? null : parseStringValue(upperTerm),, +        long value = parseStringValue(dateAsString);, +, +    private long parseStringValue(String value) {, +        try {, +            return dateTimeFormatter.parser().parseMillis(value);, +        } catch (RuntimeException e) {, +            try {, +                return Long.parseLong(value);, +            } catch (NumberFormatException e1) {, +                throw new MapperParsingException("failed to parse date field, tried both date format [" + dateTimeFormatter.format() + "], and timestamp number", e);, +            }, +        }, +    }]