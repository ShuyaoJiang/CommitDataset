[+++ b/server/src/test/java/org/elasticsearch/index/mapper/DynamicMappingIT.java, +import org.hamcrest.Matchers;, +            // general case, the parsing code complains that it can't parse "bar" as a "long", +            assertThat(e.getMessage(),, +                    Matchers.containsString("failed to parse field [foo] of type [long]"));, +        } catch (IllegalArgumentException e) {, +            // rare case: the node that processes the index request doesn't have the mappings, +            // yet and sends a mapping update to the master node to map "bar" as "text". This, +            // fails as it had been already mapped as a long by the previous index request., +            assertThat(e.getMessage(),, +                    Matchers.containsString("mapper [foo] of different type, current_type [long], merged_type [text]"));]