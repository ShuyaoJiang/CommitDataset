[+++ b/build.gradle, +++ b/build.gradle, +++ b/core/src/main/java/org/elasticsearch/action/fieldstats/TransportFieldStatsTransportAction.java, +                    if (indexConstraintFieldStats == null) {, +                        continue;, +                    }, +, +                    if (indexConstraintFieldStats.match(indexConstraint)) {, +                        // The index constraint didn't match, so we remove all the field stats of the index we're checking, +++ b/build.gradle, +++ b/core/src/main/java/org/elasticsearch/action/fieldstats/TransportFieldStatsTransportAction.java, +                    if (indexConstraintFieldStats == null) {, +                        continue;, +                    }, +, +                    if (indexConstraintFieldStats.match(indexConstraint)) {, +                        // The index constraint didn't match, so we remove all the field stats of the index we're checking, +++ b/core/src/test/java/org/elasticsearch/common/cache/CacheTests.java, +                return value == that.value;, +, +                    if (first && !second) {, +                    } else if (!first && second) {, +                    } else if (!first && !second) {, +++ b/build.gradle, +++ b/core/src/main/java/org/elasticsearch/action/fieldstats/TransportFieldStatsTransportAction.java, +                    if (indexConstraintFieldStats == null) {, +                        continue;, +                    }, +, +                    if (indexConstraintFieldStats.match(indexConstraint)) {, +                        // The index constraint didn't match, so we remove all the field stats of the index we're checking, +++ b/core/src/test/java/org/elasticsearch/common/cache/CacheTests.java, +                return value == that.value;, +, +                    if (first && !second) {, +                    } else if (!first && second) {, +                    } else if (!first && !second) {, +++ b/core/src/test/java/org/elasticsearch/fieldstats/FieldStatsTests.java, +        assertThat(response.getIndicesMergedFieldStats().size(), equalTo(1));, +        assertThat(response.getIndicesMergedFieldStats().get("test1").size(), equalTo(0));, +++ b/build.gradle, +++ b/core/src/main/java/org/elasticsearch/action/fieldstats/TransportFieldStatsTransportAction.java, +                    if (indexConstraintFieldStats == null) {, +                        continue;, +                    }, +, +                    if (indexConstraintFieldStats.match(indexConstraint)) {, +                        // The index constraint didn't match, so we remove all the field stats of the index we're checking, +++ b/core/src/test/java/org/elasticsearch/common/cache/CacheTests.java, +                return value == that.value;, +, +                    if (first && !second) {, +                    } else if (!first && second) {, +                    } else if (!first && !second) {, +++ b/core/src/test/java/org/elasticsearch/fieldstats/FieldStatsTests.java, +        assertThat(response.getIndicesMergedFieldStats().size(), equalTo(1));, +        assertThat(response.getIndicesMergedFieldStats().get("test1").size(), equalTo(0));, +++ /dev/null, +++ b/build.gradle, +++ b/core/src/main/java/org/elasticsearch/action/fieldstats/TransportFieldStatsTransportAction.java, +                    if (indexConstraintFieldStats == null) {, +                        continue;, +                    }, +, +                    if (indexConstraintFieldStats.match(indexConstraint)) {, +                        // The index constraint didn't match, so we remove all the field stats of the index we're checking, +++ b/core/src/test/java/org/elasticsearch/common/cache/CacheTests.java, +                return value == that.value;, +, +                    if (first && !second) {, +                    } else if (!first && second) {, +                    } else if (!first && !second) {, +++ b/core/src/test/java/org/elasticsearch/fieldstats/FieldStatsTests.java, +        assertThat(response.getIndicesMergedFieldStats().size(), equalTo(1));, +        assertThat(response.getIndicesMergedFieldStats().get("test1").size(), equalTo(0));, +++ /dev/null, +++ /dev/null, +++ b/build.gradle, +++ b/core/src/main/java/org/elasticsearch/action/fieldstats/TransportFieldStatsTransportAction.java, +                    if (indexConstraintFieldStats == null) {, +                        continue;, +                    }, +, +                    if (indexConstraintFieldStats.match(indexConstraint)) {, +                        // The index constraint didn't match, so we remove all the field stats of the index we're checking, +++ b/core/src/test/java/org/elasticsearch/common/cache/CacheTests.java, +                return value == that.value;, +, +                    if (first && !second) {, +                    } else if (!first && second) {, +                    } else if (!first && !second) {, +++ b/core/src/test/java/org/elasticsearch/fieldstats/FieldStatsTests.java, +        assertThat(response.getIndicesMergedFieldStats().size(), equalTo(1));, +        assertThat(response.getIndicesMergedFieldStats().get("test1").size(), equalTo(0));, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/build.gradle, +++ b/core/src/main/java/org/elasticsearch/action/fieldstats/TransportFieldStatsTransportAction.java, +                    if (indexConstraintFieldStats == null) {]