[+++ b/watcher/docs/administering-watcher.asciidoc, +include::administering-watcher/configuring-hipchat.asciidoc[], +, +include::administering-watcher/configuring-slack.asciidoc[], +, +include::administering-watcher/integrating-with-shield.asciidoc[], +, +include::administering-watcher/integrating-with-logstash.asciidoc[], +, +++ b/watcher/docs/administering-watcher.asciidoc, +include::administering-watcher/configuring-hipchat.asciidoc[], +, +include::administering-watcher/configuring-slack.asciidoc[], +, +include::administering-watcher/integrating-with-shield.asciidoc[], +, +include::administering-watcher/integrating-with-logstash.asciidoc[], +, +++ b/watcher/docs/administering-watcher/configuring-hipchat.asciidoc, +[[configuring-hipchat]], +=== Configuring Watcher to Send Messages to HipChat, +, +You can configure Watcher to use the HipChat APIs to send messages to HipChat rooms and users., +Watcher supports both the HipChat v2 and v1 APIs., +, +[[hipchat-account]], +==== Configuring HipChat Accounts, +You configure the accounts Watcher can use to communicate with HipChat in your `elasticsearch.yml` , +configuration file. Each account configuration has a unique name and specifies a HipChat API profile, +and the authentication information needed to access the APIs. You can also specify message defaults, , +such the default message text and color., +, +Watcher provides three HipChat API profiles:, +, +<<hipchat-api-integration,integration>> :: Sends messages to a specific room using HipChat's , +v2 API https://www.hipchat.com/docs/apiv2/method/send_room_notification[Send room notification]., +<<hipchat-api-user, user>> :: Sends messages as a particular user through the HipChat v2 API. , +Enables you to send messages to arbitrary rooms or users. , +<<hipchat-api-v1, v1>> :: Sends messages to rooms using HipChat's v1 API  , +https://www.hipchat.com/docs/api/method/rooms/message[rooms/message]. , +, +NOTE: The `v1` profile is provided because it is simple to set up and the HipChat v1 API is familiar  , +to many users. However, HipChat has deprecated the v1 API and is encouraging users to migrate to , +v2. Both the `integration` and `user` profiles are based on the HipChat v2 API., +, +If you configure multiple HipChat accounts, you either need to configure a default HipChat account, +or specify which account the notification should be sent with in the <<actions-hipchat, hipchat>> , +action. You set `default_account` in `watcher.actions.hipchat.service` to specify a default account., +, +To configure HipChat accounts, set the `watcher.actions.hipchat.service` property in , +`elasticsearch.yml`. For example:, +, +[source,yaml], +--------------------------------------------------, +watcher.actions.hipchat.service:, +  default_account: hipchat-account1, +  account:, +    hipchat-account1:, +      profile: v1, +      auth_token: 3eLB803Nyp7UBmegJwP1rMdUmzk5HqnzJCgflrhv, +      message_defaults:, +        color: purple, +        format: text, +    hipchat-account2:, +      profile: integration, +      auth_token: 3eLB803Nyp7UBmegJwP1rMdUmzk5HqnzJCgflrhv, +      room: mission-control, +      message_defaults:, +        color: gray, +        format: text, +--------------------------------------------------, +, +See the following sections information about using each profile type., +, +[[hipchat-api-integration]], +===== Using the HipChat Integration Profile, +, +You can use the `integration` profile to send messages to specific rooms. When you set an , +account's profile to `integration`, Watcher sends the messages through HipChat's v2 , +https://www.hipchat.com/docs/apiv2/method/send_room_notification[Send room notification] API., +, +When you use the `integration` profile, you need to configure a separate HipChat account in , +Watcher for each room you want to send messages--the account configuration contains a , +room-specific authentication token. Alternatively, you can use the  <<hipchat-api-user, `user`>> , +or <<hipchat-api-v1, `v1`>> profile to send messages to multiple rooms., +, +NOTE: The `integration` profile only supports sending messages to rooms, it does not , +support sending private messages. To notify a particular HipChat user, create an account, +that uses the <<hipchat-api-user, `user`>> profile., +, +Before you can configure an account that uses the `integration` profile, you need to generate a , +room-specific authentication token through the HipChat admin console:, +, +. Log in to http://hipchat.com[hipchat.com] or your HipChat server as a group administrator., +. Go to *Group admin > Rooms*., +. Click the name of the room you want to send messages to., +. Click the *Tokens* link., +. Enter a name for the token in the *Label* field., ++, +image::images/hipchat-generate-room-token.jpg[]]