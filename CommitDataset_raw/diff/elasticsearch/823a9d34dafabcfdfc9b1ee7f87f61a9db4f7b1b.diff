[+++ b/client/rest/src/main/java/org/elasticsearch/client/HasAttributeNodeSelector.java, +import java.util.Objects;, +    public boolean equals(Object o) {, +        if (this == o) {, +            return true;, +        }, +        if (o == null || getClass() != o.getClass()) {, +            return false;, +        }, +        HasAttributeNodeSelector that = (HasAttributeNodeSelector) o;, +        return Objects.equals(key, that.key) &&, +                Objects.equals(value, that.value);, +    }, +, +    @Override, +    public int hashCode() {, +        return Objects.hash(key, value);, +    }, +, +    @Override, +++ b/client/rest/src/main/java/org/elasticsearch/client/HasAttributeNodeSelector.java, +import java.util.Objects;, +    public boolean equals(Object o) {, +        if (this == o) {, +            return true;, +        }, +        if (o == null || getClass() != o.getClass()) {, +            return false;, +        }, +        HasAttributeNodeSelector that = (HasAttributeNodeSelector) o;, +        return Objects.equals(key, that.key) &&, +                Objects.equals(value, that.value);, +    }, +, +    @Override, +    public int hashCode() {, +        return Objects.hash(key, value);, +    }, +, +    @Override, +++ b/test/framework/src/main/java/org/elasticsearch/test/rest/yaml/ClientYamlTestClient.java, +import java.io.Closeable;, +public class ClientYamlTestClient implements Closeable {, +    private final Map<NodeSelector, RestClient> restClients = new HashMap<>();, +    ClientYamlTestClient(, +            builder.setNodeSelector(selector);, +, +    @Override, +    public void close() throws IOException {, +        for (RestClient restClient : restClients.values()) {, +            restClient.close();, +        }, +    }, +++ b/client/rest/src/main/java/org/elasticsearch/client/HasAttributeNodeSelector.java, +import java.util.Objects;, +    public boolean equals(Object o) {, +        if (this == o) {, +            return true;, +        }, +        if (o == null || getClass() != o.getClass()) {, +            return false;, +        }, +        HasAttributeNodeSelector that = (HasAttributeNodeSelector) o;, +        return Objects.equals(key, that.key) &&, +                Objects.equals(value, that.value);, +    }, +, +    @Override, +    public int hashCode() {, +        return Objects.hash(key, value);, +    }, +, +    @Override, +++ b/test/framework/src/main/java/org/elasticsearch/test/rest/yaml/ClientYamlTestClient.java, +import java.io.Closeable;, +public class ClientYamlTestClient implements Closeable {, +    private final Map<NodeSelector, RestClient> restClients = new HashMap<>();, +    ClientYamlTestClient(, +            builder.setNodeSelector(selector);, +, +    @Override, +    public void close() throws IOException {, +        for (RestClient restClient : restClients.values()) {, +            restClient.close();, +        }, +    }, +++ b/test/framework/src/main/java/org/elasticsearch/test/rest/yaml/section/DoSection.java, +        public boolean equals(Object o) {, +            if (this == o) {, +                return true;, +            }, +            if (o == null || getClass() != o.getClass()) {, +                return false;, +            }, +            ComposeNodeSelector that = (ComposeNodeSelector) o;, +            return Objects.equals(lhs, that.lhs) &&, +                    Objects.equals(rhs, that.rhs);, +        }, +, +        @Override]