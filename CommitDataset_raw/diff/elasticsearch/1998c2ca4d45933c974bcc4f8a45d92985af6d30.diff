[+++ b/distribution/src/main/resources/bin/plugin, +if [ ! -x "$JAVA" ]; then, +    echo "Could not find any executable java binary. Please install java in your PATH or set JAVA_HOME", +    exit 1, +fi, +, +++ b/distribution/src/main/resources/bin/plugin, +if [ ! -x "$JAVA" ]; then, +    echo "Could not find any executable java binary. Please install java in your PATH or set JAVA_HOME", +    exit 1, +fi, +, +++ b/docs/reference/modules/http.asciidoc, +The following are the settings that can be configured for HTTP:, +++ b/distribution/src/main/resources/bin/plugin, +if [ ! -x "$JAVA" ]; then, +    echo "Could not find any executable java binary. Please install java in your PATH or set JAVA_HOME", +    exit 1, +fi, +, +++ b/docs/reference/modules/http.asciidoc, +The following are the settings that can be configured for HTTP:, +++ b/qa/vagrant/src/test/resources/packaging/scripts/20_tar_package.bats, +@test "[TAR] elasticsearch fails if java executable is not found" {, +  local JAVA=$(which java), +, +  sudo chmod -x $JAVA, +  run "$ESHOME/bin/elasticsearch", +  sudo chmod +x $JAVA, +, +  [ "$status" -eq 1 ], +  [[ "$output" == *"Could not find any executable java binary. Please install java in your PATH or set JAVA_HOME"* ]], +}, +, +++ b/distribution/src/main/resources/bin/plugin, +if [ ! -x "$JAVA" ]; then, +    echo "Could not find any executable java binary. Please install java in your PATH or set JAVA_HOME", +    exit 1, +fi, +, +++ b/docs/reference/modules/http.asciidoc, +The following are the settings that can be configured for HTTP:, +++ b/qa/vagrant/src/test/resources/packaging/scripts/20_tar_package.bats, +@test "[TAR] elasticsearch fails if java executable is not found" {, +  local JAVA=$(which java), +, +  sudo chmod -x $JAVA, +  run "$ESHOME/bin/elasticsearch", +  sudo chmod +x $JAVA, +, +  [ "$status" -eq 1 ], +  [[ "$output" == *"Could not find any executable java binary. Please install java in your PATH or set JAVA_HOME"* ]], +}, +, +++ b/qa/vagrant/src/test/resources/packaging/scripts/plugin_test_cases.bash, +@test "[$GROUP] fail if java executable is not found" {, +  [ "$GROUP" == "TAR PLUGINS" ] || skip "Test case only supported by TAR PLUGINS", +  local JAVA=$(which java), +, +  sudo chmod -x $JAVA, +  run "$ESHOME/bin/plugin", +  sudo chmod +x $JAVA, +, +  [ "$status" -eq 1 ], +  [[ "$output" == *"Could not find any executable java binary. Please install java in your PATH or set JAVA_HOME"* ]], +}, +]