[+++ b/docs/reference/query-dsl/queries/function-score-query.asciidoc, +===== Field Value factor, +The `field_value_factor` function allows you to use a field from a document to, +influence the score. It's similar to using the `script_score` function, however,, +it avoids the overhead of scripting. If used on a multi-valued field, only the, +first value of the field is used in calculations., +, +As an example, imagine you have a document indexed with a numeric `popularity`, +field and wish in influence the score of a document with this field, an example, +doing so would look like:, +, +[source,js], +--------------------------------------------------, +"field_value_factor": {, +  "field": "popularity",, +  "factor": 1.2,, +  "modifier": "sqrt", +}, +--------------------------------------------------, +, +Which will translate into the following forumla for scoring:, +, +`sqrt(1.2 * doc['popularity'].value)`, +, +There are a number of options for the `field_value_factor` function:, +, +[cols="<,<",options="header",], +|=======================================================================, +| Parameter |Description, +|`field` |Field to be extracted from the document., +|`factor` |Optional factor to multiply the field value with, defaults to 1., +|`modifier` |Modifier to apply to the field value, can be one of: `none`, `log`,, + `log1p`, `log2p`, `ln`, `ln1p`, `ln2p`, `square`, `sqrt`, or `reciprocal`., + Defaults to `none`., +|=======================================================================, +, +Keep in mind that taking the log() of 0, or the square root of a negative number, +is an illegal operation, and an exception will be thrown. Be sure to limit the, +values of the field with a range filter to avoid this, or use `log1p` and, +`ln1p`., +, +===== Multiple values:, +If a field used for computing the decay contains multiple values, per default the value closest to the origin is chosen for determining the distance., +This can be changed by setting `multi_value_mode`., +, +[horizontal], +`min`:: Distance is the minimum distance, +`max`:: Distance is the maximum distance, +`avg`:: Distance is the average distance, +`sum`:: Distance is the sum of all distances, +, +Example:, +    "DECAY_FUNCTION": {, +        "FIELD_NAME": {, +              "origin": ...,, +              "scale": ..., +        },, +        "multi_value_mode": "avg", +++ b/docs/reference/query-dsl/queries/function-score-query.asciidoc, +===== Field Value factor, +The `field_value_factor` function allows you to use a field from a document to, +influence the score. It's similar to using the `script_score` function, however,, +it avoids the overhead of scripting. If used on a multi-valued field, only the, +first value of the field is used in calculations., +, +As an example, imagine you have a document indexed with a numeric `popularity`, +field and wish in influence the score of a document with this field, an example, +doing so would look like:, +, +[source,js], +--------------------------------------------------, +"field_value_factor": {, +  "field": "popularity",, +  "factor": 1.2,, +  "modifier": "sqrt", +}, +--------------------------------------------------, +, +Which will translate into the following forumla for scoring:, +, +`sqrt(1.2 * doc['popularity'].value)`, +, +There are a number of options for the `field_value_factor` function:, +, +[cols="<,<",options="header",], +|=======================================================================, +| Parameter |Description, +|`field` |Field to be extracted from the document., +|`factor` |Optional factor to multiply the field value with, defaults to 1., +|`modifier` |Modifier to apply to the field value, can be one of: `none`, `log`,, + `log1p`, `log2p`, `ln`, `ln1p`, `ln2p`, `square`, `sqrt`, or `reciprocal`., + Defaults to `none`., +|=======================================================================, +, +Keep in mind that taking the log() of 0, or the square root of a negative number, +is an illegal operation, and an exception will be thrown. Be sure to limit the, +values of the field with a range filter to avoid this, or use `log1p` and, +`ln1p`., +, +===== Multiple values:]