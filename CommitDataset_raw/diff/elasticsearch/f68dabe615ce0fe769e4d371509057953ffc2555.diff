[+++ b/core/src/main/java/org/elasticsearch/action/search/type/TransportSearchHelper.java, +import static java.util.Collections.emptyMap;, +, +            attributes = emptyMap();, +++ b/core/src/main/java/org/elasticsearch/action/search/type/TransportSearchHelper.java, +import static java.util.Collections.emptyMap;, +, +            attributes = emptyMap();, +++ b/core/src/main/java/org/elasticsearch/indices/flush/ShardsSyncedFlushResult.java, +, +import static java.util.Collections.emptyMap;, +, +        this.shardResponses = emptyMap();, +++ b/core/src/main/java/org/elasticsearch/action/search/type/TransportSearchHelper.java, +import static java.util.Collections.emptyMap;, +, +            attributes = emptyMap();, +++ b/core/src/main/java/org/elasticsearch/indices/flush/ShardsSyncedFlushResult.java, +, +import static java.util.Collections.emptyMap;, +, +        this.shardResponses = emptyMap();, +++ b/core/src/main/java/org/elasticsearch/repositories/RepositoriesService.java, +import org.elasticsearch.cluster.AckedClusterStateUpdateTask;, +import org.elasticsearch.cluster.ClusterChangedEvent;, +import org.elasticsearch.cluster.ClusterService;, +import org.elasticsearch.cluster.ClusterState;, +import org.elasticsearch.cluster.ClusterStateListener;, +import java.util.ArrayList;, +import java.util.Arrays;, +import java.util.HashMap;, +import java.util.List;, +import java.util.Map;, +import static java.util.Collections.emptyMap;, +import static java.util.Collections.unmodifiableMap;, +    private volatile Map<String, RepositoryHolder> repositories = emptyMap();, +            Map<String, RepositoryHolder> builder = new HashMap<>();, +            repositories = unmodifiableMap(builder);, +++ b/core/src/main/java/org/elasticsearch/action/search/type/TransportSearchHelper.java, +import static java.util.Collections.emptyMap;, +, +            attributes = emptyMap();, +++ b/core/src/main/java/org/elasticsearch/indices/flush/ShardsSyncedFlushResult.java, +, +import static java.util.Collections.emptyMap;, +, +        this.shardResponses = emptyMap();, +++ b/core/src/main/java/org/elasticsearch/repositories/RepositoriesService.java, +import org.elasticsearch.cluster.AckedClusterStateUpdateTask;, +import org.elasticsearch.cluster.ClusterChangedEvent;, +import org.elasticsearch.cluster.ClusterService;, +import org.elasticsearch.cluster.ClusterState;, +import org.elasticsearch.cluster.ClusterStateListener;, +import java.util.ArrayList;, +import java.util.Arrays;, +import java.util.HashMap;, +import java.util.List;, +import java.util.Map;, +import static java.util.Collections.emptyMap;, +import static java.util.Collections.unmodifiableMap;, +    private volatile Map<String, RepositoryHolder> repositories = emptyMap();, +            Map<String, RepositoryHolder> builder = new HashMap<>();, +            repositories = unmodifiableMap(builder);, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/AggregationStreams.java, +import java.util.HashMap;, +import static java.util.Collections.emptyMap;, +import static java.util.Collections.unmodifiableMap;, +, +    private static Map<BytesReference, Stream> streams = emptyMap();, +        Map<BytesReference, Stream> newStreams = new HashMap<>(streams);, +            newStreams.put(type, stream);, +        streams = unmodifiableMap(newStreams);, +++ b/core/src/main/java/org/elasticsearch/action/search/type/TransportSearchHelper.java, +import static java.util.Collections.emptyMap;, +, +            attributes = emptyMap();, +++ b/core/src/main/java/org/elasticsearch/indices/flush/ShardsSyncedFlushResult.java, +, +import static java.util.Collections.emptyMap;, +, +        this.shardResponses = emptyMap();, +++ b/core/src/main/java/org/elasticsearch/repositories/RepositoriesService.java, +import org.elasticsearch.cluster.AckedClusterStateUpdateTask;, +import org.elasticsearch.cluster.ClusterChangedEvent;, +import org.elasticsearch.cluster.ClusterService;, +import org.elasticsearch.cluster.ClusterState;, +import org.elasticsearch.cluster.ClusterStateListener;, +import java.util.ArrayList;, +import java.util.Arrays;, +import java.util.HashMap;, +import java.util.List;, +import java.util.Map;, +import static java.util.Collections.emptyMap;, +import static java.util.Collections.unmodifiableMap;, +    private volatile Map<String, RepositoryHolder> repositories = emptyMap();, +            Map<String, RepositoryHolder> builder = new HashMap<>();, +            repositories = unmodifiableMap(builder);, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/AggregationStreams.java, +import java.util.HashMap;, +import static java.util.Collections.emptyMap;]