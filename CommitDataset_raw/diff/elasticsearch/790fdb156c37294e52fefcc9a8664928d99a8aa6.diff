[+++ b/server/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java, +            EngineConfig config = config(this.engine.config(), store, createTempDir(), tombstoneDocSupplier);, +            try (InternalEngine engine = createEngine(null, null, null, config)) {, +++ b/server/src/test/java/org/elasticsearch/index/engine/InternalEngineTests.java, +            EngineConfig config = config(this.engine.config(), store, createTempDir(), tombstoneDocSupplier);, +            try (InternalEngine engine = createEngine(null, null, null, config)) {, +++ b/test/framework/src/main/java/org/elasticsearch/index/engine/EngineTestCase.java, +    protected EngineConfig config(EngineConfig config, Store store, Path translogPath,, +                                  EngineConfig.TombstoneDocSupplier tombstoneDocSupplier) {, +        TranslogConfig translogConfig = new TranslogConfig(shardId, translogPath, indexSettings, BigArrays.NON_RECYCLING_INSTANCE);, +            translogConfig, config.getFlushMergesAfter(), config.getExternalRefreshListener(),]