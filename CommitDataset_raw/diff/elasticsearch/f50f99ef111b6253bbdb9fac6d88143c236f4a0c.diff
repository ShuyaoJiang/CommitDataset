[+++ b/core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java, +                    // check if the field name contains only whitespace, +                    if (Strings.isEmpty(part) == false) {, +                        throw new IllegalArgumentException(, +                                "object field cannot contain only whitespace: ['" + fullFieldPath + "']");, +                    }, +++ b/core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java, +                    // check if the field name contains only whitespace, +                    if (Strings.isEmpty(part) == false) {, +                        throw new IllegalArgumentException(, +                                "object field cannot contain only whitespace: ['" + fullFieldPath + "']");, +                    }, +++ b/core/src/test/java/org/elasticsearch/index/mapper/DocumentParserTests.java, +    public void testDynamicFieldsEmptyName() throws Exception {, +        BytesReference bytes = XContentFactory.jsonBuilder(), +                .startObject().startArray("top."), +                .startObject(), +                .startObject("aoeu"), +                .field("a", 1).field(" ", 2), +                .endObject(), +                .endObject().endArray(), +                .endObject().bytes();, +, +        IllegalArgumentException emptyFieldNameException = expectThrows(IllegalArgumentException.class,, +                () -> client().prepareIndex("idx", "type").setSource(bytes, XContentType.JSON).get());, +, +        assertThat(emptyFieldNameException.getMessage(), containsString(, +                "object field cannot contain only whitespace: ['top.aoeu. ']"));, +    }, +]