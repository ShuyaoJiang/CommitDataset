[+++ b/bin/elasticsearch, +    export HOSTNAME=`hostname -s`, +, +++ b/bin/elasticsearch, +    export HOSTNAME=`hostname -s`, +, +++ b/bin/elasticsearch.bat, +SET HOSTNAME=%COMPUTERNAME%, +, +++ b/bin/elasticsearch, +    export HOSTNAME=`hostname -s`, +, +++ b/bin/elasticsearch.bat, +SET HOSTNAME=%COMPUTERNAME%, +, +++ b/docs/reference/setup/configuration.asciidoc, +The hostname of the machine is provided in an, +environment variable, so you can set the node name, +to the hostname, if on that machine you only run _a, +single elasticsearch node_ for that cluster., +, +[source,yaml], +--------------------------------------------------, +node:, +  name: ${HOSTNAME}, +--------------------------------------------------, +, +++ b/bin/elasticsearch, +    export HOSTNAME=`hostname -s`, +, +++ b/bin/elasticsearch.bat, +SET HOSTNAME=%COMPUTERNAME%, +, +++ b/docs/reference/setup/configuration.asciidoc, +The hostname of the machine is provided in an, +environment variable, so you can set the node name, +to the hostname, if on that machine you only run _a, +single elasticsearch node_ for that cluster., +, +[source,yaml], +--------------------------------------------------, +node:, +  name: ${HOSTNAME}, +--------------------------------------------------, +, +++ b/pom.xml, +        <lucene.maven.version>5.2.0-snapshot-1673726</lucene.maven.version>, +            <url>https://download.elastic.co/lucenesnapshots/1673726</url>, +++ b/bin/elasticsearch, +    export HOSTNAME=`hostname -s`, +, +++ b/bin/elasticsearch.bat, +SET HOSTNAME=%COMPUTERNAME%, +, +++ b/docs/reference/setup/configuration.asciidoc, +The hostname of the machine is provided in an, +environment variable, so you can set the node name, +to the hostname, if on that machine you only run _a, +single elasticsearch node_ for that cluster., +, +[source,yaml], +--------------------------------------------------, +node:, +  name: ${HOSTNAME}, +--------------------------------------------------, +, +++ b/pom.xml, +        <lucene.maven.version>5.2.0-snapshot-1673726</lucene.maven.version>, +            <url>https://download.elastic.co/lucenesnapshots/1673726</url>, +++ b/src/main/java/org/apache/lucene/queries/BlendedTermQuery.java, +import org.apache.lucene.index.*;, +import org.apache.lucene.search.*;, +import java.util.Comparator;, +import java.util.Set;, +    protected void blend(TermContext[] contexts, int maxDoc, IndexReader reader) throws IOException {, +        final TermContext[] tieBreak = new TermContext[contexts.length];, +        System.arraycopy(contexts, 0, tieBreak, 0, contexts.length);, +        ArrayUtil.timSort(tieBreak, new Comparator<TermContext>() {, +            public int compare(TermContext o1, TermContext o2) {, +                return Ints.compare(o2.docFreq(), o1.docFreq());, +        });, +        int prev = tieBreak[0].docFreq();, +        for (TermContext ctx : tieBreak) {, +            ctx.setDocFreq(Math.min(maxDoc, actualDf));, +    @Override, +    public void extractTerms(Set<Term> terms) {, +        for (Term term : this.terms) {, +            terms.add(term);, +        }, +    }, +, +++ b/bin/elasticsearch, +    export HOSTNAME=`hostname -s`, +, +++ b/bin/elasticsearch.bat, +SET HOSTNAME=%COMPUTERNAME%, +, +++ b/docs/reference/setup/configuration.asciidoc, +The hostname of the machine is provided in an, +environment variable, so you can set the node name]