[+++ b/plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceDiscoveryTests.java, +     * For issue https://github.com/elastic/elasticsearch/issues/16967:, +     * When using multiple regions and one of them has no instance at all, this, +     * was producing a NPE as a result., +    public void testNoRegionReturnsEmptyList() {, +++ b/plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceDiscoveryTests.java, +     * For issue https://github.com/elastic/elasticsearch/issues/16967:, +     * When using multiple regions and one of them has no instance at all, this, +     * was producing a NPE as a result., +    public void testNoRegionReturnsEmptyList() {, +++ /dev/null, +++ b/plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceDiscoveryTests.java, +     * For issue https://github.com/elastic/elasticsearch/issues/16967:, +     * When using multiple regions and one of them has no instance at all, this, +     * was producing a NPE as a result., +    public void testNoRegionReturnsEmptyList() {, +++ /dev/null, +++ /dev/null, +++ b/plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceDiscoveryTests.java, +     * For issue https://github.com/elastic/elasticsearch/issues/16967:, +     * When using multiple regions and one of them has no instance at all, this, +     * was producing a NPE as a result., +    public void testNoRegionReturnsEmptyList() {, +++ /dev/null, +++ /dev/null, +++ b/plugins/discovery-gce/src/test/resources/org/elasticsearch/discovery/gce/compute/v1/projects/noregionreturnsemptylist/zones/europe-west1-b/instances, +{, +  "id": "dummy",, +  "items":[, +    {, +      "description": "ES Node 1",, +      "id": "9309873766428965105",, +      "kind": "compute#instance",, +      "machineType": "n1-standard-1",, +      "name": "test1",, +      "networkInterfaces": [, +        {, +          "accessConfigs": [, +            {, +              "kind": "compute#accessConfig",, +              "name": "External NAT",, +              "natIP": "104.155.13.147",, +              "type": "ONE_TO_ONE_NAT", +            }, +          ],, +          "name": "nic0",, +          "network": "default",, +          "networkIP": "10.240.79.59", +        }, +      ],, +      "status": "RUNNING",, +      "tags": {, +        "fingerprint": "xA6QJb-rGtg=",, +        "items": [, +          "elasticsearch",, +          "dev", +        ], +      },, +      "zone": "europe-west1-b", +    }, +  ], +}, +++ b/plugins/discovery-gce/src/test/java/org/elasticsearch/discovery/gce/GceDiscoveryTests.java, +     * For issue https://github.com/elastic/elasticsearch/issues/16967:, +     * When using multiple regions and one of them has no instance at all, this, +     * was producing a NPE as a result., +    public void testNoRegionReturnsEmptyList() {, +++ /dev/null, +++ /dev/null, +++ b/plugins/discovery-gce/src/test/resources/org/elasticsearch/discovery/gce/compute/v1/projects/noregionreturnsemptylist/zones/europe-west1-b/instances, +{, +  "id": "dummy",, +  "items":[, +    {, +      "description": "ES Node 1",, +      "id": "9309873766428965105",, +      "kind": "compute#instance",, +      "machineType": "n1-standard-1",, +      "name": "test1",, +      "networkInterfaces": [, +        {, +          "accessConfigs": [, +            {, +              "kind": "compute#accessConfig",, +              "name": "External NAT",, +              "natIP": "104.155.13.147",, +              "type": "ONE_TO_ONE_NAT", +            }, +          ],, +          "name": "nic0",, +          "network": "default",, +          "networkIP": "10.240.79.59", +        }, +      ],, +      "status": "RUNNING",, +      "tags": {, +        "fingerprint": "xA6QJb-rGtg=",, +        "items": [, +          "elasticsearch",, +          "dev"]