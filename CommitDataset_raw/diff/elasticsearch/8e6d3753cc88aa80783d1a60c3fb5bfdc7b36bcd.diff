[+++ b/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +import org.joda.time.DateTime;, +        } else if (type == 12) {, +            return new Date(readLong());, +        } else if (type == 13) {, +            return new DateTime(readLong());, +++ b/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +import org.joda.time.DateTime;, +        } else if (type == 12) {, +            return new Date(readLong());, +        } else if (type == 13) {, +            return new DateTime(readLong());, +++ b/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java, +import org.joda.time.ReadableInstant;, +import java.util.Date;, +        } else if (type == Date.class) {, +            writeByte((byte) 12);, +            writeLong(((Date) value).getTime());, +        } else if (value instanceof ReadableInstant) {, +            writeByte((byte) 13);, +            writeLong(((ReadableInstant) value).getMillis());]