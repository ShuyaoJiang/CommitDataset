[+++ b/bin/plugin, +# this is a poor mans getopt replacement, +# real getopt cannot be used because we need to hand options over to the PluginManager, +while [ $# -gt 0 ]; do, +  case $1 in, +    -D*=*), +      properties="$properties $1", +      ;;, +    -D*), +      var=$1, +      shift, +      properties="$properties $var=$1", +      ;;, +    *), +      args="$args $1", +  esac, +  shift, +done, +, +exec $JAVA $JAVA_OPTS -Xmx64m -Xms16m -Delasticsearch -Des.path.home="$ES_HOME" $properties -cp "$ES_HOME/lib/*" org.elasticsearch.plugins.PluginManager $args, +, +++ b/bin/plugin, +# this is a poor mans getopt replacement, +# real getopt cannot be used because we need to hand options over to the PluginManager, +while [ $# -gt 0 ]; do, +  case $1 in, +    -D*=*), +      properties="$properties $1", +      ;;, +    -D*), +      var=$1, +      shift, +      properties="$properties $var=$1", +      ;;, +    *), +      args="$args $1", +  esac, +  shift, +done, +, +exec $JAVA $JAVA_OPTS -Xmx64m -Xms16m -Delasticsearch -Des.path.home="$ES_HOME" $properties -cp "$ES_HOME/lib/*" org.elasticsearch.plugins.PluginManager $args, +, +++ b/src/main/java/org/elasticsearch/plugins/PluginManager.java, +            throw new IOException("plugin directory " + extractLocation.getAbsolutePath() + " already exists. To update the plugin, uninstall it first using -remove " + name + " command");, +            System.out.println("Installed " + name + " into " + extractLocation.getAbsolutePath());, +            System.out.println("Installed " + name + " into " + toLocation.getAbsolutePath());, +                System.out.println("Installed " + name + " into " + site.getAbsolutePath());]