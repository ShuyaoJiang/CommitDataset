[+++ b/core/src/main/java/org/elasticsearch/common/settings/SettingsModule.java, +    public void registerSettingsFilterIfMissing(String filter) {, +        if (settingsFilterPattern.contains(filter)) {, +            registerSettingsFilter(filter);, +        }, +    }, +, +++ b/core/src/main/java/org/elasticsearch/common/settings/SettingsModule.java, +    public void registerSettingsFilterIfMissing(String filter) {, +        if (settingsFilterPattern.contains(filter)) {, +            registerSettingsFilter(filter);, +        }, +    }, +, +++ b/plugins/discovery-ec2/src/main/java/org/elasticsearch/plugin/discovery/ec2/Ec2DiscoveryPlugin.java, +        settingsModule.registerSettingsFilterIfMissing(AwsEc2Service.CLOUD_AWS.KEY);, +        settingsModule.registerSettingsFilterIfMissing(AwsEc2Service.CLOUD_AWS.SECRET);, +        settingsModule.registerSettingsFilterIfMissing(AwsEc2Service.CLOUD_AWS.PROXY_PASSWORD);, +        settingsModule.registerSettingsFilterIfMissing(AwsEc2Service.CLOUD_EC2.KEY);, +        settingsModule.registerSettingsFilterIfMissing(AwsEc2Service.CLOUD_EC2.SECRET);, +        settingsModule.registerSettingsFilterIfMissing(AwsEc2Service.CLOUD_EC2.PROXY_PASSWORD);, +++ b/core/src/main/java/org/elasticsearch/common/settings/SettingsModule.java, +    public void registerSettingsFilterIfMissing(String filter) {, +        if (settingsFilterPattern.contains(filter)) {, +            registerSettingsFilter(filter);, +        }, +    }, +, +++ b/plugins/discovery-ec2/src/main/java/org/elasticsearch/plugin/discovery/ec2/Ec2DiscoveryPlugin.java, +        settingsModule.registerSettingsFilterIfMissing(AwsEc2Service.CLOUD_AWS.KEY);, +        settingsModule.registerSettingsFilterIfMissing(AwsEc2Service.CLOUD_AWS.SECRET);, +        settingsModule.registerSettingsFilterIfMissing(AwsEc2Service.CLOUD_AWS.PROXY_PASSWORD);, +        settingsModule.registerSettingsFilterIfMissing(AwsEc2Service.CLOUD_EC2.KEY);, +        settingsModule.registerSettingsFilterIfMissing(AwsEc2Service.CLOUD_EC2.SECRET);, +        settingsModule.registerSettingsFilterIfMissing(AwsEc2Service.CLOUD_EC2.PROXY_PASSWORD);, +++ b/plugins/repository-s3/src/main/java/org/elasticsearch/plugin/repository/s3/S3RepositoryPlugin.java, +        module.registerSettingsFilterIfMissing(AwsS3Service.CLOUD_AWS.KEY);, +        module.registerSettingsFilterIfMissing(AwsS3Service.CLOUD_AWS.SECRET);, +        module.registerSettingsFilterIfMissing(AwsS3Service.CLOUD_AWS.PROXY_PASSWORD);, +        module.registerSettingsFilterIfMissing(AwsS3Service.CLOUD_S3.KEY);, +        module.registerSettingsFilterIfMissing(AwsS3Service.CLOUD_S3.SECRET);, +        module.registerSettingsFilterIfMissing(AwsS3Service.CLOUD_S3.PROXY_PASSWORD);]