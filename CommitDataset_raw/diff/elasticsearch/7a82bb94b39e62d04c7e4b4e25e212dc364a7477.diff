[+++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +import org.elasticsearch.gradle.plugin.MetaPluginPropertiesExtension, +        final String pluginName = findPluginName(pluginProject), +        project.dependencies.add(configuration.name, "org.elasticsearch.plugin:${pluginName}:${elasticsearchVersion}@zip"), +            final String depName = findPluginName(pluginProject), +, +    /** Find the plugin name in the given project, whether a regular plugin or meta plugin. */, +    static String findPluginName(Project pluginProject) {, +        PluginPropertiesExtension extension = pluginProject.extensions.findByName('esplugin'), +        if (extension != null) {, +            return extension.name, +        } else {, +            return pluginProject.extensions.findByName('es_meta_plugin').name, +        }, +    }]