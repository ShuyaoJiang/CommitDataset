[+++ b/src/main/java/org/elasticsearch/index/engine/robin/RobinEngine.java, +            HashedBytesRef versionKey = versionKey(create.uid());, +            VersionValue versionValue = versionMap.get(versionKey);, +            versionMap.put(versionKey, new VersionValue(updatedVersion, false, threadPool.estimatedTimeInMillis(), translogLocation));, +            HashedBytesRef versionKey = versionKey(index.uid());, +            VersionValue versionValue = versionMap.get(versionKey);, +            versionMap.put(versionKey, new VersionValue(updatedVersion, false, threadPool.estimatedTimeInMillis(), translogLocation));, +            HashedBytesRef versionKey = versionKey(delete.uid());, +            VersionValue versionValue = versionMap.get(versionKey);, +                versionMap.put(versionKey, new VersionValue(updatedVersion, true, threadPool.estimatedTimeInMillis(), translogLocation));, +                versionMap.put(versionKey, new VersionValue(updatedVersion, true, threadPool.estimatedTimeInMillis(), translogLocation));, +                versionMap.put(versionKey, new VersionValue(updatedVersion, true, threadPool.estimatedTimeInMillis(), translogLocation));]