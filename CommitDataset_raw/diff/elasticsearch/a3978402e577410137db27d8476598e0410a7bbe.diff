[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/SearchService.java, +        SearchContext context = new SearchContext(idGenerator.incrementAndGet(), request, shardTarget, engineSearcher, indexService, indexShard, scriptService);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/SearchService.java, +        SearchContext context = new SearchContext(idGenerator.incrementAndGet(), request, shardTarget, engineSearcher, indexService, indexShard, scriptService);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/internal/SearchContext.java, +    private final InternalSearchRequest request;, +, +    public SearchContext(long id, InternalSearchRequest request, SearchShardTarget shardTarget,, +                         Engine.Searcher engineSearcher, IndexService indexService, IndexShard indexShard, ScriptService scriptService) {, +        this.request = request;, +        this.searchType = request.searchType();, +    public InternalSearchRequest request() {, +        return this.request;, +    }, +, +        return request.numberOfShards();, +        return request.types() != null && request.types().length > 0;, +        return request.types();, +        return request.nowInMillis();, +        return request.timeout();, +        return mapperService().smartName(name, request.types());, +        return mapperService().smartNameFieldMappers(name, request.types());, +        return mapperService().smartNameFieldMapper(name, request.types());, +        return mapperService().smartNameObjectMapper(name, request.types());]