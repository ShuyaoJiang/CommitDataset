[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/ip/IpFieldMapper.java, +        long iSim;, +        try {, +          iSim = ipToLong(minSim);, +        } catch (ElasticSearchIllegalArgumentException e) {, +          try {, +            iSim = Long.parseLong(minSim);, +          } catch (NumberFormatException e1) {, +            iSim = (long) Double.parseDouble(minSim);, +          }, +        }]