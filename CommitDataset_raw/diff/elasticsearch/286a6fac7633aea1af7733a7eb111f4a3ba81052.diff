[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/xcontent/smile/SmileXContentGenerator.java, +import java.io.InputStream;, +    @Override public void writeRawField(String fieldName, InputStream content, OutputStream bos) throws IOException {, +        writeFieldName(fieldName);, +        SmileParser parser = SmileXContent.smileFactory.createJsonParser(content);, +        try {, +            parser.nextToken();, +            generator.copyCurrentStructure(parser);, +        } finally {, +            parser.close();, +        }, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/xcontent/smile/SmileXContentGenerator.java, +import java.io.InputStream;, +    @Override public void writeRawField(String fieldName, InputStream content, OutputStream bos) throws IOException {, +        writeFieldName(fieldName);, +        SmileParser parser = SmileXContent.smileFactory.createJsonParser(content);, +        try {, +            parser.nextToken();, +            generator.copyCurrentStructure(parser);, +        } finally {, +            parser.close();, +        }, +    }, +, +++ b/modules/jarjar/build.gradle, +    runtime 'org.codehaus.jackson:jackson-core-asl:1.7.0', +    runtime 'org.codehaus.jackson:jackson-smile:1.7.0']