[+++ b/distribution/src/main/resources/config/log4j2.properties, +appender.rolling.filePattern = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}-%d{yyyy-MM-dd}-%i.log.gz, +appender.rolling.policies.size.type = SizeBasedTriggeringPolicy, +appender.rolling.policies.size.size = 128MB, +appender.rolling.strategy.type = DefaultRolloverStrategy, +appender.rolling.strategy.fileIndex = nomax, +appender.rolling.strategy.action.type = Delete, +appender.rolling.strategy.action.basepath = ${sys:es.logs.base_path}, +appender.rolling.strategy.action.condition.type = IfFileName, +appender.rolling.strategy.action.condition.glob = ${sys:es.logs.cluster_name}-*, +appender.rolling.strategy.action.condition.nested_condition.type = IfAccumulatedFileSize, +appender.rolling.strategy.action.condition.nested_condition.exceeds = 2GB, +++ b/distribution/src/main/resources/config/log4j2.properties, +appender.rolling.filePattern = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}-%d{yyyy-MM-dd}-%i.log.gz, +appender.rolling.policies.size.type = SizeBasedTriggeringPolicy, +appender.rolling.policies.size.size = 128MB, +appender.rolling.strategy.type = DefaultRolloverStrategy, +appender.rolling.strategy.fileIndex = nomax, +appender.rolling.strategy.action.type = Delete, +appender.rolling.strategy.action.basepath = ${sys:es.logs.base_path}, +appender.rolling.strategy.action.condition.type = IfFileName, +appender.rolling.strategy.action.condition.glob = ${sys:es.logs.cluster_name}-*, +appender.rolling.strategy.action.condition.nested_condition.type = IfAccumulatedFileSize, +appender.rolling.strategy.action.condition.nested_condition.exceeds = 2GB, +++ b/docs/reference/setup/configuration.asciidoc, +appender.rolling.layout.pattern = [%d{ISO8601}][%-5p][%-25c{1.}] %marker%.-10000m%n, +appender.rolling.filePattern = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}-%d{yyyy-MM-dd}-%i.log.gz <3>, +appender.rolling.policies.size.type = SizeBasedTriggeringPolicy <7>, +appender.rolling.policies.size.size = 256MB <8>, +appender.rolling.strategy.type = DefaultRolloverStrategy, +appender.rolling.strategy.fileIndex = nomax, +appender.rolling.strategy.action.type = Delete <9>, +appender.rolling.strategy.action.basepath = ${sys:es.logs.base_path}, +appender.rolling.strategy.action.condition.type = IfFileName <10>, +appender.rolling.strategy.action.condition.glob = ${sys:es.logs.cluster_name}-* <11>, +appender.rolling.strategy.action.condition.nested_condition.type = IfAccumulatedFileSize <12>, +appender.rolling.strategy.action.condition.nested_condition.exceeds = 2GB <13>, +<3> Roll logs to `/var/log/elasticsearch/production-yyyy-MM-dd-i.log`; logs, +    will be compressed on each roll and `i` will be incremented, +<4> Use a time-based roll policy, +<7> Using a size-based roll policy, +<8> Roll logs after 256 MB, +<9> Use a delete action when rolling logs, +<10> Only delete logs matching a file pattern, +<11> The pattern is to only delete the main logs, +<12> Only delete if we have accumulated too many compressed logs, +<13> The size condition on the compressed logs is 2 GB, +Note than you can replace `.gz` by `.zip` in `appender.rolling.filePattern` to, +compress the rolled logs using the zip format. If you remove the `.gz`, +extension then logs will not be compressed as they are rolled., +appender.rolling.strategy.action.condition.type = IfFileName <4>, +appender.rolling.strategy.action.condition.glob = ${sys:es.logs.cluster_name}-* <5>, +appender.rolling.strategy.action.condition.nested_condition.type = IfLastModified <6>, +appender.rolling.strategy.action.condition.nested_condition.age = 7D <7>, +<5> Delete files from the base path matching the glob, +<6> A nested condition to apply to files matching the glob, +<7> Retain logs for seven days]