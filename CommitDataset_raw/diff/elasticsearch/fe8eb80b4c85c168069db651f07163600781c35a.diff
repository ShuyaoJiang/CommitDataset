[+++ b/core/src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java, +import com.google.common.collect.Sets;, +import java.util.Set;, +                boolean settingsFileFound = false;, +                Set<String> foundSuffixes = Sets.newHashSet();, +                        if (!settingsFileFound) {, +                        settingsFileFound = true;, +                        foundSuffixes.add(allowedSuffix);, +                    }, +                }, +                if (foundSuffixes.size() > 1) {, +                    throw new SettingsException("multiple settings files found with suffixes: " + Strings.collectionToDelimitedString(foundSuffixes, ","));, +++ b/core/src/main/java/org/elasticsearch/node/internal/InternalSettingsPreparer.java, +import com.google.common.collect.Sets;, +import java.util.Set;, +                boolean settingsFileFound = false;, +                Set<String> foundSuffixes = Sets.newHashSet();, +                        if (!settingsFileFound) {, +                        settingsFileFound = true;, +                        foundSuffixes.add(allowedSuffix);, +                    }, +                }, +                if (foundSuffixes.size() > 1) {, +                    throw new SettingsException("multiple settings files found with suffixes: " + Strings.collectionToDelimitedString(foundSuffixes, ","));, +++ b/core/src/test/java/org/elasticsearch/node/internal/InternalSettingsPreparerTests.java, +import org.junit.Rule;, +import org.junit.rules.ExpectedException;, +    @Rule, +    public ExpectedException expectedException = ExpectedException.none();, +, +    public void testMultipleSettingsFileNotAllowed() throws IOException {, +        InputStream yaml = getClass().getResourceAsStream("/config/elasticsearch.yaml");, +        InputStream properties = getClass().getResourceAsStream("/config/elasticsearch.properties");, +        Path home = createTempDir();, +        Path config = home.resolve("config");, +        Files.createDirectory(config);, +        Files.copy(yaml, config.resolve("elasticsearch.yaml"));, +        Files.copy(properties, config.resolve("elasticsearch.properties"));, +, +        expectedException.expect(SettingsException.class);, +        expectedException.expectMessage("multiple settings files found with suffixes: ");, +        expectedException.expectMessage("yaml");, +        expectedException.expectMessage("properties");, +, +        InternalSettingsPreparer.prepareSettings(settingsBuilder(), +                .put("config.ignore_system_properties", true), +                .put("path.home", home), +                .build(), true);, +    }]