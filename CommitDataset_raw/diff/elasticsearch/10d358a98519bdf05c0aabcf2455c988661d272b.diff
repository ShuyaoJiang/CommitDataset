[+++ b/core/src/main/java/org/elasticsearch/discovery/DiscoveryModule.java, +    private final ZenPing zenPing;, +        zenPing = createZenPing.apply(hostsProvider);, +, +    // TODO: remove this, it should be completely local to discovery, but service disruption tests want to mess with it, +    public ZenPing getZenPing() {, +        return zenPing;, +    }, +++ b/core/src/main/java/org/elasticsearch/discovery/DiscoveryModule.java, +    private final ZenPing zenPing;, +        zenPing = createZenPing.apply(hostsProvider);, +, +    // TODO: remove this, it should be completely local to discovery, but service disruption tests want to mess with it, +    public ZenPing getZenPing() {, +        return zenPing;, +    }, +++ b/core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java, +++ b/core/src/main/java/org/elasticsearch/discovery/DiscoveryModule.java, +    private final ZenPing zenPing;, +        zenPing = createZenPing.apply(hostsProvider);, +, +    // TODO: remove this, it should be completely local to discovery, but service disruption tests want to mess with it, +    public ZenPing getZenPing() {, +        return zenPing;, +    }, +++ b/core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java, +++ b/core/src/main/java/org/elasticsearch/node/Node.java, +                    b.bind(ZenPing.class).toInstance(discoveryModule.getZenPing());]