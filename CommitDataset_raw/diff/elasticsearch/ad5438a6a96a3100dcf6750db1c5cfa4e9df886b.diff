[+++ b/core/src/test/java/org/elasticsearch/common/settings/loader/YamlSettingsLoaderTests.java, +        final String yaml = "/org/elasticsearch/common/settings/loader/indentation-settings.yml";, +        final SettingsException e =, +                expectThrows(, +                        SettingsException.class,, +                        () -> settingsBuilder().loadFromStream(yaml, getClass().getResourceAsStream(yaml)).build());, +        final String yaml = "/org/elasticsearch/common/settings/loader/indentation-with-explicit-document-start-settings.yml";, +        final SettingsException e =, +                expectThrows(, +                        SettingsException.class,, +                        () -> settingsBuilder().loadFromStream(yaml, getClass().getResourceAsStream(yaml)).build());, +        final String yaml = "foo: bar\nfoo: baz";, +        final SettingsException e = expectThrows(SettingsException.class, () -> settingsBuilder().loadFromSource(yaml).build());]