[+++ b/server/src/main/java/org/elasticsearch/common/settings/AbstractScopedSettings.java, +                changed |= toApply.get(key).equals(target.get(key)) == false;, +++ b/server/src/main/java/org/elasticsearch/common/settings/AbstractScopedSettings.java, +                changed |= toApply.get(key).equals(target.get(key)) == false;, +++ b/server/src/test/java/org/elasticsearch/common/settings/ScopedSettingsTests.java, +    public void testNoopSettingsUpdate() {, +        String value = "192.168.0.1,127.0.0.1";, +        String setting = "index.routing.allocation.require._ip";, +        Settings currentSettings = Settings.builder().put(setting, value), +            .build();, +        Settings updates = Settings.builder().put(setting, value).build();, +        IndexScopedSettings settings = new IndexScopedSettings(currentSettings,, +            new HashSet<>(Collections.singletonList(IndexMetaData.INDEX_ROUTING_REQUIRE_GROUP_SETTING)));, +        assertFalse(settings.updateSettings(updates, Settings.builder().put(currentSettings), Settings.builder(), ""));, +    }, +]