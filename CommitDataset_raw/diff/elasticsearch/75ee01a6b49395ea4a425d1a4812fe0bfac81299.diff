[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/xcontent/builder/XContentBuilder.java, +    public T field(String name, Map<String, Object> value) throws IOException {, +        field(name);, +        value(value);, +        return builder;, +    }, +, +        } else if (value instanceof Map) {, +            field(name, (Map<String, Object>) value);, +    public T map(Map<String, Object> map) throws IOException {, +        XContentMapConverter.writeMap(generator, map);, +        return builder;, +    }, +, +    public T value(Map<String, Object> map) throws IOException {, +        XContentMapConverter.writeMap(generator, map);, +        return builder;, +    }, +, +        } else if (value instanceof Map) {, +            value((Map<String, Object>) value);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/xcontent/builder/XContentBuilder.java, +    public T field(String name, Map<String, Object> value) throws IOException {, +        field(name);, +        value(value);, +        return builder;, +    }, +, +        } else if (value instanceof Map) {, +            field(name, (Map<String, Object>) value);, +    public T map(Map<String, Object> map) throws IOException {, +        XContentMapConverter.writeMap(generator, map);, +        return builder;, +    }, +, +    public T value(Map<String, Object> map) throws IOException {, +        XContentMapConverter.writeMap(generator, map);, +        return builder;, +    }, +, +        } else if (value instanceof Map) {, +            value((Map<String, Object>) value);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/xcontent/CustomScoreQueryBuilder.java, +            builder.field("params", this.params);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/xcontent/builder/XContentBuilder.java, +    public T field(String name, Map<String, Object> value) throws IOException {, +        field(name);, +        value(value);, +        return builder;, +    }, +, +        } else if (value instanceof Map) {, +            field(name, (Map<String, Object>) value);, +    public T map(Map<String, Object> map) throws IOException {, +        XContentMapConverter.writeMap(generator, map);, +        return builder;, +    }, +, +    public T value(Map<String, Object> map) throws IOException {, +        XContentMapConverter.writeMap(generator, map);, +        return builder;, +    }, +, +        } else if (value instanceof Map) {, +            value((Map<String, Object>) value);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/xcontent/CustomScoreQueryBuilder.java, +            builder.field("params", this.params);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/xcontent/ScriptFilterBuilder.java, +            builder.field("params", this.params);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/xcontent/builder/XContentBuilder.java, +    public T field(String name, Map<String, Object> value) throws IOException {, +        field(name);, +        value(value);, +        return builder;, +    }, +, +        } else if (value instanceof Map) {, +            field(name, (Map<String, Object>) value);, +    public T map(Map<String, Object> map) throws IOException {, +        XContentMapConverter.writeMap(generator, map);, +        return builder;, +    }, +, +    public T value(Map<String, Object> map) throws IOException {, +        XContentMapConverter.writeMap(generator, map);, +        return builder;, +    }, +, +        } else if (value instanceof Map) {, +            value((Map<String, Object>) value);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/xcontent/CustomScoreQueryBuilder.java, +            builder.field("params", this.params);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/xcontent/ScriptFilterBuilder.java, +            builder.field("params", this.params);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/search/facets/geodistance/GeoDistanceFacetBuilder.java, +                builder.field("params", this.params);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/xcontent/builder/XContentBuilder.java, +    public T field(String name, Map<String, Object> value) throws IOException {, +        field(name);, +        value(value);]