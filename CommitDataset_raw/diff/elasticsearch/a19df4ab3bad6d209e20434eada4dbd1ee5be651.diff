[+++ b/docs/reference/search/request/docvalue-fields.asciidoc, +    "docvalue_fields" : [, +        {, +            "field": "my_ip_field", <1>, +            "format": "use_field_mapping" <2>, +        },, +        {, +            "field": "my_date_field",, +            "format": "epoch_millis" <3>, +        }, +    ], +<1> the name of the field, +<2> the special `use_field_mapping` format tells Elasticsearch to use the format from the mapping, +<3> date fields may use a custom format, +[float], +==== Custom formats, +, +While most fields do not support custom formats, some of them do:, + - <<date,Date>> fields can take any <<mapping-date-format,date format>>., + - <<number,Numeric>> fields accept a https://docs.oracle.com/javase/8/docs/api/java/text/DecimalFormat.html[DecimalFormat pattern]., +, +All fields support the special `use_field_mapping` format, which tells, +Elasticsearch to use the mappings to figure out a default format., +, +NOTE: The default is currently to return the same output as, +<<search-request-script-fields,script fields>>. However it will change in 7.0, +to behave as if the `use_field_mapping` format was provided., +++ b/docs/reference/search/request/docvalue-fields.asciidoc, +    "docvalue_fields" : [, +        {, +            "field": "my_ip_field", <1>, +            "format": "use_field_mapping" <2>, +        },, +        {, +            "field": "my_date_field",, +            "format": "epoch_millis" <3>, +        }, +    ], +<1> the name of the field, +<2> the special `use_field_mapping` format tells Elasticsearch to use the format from the mapping, +<3> date fields may use a custom format, +[float], +==== Custom formats, +, +While most fields do not support custom formats, some of them do:, + - <<date,Date>> fields can take any <<mapping-date-format,date format>>., + - <<number,Numeric>> fields accept a https://docs.oracle.com/javase/8/docs/api/java/text/DecimalFormat.html[DecimalFormat pattern]., +, +All fields support the special `use_field_mapping` format, which tells, +Elasticsearch to use the mappings to figure out a default format., +, +NOTE: The default is currently to return the same output as, +<<search-request-script-fields,script fields>>. However it will change in 7.0, +to behave as if the `use_field_mapping` format was provided., +++ b/docs/reference/search/request/inner-hits.asciidoc, +        "docvalue_fields" : [, +          {, +            "field": "comments.text.keyword",, +            "format": "use_field_mapping", +          }, +        ], +++ b/docs/reference/search/request/docvalue-fields.asciidoc, +    "docvalue_fields" : [, +        {, +            "field": "my_ip_field", <1>, +            "format": "use_field_mapping" <2>, +        },, +        {, +            "field": "my_date_field",, +            "format": "epoch_millis" <3>, +        }, +    ], +<1> the name of the field, +<2> the special `use_field_mapping` format tells Elasticsearch to use the format from the mapping, +<3> date fields may use a custom format, +[float], +==== Custom formats, +, +While most fields do not support custom formats, some of them do:, + - <<date,Date>> fields can take any <<mapping-date-format,date format>>., + - <<number,Numeric>> fields accept a https://docs.oracle.com/javase/8/docs/api/java/text/DecimalFormat.html[DecimalFormat pattern]., +, +All fields support the special `use_field_mapping` format, which tells, +Elasticsearch to use the mappings to figure out a default format., +, +NOTE: The default is currently to return the same output as, +<<search-request-script-fields,script fields>>. However it will change in 7.0, +to behave as if the `use_field_mapping` format was provided., +++ b/docs/reference/search/request/inner-hits.asciidoc, +        "docvalue_fields" : [, +          {, +            "field": "comments.text.keyword",, +            "format": "use_field_mapping", +          }, +        ], +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/search.inner_hits/10_basic.yml, +        version: " - 6.99.99" # TODO change to 6.3.99 on backport, +        reason:  "object notation for docvalue_fields was introduced in 6.4", +          body: { "query" : { "nested" : { "path" : "nested_field", "query" : { "match_all" : {} }, "inner_hits" : { version: true, "docvalue_fields": [ { "field": "_seq_no", "format": "use_field_mapping" } ]} }}, "version": true, "docvalue_fields" : [ { "field": "_seq_no", "format": "use_field_mapping" } ] }, +          body: { "query" : { "nested" : { "path" : "nested_field", "query" : { "match_all" : {} }, "inner_hits" : { version: true, "docvalue_fields": [ { "field": "_seq_no", "format": "use_field_mapping" } ]} }}, "version": true, "docvalue_fields" : [ { "field": "_seq_no", "format": "use_field_mapping" } ] }]