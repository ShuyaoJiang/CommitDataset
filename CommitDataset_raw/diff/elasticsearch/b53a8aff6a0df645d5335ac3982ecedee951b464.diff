[+++ b/src/main/java/org/elasticsearch/action/count/CountRequest.java, +    @Nullable, +    private String preference;, +, +    public CountRequest preference(String preference) {, +        this.preference = preference;, +        return this;, +    }, +, +    public String preference() {, +        return this.preference;, +    }, +, +++ b/src/main/java/org/elasticsearch/action/count/CountRequest.java, +    @Nullable, +    private String preference;, +, +    public CountRequest preference(String preference) {, +        this.preference = preference;, +        return this;, +    }, +, +    public String preference() {, +        return this.preference;, +    }, +, +++ b/src/main/java/org/elasticsearch/action/count/TransportCountAction.java, +        return clusterService.operationRouting().searchShards(clusterState, request.indices(), concreteIndices, routingMap, request.preference());, +++ b/src/main/java/org/elasticsearch/action/count/CountRequest.java, +    @Nullable, +    private String preference;, +, +    public CountRequest preference(String preference) {, +        this.preference = preference;, +        return this;, +    }, +, +    public String preference() {, +        return this.preference;, +    }, +, +++ b/src/main/java/org/elasticsearch/action/count/TransportCountAction.java, +        return clusterService.operationRouting().searchShards(clusterState, request.indices(), concreteIndices, routingMap, request.preference());, +++ b/src/main/java/org/elasticsearch/rest/action/count/RestCountAction.java, +            countRequest.preference(request.param("preference"));]