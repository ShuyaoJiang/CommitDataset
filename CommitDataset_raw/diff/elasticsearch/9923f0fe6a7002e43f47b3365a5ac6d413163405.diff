[+++ b/server/src/main/java/org/elasticsearch/ElasticsearchException.java, +            MultiBucketConsumerService.TooManyBucketsException::new, 149, Version.V_6_2_0),, +            org.elasticsearch.snapshots.SnapshotInProgressException::new, 151, Version.V_6_7_0),, +++ b/server/src/main/java/org/elasticsearch/ElasticsearchException.java, +            MultiBucketConsumerService.TooManyBucketsException::new, 149, Version.V_6_2_0),, +            org.elasticsearch.snapshots.SnapshotInProgressException::new, 151, Version.V_6_7_0),, +++ b/server/src/test/java/org/elasticsearch/ExceptionSerializationTests.java, +        Version version = VersionUtils.randomVersionBetween(random(), Version.V_6_2_0, Version.CURRENT);, +            serialize(new MultiBucketConsumerService.TooManyBucketsException("Too many buckets", 100), version);, +    public void testSnapshotInProgressException() throws IOException {, +        SnapshotInProgressException orig = new SnapshotInProgressException("boom");, +        Version version = VersionUtils.randomVersionBetween(random(), Version.V_6_7_0, Version.CURRENT);, +        SnapshotInProgressException ex = serialize(orig, version);, +        assertEquals(orig.getMessage(), ex.getMessage());, +    }, +]