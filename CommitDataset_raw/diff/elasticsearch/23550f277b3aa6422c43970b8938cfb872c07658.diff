[+++ b/core/src/main/java/org/elasticsearch/discovery/zen/UnicastZenPing.java, +     * The pings that are sent carry a timeout of 1.25 times the {@link TimeValue}., +++ b/core/src/main/java/org/elasticsearch/discovery/zen/UnicastZenPing.java, +     * The pings that are sent carry a timeout of 1.25 times the {@link TimeValue}., +++ b/core/src/test/java/org/elasticsearch/discovery/zen/UnicastZenPingTests.java, +        Collection<ZenPing.PingResponse> pingResponses = zenPingA.pingAndWait(TimeValue.timeValueMillis(100));, +        assertCounters(handleA, handleA, handleB, handleC, handleD);, +        pingResponses = zenPingB.pingAndWait(TimeValue.timeValueMillis(100));, +        assertCounters(handleB, handleA, handleB, handleC, handleD);, +        pingResponses = zenPingC.pingAndWait(TimeValue.timeValueMillis(100));, +        assertCounters(handleC, handleA, handleB, handleC, handleD);, +        pingResponses = zenPingD.pingAndWait(TimeValue.timeValueMillis(100));, +        assertCounters(handleD, handleA, handleB, handleC, handleD);, +            final Collection<ZenPing.PingResponse> pingResponses = zenPingA.pingAndWait(TimeValue.timeValueMillis(100));, +            assertCounters(handleA, handleA, handleC);, +            // ping from C so that we can assert on the counters from a fresh source (as opposed to resetting them), +            final Collection<ZenPing.PingResponse> secondPingResponses = zenPingC.pingAndWait(TimeValue.timeValueMillis(100));, +            assertThat(ids, equalTo(new HashSet<>(Arrays.asList("UZP_A", "UZP_B"))));, +            assertCounters(handleC, handleA, handleB, handleC);, +        final TimeValue resolveTimeout = TimeValue.timeValueMillis(randomIntBetween(100, 200));, +            TimeValue.timeValueMillis(100));, +    private void assertCounters(NetworkHandle that, NetworkHandle...handles) {, +        for (NetworkHandle handle : handles) {, +            if (handle != that) {, +                assertThat(that.counters.get(handle.address).get(), greaterThan(0));, +++ b/core/src/main/java/org/elasticsearch/discovery/zen/UnicastZenPing.java, +     * The pings that are sent carry a timeout of 1.25 times the {@link TimeValue}., +++ b/core/src/test/java/org/elasticsearch/discovery/zen/UnicastZenPingTests.java, +        Collection<ZenPing.PingResponse> pingResponses = zenPingA.pingAndWait(TimeValue.timeValueMillis(100));, +        assertCounters(handleA, handleA, handleB, handleC, handleD);, +        pingResponses = zenPingB.pingAndWait(TimeValue.timeValueMillis(100));, +        assertCounters(handleB, handleA, handleB, handleC, handleD);, +        pingResponses = zenPingC.pingAndWait(TimeValue.timeValueMillis(100));, +        assertCounters(handleC, handleA, handleB, handleC, handleD);, +        pingResponses = zenPingD.pingAndWait(TimeValue.timeValueMillis(100));, +        assertCounters(handleD, handleA, handleB, handleC, handleD);, +            final Collection<ZenPing.PingResponse> pingResponses = zenPingA.pingAndWait(TimeValue.timeValueMillis(100));, +            assertCounters(handleA, handleA, handleC);, +            // ping from C so that we can assert on the counters from a fresh source (as opposed to resetting them), +            final Collection<ZenPing.PingResponse> secondPingResponses = zenPingC.pingAndWait(TimeValue.timeValueMillis(100));, +            assertThat(ids, equalTo(new HashSet<>(Arrays.asList("UZP_A", "UZP_B"))));, +            assertCounters(handleC, handleA, handleB, handleC);, +        final TimeValue resolveTimeout = TimeValue.timeValueMillis(randomIntBetween(100, 200));, +            TimeValue.timeValueMillis(100));, +    private void assertCounters(NetworkHandle that, NetworkHandle...handles) {, +        for (NetworkHandle handle : handles) {, +            if (handle != that) {, +                assertThat(that.counters.get(handle.address).get(), greaterThan(0));, +++ b/docs/plugins/discovery-ec2.asciidoc, +* `us-east-2` for US East (Ohio), +* `ap-south` (`ap-south-1`) for Asia Pacific (Mumbai), +++ b/core/src/main/java/org/elasticsearch/discovery/zen/UnicastZenPing.java, +     * The pings that are sent carry a timeout of 1.25 times the {@link TimeValue}., +++ b/core/src/test/java/org/elasticsearch/discovery/zen/UnicastZenPingTests.java, +        Collection<ZenPing.PingResponse> pingResponses = zenPingA.pingAndWait(TimeValue.timeValueMillis(100));, +        assertCounters(handleA, handleA, handleB, handleC, handleD);, +        pingResponses = zenPingB.pingAndWait(TimeValue.timeValueMillis(100));, +        assertCounters(handleB, handleA, handleB, handleC, handleD);, +        pingResponses = zenPingC.pingAndWait(TimeValue.timeValueMillis(100));, +        assertCounters(handleC, handleA, handleB, handleC, handleD);, +        pingResponses = zenPingD.pingAndWait(TimeValue.timeValueMillis(100));, +        assertCounters(handleD, handleA, handleB, handleC, handleD);, +            final Collection<ZenPing.PingResponse> pingResponses = zenPingA.pingAndWait(TimeValue.timeValueMillis(100));, +            assertCounters(handleA, handleA, handleC);, +            // ping from C so that we can assert on the counters from a fresh source (as opposed to resetting them), +            final Collection<ZenPing.PingResponse> secondPingResponses = zenPingC.pingAndWait(TimeValue.timeValueMillis(100));, +            assertThat(ids, equalTo(new HashSet<>(Arrays.asList("UZP_A", "UZP_B"))));, +            assertCounters(handleC, handleA, handleB, handleC);, +        final TimeValue resolveTimeout = TimeValue.timeValueMillis(randomIntBetween(100, 200));, +            TimeValue.timeValueMillis(100));, +    private void assertCounters(NetworkHandle that, NetworkHandle...handles) {, +        for (NetworkHandle handle : handles) {, +            if (handle != that) {, +                assertThat(that.counters.get(handle.address).get(), greaterThan(0));, +++ b/docs/plugins/discovery-ec2.asciidoc, +* `us-east-2` for US East (Ohio), +* `ap-south` (`ap-south-1`) for Asia Pacific (Mumbai), +++ b/docs/plugins/repository-s3.asciidoc, +* `us-east-2` for US East (Ohio), +* `ap-south` (`ap-south-1`) for Asia Pacific (Mumbai), +++ b/core/src/main/java/org/elasticsearch/discovery/zen/UnicastZenPing.java, +     * The pings that are sent carry a timeout of 1.25 times the {@link TimeValue}., +++ b/core/src/test/java/org/elasticsearch/discovery/zen/UnicastZenPingTests.java, +        Collection<ZenPing.PingResponse> pingResponses = zenPingA.pingAndWait(TimeValue.timeValueMillis(100));, +        assertCounters(handleA, handleA, handleB, handleC, handleD);, +        pingResponses = zenPingB.pingAndWait(TimeValue.timeValueMillis(100));, +        assertCounters(handleB, handleA, handleB, handleC, handleD);, +        pingResponses = zenPingC.pingAndWait(TimeValue.timeValueMillis(100));, +        assertCounters(handleC, handleA, handleB, handleC, handleD);, +        pingResponses = zenPingD.pingAndWait(TimeValue.timeValueMillis(100));, +        assertCounters(handleD, handleA, handleB, handleC, handleD);, +            final Collection<ZenPing.PingResponse> pingResponses = zenPingA.pingAndWait(TimeValue.timeValueMillis(100));, +            assertCounters(handleA, handleA, handleC);, +            // ping from C so that we can assert on the counters from a fresh source (as opposed to resetting them), +            final Collection<ZenPing.PingResponse> secondPingResponses = zenPingC.pingAndWait(TimeValue.timeValueMillis(100));, +            assertThat(ids, equalTo(new HashSet<>(Arrays.asList("UZP_A", "UZP_B"))));, +            assertCounters(handleC, handleA, handleB, handleC);, +        final TimeValue resolveTimeout = TimeValue.timeValueMillis(randomIntBetween(100, 200));, +            TimeValue.timeValueMillis(100));, +    private void assertCounters(NetworkHandle that, NetworkHandle...handles) {]