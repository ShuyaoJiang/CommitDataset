[+++ b/client/rest/build.gradle, +++ b/client/rest/build.gradle, +++ b/client/sniffer/build.gradle, +++ b/client/rest/build.gradle, +++ b/client/sniffer/build.gradle, +++ b/client/test/build.gradle, +++ b/client/rest/build.gradle, +++ b/client/sniffer/build.gradle, +++ b/client/test/build.gradle, +++ b/core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java, +import java.util.Collections;, +++ b/client/rest/build.gradle, +++ b/client/sniffer/build.gradle, +++ b/client/test/build.gradle, +++ b/core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java, +import java.util.Collections;, +++ b/docs/reference/aggregations/bucket/terms-aggregation.asciidoc, +        "genders" : {, +            "terms" : { "field" : "gender" }, +        "genders" : {, +                    "key" : "male",, +                    "key" : "female",, +        "genders" : {, +                "field" : "gender",, +        "genders" : {, +                "field" : "gender",, +        "genders" : {, +                "field" : "gender",, +                "order" : { "avg_height" : "desc" }, +                "avg_height" : { "avg" : { "field" : "height" } }, +        "genders" : {, +                "field" : "gender",, +                "order" : { "height_stats.avg" : "desc" }, +                "height_stats" : { "stats" : { "field" : "height" } }, +                "field" : "address.country",, +                "order" : { "females>height_stats.avg" : "desc" }, +                "females" : {, +                    "filter" : { "term" : { "gender" :  "female" }},, +                        "height_stats" : { "stats" : { "field" : "height" }}, +The above will sort the countries buckets based on the average height among the female population., +                "field" : "address.country",, +                "order" : [ { "females>height_stats.avg" : "desc" }, { "_count" : "desc" } ], +                "females" : {, +                    "filter" : { "term" : { "gender" : { "female" }}},, +                        "height_stats" : { "stats" : { "field" : "height" }}, +The above will sort the countries buckets based on the average height among the female population and then by, +        "genders" : {, +                    "inline": "doc['gender'].value", +        "genders" : {, +                        "field": "gender", +        "genders" : {, +                "field" : "gender",, +                    "inline" : "'Gender: ' +_value", +++ b/client/rest/build.gradle, +++ b/client/sniffer/build.gradle, +++ b/client/test/build.gradle, +++ b/core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java, +import java.util.Collections;, +++ b/docs/reference/aggregations/bucket/terms-aggregation.asciidoc, +        "genders" : {, +            "terms" : { "field" : "gender" }, +        "genders" : {, +                    "key" : "male",, +                    "key" : "female",, +        "genders" : {, +                "field" : "gender",, +        "genders" : {, +                "field" : "gender",, +        "genders" : {, +                "field" : "gender",, +                "order" : { "avg_height" : "desc" }, +                "avg_height" : { "avg" : { "field" : "height" } }, +        "genders" : {, +                "field" : "gender",, +                "order" : { "height_stats.avg" : "desc" }, +                "height_stats" : { "stats" : { "field" : "height" } }, +                "field" : "address.country",, +                "order" : { "females>height_stats.avg" : "desc" }, +                "females" : {, +                    "filter" : { "term" : { "gender" :  "female" }},, +                        "height_stats" : { "stats" : { "field" : "height" }}, +The above will sort the countries buckets based on the average height among the female population., +                "field" : "address.country",, +                "order" : [ { "females>height_stats.avg" : "desc" }, { "_count" : "desc" } ], +                "females" : {, +                    "filter" : { "term" : { "gender" : { "female" }}},, +                        "height_stats" : { "stats" : { "field" : "height" }}, +The above will sort the countries buckets based on the average height among the female population and then by, +        "genders" : {, +                    "inline": "doc['gender'].value", +        "genders" : {, +                        "field": "gender", +        "genders" : {, +                "field" : "gender",, +                    "inline" : "'Gender: ' +_value", +++ b/modules/rank-eval/build.gradle, +/*, + * Licensed to Elasticsearch under one or more contributor, + * license agreements. See the NOTICE file distributed with, + * this work for additional information regarding copyright]