[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/docset/AndDocIdSet.java, +                if (set == null) {, +                    lastReturn = DocIdSetIterator.NO_MORE_DOCS; // non matching, +                    break;, +                } else {, +                    if (dcit == null) {, +                        lastReturn = DocIdSetIterator.NO_MORE_DOCS; // non matching, +                        break;, +                    }, +            if (lastReturn != DocIdSetIterator.NO_MORE_DOCS) {, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/docset/AndDocIdSet.java, +                if (set == null) {, +                    lastReturn = DocIdSetIterator.NO_MORE_DOCS; // non matching, +                    break;, +                } else {, +                    if (dcit == null) {, +                        lastReturn = DocIdSetIterator.NO_MORE_DOCS; // non matching, +                        break;, +                    }, +            if (lastReturn != DocIdSetIterator.NO_MORE_DOCS) {, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/docset/AndDocSet.java, +                if (set == null) {, +                    lastReturn = DocIdSetIterator.NO_MORE_DOCS; // non matching, +                    break;, +                } else {, +                    if (dcit == null) {, +                        lastReturn = DocIdSetIterator.NO_MORE_DOCS; // non matching, +                        break;, +                    }, +            if (lastReturn != DocIdSetIterator.NO_MORE_DOCS) {, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/docset/AndDocIdSet.java, +                if (set == null) {, +                    lastReturn = DocIdSetIterator.NO_MORE_DOCS; // non matching, +                    break;, +                } else {, +                    if (dcit == null) {, +                        lastReturn = DocIdSetIterator.NO_MORE_DOCS; // non matching, +                        break;, +                    }, +            if (lastReturn != DocIdSetIterator.NO_MORE_DOCS) {, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/docset/AndDocSet.java, +                if (set == null) {, +                    lastReturn = DocIdSetIterator.NO_MORE_DOCS; // non matching, +                    break;, +                } else {, +                    if (dcit == null) {, +                        lastReturn = DocIdSetIterator.NO_MORE_DOCS; // non matching, +                        break;, +                    }, +            if (lastReturn != DocIdSetIterator.NO_MORE_DOCS) {, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/docset/OrDocIdSet.java, +                DocIdSetIterator iterator = set.iterator();, +                if (iterator != null) {, +                    _heap[_size++] = new Item(iterator);, +                }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/docset/AndDocIdSet.java, +                if (set == null) {, +                    lastReturn = DocIdSetIterator.NO_MORE_DOCS; // non matching, +                    break;, +                } else {, +                    if (dcit == null) {, +                        lastReturn = DocIdSetIterator.NO_MORE_DOCS; // non matching, +                        break;, +                    }, +            if (lastReturn != DocIdSetIterator.NO_MORE_DOCS) {, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/docset/AndDocSet.java, +                if (set == null) {, +                    lastReturn = DocIdSetIterator.NO_MORE_DOCS; // non matching, +                    break;, +                } else {, +                    if (dcit == null) {, +                        lastReturn = DocIdSetIterator.NO_MORE_DOCS; // non matching, +                        break;, +                    }, +            if (lastReturn != DocIdSetIterator.NO_MORE_DOCS) {, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/docset/OrDocIdSet.java, +                DocIdSetIterator iterator = set.iterator();, +                if (iterator != null) {, +                    _heap[_size++] = new Item(iterator);, +                }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/lucene/docset/OrDocSet.java, +                DocIdSetIterator iterator = set.iterator();, +                if (iterator != null) {, +                    _heap[_size++] = new Item(iterator);, +                }]