[+++ b/TESTING.asciidoc, +The REST tests are run automatically when executing the maven test command. To run only the, +gradle integTest -Dtests.filter="@Rest", +++ b/TESTING.asciidoc, +The REST tests are run automatically when executing the maven test command. To run only the, +gradle integTest -Dtests.filter="@Rest", +++ b/build.gradle, +++ b/TESTING.asciidoc, +The REST tests are run automatically when executing the maven test command. To run only the, +gradle integTest -Dtests.filter="@Rest", +++ b/build.gradle, +++ b/buildSrc/build.gradle, +++ b/TESTING.asciidoc, +The REST tests are run automatically when executing the maven test command. To run only the, +gradle integTest -Dtests.filter="@Rest", +++ b/build.gradle, +++ b/buildSrc/build.gradle, +++ b/buildSrc/src/main/groovy/com/carrotsearch/gradle/junit4/RandomizedTestingTask.groovy, +    Map<String, String> systemProperties = new HashMap<>(), +    void systemProperty(String property, String value) {, +                for (Map.Entry<String, String> prop : systemProperties) {, +                    sysproperty key: prop.getKey(), value: prop.getValue(), +++ b/TESTING.asciidoc, +The REST tests are run automatically when executing the maven test command. To run only the, +gradle integTest -Dtests.filter="@Rest", +++ b/build.gradle, +++ b/buildSrc/build.gradle, +++ b/buildSrc/src/main/groovy/com/carrotsearch/gradle/junit4/RandomizedTestingTask.groovy, +    Map<String, String> systemProperties = new HashMap<>(), +    void systemProperty(String property, String value) {, +                for (Map.Entry<String, String> prop : systemProperties) {, +                    sysproperty key: prop.getKey(), value: prop.getValue(), +++ b/buildSrc/src/main/groovy/com/carrotsearch/gradle/junit4/TestReportLogger.groovy, +++ b/TESTING.asciidoc, +The REST tests are run automatically when executing the maven test command. To run only the, +gradle integTest -Dtests.filter="@Rest", +++ b/build.gradle, +++ b/buildSrc/build.gradle, +++ b/buildSrc/src/main/groovy/com/carrotsearch/gradle/junit4/RandomizedTestingTask.groovy, +    Map<String, String> systemProperties = new HashMap<>(), +    void systemProperty(String property, String value) {, +                for (Map.Entry<String, String> prop : systemProperties) {, +                    sysproperty key: prop.getKey(), value: prop.getValue(), +++ b/buildSrc/src/main/groovy/com/carrotsearch/gradle/junit4/TestReportLogger.groovy, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +        PrecommitTasks.configure(project), +++ b/TESTING.asciidoc, +The REST tests are run automatically when executing the maven test command. To run only the, +gradle integTest -Dtests.filter="@Rest", +++ b/build.gradle, +++ b/buildSrc/build.gradle, +++ b/buildSrc/src/main/groovy/com/carrotsearch/gradle/junit4/RandomizedTestingTask.groovy, +    Map<String, String> systemProperties = new HashMap<>(), +    void systemProperty(String property, String value) {, +                for (Map.Entry<String, String> prop : systemProperties) {, +                    sysproperty key: prop.getKey(), value: prop.getValue(), +++ b/buildSrc/src/main/groovy/com/carrotsearch/gradle/junit4/TestReportLogger.groovy, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +        PrecommitTasks.configure(project), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +class PluginBuildPlugin extends BuildPlugin {, +    void apply(Project project) {, +        // this afterEvaluate must happen before the afterEvaluate added by integTest configure,, +            project.tasks.run.dependsOn(project.bundlePlugin), +        RestIntegTestTask.configure(project), +        RunTask.configure(project), +        Task bundle = configureBundleTask(project), +        project.configurations.archives.artifacts.removeAll { it.archiveTask.is project.jar }, +        project.configurations.getByName('default').extendsFrom = [], +        project.artifacts {, +            archives bundle, +            'default' bundle, +    static void configureDependencies(Project project) {, +            provided "com.github.spullara.mustache.java:compiler:${project.versions.mustache}", +    static Task configureBundleTask(Project project) {, +        PluginPropertiesTask buildProperties = project.tasks.create(name: 'pluginProperties', type: PluginPropertiesTask), +        File pluginMetadata = project.file("src/main/plugin-metadata"), +        project.sourceSets.test {, +            output.dir(buildProperties.generatedResourcesDir, builtBy: 'pluginProperties'), +            resources {, +                srcDir pluginMetadata, +        }, +        Task bundle = project.tasks.create(name: 'bundlePlugin', type: Zip, dependsOn: [project.jar, buildProperties]), +        bundle.configure {, +            from buildProperties, +            from pluginMetadata, +            from project.jar, +            from bundle.project.configurations.runtime - bundle.project.configurations.provided, +        return bundle, +++ b/TESTING.asciidoc, +The REST tests are run automatically when executing the maven test command. To run only the, +gradle integTest -Dtests.filter="@Rest", +++ b/build.gradle, +++ b/buildSrc/build.gradle, +++ b/buildSrc/src/main/groovy/com/carrotsearch/gradle/junit4/RandomizedTestingTask.groovy, +    Map<String, String> systemProperties = new HashMap<>(), +    void systemProperty(String property, String value) {, +                for (Map.Entry<String, String> prop : systemProperties) {, +                    sysproperty key: prop.getKey(), value: prop.getValue(), +++ b/buildSrc/src/main/groovy/com/carrotsearch/gradle/junit4/TestReportLogger.groovy]