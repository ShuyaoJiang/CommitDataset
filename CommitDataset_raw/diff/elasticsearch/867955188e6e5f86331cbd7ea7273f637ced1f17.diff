[+++ b/TESTING.asciidoc, +, +== Testing scripts, +, +Shell scripts can be tested with the Bash Automate Testing System tool available, +at https://github.com/sstephenson/bats. Once the tool is installed, you can, +execute a .bats test file with the following command:, +, +---------------------------------------------------------------------------, +bats test_file.bats, +---------------------------------------------------------------------------, +, +When executing the test files located in the `/packaging/scripts` folder,, +it's possible to add the flag `ES_CLEAN_BEFORE_TEST=true` to clean the test, +environment before the tests are executed:, +, +---------------------------------------------------------------------------, +ES_CLEAN_BEFORE_TEST=true bats 30_deb_package.bats, +---------------------------------------------------------------------------, +, +, +++ b/TESTING.asciidoc, +, +== Testing scripts, +, +Shell scripts can be tested with the Bash Automate Testing System tool available, +at https://github.com/sstephenson/bats. Once the tool is installed, you can, +execute a .bats test file with the following command:, +, +---------------------------------------------------------------------------, +bats test_file.bats, +---------------------------------------------------------------------------, +, +When executing the test files located in the `/packaging/scripts` folder,, +it's possible to add the flag `ES_CLEAN_BEFORE_TEST=true` to clean the test, +environment before the tests are executed:, +, +---------------------------------------------------------------------------, +ES_CLEAN_BEFORE_TEST=true bats 30_deb_package.bats, +---------------------------------------------------------------------------, +, +, +++ b/pom.xml, +        <packaging.elasticsearch.bin.dir>/usr/share/elasticsearch/bin</packaging.elasticsearch.bin.dir>, +        <packaging.elasticsearch.work.dir>/tmp/elasticsearch</packaging.elasticsearch.work.dir>, +        <packaging.elasticsearch.plugins.dir>${packaging.elasticsearch.home.dir}/plugins</packaging.elasticsearch.plugins.dir>, +        <packaging.elasticsearch.pid.dir>/var/run/elasticsearch</packaging.elasticsearch.pid.dir>, +                    <controlDir>${project.build.directory}/generated-packaging/deb/scripts</controlDir>, +                                <!-- Add bin directory -->, +                                    <includes>elasticsearch,elasticsearch.in.sh,plugin</includes>, +                                        <prefix>${packaging.elasticsearch.bin.dir}</prefix>, +                                <!-- Add configuration files -->, +                                <data>, +                                    <src>${project.basedir}/config</src>, +                                    <type>directory</type>, +                                    <excludes>.DS_Store</excludes>, +                                    <mapper>, +                                        <type>perm</type>, +                                        <prefix>${packaging.elasticsearch.conf.dir}</prefix>, +                                        <user>root</user>, +                                        <group>root</group>, +                                    </mapper>, +                                </data>, +                                <!-- Add environment vars file -->, +                                <data>, +                                    <src>${project.build.directory}/generated-packaging/deb/env/elasticsearch</src>, +                                    <type>file</type>, +                                    <mapper>, +                                        <type>perm</type>, +                                        <prefix>/etc/default</prefix>, +                                        <filemode>644</filemode>, +                                        <user>root</user>, +                                        <group>root</group>, +                                    </mapper>, +                                </data>, +                                <!-- Add libs -->, +                                <!-- Add init.d files  -->, +                                <!-- Adds systemd file -->, +                                <!-- Add lintian files  -->, +                                <!-- Add readme files  -->, +                                <data>, +                                    <src>${project.basedir}/</src>, +                                    <includes>*.txt, *.textile</includes>, +                                    <excludes>LICENSE.txt, .DS_Store</excludes>, +                                    <type>directory</type>, +                                    <mapper>, +                                        <type>perm</type>, +                                        <prefix>${packaging.elasticsearch.home.dir}</prefix>, +                                        <user>root</user>, +                                        <group>root</group>, +                                    </mapper>, +                                </data>, +                                <!-- Add license files  -->, +                                        <path>${packaging.elasticsearch.plugins.dir}</path>, +                                        <path>${packaging.elasticsearch.pid.dir}</path>, +                        <!-- Add bin directory -->, +                        <mapping>, +                            <directory>${packaging.elasticsearch.bin.dir}/</directory>, +                            <filemode>755</filemode>, +                            <sources>]