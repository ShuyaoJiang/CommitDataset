[+++ b/server/src/main/java/org/elasticsearch/cluster/block/ClusterBlock.java, +        if (in.getVersion().onOrAfter(Version.V_6_7_0)) {, +        if (out.getVersion().onOrAfter(Version.V_6_7_0)) {, +++ b/server/src/main/java/org/elasticsearch/cluster/block/ClusterBlock.java, +        if (in.getVersion().onOrAfter(Version.V_6_7_0)) {, +        if (out.getVersion().onOrAfter(Version.V_6_7_0)) {, +++ b/server/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexStateService.java, +        final boolean useDirectClose = currentState.nodes().getMinNodeVersion().before(Version.V_6_7_0);, +++ b/server/src/main/java/org/elasticsearch/cluster/block/ClusterBlock.java, +        if (in.getVersion().onOrAfter(Version.V_6_7_0)) {, +        if (out.getVersion().onOrAfter(Version.V_6_7_0)) {, +++ b/server/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexStateService.java, +        final boolean useDirectClose = currentState.nodes().getMinNodeVersion().before(Version.V_6_7_0);, +++ b/server/src/test/java/org/elasticsearch/cluster/block/ClusterBlockTests.java, +            final Version version = randomVersionBetween(random(), Version.V_6_0_0, getPreviousVersion(Version.V_6_7_0));, +            out.setVersion(randomVersionBetween(random(), Version.V_6_0_0, getPreviousVersion(Version.V_6_7_0)));, +        final String uuid = (version.onOrAfter(Version.V_6_7_0) && randomBoolean()) ? UUIDs.randomBase64UUID() : null;]