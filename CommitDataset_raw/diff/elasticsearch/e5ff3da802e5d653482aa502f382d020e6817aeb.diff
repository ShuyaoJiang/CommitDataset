[+++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final int V_2_4_0_ID = 2040099;, +    public static final Version V_2_4_0 = new Version(V_2_4_0_ID, org.apache.lucene.util.Version.LUCENE_5_5_0);, +            case V_2_4_0_ID:, +                return V_2_4_0;, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final int V_2_4_0_ID = 2040099;, +    public static final Version V_2_4_0 = new Version(V_2_4_0_ID, org.apache.lucene.util.Version.LUCENE_5_5_0);, +            case V_2_4_0_ID:, +                return V_2_4_0;, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java, +            os = OsStats.readOsStats(in);, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final int V_2_4_0_ID = 2040099;, +    public static final Version V_2_4_0 = new Version(V_2_4_0_ID, org.apache.lucene.util.Version.LUCENE_5_5_0);, +            case V_2_4_0_ID:, +                return V_2_4_0;, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java, +            os = OsStats.readOsStats(in);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java, +        this.os = new OsStats(nodeInfos);, +        private OsStats(List<NodeInfo> nodeInfos) {, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final int V_2_4_0_ID = 2040099;, +    public static final Version V_2_4_0 = new Version(V_2_4_0_ID, org.apache.lucene.util.Version.LUCENE_5_5_0);, +            case V_2_4_0_ID:, +                return V_2_4_0;, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java, +            os = OsStats.readOsStats(in);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java, +        this.os = new OsStats(nodeInfos);, +        private OsStats(List<NodeInfo> nodeInfos) {, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java, +        NodeStats nodeStats = nodeService.stats(CommonStatsFlags.NONE, false, true, true, false, true, false, false, false, false, false, false);, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final int V_2_4_0_ID = 2040099;, +    public static final Version V_2_4_0 = new Version(V_2_4_0_ID, org.apache.lucene.util.Version.LUCENE_5_5_0);, +            case V_2_4_0_ID:, +                return V_2_4_0;, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java, +            os = OsStats.readOsStats(in);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java, +        this.os = new OsStats(nodeInfos);, +        private OsStats(List<NodeInfo> nodeInfos) {, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java, +        NodeStats nodeStats = nodeService.stats(CommonStatsFlags.NONE, false, true, true, false, true, false, false, false, false, false, false);, +++ b/core/src/main/java/org/elasticsearch/monitor/os/OsProbe.java, +        OsStats stats = new OsStats();, +        stats.timestamp = System.currentTimeMillis();, +        stats.cpu = new OsStats.Cpu();, +        stats.cpu.percent = getSystemCpuPercent();, +        stats.cpu.loadAverage = getSystemLoadAverage();, +, +        OsStats.Mem mem = new OsStats.Mem();, +        mem.total = getTotalPhysicalMemorySize();, +        mem.free = getFreePhysicalMemorySize();, +        stats.mem = mem;, +, +        OsStats.Swap swap = new OsStats.Swap();, +        swap.total = getTotalSwapSpaceSize();, +        swap.free = getFreeSwapSpaceSize();, +        stats.swap = swap;, +, +        return stats;, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final int V_2_4_0_ID = 2040099;, +    public static final Version V_2_4_0 = new Version(V_2_4_0_ID, org.apache.lucene.util.Version.LUCENE_5_5_0);, +            case V_2_4_0_ID:, +                return V_2_4_0;, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/node/stats/NodeStats.java, +            os = OsStats.readOsStats(in);, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsNodes.java, +        this.os = new OsStats(nodeInfos);, +        private OsStats(List<NodeInfo> nodeInfos) {, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/TransportClusterStatsAction.java, +        NodeStats nodeStats = nodeService.stats(CommonStatsFlags.NONE, false, true, true, false, true, false, false, false, false, false, false);, +++ b/core/src/main/java/org/elasticsearch/monitor/os/OsProbe.java, +        OsStats stats = new OsStats();, +        stats.timestamp = System.currentTimeMillis();, +        stats.cpu = new OsStats.Cpu();, +        stats.cpu.percent = getSystemCpuPercent();, +        stats.cpu.loadAverage = getSystemLoadAverage();, +, +        OsStats.Mem mem = new OsStats.Mem();, +        mem.total = getTotalPhysicalMemorySize();, +        mem.free = getFreePhysicalMemorySize();, +        stats.mem = mem;, +, +        OsStats.Swap swap = new OsStats.Swap();, +        swap.total = getTotalSwapSpaceSize();, +        swap.free = getFreeSwapSpaceSize();, +        stats.swap = swap;, +, +        return stats;, +++ b/core/src/main/java/org/elasticsearch/monitor/os/OsStats.java, +import org.elasticsearch.common.io.stream.Streamable;, +/**, + *, + */, +public class OsStats implements Streamable, ToXContent {]