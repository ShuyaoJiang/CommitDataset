[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java, +import javax.annotation.Nullable;, +                    onFirstPhaseResult(null, shardIt, null);, +                onFirstPhaseResult(null, shardIt, null);, +        private void onFirstPhaseResult(@Nullable ShardRouting shard, final ShardIterator shardIt, Throwable t) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java, +import javax.annotation.Nullable;, +                    onFirstPhaseResult(null, shardIt, null);, +                onFirstPhaseResult(null, shardIt, null);, +        private void onFirstPhaseResult(@Nullable ShardRouting shard, final ShardIterator shardIt, Throwable t) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastOperationAction.java, +import javax.annotation.Nullable;, +                    onOperation(null, shardIt, null, false);, +                onOperation(null, shardIt, null, false);, +        private void onOperation(@Nullable ShardRouting shard, final ShardIterator shardIt, Throwable t, boolean alreadyThreaded) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java, +import javax.annotation.Nullable;, +                    onFirstPhaseResult(null, shardIt, null);, +                onFirstPhaseResult(null, shardIt, null);, +        private void onFirstPhaseResult(@Nullable ShardRouting shard, final ShardIterator shardIt, Throwable t) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastOperationAction.java, +import javax.annotation.Nullable;, +                    onOperation(null, shardIt, null, false);, +                onOperation(null, shardIt, null, false);, +        private void onOperation(@Nullable ShardRouting shard, final ShardIterator shardIt, Throwable t, boolean alreadyThreaded) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/network/NetworkUtils.java, +            throw new UnknownHostException("network interface not found");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java, +import javax.annotation.Nullable;, +                    onFirstPhaseResult(null, shardIt, null);, +                onFirstPhaseResult(null, shardIt, null);, +        private void onFirstPhaseResult(@Nullable ShardRouting shard, final ShardIterator shardIt, Throwable t) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastOperationAction.java, +import javax.annotation.Nullable;, +                    onOperation(null, shardIt, null, false);, +                onOperation(null, shardIt, null, false);, +        private void onOperation(@Nullable ShardRouting shard, final ShardIterator shardIt, Throwable t, boolean alreadyThreaded) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/network/NetworkUtils.java, +            throw new UnknownHostException("network interface not found");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/xcontent/CustomScoreQueryBuilder.java, +        if (this.params == null) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java, +import javax.annotation.Nullable;, +                    onFirstPhaseResult(null, shardIt, null);, +                onFirstPhaseResult(null, shardIt, null);, +        private void onFirstPhaseResult(@Nullable ShardRouting shard, final ShardIterator shardIt, Throwable t) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastOperationAction.java, +import javax.annotation.Nullable;, +                    onOperation(null, shardIt, null, false);, +                onOperation(null, shardIt, null, false);, +        private void onOperation(@Nullable ShardRouting shard, final ShardIterator shardIt, Throwable t, boolean alreadyThreaded) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/network/NetworkUtils.java, +            throw new UnknownHostException("network interface not found");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/xcontent/CustomScoreQueryBuilder.java, +        if (this.params == null) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/xcontent/ScriptFilterBuilder.java, +        if (this.params == null) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java, +import javax.annotation.Nullable;, +                    onFirstPhaseResult(null, shardIt, null);, +                onFirstPhaseResult(null, shardIt, null);, +        private void onFirstPhaseResult(@Nullable ShardRouting shard, final ShardIterator shardIt, Throwable t) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastOperationAction.java, +import javax.annotation.Nullable;, +                    onOperation(null, shardIt, null, false);, +                onOperation(null, shardIt, null, false);, +        private void onOperation(@Nullable ShardRouting shard, final ShardIterator shardIt, Throwable t, boolean alreadyThreaded) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/network/NetworkUtils.java, +            throw new UnknownHostException("network interface not found");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/xcontent/CustomScoreQueryBuilder.java, +        if (this.params == null) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/xcontent/ScriptFilterBuilder.java, +        if (this.params == null) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/transport/netty/NettyTransport.java, +            throw new ConnectTransportException(null, "Can't connect to a null node");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/search/type/TransportSearchTypeAction.java, +import javax.annotation.Nullable;, +                    onFirstPhaseResult(null, shardIt, null);, +                onFirstPhaseResult(null, shardIt, null);, +        private void onFirstPhaseResult(@Nullable ShardRouting shard, final ShardIterator shardIt, Throwable t) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/support/broadcast/TransportBroadcastOperationAction.java, +import javax.annotation.Nullable;, +                    onOperation(null, shardIt, null, false);, +                onOperation(null, shardIt, null, false);, +        private void onOperation(@Nullable ShardRouting shard, final ShardIterator shardIt, Throwable t, boolean alreadyThreaded) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/network/NetworkUtils.java, +            throw new UnknownHostException("network interface not found");, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/xcontent/CustomScoreQueryBuilder.java, +        if (this.params == null) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/xcontent/ScriptFilterBuilder.java, +        if (this.params == null) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/transport/netty/NettyTransport.java, +            throw new ConnectTransportException(null, "Can't connect to a null node");, +++ b/modules/test/integration/src/test/java/org/elasticsearch/test/integration/indexlifecycle/IndexLifecycleActionTests.java, +        assertThat(routingNodeEntry1.numberOfShardsWithState(STARTED), anyOf(equalTo(5), equalTo(4), equalTo(3)));, +        assertThat(routingNodeEntry2.numberOfShardsWithState(STARTED), anyOf(equalTo(5), equalTo(4), equalTo(3)));]