[+++ b/src/main/java/org/elasticsearch/alerts/actions/SmtpAlertActionFactory.java, +        if (settings == null) {, +            settings = configurationManager.getGlobalConfig();, +            configurationManager.registerListener(this);, +        }, +, +        if (settings == null) {, +            throw new ElasticsearchException("Unable to retrieve [" + GLOBAL_EMAIL_CONFIG + "] from the config index.");, +        }, +]