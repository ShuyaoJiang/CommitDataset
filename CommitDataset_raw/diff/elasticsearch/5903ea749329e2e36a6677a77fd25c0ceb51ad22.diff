[+++ b/src/main/java/org/elasticsearch/alerts/actions/email/EmailAction.java, +    final @Nullable Template subject;, +    final @Nullable Template textBody;, +    final @Nullable Template htmlBody;, +    public EmailAction(ESLogger logger, @Nullable Transform transform, EmailService emailService, Email emailPrototype,, +                       Authentication auth, Profile profile, String account, @Nullable Template subject,, +                       @Nullable Template textBody, @Nullable Template htmlBody, boolean attachPayload) {, +        email.subject(subject != null ? subject.render(model) : "");, +        email.textBody(textBody != null ? textBody.render(model) : "");, +++ b/src/main/java/org/elasticsearch/alerts/actions/email/EmailAction.java, +    final @Nullable Template subject;, +    final @Nullable Template textBody;, +    final @Nullable Template htmlBody;, +    public EmailAction(ESLogger logger, @Nullable Transform transform, EmailService emailService, Email emailPrototype,, +                       Authentication auth, Profile profile, String account, @Nullable Template subject,, +                       @Nullable Template textBody, @Nullable Template htmlBody, boolean attachPayload) {, +        email.subject(subject != null ? subject.render(model) : "");, +        email.textBody(textBody != null ? textBody.render(model) : "");, +++ b/src/test/java/org/elasticsearch/alerts/actions/email/EmailActionTests.java, +        Template subject = randomBoolean() ? null : mock(Template.class);, +        Template textBody = randomBoolean() ? null : mock(Template.class);, +        if (subject != null) {, +        }, +        if (textBody != null) {, +        }, +        assertThat(actualEmail.subject(), is(subject == null ? "" : "_subject"));, +        assertThat(actualEmail.textBody(), is(textBody == null ? "" : "_text_body"));]