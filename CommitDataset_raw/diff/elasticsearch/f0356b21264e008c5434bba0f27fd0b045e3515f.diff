[+++ b/src/main/java/org/elasticsearch/indices/store/IndicesStore.java, +, +                        // if the allocated or relocation node id doesn't exists in the cluster state, its a stale, +                        // node, make sure we don't do anything with this until the routing table has properly been, +                        // rerouted to reflect the fact that the node does not exists, +                        if (!event.state().nodes().nodeExists(shardRouting.currentNodeId())) {, +                            shardCanBeDeleted = false;, +                            break;, +                        }, +                        if (shardRouting.relocatingNodeId() != null) {, +                            if (!event.state().nodes().nodeExists(shardRouting.relocatingNodeId())) {, +                                shardCanBeDeleted = false;, +                                break;, +                            }, +                        }, +, +                        String localNodeId = clusterService.localNode().id();]