[+++ b/src/main/java/org/elasticsearch/indices/recovery/RecoverySourceHandler.java, +++ b/src/main/java/org/elasticsearch/indices/recovery/RecoverySourceHandler.java, +++ b/src/test/java/org/elasticsearch/gateway/RecoveryFromGatewayTests.java]