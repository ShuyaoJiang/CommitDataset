[+++ b/Vagrantfile, +    ubuntu_common config, +def ubuntu_common(config), +  deb_common config, 'apt-add-repository -y ppa:openjdk-r/ppa > /dev/null 2>&1', 'openjdk-r-*', +def deb_common(config, add_openjdk_repository_command, openjdk_list), +++ b/Vagrantfile, +    ubuntu_common config, +def ubuntu_common(config), +  deb_common config, 'apt-add-repository -y ppa:openjdk-r/ppa > /dev/null 2>&1', 'openjdk-r-*', +def deb_common(config, add_openjdk_repository_command, openjdk_list), +++ b/core/pom.xml, +                                <include>org/elasticsearch/index/shard/MockEngineFactoryPlugin.class</include>, +++ b/Vagrantfile, +    ubuntu_common config, +def ubuntu_common(config), +  deb_common config, 'apt-add-repository -y ppa:openjdk-r/ppa > /dev/null 2>&1', 'openjdk-r-*', +def deb_common(config, add_openjdk_repository_command, openjdk_list), +++ b/core/pom.xml, +                                <include>org/elasticsearch/index/shard/MockEngineFactoryPlugin.class</include>, +++ b/core/src/main/java/org/elasticsearch/ElasticsearchException.java, +        CREATE_FAILED_ENGINE_EXCEPTION(org.elasticsearch.index.engine.CreateFailedEngineException.class, org.elasticsearch.index.engine.CreateFailedEngineException::new, 22),, +        DOCUMENT_ALREADY_EXISTS_EXCEPTION(org.elasticsearch.index.engine.DocumentAlreadyExistsException.class, org.elasticsearch.index.engine.DocumentAlreadyExistsException::new, 54),, +++ b/Vagrantfile, +    ubuntu_common config, +def ubuntu_common(config), +  deb_common config, 'apt-add-repository -y ppa:openjdk-r/ppa > /dev/null 2>&1', 'openjdk-r-*', +def deb_common(config, add_openjdk_repository_command, openjdk_list), +++ b/core/pom.xml, +                                <include>org/elasticsearch/index/shard/MockEngineFactoryPlugin.class</include>, +++ b/core/src/main/java/org/elasticsearch/ElasticsearchException.java, +        CREATE_FAILED_ENGINE_EXCEPTION(org.elasticsearch.index.engine.CreateFailedEngineException.class, org.elasticsearch.index.engine.CreateFailedEngineException::new, 22),, +        DOCUMENT_ALREADY_EXISTS_EXCEPTION(org.elasticsearch.index.engine.DocumentAlreadyExistsException.class, org.elasticsearch.index.engine.DocumentAlreadyExistsException::new, 54),, +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/Vagrantfile, +    ubuntu_common config, +def ubuntu_common(config), +  deb_common config, 'apt-add-repository -y ppa:openjdk-r/ppa > /dev/null 2>&1', 'openjdk-r-*', +def deb_common(config, add_openjdk_repository_command, openjdk_list), +++ b/core/pom.xml, +                                <include>org/elasticsearch/index/shard/MockEngineFactoryPlugin.class</include>, +++ b/core/src/main/java/org/elasticsearch/ElasticsearchException.java, +        CREATE_FAILED_ENGINE_EXCEPTION(org.elasticsearch.index.engine.CreateFailedEngineException.class, org.elasticsearch.index.engine.CreateFailedEngineException::new, 22),, +        DOCUMENT_ALREADY_EXISTS_EXCEPTION(org.elasticsearch.index.engine.DocumentAlreadyExistsException.class, org.elasticsearch.index.engine.DocumentAlreadyExistsException::new, 54),, +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/core/src/main/java/org/elasticsearch/action/UnavailableShardsException.java, +    public UnavailableShardsException(@Nullable ShardId shardId, String message) {, +        super(buildMessage(shardId, message));, +++ b/Vagrantfile, +    ubuntu_common config, +def ubuntu_common(config), +  deb_common config, 'apt-add-repository -y ppa:openjdk-r/ppa > /dev/null 2>&1', 'openjdk-r-*', +def deb_common(config, add_openjdk_repository_command, openjdk_list), +++ b/core/pom.xml, +                                <include>org/elasticsearch/index/shard/MockEngineFactoryPlugin.class</include>, +++ b/core/src/main/java/org/elasticsearch/ElasticsearchException.java, +        CREATE_FAILED_ENGINE_EXCEPTION(org.elasticsearch.index.engine.CreateFailedEngineException.class, org.elasticsearch.index.engine.CreateFailedEngineException::new, 22),, +        DOCUMENT_ALREADY_EXISTS_EXCEPTION(org.elasticsearch.index.engine.DocumentAlreadyExistsException.class, org.elasticsearch.index.engine.DocumentAlreadyExistsException::new, 54),, +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/core/src/main/java/org/elasticsearch/action/UnavailableShardsException.java, +    public UnavailableShardsException(@Nullable ShardId shardId, String message) {, +        super(buildMessage(shardId, message));, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsIndices.java, +import org.elasticsearch.index.percolator.stats.PercolateStats;, +++ b/Vagrantfile, +    ubuntu_common config, +def ubuntu_common(config), +  deb_common config, 'apt-add-repository -y ppa:openjdk-r/ppa > /dev/null 2>&1', 'openjdk-r-*', +def deb_common(config, add_openjdk_repository_command, openjdk_list), +++ b/core/pom.xml, +                                <include>org/elasticsearch/index/shard/MockEngineFactoryPlugin.class</include>, +++ b/core/src/main/java/org/elasticsearch/ElasticsearchException.java, +        CREATE_FAILED_ENGINE_EXCEPTION(org.elasticsearch.index.engine.CreateFailedEngineException.class, org.elasticsearch.index.engine.CreateFailedEngineException::new, 22),, +        DOCUMENT_ALREADY_EXISTS_EXCEPTION(org.elasticsearch.index.engine.DocumentAlreadyExistsException.class, org.elasticsearch.index.engine.DocumentAlreadyExistsException::new, 54),, +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/core/src/main/java/org/elasticsearch/action/UnavailableShardsException.java, +    public UnavailableShardsException(@Nullable ShardId shardId, String message) {, +        super(buildMessage(shardId, message));, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsIndices.java, +import org.elasticsearch.index.percolator.stats.PercolateStats;, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java, +            IndexShard shard = service.shard(shardRouting.id());, +++ b/Vagrantfile, +    ubuntu_common config, +def ubuntu_common(config), +  deb_common config, 'apt-add-repository -y ppa:openjdk-r/ppa > /dev/null 2>&1', 'openjdk-r-*', +def deb_common(config, add_openjdk_repository_command, openjdk_list), +++ b/core/pom.xml, +                                <include>org/elasticsearch/index/shard/MockEngineFactoryPlugin.class</include>, +++ b/core/src/main/java/org/elasticsearch/ElasticsearchException.java, +        CREATE_FAILED_ENGINE_EXCEPTION(org.elasticsearch.index.engine.CreateFailedEngineException.class, org.elasticsearch.index.engine.CreateFailedEngineException::new, 22),, +        DOCUMENT_ALREADY_EXISTS_EXCEPTION(org.elasticsearch.index.engine.DocumentAlreadyExistsException.class, org.elasticsearch.index.engine.DocumentAlreadyExistsException::new, 54),, +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/core/src/main/java/org/elasticsearch/action/UnavailableShardsException.java, +    public UnavailableShardsException(@Nullable ShardId shardId, String message) {, +        super(buildMessage(shardId, message));, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsIndices.java, +import org.elasticsearch.index.percolator.stats.PercolateStats;, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/cache/clear/TransportClearIndicesCacheAction.java, +            IndexShard shard = service.shard(shardRouting.id());, +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/flush/TransportShardFlushAction.java]