[+++ b/core/src/main/java/org/elasticsearch/ElasticsearchException.java, +    public static boolean isRegistered(String name) {, +++ b/core/src/main/java/org/elasticsearch/ElasticsearchException.java, +    public static boolean isRegistered(String name) {, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java, +                final String name = throwable.getClass().getName();, +                if (throwable instanceof ElasticsearchException && ElasticsearchException.isRegistered(name)) {]