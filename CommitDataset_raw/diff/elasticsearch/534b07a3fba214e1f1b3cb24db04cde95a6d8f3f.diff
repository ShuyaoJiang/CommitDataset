[+++ b/src/test/java/org/elasticsearch/search/query/ExistsMissingTests.java, +import java.util.Locale;, +, +        XContentBuilder mapping = XContentBuilder.builder(JsonXContent.jsonXContent), +                .endObject();, +, +        assertAcked(client().admin().indices().prepareCreate("idx").addMapping("type", mapping));, +            assertEquals(String.format(Locale.ROOT, "exists(%s, %d) mapping: %s", fieldName, count, mapping.string()), count, resp.getHits().totalHits());, +            assertEquals(String.format(Locale.ROOT, "missing(%s, %d) mapping: %s", fieldName, count, mapping.string()), numDocs - count, resp.getHits().totalHits());]