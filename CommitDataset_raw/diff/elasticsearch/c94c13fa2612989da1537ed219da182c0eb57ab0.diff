[+++ b/src/main/java/org/elasticsearch/common/compress/lzf/LZFCompressedStreamOutput.java, +import com.ning.compress.lzf.util.ChunkEncoderFactory;, +    public LZFCompressedStreamOutput(StreamOutput out) throws IOException {, +        this.encoder = ChunkEncoderFactory.safeInstance();, +++ b/src/main/java/org/elasticsearch/common/compress/lzf/LZFCompressedStreamOutput.java, +import com.ning.compress.lzf.util.ChunkEncoderFactory;, +    public LZFCompressedStreamOutput(StreamOutput out) throws IOException {, +        this.encoder = ChunkEncoderFactory.safeInstance();, +++ b/src/main/java/org/elasticsearch/common/compress/lzf/LZFCompressor.java, +        return new LZFCompressedStreamOutput(out);]