[+++ b/server/src/main/java/org/elasticsearch/action/fieldcaps/FieldCapabilitiesResponse.java, +import org.elasticsearch.common.xcontent.ToXContentObject;, +public class FieldCapabilitiesResponse extends ActionResponse implements ToXContentObject {, +        return builder.startObject(), +            .field(FIELDS_FIELD.getPreferredName(), responseMap), +            .endObject();, +++ b/server/src/main/java/org/elasticsearch/action/fieldcaps/FieldCapabilitiesResponse.java, +import org.elasticsearch.common.xcontent.ToXContentObject;, +public class FieldCapabilitiesResponse extends ActionResponse implements ToXContentObject {, +        return builder.startObject(), +            .field(FIELDS_FIELD.getPreferredName(), responseMap), +            .endObject();, +++ b/server/src/main/java/org/elasticsearch/rest/action/RestFieldCapabilitiesAction.java, +        return channel -> client.fieldCaps(fieldRequest, new RestToXContentListener<>(channel));, +++ b/server/src/main/java/org/elasticsearch/action/fieldcaps/FieldCapabilitiesResponse.java, +import org.elasticsearch.common.xcontent.ToXContentObject;, +public class FieldCapabilitiesResponse extends ActionResponse implements ToXContentObject {, +        return builder.startObject(), +            .field(FIELDS_FIELD.getPreferredName(), responseMap), +            .endObject();, +++ b/server/src/main/java/org/elasticsearch/rest/action/RestFieldCapabilitiesAction.java, +        return channel -> client.fieldCaps(fieldRequest, new RestToXContentListener<>(channel));, +++ b/server/src/test/java/org/elasticsearch/action/fieldcaps/FieldCapabilitiesResponseTests.java, +        XContentBuilder builder = XContentFactory.contentBuilder(XContentType.JSON);]