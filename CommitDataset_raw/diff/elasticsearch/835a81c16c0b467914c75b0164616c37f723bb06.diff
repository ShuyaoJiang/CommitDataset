[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/engine/IndexEngine.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/engine/IndexEngine.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/engine/robin/RobinIndexEngine.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/engine/IndexEngine.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/engine/robin/RobinIndexEngine.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/xcontent/ConstantScoreQueryParser.java, +        // cache the filter if possible needed, +, +        Query query = new DeletionAwareConstantScoreQuery(filter, true);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/engine/IndexEngine.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/engine/robin/RobinIndexEngine.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/xcontent/ConstantScoreQueryParser.java, +        // cache the filter if possible needed, +, +        Query query = new DeletionAwareConstantScoreQuery(filter, true);, +++ b/modules/elasticsearch/src/test/java/org/elasticsearch/index/query/xcontent/SimpleIndexQueryParserTests.java, +        assertThat(parsedQuery, instanceOf(DeletionAwareConstantScoreQuery.class));, +        DeletionAwareConstantScoreQuery constantScoreQuery = (DeletionAwareConstantScoreQuery) parsedQuery;, +        assertThat(parsedQuery, instanceOf(DeletionAwareConstantScoreQuery.class));, +        DeletionAwareConstantScoreQuery constantScoreQuery = (DeletionAwareConstantScoreQuery) parsedQuery;]