[+++ b/docs/reference/modules/cross-cluster-search.asciidoc, +        "_index": "twitter",, +        "_score": 2,, +        "_index": "cluster_one:twitter",, +        "_score": 1,, +        "_index": "twitter",, +        "_score": 2,, +        "_index": "cluster_one:twitter",, +        "_score": 1,, +++ b/docs/reference/modules/cross-cluster-search.asciidoc, +        "_index": "twitter",, +        "_score": 2,, +        "_index": "cluster_one:twitter",, +        "_score": 1,, +        "_index": "twitter",, +        "_score": 2,, +        "_index": "cluster_one:twitter",, +        "_score": 1,, +++ b/server/src/main/java/org/elasticsearch/action/search/SearchResponseMerger.java, +            return clusterAlias.compareTo(o.clusterAlias);, +++ b/docs/reference/modules/cross-cluster-search.asciidoc, +        "_index": "twitter",, +        "_score": 2,, +        "_index": "cluster_one:twitter",, +        "_score": 1,, +        "_index": "twitter",, +        "_score": 2,, +        "_index": "cluster_one:twitter",, +        "_score": 1,, +++ b/server/src/main/java/org/elasticsearch/action/search/SearchResponseMerger.java, +            return clusterAlias.compareTo(o.clusterAlias);, +++ b/server/src/main/java/org/elasticsearch/action/search/SearchShardIterator.java, +import org.elasticsearch.cluster.routing.ShardIterator;, +import java.util.Objects;, +, +    @Override, +    public boolean equals(Object o) {, +        if (this == o) {, +            return true;, +        }, +        if (o == null || getClass() != o.getClass()) {, +            return false;, +        }, +        if (super.equals(o) == false) {, +            return false;, +        }, +        SearchShardIterator that = (SearchShardIterator) o;, +        return Objects.equals(clusterAlias, that.clusterAlias);, +    }, +, +    @Override, +    public int hashCode() {, +        return Objects.hash(super.hashCode(), clusterAlias);, +    }, +, +    @Override, +    public int compareTo(ShardIterator o) {, +        int superCompareTo = super.compareTo(o);, +        if (superCompareTo != 0 || (o instanceof SearchShardIterator == false)) {, +            return superCompareTo;, +        }, +        SearchShardIterator searchShardIterator = (SearchShardIterator)o;, +        if (clusterAlias == null && searchShardIterator.getClusterAlias() == null) {, +            return 0;, +        }, +        if (clusterAlias == null) {, +            return -1;, +        }, +        if (searchShardIterator.getClusterAlias() == null) {, +            return 1;, +        }, +        return clusterAlias.compareTo(searchShardIterator.getClusterAlias());, +    }, +++ b/docs/reference/modules/cross-cluster-search.asciidoc, +        "_index": "twitter",, +        "_score": 2,, +        "_index": "cluster_one:twitter",, +        "_score": 1,, +        "_index": "twitter",, +        "_score": 2,, +        "_index": "cluster_one:twitter",, +        "_score": 1,, +++ b/server/src/main/java/org/elasticsearch/action/search/SearchResponseMerger.java, +            return clusterAlias.compareTo(o.clusterAlias);, +++ b/server/src/main/java/org/elasticsearch/action/search/SearchShardIterator.java, +import org.elasticsearch.cluster.routing.ShardIterator;, +import java.util.Objects;, +, +    @Override, +    public boolean equals(Object o) {, +        if (this == o) {, +            return true;, +        }, +        if (o == null || getClass() != o.getClass()) {, +            return false;, +        }, +        if (super.equals(o) == false) {, +            return false;, +        }, +        SearchShardIterator that = (SearchShardIterator) o;]