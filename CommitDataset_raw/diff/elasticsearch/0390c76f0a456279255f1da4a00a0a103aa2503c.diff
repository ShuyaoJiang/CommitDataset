[+++ b/core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java, +++ b/core/src/test/java/org/elasticsearch/cluster/routing/AllocationIdTests.java, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java, +++ b/core/src/test/java/org/elasticsearch/cluster/routing/AllocationIdTests.java, +++ b/core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java, +        ShardRouting routing = ShardRoutingHelper.initWithSameId(target.routingEntry(),, +            RecoverySource.StoreRecoverySource.EXISTING_STORE_INSTANCE);, +        IndexShard newShard = newShard(, +            ShardRoutingHelper.initWithSameId(shard.routingEntry(), RecoverySource.StoreRecoverySource.EXISTING_STORE_INSTANCE),, +        IndexShard newShard = newShard(, +            ShardRoutingHelper.initWithSameId(shard.routingEntry(), RecoverySource.StoreRecoverySource.EXISTING_STORE_INSTANCE),, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/RoutingNodes.java, +++ b/core/src/main/java/org/elasticsearch/cluster/routing/ShardRouting.java, +++ b/core/src/test/java/org/elasticsearch/cluster/routing/AllocationIdTests.java, +++ b/core/src/test/java/org/elasticsearch/index/shard/IndexShardTests.java, +        ShardRouting routing = ShardRoutingHelper.initWithSameId(target.routingEntry(),, +            RecoverySource.StoreRecoverySource.EXISTING_STORE_INSTANCE);, +        IndexShard newShard = newShard(, +            ShardRoutingHelper.initWithSameId(shard.routingEntry(), RecoverySource.StoreRecoverySource.EXISTING_STORE_INSTANCE),, +        IndexShard newShard = newShard(, +            ShardRoutingHelper.initWithSameId(shard.routingEntry(), RecoverySource.StoreRecoverySource.EXISTING_STORE_INSTANCE),, +++ b/test/framework/src/main/java/org/elasticsearch/cluster/routing/ShardRoutingHelper.java]