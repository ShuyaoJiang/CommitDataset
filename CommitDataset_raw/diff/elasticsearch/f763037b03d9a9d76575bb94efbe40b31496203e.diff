[+++ b/server/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java, +                                delete(snapshotId, indexId, new ShardId(indexMetaData.getIndex(), shardId));, +        final RestoreContext snapshotContext = new RestoreContext(shard, snapshotId, indexId, snapshotShardId, recoveryState);, +        Context context = new Context(snapshotId, indexId, shardId);, +    private void delete(SnapshotId snapshotId, IndexId indexId, ShardId shardId) {, +        Context context = new Context(snapshotId, indexId, shardId, shardId);, +        Context(SnapshotId snapshotId, IndexId indexId, ShardId shardId) {, +            this(snapshotId, indexId, shardId, shardId);, +        Context(SnapshotId snapshotId, IndexId indexId, ShardId shardId, ShardId snapshotShardId) {, +                indexShardSnapshotFormat.delete(blobContainer, snapshotId.getUUID());, +                return indexShardSnapshotFormat.read(blobContainer, snapshotId.getUUID());, +            super(snapshotId, indexId, store.shardId());, +        RestoreContext(IndexShard shard, SnapshotId snapshotId, IndexId indexId, ShardId snapshotShardId, RecoveryState recoveryState) {, +            super(snapshotId, indexId, shard.shardId(), snapshotShardId);]