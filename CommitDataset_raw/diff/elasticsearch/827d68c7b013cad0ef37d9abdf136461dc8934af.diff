[+++ b/elasticsearch/x-pack/license-plugin/src/main/java/org/elasticsearch/license/plugin/core/LicensesService.java, +        this.scheduler = new SchedulerEngine(clock);, +        this.scheduler.register(this);, +                            (startTime, now) ->, +                                    expirationCallback.nextScheduledTimeForExpiry(license.expiryDate(), startTime, now)));, +++ b/elasticsearch/x-pack/license-plugin/src/main/java/org/elasticsearch/license/plugin/core/LicensesService.java, +        this.scheduler = new SchedulerEngine(clock);, +        this.scheduler.register(this);, +                            (startTime, now) ->, +                                    expirationCallback.nextScheduledTimeForExpiry(license.expiryDate(), startTime, now)));, +++ b/elasticsearch/x-pack/license-plugin/src/test/java/org/elasticsearch/license/plugin/core/AbstractLicenseServiceTestCase.java, +        licensesService = new LicensesService(Settings.EMPTY, clusterService, transportService, clock);]