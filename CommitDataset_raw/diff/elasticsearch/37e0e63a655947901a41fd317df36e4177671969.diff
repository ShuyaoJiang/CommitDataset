[+++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +                addJarPomGeneration(project), +    protected static void addJarPomGeneration(Project project) {, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +                addJarPomGeneration(project), +    protected static void addJarPomGeneration(Project project) {, +++ b/client/rest/build.gradle, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +                addJarPomGeneration(project), +    protected static void addJarPomGeneration(Project project) {, +++ b/client/rest/build.gradle, +++ b/client/sniffer/build.gradle, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +                addJarPomGeneration(project), +    protected static void addJarPomGeneration(Project project) {, +++ b/client/rest/build.gradle, +++ b/client/sniffer/build.gradle, +++ b/client/transport/build.gradle, +  compile project(path: ':modules:transport-netty3', configuration: 'runtime'), +  compile project(path: ':modules:transport-netty4', configuration: 'runtime'), +  compile project(path: ':modules:reindex', configuration: 'runtime'), +  compile project(path: ':modules:lang-mustache', configuration: 'runtime'), +  compile project(path: ':modules:percolator', configuration: 'runtime'), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +                addJarPomGeneration(project), +    protected static void addJarPomGeneration(Project project) {, +++ b/client/rest/build.gradle, +++ b/client/sniffer/build.gradle, +++ b/client/transport/build.gradle, +  compile project(path: ':modules:transport-netty3', configuration: 'runtime'), +  compile project(path: ':modules:transport-netty4', configuration: 'runtime'), +  compile project(path: ':modules:reindex', configuration: 'runtime'), +  compile project(path: ':modules:lang-mustache', configuration: 'runtime'), +  compile project(path: ':modules:percolator', configuration: 'runtime'), +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverAction.java, +            return String.join("-", sourceIndexName.substring(0, numberIndex), String.valueOf(++counter));, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +                addJarPomGeneration(project), +    protected static void addJarPomGeneration(Project project) {, +++ b/client/rest/build.gradle, +++ b/client/sniffer/build.gradle, +++ b/client/transport/build.gradle, +  compile project(path: ':modules:transport-netty3', configuration: 'runtime'), +  compile project(path: ':modules:transport-netty4', configuration: 'runtime'), +  compile project(path: ':modules:reindex', configuration: 'runtime'), +  compile project(path: ':modules:lang-mustache', configuration: 'runtime'), +  compile project(path: ':modules:percolator', configuration: 'runtime'), +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverAction.java, +            return String.join("-", sourceIndexName.substring(0, numberIndex), String.valueOf(++counter));, +++ b/core/src/main/java/org/elasticsearch/env/ESFileStore.java, +        long result = in.getTotalSpace();, +        if (result < 0) {, +            // see https://bugs.openjdk.java.net/browse/JDK-8162520:, +            result = Long.MAX_VALUE;, +        }, +        return result;, +        long result = in.getUsableSpace();, +        if (result < 0) {, +            // see https://bugs.openjdk.java.net/browse/JDK-8162520:, +            result = Long.MAX_VALUE;, +        }, +        return result;, +        long result = in.getUnallocatedSpace();, +        if (result < 0) {, +            // see https://bugs.openjdk.java.net/browse/JDK-8162520:, +            result = Long.MAX_VALUE;, +        }, +        return result;, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +                addJarPomGeneration(project), +    protected static void addJarPomGeneration(Project project) {, +++ b/client/rest/build.gradle, +++ b/client/sniffer/build.gradle, +++ b/client/transport/build.gradle, +  compile project(path: ':modules:transport-netty3', configuration: 'runtime'), +  compile project(path: ':modules:transport-netty4', configuration: 'runtime'), +  compile project(path: ':modules:reindex', configuration: 'runtime'), +  compile project(path: ':modules:lang-mustache', configuration: 'runtime'), +  compile project(path: ':modules:percolator', configuration: 'runtime'), +++ b/core/src/main/java/org/elasticsearch/action/admin/indices/rollover/TransportRolloverAction.java, +            return String.join("-", sourceIndexName.substring(0, numberIndex), String.valueOf(++counter));, +++ b/core/src/main/java/org/elasticsearch/env/ESFileStore.java, +        long result = in.getTotalSpace();, +        if (result < 0) {, +            // see https://bugs.openjdk.java.net/browse/JDK-8162520:, +            result = Long.MAX_VALUE;, +        }, +        return result;, +        long result = in.getUsableSpace();, +        if (result < 0) {, +            // see https://bugs.openjdk.java.net/browse/JDK-8162520:, +            result = Long.MAX_VALUE;, +        }, +        return result;, +        long result = in.getUnallocatedSpace();, +        if (result < 0) {, +            // see https://bugs.openjdk.java.net/browse/JDK-8162520:, +            result = Long.MAX_VALUE;, +        }, +        return result;]