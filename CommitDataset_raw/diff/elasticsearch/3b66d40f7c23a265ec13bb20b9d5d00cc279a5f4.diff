[+++ b/core/src/main/java/org/elasticsearch/script/ExecutableScript.java, +    /**, +     * Sets a runtime script parameter., +     * <p>, +     * Note that this method may be slow, involving put() and get() calls, +     * to a hashmap or similar., +     * @param name parameter name, +     * @param value parameter value, +     */, +++ b/core/src/main/java/org/elasticsearch/script/ExecutableScript.java, +    /**, +     * Sets a runtime script parameter., +     * <p>, +     * Note that this method may be slow, involving put() and get() calls, +     * to a hashmap or similar., +     * @param name parameter name, +     * @param value parameter value, +     */, +++ b/core/src/main/java/org/elasticsearch/script/LeafSearchScript.java, +    , +    /**, +     * Sets per-document aggregation {@code _value}., +     * <p>, +     * The default implementation just calls {@code setNextVar("_value", value)} but, +     * some engines might want to handle this differently for better performance., +     * <p>, +     * @param value per-document value, typically a String, Long, or Double, +     */, +    default void setNextAggregationValue(Object value) {, +        setNextVar("_value", value);, +    }, +++ b/core/src/main/java/org/elasticsearch/script/ExecutableScript.java, +    /**, +     * Sets a runtime script parameter., +     * <p>, +     * Note that this method may be slow, involving put() and get() calls, +     * to a hashmap or similar., +     * @param name parameter name, +     * @param value parameter value, +     */, +++ b/core/src/main/java/org/elasticsearch/script/LeafSearchScript.java, +    , +    /**, +     * Sets per-document aggregation {@code _value}., +     * <p>, +     * The default implementation just calls {@code setNextVar("_value", value)} but, +     * some engines might want to handle this differently for better performance., +     * <p>, +     * @param value per-document value, typically a String, Long, or Double, +     */, +    default void setNextAggregationValue(Object value) {, +        setNextVar("_value", value);, +    }, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/support/ValuesSource.java, +                        script.setNextAggregationValue(longValues.valueAt(i));, +                        script.setNextAggregationValue(doubleValues.valueAt(i));, +                    script.setNextAggregationValue(value.utf8ToString());, +++ b/core/src/main/java/org/elasticsearch/script/ExecutableScript.java, +    /**, +     * Sets a runtime script parameter., +     * <p>, +     * Note that this method may be slow, involving put() and get() calls, +     * to a hashmap or similar., +     * @param name parameter name, +     * @param value parameter value, +     */, +++ b/core/src/main/java/org/elasticsearch/script/LeafSearchScript.java, +    , +    /**, +     * Sets per-document aggregation {@code _value}., +     * <p>, +     * The default implementation just calls {@code setNextVar("_value", value)} but, +     * some engines might want to handle this differently for better performance., +     * <p>, +     * @param value per-document value, typically a String, Long, or Double, +     */, +    default void setNextAggregationValue(Object value) {, +        setNextVar("_value", value);, +    }, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/support/ValuesSource.java, +                        script.setNextAggregationValue(longValues.valueAt(i));, +                        script.setNextAggregationValue(doubleValues.valueAt(i));, +                    script.setNextAggregationValue(value.utf8ToString());, +++ b/docs/reference/aggregations/bucket/terms-aggregation.asciidoc, +                "script" : { , +                    "inline": "doc['gender'].value", +                    "lang": "painless", +                }, +                "script" : { , +                    "inline" : "'Gender: ' +_value", +                    "lang" : "painless" , +                }, +++ b/core/src/main/java/org/elasticsearch/script/ExecutableScript.java, +    /**, +     * Sets a runtime script parameter., +     * <p>, +     * Note that this method may be slow, involving put() and get() calls, +     * to a hashmap or similar., +     * @param name parameter name, +     * @param value parameter value]