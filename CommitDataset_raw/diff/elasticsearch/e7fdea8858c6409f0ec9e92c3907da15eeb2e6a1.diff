[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/Strings.java, +                    if (i == 0) {, +                        sb.append(Character.toLowerCase(c));, +                    } else {, +                    }, +                } else {, +                    sb.append('_');, +                    sb.append(Character.toLowerCase(c));, +                }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/Strings.java, +                    if (i == 0) {, +                        sb.append(Character.toLowerCase(c));, +                    } else {, +                    }, +                } else {, +                    sb.append('_');, +                    sb.append(Character.toLowerCase(c));, +                }, +++ b/modules/elasticsearch/src/test/java/org/elasticsearch/util/StringsTests.java, +, +        assertThat(toUnderscoreCase("Name"), equalTo("name"));]