[+++ b/core/src/main/java/org/elasticsearch/index/query/IndexQueryParserService.java, +    public ParsedQuery parse(QueryBuilder<?> queryBuilder) {, +        QueryShardContext context = cache.get();, +            return innerParse(context, queryBuilder);, +            throw new QueryShardException(context, "failed to create query: {}", queryBuilder);, +    public QueryBuilder<?> parseInnerQueryBuilder(QueryParseContext parseContext) throws IOException {, +    private static ParsedQuery innerParse(QueryShardContext context, QueryBuilder<?> queryBuilder) throws IOException, QueryShardException {]