[+++ b/docs/reference/indices/update-settings.asciidoc, +`index.auto_expand_replicas` (string)::, +    Set to a dash delimited lower and upper bound (e.g. `0-5`), +    or one may use `all` as the upper bound (e.g. `0-all`), or `false` to disable it., +++ b/docs/reference/indices/update-settings.asciidoc, +`index.auto_expand_replicas` (string)::, +    Set to a dash delimited lower and upper bound (e.g. `0-5`), +    or one may use `all` as the upper bound (e.g. `0-all`), or `false` to disable it., +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataUpdateSettingsService.java, +    // the value we recognize in the "max" position to mean all the nodes, +    private static final String ALL_NODES_VALUE = "all";, +, +        // we will want to know this for translating "all" to a number, +        final int dataNodeCount = event.state().nodes().dataNodes().size();, +                    final int min;, +                    final int max;, +, +                    final int dash = autoExpandReplicas.indexOf('-');, +                    if (-1 == dash) {, +                        logger.warn("Unexpected value [{}] for setting [{}]; it should be dash delimited",, +                                autoExpandReplicas, IndexMetaData.SETTING_AUTO_EXPAND_REPLICAS);, +                    final String sMin = autoExpandReplicas.substring(0, dash);, +                    try {, +                        min = Integer.parseInt(sMin);, +                    } catch (NumberFormatException e) {, +                        logger.warn("failed to set [{}], minimum value is not a number [{}]",, +                                e, IndexMetaData.SETTING_AUTO_EXPAND_REPLICAS, sMin);, +                        continue;, +                    }, +                    String sMax = autoExpandReplicas.substring(dash + 1);, +                    if (sMax.equals(ALL_NODES_VALUE)) {, +                        max = dataNodeCount - 1;, +                    } else {, +                        try {, +                            max = Integer.parseInt(sMax);, +                        } catch (NumberFormatException e) {, +                            logger.warn("failed to set [{}], maximum value is neither [{}] nor a number [{}]",, +                                    e, IndexMetaData.SETTING_AUTO_EXPAND_REPLICAS, ALL_NODES_VALUE, sMax);, +                            continue;, +                        }, +                    }, +                    int numberOfReplicas = dataNodeCount - 1;]