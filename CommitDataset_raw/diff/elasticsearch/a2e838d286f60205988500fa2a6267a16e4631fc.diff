[+++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +import org.apache.tools.ant.taskdefs.condition.Os, +        if (Os.isFamily(Os.FAMILY_WINDOWS)) {, +            // gradle/groovy does not properly escape the double quote for windows, +            script = script.replace('"', '\\"'), +        }, +        File jrunscriptPath = new File(javaHome, 'bin/jrunscript'), +        ExecResult result = project.exec {, +            executable = jrunscriptPath, +            errorOutput = output, +            ignoreExitValue = true, +        }, +        if (result.exitValue != 0) {, +            output.toString('UTF-8').eachLine { line -> project.logger.error(line) }, +            result.rethrowFailure()]