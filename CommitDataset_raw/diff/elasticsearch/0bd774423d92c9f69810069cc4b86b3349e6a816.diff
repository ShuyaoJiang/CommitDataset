[+++ b/src/test/java/org/elasticsearch/search/functionscore/RandomScoreFunctionTests.java, +            String preference = randomRealisticUnicodeOfLengthBetween(1, 10); // at least one char!!, +            // randomPreference should not start with '_' (reserved for known preference types (e.g. _shards, _primary), +            while (preference.startsWith("_")) {, +                preference = randomRealisticUnicodeOfLengthBetween(1, 10);, +            }, +++ b/src/test/java/org/elasticsearch/search/functionscore/RandomScoreFunctionTests.java, +            String preference = randomRealisticUnicodeOfLengthBetween(1, 10); // at least one char!!, +            // randomPreference should not start with '_' (reserved for known preference types (e.g. _shards, _primary), +            while (preference.startsWith("_")) {, +                preference = randomRealisticUnicodeOfLengthBetween(1, 10);, +            }, +++ b/src/test/java/org/elasticsearch/search/simple/SimpleSearchTests.java, +            String randomPreference = randomUnicodeOfLengthBetween(0, 4);, +            // randomPreference should not start with '_' (reserved for known preference types (e.g. _shards, _primary), +            while (randomPreference.startsWith("_")) {, +                randomPreference = randomUnicodeOfLengthBetween(0, 4);, +            }, +            SearchResponse searchResponse = client().prepareSearch().setQuery(QueryBuilders.matchAllQuery()).setPreference(randomPreference).get();]