[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequest.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequest.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java, +import org.elasticsearch.index.mapper.FieldMapper;, +        String field = null;, +        if (request.field() != null) {, +            FieldMapper fieldMapper = indexService.mapperService().smartNameFieldMapper(request.field());, +            if (fieldMapper != null) {, +                analyzer = fieldMapper.indexAnalyzer();, +                field = fieldMapper.names().indexName();, +        if (field == null) {, +            field = "_all";, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequest.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java, +import org.elasticsearch.index.mapper.FieldMapper;, +        String field = null;, +        if (request.field() != null) {, +            FieldMapper fieldMapper = indexService.mapperService().smartNameFieldMapper(request.field());, +            if (fieldMapper != null) {, +                analyzer = fieldMapper.indexAnalyzer();, +                field = fieldMapper.names().indexName();, +        if (field == null) {, +            field = "_all";, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/client/action/admin/indices/analyze/AnalyzeRequestBuilder.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequest.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java, +import org.elasticsearch.index.mapper.FieldMapper;, +        String field = null;, +        if (request.field() != null) {, +            FieldMapper fieldMapper = indexService.mapperService().smartNameFieldMapper(request.field());, +            if (fieldMapper != null) {, +                analyzer = fieldMapper.indexAnalyzer();, +                field = fieldMapper.names().indexName();, +        if (field == null) {, +            field = "_all";, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/client/action/admin/indices/analyze/AnalyzeRequestBuilder.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/rest/action/admin/indices/analyze/RestAnalyzeAction.java, +import org.elasticsearch.rest.BaseRestHandler;, +import org.elasticsearch.rest.RestChannel;, +import org.elasticsearch.rest.RestController;, +import org.elasticsearch.rest.RestRequest;, +import org.elasticsearch.rest.XContentRestResponse;, +import org.elasticsearch.rest.XContentThrowableRestResponse;, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequest.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java, +import org.elasticsearch.index.mapper.FieldMapper;, +        String field = null;, +        if (request.field() != null) {, +            FieldMapper fieldMapper = indexService.mapperService().smartNameFieldMapper(request.field());, +            if (fieldMapper != null) {, +                analyzer = fieldMapper.indexAnalyzer();, +                field = fieldMapper.names().indexName();, +        if (field == null) {, +            field = "_all";, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/client/action/admin/indices/analyze/AnalyzeRequestBuilder.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/rest/action/admin/indices/analyze/RestAnalyzeAction.java, +import org.elasticsearch.rest.BaseRestHandler;, +import org.elasticsearch.rest.RestChannel;, +import org.elasticsearch.rest.RestController;, +import org.elasticsearch.rest.RestRequest;, +import org.elasticsearch.rest.XContentRestResponse;, +import org.elasticsearch.rest.XContentThrowableRestResponse;, +++ b/modules/test/integration/src/test/java/org/elasticsearch/test/integration/indices/analyze/AnalyzeActionTests.java, +            requestBuilder.field("document.simple");]