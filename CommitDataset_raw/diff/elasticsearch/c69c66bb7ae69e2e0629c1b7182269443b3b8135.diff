[+++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java, +            if (actualLst.length == 0 && !indicesOptions.allowNoIndices()) {, +++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java, +            if (actualLst.length == 0 && !indicesOptions.allowNoIndices()) {, +++ b/src/test/java/org/elasticsearch/cluster/metadata/MetaDataTests.java, +    public void testIndexOptions_allowUnavailableExpandOpenDisallowEmpty() {, +        try {, +            md.concreteIndices(new String[]{"bar"}, options);, +            fail();, +        } catch(IndexMissingException e) {, +            assertThat(e.index().name(), equalTo("bar"));, +        }, +        } catch (IndexMissingException e) {, +            assertThat(e.index().name(), equalTo("baz*"));, +        }, +        } catch (IndexMissingException e) {, +            assertThat(e.index().name(), equalTo("baz*"));, +        }]