[+++ b/core/src/test/java/org/elasticsearch/index/query/InnerHitBuilderTests.java, +        // Random script fields deduped on their field name., +        Map<String, SearchSourceBuilder.ScriptField> scriptFields = new HashMap<>();, +        for (SearchSourceBuilder.ScriptField field: randomListStuff(16, InnerHitBuilderTests::randomScript)) {, +            scriptFields.put(field.fieldName(), field);, +        }, +        innerHits.setScriptFields(new HashSet<>(scriptFields.values()));]