[+++ b/distribution/bwc/build.gradle, +  task findUpstream(type: LoggedExec) {, +  task checkoutBwcBranch(type: LoggedExec) {, +    String refspec = System.getProperty("tests.bwc.refspec", buildMetadata.get(buildMetadataKey, "upstream/${bwcBranch}")), +    doFirst {, +      println "Checking out elasticsearch ${refspec} for branch ${bwcBranch}", +    }, +      String commit = output.toString('UTF-8'), +      buildMetadataFile.setText("${buildMetadataKey}=${commit}", 'UTF-8'), +      println "Checked out elasticsearch commit ${commit}"]