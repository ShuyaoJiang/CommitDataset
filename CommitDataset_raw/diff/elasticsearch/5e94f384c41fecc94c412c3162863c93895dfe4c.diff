[+++ b/plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceImpl.java, +++ b/plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceImpl.java, +++ b/plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceMetadataService.java, +++ b/plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceImpl.java, +++ b/plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceMetadataService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java, +++ b/plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceImpl.java, +++ b/plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceMetadataService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/coordination/Coordinator.java, +++ b/plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceImpl.java, +++ b/plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceMetadataService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/coordination/Coordinator.java, +++ b/server/src/main/java/org/elasticsearch/cluster/routing/DelayedAllocationService.java, +    public DelayedAllocationService(ThreadPool threadPool, ClusterService clusterService,, +++ b/plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceImpl.java, +++ b/plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceMetadataService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/coordination/Coordinator.java, +++ b/server/src/main/java/org/elasticsearch/cluster/routing/DelayedAllocationService.java, +    public DelayedAllocationService(ThreadPool threadPool, ClusterService clusterService,, +++ b/server/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java, +    public RoutingService(ClusterService clusterService, AllocationService allocationService) {, +++ b/plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceImpl.java, +++ b/plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceMetadataService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/coordination/Coordinator.java, +++ b/server/src/main/java/org/elasticsearch/cluster/routing/DelayedAllocationService.java, +    public DelayedAllocationService(ThreadPool threadPool, ClusterService clusterService,, +++ b/server/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java, +    public RoutingService(ClusterService clusterService, AllocationService allocationService) {, +++ b/server/src/main/java/org/elasticsearch/cluster/service/ClusterApplierService.java, +++ b/plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceImpl.java, +++ b/plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceMetadataService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/coordination/Coordinator.java, +++ b/server/src/main/java/org/elasticsearch/cluster/routing/DelayedAllocationService.java, +    public DelayedAllocationService(ThreadPool threadPool, ClusterService clusterService,, +++ b/server/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java, +    public RoutingService(ClusterService clusterService, AllocationService allocationService) {, +++ b/server/src/main/java/org/elasticsearch/cluster/service/ClusterApplierService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/service/ClusterService.java, +++ b/plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceImpl.java, +++ b/plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceMetadataService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/coordination/Coordinator.java, +++ b/server/src/main/java/org/elasticsearch/cluster/routing/DelayedAllocationService.java, +    public DelayedAllocationService(ThreadPool threadPool, ClusterService clusterService,, +++ b/server/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java, +    public RoutingService(ClusterService clusterService, AllocationService allocationService) {, +++ b/server/src/main/java/org/elasticsearch/cluster/service/ClusterApplierService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/service/ClusterService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/service/MasterService.java, +++ b/plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceImpl.java, +++ b/plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceMetadataService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/coordination/Coordinator.java, +++ b/server/src/main/java/org/elasticsearch/cluster/routing/DelayedAllocationService.java, +    public DelayedAllocationService(ThreadPool threadPool, ClusterService clusterService,, +++ b/server/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java, +    public RoutingService(ClusterService clusterService, AllocationService allocationService) {, +++ b/server/src/main/java/org/elasticsearch/cluster/service/ClusterApplierService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/service/ClusterService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/service/MasterService.java, +++ b/server/src/main/java/org/elasticsearch/common/component/AbstractLifecycleComponent.java, +    protected AbstractLifecycleComponent() {}, +, +    @Deprecated, +++ b/plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceImpl.java, +++ b/plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceMetadataService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/coordination/Coordinator.java, +++ b/server/src/main/java/org/elasticsearch/cluster/routing/DelayedAllocationService.java, +    public DelayedAllocationService(ThreadPool threadPool, ClusterService clusterService,, +++ b/server/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java, +    public RoutingService(ClusterService clusterService, AllocationService allocationService) {, +++ b/server/src/main/java/org/elasticsearch/cluster/service/ClusterApplierService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/service/ClusterService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/service/MasterService.java, +++ b/server/src/main/java/org/elasticsearch/common/component/AbstractLifecycleComponent.java, +    protected AbstractLifecycleComponent() {}, +, +    @Deprecated, +++ b/server/src/main/java/org/elasticsearch/discovery/UnicastConfiguredHostsResolver.java, +++ b/plugins/discovery-azure-classic/src/main/java/org/elasticsearch/cloud/azure/classic/management/AzureComputeServiceImpl.java, +++ b/plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceMetadataService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/NodeConnectionsService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/coordination/Coordinator.java, +++ b/server/src/main/java/org/elasticsearch/cluster/routing/DelayedAllocationService.java, +    public DelayedAllocationService(ThreadPool threadPool, ClusterService clusterService,, +++ b/server/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java, +    public RoutingService(ClusterService clusterService, AllocationService allocationService) {, +++ b/server/src/main/java/org/elasticsearch/cluster/service/ClusterApplierService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/service/ClusterService.java, +++ b/server/src/main/java/org/elasticsearch/cluster/service/MasterService.java, +++ b/server/src/main/java/org/elasticsearch/common/component/AbstractLifecycleComponent.java, +    protected AbstractLifecycleComponent() {}, +, +    @Deprecated]