[+++ b/src/test/java/org/elasticsearch/action/IndicesRequestTests.java, +        private final Set<String> actions = new HashSet<>();, +        private final Map<String, List<TransportRequest>> requests = new HashMap<>();, +        synchronized List<TransportRequest> consumeRequests(String action) {, +        synchronized void interceptTransportActions(String... actions) {, +        synchronized void clearInterceptedActions() {, +                synchronized (InterceptingTransportService.this) {, +                        List<TransportRequest> requestList = requests.get(action);, +                        if (requestList == null) {, +                            requestList = new ArrayList<>();, +                            requests.put(action, requestList);, +                        } else {, +                            requestList.add(request);, +                        }]