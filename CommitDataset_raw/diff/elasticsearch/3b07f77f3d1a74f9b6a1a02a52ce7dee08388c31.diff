[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java, +                boolean createdIndex = false;, +                        createdIndex = true;, +                } finally {, +                    if (createdIndex) {, +                        indicesService.cleanIndex(index, "created for mapping processing");, +                    }, +                boolean createdIndex = false;, +                        createdIndex = true;, +                } finally {, +                    if (createdIndex) {, +                        indicesService.cleanIndex(index, "created for mapping processing");, +                    }, +                List<String> indicesToClose = Lists.newArrayList();, +                        indicesToClose.add(indexMetaData.index());, +                } finally {, +                    for (String index : indicesToClose) {, +                        indicesService.cleanIndex(index, "created for mapping processing");, +                    }]