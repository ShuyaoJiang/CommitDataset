[+++ b/build.gradle, +buildscript {, +  repositories {, +    mavenCentral(), +  }, +  dependencies {, +    classpath 'com.bmuschko:gradle-nexus-plugin:2.3.1', +  }, +}, +, +        failOnVersionConflict(), +, +++ b/build.gradle, +buildscript {, +  repositories {, +    mavenCentral(), +  }, +  dependencies {, +    classpath 'com.bmuschko:gradle-nexus-plugin:2.3.1', +  }, +}, +, +        failOnVersionConflict(), +, +++ b/buildSrc/build.gradle, +++ b/build.gradle, +buildscript {, +  repositories {, +    mavenCentral(), +  }, +  dependencies {, +    classpath 'com.bmuschko:gradle-nexus-plugin:2.3.1', +  }, +}, +, +        failOnVersionConflict(), +, +++ b/buildSrc/build.gradle, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +import org.gradle.api.artifacts.ProjectDependency, +import org.gradle.api.GradleException, +import org.gradle.api.JavaVersion, +import org.gradle.api.Plugin, +import org.gradle.api.Project, +import org.gradle.api.Task, +        project.configurations.compile.dependencies.all { dep ->, +        project.configurations.testCompile.dependencies.all { dep ->, +            if (!(dep instanceof ProjectDependency) && dep.getGroup() != 'org.elasticsearch') {, +                dep.transitive = false, +++ b/build.gradle, +buildscript {, +  repositories {, +    mavenCentral(), +  }, +  dependencies {, +    classpath 'com.bmuschko:gradle-nexus-plugin:2.3.1', +  }, +}, +, +        failOnVersionConflict(), +, +++ b/buildSrc/build.gradle, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +import org.gradle.api.artifacts.ProjectDependency, +import org.gradle.api.GradleException, +import org.gradle.api.JavaVersion, +import org.gradle.api.Plugin, +import org.gradle.api.Project, +import org.gradle.api.Task, +        project.configurations.compile.dependencies.all { dep ->, +        project.configurations.testCompile.dependencies.all { dep ->, +            if (!(dep instanceof ProjectDependency) && dep.getGroup() != 'org.elasticsearch') {, +                dep.transitive = false, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +        project.pluginManager.apply(ProvidedBasePlugin), +++ b/build.gradle, +buildscript {, +  repositories {, +    mavenCentral(), +  }, +  dependencies {, +    classpath 'com.bmuschko:gradle-nexus-plugin:2.3.1', +  }, +}, +, +        failOnVersionConflict(), +, +++ b/buildSrc/build.gradle, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +import org.gradle.api.artifacts.ProjectDependency, +import org.gradle.api.GradleException, +import org.gradle.api.JavaVersion, +import org.gradle.api.Plugin, +import org.gradle.api.Project, +import org.gradle.api.Task, +        project.configurations.compile.dependencies.all { dep ->, +        project.configurations.testCompile.dependencies.all { dep ->, +            if (!(dep instanceof ProjectDependency) && dep.getGroup() != 'org.elasticsearch') {, +                dep.transitive = false, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy]