[+++ b/src/test/java/org/elasticsearch/discovery/DiscoveryWithNetworkFailuresTests.java, +import org.elasticsearch.test.junit.annotations.TestLogging;, +import java.util.concurrent.TimeUnit;, +@ClusterScope(scope= Scope.TEST, numDataNodes =0), +    @TestLogging("discovery.zen:TRACE"), +                .put("discovery.type", "zen") // <-- To override the local setting if set externally, +                .put("discovery.zen.minimum_master_nodes", 2), +                .put("discovery.zen.rejoin_on_master_gone", true), +, +, +        for (String node : nodes) {, +        for (String node : nodes) {, +            boolean applied = awaitBusy(new Predicate<Object>() {, +            }, 1, TimeUnit.MINUTES);, +            assertThat(applied, is(true));, +        for (String node : nodes) {]