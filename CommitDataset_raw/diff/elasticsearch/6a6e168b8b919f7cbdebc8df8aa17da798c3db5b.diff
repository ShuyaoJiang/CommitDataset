[+++ b/docs/plugins/discovery-gce.asciidoc, +The following gce settings (prefixed with `cloud.gce`) are supported:, +, + `retry`::, +, +     If set to `true`, client will use, +     https://developers.google.com/api-client-library/java/google-http-java-client/backoff[ExponentialBackOff], +     policy to retry the failed http request. Defaults to `true`., +, + `max_wait`::, +, +     The maximum elapsed time in milliseconds after the client instantiating retry. If the time elapsed goes past the, +     `max_wait`, client stops to retry. Defaults to 15 minutes (900000 milliseconds)., +, +++ b/docs/plugins/discovery-gce.asciidoc, +The following gce settings (prefixed with `cloud.gce`) are supported:, +, + `retry`::, +, +     If set to `true`, client will use, +     https://developers.google.com/api-client-library/java/google-http-java-client/backoff[ExponentialBackOff], +     policy to retry the failed http request. Defaults to `true`., +, + `max_wait`::, +, +     The maximum elapsed time in milliseconds after the client instantiating retry. If the time elapsed goes past the, +     `max_wait`, client stops to retry. Defaults to 15 minutes (900000 milliseconds)., +, +++ b/plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceComputeService.java, +, +        public static final String RETRY = "cloud.gce.retry";, +        public static final String MAXWAIT = "cloud.gce.max_wait";, +++ b/docs/plugins/discovery-gce.asciidoc, +The following gce settings (prefixed with `cloud.gce`) are supported:, +, + `retry`::, +, +     If set to `true`, client will use, +     https://developers.google.com/api-client-library/java/google-http-java-client/backoff[ExponentialBackOff], +     policy to retry the failed http request. Defaults to `true`., +, + `max_wait`::, +, +     The maximum elapsed time in milliseconds after the client instantiating retry. If the time elapsed goes past the, +     `max_wait`, client stops to retry. Defaults to 15 minutes (900000 milliseconds)., +, +++ b/plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceComputeService.java, +, +        public static final String RETRY = "cloud.gce.retry";, +        public static final String MAXWAIT = "cloud.gce.max_wait";, +++ b/plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceComputeServiceImpl.java, +import org.elasticsearch.discovery.gce.RetryHttpInitializerWrapper;, +            boolean ifRetry = settings.getAsBoolean(Fields.RETRY, true);, +            Compute.Builder builder = new Compute.Builder(getGceHttpTransport(), gceJsonFactory, null), +                    .setApplicationName(Fields.VERSION);, +, +            if (ifRetry) {, +                int maxWait = settings.getAsInt(Fields.MAXWAIT, -1);, +                RetryHttpInitializerWrapper retryHttpInitializerWrapper;, +, +                if (maxWait > 0) {, +                    retryHttpInitializerWrapper = new RetryHttpInitializerWrapper(credential, maxWait);, +                } else {, +                    retryHttpInitializerWrapper = new RetryHttpInitializerWrapper(credential);, +                }, +                builder.setHttpRequestInitializer(retryHttpInitializerWrapper);, +, +            } else {, +                builder.setHttpRequestInitializer(credential);, +            }, +, +            this.client = builder.build();, +++ b/docs/plugins/discovery-gce.asciidoc, +The following gce settings (prefixed with `cloud.gce`) are supported:, +, + `retry`::, +, +     If set to `true`, client will use, +     https://developers.google.com/api-client-library/java/google-http-java-client/backoff[ExponentialBackOff], +     policy to retry the failed http request. Defaults to `true`., +, + `max_wait`::, +, +     The maximum elapsed time in milliseconds after the client instantiating retry. If the time elapsed goes past the, +     `max_wait`, client stops to retry. Defaults to 15 minutes (900000 milliseconds)., +, +++ b/plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceComputeService.java, +, +        public static final String RETRY = "cloud.gce.retry";, +        public static final String MAXWAIT = "cloud.gce.max_wait";, +++ b/plugins/discovery-gce/src/main/java/org/elasticsearch/cloud/gce/GceComputeServiceImpl.java, +import org.elasticsearch.discovery.gce.RetryHttpInitializerWrapper;, +            boolean ifRetry = settings.getAsBoolean(Fields.RETRY, true);, +            Compute.Builder builder = new Compute.Builder(getGceHttpTransport(), gceJsonFactory, null), +                    .setApplicationName(Fields.VERSION);, +, +            if (ifRetry) {, +                int maxWait = settings.getAsInt(Fields.MAXWAIT, -1);, +                RetryHttpInitializerWrapper retryHttpInitializerWrapper;, +]