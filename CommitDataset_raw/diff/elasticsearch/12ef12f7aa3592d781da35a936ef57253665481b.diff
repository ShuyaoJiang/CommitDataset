[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/shard/recovery/RecoveryTarget.java, +import org.elasticsearch.index.service.IndexService;, +        IndexService indexService = indicesService.indexService(request.shardId().index().name());, +        if (indexService == null) {, +            listener.onIgnoreRecovery(false, "index missing, stop recovery");, +            return;, +        }, +        final InternalIndexShard shard = (InternalIndexShard) indexService.shard(request.shardId().id());, +        if (shard == null) {, +            listener.onIgnoreRecovery(false, "shard missing, stop recovery");, +            return;, +        }]