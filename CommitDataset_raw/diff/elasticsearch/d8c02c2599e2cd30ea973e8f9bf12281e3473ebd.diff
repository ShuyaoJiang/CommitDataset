[+++ b/src/main/java/org/elasticsearch/search/action/SearchServiceTransportAction.java, +    static final class FreeContextResponseHandler implements TransportResponseHandler<SearchFreeContextResponse> {, +        private final ActionListener<Boolean> listener;, +        FreeContextResponseHandler(final ActionListener<Boolean> listener) {, +            this.listener = listener;, +        }, +, +        @Override, +        public SearchFreeContextResponse newInstance() {, +            return new SearchFreeContextResponse();, +        }, +, +        @Override, +        public void handleResponse(SearchFreeContextResponse response) {, +            listener.onResponse(response.freed);, +            listener.onFailure(exp);, +        @Override, +        public String executor() {, +            return ThreadPool.Names.SAME;, +        }, +    }, +    //, +    private final FreeContextResponseHandler freeContextResponseHandler = new FreeContextResponseHandler(new ActionListener<Boolean>() {, +        @Override, +        public void onResponse(Boolean aBoolean) {}, +, +        @Override, +        public void onFailure(Throwable exp) {, +            logger.warn("Failed to send release search context", exp);, +        }, +    });, +            transportService.sendRequest(node, SearchFreeContextTransportHandler.ACTION, new SearchFreeContextRequest(request, contextId), new FreeContextResponseHandler(actionListener));, +    static class SearchFreeContextRequest extends TransportRequest {, +    static class SearchFreeContextResponse extends TransportResponse {, +    static class ClearScrollContextsRequest extends TransportRequest {]