[+++ b/core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java, +                        && field.fieldType().indexOptions() != IndexOptions.NONE, +                        && Version.indexCreated(context.indexSettings()).before(Version.V_5_0_0)) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java, +                        && field.fieldType().indexOptions() != IndexOptions.NONE, +                        && Version.indexCreated(context.indexSettings()).before(Version.V_5_0_0)) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/MappedFieldType.java, +import org.apache.lucene.search.BoostQuery;, +import org.elasticsearch.Version;, +        TermQuery query = new TermQuery(createTerm(value));, +        if (boost == 1f ||, +            (context != null && context.indexVersionCreated().before(Version.V_5_0_0))) {, +            return query;, +        }, +        return new BoostQuery(query, boost);, +++ b/core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java, +                        && field.fieldType().indexOptions() != IndexOptions.NONE, +                        && Version.indexCreated(context.indexSettings()).before(Version.V_5_0_0)) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/MappedFieldType.java, +import org.apache.lucene.search.BoostQuery;, +import org.elasticsearch.Version;, +        TermQuery query = new TermQuery(createTerm(value));, +        if (boost == 1f ||, +            (context != null && context.indexVersionCreated().before(Version.V_5_0_0))) {, +            return query;, +        }, +        return new BoostQuery(query, boost);, +++ b/core/src/main/java/org/elasticsearch/index/mapper/ParseContext.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java, +                        && field.fieldType().indexOptions() != IndexOptions.NONE, +                        && Version.indexCreated(context.indexSettings()).before(Version.V_5_0_0)) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/MappedFieldType.java, +import org.apache.lucene.search.BoostQuery;, +import org.elasticsearch.Version;, +        TermQuery query = new TermQuery(createTerm(value));, +        if (boost == 1f ||, +            (context != null && context.indexVersionCreated().before(Version.V_5_0_0))) {, +            return query;, +        }, +        return new BoostQuery(query, boost);, +++ b/core/src/main/java/org/elasticsearch/index/mapper/ParseContext.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java, +            if (boost != 1f && Version.indexCreated(context.indexSettings()).before(Version.V_5_0_0)) {, +            }, +++ b/core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java, +                        && field.fieldType().indexOptions() != IndexOptions.NONE, +                        && Version.indexCreated(context.indexSettings()).before(Version.V_5_0_0)) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/MappedFieldType.java, +import org.apache.lucene.search.BoostQuery;, +import org.elasticsearch.Version;, +        TermQuery query = new TermQuery(createTerm(value));, +        if (boost == 1f ||, +            (context != null && context.indexVersionCreated().before(Version.V_5_0_0))) {, +            return query;, +        }, +        return new BoostQuery(query, boost);, +++ b/core/src/main/java/org/elasticsearch/index/mapper/ParseContext.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java, +            if (boost != 1f && Version.indexCreated(context.indexSettings()).before(Version.V_5_0_0)) {, +            }, +++ b/core/src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java, +                if (boost != 1f && Version.indexCreated(context.indexSettings()).before(Version.V_5_0_0)) {, +                }, +++ b/core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java, +                        && field.fieldType().indexOptions() != IndexOptions.NONE, +                        && Version.indexCreated(context.indexSettings()).before(Version.V_5_0_0)) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/MappedFieldType.java, +import org.apache.lucene.search.BoostQuery;, +import org.elasticsearch.Version;, +        TermQuery query = new TermQuery(createTerm(value));, +        if (boost == 1f ||, +            (context != null && context.indexVersionCreated().before(Version.V_5_0_0))) {, +            return query;, +        }, +        return new BoostQuery(query, boost);, +++ b/core/src/main/java/org/elasticsearch/index/mapper/ParseContext.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/core/ByteFieldMapper.java, +            if (boost != 1f && Version.indexCreated(context.indexSettings()).before(Version.V_5_0_0)) {, +            }, +++ b/core/src/main/java/org/elasticsearch/index/mapper/core/DateFieldMapper.java, +                if (boost != 1f && Version.indexCreated(context.indexSettings()).before(Version.V_5_0_0)) {, +                }, +++ b/core/src/main/java/org/elasticsearch/index/mapper/core/DoubleFieldMapper.java, +            if (boost != 1f && Version.indexCreated(context.indexSettings()).before(Version.V_5_0_0)) {, +            }, +++ b/core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java, +                        && field.fieldType().indexOptions() != IndexOptions.NONE, +                        && Version.indexCreated(context.indexSettings()).before(Version.V_5_0_0)) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/MappedFieldType.java, +import org.apache.lucene.search.BoostQuery;, +import org.elasticsearch.Version;, +        TermQuery query = new TermQuery(createTerm(value));]