[+++ b/core/src/main/java/org/elasticsearch/action/main/MainResponse.java, +    public MainResponse(String nodeName, Version version, ClusterName clusterName, Build build, boolean available) {, +++ b/core/src/main/java/org/elasticsearch/action/main/MainResponse.java, +    public MainResponse(String nodeName, Version version, ClusterName clusterName, Build build, boolean available) {, +++ b/core/src/main/java/org/elasticsearch/action/main/TransportMainAction.java, +            new MainResponse(Node.NODE_NAME_SETTING.get(settings), Version.CURRENT, clusterState.getClusterName(), Build.CURRENT,, +                available));, +++ b/core/src/main/java/org/elasticsearch/action/main/MainResponse.java, +    public MainResponse(String nodeName, Version version, ClusterName clusterName, Build build, boolean available) {, +++ b/core/src/main/java/org/elasticsearch/action/main/TransportMainAction.java, +            new MainResponse(Node.NODE_NAME_SETTING.get(settings), Version.CURRENT, clusterState.getClusterName(), Build.CURRENT,, +                available));, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +            final Map<String, String> esSettings) throws BootstrapException, NodeValidationException {, +++ b/core/src/main/java/org/elasticsearch/action/main/MainResponse.java, +    public MainResponse(String nodeName, Version version, ClusterName clusterName, Build build, boolean available) {, +++ b/core/src/main/java/org/elasticsearch/action/main/TransportMainAction.java, +            new MainResponse(Node.NODE_NAME_SETTING.get(settings), Version.CURRENT, clusterState.getClusterName(), Build.CURRENT,, +                available));, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +            final Map<String, String> esSettings) throws BootstrapException, NodeValidationException {, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java, +            throws  NodeValidationException {, +     * NOTE: If this method is renamed and/or moved, make sure to update service.bat!, +++ b/core/src/main/java/org/elasticsearch/action/main/MainResponse.java, +    public MainResponse(String nodeName, Version version, ClusterName clusterName, Build build, boolean available) {, +++ b/core/src/main/java/org/elasticsearch/action/main/TransportMainAction.java, +            new MainResponse(Node.NODE_NAME_SETTING.get(settings), Version.CURRENT, clusterState.getClusterName(), Build.CURRENT,, +                available));, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +            final Map<String, String> esSettings) throws BootstrapException, NodeValidationException {, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java, +            throws  NodeValidationException {, +     * NOTE: If this method is renamed and/or moved, make sure to update service.bat!, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java, +        //norelease - this can be removed?, +        Integer number_of_primaries = settings.getAsInt(IndexMetaData.SETTING_NUMBER_OF_SHARDS, null);, +        Integer number_of_replicas = settings.getAsInt(IndexMetaData.SETTING_NUMBER_OF_REPLICAS, null);, +        if (number_of_primaries != null && number_of_primaries <= 0) {, +            validationErrors.add("index must have 1 or more primary shards");, +        }, +        if (number_of_replicas != null && number_of_replicas < 0) {, +            validationErrors.add("index must have 0 or more replica shards");, +        }, +++ b/core/src/main/java/org/elasticsearch/action/main/MainResponse.java, +    public MainResponse(String nodeName, Version version, ClusterName clusterName, Build build, boolean available) {, +++ b/core/src/main/java/org/elasticsearch/action/main/TransportMainAction.java, +            new MainResponse(Node.NODE_NAME_SETTING.get(settings), Version.CURRENT, clusterState.getClusterName(), Build.CURRENT,, +                available));, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +            final Map<String, String> esSettings) throws BootstrapException, NodeValidationException {, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java, +            throws  NodeValidationException {, +     * NOTE: If this method is renamed and/or moved, make sure to update service.bat!, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java, +        //norelease - this can be removed?, +        Integer number_of_primaries = settings.getAsInt(IndexMetaData.SETTING_NUMBER_OF_SHARDS, null);, +        Integer number_of_replicas = settings.getAsInt(IndexMetaData.SETTING_NUMBER_OF_REPLICAS, null);, +        if (number_of_primaries != null && number_of_primaries <= 0) {, +            validationErrors.add("index must have 1 or more primary shards");, +        }, +        if (number_of_replicas != null && number_of_replicas < 0) {, +            validationErrors.add("index must have 0 or more replica shards");, +        }, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexTemplateService.java, +    public MetaDataIndexTemplateService(Settings settings, ClusterService clusterService, MetaDataCreateIndexService metaDataCreateIndexService, AliasValidator aliasValidator, IndicesService indicesService, NodeServicesProvider nodeServicesProvider) {, +++ b/core/src/main/java/org/elasticsearch/action/main/MainResponse.java, +    public MainResponse(String nodeName, Version version, ClusterName clusterName, Build build, boolean available) {, +++ b/core/src/main/java/org/elasticsearch/action/main/TransportMainAction.java, +            new MainResponse(Node.NODE_NAME_SETTING.get(settings), Version.CURRENT, clusterState.getClusterName(), Build.CURRENT,, +                available));, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +            final Map<String, String> esSettings) throws BootstrapException, NodeValidationException {, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java, +            throws  NodeValidationException {, +     * NOTE: If this method is renamed and/or moved, make sure to update service.bat!, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java, +        //norelease - this can be removed?, +        Integer number_of_primaries = settings.getAsInt(IndexMetaData.SETTING_NUMBER_OF_SHARDS, null);, +        Integer number_of_replicas = settings.getAsInt(IndexMetaData.SETTING_NUMBER_OF_REPLICAS, null);, +        if (number_of_primaries != null && number_of_primaries <= 0) {, +            validationErrors.add("index must have 1 or more primary shards");, +        }, +        if (number_of_replicas != null && number_of_replicas < 0) {, +            validationErrors.add("index must have 0 or more replica shards");, +        }, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataIndexTemplateService.java, +    public MetaDataIndexTemplateService(Settings settings, ClusterService clusterService, MetaDataCreateIndexService metaDataCreateIndexService, AliasValidator aliasValidator, IndicesService indicesService, NodeServicesProvider nodeServicesProvider) {, +++ b/core/src/main/java/org/elasticsearch/common/logging/LogConfigurator.java, +    public static void configure(final Environment environment, final boolean resolveConfig) throws IOException {, +++ b/core/src/main/java/org/elasticsearch/action/main/MainResponse.java, +    public MainResponse(String nodeName, Version version, ClusterName clusterName, Build build, boolean available) {, +++ b/core/src/main/java/org/elasticsearch/action/main/TransportMainAction.java, +            new MainResponse(Node.NODE_NAME_SETTING.get(settings), Version.CURRENT, clusterState.getClusterName(), Build.CURRENT,, +                available));, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +            final Map<String, String> esSettings) throws BootstrapException, NodeValidationException {, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java, +            throws  NodeValidationException {, +     * NOTE: If this method is renamed and/or moved, make sure to update service.bat!]