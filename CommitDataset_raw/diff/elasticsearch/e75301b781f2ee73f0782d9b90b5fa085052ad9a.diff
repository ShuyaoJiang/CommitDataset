[+++ b/src/main/java/org/elasticsearch/common/xcontent/XContentParser.java, +import org.apache.lucene.util.BytesRef;, +, +    BytesRef bytesOrNull() throws IOException;, +    BytesRef bytes() throws IOException;, +++ b/src/main/java/org/elasticsearch/common/xcontent/XContentParser.java, +import org.apache.lucene.util.BytesRef;, +, +    BytesRef bytesOrNull() throws IOException;, +    BytesRef bytes() throws IOException;, +++ b/src/main/java/org/elasticsearch/common/xcontent/support/AbstractXContentParser.java, +import org.apache.lucene.util.UnicodeUtil;, +    public BytesRef bytesOrNull() throws IOException {, +        return bytes();, +    public BytesRef bytes() throws IOException {, +        BytesRef bytes = new BytesRef();, +        UnicodeUtil.UTF16toUTF8(textCharacters(), textOffset(), textLength(), bytes);, +        return bytes;, +++ b/src/main/java/org/elasticsearch/common/xcontent/XContentParser.java, +import org.apache.lucene.util.BytesRef;, +, +    BytesRef bytesOrNull() throws IOException;, +    BytesRef bytes() throws IOException;, +++ b/src/main/java/org/elasticsearch/common/xcontent/support/AbstractXContentParser.java, +import org.apache.lucene.util.UnicodeUtil;, +    public BytesRef bytesOrNull() throws IOException {, +        return bytes();, +    public BytesRef bytes() throws IOException {, +        BytesRef bytes = new BytesRef();, +        UnicodeUtil.UTF16toUTF8(textCharacters(), textOffset(), textLength(), bytes);, +        return bytes;, +++ b/src/main/java/org/elasticsearch/index/query/RangeFilterParser.java, +                            from = parser.bytesOrNull();, +                            to = parser.bytesOrNull();, +                            from = parser.bytesOrNull();, +                            from = parser.bytesOrNull();, +                            to = parser.bytesOrNull();, +                            to = parser.bytesOrNull();, +++ b/src/main/java/org/elasticsearch/common/xcontent/XContentParser.java, +import org.apache.lucene.util.BytesRef;, +, +    BytesRef bytesOrNull() throws IOException;, +    BytesRef bytes() throws IOException;, +++ b/src/main/java/org/elasticsearch/common/xcontent/support/AbstractXContentParser.java, +import org.apache.lucene.util.UnicodeUtil;, +    public BytesRef bytesOrNull() throws IOException {, +        return bytes();, +    public BytesRef bytes() throws IOException {, +        BytesRef bytes = new BytesRef();, +        UnicodeUtil.UTF16toUTF8(textCharacters(), textOffset(), textLength(), bytes);, +        return bytes;, +++ b/src/main/java/org/elasticsearch/index/query/RangeFilterParser.java, +                            from = parser.bytesOrNull();, +                            to = parser.bytesOrNull();, +                            from = parser.bytesOrNull();, +                            from = parser.bytesOrNull();, +                            to = parser.bytesOrNull();, +                            to = parser.bytesOrNull();, +++ b/src/main/java/org/elasticsearch/index/query/RangeQueryParser.java, +                    from = parser.bytesOrNull();, +                    to = parser.bytesOrNull();, +                    from = parser.bytesOrNull();, +                    from = parser.bytesOrNull();, +                    to = parser.bytesOrNull();, +                    to = parser.bytesOrNull();, +++ b/src/main/java/org/elasticsearch/common/xcontent/XContentParser.java, +import org.apache.lucene.util.BytesRef;, +, +    BytesRef bytesOrNull() throws IOException;, +    BytesRef bytes() throws IOException;, +++ b/src/main/java/org/elasticsearch/common/xcontent/support/AbstractXContentParser.java, +import org.apache.lucene.util.UnicodeUtil;, +    public BytesRef bytesOrNull() throws IOException {, +        return bytes();, +    public BytesRef bytes() throws IOException {, +        BytesRef bytes = new BytesRef();, +        UnicodeUtil.UTF16toUTF8(textCharacters(), textOffset(), textLength(), bytes);, +        return bytes;, +++ b/src/main/java/org/elasticsearch/index/query/RangeFilterParser.java, +                            from = parser.bytesOrNull();, +                            to = parser.bytesOrNull();, +                            from = parser.bytesOrNull();, +                            from = parser.bytesOrNull();, +                            to = parser.bytesOrNull();, +                            to = parser.bytesOrNull();, +++ b/src/main/java/org/elasticsearch/index/query/RangeQueryParser.java, +                    from = parser.bytesOrNull();, +                    to = parser.bytesOrNull();, +                    from = parser.bytesOrNull();, +                    from = parser.bytesOrNull();, +                    to = parser.bytesOrNull();, +                    to = parser.bytesOrNull();, +++ b/src/main/java/org/elasticsearch/index/query/TypeFilterParser.java, +        BytesRef type = parser.bytes();]