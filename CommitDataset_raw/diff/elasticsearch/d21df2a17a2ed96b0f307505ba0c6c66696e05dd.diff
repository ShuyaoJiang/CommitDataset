[+++ b/server/src/main/java/org/elasticsearch/action/update/UpdateHelper.java, +                    .source(updatedSourceAsMap, updateSourceContentType), +                    .setIfSeqNo(getResult.getSeqNo()).setIfPrimaryTerm(getResult.getPrimaryTerm()), +                        .source(updatedSourceAsMap, updateSourceContentType), +                        .setIfSeqNo(getResult.getSeqNo()).setIfPrimaryTerm(getResult.getPrimaryTerm()), +                        .setIfSeqNo(getResult.getSeqNo()).setIfPrimaryTerm(getResult.getPrimaryTerm()), +                        .waitForActiveShards(request.waitForActiveShards()), +++ b/server/src/main/java/org/elasticsearch/action/update/UpdateHelper.java, +                    .source(updatedSourceAsMap, updateSourceContentType), +                    .setIfSeqNo(getResult.getSeqNo()).setIfPrimaryTerm(getResult.getPrimaryTerm()), +                        .source(updatedSourceAsMap, updateSourceContentType), +                        .setIfSeqNo(getResult.getSeqNo()).setIfPrimaryTerm(getResult.getPrimaryTerm()), +                        .setIfSeqNo(getResult.getSeqNo()).setIfPrimaryTerm(getResult.getPrimaryTerm()), +                        .waitForActiveShards(request.waitForActiveShards()), +++ b/server/src/test/java/org/elasticsearch/action/update/UpdateRequestTests.java]