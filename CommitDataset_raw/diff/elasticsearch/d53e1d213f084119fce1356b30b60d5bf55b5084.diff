[+++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +import org.gradle.api.artifacts.ModuleVersionIdentifier, +     *     <li>Remove transitive dependencies. We currently exclude all artifacts explicitly instead of using wildcards, +     *         as Ivy incorrectly translates POMs with * excludes to Ivy XML with * excludes which results in the main artifact, +     *         being excluded as well (see https://issues.apache.org/jira/browse/IVY-1531). Note that Gradle 2.14+ automatically, +     *         translates non-transitive dependencies to * excludes. We should revisit this when upgrading Gradle.</li>, +     *     <li>Set compile time deps back to compile from runtime (known issue with maven-publish plugin)</li>, +        // TODO: revisit this when upgrading to Gradle 2.14+, see Javadoc comment above, +                // we now know we have something to exclude, so add exclusions for all artifacts except the main one, +                Node exclusions = depNode.appendNode('exclusions'), +                for (ResolvedArtifact artifact : artifacts) {, +                    ModuleVersionIdentifier moduleVersionIdentifier = artifact.moduleVersion.id;, +                    String depGroupId = moduleVersionIdentifier.group, +                    String depArtifactId = moduleVersionIdentifier.name, +                    // add exclusions for all artifacts except the main one, +                    if (depGroupId != groupId || depArtifactId != artifactId) {, +                        Node exclusion = exclusions.appendNode('exclusion'), +                        exclusion.appendNode('groupId', depGroupId), +                        exclusion.appendNode('artifactId', depArtifactId), +                    }, +                }]