[+++ b/src/main/java/org/elasticsearch/action/mlt/MoreLikeThisRequest.java, +        routing = in.readOptionalString();, +        out.writeOptionalString(routing);, +++ b/src/main/java/org/elasticsearch/action/mlt/MoreLikeThisRequest.java, +        routing = in.readOptionalString();, +        out.writeOptionalString(routing);, +++ b/src/main/java/org/elasticsearch/action/mlt/TransportMoreLikeThisAction.java, +import org.elasticsearch.index.engine.DocumentMissingException;, +                    listener.onFailure(new DocumentMissingException(null, request.type(), request.id()));, +        ShardIterator shardIterator = clusterService.operationRouting().getShards(clusterState, request.index(), request.type(), request.id(), request.routing(), null);, +++ b/src/main/java/org/elasticsearch/action/mlt/MoreLikeThisRequest.java, +        routing = in.readOptionalString();, +        out.writeOptionalString(routing);, +++ b/src/main/java/org/elasticsearch/action/mlt/TransportMoreLikeThisAction.java, +import org.elasticsearch.index.engine.DocumentMissingException;, +                    listener.onFailure(new DocumentMissingException(null, request.type(), request.id()));, +        ShardIterator shardIterator = clusterService.operationRouting().getShards(clusterState, request.index(), request.type(), request.id(), request.routing(), null);, +++ b/src/test/java/org/elasticsearch/test/integration/mlt/MoreLikeThisActionTests.java, +    @Test, +    // See issue: https://github.com/elasticsearch/elasticsearch/issues/3039, +    public void testMoreLikeThisIssueRoutingNotSerialized() throws Exception {, +        startNode("server3");, +, +        client1.admin().indices().prepareDelete().execute().actionGet();, +        client1.admin().indices().prepareCreate("foo"), +                .setSettings(ImmutableSettings.builder().put("index.number_of_replicas", 0), +                        .put("index.number_of_shards", 2), +                        .put("index.routing.allocation.exclude.name", "server1"), +                        .put("index.routing.allocation.include.name", "server2,server3")), +                .execute().actionGet();, +        client1.admin().cluster().prepareHealth("foo").setWaitForGreenStatus().execute().actionGet();, +, +        client1.prepareIndex("foo", "bar", "1"), +                .setSource(jsonBuilder().startObject().startObject("foo").field("bar", "boz").endObject()), +                .setRouting("4000"), +                .execute().actionGet();, +        client1.admin().indices().prepareRefresh("foo").execute().actionGet();, +        SearchResponse searchResponse = client1.prepareMoreLikeThis("foo", "bar", "1").setRouting("4000").execute().actionGet();, +        assertThat(searchResponse, notNullValue());, +    }, +]