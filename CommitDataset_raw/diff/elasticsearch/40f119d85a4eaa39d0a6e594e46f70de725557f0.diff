[+++ b/Vagrantfile, +  config.vm.define "precise", autostart: false do |config|, +  config.vm.define "trusty", autostart: false do |config|, +  config.vm.define "vivid", autostart: false do |config|, +  config.vm.define "wheezy", autostart: false do |config|, +  config.vm.define "jessie", autostart: false do |config|, +  config.vm.define "centos-6", autostart: false do |config|, +  config.vm.define "centos-7", autostart: false do |config|, +  config.vm.define "oel-7", autostart: false do |config|, +  config.vm.define "fedora-22", autostart: false do |config|, +  if Vagrant.has_plugin?("vagrant-cachier"), +    config.cache.scope = :box, +  end, +  if Vagrant.has_plugin?("vagrant-cachier"), +    config.cache.scope = :box, +  end, +    config.cache.scope = :box, +  config.vm.provision "elasticsearch bats dependencies", type: "shell", inline: <<-SHELL, +++ b/Vagrantfile, +  config.vm.define "precise", autostart: false do |config|, +  config.vm.define "trusty", autostart: false do |config|, +  config.vm.define "vivid", autostart: false do |config|, +  config.vm.define "wheezy", autostart: false do |config|, +  config.vm.define "jessie", autostart: false do |config|, +  config.vm.define "centos-6", autostart: false do |config|, +  config.vm.define "centos-7", autostart: false do |config|, +  config.vm.define "oel-7", autostart: false do |config|, +  config.vm.define "fedora-22", autostart: false do |config|, +  if Vagrant.has_plugin?("vagrant-cachier"), +    config.cache.scope = :box, +  end, +  if Vagrant.has_plugin?("vagrant-cachier"), +    config.cache.scope = :box, +  end, +    config.cache.scope = :box, +  config.vm.provision "elasticsearch bats dependencies", type: "shell", inline: <<-SHELL, +++ /dev/null, +++ b/Vagrantfile, +  config.vm.define "precise", autostart: false do |config|, +  config.vm.define "trusty", autostart: false do |config|, +  config.vm.define "vivid", autostart: false do |config|, +  config.vm.define "wheezy", autostart: false do |config|, +  config.vm.define "jessie", autostart: false do |config|, +  config.vm.define "centos-6", autostart: false do |config|, +  config.vm.define "centos-7", autostart: false do |config|, +  config.vm.define "oel-7", autostart: false do |config|, +  config.vm.define "fedora-22", autostart: false do |config|, +  if Vagrant.has_plugin?("vagrant-cachier"), +    config.cache.scope = :box, +  end, +  if Vagrant.has_plugin?("vagrant-cachier"), +    config.cache.scope = :box, +  end, +    config.cache.scope = :box, +  config.vm.provision "elasticsearch bats dependencies", type: "shell", inline: <<-SHELL, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/cache/recycler/PageCacheRecyclerModule.java, +import org.elasticsearch.common.Classes;, +public class PageCacheRecyclerModule extends AbstractModule {, +        String impl = settings.get(CACHE_IMPL);, +        if (impl == null) {, +            bind(PageCacheRecycler.class).asEagerSingleton();, +        } else {, +            Class<? extends PageCacheRecycler> implClass = Classes.loadClass(getClass().getClassLoader(), impl);, +            bind(PageCacheRecycler.class).to(implClass).asEagerSingleton();, +++ b/Vagrantfile, +  config.vm.define "precise", autostart: false do |config|, +  config.vm.define "trusty", autostart: false do |config|, +  config.vm.define "vivid", autostart: false do |config|, +  config.vm.define "wheezy", autostart: false do |config|, +  config.vm.define "jessie", autostart: false do |config|, +  config.vm.define "centos-6", autostart: false do |config|, +  config.vm.define "centos-7", autostart: false do |config|, +  config.vm.define "oel-7", autostart: false do |config|, +  config.vm.define "fedora-22", autostart: false do |config|, +  if Vagrant.has_plugin?("vagrant-cachier"), +    config.cache.scope = :box, +  end, +  if Vagrant.has_plugin?("vagrant-cachier"), +    config.cache.scope = :box, +  end, +    config.cache.scope = :box, +  config.vm.provision "elasticsearch bats dependencies", type: "shell", inline: <<-SHELL, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/cache/recycler/PageCacheRecyclerModule.java, +import org.elasticsearch.common.Classes;, +public class PageCacheRecyclerModule extends AbstractModule {, +        String impl = settings.get(CACHE_IMPL);, +        if (impl == null) {, +            bind(PageCacheRecycler.class).asEagerSingleton();, +        } else {, +            Class<? extends PageCacheRecycler> implClass = Classes.loadClass(getClass().getClassLoader(), impl);, +            bind(PageCacheRecycler.class).to(implClass).asEagerSingleton();, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterModule.java, +import org.elasticsearch.common.Classes;, +        String impl = settings.get(CLUSTER_SERVICE_IMPL);, +        Class<? extends ClusterInfoService> implClass = InternalClusterInfoService.class;, +        if (impl != null) {, +            implClass = Classes.loadClass(getClass().getClassLoader(), impl);, +        }]