[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/cluster/node/restart/TransportNodesRestartAction.java, +import java.util.concurrent.atomic.AtomicBoolean;, +    private AtomicBoolean restartRequested = new AtomicBoolean();, +        if (!restartRequested.compareAndSet(false, true)) {, +                        restartRequested.set(false);]