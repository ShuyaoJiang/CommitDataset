[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/metadata/MetaData.java, +import org.elasticsearch.common.Strings;, +        // optimize for single element index (common case), +            String index = indices[0];, +            if (index.length() == 0) {, +            if (index.equals("_all")) {, +            // if a direct index name, just return the array provided, +            if (this.indices.containsKey(index)) {, +                return indices;, +            }, +            String[] actualLst = aliasAndIndexToIndexMap.get(index);, +            if (actualLst == null) {, +                if (!ignoreMissing) {, +                    throw new IndexMissingException(new Index(index));, +                } else {, +                    return Strings.EMPTY_ARRAY;, +                }, +            } else {, +                return actualLst;, +            }, +        }, +, +        // check if its a possible aliased index, if not, just return the, +        // passed array, +        boolean possiblyAliased = false;, +        for (String index : indices) {, +            if (!this.indices.containsKey(index)) {, +                possiblyAliased = true;, +            }, +        }, +        if (!possiblyAliased) {, +            return indices;]