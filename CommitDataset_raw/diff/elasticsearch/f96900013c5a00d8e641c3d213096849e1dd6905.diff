[+++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthResponse.java, +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthResponse.java, +++ b/core/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +                    final int format = input.readInt();, +                    if (format == CodecUtil.CODEC_MAGIC) {, +                    // legacy...., +                }, +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthResponse.java, +++ b/core/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +                    final int format = input.readInt();, +                    if (format == CodecUtil.CODEC_MAGIC) {, +                    // legacy...., +                }, +++ b/core/src/main/java/org/elasticsearch/index/analysis/PatternAnalyzerProvider.java, +        final CharArraySet defaultStopwords = CharArraySet.EMPTY_SET;, +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthResponse.java, +++ b/core/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +                    final int format = input.readInt();, +                    if (format == CodecUtil.CODEC_MAGIC) {, +                    // legacy...., +                }, +++ b/core/src/main/java/org/elasticsearch/index/analysis/PatternAnalyzerProvider.java, +        final CharArraySet defaultStopwords = CharArraySet.EMPTY_SET;, +++ b/core/src/main/java/org/elasticsearch/index/analysis/StandardAnalyzerProvider.java, +        final CharArraySet defaultStopwords = CharArraySet.EMPTY_SET;, +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthResponse.java, +++ b/core/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +                    final int format = input.readInt();, +                    if (format == CodecUtil.CODEC_MAGIC) {, +                    // legacy...., +                }, +++ b/core/src/main/java/org/elasticsearch/index/analysis/PatternAnalyzerProvider.java, +        final CharArraySet defaultStopwords = CharArraySet.EMPTY_SET;, +++ b/core/src/main/java/org/elasticsearch/index/analysis/StandardAnalyzerProvider.java, +        final CharArraySet defaultStopwords = CharArraySet.EMPTY_SET;, +++ b/core/src/main/java/org/elasticsearch/index/analysis/StandardHtmlStripAnalyzerProvider.java, +        final CharArraySet defaultStopwords = CharArraySet.EMPTY_SET;, +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthResponse.java, +++ b/core/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +                    final int format = input.readInt();, +                    if (format == CodecUtil.CODEC_MAGIC) {, +                    // legacy...., +                }, +++ b/core/src/main/java/org/elasticsearch/index/analysis/PatternAnalyzerProvider.java, +        final CharArraySet defaultStopwords = CharArraySet.EMPTY_SET;, +++ b/core/src/main/java/org/elasticsearch/index/analysis/StandardAnalyzerProvider.java, +        final CharArraySet defaultStopwords = CharArraySet.EMPTY_SET;, +++ b/core/src/main/java/org/elasticsearch/index/analysis/StandardHtmlStripAnalyzerProvider.java, +        final CharArraySet defaultStopwords = CharArraySet.EMPTY_SET;, +++ b/core/src/main/java/org/elasticsearch/index/analysis/StemmerTokenFilterFactory.java, +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthResponse.java, +++ b/core/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +                    final int format = input.readInt();, +                    if (format == CodecUtil.CODEC_MAGIC) {, +                    // legacy...., +                }, +++ b/core/src/main/java/org/elasticsearch/index/analysis/PatternAnalyzerProvider.java, +        final CharArraySet defaultStopwords = CharArraySet.EMPTY_SET;, +++ b/core/src/main/java/org/elasticsearch/index/analysis/StandardAnalyzerProvider.java, +        final CharArraySet defaultStopwords = CharArraySet.EMPTY_SET;, +++ b/core/src/main/java/org/elasticsearch/index/analysis/StandardHtmlStripAnalyzerProvider.java, +        final CharArraySet defaultStopwords = CharArraySet.EMPTY_SET;, +++ b/core/src/main/java/org/elasticsearch/index/analysis/StemmerTokenFilterFactory.java, +++ b/core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java, +                throw new SnapshotException(snapshotId, "snapshot is too old");, +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthResponse.java, +++ b/core/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +                    final int format = input.readInt();, +                    if (format == CodecUtil.CODEC_MAGIC) {, +                    // legacy...., +                }, +++ b/core/src/main/java/org/elasticsearch/index/analysis/PatternAnalyzerProvider.java, +        final CharArraySet defaultStopwords = CharArraySet.EMPTY_SET;, +++ b/core/src/main/java/org/elasticsearch/index/analysis/StandardAnalyzerProvider.java, +        final CharArraySet defaultStopwords = CharArraySet.EMPTY_SET;, +++ b/core/src/main/java/org/elasticsearch/index/analysis/StandardHtmlStripAnalyzerProvider.java, +        final CharArraySet defaultStopwords = CharArraySet.EMPTY_SET;, +++ b/core/src/main/java/org/elasticsearch/index/analysis/StemmerTokenFilterFactory.java, +++ b/core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java, +                throw new SnapshotException(snapshotId, "snapshot is too old");, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/DoubleTerms.java, +++ b/core/src/main/java/org/elasticsearch/Version.java, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/health/ClusterHealthResponse.java, +++ b/core/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +                    final int format = input.readInt();, +                    if (format == CodecUtil.CODEC_MAGIC) {, +                    // legacy...., +                }, +++ b/core/src/main/java/org/elasticsearch/index/analysis/PatternAnalyzerProvider.java, +        final CharArraySet defaultStopwords = CharArraySet.EMPTY_SET;, +++ b/core/src/main/java/org/elasticsearch/index/analysis/StandardAnalyzerProvider.java]