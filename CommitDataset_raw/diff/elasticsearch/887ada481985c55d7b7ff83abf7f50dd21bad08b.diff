[+++ b/core/src/main/java/org/elasticsearch/action/search/SearchPhaseController.java, +    public SearchPhaseController(Settings settings, BigArrays bigArrays, ScriptService scriptService) {, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchPhaseController.java, +    public SearchPhaseController(Settings settings, BigArrays bigArrays, ScriptService scriptService) {, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchTransportService.java, +    public SearchTransportService(Settings settings, TransportService transportService) {, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchPhaseController.java, +    public SearchPhaseController(Settings settings, BigArrays bigArrays, ScriptService scriptService) {, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchTransportService.java, +    public SearchTransportService(Settings settings, TransportService transportService) {, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportClearScrollAction.java, +                                      IndexNameExpressionResolver indexNameExpressionResolver,, +                                      SearchTransportService searchTransportService) {, +        this.searchTransportService = searchTransportService;, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchPhaseController.java, +    public SearchPhaseController(Settings settings, BigArrays bigArrays, ScriptService scriptService) {, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchTransportService.java, +    public SearchTransportService(Settings settings, TransportService transportService) {, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportClearScrollAction.java, +                                      IndexNameExpressionResolver indexNameExpressionResolver,, +                                      SearchTransportService searchTransportService) {, +        this.searchTransportService = searchTransportService;, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java, +    public TransportSearchAction(Settings settings, ThreadPool threadPool, TransportService transportService, SearchService searchService,, +                                 SearchTransportService searchTransportService, SearchPhaseController searchPhaseController,, +                                 ClusterService clusterService, ActionFilters actionFilters,, +                                 IndexNameExpressionResolver indexNameExpressionResolver) {, +        this.searchPhaseController = searchPhaseController;, +        this.searchTransportService = searchTransportService;, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchPhaseController.java, +    public SearchPhaseController(Settings settings, BigArrays bigArrays, ScriptService scriptService) {, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchTransportService.java, +    public SearchTransportService(Settings settings, TransportService transportService) {, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportClearScrollAction.java, +                                      IndexNameExpressionResolver indexNameExpressionResolver,, +                                      SearchTransportService searchTransportService) {, +        this.searchTransportService = searchTransportService;, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java, +    public TransportSearchAction(Settings settings, ThreadPool threadPool, TransportService transportService, SearchService searchService,, +                                 SearchTransportService searchTransportService, SearchPhaseController searchPhaseController,, +                                 ClusterService clusterService, ActionFilters actionFilters,, +                                 IndexNameExpressionResolver indexNameExpressionResolver) {, +        this.searchPhaseController = searchPhaseController;, +        this.searchTransportService = searchTransportService;, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchScrollAction.java, +    public TransportSearchScrollAction(Settings settings, ThreadPool threadPool, TransportService transportService,, +                                       ClusterService clusterService, ActionFilters actionFilters,, +                                       IndexNameExpressionResolver indexNameExpressionResolver,, +                                       SearchTransportService searchTransportService, SearchPhaseController searchPhaseController) {, +        this.searchTransportService = searchTransportService;, +        this.searchPhaseController = searchPhaseController;, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchPhaseController.java, +    public SearchPhaseController(Settings settings, BigArrays bigArrays, ScriptService scriptService) {, +++ b/core/src/main/java/org/elasticsearch/action/search/SearchTransportService.java, +    public SearchTransportService(Settings settings, TransportService transportService) {, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportClearScrollAction.java, +                                      IndexNameExpressionResolver indexNameExpressionResolver,, +                                      SearchTransportService searchTransportService) {, +        this.searchTransportService = searchTransportService;, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java, +    public TransportSearchAction(Settings settings, ThreadPool threadPool, TransportService transportService, SearchService searchService,, +                                 SearchTransportService searchTransportService, SearchPhaseController searchPhaseController,, +                                 ClusterService clusterService, ActionFilters actionFilters,, +                                 IndexNameExpressionResolver indexNameExpressionResolver) {, +        this.searchPhaseController = searchPhaseController;, +        this.searchTransportService = searchTransportService;, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchScrollAction.java, +    public TransportSearchScrollAction(Settings settings, ThreadPool threadPool, TransportService transportService,, +                                       ClusterService clusterService, ActionFilters actionFilters,, +                                       IndexNameExpressionResolver indexNameExpressionResolver,, +                                       SearchTransportService searchTransportService, SearchPhaseController searchPhaseController) {, +        this.searchTransportService = searchTransportService;, +        this.searchPhaseController = searchPhaseController;, +++ b/core/src/main/java/org/elasticsearch/node/Node.java, +import org.elasticsearch.action.search.SearchPhaseController;, +import org.elasticsearch.action.search.SearchTransportService;, +                    b.bind(SearchTransportService.class).toInstance(new SearchTransportService(settings, transportService));, +                    b.bind(SearchPhaseController.class).toInstance(new SearchPhaseController(settings, bigArrays,, +                            scriptModule.getScriptService()));]