[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/data/doubles/MultiValueDoubleFieldData.java, +        for (int[] ordinal : ordinals) {, +            if (ordinal[docId] != 0) {, +                return true;, +            }, +        }, +        return false;, +        for (int[] ordinal : ordinals) {, +            int loc = ordinal[docId];, +            if (loc != 0) {, +                proc.onValue(docId, Double.toString(values[loc]));, +        for (int[] ordinal : ordinals) {, +            int loc = ordinal[docId];, +            if (loc != 0) {, +                proc.onValue(docId, values[loc]);, +        for (int[] ordinal : ordinals) {, +            int loc = ordinal[docId];, +            if (loc != 0) {, +                proc.onValue(docId, values[loc]);, +        for (int[] ordinal : ordinals) {, +            int loc = ordinal[docId];, +            if (loc != 0) {, +                return values[loc];, +        }, +        return 0;, +        int length = 0;, +        for (int[] ordinal : ordinals) {, +            if (ordinal[docId] != 0) {, +                length++;, +            }, +        }, +        if (length == 0) {, +        if (length < VALUE_CACHE_SIZE) {, +            doubles = valuesCache.get().get()[length];, +            doubles = new double[length];, +        int i = 0;, +        for (int[] ordinal : ordinals) {, +            int loc = ordinal[docId];, +            if (loc != 0) {, +                doubles[i++] = values[loc];, +            }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/data/doubles/MultiValueDoubleFieldData.java, +        for (int[] ordinal : ordinals) {, +            if (ordinal[docId] != 0) {, +                return true;, +            }, +        }, +        return false;, +        for (int[] ordinal : ordinals) {, +            int loc = ordinal[docId];, +            if (loc != 0) {, +                proc.onValue(docId, Double.toString(values[loc]));, +        for (int[] ordinal : ordinals) {, +            int loc = ordinal[docId];, +            if (loc != 0) {, +                proc.onValue(docId, values[loc]);, +        for (int[] ordinal : ordinals) {, +            int loc = ordinal[docId];, +            if (loc != 0) {, +                proc.onValue(docId, values[loc]);, +        for (int[] ordinal : ordinals) {, +            int loc = ordinal[docId];, +            if (loc != 0) {, +                return values[loc];, +        }, +        return 0;, +        int length = 0;, +        for (int[] ordinal : ordinals) {, +            if (ordinal[docId] != 0) {, +                length++;, +            }, +        }, +        if (length == 0) {, +        if (length < VALUE_CACHE_SIZE) {, +            doubles = valuesCache.get().get()[length];, +            doubles = new double[length];, +        int i = 0;, +        for (int[] ordinal : ordinals) {, +            int loc = ordinal[docId];, +            if (loc != 0) {, +                doubles[i++] = values[loc];, +            }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/data/floats/MultiValueFloatFieldData.java, +        for (int[] ordinal : ordinals) {, +            if (ordinal[docId] != 0) {, +                return true;, +            }, +        }, +        return false;, +        for (int[] ordinal : ordinals) {, +            int loc = ordinal[docId];, +            if (loc != 0) {, +                proc.onValue(docId, Float.toString(values[loc]));, +        for (int[] ordinal : ordinals) {, +            int loc = ordinal[docId];, +            if (loc != 0) {, +                proc.onValue(docId, values[loc]);, +        for (int[] ordinal : ordinals) {, +            int loc = ordinal[docId];, +            if (loc != 0) {]