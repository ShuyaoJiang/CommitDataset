[+++ b/core/src/main/java/org/elasticsearch/search/SearchModule.java, +        registerAggregation(new AggregationSpec(NestedAggregationBuilder::new, NestedAggregationBuilder::parse,, +                NestedAggregationBuilder.AGGREGATION_FIELD_NAME).addResultReader(InternalNested::new));, +        registerAggregation(new AggregationSpec(ReverseNestedAggregationBuilder::new, ReverseNestedAggregationBuilder::parse,, +                ReverseNestedAggregationBuilder.AGGREGATION_NAME_FIELD).addResultReader(InternalReverseNested::new));, +        registerAggregation(new AggregationSpec(ChildrenAggregationBuilder::new, ChildrenAggregationBuilder::parse,, +                ChildrenAggregationBuilder.AGGREGATION_NAME_FIELD).addResultReader(InternalChildren::new));, +++ b/core/src/main/java/org/elasticsearch/search/SearchModule.java, +        registerAggregation(new AggregationSpec(NestedAggregationBuilder::new, NestedAggregationBuilder::parse,, +                NestedAggregationBuilder.AGGREGATION_FIELD_NAME).addResultReader(InternalNested::new));, +        registerAggregation(new AggregationSpec(ReverseNestedAggregationBuilder::new, ReverseNestedAggregationBuilder::parse,, +                ReverseNestedAggregationBuilder.AGGREGATION_NAME_FIELD).addResultReader(InternalReverseNested::new));, +        registerAggregation(new AggregationSpec(ChildrenAggregationBuilder::new, ChildrenAggregationBuilder::parse,, +                ChildrenAggregationBuilder.AGGREGATION_NAME_FIELD).addResultReader(InternalChildren::new));, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/bucket/children/ChildrenAggregationBuilder.java, +import org.elasticsearch.search.aggregations.InternalAggregation.Type;, +    public static final String NAME = "children";, +    private static final Type TYPE = new Type(NAME);, +        super(name, TYPE, ValuesSourceType.BYTES, ValueType.STRING);, +        super(in, TYPE, ValuesSourceType.BYTES, ValueType.STRING);, +++ b/core/src/main/java/org/elasticsearch/search/SearchModule.java, +        registerAggregation(new AggregationSpec(NestedAggregationBuilder::new, NestedAggregationBuilder::parse,, +                NestedAggregationBuilder.AGGREGATION_FIELD_NAME).addResultReader(InternalNested::new));, +        registerAggregation(new AggregationSpec(ReverseNestedAggregationBuilder::new, ReverseNestedAggregationBuilder::parse,, +                ReverseNestedAggregationBuilder.AGGREGATION_NAME_FIELD).addResultReader(InternalReverseNested::new));, +        registerAggregation(new AggregationSpec(ChildrenAggregationBuilder::new, ChildrenAggregationBuilder::parse,, +                ChildrenAggregationBuilder.AGGREGATION_NAME_FIELD).addResultReader(InternalChildren::new));, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/bucket/children/ChildrenAggregationBuilder.java, +import org.elasticsearch.search.aggregations.InternalAggregation.Type;, +    public static final String NAME = "children";, +    private static final Type TYPE = new Type(NAME);, +        super(name, TYPE, ValuesSourceType.BYTES, ValueType.STRING);, +        super(in, TYPE, ValuesSourceType.BYTES, ValueType.STRING);, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/bucket/children/InternalChildren.java, + * Results of the {@link ParentToChildrenAggregator}., +    /**, +     * Read from a stream., +     */, +    public InternalChildren(StreamInput in) throws IOException {, +        super(in);, +    }, +, +    public String getWriteableName() {, +        return ChildrenAggregationBuilder.NAME;, +++ b/core/src/main/java/org/elasticsearch/search/SearchModule.java, +        registerAggregation(new AggregationSpec(NestedAggregationBuilder::new, NestedAggregationBuilder::parse,, +                NestedAggregationBuilder.AGGREGATION_FIELD_NAME).addResultReader(InternalNested::new));, +        registerAggregation(new AggregationSpec(ReverseNestedAggregationBuilder::new, ReverseNestedAggregationBuilder::parse,, +                ReverseNestedAggregationBuilder.AGGREGATION_NAME_FIELD).addResultReader(InternalReverseNested::new));, +        registerAggregation(new AggregationSpec(ChildrenAggregationBuilder::new, ChildrenAggregationBuilder::parse,, +                ChildrenAggregationBuilder.AGGREGATION_NAME_FIELD).addResultReader(InternalChildren::new));, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/bucket/children/ChildrenAggregationBuilder.java, +import org.elasticsearch.search.aggregations.InternalAggregation.Type;, +    public static final String NAME = "children";, +    private static final Type TYPE = new Type(NAME);, +        super(name, TYPE, ValuesSourceType.BYTES, ValueType.STRING);, +        super(in, TYPE, ValuesSourceType.BYTES, ValueType.STRING);, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/bucket/children/InternalChildren.java, + * Results of the {@link ParentToChildrenAggregator}., +    /**, +     * Read from a stream., +     */, +    public InternalChildren(StreamInput in) throws IOException {, +        super(in);, +    }, +, +    public String getWriteableName() {, +        return ChildrenAggregationBuilder.NAME;, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/bucket/nested/InternalNested.java, + * Result of the {@link NestedAggregator}., +    /**, +     * Read from a stream., +     */, +    public InternalNested(StreamInput in) throws IOException {, +        super(in);, +    }, +, +    public String getWriteableName() {, +        return NestedAggregationBuilder.NAME;, +++ b/core/src/main/java/org/elasticsearch/search/SearchModule.java, +        registerAggregation(new AggregationSpec(NestedAggregationBuilder::new, NestedAggregationBuilder::parse,, +                NestedAggregationBuilder.AGGREGATION_FIELD_NAME).addResultReader(InternalNested::new));, +        registerAggregation(new AggregationSpec(ReverseNestedAggregationBuilder::new, ReverseNestedAggregationBuilder::parse,, +                ReverseNestedAggregationBuilder.AGGREGATION_NAME_FIELD).addResultReader(InternalReverseNested::new));, +        registerAggregation(new AggregationSpec(ChildrenAggregationBuilder::new, ChildrenAggregationBuilder::parse,, +                ChildrenAggregationBuilder.AGGREGATION_NAME_FIELD).addResultReader(InternalChildren::new));, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/bucket/children/ChildrenAggregationBuilder.java, +import org.elasticsearch.search.aggregations.InternalAggregation.Type;, +    public static final String NAME = "children";, +    private static final Type TYPE = new Type(NAME);, +        super(name, TYPE, ValuesSourceType.BYTES, ValueType.STRING);, +        super(in, TYPE, ValuesSourceType.BYTES, ValueType.STRING);, +++ b/core/src/main/java/org/elasticsearch/search/aggregations/bucket/children/InternalChildren.java, + * Results of the {@link ParentToChildrenAggregator}., +    /**, +     * Read from a stream., +     */, +    public InternalChildren(StreamInput in) throws IOException {, +        super(in);, +    }]