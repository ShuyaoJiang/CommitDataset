[+++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/prelert/PrelertPlugin.java, +import org.elasticsearch.common.ParseField;, +import org.elasticsearch.common.io.stream.NamedWriteableRegistry;, +    public List<NamedWriteableRegistry.Entry> getNamedWriteables() {, +        return Collections.singletonList(new NamedWriteableRegistry.Entry(MetaData.Custom.class, "prelert", PrelertMetadata::new));, +    }, +, +    @Override, +    public List<NamedXContentRegistry.Entry> getNamedXContent() {, +        NamedXContentRegistry.Entry entry = new NamedXContentRegistry.Entry(, +                MetaData.Custom.class,, +                new ParseField("prelert"),, +                parser -> PrelertMetadata.PRELERT_METADATA_PARSER.parse(parser, parseFieldMatcherSupplier).build(), +        );, +        return Collections.singletonList(entry);, +    }, +, +    @Override, +++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/prelert/PrelertPlugin.java, +import org.elasticsearch.common.ParseField;, +import org.elasticsearch.common.io.stream.NamedWriteableRegistry;, +    public List<NamedWriteableRegistry.Entry> getNamedWriteables() {, +        return Collections.singletonList(new NamedWriteableRegistry.Entry(MetaData.Custom.class, "prelert", PrelertMetadata::new));, +    }, +, +    @Override, +    public List<NamedXContentRegistry.Entry> getNamedXContent() {, +        NamedXContentRegistry.Entry entry = new NamedXContentRegistry.Entry(, +                MetaData.Custom.class,, +                new ParseField("prelert"),, +                parser -> PrelertMetadata.PRELERT_METADATA_PARSER.parse(parser, parseFieldMatcherSupplier).build(), +        );, +        return Collections.singletonList(entry);, +    }, +, +    @Override, +++ b/elasticsearch/src/main/java/org/elasticsearch/xpack/prelert/job/metadata/PrelertMetadata.java, +    public static final ObjectParser<Builder, ParseFieldMatcherSupplier> PRELERT_METADATA_PARSER = new ObjectParser<>("prelert_metadata",]