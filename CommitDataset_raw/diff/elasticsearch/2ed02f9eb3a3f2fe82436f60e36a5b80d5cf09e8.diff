[+++ b/core/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +    public static final String LATEST_DOC_VALUES_FORMAT = "Lucene54";, +    public static final String LATEST_CODEC = "Lucene54";, +++ b/core/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +    public static final String LATEST_DOC_VALUES_FORMAT = "Lucene54";, +    public static final String LATEST_CODEC = "Lucene54";, +++ b/core/src/main/java/org/elasticsearch/index/codec/CodecService.java, +import org.apache.lucene.codecs.lucene54.Lucene54Codec;, +            codecs.put(DEFAULT_CODEC, new Lucene54Codec());, +            codecs.put(BEST_COMPRESSION_CODEC, new Lucene54Codec(Mode.BEST_COMPRESSION));, +++ b/core/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +    public static final String LATEST_DOC_VALUES_FORMAT = "Lucene54";, +    public static final String LATEST_CODEC = "Lucene54";, +++ b/core/src/main/java/org/elasticsearch/index/codec/CodecService.java, +import org.apache.lucene.codecs.lucene54.Lucene54Codec;, +            codecs.put(DEFAULT_CODEC, new Lucene54Codec());, +            codecs.put(BEST_COMPRESSION_CODEC, new Lucene54Codec(Mode.BEST_COMPRESSION));, +++ b/core/src/main/java/org/elasticsearch/index/codec/PerFieldMappingPostingFormatCodec.java, +import org.apache.lucene.codecs.lucene54.Lucene54Codec;, +public class PerFieldMappingPostingFormatCodec extends Lucene54Codec {, +++ b/core/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +    public static final String LATEST_DOC_VALUES_FORMAT = "Lucene54";, +    public static final String LATEST_CODEC = "Lucene54";, +++ b/core/src/main/java/org/elasticsearch/index/codec/CodecService.java, +import org.apache.lucene.codecs.lucene54.Lucene54Codec;, +            codecs.put(DEFAULT_CODEC, new Lucene54Codec());, +            codecs.put(BEST_COMPRESSION_CODEC, new Lucene54Codec(Mode.BEST_COMPRESSION));, +++ b/core/src/main/java/org/elasticsearch/index/codec/PerFieldMappingPostingFormatCodec.java, +import org.apache.lucene.codecs.lucene54.Lucene54Codec;, +public class PerFieldMappingPostingFormatCodec extends Lucene54Codec {, +++ b/core/src/main/resources/org/elasticsearch/bootstrap/security.policy, +grant codeBase "${codebase.lucene-core-5.4.0-snapshot-1710880.jar}" {, +++ b/core/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +    public static final String LATEST_DOC_VALUES_FORMAT = "Lucene54";, +    public static final String LATEST_CODEC = "Lucene54";, +++ b/core/src/main/java/org/elasticsearch/index/codec/CodecService.java, +import org.apache.lucene.codecs.lucene54.Lucene54Codec;, +            codecs.put(DEFAULT_CODEC, new Lucene54Codec());, +            codecs.put(BEST_COMPRESSION_CODEC, new Lucene54Codec(Mode.BEST_COMPRESSION));, +++ b/core/src/main/java/org/elasticsearch/index/codec/PerFieldMappingPostingFormatCodec.java, +import org.apache.lucene.codecs.lucene54.Lucene54Codec;, +public class PerFieldMappingPostingFormatCodec extends Lucene54Codec {, +++ b/core/src/main/resources/org/elasticsearch/bootstrap/security.policy, +grant codeBase "${codebase.lucene-core-5.4.0-snapshot-1710880.jar}" {, +++ b/core/src/main/resources/org/elasticsearch/bootstrap/test-framework.policy, +grant codeBase "${codebase.lucene-test-framework-5.4.0-snapshot-1710880.jar}" {, +++ b/core/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +    public static final String LATEST_DOC_VALUES_FORMAT = "Lucene54";, +    public static final String LATEST_CODEC = "Lucene54";, +++ b/core/src/main/java/org/elasticsearch/index/codec/CodecService.java, +import org.apache.lucene.codecs.lucene54.Lucene54Codec;, +            codecs.put(DEFAULT_CODEC, new Lucene54Codec());, +            codecs.put(BEST_COMPRESSION_CODEC, new Lucene54Codec(Mode.BEST_COMPRESSION));, +++ b/core/src/main/java/org/elasticsearch/index/codec/PerFieldMappingPostingFormatCodec.java, +import org.apache.lucene.codecs.lucene54.Lucene54Codec;, +public class PerFieldMappingPostingFormatCodec extends Lucene54Codec {, +++ b/core/src/main/resources/org/elasticsearch/bootstrap/security.policy, +grant codeBase "${codebase.lucene-core-5.4.0-snapshot-1710880.jar}" {, +++ b/core/src/main/resources/org/elasticsearch/bootstrap/test-framework.policy, +grant codeBase "${codebase.lucene-test-framework-5.4.0-snapshot-1710880.jar}" {, +++ b/core/src/test/java/org/elasticsearch/index/codec/CodecTests.java, +import org.apache.lucene.codecs.lucene54.Lucene54Codec;, +        assertThat(codecService.codec("default"), instanceOf(Lucene54Codec.class));, +        assertThat(codecService.codec("Lucene53"), instanceOf(Lucene53Codec.class));, +++ b/core/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +    public static final String LATEST_DOC_VALUES_FORMAT = "Lucene54";, +    public static final String LATEST_CODEC = "Lucene54";, +++ b/core/src/main/java/org/elasticsearch/index/codec/CodecService.java, +import org.apache.lucene.codecs.lucene54.Lucene54Codec;, +            codecs.put(DEFAULT_CODEC, new Lucene54Codec());, +            codecs.put(BEST_COMPRESSION_CODEC, new Lucene54Codec(Mode.BEST_COMPRESSION));, +++ b/core/src/main/java/org/elasticsearch/index/codec/PerFieldMappingPostingFormatCodec.java, +import org.apache.lucene.codecs.lucene54.Lucene54Codec;, +public class PerFieldMappingPostingFormatCodec extends Lucene54Codec {, +++ b/core/src/main/resources/org/elasticsearch/bootstrap/security.policy, +grant codeBase "${codebase.lucene-core-5.4.0-snapshot-1710880.jar}" {, +++ b/core/src/main/resources/org/elasticsearch/bootstrap/test-framework.policy, +grant codeBase "${codebase.lucene-test-framework-5.4.0-snapshot-1710880.jar}" {, +++ b/core/src/test/java/org/elasticsearch/index/codec/CodecTests.java, +import org.apache.lucene.codecs.lucene54.Lucene54Codec;, +        assertThat(codecService.codec("default"), instanceOf(Lucene54Codec.class));, +        assertThat(codecService.codec("Lucene53"), instanceOf(Lucene53Codec.class));, +++ b/core/src/test/java/org/elasticsearch/index/store/StoreTests.java, +import org.apache.lucene.codecs.lucene54.Lucene54Codec;, +            super(new Lucene54Codec().getName(), new Lucene54Codec());, +++ b/core/src/main/java/org/elasticsearch/common/lucene/Lucene.java, +    public static final String LATEST_DOC_VALUES_FORMAT = "Lucene54";, +    public static final String LATEST_CODEC = "Lucene54";, +++ b/core/src/main/java/org/elasticsearch/index/codec/CodecService.java, +import org.apache.lucene.codecs.lucene54.Lucene54Codec;, +            codecs.put(DEFAULT_CODEC, new Lucene54Codec());, +            codecs.put(BEST_COMPRESSION_CODEC, new Lucene54Codec(Mode.BEST_COMPRESSION));, +++ b/core/src/main/java/org/elasticsearch/index/codec/PerFieldMappingPostingFormatCodec.java, +import org.apache.lucene.codecs.lucene54.Lucene54Codec;, +public class PerFieldMappingPostingFormatCodec extends Lucene54Codec {, +++ b/core/src/main/resources/org/elasticsearch/bootstrap/security.policy, +grant codeBase "${codebase.lucene-core-5.4.0-snapshot-1710880.jar}" {, +++ b/core/src/main/resources/org/elasticsearch/bootstrap/test-framework.policy, +grant codeBase "${codebase.lucene-test-framework-5.4.0-snapshot-1710880.jar}" {, +++ b/core/src/test/java/org/elasticsearch/index/codec/CodecTests.java]