[+++ b/docs/reference/aggregations/pipeline.asciidoc, +aggregation tree. For example, this derivative is embedded inside a date_histogram and refers to a "sibling", +                "the_deriv":{, +                    "derivative":{ "buckets_path": "the_sum" } <2>, +the pipeline aggregation to use the document count as its input.  For example, a derivative can be calculated, +on the document count of each bucket, instead of a specific metric:, +                "the_deriv": {, +                    "derivative": { "buckets_path": "_count" } <1>, +<1> By using `_count` instead of a metric name, we can calculate the derivative of document counts in the histogram, +++ b/docs/reference/aggregations/pipeline.asciidoc, +aggregation tree. For example, this derivative is embedded inside a date_histogram and refers to a "sibling", +                "the_deriv":{, +                    "derivative":{ "buckets_path": "the_sum" } <2>, +the pipeline aggregation to use the document count as its input.  For example, a derivative can be calculated, +on the document count of each bucket, instead of a specific metric:, +                "the_deriv": {, +                    "derivative": { "buckets_path": "_count" } <1>, +<1> By using `_count` instead of a metric name, we can calculate the derivative of document counts in the histogram, +++ b/docs/reference/aggregations/pipeline/movavg-aggregation.asciidoc, +The Moving Average aggregation has been removed.  Use the more general, +<<search-aggregations-pipeline-movfn-aggregation,Moving Function Aggregation>> instead., +++ b/docs/reference/aggregations/pipeline.asciidoc, +aggregation tree. For example, this derivative is embedded inside a date_histogram and refers to a "sibling", +                "the_deriv":{, +                    "derivative":{ "buckets_path": "the_sum" } <2>, +the pipeline aggregation to use the document count as its input.  For example, a derivative can be calculated, +on the document count of each bucket, instead of a specific metric:, +                "the_deriv": {, +                    "derivative": { "buckets_path": "_count" } <1>, +<1> By using `_count` instead of a metric name, we can calculate the derivative of document counts in the histogram, +++ b/docs/reference/aggregations/pipeline/movavg-aggregation.asciidoc, +The Moving Average aggregation has been removed.  Use the more general, +<<search-aggregations-pipeline-movfn-aggregation,Moving Function Aggregation>> instead., +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/search.aggregation/80_typed_keys.yml, +                test_deriv:, +                  derivative:, +  - is_true: aggregations.date_histogram#test_created_histogram.buckets.1.derivative#test_deriv, +++ b/docs/reference/aggregations/pipeline.asciidoc, +aggregation tree. For example, this derivative is embedded inside a date_histogram and refers to a "sibling", +                "the_deriv":{, +                    "derivative":{ "buckets_path": "the_sum" } <2>, +the pipeline aggregation to use the document count as its input.  For example, a derivative can be calculated, +on the document count of each bucket, instead of a specific metric:, +                "the_deriv": {, +                    "derivative": { "buckets_path": "_count" } <1>, +<1> By using `_count` instead of a metric name, we can calculate the derivative of document counts in the histogram, +++ b/docs/reference/aggregations/pipeline/movavg-aggregation.asciidoc, +The Moving Average aggregation has been removed.  Use the more general, +<<search-aggregations-pipeline-movfn-aggregation,Moving Function Aggregation>> instead., +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/search.aggregation/80_typed_keys.yml, +                test_deriv:, +                  derivative:, +  - is_true: aggregations.date_histogram#test_created_histogram.buckets.1.derivative#test_deriv, +++ b/server/src/main/java/org/elasticsearch/plugins/SearchPlugin.java, +     * Specification of search time behavior extension like a custom {@link ScoreFunction}., +++ b/docs/reference/aggregations/pipeline.asciidoc, +aggregation tree. For example, this derivative is embedded inside a date_histogram and refers to a "sibling", +                "the_deriv":{, +                    "derivative":{ "buckets_path": "the_sum" } <2>, +the pipeline aggregation to use the document count as its input.  For example, a derivative can be calculated, +on the document count of each bucket, instead of a specific metric:, +                "the_deriv": {, +                    "derivative": { "buckets_path": "_count" } <1>, +<1> By using `_count` instead of a metric name, we can calculate the derivative of document counts in the histogram, +++ b/docs/reference/aggregations/pipeline/movavg-aggregation.asciidoc, +The Moving Average aggregation has been removed.  Use the more general, +<<search-aggregations-pipeline-movfn-aggregation,Moving Function Aggregation>> instead., +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/search.aggregation/80_typed_keys.yml, +                test_deriv:, +                  derivative:, +  - is_true: aggregations.date_histogram#test_created_histogram.buckets.1.derivative#test_deriv, +++ b/server/src/main/java/org/elasticsearch/plugins/SearchPlugin.java, +     * Specification of search time behavior extension like a custom {@link ScoreFunction}., +++ b/server/src/main/java/org/elasticsearch/search/SearchModule.java, +import org.elasticsearch.search.aggregations.bucket.geogrid.InternalGeoHashGrid;, +++ b/docs/reference/aggregations/pipeline.asciidoc, +aggregation tree. For example, this derivative is embedded inside a date_histogram and refers to a "sibling", +                "the_deriv":{, +                    "derivative":{ "buckets_path": "the_sum" } <2>, +the pipeline aggregation to use the document count as its input.  For example, a derivative can be calculated, +on the document count of each bucket, instead of a specific metric:, +                "the_deriv": {, +                    "derivative": { "buckets_path": "_count" } <1>, +<1> By using `_count` instead of a metric name, we can calculate the derivative of document counts in the histogram, +++ b/docs/reference/aggregations/pipeline/movavg-aggregation.asciidoc, +The Moving Average aggregation has been removed.  Use the more general, +<<search-aggregations-pipeline-movfn-aggregation,Moving Function Aggregation>> instead., +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/search.aggregation/80_typed_keys.yml, +                test_deriv:, +                  derivative:, +  - is_true: aggregations.date_histogram#test_created_histogram.buckets.1.derivative#test_deriv, +++ b/server/src/main/java/org/elasticsearch/plugins/SearchPlugin.java, +     * Specification of search time behavior extension like a custom {@link ScoreFunction}., +++ b/server/src/main/java/org/elasticsearch/search/SearchModule.java, +import org.elasticsearch.search.aggregations.bucket.geogrid.InternalGeoHashGrid;, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/PipelineAggregatorBuilders.java, +++ b/docs/reference/aggregations/pipeline.asciidoc, +aggregation tree. For example, this derivative is embedded inside a date_histogram and refers to a "sibling", +                "the_deriv":{, +                    "derivative":{ "buckets_path": "the_sum" } <2>]