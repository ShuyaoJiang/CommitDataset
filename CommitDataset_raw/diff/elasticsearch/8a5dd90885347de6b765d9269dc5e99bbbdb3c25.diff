[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/http/netty/NettyHttpServerTransport.java, +import org.elasticsearch.common.netty.handler.codec.http.*;, +import org.elasticsearch.http.HttpRequest;, +    private final boolean compression;, +, +    private final int compressionLevel;, +, +        this.compression = settings.getAsBoolean("http.compression", true);, +        this.compressionLevel = settings.getAsInt("http.compression_level", 6);, +, +                if (compression) {, +                    pipeline.addLast("decoder_compress", new HttpContentDecompressor());, +                }, +                if (compression) {, +                    pipeline.addLast("encoder_compress", new HttpContentCompressor(compressionLevel));, +                }]