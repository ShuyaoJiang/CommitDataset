[+++ b/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/job/process/ProcessCtrl.java, +    public static List<String> buildAutodetectCommand(Environment env, Settings settings, Job job, Logger logger) {, +            addIfNotNull(timeValues.stream().map(TimeValue::getSeconds).collect(Collectors.toList()), argKey, command);, +            boolean perPartitionNormalization) throws IOException {, +++ b/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/job/process/ProcessCtrl.java, +    public static List<String> buildAutodetectCommand(Environment env, Settings settings, Job job, Logger logger) {, +            addIfNotNull(timeValues.stream().map(TimeValue::getSeconds).collect(Collectors.toList()), argKey, command);, +            boolean perPartitionNormalization) throws IOException {, +++ b/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/job/process/autodetect/AutodetectBuilder.java, +    public void build() throws IOException {, +        List<String> command = ProcessCtrl.buildAutodetectCommand(env, settings, job, logger);, +++ b/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/job/process/ProcessCtrl.java, +    public static List<String> buildAutodetectCommand(Environment env, Settings settings, Job job, Logger logger) {, +            addIfNotNull(timeValues.stream().map(TimeValue::getSeconds).collect(Collectors.toList()), argKey, command);, +            boolean perPartitionNormalization) throws IOException {, +++ b/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/job/process/autodetect/AutodetectBuilder.java, +    public void build() throws IOException {, +        List<String> command = ProcessCtrl.buildAutodetectCommand(env, settings, job, logger);, +++ b/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/job/process/autodetect/NativeAutodetectProcessFactory.java, +        } catch (IOException e) {, +++ b/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/job/process/ProcessCtrl.java, +    public static List<String> buildAutodetectCommand(Environment env, Settings settings, Job job, Logger logger) {, +            addIfNotNull(timeValues.stream().map(TimeValue::getSeconds).collect(Collectors.toList()), argKey, command);, +            boolean perPartitionNormalization) throws IOException {, +++ b/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/job/process/autodetect/AutodetectBuilder.java, +    public void build() throws IOException {, +        List<String> command = ProcessCtrl.buildAutodetectCommand(env, settings, job, logger);, +++ b/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/job/process/autodetect/NativeAutodetectProcessFactory.java, +        } catch (IOException e) {, +++ b/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/job/process/normalizer/NativeNormalizerProcessFactory.java, +            List<String> command = ProcessCtrl.buildNormalizerCommand(env, jobId, quantilesState, bucketSpan, perPartitionNormalization);, +        } catch (IOException e) {, +++ b/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/job/process/ProcessCtrl.java, +    public static List<String> buildAutodetectCommand(Environment env, Settings settings, Job job, Logger logger) {, +            addIfNotNull(timeValues.stream().map(TimeValue::getSeconds).collect(Collectors.toList()), argKey, command);, +            boolean perPartitionNormalization) throws IOException {, +++ b/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/job/process/autodetect/AutodetectBuilder.java, +    public void build() throws IOException {, +        List<String> command = ProcessCtrl.buildAutodetectCommand(env, settings, job, logger);, +++ b/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/job/process/autodetect/NativeAutodetectProcessFactory.java, +        } catch (IOException e) {, +++ b/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/job/process/normalizer/NativeNormalizerProcessFactory.java, +            List<String> command = ProcessCtrl.buildNormalizerCommand(env, jobId, quantilesState, bucketSpan, perPartitionNormalization);, +        } catch (IOException e) {, +++ b/plugin/ml/src/test/java/org/elasticsearch/xpack/ml/job/process/ProcessCtrlTests.java, +        List<String> command = ProcessCtrl.buildAutodetectCommand(env, settings, job.build(), logger);, +        assertEquals(13, command.size());, +        List<String> command = ProcessCtrl.buildAutodetectCommand(env, settings, job.build(), logger);, +        List<String> command = ProcessCtrl.buildAutodetectCommand(env, settings, job.build(), logger);, +        command = ProcessCtrl.buildAutodetectCommand(env, settings, job.build(), logger);, +        List<String> command = ProcessCtrl.buildNormalizerCommand(env, jobId, null, 300, true);, +        assertEquals(4, command.size());]