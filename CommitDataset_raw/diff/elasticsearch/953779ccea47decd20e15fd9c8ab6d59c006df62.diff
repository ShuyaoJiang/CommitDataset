[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/xcontent/CustomScoreQueryBuilder.java, +import org.elasticsearch.util.collect.Maps;, +import java.util.Map;, +    private Map<String, Object> params = null;, +, +     * Additional parameters that can be provided to the script., +     */, +    public CustomScoreQueryBuilder params(Map<String, Object> params) {, +        if (params == null) {, +            this.params = params;, +        } else {, +            this.params.putAll(params);, +        }, +        return this;, +    }, +, +    /**, +     * Additional parameters that can be provided to the script., +     */, +    public CustomScoreQueryBuilder param(String key, Object value) {, +        if (params == null) {, +            params = Maps.newHashMap();, +        }, +        params.put(key, value);, +        return this;, +    }, +, +    /**, +        if (this.params != null) {, +            builder.field("params");, +            builder.map(this.params);, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/xcontent/CustomScoreQueryBuilder.java, +import org.elasticsearch.util.collect.Maps;, +import java.util.Map;, +    private Map<String, Object> params = null;, +, +     * Additional parameters that can be provided to the script., +     */, +    public CustomScoreQueryBuilder params(Map<String, Object> params) {, +        if (params == null) {, +            this.params = params;, +        } else {, +            this.params.putAll(params);, +        }, +        return this;, +    }, +, +    /**, +     * Additional parameters that can be provided to the script., +     */, +    public CustomScoreQueryBuilder param(String key, Object value) {, +        if (params == null) {, +            params = Maps.newHashMap();, +        }, +        params.put(key, value);, +        return this;, +    }, +, +    /**, +        if (this.params != null) {, +            builder.field("params");, +            builder.map(this.params);, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/xcontent/CustomScoreQueryParser.java, +        Map<String, Object> vars = null;, +                } else if ("params".equals(currentFieldName)) {, +                    vars = parser.map();, +                new ScriptScoreFunction(new ScriptFieldsFunction(script, parseContext.scriptService(), parseContext.mapperService(), parseContext.indexCache().fieldData()), vars));, +        private ScriptScoreFunction(ScriptFieldsFunction scriptFieldsFunction, Map<String, Object> vars) {, +            this.vars = vars;, +            if (vars == null) {, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/xcontent/CustomScoreQueryBuilder.java, +import org.elasticsearch.util.collect.Maps;, +import java.util.Map;, +    private Map<String, Object> params = null;, +, +     * Additional parameters that can be provided to the script., +     */, +    public CustomScoreQueryBuilder params(Map<String, Object> params) {, +        if (params == null) {, +            this.params = params;, +        } else {, +            this.params.putAll(params);, +        }, +        return this;, +    }, +, +    /**, +     * Additional parameters that can be provided to the script., +     */, +    public CustomScoreQueryBuilder param(String key, Object value) {, +        if (params == null) {, +            params = Maps.newHashMap();, +        }, +        params.put(key, value);, +        return this;, +    }, +]