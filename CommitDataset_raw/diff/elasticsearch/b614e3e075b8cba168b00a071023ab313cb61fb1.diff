[+++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +import org.elasticsearch.search.rescore.RescoreBuilder;, +import org.elasticsearch.search.sort.SortBuilder;, +import org.elasticsearch.search.suggest.SuggestionBuilder;, +import org.elasticsearch.search.suggest.phrase.SmoothingModel;, +import org.elasticsearch.tasks.Task;, +     * Reads a {@link SortBuilder} from the current stream, +     */, +    public SortBuilder<?> readSortBuilder() throws IOException {, +        return readNamedWriteable(SortBuilder.class);, +    }, +, +    /**, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +import org.elasticsearch.search.rescore.RescoreBuilder;, +import org.elasticsearch.search.sort.SortBuilder;, +import org.elasticsearch.search.suggest.SuggestionBuilder;, +import org.elasticsearch.search.suggest.phrase.SmoothingModel;, +import org.elasticsearch.tasks.Task;, +     * Reads a {@link SortBuilder} from the current stream, +     */, +    public SortBuilder<?> readSortBuilder() throws IOException {, +        return readNamedWriteable(SortBuilder.class);, +    }, +, +    /**, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java, +import org.elasticsearch.search.rescore.RescoreBuilder;, +import org.elasticsearch.search.sort.SortBuilder;, +import org.elasticsearch.search.suggest.SuggestionBuilder;, +import org.elasticsearch.search.suggest.phrase.SmoothingModel;, +import org.elasticsearch.tasks.Task;, +    public void writeOptionalWriteable(@Nullable Writeable<?> writeable) throws IOException {, +    void writeNamedWriteable(NamedWriteable<?> namedWriteable) throws IOException {, +    public void writeQuery(QueryBuilder<?> queryBuilder) throws IOException {, +    public void writeSuggestion(SuggestionBuilder<?> suggestion) throws IOException {, +    /**, +     * Writes a {@link SortBuilder} to the current stream, +     */, +    public void writeSortBuilder(SortBuilder<?> sort) throws IOException {, +        writeNamedWriteable(sort);, +    }, +, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +import org.elasticsearch.search.rescore.RescoreBuilder;, +import org.elasticsearch.search.sort.SortBuilder;, +import org.elasticsearch.search.suggest.SuggestionBuilder;, +import org.elasticsearch.search.suggest.phrase.SmoothingModel;, +import org.elasticsearch.tasks.Task;, +     * Reads a {@link SortBuilder} from the current stream, +     */, +    public SortBuilder<?> readSortBuilder() throws IOException {, +        return readNamedWriteable(SortBuilder.class);, +    }, +, +    /**, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java, +import org.elasticsearch.search.rescore.RescoreBuilder;, +import org.elasticsearch.search.sort.SortBuilder;, +import org.elasticsearch.search.suggest.SuggestionBuilder;, +import org.elasticsearch.search.suggest.phrase.SmoothingModel;, +import org.elasticsearch.tasks.Task;, +    public void writeOptionalWriteable(@Nullable Writeable<?> writeable) throws IOException {, +    void writeNamedWriteable(NamedWriteable<?> namedWriteable) throws IOException {, +    public void writeQuery(QueryBuilder<?> queryBuilder) throws IOException {, +    public void writeSuggestion(SuggestionBuilder<?> suggestion) throws IOException {, +    /**, +     * Writes a {@link SortBuilder} to the current stream, +     */, +    public void writeSortBuilder(SortBuilder<?> sort) throws IOException {, +        writeNamedWriteable(sort);, +    }, +, +++ b/core/src/main/java/org/elasticsearch/index/query/support/InnerHitsQueryParserHelper.java, +import org.elasticsearch.search.sort.SortBuilder;, +                        parseCommonInnerHitOptions(parser, token, fieldName, subSearchContext, sourceParseElement, highlighterParseElement, scriptFieldsParseElement, fieldDataFieldsParseElement);, +                    parseCommonInnerHitOptions(parser, token, fieldName, subSearchContext, sourceParseElement, highlighterParseElement, scriptFieldsParseElement, fieldDataFieldsParseElement);, +                                                  FetchSourceParseElement sourceParseElement, HighlighterParseElement highlighterParseElement,, +            SortBuilder.parseSort(parser, subSearchContext);, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +import org.elasticsearch.search.rescore.RescoreBuilder;, +import org.elasticsearch.search.sort.SortBuilder;, +import org.elasticsearch.search.suggest.SuggestionBuilder;, +import org.elasticsearch.search.suggest.phrase.SmoothingModel;, +import org.elasticsearch.tasks.Task;, +     * Reads a {@link SortBuilder} from the current stream, +     */, +    public SortBuilder<?> readSortBuilder() throws IOException {, +        return readNamedWriteable(SortBuilder.class);, +    }, +, +    /**, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java, +import org.elasticsearch.search.rescore.RescoreBuilder;, +import org.elasticsearch.search.sort.SortBuilder;, +import org.elasticsearch.search.suggest.SuggestionBuilder;, +import org.elasticsearch.search.suggest.phrase.SmoothingModel;, +import org.elasticsearch.tasks.Task;, +    public void writeOptionalWriteable(@Nullable Writeable<?> writeable) throws IOException {, +    void writeNamedWriteable(NamedWriteable<?> namedWriteable) throws IOException {]