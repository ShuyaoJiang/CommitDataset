[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/io/stream/BytesStreamOutput.java, +        static class Entry {, +            final BytesStreamOutput bytes;, +            final HandlesStreamOutput handles;, +            Entry(BytesStreamOutput bytes, HandlesStreamOutput handles) {, +                this.bytes = bytes;, +                this.handles = handles;, +            }, +        }, +, +        private static final ThreadLocal<ThreadLocals.CleanableValue<Entry>> cache = new ThreadLocal<ThreadLocals.CleanableValue<Entry>>() {, +            @Override protected ThreadLocals.CleanableValue<Entry> initialValue() {, +                BytesStreamOutput bytes = new BytesStreamOutput();, +                HandlesStreamOutput handles = new HandlesStreamOutput(bytes);, +                return new ThreadLocals.CleanableValue<Entry>(new Entry(bytes, handles));, +            BytesStreamOutput os = cache.get().get().bytes;, +            HandlesStreamOutput os = cache.get().get().handles;]