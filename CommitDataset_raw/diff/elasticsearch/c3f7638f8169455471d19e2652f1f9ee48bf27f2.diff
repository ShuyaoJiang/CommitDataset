[+++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +import java.time.ZonedDateTime, +import java.time.ZoneOffset, +, +        configureJarManifest(project) // jar config must be added before info broker, +, +            jarTask.doFirst {, +                // this doFirst is added before the info plugin, therefore it will run, +                // after the doFirst added by the info plugin, and we can override attributes, +                jarTask.manifest.attributes(, +                        'X-Compile-Elasticsearch-Version': VersionProperties.elasticsearch,, +                        'X-Compile-Lucene-Version': VersionProperties.lucene,, +                        'Build-Date': ZonedDateTime.now(ZoneOffset.UTC)), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +import java.time.ZonedDateTime, +import java.time.ZoneOffset, +, +        configureJarManifest(project) // jar config must be added before info broker, +, +            jarTask.doFirst {, +                // this doFirst is added before the info plugin, therefore it will run, +                // after the doFirst added by the info plugin, and we can override attributes, +                jarTask.manifest.attributes(, +                        'X-Compile-Elasticsearch-Version': VersionProperties.elasticsearch,, +                        'X-Compile-Lucene-Version': VersionProperties.lucene,, +                        'Build-Date': ZonedDateTime.now(ZoneOffset.UTC)), +++ b/buildSrc/version.properties, +lucene            = 5.4.0-snapshot-1712973, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +import java.time.ZonedDateTime, +import java.time.ZoneOffset, +, +        configureJarManifest(project) // jar config must be added before info broker, +, +            jarTask.doFirst {, +                // this doFirst is added before the info plugin, therefore it will run, +                // after the doFirst added by the info plugin, and we can override attributes, +                jarTask.manifest.attributes(, +                        'X-Compile-Elasticsearch-Version': VersionProperties.elasticsearch,, +                        'X-Compile-Lucene-Version': VersionProperties.lucene,, +                        'Build-Date': ZonedDateTime.now(ZoneOffset.UTC)), +++ b/buildSrc/version.properties, +lucene            = 5.4.0-snapshot-1712973, +++ b/core/src/main/java/org/elasticsearch/common/xcontent/XContentBuilder.java, +    public XContentBuilder rawField(String fieldName, InputStream content, XContentType contentType) throws IOException {, +        generator.writeRawField(fieldName, content, bos, contentType);, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +import java.time.ZonedDateTime, +import java.time.ZoneOffset, +, +        configureJarManifest(project) // jar config must be added before info broker, +, +            jarTask.doFirst {, +                // this doFirst is added before the info plugin, therefore it will run, +                // after the doFirst added by the info plugin, and we can override attributes, +                jarTask.manifest.attributes(, +                        'X-Compile-Elasticsearch-Version': VersionProperties.elasticsearch,, +                        'X-Compile-Lucene-Version': VersionProperties.lucene,, +                        'Build-Date': ZonedDateTime.now(ZoneOffset.UTC)), +++ b/buildSrc/version.properties, +lucene            = 5.4.0-snapshot-1712973, +++ b/core/src/main/java/org/elasticsearch/common/xcontent/XContentBuilder.java, +    public XContentBuilder rawField(String fieldName, InputStream content, XContentType contentType) throws IOException {, +        generator.writeRawField(fieldName, content, bos, contentType);, +++ b/core/src/main/java/org/elasticsearch/common/xcontent/XContentGenerator.java, +    void writeRawField(String fieldName, InputStream content, OutputStream bos, XContentType contentType) throws IOException;, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +import java.time.ZonedDateTime, +import java.time.ZoneOffset, +, +        configureJarManifest(project) // jar config must be added before info broker, +, +            jarTask.doFirst {, +                // this doFirst is added before the info plugin, therefore it will run, +                // after the doFirst added by the info plugin, and we can override attributes, +                jarTask.manifest.attributes(, +                        'X-Compile-Elasticsearch-Version': VersionProperties.elasticsearch,, +                        'X-Compile-Lucene-Version': VersionProperties.lucene,, +                        'Build-Date': ZonedDateTime.now(ZoneOffset.UTC)), +++ b/buildSrc/version.properties, +lucene            = 5.4.0-snapshot-1712973, +++ b/core/src/main/java/org/elasticsearch/common/xcontent/XContentBuilder.java, +    public XContentBuilder rawField(String fieldName, InputStream content, XContentType contentType) throws IOException {, +        generator.writeRawField(fieldName, content, bos, contentType);, +++ b/core/src/main/java/org/elasticsearch/common/xcontent/XContentGenerator.java, +    void writeRawField(String fieldName, InputStream content, OutputStream bos, XContentType contentType) throws IOException;, +++ b/core/src/main/java/org/elasticsearch/common/xcontent/XContentHelper.java, +                builder.rawField(field, compressedStreamInput, contentType);, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +import java.time.ZonedDateTime, +import java.time.ZoneOffset, +, +        configureJarManifest(project) // jar config must be added before info broker, +, +            jarTask.doFirst {, +                // this doFirst is added before the info plugin, therefore it will run, +                // after the doFirst added by the info plugin, and we can override attributes, +                jarTask.manifest.attributes(, +                        'X-Compile-Elasticsearch-Version': VersionProperties.elasticsearch,, +                        'X-Compile-Lucene-Version': VersionProperties.lucene,]