[+++ b/core/src/test/java/org/elasticsearch/index/query/plugin/DummyQueryParserPlugin.java, +        protected Query doToQuery(QueryShardContext context) throws IOException {, +            return new DummyQuery(context.isFilter());, +        }, +, +        @Override, +    public static class DummyQueryParser extends BaseQueryParser {, +        public QueryBuilder fromXContent(QueryParseContext parseContext) throws IOException, QueryParsingException {, +            XContentParser.Token token = parseContext.parser().nextToken();, +            return new DummyQueryBuilder();]