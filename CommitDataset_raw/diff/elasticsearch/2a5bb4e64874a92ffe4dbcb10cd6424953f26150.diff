[+++ b/TESTING.asciidoc, +or run wheezy and trusty:, +mvn -Dtests.vagrant -pl qa/vagrant verify -DboxesToTest='wheezy, trusty', +* wheezy aka Debian 7, the current debian oldstable distribution, +++ b/TESTING.asciidoc, +or run wheezy and trusty:, +mvn -Dtests.vagrant -pl qa/vagrant verify -DboxesToTest='wheezy, trusty', +* wheezy aka Debian 7, the current debian oldstable distribution, +++ b/Vagrantfile, +  config.vm.define "wheezy" do |config|, +    config.vm.box = "debian/wheezy64", +    deb_common(config), +  end, +    deb_common(config), +    # TODO switch from chef to boxcutter to provide?, +    config.vm.box = "chef/centos-6.6", +    rpm_common(config), +    # TODO switch from chef to boxcutter to provide?, +    config.vm.box = "chef/centos-7.0", +    rpm_common(config), +    rpm_common(config), +    dnf_common(config), +  config.vm.synced_folder "", "/elasticsearch", +  # Ubuntu is noisy, +  deb_common(config), +end, +, +def deb_common(config), +  provision(config, "apt-get update", "/var/cache/apt/archives/last_update",, +    "apt-get install -y", "openjdk-7-jdk"), +  provision(config, "yum check-update", "/var/cache/yum/last_update",, +    "yum install -y", "java-1.7.0-openjdk-devel"), +  provision(config, "dnf check-update", "/var/cache/dnf/last_update",, +    "dnf install -y", "java-1.8.0-openjdk-devel"), +def provision(config, update_command, update_tracking_file, install_command, java_package), +      if [ ! -f /tmp/update ] || [ "x$(find /tmp/update -mtime +0)" == "x/tmp/update" ]; then, +          sudo #{update_command} || true, +      sudo #{install_command} $1, +      sudo /tmp/bats/install.sh /usr, +      sudo rm -rf /tmp/bats, +++ b/TESTING.asciidoc, +or run wheezy and trusty:, +mvn -Dtests.vagrant -pl qa/vagrant verify -DboxesToTest='wheezy, trusty', +* wheezy aka Debian 7, the current debian oldstable distribution, +++ b/Vagrantfile, +  config.vm.define "wheezy" do |config|, +    config.vm.box = "debian/wheezy64", +    deb_common(config), +  end, +    deb_common(config), +    # TODO switch from chef to boxcutter to provide?, +    config.vm.box = "chef/centos-6.6", +    rpm_common(config), +    # TODO switch from chef to boxcutter to provide?, +    config.vm.box = "chef/centos-7.0", +    rpm_common(config), +    rpm_common(config), +    dnf_common(config), +  config.vm.synced_folder "", "/elasticsearch", +  # Ubuntu is noisy, +  deb_common(config), +end, +, +def deb_common(config), +  provision(config, "apt-get update", "/var/cache/apt/archives/last_update",, +    "apt-get install -y", "openjdk-7-jdk"), +  provision(config, "yum check-update", "/var/cache/yum/last_update",, +    "yum install -y", "java-1.7.0-openjdk-devel"), +  provision(config, "dnf check-update", "/var/cache/dnf/last_update",, +    "dnf install -y", "java-1.8.0-openjdk-devel"), +def provision(config, update_command, update_tracking_file, install_command, java_package), +      if [ ! -f /tmp/update ] || [ "x$(find /tmp/update -mtime +0)" == "x/tmp/update" ]; then, +          sudo #{update_command} || true, +      sudo #{install_command} $1, +      sudo /tmp/bats/install.sh /usr, +      sudo rm -rf /tmp/bats, +++ b/core/LICENSE.txt, +, +                                 Apache License, +                           Version 2.0, January 2004, +                        http://www.apache.org/licenses/, +, +   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION, +, +   1. Definitions., +, +      "License" shall mean the terms and conditions for use, reproduction,, +      and distribution as defined by Sections 1 through 9 of this document., +, +      "Licensor" shall mean the copyright owner or entity authorized by, +      the copyright owner that is granting the License., +, +      "Legal Entity" shall mean the union of the acting entity and all, +      other entities that control, are controlled by, or are under common, +      control with that entity. For the purposes of this definition,, +      "control" means (i) the power, direct or indirect, to cause the, +      direction or management of such entity, whether by contract or, +      otherwise, or (ii) ownership of fifty percent (50%) or more of the, +      outstanding shares, or (iii) beneficial ownership of such entity., +]