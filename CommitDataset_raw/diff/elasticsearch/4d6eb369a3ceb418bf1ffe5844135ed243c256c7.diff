[+++ b/src/test/java/org/elasticsearch/action/admin/cluster/stats/ClusterStatsTests.java, +import org.elasticsearch.action.admin.cluster.health.ClusterHealthResponse;, +import org.elasticsearch.client.Requests;, +import static org.hamcrest.Matchers.is;, +, +@ClusterScope(scope = ElasticsearchIntegrationTest.Scope.SUITE, numNodes = 1), +    private void waitForNodes(int numNodes) {, +        ClusterHealthResponse actionGet = client().admin().cluster(), +                .health(Requests.clusterHealthRequest().waitForNodes(Integer.toString(numNodes))).actionGet();, +        assertThat(actionGet.isTimedOut(), is(false));, +    }, +, +        waitForNodes(2);, +        waitForNodes(3);, +        waitForNodes(4);]