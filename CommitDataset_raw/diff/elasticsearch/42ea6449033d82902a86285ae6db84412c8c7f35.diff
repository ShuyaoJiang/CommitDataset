[+++ b/docs/reference/aggregations/bucket/significantterms-aggregation.asciidoc, +(`2 * (size * 1.5 + 10)`). To take manual control of this setting the `shard_size` parameter, +++ b/docs/reference/aggregations/bucket/significantterms-aggregation.asciidoc, +(`2 * (size * 1.5 + 10)`). To take manual control of this setting the `shard_size` parameter, +++ b/docs/reference/aggregations/bucket/significanttext-aggregation.asciidoc, +(`2 * (size * 1.5 + 10)`). To take manual control of this setting the `shard_size` parameter, +++ b/docs/reference/aggregations/bucket/significantterms-aggregation.asciidoc, +(`2 * (size * 1.5 + 10)`). To take manual control of this setting the `shard_size` parameter, +++ b/docs/reference/aggregations/bucket/significanttext-aggregation.asciidoc, +(`2 * (size * 1.5 + 10)`). To take manual control of this setting the `shard_size` parameter, +++ b/docs/reference/aggregations/bucket/terms-aggregation.asciidoc, +The default `shard_size` is `(size * 1.5 + 10)`., +++ b/docs/reference/aggregations/bucket/significantterms-aggregation.asciidoc, +(`2 * (size * 1.5 + 10)`). To take manual control of this setting the `shard_size` parameter, +++ b/docs/reference/aggregations/bucket/significanttext-aggregation.asciidoc, +(`2 * (size * 1.5 + 10)`). To take manual control of this setting the `shard_size` parameter, +++ b/docs/reference/aggregations/bucket/terms-aggregation.asciidoc, +The default `shard_size` is `(size * 1.5 + 10)`., +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/BucketUtils.java, +    public static int suggestShardSideQueueSize(int finalSize) {, +++ b/docs/reference/aggregations/bucket/significantterms-aggregation.asciidoc, +(`2 * (size * 1.5 + 10)`). To take manual control of this setting the `shard_size` parameter, +++ b/docs/reference/aggregations/bucket/significanttext-aggregation.asciidoc, +(`2 * (size * 1.5 + 10)`). To take manual control of this setting the `shard_size` parameter, +++ b/docs/reference/aggregations/bucket/terms-aggregation.asciidoc, +The default `shard_size` is `(size * 1.5 + 10)`., +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/BucketUtils.java, +    public static int suggestShardSideQueueSize(int finalSize) {, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/GeoGridAggregationBuilder.java, +            shardSize = BucketUtils.suggestShardSideQueueSize(requiredSize);, +++ b/docs/reference/aggregations/bucket/significantterms-aggregation.asciidoc, +(`2 * (size * 1.5 + 10)`). To take manual control of this setting the `shard_size` parameter, +++ b/docs/reference/aggregations/bucket/significanttext-aggregation.asciidoc, +(`2 * (size * 1.5 + 10)`). To take manual control of this setting the `shard_size` parameter, +++ b/docs/reference/aggregations/bucket/terms-aggregation.asciidoc, +The default `shard_size` is `(size * 1.5 + 10)`., +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/BucketUtils.java, +    public static int suggestShardSideQueueSize(int finalSize) {, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/GeoGridAggregationBuilder.java, +            shardSize = BucketUtils.suggestShardSideQueueSize(requiredSize);, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantTermsAggregatorFactory.java, +            bucketCountThresholds.setShardSize(2 * BucketUtils.suggestShardSideQueueSize(bucketCountThresholds.getRequiredSize()));, +++ b/docs/reference/aggregations/bucket/significantterms-aggregation.asciidoc, +(`2 * (size * 1.5 + 10)`). To take manual control of this setting the `shard_size` parameter, +++ b/docs/reference/aggregations/bucket/significanttext-aggregation.asciidoc, +(`2 * (size * 1.5 + 10)`). To take manual control of this setting the `shard_size` parameter, +++ b/docs/reference/aggregations/bucket/terms-aggregation.asciidoc, +The default `shard_size` is `(size * 1.5 + 10)`., +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/BucketUtils.java, +    public static int suggestShardSideQueueSize(int finalSize) {, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/GeoGridAggregationBuilder.java, +            shardSize = BucketUtils.suggestShardSideQueueSize(requiredSize);, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantTermsAggregatorFactory.java, +            bucketCountThresholds.setShardSize(2 * BucketUtils.suggestShardSideQueueSize(bucketCountThresholds.getRequiredSize()));, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantTextAggregatorFactory.java, +            bucketCountThresholds.setShardSize(2 * BucketUtils.suggestShardSideQueueSize(bucketCountThresholds.getRequiredSize()));, +++ b/docs/reference/aggregations/bucket/significantterms-aggregation.asciidoc, +(`2 * (size * 1.5 + 10)`). To take manual control of this setting the `shard_size` parameter, +++ b/docs/reference/aggregations/bucket/significanttext-aggregation.asciidoc, +(`2 * (size * 1.5 + 10)`). To take manual control of this setting the `shard_size` parameter, +++ b/docs/reference/aggregations/bucket/terms-aggregation.asciidoc, +The default `shard_size` is `(size * 1.5 + 10)`., +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/BucketUtils.java, +    public static int suggestShardSideQueueSize(int finalSize) {, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/GeoGridAggregationBuilder.java, +            shardSize = BucketUtils.suggestShardSideQueueSize(requiredSize);, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantTermsAggregatorFactory.java, +            bucketCountThresholds.setShardSize(2 * BucketUtils.suggestShardSideQueueSize(bucketCountThresholds.getRequiredSize()));, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantTextAggregatorFactory.java, +            bucketCountThresholds.setShardSize(2 * BucketUtils.suggestShardSideQueueSize(bucketCountThresholds.getRequiredSize()));, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsAggregatorFactory.java, +            bucketCountThresholds.setShardSize(BucketUtils.suggestShardSideQueueSize(bucketCountThresholds.getRequiredSize()));, +++ b/docs/reference/aggregations/bucket/significantterms-aggregation.asciidoc, +(`2 * (size * 1.5 + 10)`). To take manual control of this setting the `shard_size` parameter, +++ b/docs/reference/aggregations/bucket/significanttext-aggregation.asciidoc, +(`2 * (size * 1.5 + 10)`). To take manual control of this setting the `shard_size` parameter, +++ b/docs/reference/aggregations/bucket/terms-aggregation.asciidoc, +The default `shard_size` is `(size * 1.5 + 10)`., +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/BucketUtils.java, +    public static int suggestShardSideQueueSize(int finalSize) {, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/GeoGridAggregationBuilder.java, +            shardSize = BucketUtils.suggestShardSideQueueSize(requiredSize);, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantTermsAggregatorFactory.java, +            bucketCountThresholds.setShardSize(2 * BucketUtils.suggestShardSideQueueSize(bucketCountThresholds.getRequiredSize()));, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/significant/SignificantTextAggregatorFactory.java, +            bucketCountThresholds.setShardSize(2 * BucketUtils.suggestShardSideQueueSize(bucketCountThresholds.getRequiredSize()));, +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsAggregatorFactory.java, +            bucketCountThresholds.setShardSize(BucketUtils.suggestShardSideQueueSize(bucketCountThresholds.getRequiredSize()));, +++ b/server/src/test/java/org/elasticsearch/search/aggregations/bucket/BucketUtilsTests.java, +                () -> BucketUtils.suggestShardSideQueueSize(0));, +            final int shardSize = BucketUtils.suggestShardSideQueueSize( size);, +            final int shardSize = BucketUtils.suggestShardSideQueueSize( size);, +++ b/docs/reference/aggregations/bucket/significantterms-aggregation.asciidoc, +(`2 * (size * 1.5 + 10)`). To take manual control of this setting the `shard_size` parameter, +++ b/docs/reference/aggregations/bucket/significanttext-aggregation.asciidoc, +(`2 * (size * 1.5 + 10)`). To take manual control of this setting the `shard_size` parameter, +++ b/docs/reference/aggregations/bucket/terms-aggregation.asciidoc, +The default `shard_size` is `(size * 1.5 + 10)`., +++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/BucketUtils.java, +    public static int suggestShardSideQueueSize(int finalSize) {]