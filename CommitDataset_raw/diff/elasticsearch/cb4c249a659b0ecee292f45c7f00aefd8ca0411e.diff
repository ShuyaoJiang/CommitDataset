[+++ b/src/main/java/org/elasticsearch/search/highlight/HighlightPhase.java, +                    while (true) {, +                        boolean extracted = false;, +                            extracted = true;, +                            extracted = true;, +                                extracted = true;, +                        if (!extracted) {, +                            break;, +                        }, +                    }, +, +++ b/src/main/java/org/elasticsearch/search/highlight/HighlightPhase.java, +                    while (true) {, +                        boolean extracted = false;, +                            extracted = true;, +                            extracted = true;, +                                extracted = true;, +                        if (!extracted) {, +                            break;, +                        }, +                    }, +, +++ b/src/main/java/org/elasticsearch/search/query/QueryPhase.java, +        Filter searchFilter = context.mapperService().searchFilter(context.types());, +        if (searchFilter != null) {, +            context.parsedQuery(new ParsedQuery(new FilteredQuery(context.query(), context.filterCache().cache(searchFilter)), context.parsedQuery()));, +        }]