[+++ b/server/src/test/java/org/elasticsearch/transport/RemoteClusterConnectionTests.java, +        ActionListener<Void> listener = ActionListener.wrap(, +            x -> latch.countDown(),, +            x -> {, +                /*, +                 * This can occur on a thread submitted to the thread pool while we are closing the, +                 * remote cluster connection at the end of the test., +                 */, +                if (x instanceof CancellableThreads.ExecutionCancelledException) {, +                    try {, +                        // we should already be shutting down, +                        assertEquals(0L, latch.getCount());, +                    } finally {, +                        // ensure we count down the latch on failure as well to not prevent failing tests from ending, +                        latch.countDown();, +                    }, +                    return;, +                }, +            }, +        );]