[+++ b/core/src/main/java/org/elasticsearch/rest/support/RestUtils.java, +        if (!decodingNeeded(s, size)) {, +            return s;, +        }, +        final byte[] buf = new byte[size];, +        int pos = decode(s, size, buf);, +        return new String(buf, 0, pos, charset);, +    }, +, +    @SuppressWarnings("fallthrough"), +    private static boolean decodingNeeded(String s, int size) {, +        boolean decodingNeeded = false;, +                    decodingNeeded = true;, +        return decodingNeeded;, +, +    @SuppressWarnings("fallthrough"), +    private static int decode(String s, int size, byte[] buf) {, +                        throw new IllegalArgumentException("unterminated escape sequence at end of string: " + s);, +                        throw new IllegalArgumentException("partial escape sequence at end of string: " + s);, +        return pos;]