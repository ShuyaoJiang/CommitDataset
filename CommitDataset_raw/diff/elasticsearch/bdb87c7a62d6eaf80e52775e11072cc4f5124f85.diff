[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/function/sort/DoubleFieldsFunctionDataComparator.java, +import org.elasticsearch.script.ExecutableSearchScript;, +    public static FieldComparatorSource comparatorSource(ExecutableSearchScript script) {, +        private final ExecutableSearchScript script;, +        private InnerSource(ExecutableSearchScript script) {, +    private final ExecutableSearchScript script;, +    public DoubleFieldsFunctionDataComparator(int numHits, ExecutableSearchScript script) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/function/sort/DoubleFieldsFunctionDataComparator.java, +import org.elasticsearch.script.ExecutableSearchScript;, +    public static FieldComparatorSource comparatorSource(ExecutableSearchScript script) {, +        private final ExecutableSearchScript script;, +        private InnerSource(ExecutableSearchScript script) {, +    private final ExecutableSearchScript script;, +    public DoubleFieldsFunctionDataComparator(int numHits, ExecutableSearchScript script) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/function/sort/StringFieldsFunctionDataComparator.java, +import org.elasticsearch.script.ExecutableSearchScript;, +    public static FieldComparatorSource comparatorSource(ExecutableSearchScript script) {, +        private final ExecutableSearchScript script;, +        private InnerSource(ExecutableSearchScript script) {, +    private final ExecutableSearchScript script;, +    public StringFieldsFunctionDataComparator(int numHits, ExecutableSearchScript script) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/function/sort/DoubleFieldsFunctionDataComparator.java, +import org.elasticsearch.script.ExecutableSearchScript;, +    public static FieldComparatorSource comparatorSource(ExecutableSearchScript script) {, +        private final ExecutableSearchScript script;, +        private InnerSource(ExecutableSearchScript script) {, +    private final ExecutableSearchScript script;, +    public DoubleFieldsFunctionDataComparator(int numHits, ExecutableSearchScript script) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/function/sort/StringFieldsFunctionDataComparator.java, +import org.elasticsearch.script.ExecutableSearchScript;, +    public static FieldComparatorSource comparatorSource(ExecutableSearchScript script) {, +        private final ExecutableSearchScript script;, +        private InnerSource(ExecutableSearchScript script) {, +    private final ExecutableSearchScript script;, +    public StringFieldsFunctionDataComparator(int numHits, ExecutableSearchScript script) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/xcontent/CustomScoreQueryParser.java, +import org.elasticsearch.script.ExecutableSearchScript;, +        ExecutableSearchScript searchScript = new ExecutableSearchScript(context.lookup(), scriptLang, script, vars, parseContext.scriptService());, +        private final ExecutableSearchScript script;, +        private ScriptScoreFunction(ExecutableSearchScript script) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/function/sort/DoubleFieldsFunctionDataComparator.java, +import org.elasticsearch.script.ExecutableSearchScript;, +    public static FieldComparatorSource comparatorSource(ExecutableSearchScript script) {, +        private final ExecutableSearchScript script;, +        private InnerSource(ExecutableSearchScript script) {, +    private final ExecutableSearchScript script;, +    public DoubleFieldsFunctionDataComparator(int numHits, ExecutableSearchScript script) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/function/sort/StringFieldsFunctionDataComparator.java, +import org.elasticsearch.script.ExecutableSearchScript;, +    public static FieldComparatorSource comparatorSource(ExecutableSearchScript script) {, +        private final ExecutableSearchScript script;, +        private InnerSource(ExecutableSearchScript script) {, +    private final ExecutableSearchScript script;, +    public StringFieldsFunctionDataComparator(int numHits, ExecutableSearchScript script) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/xcontent/CustomScoreQueryParser.java, +import org.elasticsearch.script.ExecutableSearchScript;, +        ExecutableSearchScript searchScript = new ExecutableSearchScript(context.lookup(), scriptLang, script, vars, parseContext.scriptService());, +        private final ExecutableSearchScript script;, +        private ScriptScoreFunction(ExecutableSearchScript script) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/xcontent/ScriptFilterParser.java, +import org.elasticsearch.script.ExecutableSearchScript;, +        private final ExecutableSearchScript searchScript;, +            this.searchScript = new ExecutableSearchScript(context.lookup(), scriptLang, script, params, scriptService);, +            private final ExecutableSearchScript searchScript;, +            public ScriptDocSet(IndexReader reader, ExecutableSearchScript searchScript) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/function/sort/DoubleFieldsFunctionDataComparator.java, +import org.elasticsearch.script.ExecutableSearchScript;, +    public static FieldComparatorSource comparatorSource(ExecutableSearchScript script) {, +        private final ExecutableSearchScript script;, +        private InnerSource(ExecutableSearchScript script) {, +    private final ExecutableSearchScript script;, +    public DoubleFieldsFunctionDataComparator(int numHits, ExecutableSearchScript script) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/field/function/sort/StringFieldsFunctionDataComparator.java, +import org.elasticsearch.script.ExecutableSearchScript;, +    public static FieldComparatorSource comparatorSource(ExecutableSearchScript script) {, +        private final ExecutableSearchScript script;, +        private InnerSource(ExecutableSearchScript script) {, +    private final ExecutableSearchScript script;, +    public StringFieldsFunctionDataComparator(int numHits, ExecutableSearchScript script) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/xcontent/CustomScoreQueryParser.java, +import org.elasticsearch.script.ExecutableSearchScript;, +        ExecutableSearchScript searchScript = new ExecutableSearchScript(context.lookup(), scriptLang, script, vars, parseContext.scriptService());, +        private final ExecutableSearchScript script;, +        private ScriptScoreFunction(ExecutableSearchScript script) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/xcontent/ScriptFilterParser.java, +import org.elasticsearch.script.ExecutableSearchScript;, +        private final ExecutableSearchScript searchScript;, +            this.searchScript = new ExecutableSearchScript(context.lookup(), scriptLang, script, params, scriptService);, +            private final ExecutableSearchScript searchScript;, +            public ScriptDocSet(IndexReader reader, ExecutableSearchScript searchScript) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/script/ExecutableSearchScript.java, +/*, + * Licensed to Elastic Search and Shay Banon under one, + * or more contributor license agreements.  See the NOTICE file, + * distributed with this work for additional information, + * regarding copyright ownership. Elastic Search licenses this, + * file to you under the Apache License, Version 2.0 (the, + * "License"); you may not use this file except in compliance, + * with the License.  You may obtain a copy of the License at, + *]