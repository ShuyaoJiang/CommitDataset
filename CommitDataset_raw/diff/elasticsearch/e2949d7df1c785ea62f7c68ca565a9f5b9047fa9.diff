[+++ b/src/main/java/org/elasticsearch/search/aggregations/InternalAggregation.java, +    public final InternalAggregation reduce(ReduceContext reduceContext) {, +        return doReduce(reduceContext);, +    }, +, +    public abstract InternalAggregation doReduce(ReduceContext reduceContext);, +++ b/src/main/java/org/elasticsearch/search/aggregations/InternalAggregation.java, +    public final InternalAggregation reduce(ReduceContext reduceContext) {, +        return doReduce(reduceContext);, +    }, +, +    public abstract InternalAggregation doReduce(ReduceContext reduceContext);, +++ b/src/main/java/org/elasticsearch/search/aggregations/InternalAggregations.java, +            reducedAggregations.add(first.doReduce(new InternalAggregation.ReduceContext(aggregations, context.bigArrays(), context.scriptService())));, +++ b/src/main/java/org/elasticsearch/search/aggregations/InternalAggregation.java, +    public final InternalAggregation reduce(ReduceContext reduceContext) {, +        return doReduce(reduceContext);, +    }, +, +    public abstract InternalAggregation doReduce(ReduceContext reduceContext);, +++ b/src/main/java/org/elasticsearch/search/aggregations/InternalAggregations.java, +            reducedAggregations.add(first.doReduce(new InternalAggregation.ReduceContext(aggregations, context.bigArrays(), context.scriptService())));, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/InternalSingleBucketAggregation.java, +    public InternalAggregation doReduce(ReduceContext reduceContext) {, +++ b/src/main/java/org/elasticsearch/search/aggregations/InternalAggregation.java, +    public final InternalAggregation reduce(ReduceContext reduceContext) {, +        return doReduce(reduceContext);, +    }, +, +    public abstract InternalAggregation doReduce(ReduceContext reduceContext);, +++ b/src/main/java/org/elasticsearch/search/aggregations/InternalAggregations.java, +            reducedAggregations.add(first.doReduce(new InternalAggregation.ReduceContext(aggregations, context.bigArrays(), context.scriptService())));, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/InternalSingleBucketAggregation.java, +    public InternalAggregation doReduce(ReduceContext reduceContext) {, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/InternalFilters.java, +    public InternalAggregation doReduce(ReduceContext reduceContext) {, +++ b/src/main/java/org/elasticsearch/search/aggregations/InternalAggregation.java, +    public final InternalAggregation reduce(ReduceContext reduceContext) {, +        return doReduce(reduceContext);, +    }, +, +    public abstract InternalAggregation doReduce(ReduceContext reduceContext);, +++ b/src/main/java/org/elasticsearch/search/aggregations/InternalAggregations.java, +            reducedAggregations.add(first.doReduce(new InternalAggregation.ReduceContext(aggregations, context.bigArrays(), context.scriptService())));, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/InternalSingleBucketAggregation.java, +    public InternalAggregation doReduce(ReduceContext reduceContext) {, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/InternalFilters.java, +    public InternalAggregation doReduce(ReduceContext reduceContext) {, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/InternalGeoHashGrid.java, +    public InternalGeoHashGrid doReduce(ReduceContext reduceContext) {, +++ b/src/main/java/org/elasticsearch/search/aggregations/InternalAggregation.java, +    public final InternalAggregation reduce(ReduceContext reduceContext) {, +        return doReduce(reduceContext);, +    }, +, +    public abstract InternalAggregation doReduce(ReduceContext reduceContext);, +++ b/src/main/java/org/elasticsearch/search/aggregations/InternalAggregations.java, +            reducedAggregations.add(first.doReduce(new InternalAggregation.ReduceContext(aggregations, context.bigArrays(), context.scriptService())));, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/InternalSingleBucketAggregation.java, +    public InternalAggregation doReduce(ReduceContext reduceContext) {, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/InternalFilters.java, +    public InternalAggregation doReduce(ReduceContext reduceContext) {, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/InternalGeoHashGrid.java, +    public InternalGeoHashGrid doReduce(ReduceContext reduceContext) {, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalHistogram.java, +    public InternalAggregation doReduce(ReduceContext reduceContext) {, +++ b/src/main/java/org/elasticsearch/search/aggregations/InternalAggregation.java, +    public final InternalAggregation reduce(ReduceContext reduceContext) {, +        return doReduce(reduceContext);, +    }, +, +    public abstract InternalAggregation doReduce(ReduceContext reduceContext);, +++ b/src/main/java/org/elasticsearch/search/aggregations/InternalAggregations.java, +            reducedAggregations.add(first.doReduce(new InternalAggregation.ReduceContext(aggregations, context.bigArrays(), context.scriptService())));, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/InternalSingleBucketAggregation.java, +    public InternalAggregation doReduce(ReduceContext reduceContext) {, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/InternalFilters.java, +    public InternalAggregation doReduce(ReduceContext reduceContext) {, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/InternalGeoHashGrid.java, +    public InternalGeoHashGrid doReduce(ReduceContext reduceContext) {, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalHistogram.java, +    public InternalAggregation doReduce(ReduceContext reduceContext) {, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/range/InternalRange.java, +    public InternalAggregation doReduce(ReduceContext reduceContext) {, +++ b/src/main/java/org/elasticsearch/search/aggregations/InternalAggregation.java, +    public final InternalAggregation reduce(ReduceContext reduceContext) {, +        return doReduce(reduceContext);, +    }, +, +    public abstract InternalAggregation doReduce(ReduceContext reduceContext);, +++ b/src/main/java/org/elasticsearch/search/aggregations/InternalAggregations.java, +            reducedAggregations.add(first.doReduce(new InternalAggregation.ReduceContext(aggregations, context.bigArrays(), context.scriptService())));, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/InternalSingleBucketAggregation.java, +    public InternalAggregation doReduce(ReduceContext reduceContext) {, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/filters/InternalFilters.java, +    public InternalAggregation doReduce(ReduceContext reduceContext) {, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/InternalGeoHashGrid.java, +    public InternalGeoHashGrid doReduce(ReduceContext reduceContext) {, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/InternalHistogram.java, +    public InternalAggregation doReduce(ReduceContext reduceContext) {]