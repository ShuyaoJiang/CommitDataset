[+++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/PrecisionAtN.java, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/PrecisionAtN.java, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/ReciprocalRank.java, +import java.util.Objects;, +        //builder.startObject(NAME);, +        //builder.endObject();, +, +    @Override, +    public final boolean equals(Object obj) {, +        if (this == obj) {, +            return true;, +        }, +        if (obj == null || getClass() != obj.getClass()) {, +            return false;, +        }, +        ReciprocalRank other = (ReciprocalRank) obj;, +        return Objects.equals(maxAcceptableRank, other.maxAcceptableRank);, +    }, +    , +    @Override, +    public final int hashCode() {, +        return Objects.hash(getClass(), maxAcceptableRank);, +    }, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/PrecisionAtN.java, +++ b/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/ReciprocalRank.java, +import java.util.Objects;, +        //builder.startObject(NAME);, +        //builder.endObject();, +, +    @Override, +    public final boolean equals(Object obj) {, +        if (this == obj) {, +            return true;, +        }, +        if (obj == null || getClass() != obj.getClass()) {, +            return false;, +        }, +        ReciprocalRank other = (ReciprocalRank) obj;, +        return Objects.equals(maxAcceptableRank, other.maxAcceptableRank);, +    }, +    , +    @Override, +    public final int hashCode() {, +        return Objects.hash(getClass(), maxAcceptableRank);, +    }, +++ b/modules/rank-eval/src/test/java/org/elasticsearch/index/rankeval/ReciprocalRankTests.java, +import java.io.IOException;, +public class ReciprocalRankTests extends XContentRoundtripTestCase<ReciprocalRank> {, +, +    public void testXContentRoundtrip() throws IOException {, +        int position = randomIntBetween(0, 1000);, +, +        ReciprocalRank testItem = new ReciprocalRank(position);, +        roundtrip(testItem);, +    }, +]