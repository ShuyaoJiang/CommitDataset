[+++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/indexlifecycle/ShrinkSetAliasStep.java, +import org.elasticsearch.cluster.metadata.AliasMetaData;, +        // copy over other aliases from original index, +        indexMetaData.getAliases().values().spliterator().forEachRemaining(aliasMetaDataObjectCursor -> {, +            AliasMetaData aliasMetaDataToAdd = aliasMetaDataObjectCursor.value;, +            // inherit all alias properties except `is_write_index`, +            aliasesRequest.addAliasAction(IndicesAliasesRequest.AliasActions.add(), +                .index(targetIndexName).alias(aliasMetaDataToAdd.alias()), +                .indexRouting(aliasMetaDataToAdd.indexRouting()), +                .searchRouting(aliasMetaDataToAdd.searchRouting()), +                .filter(aliasMetaDataToAdd.filter() == null ? null : aliasMetaDataToAdd.filter().string()), +                .writeIndex(null));, +        });, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/indexlifecycle/ShrinkSetAliasStep.java, +import org.elasticsearch.cluster.metadata.AliasMetaData;, +        // copy over other aliases from original index, +        indexMetaData.getAliases().values().spliterator().forEachRemaining(aliasMetaDataObjectCursor -> {, +            AliasMetaData aliasMetaDataToAdd = aliasMetaDataObjectCursor.value;, +            // inherit all alias properties except `is_write_index`, +            aliasesRequest.addAliasAction(IndicesAliasesRequest.AliasActions.add(), +                .index(targetIndexName).alias(aliasMetaDataToAdd.alias()), +                .indexRouting(aliasMetaDataToAdd.indexRouting()), +                .searchRouting(aliasMetaDataToAdd.searchRouting()), +                .filter(aliasMetaDataToAdd.filter() == null ? null : aliasMetaDataToAdd.filter().string()), +                .writeIndex(null));, +        });, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/indexlifecycle/ShrinkStep.java, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/indexlifecycle/ShrinkSetAliasStep.java, +import org.elasticsearch.cluster.metadata.AliasMetaData;, +        // copy over other aliases from original index, +        indexMetaData.getAliases().values().spliterator().forEachRemaining(aliasMetaDataObjectCursor -> {, +            AliasMetaData aliasMetaDataToAdd = aliasMetaDataObjectCursor.value;, +            // inherit all alias properties except `is_write_index`, +            aliasesRequest.addAliasAction(IndicesAliasesRequest.AliasActions.add(), +                .index(targetIndexName).alias(aliasMetaDataToAdd.alias()), +                .indexRouting(aliasMetaDataToAdd.indexRouting()), +                .searchRouting(aliasMetaDataToAdd.searchRouting()), +                .filter(aliasMetaDataToAdd.filter() == null ? null : aliasMetaDataToAdd.filter().string()), +                .writeIndex(null));, +        });, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/indexlifecycle/ShrinkStep.java, +++ b/x-pack/plugin/core/src/test/java/org/elasticsearch/xpack/core/indexlifecycle/ShrinkSetAliasStepTests.java, +import org.elasticsearch.cluster.metadata.AliasMetaData;, +        IndexMetaData.Builder indexMetaDataBuilder = IndexMetaData.builder(randomAlphaOfLength(10)).settings(settings(Version.CURRENT)), +            .numberOfShards(randomIntBetween(1, 5)).numberOfReplicas(randomIntBetween(0, 5));, +        AliasMetaData.Builder aliasBuilder = AliasMetaData.builder(randomAlphaOfLengthBetween(3, 10));, +        if (randomBoolean()) {, +            aliasBuilder.routing(randomAlphaOfLengthBetween(3, 10));, +        }, +        if (randomBoolean()) {, +            aliasBuilder.searchRouting(randomAlphaOfLengthBetween(3, 10));, +        }, +        if (randomBoolean()) {, +            aliasBuilder.indexRouting(randomAlphaOfLengthBetween(3, 10));, +        }, +        String aliasMetaDataFilter = randomBoolean() ? null : "{\"term\":{\"year\":2016}}";, +        aliasBuilder.filter(aliasMetaDataFilter);, +        aliasBuilder.writeIndex(randomBoolean());, +        AliasMetaData aliasMetaData = aliasBuilder.build();, +        IndexMetaData indexMetaData = indexMetaDataBuilder.putAlias(aliasMetaData).build();, +            IndicesAliasesRequest.AliasActions.add().index(shrunkenIndex).alias(sourceIndex),, +            IndicesAliasesRequest.AliasActions.add().index(shrunkenIndex).alias(aliasMetaData.alias()), +                .searchRouting(aliasMetaData.searchRouting()).indexRouting(aliasMetaData.indexRouting()), +                .filter(aliasMetaDataFilter).writeIndex(null));, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/indexlifecycle/ShrinkSetAliasStep.java, +import org.elasticsearch.cluster.metadata.AliasMetaData;, +        // copy over other aliases from original index, +        indexMetaData.getAliases().values().spliterator().forEachRemaining(aliasMetaDataObjectCursor -> {, +            AliasMetaData aliasMetaDataToAdd = aliasMetaDataObjectCursor.value;, +            // inherit all alias properties except `is_write_index`, +            aliasesRequest.addAliasAction(IndicesAliasesRequest.AliasActions.add(), +                .index(targetIndexName).alias(aliasMetaDataToAdd.alias()), +                .indexRouting(aliasMetaDataToAdd.indexRouting()), +                .searchRouting(aliasMetaDataToAdd.searchRouting()), +                .filter(aliasMetaDataToAdd.filter() == null ? null : aliasMetaDataToAdd.filter().string()), +                .writeIndex(null));, +        });, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/indexlifecycle/ShrinkStep.java, +++ b/x-pack/plugin/core/src/test/java/org/elasticsearch/xpack/core/indexlifecycle/ShrinkSetAliasStepTests.java, +import org.elasticsearch.cluster.metadata.AliasMetaData;, +        IndexMetaData.Builder indexMetaDataBuilder = IndexMetaData.builder(randomAlphaOfLength(10)).settings(settings(Version.CURRENT)), +            .numberOfShards(randomIntBetween(1, 5)).numberOfReplicas(randomIntBetween(0, 5));, +        AliasMetaData.Builder aliasBuilder = AliasMetaData.builder(randomAlphaOfLengthBetween(3, 10));, +        if (randomBoolean()) {, +            aliasBuilder.routing(randomAlphaOfLengthBetween(3, 10));, +        }, +        if (randomBoolean()) {, +            aliasBuilder.searchRouting(randomAlphaOfLengthBetween(3, 10));, +        }, +        if (randomBoolean()) {, +            aliasBuilder.indexRouting(randomAlphaOfLengthBetween(3, 10));, +        }, +        String aliasMetaDataFilter = randomBoolean() ? null : "{\"term\":{\"year\":2016}}";, +        aliasBuilder.filter(aliasMetaDataFilter);, +        aliasBuilder.writeIndex(randomBoolean());, +        AliasMetaData aliasMetaData = aliasBuilder.build();, +        IndexMetaData indexMetaData = indexMetaDataBuilder.putAlias(aliasMetaData).build();, +            IndicesAliasesRequest.AliasActions.add().index(shrunkenIndex).alias(sourceIndex),, +            IndicesAliasesRequest.AliasActions.add().index(shrunkenIndex).alias(aliasMetaData.alias()), +                .searchRouting(aliasMetaData.searchRouting()).indexRouting(aliasMetaData.indexRouting())]