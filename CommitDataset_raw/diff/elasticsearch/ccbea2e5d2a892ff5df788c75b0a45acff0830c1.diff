[+++ b/core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java, +                                throw new IllegalArgumentException("Action/metadata line [" + line + "] contains a simple value for parameter [fields] while a list is expected");, +                            } else {, +                                throw new IllegalArgumentException("Action/metadata line [" + line + "] contains an unknown parameter [" + currentFieldName + "]");, +                            }, +                        } else if (token == XContentParser.Token.START_ARRAY) {, +                            if ("fields".equals(currentFieldName)) {, +                                throw new IllegalArgumentException("Malformed action/metadata line [" + line + "], expected a simple value for field [" + currentFieldName + "] but found [" + token + "]");, +++ b/core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java, +                                throw new IllegalArgumentException("Action/metadata line [" + line + "] contains a simple value for parameter [fields] while a list is expected");, +                            } else {, +                                throw new IllegalArgumentException("Action/metadata line [" + line + "] contains an unknown parameter [" + currentFieldName + "]");, +                            }, +                        } else if (token == XContentParser.Token.START_ARRAY) {, +                            if ("fields".equals(currentFieldName)) {, +                                throw new IllegalArgumentException("Malformed action/metadata line [" + line + "], expected a simple value for field [" + currentFieldName + "] but found [" + token + "]");, +++ b/rest-api-spec/src/main/resources/rest-api-spec/api/bulk.json, +          "type": "list",]