[+++ b/core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java, +import org.elasticsearch.search.SearchModule;, +                    ResourceWatcherService.RELOAD_INTERVAL_LOW,, +                    SearchModule.INDICES_MAX_CLAUSE_COUNT_SETTING, +++ b/core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java, +import org.elasticsearch.search.SearchModule;, +                    ResourceWatcherService.RELOAD_INTERVAL_LOW,, +                    SearchModule.INDICES_MAX_CLAUSE_COUNT_SETTING, +++ b/core/src/main/java/org/elasticsearch/common/settings/SettingsModule.java, +        Settings indexSettings = settings.filter((s) -> (s.startsWith("index.") &&, +            // special case - we want to get Did you mean indices.query.bool.max_clause_count, +            // which means we need to by-pass this check for this setting, +            // TODO remove in 6.0!!, +            "index.query.bool.max_clause_count".equals(s) == false), +            && clusterSettings.get(s) == null);, +++ b/core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java, +import org.elasticsearch.search.SearchModule;, +                    ResourceWatcherService.RELOAD_INTERVAL_LOW,, +                    SearchModule.INDICES_MAX_CLAUSE_COUNT_SETTING, +++ b/core/src/main/java/org/elasticsearch/common/settings/SettingsModule.java, +        Settings indexSettings = settings.filter((s) -> (s.startsWith("index.") &&, +            // special case - we want to get Did you mean indices.query.bool.max_clause_count, +            // which means we need to by-pass this check for this setting, +            // TODO remove in 6.0!!, +            "index.query.bool.max_clause_count".equals(s) == false), +            && clusterSettings.get(s) == null);, +++ b/core/src/main/java/org/elasticsearch/search/SearchModule.java, +import org.elasticsearch.common.settings.Setting;, +    public static final Setting<Integer> INDICES_MAX_CLAUSE_COUNT_SETTING = Setting.intSetting("indices.query.bool.max_clause_count",, +        1024, 1, Integer.MAX_VALUE, Setting.Property.NodeScope);, +        BooleanQuery.setMaxClauseCount(INDICES_MAX_CLAUSE_COUNT_SETTING.get(settings));, +++ b/core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java, +import org.elasticsearch.search.SearchModule;, +                    ResourceWatcherService.RELOAD_INTERVAL_LOW,, +                    SearchModule.INDICES_MAX_CLAUSE_COUNT_SETTING, +++ b/core/src/main/java/org/elasticsearch/common/settings/SettingsModule.java, +        Settings indexSettings = settings.filter((s) -> (s.startsWith("index.") &&, +            // special case - we want to get Did you mean indices.query.bool.max_clause_count, +            // which means we need to by-pass this check for this setting, +            // TODO remove in 6.0!!, +            "index.query.bool.max_clause_count".equals(s) == false), +            && clusterSettings.get(s) == null);, +++ b/core/src/main/java/org/elasticsearch/search/SearchModule.java, +import org.elasticsearch.common.settings.Setting;, +    public static final Setting<Integer> INDICES_MAX_CLAUSE_COUNT_SETTING = Setting.intSetting("indices.query.bool.max_clause_count",, +        1024, 1, Integer.MAX_VALUE, Setting.Property.NodeScope);, +        BooleanQuery.setMaxClauseCount(INDICES_MAX_CLAUSE_COUNT_SETTING.get(settings));, +++ b/core/src/test/java/org/elasticsearch/common/settings/SettingsModuleTests.java, +, +    public void testOldMaxClauseCountSetting() {, +            Settings settings = Settings.builder().put("index.query.bool.max_clause_count", 1024).build();, +            SettingsModule module = new SettingsModule(settings);, +            IllegalArgumentException ex = expectThrows(IllegalArgumentException.class,, +                () -> assertInstanceBinding(module, Settings.class, (s) -> s == settings));, +            assertEquals("unknown setting [index.query.bool.max_clause_count] did you mean [indices.query.bool.max_clause_count]?",, +                ex.getMessage());, +    }, +++ b/core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java, +import org.elasticsearch.search.SearchModule;, +                    ResourceWatcherService.RELOAD_INTERVAL_LOW,, +                    SearchModule.INDICES_MAX_CLAUSE_COUNT_SETTING, +++ b/core/src/main/java/org/elasticsearch/common/settings/SettingsModule.java, +        Settings indexSettings = settings.filter((s) -> (s.startsWith("index.") &&, +            // special case - we want to get Did you mean indices.query.bool.max_clause_count, +            // which means we need to by-pass this check for this setting, +            // TODO remove in 6.0!!, +            "index.query.bool.max_clause_count".equals(s) == false), +            && clusterSettings.get(s) == null);, +++ b/core/src/main/java/org/elasticsearch/search/SearchModule.java, +import org.elasticsearch.common.settings.Setting;, +    public static final Setting<Integer> INDICES_MAX_CLAUSE_COUNT_SETTING = Setting.intSetting("indices.query.bool.max_clause_count",, +        1024, 1, Integer.MAX_VALUE, Setting.Property.NodeScope);, +        BooleanQuery.setMaxClauseCount(INDICES_MAX_CLAUSE_COUNT_SETTING.get(settings));, +++ b/core/src/test/java/org/elasticsearch/common/settings/SettingsModuleTests.java, +, +    public void testOldMaxClauseCountSetting() {, +            Settings settings = Settings.builder().put("index.query.bool.max_clause_count", 1024).build();, +            SettingsModule module = new SettingsModule(settings);, +            IllegalArgumentException ex = expectThrows(IllegalArgumentException.class,, +                () -> assertInstanceBinding(module, Settings.class, (s) -> s == settings));, +            assertEquals("unknown setting [index.query.bool.max_clause_count] did you mean [indices.query.bool.max_clause_count]?",, +                ex.getMessage());, +    }, +++ b/docs/reference/migration/migrate_5_0/settings.asciidoc, +, +==== Search settings, +, +The setting `index.query.bool.max_clause_count` has been removed. In order to, +set the maximum number of boolean clauses `indices.query.bool.max_clause_count`, +should be used instead., +++ b/core/src/main/java/org/elasticsearch/common/settings/ClusterSettings.java, +import org.elasticsearch.search.SearchModule;, +                    ResourceWatcherService.RELOAD_INTERVAL_LOW,, +                    SearchModule.INDICES_MAX_CLAUSE_COUNT_SETTING, +++ b/core/src/main/java/org/elasticsearch/common/settings/SettingsModule.java, +        Settings indexSettings = settings.filter((s) -> (s.startsWith("index.") &&, +            // special case - we want to get Did you mean indices.query.bool.max_clause_count, +            // which means we need to by-pass this check for this setting, +            // TODO remove in 6.0!!, +            "index.query.bool.max_clause_count".equals(s) == false)]