[+++ b/src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java, +    protected final boolean docValues;, +++ b/src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java, +    protected final boolean docValues;, +++ b/src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java, +import org.elasticsearch.index.codec.docvaluesformat.DocValuesFormatService;, +import org.elasticsearch.index.mapper.core.TypeParsers;, +                && Defaults.DEFAULT_TIMESTAMP.equals(defaultTimestamp), +                && Defaults.DOC_VALUES == hasDocValues()) {, +        if (includeDefaults || hasDocValues() != Defaults.DOC_VALUES) {, +            builder.field(TypeParsers.DOC_VALUES, docValues);, +        }, +        if (docValuesFormat != null) {, +            if (includeDefaults || !docValuesFormat.name().equals(defaultDocValuesFormat())) {, +                builder.field(DOC_VALUES_FORMAT, docValuesFormat.name());, +            }, +        } else if (includeDefaults) {, +            String format = defaultDocValuesFormat();, +            if (format == null) {, +                format = DocValuesFormatService.DEFAULT_FORMAT;, +            }, +            builder.field(DOC_VALUES_FORMAT, format);, +        }, +, +++ b/src/main/java/org/elasticsearch/index/mapper/core/AbstractFieldMapper.java, +    protected final boolean docValues;, +++ b/src/main/java/org/elasticsearch/index/mapper/internal/TimestampFieldMapper.java, +import org.elasticsearch.index.codec.docvaluesformat.DocValuesFormatService;, +import org.elasticsearch.index.mapper.core.TypeParsers;, +                && Defaults.DEFAULT_TIMESTAMP.equals(defaultTimestamp), +                && Defaults.DOC_VALUES == hasDocValues()) {, +        if (includeDefaults || hasDocValues() != Defaults.DOC_VALUES) {, +            builder.field(TypeParsers.DOC_VALUES, docValues);, +        }, +        if (docValuesFormat != null) {, +            if (includeDefaults || !docValuesFormat.name().equals(defaultDocValuesFormat())) {, +                builder.field(DOC_VALUES_FORMAT, docValuesFormat.name());, +            }, +        } else if (includeDefaults) {, +            String format = defaultDocValuesFormat();, +            if (format == null) {, +                format = DocValuesFormatService.DEFAULT_FORMAT;, +            }, +            builder.field(DOC_VALUES_FORMAT, format);, +        }, +, +++ b/src/test/java/org/elasticsearch/index/mapper/timestamp/TimestampMappingTests.java, +import org.elasticsearch.common.lucene.Lucene;, +import org.elasticsearch.index.codec.docvaluesformat.DocValuesFormatService;, +                assertThat(docMapper.timestampFieldMapper().hasDocValues(), equalTo(false));, +                assertThat(docMapper.timestampFieldMapper().docValuesFormatProvider(), equalTo(null));, +                .field("doc_values", true), +                .field("doc_values_format", Lucene.LATEST_DOC_VALUES_FORMAT), +        assertThat(docMapper.timestampFieldMapper().hasDocValues(), equalTo(true));, +        assertThat(docMapper.timestampFieldMapper().docValuesFormatProvider().name(), equalTo(Lucene.LATEST_DOC_VALUES_FORMAT));]