[+++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java, +++ b/core/src/main/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryBuilder.java, +            filter = in.readNamedWriteable(QueryBuilder.class);, +            scoreFunction = in.readNamedWriteable(ScoreFunctionBuilder.class);, +            out.writeNamedWriteable(filter);, +            out.writeNamedWriteable(scoreFunction);, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java, +++ b/core/src/main/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryBuilder.java, +            filter = in.readNamedWriteable(QueryBuilder.class);, +            scoreFunction = in.readNamedWriteable(ScoreFunctionBuilder.class);, +            out.writeNamedWriteable(filter);, +            out.writeNamedWriteable(scoreFunction);, +++ b/core/src/main/java/org/elasticsearch/search/suggest/SuggestBuilder.java, +            suggestions.put(in.readString(), in.readNamedWriteable(SuggestionBuilder.class));, +            out.writeNamedWriteable(suggestion.getValue());, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamInput.java, +++ b/core/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java, +++ b/core/src/main/java/org/elasticsearch/index/query/functionscore/FunctionScoreQueryBuilder.java, +            filter = in.readNamedWriteable(QueryBuilder.class);, +            scoreFunction = in.readNamedWriteable(ScoreFunctionBuilder.class);, +            out.writeNamedWriteable(filter);, +            out.writeNamedWriteable(scoreFunction);, +++ b/core/src/main/java/org/elasticsearch/search/suggest/SuggestBuilder.java, +            suggestions.put(in.readString(), in.readNamedWriteable(SuggestionBuilder.class));, +            out.writeNamedWriteable(suggestion.getValue());, +++ b/core/src/test/java/org/elasticsearch/search/suggest/AbstractSuggestionBuilderTestCase.java, +            output.writeNamedWriteable(original);, +                return (SB) in.readNamedWriteable(SuggestionBuilder.class);]