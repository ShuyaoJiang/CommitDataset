[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/unit/DistanceUnit.java, +        }, +, +        @Override public double toMiles(double distance) {, +        }, +, +        @Override public double toKilometers(double distance) {, +, +        }, +    },, +        }, +, +        @Override public double toMiles(double distance) {, +        }, +, +        @Override public double toKilometers(double distance) {, +, +        }, +    };, +    protected final double distancePerDegree;, +        this.distancePerDegree = earthCircumference / 360;, +    }, +, +    public double getEarthCircumference() {, +        return earthCircumference;, +    }, +, +    public double getEarthRadius() {, +        return earthRadius;, +    }, +, +    public double getDistancePerDegree() {, +        return distancePerDegree;, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/unit/DistanceUnit.java, +        }, +, +        @Override public double toMiles(double distance) {, +        }, +, +        @Override public double toKilometers(double distance) {, +, +        }, +    },, +        }, +, +        @Override public double toMiles(double distance) {, +        }, +, +        @Override public double toKilometers(double distance) {, +, +        }, +    };, +    protected final double distancePerDegree;, +        this.distancePerDegree = earthCircumference / 360;, +    }, +, +    public double getEarthCircumference() {, +        return earthCircumference;, +    }, +, +    public double getEarthRadius() {, +        return earthRadius;, +    }, +, +    public double getDistancePerDegree() {, +        return distancePerDegree;, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/geo/GeoPointDocFieldData.java, +    public double factorDistance(double lat, double lon) {, +        return fieldData.factorDistance(docId, DistanceUnit.MILES, lat, lon);, +    }, +, +    public double arcDistance(double lat, double lon) {, +        return fieldData.arcDistance(docId, DistanceUnit.MILES, lat, lon);, +    }, +, +    public double arcDistanceInKm(double lat, double lon) {, +        return fieldData.arcDistance(docId, DistanceUnit.KILOMETERS, lat, lon);, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/common/unit/DistanceUnit.java, +        }, +, +        @Override public double toMiles(double distance) {, +        }, +, +        @Override public double toKilometers(double distance) {, +, +        }, +    },, +        }, +, +        @Override public double toMiles(double distance) {, +        }, +, +        @Override public double toKilometers(double distance) {, +, +        }, +    };, +    protected final double distancePerDegree;, +        this.distancePerDegree = earthCircumference / 360;]