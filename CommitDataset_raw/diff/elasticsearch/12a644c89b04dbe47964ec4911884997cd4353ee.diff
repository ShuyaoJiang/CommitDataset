[+++ b/src/main/java/org/elasticsearch/common/compress/CompressedIndexInput.java, +    private long currentUncompressedChunkPointer;, +        long metaDataPosition = in.readLong();, +        long headerLength = in.getFilePointer();, +        this.currentUncompressedChunkPointer = 0;, +        return currentUncompressedChunkPointer + position;, +        if (idx != currentOffsetIdx) {, +        currentUncompressedChunkPointer = currentOffsetIdx * uncompressed.length;, +++ b/src/main/java/org/elasticsearch/common/compress/CompressedIndexInput.java, +    private long currentUncompressedChunkPointer;, +        long metaDataPosition = in.readLong();, +        long headerLength = in.getFilePointer();, +        this.currentUncompressedChunkPointer = 0;, +        return currentUncompressedChunkPointer + position;, +        if (idx != currentOffsetIdx) {, +        currentUncompressedChunkPointer = currentOffsetIdx * uncompressed.length;, +++ b/src/test/java/org/elasticsearch/test/unit/common/compress/CompressIndexInputOutputTests.java, +, +        int size = 50;, +        long[] positions = new long[size];, +        String[] data = new String[size];, +        for (int i = 0; i < 50; i++) {, +            positions[i] = out.getFilePointer();, +            data[i] = RandomStringGenerator.random(12345);, +            out.writeString(data[i]);, +        }, +, +, +        for (int i = 0; i < size; i++) {, +            in.seek(positions[i]);, +            assertThat(in.getFilePointer(), equalTo(positions[i]));, +            assertThat(in.readString(), equalTo(data[i]));, +        }]