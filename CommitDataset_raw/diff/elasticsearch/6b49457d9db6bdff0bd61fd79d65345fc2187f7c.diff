[+++ b/src/main/java/org/elasticsearch/common/lucene/docset/DocIdSets.java, +        FixedBitSet fixedBitSet = new FixedBitSet(reader.maxDoc());, +        do {, +            fixedBitSet.set(doc);, +            doc = it.nextDoc();, +        } while (doc != DocIdSetIterator.NO_MORE_DOCS);, +        return fixedBitSet;, +        return toFixedBitSet(iterator, reader.maxDoc());, +    public static FixedBitSet toFixedBitSet(DocIdSetIterator iterator, int numBits) throws IOException {, +        while ((doc = iterator.nextDoc()) != DocIdSetIterator.NO_MORE_DOCS) {]