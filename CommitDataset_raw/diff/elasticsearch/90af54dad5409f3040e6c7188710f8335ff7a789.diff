[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/bulk/BulkShardRequest.java, +            if (item != null) {, +                out.writeBoolean(true);, +            } else {, +                out.writeBoolean(false);, +            }, +            if (in.readBoolean()) {, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/bulk/BulkShardRequest.java, +            if (item != null) {, +                out.writeBoolean(true);, +            } else {, +                out.writeBoolean(false);, +            }, +            if (in.readBoolean()) {, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java, +                    // nullify the request so it won't execute on the replicas, +                    request.items()[i] = null;, +                    // nullify the request so it won't execute on the replicas, +                    request.items()[i] = null;, +            if (item == null) {, +                continue;, +            }]