[+++ b/src/main/java/org/elasticsearch/common/blobstore/BlobContainer.java, +++ b/src/main/java/org/elasticsearch/common/blobstore/BlobContainer.java, +++ b/src/main/java/org/elasticsearch/common/blobstore/fs/FsBlobContainer.java, +import java.nio.file.DirectoryStream;, +import java.nio.file.Files;, +import java.nio.file.Path;, +import java.nio.file.StandardCopyOption;, +        return listBlobsByPrefix(null);, +, +    @Override, +    public ImmutableMap<String, BlobMetaData> listBlobsByPrefix(String blobNamePrefix) throws IOException {, +, +        blobNamePrefix = blobNamePrefix == null ? "" : blobNamePrefix;, +        try (DirectoryStream<Path> stream = Files.newDirectoryStream(path, blobNamePrefix + "*")) {, +            for (Path file : stream) {, +        }, +++ b/src/main/java/org/elasticsearch/common/blobstore/BlobContainer.java, +++ b/src/main/java/org/elasticsearch/common/blobstore/fs/FsBlobContainer.java, +import java.nio.file.DirectoryStream;, +import java.nio.file.Files;, +import java.nio.file.Path;, +import java.nio.file.StandardCopyOption;, +        return listBlobsByPrefix(null);, +, +    @Override, +    public ImmutableMap<String, BlobMetaData> listBlobsByPrefix(String blobNamePrefix) throws IOException {, +, +        blobNamePrefix = blobNamePrefix == null ? "" : blobNamePrefix;, +        try (DirectoryStream<Path> stream = Files.newDirectoryStream(path, blobNamePrefix + "*")) {, +            for (Path file : stream) {, +        }, +++ b/src/main/java/org/elasticsearch/common/blobstore/support/AbstractBlobContainer.java, +import java.io.IOException;, +        ImmutableMap<String, BlobMetaData> blobs = listBlobsByPrefix(blobNamePrefix);, +++ b/src/main/java/org/elasticsearch/common/blobstore/BlobContainer.java, +++ b/src/main/java/org/elasticsearch/common/blobstore/fs/FsBlobContainer.java, +import java.nio.file.DirectoryStream;, +import java.nio.file.Files;, +import java.nio.file.Path;, +import java.nio.file.StandardCopyOption;, +        return listBlobsByPrefix(null);, +, +    @Override, +    public ImmutableMap<String, BlobMetaData> listBlobsByPrefix(String blobNamePrefix) throws IOException {, +, +        blobNamePrefix = blobNamePrefix == null ? "" : blobNamePrefix;, +        try (DirectoryStream<Path> stream = Files.newDirectoryStream(path, blobNamePrefix + "*")) {, +            for (Path file : stream) {, +        }, +++ b/src/main/java/org/elasticsearch/common/blobstore/support/AbstractBlobContainer.java, +import java.io.IOException;, +        ImmutableMap<String, BlobMetaData> blobs = listBlobsByPrefix(blobNamePrefix);, +++ b/src/main/java/org/elasticsearch/common/blobstore/url/URLBlobContainer.java, +    /**, +     * This operation is not supported by URLBlobContainer, +     */, +    @Override, +    public ImmutableMap<String, BlobMetaData> listBlobsByPrefix(String blobNamePrefix) throws IOException {, +        throw new UnsupportedOperationException("URL repository doesn't support this operation");, +    }, +, +++ b/src/main/java/org/elasticsearch/common/blobstore/BlobContainer.java, +++ b/src/main/java/org/elasticsearch/common/blobstore/fs/FsBlobContainer.java, +import java.nio.file.DirectoryStream;, +import java.nio.file.Files;, +import java.nio.file.Path;, +import java.nio.file.StandardCopyOption;, +        return listBlobsByPrefix(null);, +, +    @Override, +    public ImmutableMap<String, BlobMetaData> listBlobsByPrefix(String blobNamePrefix) throws IOException {, +, +        blobNamePrefix = blobNamePrefix == null ? "" : blobNamePrefix;, +        try (DirectoryStream<Path> stream = Files.newDirectoryStream(path, blobNamePrefix + "*")) {, +            for (Path file : stream) {, +        }, +++ b/src/main/java/org/elasticsearch/common/blobstore/support/AbstractBlobContainer.java, +import java.io.IOException;, +        ImmutableMap<String, BlobMetaData> blobs = listBlobsByPrefix(blobNamePrefix);, +++ b/src/main/java/org/elasticsearch/common/blobstore/url/URLBlobContainer.java, +    /**, +     * This operation is not supported by URLBlobContainer, +     */, +    @Override, +    public ImmutableMap<String, BlobMetaData> listBlobsByPrefix(String blobNamePrefix) throws IOException {, +        throw new UnsupportedOperationException("URL repository doesn't support this operation");, +    }, +, +++ b/src/test/java/org/elasticsearch/snapshots/mockstore/BlobContainerWrapper.java, +import org.elasticsearch.common.blobstore.BlobContainer;, +++ b/src/main/java/org/elasticsearch/common/blobstore/BlobContainer.java, +++ b/src/main/java/org/elasticsearch/common/blobstore/fs/FsBlobContainer.java, +import java.nio.file.DirectoryStream;, +import java.nio.file.Files;, +import java.nio.file.Path;, +import java.nio.file.StandardCopyOption;, +        return listBlobsByPrefix(null);, +, +    @Override, +    public ImmutableMap<String, BlobMetaData> listBlobsByPrefix(String blobNamePrefix) throws IOException {]