[+++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkByScrollAction.java, +        if (task.isCancelled() || false == mainRequest.isRefresh() || destinationIndices.isEmpty()) {, +++ b/modules/reindex/src/main/java/org/elasticsearch/index/reindex/AbstractAsyncBulkByScrollAction.java, +        if (task.isCancelled() || false == mainRequest.isRefresh() || destinationIndices.isEmpty()) {, +++ b/modules/reindex/src/test/java/org/elasticsearch/index/reindex/AsyncBulkByScrollActionTests.java, +        refreshTestCase(null, true, false);, +    public void testRefreshFalseDoesntExecuteRefresh() throws Exception {, +        refreshTestCase(false, true, false);, +    public void testRefreshTrueExecutesRefresh() throws Exception {, +        refreshTestCase(true, true, true);, +    public void testRefreshTrueSkipsRefreshIfNoDestinationIndexes() throws Exception {, +        refreshTestCase(true, false, false);, +    }, +, +    private void refreshTestCase(Boolean refresh, boolean addDestinationIndexes, boolean shouldRefresh) {, +        if (addDestinationIndexes) {, +        }]