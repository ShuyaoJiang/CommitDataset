[+++ b/plugins/cloud-azure/src/main/java/org/elasticsearch/cloud/azure/blobstore/AzureBlobContainer.java, +        return keyPath + (blobName == null ? "" : blobName);, +++ b/plugins/cloud-azure/src/main/java/org/elasticsearch/cloud/azure/blobstore/AzureBlobContainer.java, +        return keyPath + (blobName == null ? "" : blobName);, +++ b/plugins/cloud-azure/src/main/java/org/elasticsearch/cloud/azure/storage/AzureStorageServiceImpl.java, +        CloudBlobContainer blobContainer = client.getContainerReference(container);, +        if (blobContainer.exists()) {, +            for (ListBlobItem blobItem : blobContainer.listBlobs(keyPath + (prefix == null ? "" : prefix))) {, +, +                // uri.getPath is of the form /container/keyPath.* and we want to strip off the /container/, +                // this requires 1 + container.length() + 1, with each 1 corresponding to one of the /, +                String blobPath = uri.getPath().substring(1 + container.length() + 1);, +, +                CloudBlockBlob blob = blobContainer.getBlockBlobReference(blobPath);, +, +                // fetch the blob attributes from Azure (getBlockBlobReference does not do this), +                // this is needed to retrieve the blob length (among other metadata) from Azure Storage, +                blob.downloadAttributes();, +, +                BlobProperties properties = blob.getProperties();, +                String name = blobPath.substring(keyPath.length());]