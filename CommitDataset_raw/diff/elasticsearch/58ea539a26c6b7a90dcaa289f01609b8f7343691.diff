[+++ b/src/main/java/org/elasticsearch/action/search/TransportClearScrollAction.java, +import org.elasticsearch.transport.BaseTransportRequestHandler;, +import org.elasticsearch.transport.TransportChannel;, +import org.elasticsearch.transport.TransportService;, +    public TransportClearScrollAction(Settings settings, TransportService transportService, ThreadPool threadPool, ClusterService clusterService, SearchServiceTransportAction searchServiceTransportAction) {, +        transportService.registerHandler(ClearScrollAction.NAME, new TransportHandler());, +    class TransportHandler extends BaseTransportRequestHandler<ClearScrollRequest> {, +, +        @Override, +        public ClearScrollRequest newInstance() {, +            return new ClearScrollRequest();, +        }, +, +        @Override, +        public void messageReceived(final ClearScrollRequest request, final TransportChannel channel) throws Exception {, +            // no need to use threaded listener, since we just send a response, +            request.listenerThreaded(false);, +            execute(request, new ActionListener<ClearScrollResponse>() {, +                @Override, +                public void onResponse(ClearScrollResponse response) {, +                    try {, +                        channel.sendResponse(response);, +                    } catch (Throwable e) {, +                        onFailure(e);, +                    }, +                }, +, +                @Override, +                public void onFailure(Throwable e) {, +                    try {, +                        channel.sendResponse(e);, +                    } catch (Exception e1) {, +                        logger.warn("Failed to send error response for action [clear_sc] and request [" + request + "]", e1);, +                    }, +                }, +            });, +        }, +, +        @Override, +        public String executor() {, +            return ThreadPool.Names.SAME;, +        }, +    }, +]