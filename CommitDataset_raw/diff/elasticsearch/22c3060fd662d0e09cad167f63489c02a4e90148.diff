[+++ b/docs/en/ml/limitations.asciidoc, +, +[float], +=== Jobs must be stopped before upgrades, +, +You must stop any {ml} jobs that are running before you start the upgrade, +process. For more information, see <<stopping-ml>> and, +{stack-ref}/upgrading-elastic-stack.html[Upgrading the Elastic Stack]., +++ b/docs/en/ml/limitations.asciidoc, +, +[float], +=== Jobs must be stopped before upgrades, +, +You must stop any {ml} jobs that are running before you start the upgrade, +process. For more information, see <<stopping-ml>> and, +{stack-ref}/upgrading-elastic-stack.html[Upgrading the Elastic Stack]., +++ b/docs/en/ml/troubleshooting.asciidoc, +, +[[ml-upgradedf]], +, +=== Upgraded nodes fail to start due to {dfeed} issues, +, +This problem occurs when you have a {dfeed} that contains search or query, +domain specific language (DSL) that was discontinued. For example, if you, +created a {dfeed} query in 5.x using search syntax that was deprecated in 5.x, +and removed in 6.0, you must fix the {dfeed} before you upgrade to 6.0., +, +*Symptoms:*, +, +* If {ref}/logging.html#deprecation-logging[deprecation logging] is enabled, +before the upgrade, deprecation messages are generated when the {dfeeds} attempt, +to retrieve data., +* After the upgrade, nodes fail to start and the error indicates that they, +failed to read the local state., +, +*Resolution:*, +, +Before you upgrade, identify the problematic search or query DSL. In 5.6.5 and, +later, the Upgrade Assistant detects these scenarios. If you cannot fix the DSL, +before the upgrade, you must delete the {dfeed} then re-create it with valid DSL, +after the upgrade., +, +If you do not fix or delete the {dfeed} before the upgrade, in order to successfully, +start the failing nodes you must downgrade the nodes then fix the problem per, +above., +, +See also {stack-ref}/upgrading-elastic-stack.html[Upgrading the Elastic Stack].]