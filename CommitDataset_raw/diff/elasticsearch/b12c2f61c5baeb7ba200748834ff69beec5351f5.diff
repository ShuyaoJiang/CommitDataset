[+++ b/client/rest-high-level/build.gradle, +++ b/client/rest-high-level/build.gradle, +++ b/client/rest-high-level/src/main/java/org/elasticsearch/client/RequestConverters.java, +, +        if (searchRequest.source() != null) {, +            request.setEntity(createEntity(searchRequest.source(), REQUEST_BODY_CONTENT_TYPE));, +        }, +        return request;, +++ b/client/rest-high-level/build.gradle, +++ b/client/rest-high-level/src/main/java/org/elasticsearch/client/RequestConverters.java, +, +        if (searchRequest.source() != null) {, +            request.setEntity(createEntity(searchRequest.source(), REQUEST_BODY_CONTENT_TYPE));, +        }, +        return request;, +++ b/client/rest-high-level/src/main/java/org/elasticsearch/client/RestHighLevelClient.java, +++ b/client/rest-high-level/build.gradle, +++ b/client/rest-high-level/src/main/java/org/elasticsearch/client/RequestConverters.java, +, +        if (searchRequest.source() != null) {, +            request.setEntity(createEntity(searchRequest.source(), REQUEST_BODY_CONTENT_TYPE));, +        }, +        return request;, +++ b/client/rest-high-level/src/main/java/org/elasticsearch/client/RestHighLevelClient.java, +++ b/client/rest-high-level/src/test/java/org/elasticsearch/client/RequestConvertersTests.java, +        expectedParams.put(RestSearchAction.TYPED_KEYS_PARAM, "true");, +        if (randomBoolean()) {, +            searchRequest.routing(randomAlphaOfLengthBetween(3, 10));, +            expectedParams.put("routing", searchRequest.routing());, +        }, +        if (randomBoolean()) {, +            searchRequest.preference(randomAlphaOfLengthBetween(3, 10));, +            expectedParams.put("preference", searchRequest.preference());, +        }, +        if (randomBoolean()) {, +            searchRequest.searchType(randomFrom(SearchType.values()));, +        }, +        expectedParams.put("search_type", searchRequest.searchType().name().toLowerCase(Locale.ROOT));, +        if (randomBoolean()) {, +            searchRequest.requestCache(randomBoolean());, +            expectedParams.put("request_cache", Boolean.toString(searchRequest.requestCache()));, +        }, +        if (randomBoolean()) {, +            searchRequest.allowPartialSearchResults(randomBoolean());, +            expectedParams.put("allow_partial_search_results", Boolean.toString(searchRequest.allowPartialSearchResults()));, +        }, +        if (randomBoolean()) {, +            searchRequest.setBatchedReduceSize(randomIntBetween(2, Integer.MAX_VALUE));, +        }, +        expectedParams.put("batched_reduce_size", Integer.toString(searchRequest.getBatchedReduceSize()));, +        if (randomBoolean()) {, +            searchRequest.scroll(randomTimeValue());, +            expectedParams.put("scroll", searchRequest.scroll().keepAlive().getStringRep());, +        }, +, +++ b/client/rest-high-level/build.gradle, +++ b/client/rest-high-level/src/main/java/org/elasticsearch/client/RequestConverters.java, +, +        if (searchRequest.source() != null) {, +            request.setEntity(createEntity(searchRequest.source(), REQUEST_BODY_CONTENT_TYPE));, +        }, +        return request;, +++ b/client/rest-high-level/src/main/java/org/elasticsearch/client/RestHighLevelClient.java, +++ b/client/rest-high-level/src/test/java/org/elasticsearch/client/RequestConvertersTests.java, +        expectedParams.put(RestSearchAction.TYPED_KEYS_PARAM, "true");, +        if (randomBoolean()) {, +            searchRequest.routing(randomAlphaOfLengthBetween(3, 10));, +            expectedParams.put("routing", searchRequest.routing());, +        }, +        if (randomBoolean()) {, +            searchRequest.preference(randomAlphaOfLengthBetween(3, 10));, +            expectedParams.put("preference", searchRequest.preference());, +        }, +        if (randomBoolean()) {, +            searchRequest.searchType(randomFrom(SearchType.values()));, +        }, +        expectedParams.put("search_type", searchRequest.searchType().name().toLowerCase(Locale.ROOT));, +        if (randomBoolean()) {, +            searchRequest.requestCache(randomBoolean());, +            expectedParams.put("request_cache", Boolean.toString(searchRequest.requestCache()));, +        }, +        if (randomBoolean()) {, +            searchRequest.allowPartialSearchResults(randomBoolean());, +            expectedParams.put("allow_partial_search_results", Boolean.toString(searchRequest.allowPartialSearchResults()));, +        }, +        if (randomBoolean()) {, +            searchRequest.setBatchedReduceSize(randomIntBetween(2, Integer.MAX_VALUE));, +        }, +        expectedParams.put("batched_reduce_size", Integer.toString(searchRequest.getBatchedReduceSize()));, +        if (randomBoolean()) {, +            searchRequest.scroll(randomTimeValue());, +            expectedParams.put("scroll", searchRequest.scroll().keepAlive().getStringRep());, +        }, +, +++ b/client/rest-high-level/src/test/java/org/elasticsearch/client/SearchIT.java, +++ b/client/rest-high-level/build.gradle, +++ b/client/rest-high-level/src/main/java/org/elasticsearch/client/RequestConverters.java, +, +        if (searchRequest.source() != null) {, +            request.setEntity(createEntity(searchRequest.source(), REQUEST_BODY_CONTENT_TYPE));]