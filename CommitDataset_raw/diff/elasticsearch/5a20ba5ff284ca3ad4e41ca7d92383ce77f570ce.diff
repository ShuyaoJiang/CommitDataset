[+++ b/src/main/java/org/elasticsearch/plugins/PluginManager.java, +    public static final class ACTION {, +        public static final int NONE = 0;, +        public static final int INSTALL = 1;, +        public static final int REMOVE = 2;, +        public static final int LIST = 3;, +    }, +        String pluginName = null;, +        int action = ACTION.NONE;, +, +        try {, +                if ("-u".equals(command) || "--url".equals(command), +                        // Deprecated commands, +                        || "url".equals(command) || "-url".equals(command)) {, +                    url = args[++c];, +                } else if ("-v".equals(command) || "--v".equals(command), +                        || "verbose".equals(command) || "-verbose".equals(command)) {, +                    verbose = true;, +                } else if (command.equals("-i") || command.equals("--install"), +                    action = ACTION.INSTALL;, +, +                } else if (command.equals("-r") || command.equals("--remove"), +                        // Deprecated commands, +                        || command.equals("remove") || command.equals("-remove")) {, +                    pluginName = args[++c];, +                    action = ACTION.REMOVE;, +                } else if (command.equals("-l") || command.equals("--list")) {, +                    action = ACTION.LIST;, +                } else if (command.equals("-h") || command.equals("--help")) {, +                    displayHelp(null);, +                } else {, +                    displayHelp("Command [" + args[c] + "] unknown.");, +                    // Unknown command. We break..., +                    System.exit(1);, +                }, +            }, +        } catch (Exception e) {, +            displayHelp("Error while parsing options: " + e.getClass().getSimpleName() +, +                    ": " + e.getMessage());, +            System.exit(1);, +        }, +, +        if (action > ACTION.NONE) {, +            PluginManager pluginManager = new PluginManager(initialSettings.v2(), url);, +, +            switch (action) {, +                case ACTION.INSTALL:, +                    try {, +                    break;, +                case ACTION.REMOVE:, +                    break;, +                case ACTION.LIST:, +                    break;]