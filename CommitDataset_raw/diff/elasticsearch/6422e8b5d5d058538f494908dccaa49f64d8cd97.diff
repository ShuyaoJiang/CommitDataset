[+++ b/src/main/java/org/elasticsearch/alerts/AlertManager.java, +import org.elasticsearch.action.index.IndexResponse;, +import org.elasticsearch.action.update.UpdateResponse;, +    public IndexResponse addAlert(Alert alert) {, +        IndexResponse indexResponse = null;, +            indexResponse = alertsStore.createAlert(alert);, +        return indexResponse;, +    public IndexResponse updateAlert(Alert alert, boolean updateMap) {, +            return null;, +        return alertsStore.updateAlert(alert, updateMap);, +++ b/src/main/java/org/elasticsearch/alerts/AlertManager.java, +import org.elasticsearch.action.index.IndexResponse;, +import org.elasticsearch.action.update.UpdateResponse;, +    public IndexResponse addAlert(Alert alert) {, +        IndexResponse indexResponse = null;, +            indexResponse = alertsStore.createAlert(alert);, +        return indexResponse;, +    public IndexResponse updateAlert(Alert alert, boolean updateMap) {, +            return null;, +        return alertsStore.updateAlert(alert, updateMap);, +++ b/src/main/java/org/elasticsearch/alerts/AlertsStore.java, +import org.elasticsearch.action.update.UpdateResponse;, +    public IndexResponse createAlert(Alert alert) throws IOException {, +            return persistAlert(alert.alertName(), jsonBuilder.bytes(), IndexRequest.OpType.CREATE);, +    public IndexResponse updateAlert(Alert alert) {, +    public IndexResponse updateAlert(Alert alert, boolean updateMap) {, +        return response;, +    private IndexResponse persistAlert(String alertName, BytesReference alertSource, IndexRequest.OpType opType) {, +        return client.index(indexRequest).actionGet();, +++ b/src/main/java/org/elasticsearch/alerts/AlertManager.java, +import org.elasticsearch.action.index.IndexResponse;, +import org.elasticsearch.action.update.UpdateResponse;, +    public IndexResponse addAlert(Alert alert) {, +        IndexResponse indexResponse = null;, +            indexResponse = alertsStore.createAlert(alert);, +        return indexResponse;, +    public IndexResponse updateAlert(Alert alert, boolean updateMap) {, +            return null;, +        return alertsStore.updateAlert(alert, updateMap);, +++ b/src/main/java/org/elasticsearch/alerts/AlertsStore.java, +import org.elasticsearch.action.update.UpdateResponse;, +    public IndexResponse createAlert(Alert alert) throws IOException {, +            return persistAlert(alert.alertName(), jsonBuilder.bytes(), IndexRequest.OpType.CREATE);, +    public IndexResponse updateAlert(Alert alert) {, +    public IndexResponse updateAlert(Alert alert, boolean updateMap) {, +        return response;, +    private IndexResponse persistAlert(String alertName, BytesReference alertSource, IndexRequest.OpType opType) {, +        return client.index(indexRequest).actionGet();, +++ b/src/main/java/org/elasticsearch/alerts/transport/actions/create/CreateAlertResponse.java, +import org.elasticsearch.action.index.IndexResponse;, +    private IndexResponse indexResponse;, +    public CreateAlertResponse(IndexResponse indexResponse) {, +        this.indexResponse = indexResponse;, +        indexResponse = null;, +    public IndexResponse indexResponse(){, +        return indexResponse;, +    public void indexResponse(IndexResponse indexResponse){, +        this.indexResponse = indexResponse;, +        out.writeBoolean(indexResponse != null);, +        if (indexResponse != null) {, +            indexResponse.writeTo(out);, +        }, +        if (in.readBoolean()) {, +            indexResponse = new IndexResponse();, +            indexResponse.readFrom(in);, +        }, +++ b/src/main/java/org/elasticsearch/alerts/AlertManager.java, +import org.elasticsearch.action.index.IndexResponse;, +import org.elasticsearch.action.update.UpdateResponse;, +    public IndexResponse addAlert(Alert alert) {, +        IndexResponse indexResponse = null;, +            indexResponse = alertsStore.createAlert(alert);, +        return indexResponse;, +    public IndexResponse updateAlert(Alert alert, boolean updateMap) {, +            return null;, +        return alertsStore.updateAlert(alert, updateMap);, +++ b/src/main/java/org/elasticsearch/alerts/AlertsStore.java, +import org.elasticsearch.action.update.UpdateResponse;, +    public IndexResponse createAlert(Alert alert) throws IOException {, +            return persistAlert(alert.alertName(), jsonBuilder.bytes(), IndexRequest.OpType.CREATE);, +    public IndexResponse updateAlert(Alert alert) {, +    public IndexResponse updateAlert(Alert alert, boolean updateMap) {, +        return response;, +    private IndexResponse persistAlert(String alertName, BytesReference alertSource, IndexRequest.OpType opType) {, +        return client.index(indexRequest).actionGet();, +++ b/src/main/java/org/elasticsearch/alerts/transport/actions/create/CreateAlertResponse.java, +import org.elasticsearch.action.index.IndexResponse;, +    private IndexResponse indexResponse;, +    public CreateAlertResponse(IndexResponse indexResponse) {, +        this.indexResponse = indexResponse;, +        indexResponse = null;, +    public IndexResponse indexResponse(){, +        return indexResponse;, +    public void indexResponse(IndexResponse indexResponse){, +        this.indexResponse = indexResponse;, +        out.writeBoolean(indexResponse != null);, +        if (indexResponse != null) {, +            indexResponse.writeTo(out);, +        }, +        if (in.readBoolean()) {]