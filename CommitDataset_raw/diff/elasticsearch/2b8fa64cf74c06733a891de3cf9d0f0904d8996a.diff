[+++ b/test/framework/src/main/java/org/elasticsearch/test/ESIntegTestCase.java, +        Map<String, Set<String>> indicesAndTypes = new HashMap<>();, +            final Set<String> types = indicesAndTypes.computeIfAbsent(builder.request().index(), index -> new HashSet<>());, +            types.add(builder.request().type());, +        Set<List<String>> bogusIds = new HashSet<>(); // (index, type, id), +                String id = "bogus_doc_" + randomRealisticUnicodeOfLength(unicodeLen) + Integer.toString(dummmyDocIdGenerator.incrementAndGet());, +                Map.Entry<String, Set<String>> indexAndTypes = RandomPicks.randomFrom(random, indicesAndTypes.entrySet());, +                String index = indexAndTypes.getKey();, +                String type = RandomPicks.randomFrom(random, indexAndTypes.getValue());, +                bogusIds.add(Arrays.asList(index, type, id));, +                // We configure a routing key in case the mapping requires it, +                builders.add(client().prepareIndex(index, type, id).setSource("{}", XContentType.JSON).setRouting(id));, +        final String[] indices = indicesAndTypes.keySet().toArray(new String[0]);, +            for (List<String> doc : bogusIds) {, +                assertEquals("failed to delete a dummy doc [" + doc.get(0) + "][" + doc.get(2) + "]",, +                    client().prepareDelete(doc.get(0), doc.get(1), doc.get(2)).setRouting(doc.get(2)).get().getResult());]