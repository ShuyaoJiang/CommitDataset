[+++ b/server/src/test/java/org/elasticsearch/snapshots/SharedClusterSnapshotRestoreIT.java, +import org.elasticsearch.ElasticsearchException;, +    public void testSnapshotFileFailureDuringSnapshot() {, +, +            final Throwable cause = ex.getCause();, +            assertThat(cause, notNullValue());, +            final Throwable rootCause = new ElasticsearchException(cause).getRootCause();, +            assertThat(rootCause, notNullValue());, +            assertThat(rootCause.getMessage(), containsString("Random IOException"));]