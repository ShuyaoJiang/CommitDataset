[+++ b/core/src/main/java/org/elasticsearch/discovery/zen/MasterFaultDetection.java, +++ b/core/src/main/java/org/elasticsearch/discovery/zen/MasterFaultDetection.java, +++ b/core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java, +                        // check to see that we monitor the correct master of the cluster, +                        if (masterFD.masterNode() == null || !masterFD.masterNode().equals(newClusterState.nodes().getMasterNode())) {, +                            masterFD.restart(newClusterState.nodes().getMasterNode(), "new cluster state received and we are monitoring the wrong master [" + masterFD.masterNode() + "]");, +                        }, +++ b/core/src/main/java/org/elasticsearch/discovery/zen/MasterFaultDetection.java, +++ b/core/src/main/java/org/elasticsearch/discovery/zen/ZenDiscovery.java, +                        // check to see that we monitor the correct master of the cluster, +                        if (masterFD.masterNode() == null || !masterFD.masterNode().equals(newClusterState.nodes().getMasterNode())) {, +                            masterFD.restart(newClusterState.nodes().getMasterNode(), "new cluster state received and we are monitoring the wrong master [" + masterFD.masterNode() + "]");, +                        }, +++ b/core/src/test/java/org/elasticsearch/discovery/ZenFaultDetectionTests.java, +        masterFD.restart(nodeB, "test");, +        masterFDNodeA.restart(nodeB, "test");, +        masterFDNodeB.restart(nodeB, "test");]