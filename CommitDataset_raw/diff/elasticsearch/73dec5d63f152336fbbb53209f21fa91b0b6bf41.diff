[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/indices/memory/IndexingMemoryBufferController.java, +    private final ByteSizeValue maxShardIndexBufferSize;, +        this.maxShardIndexBufferSize = componentSettings.getAsBytesSize("max_shard_index_buffer_size", new ByteSizeValue(512, ByteSizeUnit.MB));, +        logger.debug("using index_buffer_size [{}], with min_shard_index_buffer_size [{}], max_shard_index_buffer_size [{}]", this.indexingBuffer, this.minShardIndexBufferSize, this.maxShardIndexBufferSize);, +            if (shardIndexingBufferSize.bytes() > maxShardIndexBufferSize.bytes()) {, +                shardIndexingBufferSize = maxShardIndexBufferSize;, +            }]