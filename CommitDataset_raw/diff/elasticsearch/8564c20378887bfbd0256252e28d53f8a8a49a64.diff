[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequest.java, +    private String type;, +, +    private String field;, +, +    public AnalyzeRequest type(String type) {, +        this.type = type;, +        return this;, +    }, +, +    public String type() {, +        return this.type;, +    }, +, +    public AnalyzeRequest field(String field) {, +        this.field = field;, +        return this;, +    }, +, +    public String field() {, +        return this.field;, +    }, +, +        if (in.readBoolean()) {, +            type = in.readUTF();, +        }, +        if (in.readBoolean()) {, +            field = in.readUTF();, +        }, +        writeOption(out, analyzer);, +        writeOption(out, type);, +        writeOption(out, field);, +    }, +, +    private void writeOption(StreamOutput out, String value) throws IOException {, +        if (value==null) {, +            out.writeUTF(value);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequest.java, +    private String type;, +, +    private String field;, +, +    public AnalyzeRequest type(String type) {, +        this.type = type;, +        return this;, +    }, +, +    public String type() {, +        return this.type;, +    }, +, +    public AnalyzeRequest field(String field) {, +        this.field = field;, +        return this;, +    }, +, +    public String field() {, +        return this.field;, +    }, +, +        if (in.readBoolean()) {, +            type = in.readUTF();, +        }, +        if (in.readBoolean()) {, +            field = in.readUTF();, +        }, +        writeOption(out, analyzer);, +        writeOption(out, type);, +        writeOption(out, field);, +    }, +, +    private void writeOption(StreamOutput out, String value) throws IOException {, +        if (value==null) {, +            out.writeUTF(value);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/analyze/TransportAnalyzeAction.java, +import org.elasticsearch.index.mapper.DocumentMapper;, +        String dtype = null;, +        if (request.field()!=null) field = request.field();, +        if (request.type()!=null) dtype = request.type();, +        if (request.field()!=null || request.type()!=null) {, +            final DocumentMapper mapper = indexService.mapperService().documentMapper(dtype);, +            if (mapper!=null) {, +                analyzer = mapper.mappers().indexAnalyzer();, +            }, +        }, +        if (analyzer==null && request.analyzer() != null) {, +        } else if (analyzer==null) {, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/admin/indices/analyze/AnalyzeRequest.java, +    private String type;, +, +    private String field;, +, +    public AnalyzeRequest type(String type) {, +        this.type = type;, +        return this;, +    }, +, +    public String type() {, +        return this.type;, +    }]