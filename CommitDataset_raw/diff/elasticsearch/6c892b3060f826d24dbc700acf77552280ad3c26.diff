[+++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/dataframe/DataFrameField.java, +    public static final ParseField INDEX_DOC_TYPE = new ParseField("doc_type");, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/dataframe/DataFrameField.java, +    public static final ParseField INDEX_DOC_TYPE = new ParseField("doc_type");, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/dataframe/transforms/DataFrameTransformConfig.java, +    private static final String NAME = "data_frame_transform_config";, +                    // ignored, only for internal storage: String docType = (String) args[3];, +, +                    if (lenient == false && args[4] != null) {, +                    Map<String, String> headers = (Map<String, String>) args[4];, +                    if (args[5] == null) {, +                        queryConfig = (QueryConfig) args[5];, +                    PivotConfig pivotConfig = (PivotConfig) args[6];, +        parser.declareString(optionalConstructorArg(), DataFrameField.INDEX_DOC_TYPE);, +        return NAME + "-" + transformId;, +        if (params.paramAsBoolean(DataFrameField.FOR_INTERNAL_STORAGE, false)) {, +            builder.field(DataFrameField.INDEX_DOC_TYPE.getPreferredName(), NAME);, +        }, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/dataframe/DataFrameField.java, +    public static final ParseField INDEX_DOC_TYPE = new ParseField("doc_type");, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/dataframe/transforms/DataFrameTransformConfig.java, +    private static final String NAME = "data_frame_transform_config";, +                    // ignored, only for internal storage: String docType = (String) args[3];, +, +                    if (lenient == false && args[4] != null) {, +                    Map<String, String> headers = (Map<String, String>) args[4];, +                    if (args[5] == null) {, +                        queryConfig = (QueryConfig) args[5];, +                    PivotConfig pivotConfig = (PivotConfig) args[6];, +        parser.declareString(optionalConstructorArg(), DataFrameField.INDEX_DOC_TYPE);, +        return NAME + "-" + transformId;, +        if (params.paramAsBoolean(DataFrameField.FOR_INTERNAL_STORAGE, false)) {, +            builder.field(DataFrameField.INDEX_DOC_TYPE.getPreferredName(), NAME);, +        }, +++ b/x-pack/plugin/core/src/test/java/org/elasticsearch/xpack/core/dataframe/transforms/DataFrameTransformConfigTests.java, +    public void testXContentForInternalStorage() throws IOException {, +        DataFrameTransformConfig dataFrameTransformConfig = randomDataFrameTransformConfig();, +, +        try (XContentBuilder xContentBuilder = XContentFactory.jsonBuilder()) {, +            XContentBuilder content = dataFrameTransformConfig.toXContent(xContentBuilder, getToXContentParams());, +            String doc = Strings.toString(content);, +, +            assertThat(doc, matchesPattern(".*\"doc_type\"\\s*:\\s*\"data_frame_transform_config\".*"));, +        }, +, +        try (XContentBuilder xContentBuilder = XContentFactory.jsonBuilder()) {, +            XContentBuilder content = dataFrameTransformConfig.toXContent(xContentBuilder, ToXContent.EMPTY_PARAMS);, +            String doc = Strings.toString(content);, +, +            assertFalse(doc.contains("doc_type"));, +        }, +    }, +, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/dataframe/DataFrameField.java, +    public static final ParseField INDEX_DOC_TYPE = new ParseField("doc_type");, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/dataframe/transforms/DataFrameTransformConfig.java, +    private static final String NAME = "data_frame_transform_config";, +                    // ignored, only for internal storage: String docType = (String) args[3];, +, +                    if (lenient == false && args[4] != null) {, +                    Map<String, String> headers = (Map<String, String>) args[4];, +                    if (args[5] == null) {, +                        queryConfig = (QueryConfig) args[5];, +                    PivotConfig pivotConfig = (PivotConfig) args[6];, +        parser.declareString(optionalConstructorArg(), DataFrameField.INDEX_DOC_TYPE);, +        return NAME + "-" + transformId;, +        if (params.paramAsBoolean(DataFrameField.FOR_INTERNAL_STORAGE, false)) {, +            builder.field(DataFrameField.INDEX_DOC_TYPE.getPreferredName(), NAME);, +        }, +++ b/x-pack/plugin/core/src/test/java/org/elasticsearch/xpack/core/dataframe/transforms/DataFrameTransformConfigTests.java, +    public void testXContentForInternalStorage() throws IOException {, +        DataFrameTransformConfig dataFrameTransformConfig = randomDataFrameTransformConfig();, +, +        try (XContentBuilder xContentBuilder = XContentFactory.jsonBuilder()) {, +            XContentBuilder content = dataFrameTransformConfig.toXContent(xContentBuilder, getToXContentParams());, +            String doc = Strings.toString(content);, +, +            assertThat(doc, matchesPattern(".*\"doc_type\"\\s*:\\s*\"data_frame_transform_config\".*"));, +        }, +, +        try (XContentBuilder xContentBuilder = XContentFactory.jsonBuilder()) {, +            XContentBuilder content = dataFrameTransformConfig.toXContent(xContentBuilder, ToXContent.EMPTY_PARAMS);, +            String doc = Strings.toString(content);, +, +            assertFalse(doc.contains("doc_type"));, +        }, +    }, +, +++ b/x-pack/plugin/data-frame/src/main/java/org/elasticsearch/xpack/dataframe/persistence/DataFrameInternalIndex.java, +        builder.startObject(DataFrameField.INDEX_DOC_TYPE.getPreferredName()).field(TYPE, KEYWORD).endObject();]