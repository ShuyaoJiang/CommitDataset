[+++ b/marvel/src/main/java/org/elasticsearch/marvel/MarvelPlugin.java, +import org.elasticsearch.plugins.Plugin;, +import java.util.Collections;, +public class MarvelPlugin extends Plugin {, +    public Collection<Module> nodeModules() {, +            return Collections.emptyList();, +        return Collections.<Module>singletonList(new MarvelModule());, +    public Collection<Class<? extends LifecycleComponent>> nodeServices() {, +++ b/marvel/src/main/java/org/elasticsearch/marvel/MarvelPlugin.java, +import org.elasticsearch.plugins.Plugin;, +import java.util.Collections;, +public class MarvelPlugin extends Plugin {, +    public Collection<Module> nodeModules() {, +            return Collections.emptyList();, +        return Collections.<Module>singletonList(new MarvelModule());, +    public Collection<Class<? extends LifecycleComponent>> nodeServices() {, +++ b/marvel/src/test/java/org/elasticsearch/marvel/MarvelPluginClientTests.java, +        Collection<Module> modules = plugin.nodeModules();, +        Collection<Module> modules = plugin.nodeModules();, +++ b/marvel/src/main/java/org/elasticsearch/marvel/MarvelPlugin.java, +import org.elasticsearch.plugins.Plugin;, +import java.util.Collections;, +public class MarvelPlugin extends Plugin {, +    public Collection<Module> nodeModules() {, +            return Collections.emptyList();, +        return Collections.<Module>singletonList(new MarvelModule());, +    public Collection<Class<? extends LifecycleComponent>> nodeServices() {, +++ b/marvel/src/test/java/org/elasticsearch/marvel/MarvelPluginClientTests.java, +        Collection<Module> modules = plugin.nodeModules();, +        Collection<Module> modules = plugin.nodeModules();, +++ b/marvel/src/test/java/org/elasticsearch/marvel/license/LicenseIntegrationTests.java, +import org.elasticsearch.plugins.Plugin;, +import java.util.Collections;, +    public static class MockLicensePlugin extends Plugin {, +        public Collection<Module> nodeModules() {, +            return Collections.<Module>singletonList(new InternalLicenseModule());, +++ b/marvel/src/main/java/org/elasticsearch/marvel/MarvelPlugin.java, +import org.elasticsearch.plugins.Plugin;, +import java.util.Collections;, +public class MarvelPlugin extends Plugin {, +    public Collection<Module> nodeModules() {, +            return Collections.emptyList();, +        return Collections.<Module>singletonList(new MarvelModule());, +    public Collection<Class<? extends LifecycleComponent>> nodeServices() {, +++ b/marvel/src/test/java/org/elasticsearch/marvel/MarvelPluginClientTests.java, +        Collection<Module> modules = plugin.nodeModules();, +        Collection<Module> modules = plugin.nodeModules();, +++ b/marvel/src/test/java/org/elasticsearch/marvel/license/LicenseIntegrationTests.java, +import org.elasticsearch.plugins.Plugin;, +import java.util.Collections;, +    public static class MockLicensePlugin extends Plugin {, +        public Collection<Module> nodeModules() {, +            return Collections.<Module>singletonList(new InternalLicenseModule());, +++ b/qa/pom.xml, +++ b/marvel/src/main/java/org/elasticsearch/marvel/MarvelPlugin.java, +import org.elasticsearch.plugins.Plugin;, +import java.util.Collections;, +public class MarvelPlugin extends Plugin {, +    public Collection<Module> nodeModules() {, +            return Collections.emptyList();, +        return Collections.<Module>singletonList(new MarvelModule());, +    public Collection<Class<? extends LifecycleComponent>> nodeServices() {, +++ b/marvel/src/test/java/org/elasticsearch/marvel/MarvelPluginClientTests.java, +        Collection<Module> modules = plugin.nodeModules();, +        Collection<Module> modules = plugin.nodeModules();, +++ b/marvel/src/test/java/org/elasticsearch/marvel/license/LicenseIntegrationTests.java, +import org.elasticsearch.plugins.Plugin;, +import java.util.Collections;, +    public static class MockLicensePlugin extends Plugin {, +        public Collection<Module> nodeModules() {, +            return Collections.<Module>singletonList(new InternalLicenseModule());, +++ b/qa/pom.xml, +++ b/shield/src/main/java/org/elasticsearch/shield/ShieldPlugin.java, +import org.elasticsearch.plugins.Plugin;, +import java.util.Collections;, +public class ShieldPlugin extends Plugin {, +    public Collection<Module> nodeModules() {, +                Collections.<Module>singletonList(new ShieldModule(settings)) :, +                Collections.<Module>singletonList(new ShieldDisabledModule(settings));, +    public Collection<Class<? extends LifecycleComponent>> nodeServices() {, +++ b/marvel/src/main/java/org/elasticsearch/marvel/MarvelPlugin.java, +import org.elasticsearch.plugins.Plugin;, +import java.util.Collections;, +public class MarvelPlugin extends Plugin {, +    public Collection<Module> nodeModules() {, +            return Collections.emptyList();, +        return Collections.<Module>singletonList(new MarvelModule());, +    public Collection<Class<? extends LifecycleComponent>> nodeServices() {, +++ b/marvel/src/test/java/org/elasticsearch/marvel/MarvelPluginClientTests.java, +        Collection<Module> modules = plugin.nodeModules();, +        Collection<Module> modules = plugin.nodeModules();, +++ b/marvel/src/test/java/org/elasticsearch/marvel/license/LicenseIntegrationTests.java, +import org.elasticsearch.plugins.Plugin;, +import java.util.Collections;, +    public static class MockLicensePlugin extends Plugin {, +        public Collection<Module> nodeModules() {, +            return Collections.<Module>singletonList(new InternalLicenseModule());, +++ b/qa/pom.xml, +++ b/shield/src/main/java/org/elasticsearch/shield/ShieldPlugin.java, +import org.elasticsearch.plugins.Plugin;]