[+++ b/core/src/main/java/org/elasticsearch/cluster/action/shard/ShardStateAction.java, +            logger.warn("{} received shard failed for {}", request.failure, request.shardRouting.shardId(), request);, +            clusterService.submitStateUpdateTask(, +                "shard-failed (" + request.shardRouting + "), message [" + request.message + "]",, +                request,, +                ClusterStateTaskConfig.build(Priority.HIGH),, +                shardFailedClusterStateHandler,, +                new ClusterStateTaskListener() {, +            logger.debug("{} received shard started for [{}]", request.shardRouting.shardId(), request);, +                "shard-started (" + request.shardRouting + "), reason [" + request.message + "]",, +                request,, +            channel.sendResponse(TransportResponse.Empty.INSTANCE);]