[+++ b/src/test/java/org/elasticsearch/percolator/ConcurrentPercolatorTests.java, +import static org.elasticsearch.test.hamcrest.ElasticsearchAssertions.assertAcked;, +        // We need to index a document / define mapping, otherwise field1 doesn't get reconized as number field., +        // If we don't do this, then 'test2' percolate query gets parsed as a TermQuery and not a RangeQuery., +        // The percolate api doesn't parse the doc if no queries have registered, so it can't lazily create a mapping, +        assertAcked(prepareCreate("index").addMapping("type", "field1", "type=long", "field2", "type=string")); // random # shards better has a mapping!, +        refresh(); // make sure it's refreshed]