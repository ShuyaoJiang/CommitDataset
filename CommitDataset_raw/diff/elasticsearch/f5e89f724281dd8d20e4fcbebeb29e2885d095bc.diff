[+++ b/core/src/main/java/org/elasticsearch/index/mapper/ParseContext.java, +    @Nullable, +++ b/core/src/main/java/org/elasticsearch/index/mapper/ParseContext.java, +    @Nullable, +++ b/core/src/main/java/org/elasticsearch/index/mapper/SourceToParse.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/ParseContext.java, +    @Nullable, +++ b/core/src/main/java/org/elasticsearch/index/mapper/SourceToParse.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java, +        if (context.id() == null) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/ParseContext.java, +    @Nullable, +++ b/core/src/main/java/org/elasticsearch/index/mapper/SourceToParse.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java, +        if (context.id() == null) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/ParseContext.java, +    @Nullable, +++ b/core/src/main/java/org/elasticsearch/index/mapper/SourceToParse.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java, +        if (context.id() == null) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java, +        BytesReference source = context.source();, +        // Percolate and tv APIs may not set the source and that is ok, because these APIs will not index any data, +        if (source == null) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/ParseContext.java, +    @Nullable, +++ b/core/src/main/java/org/elasticsearch/index/mapper/SourceToParse.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java, +        if (context.id() == null) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java, +        BytesReference source = context.source();, +        // Percolate and tv APIs may not set the source and that is ok, because these APIs will not index any data, +        if (source == null) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java, +        if (enabledState.enabled) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/ParseContext.java, +    @Nullable, +++ b/core/src/main/java/org/elasticsearch/index/mapper/SourceToParse.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java, +        if (context.id() == null) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java, +        BytesReference source = context.source();, +        // Percolate and tv APIs may not set the source and that is ok, because these APIs will not index any data, +        if (source == null) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java, +        if (enabledState.enabled) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/UidFieldMapper.java, +        if (context.id() == null) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/ParseContext.java, +    @Nullable, +++ b/core/src/main/java/org/elasticsearch/index/mapper/SourceToParse.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java, +        if (context.id() == null) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java, +        BytesReference source = context.source();, +        // Percolate and tv APIs may not set the source and that is ok, because these APIs will not index any data, +        if (source == null) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java, +        if (enabledState.enabled) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/UidFieldMapper.java, +        if (context.id() == null) {, +++ b/core/src/main/java/org/elasticsearch/index/percolator/PercolatorFieldMapper.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/ParseContext.java, +    @Nullable, +++ b/core/src/main/java/org/elasticsearch/index/mapper/SourceToParse.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java, +        if (context.id() == null) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java, +        BytesReference source = context.source();, +        // Percolate and tv APIs may not set the source and that is ok, because these APIs will not index any data, +        if (source == null) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java, +        if (enabledState.enabled) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/UidFieldMapper.java, +        if (context.id() == null) {, +++ b/core/src/main/java/org/elasticsearch/index/percolator/PercolatorFieldMapper.java, +++ b/core/src/main/java/org/elasticsearch/index/termvectors/TermVectorsService.java, +        ParsedDocument parsedDocument = docMapper.getDocumentMapper().parse(source(doc).index(index).type(type).id("_id_for_tv_api"));, +++ b/core/src/main/java/org/elasticsearch/index/mapper/ParseContext.java, +    @Nullable, +++ b/core/src/main/java/org/elasticsearch/index/mapper/SourceToParse.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/IdFieldMapper.java, +        if (context.id() == null) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/ParentFieldMapper.java, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/SourceFieldMapper.java, +        BytesReference source = context.source();, +        // Percolate and tv APIs may not set the source and that is ok, because these APIs will not index any data, +        if (source == null) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/TTLFieldMapper.java, +        if (enabledState.enabled) {, +++ b/core/src/main/java/org/elasticsearch/index/mapper/internal/UidFieldMapper.java, +        if (context.id() == null) {, +++ b/core/src/main/java/org/elasticsearch/index/percolator/PercolatorFieldMapper.java, +++ b/core/src/main/java/org/elasticsearch/index/termvectors/TermVectorsService.java]