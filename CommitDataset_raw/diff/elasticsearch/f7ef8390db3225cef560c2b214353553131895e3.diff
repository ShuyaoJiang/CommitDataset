[+++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +            systemProperty 'tests.maven', 'true' // TODO: rename this once we've switched to gradle!, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +            systemProperty 'tests.maven', 'true' // TODO: rename this once we've switched to gradle!, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        copyConfig.into(new File(node.homeDir, 'config')) // copy must always have a general dest dir, even though we don't use it, +            copyConfig.into(destConfigFile.canonicalFile.parentFile), +                      .from({ extraConfigFile.getValue() }) // wrap in closure to delay resolution to execution time, +                      .rename { destConfigFile.name }, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +            systemProperty 'tests.maven', 'true' // TODO: rename this once we've switched to gradle!, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        copyConfig.into(new File(node.homeDir, 'config')) // copy must always have a general dest dir, even though we don't use it, +            copyConfig.into(destConfigFile.canonicalFile.parentFile), +                      .from({ extraConfigFile.getValue() }) // wrap in closure to delay resolution to execution time, +                      .rename { destConfigFile.name }, +++ b/buildSrc/version.properties, +jackson           = 2.7.1, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +            systemProperty 'tests.maven', 'true' // TODO: rename this once we've switched to gradle!, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        copyConfig.into(new File(node.homeDir, 'config')) // copy must always have a general dest dir, even though we don't use it, +            copyConfig.into(destConfigFile.canonicalFile.parentFile), +                      .from({ extraConfigFile.getValue() }) // wrap in closure to delay resolution to execution time, +                      .rename { destConfigFile.name }, +++ b/buildSrc/version.properties, +jackson           = 2.7.1, +++ b/core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsRequest.java, +            throw new NullPointerException("specified index_contraints can't be null");, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +            systemProperty 'tests.maven', 'true' // TODO: rename this once we've switched to gradle!, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        copyConfig.into(new File(node.homeDir, 'config')) // copy must always have a general dest dir, even though we don't use it, +            copyConfig.into(destConfigFile.canonicalFile.parentFile), +                      .from({ extraConfigFile.getValue() }) // wrap in closure to delay resolution to execution time, +                      .rename { destConfigFile.name }, +++ b/buildSrc/version.properties, +jackson           = 2.7.1, +++ b/core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsRequest.java, +            throw new NullPointerException("specified index_contraints can't be null");, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java, +    private final boolean optimizeSingleShard;, +        this.optimizeSingleShard = this.settings.getAsBoolean("action.search.optimize_single_shard", true);, +        if (optimizeSingleShard) {, +        }, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +            systemProperty 'tests.maven', 'true' // TODO: rename this once we've switched to gradle!, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        copyConfig.into(new File(node.homeDir, 'config')) // copy must always have a general dest dir, even though we don't use it, +            copyConfig.into(destConfigFile.canonicalFile.parentFile), +                      .from({ extraConfigFile.getValue() }) // wrap in closure to delay resolution to execution time, +                      .rename { destConfigFile.name }, +++ b/buildSrc/version.properties, +jackson           = 2.7.1, +++ b/core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsRequest.java, +            throw new NullPointerException("specified index_contraints can't be null");, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java, +    private final boolean optimizeSingleShard;, +        this.optimizeSingleShard = this.settings.getAsBoolean("action.search.optimize_single_shard", true);, +        if (optimizeSingleShard) {, +        }, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Security.java, + * mvn test -Dtests.jvm.argline="-Djava.security.debug=access,failure" ..., +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +            systemProperty 'tests.maven', 'true' // TODO: rename this once we've switched to gradle!, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        copyConfig.into(new File(node.homeDir, 'config')) // copy must always have a general dest dir, even though we don't use it, +            copyConfig.into(destConfigFile.canonicalFile.parentFile), +                      .from({ extraConfigFile.getValue() }) // wrap in closure to delay resolution to execution time, +                      .rename { destConfigFile.name }, +++ b/buildSrc/version.properties, +jackson           = 2.7.1, +++ b/core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsRequest.java, +            throw new NullPointerException("specified index_contraints can't be null");, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java, +    private final boolean optimizeSingleShard;, +        this.optimizeSingleShard = this.settings.getAsBoolean("action.search.optimize_single_shard", true);, +        if (optimizeSingleShard) {, +        }, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Security.java, + * mvn test -Dtests.jvm.argline="-Djava.security.debug=access,failure" ..., +++ b/core/src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java, +            throw new IllegalArgumentException("No data node with critera [" + nodeAttribute + "] found");, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +            systemProperty 'tests.maven', 'true' // TODO: rename this once we've switched to gradle!, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        copyConfig.into(new File(node.homeDir, 'config')) // copy must always have a general dest dir, even though we don't use it, +            copyConfig.into(destConfigFile.canonicalFile.parentFile), +                      .from({ extraConfigFile.getValue() }) // wrap in closure to delay resolution to execution time, +                      .rename { destConfigFile.name }, +++ b/buildSrc/version.properties, +jackson           = 2.7.1, +++ b/core/src/main/java/org/elasticsearch/action/fieldstats/FieldStatsRequest.java, +            throw new NullPointerException("specified index_contraints can't be null");, +++ b/core/src/main/java/org/elasticsearch/action/search/TransportSearchAction.java, +    private final boolean optimizeSingleShard;, +        this.optimizeSingleShard = this.settings.getAsBoolean("action.search.optimize_single_shard", true);, +        if (optimizeSingleShard) {, +        }, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Security.java]