[+++ b/server/src/main/java/org/elasticsearch/transport/RemoteClusterAware.java, +                    transportAddress, Collections.singletonMap("server_name", hostName), EnumSet.allOf(DiscoveryNode.Role.class),, +++ b/server/src/main/java/org/elasticsearch/transport/RemoteClusterAware.java, +                    transportAddress, Collections.singletonMap("server_name", hostName), EnumSet.allOf(DiscoveryNode.Role.class),, +++ b/server/src/main/java/org/elasticsearch/transport/RemoteClusterConnection.java, +                        logger.debug("[{}] opening connection to seed node: [{}] proxy address: [{}]", clusterAlias, seedNode,, +                            proxyAddress);, +                                new SniffClusterStateResponseHandler(connection, listener, seedNodes,, +                logger.warn(() -> new ParameterizedMessage("fetching nodes from external cluster [{}] failed", clusterAlias), ex);, +                    logger.debug(() -> new ParameterizedMessage("fetching nodes from external cluster [{}] failed moving to next node",, +                        clusterAlias), ex);, +                    logger.warn(() -> new ParameterizedMessage("fetching nodes from external cluster [{}] failed", clusterAlias), ex);, +            SniffClusterStateResponseHandler(Transport.Connection connection, ActionListener<Void> listener,, +                                             Iterator<Supplier<DiscoveryNode>> seedNodes,, +++ b/server/src/main/java/org/elasticsearch/transport/RemoteClusterAware.java, +                    transportAddress, Collections.singletonMap("server_name", hostName), EnumSet.allOf(DiscoveryNode.Role.class),, +++ b/server/src/main/java/org/elasticsearch/transport/RemoteClusterConnection.java, +                        logger.debug("[{}] opening connection to seed node: [{}] proxy address: [{}]", clusterAlias, seedNode,, +                            proxyAddress);, +                                new SniffClusterStateResponseHandler(connection, listener, seedNodes,, +                logger.warn(() -> new ParameterizedMessage("fetching nodes from external cluster [{}] failed", clusterAlias), ex);, +                    logger.debug(() -> new ParameterizedMessage("fetching nodes from external cluster [{}] failed moving to next node",, +                        clusterAlias), ex);, +                    logger.warn(() -> new ParameterizedMessage("fetching nodes from external cluster [{}] failed", clusterAlias), ex);, +            SniffClusterStateResponseHandler(Transport.Connection connection, ActionListener<Void> listener,, +                                             Iterator<Supplier<DiscoveryNode>> seedNodes,, +++ b/server/src/test/java/org/elasticsearch/transport/RemoteClusterConnectionTests.java, +                assertEquals("node_0", seedSupplier.get().getAttributes().get("server_name"));]