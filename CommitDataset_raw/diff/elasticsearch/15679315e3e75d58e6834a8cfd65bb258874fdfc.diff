[+++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/MachineLearning.java, +import org.elasticsearch.xpack.ml.job.persistence.JobResultsProvider;, +        JobResultsProvider jobResultsProvider = new JobResultsProvider(client, settings);, +        JobManager jobManager = new JobManager(env, settings, jobResultsProvider, clusterService, auditor, client, notifier);, +                jobManager, jobResultsProvider, jobResultsPersister, jobDataCountsPersister, autodetectProcessFactory,, +        DatafeedJobBuilder datafeedJobBuilder = new DatafeedJobBuilder(client, jobResultsProvider, auditor, System::currentTimeMillis);, +                jobResultsProvider,, +++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/MachineLearning.java, +import org.elasticsearch.xpack.ml.job.persistence.JobResultsProvider;, +        JobResultsProvider jobResultsProvider = new JobResultsProvider(client, settings);, +        JobManager jobManager = new JobManager(env, settings, jobResultsProvider, clusterService, auditor, client, notifier);, +                jobManager, jobResultsProvider, jobResultsPersister, jobDataCountsPersister, autodetectProcessFactory,, +        DatafeedJobBuilder datafeedJobBuilder = new DatafeedJobBuilder(client, jobResultsProvider, auditor, System::currentTimeMillis);, +                jobResultsProvider,, +++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/action/TransportDeleteCalendarAction.java, +import org.elasticsearch.xpack.ml.job.persistence.JobResultsProvider;, +    private final JobResultsProvider jobResultsProvider;, +                                         ActionFilters actionFilters, Client client, JobManager jobManager,, +                                         JobResultsProvider jobResultsProvider) {, +        this.jobResultsProvider = jobResultsProvider;, +        jobResultsProvider.calendar(calendarId, calendarListener);, +++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/MachineLearning.java, +import org.elasticsearch.xpack.ml.job.persistence.JobResultsProvider;, +        JobResultsProvider jobResultsProvider = new JobResultsProvider(client, settings);, +        JobManager jobManager = new JobManager(env, settings, jobResultsProvider, clusterService, auditor, client, notifier);, +                jobManager, jobResultsProvider, jobResultsPersister, jobDataCountsPersister, autodetectProcessFactory,, +        DatafeedJobBuilder datafeedJobBuilder = new DatafeedJobBuilder(client, jobResultsProvider, auditor, System::currentTimeMillis);, +                jobResultsProvider,, +++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/action/TransportDeleteCalendarAction.java, +import org.elasticsearch.xpack.ml.job.persistence.JobResultsProvider;, +    private final JobResultsProvider jobResultsProvider;, +                                         ActionFilters actionFilters, Client client, JobManager jobManager,, +                                         JobResultsProvider jobResultsProvider) {, +        this.jobResultsProvider = jobResultsProvider;, +        jobResultsProvider.calendar(calendarId, calendarListener);, +++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/action/TransportDeleteCalendarEventAction.java, +import org.elasticsearch.xpack.ml.job.persistence.JobResultsProvider;, +    private final JobResultsProvider jobResultsProvider;, +                                              Client client, JobResultsProvider jobResultsProvider, JobManager jobManager) {, +        this.jobResultsProvider = jobResultsProvider;, +        jobResultsProvider.calendar(request.getCalendarId(), calendarListener);, +++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/MachineLearning.java, +import org.elasticsearch.xpack.ml.job.persistence.JobResultsProvider;, +        JobResultsProvider jobResultsProvider = new JobResultsProvider(client, settings);, +        JobManager jobManager = new JobManager(env, settings, jobResultsProvider, clusterService, auditor, client, notifier);, +                jobManager, jobResultsProvider, jobResultsPersister, jobDataCountsPersister, autodetectProcessFactory,, +        DatafeedJobBuilder datafeedJobBuilder = new DatafeedJobBuilder(client, jobResultsProvider, auditor, System::currentTimeMillis);, +                jobResultsProvider,, +++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/action/TransportDeleteCalendarAction.java, +import org.elasticsearch.xpack.ml.job.persistence.JobResultsProvider;, +    private final JobResultsProvider jobResultsProvider;, +                                         ActionFilters actionFilters, Client client, JobManager jobManager,, +                                         JobResultsProvider jobResultsProvider) {, +        this.jobResultsProvider = jobResultsProvider;, +        jobResultsProvider.calendar(calendarId, calendarListener);, +++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/action/TransportDeleteCalendarEventAction.java, +import org.elasticsearch.xpack.ml.job.persistence.JobResultsProvider;, +    private final JobResultsProvider jobResultsProvider;, +                                              Client client, JobResultsProvider jobResultsProvider, JobManager jobManager) {, +        this.jobResultsProvider = jobResultsProvider;, +        jobResultsProvider.calendar(request.getCalendarId(), calendarListener);, +++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/action/TransportDeleteModelSnapshotAction.java, +import org.elasticsearch.xpack.ml.job.persistence.JobResultsProvider;, +    private final JobResultsProvider jobResultsProvider;, +                                              JobResultsProvider jobResultsProvider, ClusterService clusterService, Client client,, +                                              Auditor auditor) {, +        this.jobResultsProvider = jobResultsProvider;, +        jobResultsProvider.modelSnapshots(, +++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/MachineLearning.java, +import org.elasticsearch.xpack.ml.job.persistence.JobResultsProvider;, +        JobResultsProvider jobResultsProvider = new JobResultsProvider(client, settings);, +        JobManager jobManager = new JobManager(env, settings, jobResultsProvider, clusterService, auditor, client, notifier);, +                jobManager, jobResultsProvider, jobResultsPersister, jobDataCountsPersister, autodetectProcessFactory,, +        DatafeedJobBuilder datafeedJobBuilder = new DatafeedJobBuilder(client, jobResultsProvider, auditor, System::currentTimeMillis);, +                jobResultsProvider,, +++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/action/TransportDeleteCalendarAction.java, +import org.elasticsearch.xpack.ml.job.persistence.JobResultsProvider;, +    private final JobResultsProvider jobResultsProvider;, +                                         ActionFilters actionFilters, Client client, JobManager jobManager,, +                                         JobResultsProvider jobResultsProvider) {, +        this.jobResultsProvider = jobResultsProvider;, +        jobResultsProvider.calendar(calendarId, calendarListener);, +++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/action/TransportDeleteCalendarEventAction.java, +import org.elasticsearch.xpack.ml.job.persistence.JobResultsProvider;, +    private final JobResultsProvider jobResultsProvider;, +                                              Client client, JobResultsProvider jobResultsProvider, JobManager jobManager) {, +        this.jobResultsProvider = jobResultsProvider;, +        jobResultsProvider.calendar(request.getCalendarId(), calendarListener);, +++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/action/TransportDeleteModelSnapshotAction.java, +import org.elasticsearch.xpack.ml.job.persistence.JobResultsProvider;, +    private final JobResultsProvider jobResultsProvider;, +                                              JobResultsProvider jobResultsProvider, ClusterService clusterService, Client client,, +                                              Auditor auditor) {, +        this.jobResultsProvider = jobResultsProvider;, +        jobResultsProvider.modelSnapshots(, +++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/action/TransportForecastJobAction.java, +import org.elasticsearch.xpack.ml.job.persistence.JobResultsProvider;, +    private final JobResultsProvider jobResultsProvider;, +                                      JobResultsProvider jobResultsProvider, AutodetectProcessManager processManager) {, +        this.jobResultsProvider = jobResultsProvider;]