[+++ b/Vagrantfile, +    config.vm.box = "elastic/ubuntu-12.04-x86_64", +    config.vm.box = "elastic/ubuntu-14.04-x86_64", +    config.vm.box = "elastic/ubuntu-15.04-x86_64", +    config.vm.box = "elastic/debian-8-x86_64", +    deb_common config, 'echo deb http://http.debian.net/debian jessie-backports main > /etc/apt/sources.list.d/backports.list', 'backports', +    config.vm.box = "elastic/centos-6-x86_64", +    config.vm.box = "elastic/centos-7-x86_64", +  config.vm.define "oel-6" do |config|, +    config.vm.box = "elastic/oraclelinux-6-x86_64", +    rpm_common config, +  end, +    config.vm.box = "elastic/oraclelinux-7-x86_64", +    config.vm.box = "elastic/fedora-22-x86_64", +    config.vm.box = "elastic/opensuse-13-x86_64", +    config.vm.box = "elastic/sles-12-x86_64", +++ b/Vagrantfile, +    config.vm.box = "elastic/ubuntu-12.04-x86_64", +    config.vm.box = "elastic/ubuntu-14.04-x86_64", +    config.vm.box = "elastic/ubuntu-15.04-x86_64", +    config.vm.box = "elastic/debian-8-x86_64", +    deb_common config, 'echo deb http://http.debian.net/debian jessie-backports main > /etc/apt/sources.list.d/backports.list', 'backports', +    config.vm.box = "elastic/centos-6-x86_64", +    config.vm.box = "elastic/centos-7-x86_64", +  config.vm.define "oel-6" do |config|, +    config.vm.box = "elastic/oraclelinux-6-x86_64", +    rpm_common config, +  end, +    config.vm.box = "elastic/oraclelinux-7-x86_64", +    config.vm.box = "elastic/fedora-22-x86_64", +    config.vm.box = "elastic/opensuse-13-x86_64", +    config.vm.box = "elastic/sles-12-x86_64", +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]plugins[/\\]InstallPluginCommand.java" checks="LineLength" />, +++ b/Vagrantfile, +    config.vm.box = "elastic/ubuntu-12.04-x86_64", +    config.vm.box = "elastic/ubuntu-14.04-x86_64", +    config.vm.box = "elastic/ubuntu-15.04-x86_64", +    config.vm.box = "elastic/debian-8-x86_64", +    deb_common config, 'echo deb http://http.debian.net/debian jessie-backports main > /etc/apt/sources.list.d/backports.list', 'backports', +    config.vm.box = "elastic/centos-6-x86_64", +    config.vm.box = "elastic/centos-7-x86_64", +  config.vm.define "oel-6" do |config|, +    config.vm.box = "elastic/oraclelinux-6-x86_64", +    rpm_common config, +  end, +    config.vm.box = "elastic/oraclelinux-7-x86_64", +    config.vm.box = "elastic/fedora-22-x86_64", +    config.vm.box = "elastic/opensuse-13-x86_64", +    config.vm.box = "elastic/sles-12-x86_64", +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]plugins[/\\]InstallPluginCommand.java" checks="LineLength" />, +++ b/core/src/main/java/org/elasticsearch/index/shard/IndexShard.java, +++ b/Vagrantfile, +    config.vm.box = "elastic/ubuntu-12.04-x86_64", +    config.vm.box = "elastic/ubuntu-14.04-x86_64", +    config.vm.box = "elastic/ubuntu-15.04-x86_64", +    config.vm.box = "elastic/debian-8-x86_64", +    deb_common config, 'echo deb http://http.debian.net/debian jessie-backports main > /etc/apt/sources.list.d/backports.list', 'backports', +    config.vm.box = "elastic/centos-6-x86_64", +    config.vm.box = "elastic/centos-7-x86_64", +  config.vm.define "oel-6" do |config|, +    config.vm.box = "elastic/oraclelinux-6-x86_64", +    rpm_common config, +  end, +    config.vm.box = "elastic/oraclelinux-7-x86_64", +    config.vm.box = "elastic/fedora-22-x86_64", +    config.vm.box = "elastic/opensuse-13-x86_64", +    config.vm.box = "elastic/sles-12-x86_64", +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]plugins[/\\]InstallPluginCommand.java" checks="LineLength" />, +++ b/core/src/main/java/org/elasticsearch/index/shard/IndexShard.java, +++ b/core/src/main/java/org/elasticsearch/plugins/InstallPluginCommand.java, +                url = String.format(Locale.ROOT, "https://download.elastic.co/elasticsearch/staging/%1$s-%2$s/org/elasticsearch/plugin/%3$s/%1$s/%3$s-%1$s.zip",, +                        version, Build.CURRENT.shortHash(), pluginId);, +                url = String.format(Locale.ROOT, "https://download.elastic.co/elasticsearch/release/org/elasticsearch/plugin/%1$s/%2$s/%1$s-%2$s.zip",, +                        pluginId, version);, +                throw new UserError(ExitCodes.USAGE, "plugin directory " + destination.toAbsolutePath() + " already exists. To update the plugin, uninstall it first using 'remove " + info.getName() + "' command");, +                    throw new UserError(ExitCodes.DATA_ERROR, "Directories not allowed in bin dir for plugin " + info.getName() + ", found " + srcFile.getFileName());, +++ b/Vagrantfile, +    config.vm.box = "elastic/ubuntu-12.04-x86_64", +    config.vm.box = "elastic/ubuntu-14.04-x86_64", +    config.vm.box = "elastic/ubuntu-15.04-x86_64", +    config.vm.box = "elastic/debian-8-x86_64", +    deb_common config, 'echo deb http://http.debian.net/debian jessie-backports main > /etc/apt/sources.list.d/backports.list', 'backports', +    config.vm.box = "elastic/centos-6-x86_64", +    config.vm.box = "elastic/centos-7-x86_64", +  config.vm.define "oel-6" do |config|, +    config.vm.box = "elastic/oraclelinux-6-x86_64", +    rpm_common config, +  end, +    config.vm.box = "elastic/oraclelinux-7-x86_64", +    config.vm.box = "elastic/fedora-22-x86_64", +    config.vm.box = "elastic/opensuse-13-x86_64", +    config.vm.box = "elastic/sles-12-x86_64", +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="core[/\\]src[/\\]main[/\\]java[/\\]org[/\\]elasticsearch[/\\]plugins[/\\]InstallPluginCommand.java" checks="LineLength" />, +++ b/core/src/main/java/org/elasticsearch/index/shard/IndexShard.java, +++ b/core/src/main/java/org/elasticsearch/plugins/InstallPluginCommand.java, +                url = String.format(Locale.ROOT, "https://download.elastic.co/elasticsearch/staging/%1$s-%2$s/org/elasticsearch/plugin/%3$s/%1$s/%3$s-%1$s.zip",]