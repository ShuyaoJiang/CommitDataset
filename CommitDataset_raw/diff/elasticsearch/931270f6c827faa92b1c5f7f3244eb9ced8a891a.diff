[+++ b/x-pack/plugin/ccr/src/test/java/org/elasticsearch/xpack/ccr/CcrRetentionLeaseIT.java, +        final int numberOfShards = randomIntBetween(1, 4);, +                getIndexSettings(numberOfShards, 0, singletonMap(IndexSettings.INDEX_SOFT_DELETES_SETTING.getKey(), "true"));, +                new HashSet<>(randomSubsetOf(, +                        randomIntBetween(0, numberOfShards),, +                        IntStream.range(0, numberOfShards).boxed().collect(Collectors.toSet())));, +                new HashSet<>(randomSubsetOf(, +                                randomIntBetween(1, numberOfShards),, +                                IntStream.range(0, numberOfShards).boxed().collect(Collectors.toSet())));]