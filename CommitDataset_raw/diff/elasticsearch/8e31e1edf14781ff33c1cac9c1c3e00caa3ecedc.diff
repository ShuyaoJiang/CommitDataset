[+++ b/CONTRIBUTING.md, +**Repository:** [https://github.com/elasticsearch/elasticsearch-cloud-azure](https://github.com/elasticsearch/elasticsearch-cloud-azure), +cd elasticsearch-cloud-azure/, +++ b/CONTRIBUTING.md, +**Repository:** [https://github.com/elasticsearch/elasticsearch-cloud-azure](https://github.com/elasticsearch/elasticsearch-cloud-azure), +cd elasticsearch-cloud-azure/, +++ b/README.md, +Azure Cloud Plugin for Elasticsearch, +====================================, +The Azure Cloud plugin allows to use Azure API for the unicast discovery mechanism., +bin/plugin -install elasticsearch/elasticsearch-cloud-azure/2.4.0, +|       Elasticsearch    | Azure Cloud Plugin|                                                             Docs                                                                   |, +|    es-1.x              | Build from source | [2.6.0-SNAPSHOT](https://github.com/elasticsearch/elasticsearch-cloud-azure/tree/es-1.x/#version-260-snapshot-for-elasticsearch-1x)|, +|    es-1.4              | Build from source | [2.5.0-SNAPSHOT](https://github.com/elasticsearch/elasticsearch-cloud-azure/tree/es-1.4/#version-250-snapshot-for-elasticsearch-14)|, +|    es-1.3              |     2.4.0         | [2.4.0](https://github.com/elasticsearch/elasticsearch-cloud-azure/tree/v2.4.0/#version-240-for-elasticsearch-13)                  |, +|    es-1.2              |     2.3.0         | [2.3.0](https://github.com/elasticsearch/elasticsearch-cloud-azure/tree/v2.3.0/#azure-cloud-plugin-for-elasticsearch)              |, +|    es-1.1              |     2.2.0         | [2.2.0](https://github.com/elasticsearch/elasticsearch-cloud-azure/tree/v2.2.0/#azure-cloud-plugin-for-elasticsearch)              |, +|    es-1.0              |     2.1.0         | [2.1.0](https://github.com/elasticsearch/elasticsearch-cloud-azure/tree/v2.1.0/#azure-cloud-plugin-for-elasticsearch)              |, +|    es-0.90             |     1.0.0.alpha1  | [1.0.0.alpha1](https://github.com/elasticsearch/elasticsearch-cloud-azure/tree/v1.0.0.alpha1/#azure-cloud-plugin-for-elasticsearch)|, +plugin --install cloud-azure \ , +       --url file:target/releases/elasticsearch-cloud-azure-X.X.X-SNAPSHOT.zip, +Azure Virtual Machine Discovery, +Azure VM discovery allows to use the azure APIs to perform automatic discovery (similar to multicast in non hostile, +```, +    azure:, +        keystore: /path/to/keystore, +        password: your_password_for_keystore, +        subscription_id: your_azure_subscription_id, +        service_name: your_azure_cloud_service_name, +        type: azure, +, +# recommended, +# path.data: /mnt/resource/elasticsearch/data, +* Create Azure instances, +* Install Azure plugin, +We will expose here one strategy which is to hide our Elasticsearch cluster from outside., +, +With this strategy, only VM behind this same virtual port can talk to each other., +That means that with this mode, you can use elasticsearch unicast discovery to build a cluster., +, +Best, you can use the `elasticsearch-cloud-azure` plugin to let it fetch information about your nodes using, +azure API., +, +Before starting, you need to have:, +* A [Windows Azure account](http://www.windowsazure.com/), +* SSH keys and certificate, +* OpenSSL that isn't from MacPorts, specifically `OpenSSL 1.0.1f 6 Jan, +  2014` doesn't seem to create a valid keypair for ssh.  FWIW,, +  `OpenSSL 1.0.1c 10 May 2012` on Ubuntu 12.04 LTS is known to work., +You should follow [this guide](http://azure.microsoft.com/en-us/documentation/articles/linux-use-ssh-key/) to learn, +how to create or use existing SSH keys. If you have already did it, you can skip the following., +, +Here is a description on how to generate SSH keys using `openssl`:, +# You may want to use another dir than /tmp, +cd /tmp, +openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout azure-private.key -out azure-certificate.pem, +chmod 600 azure-private.key azure-certificate.pem, +openssl x509 -outform der -in azure-certificate.pem -out azure-certificate.cer, +```, +, +Generate a keystore which will be used by the plugin to authenticate with a certificate, +all Azure API calls., +, +```sh, +# Generate a keystore (azurekeystore.pkcs12), +# Transform private key to PEM format, +openssl pkcs8 -topk8 -nocrypt -in azure-private.key -inform PEM -out azure-pk.pem -outform PEM, +# Transform certificate to PEM format, +openssl x509 -inform der -in azure-certificate.cer -out azure-cert.pem, +cat azure-cert.pem azure-pk.pem > azure.pem.txt, +# You MUST enter a password!, +openssl pkcs12 -export -in azure.pem.txt -out azurekeystore.pkcs12 -name azure -noiter -nomaciter, +```, +, +Upload the `azure-certificate.cer` file both in the elasticsearch Cloud Service (under `Manage Certificates`), , +and under `Settings -> Manage Certificates`., +, +**Important**: when prompted for a password, you need to enter a non empty one., +, +See this [guide](http://www.windowsazure.com/en-us/manage/linux/how-to-guides/ssh-into-linux/) to have, +more details on how to create keys for Azure., +, +Once done, you need to upload your certificate in Azure:, +, +* Go to the [management console](https://account.windowsazure.com/)., +* Sign in using your account., +* Click on `Portal`., +* Go to Settings (bottom of the left list), +* On the bottom bar, click on `Upload` and upload your `azure-certificate.cer` file., +, +You may want to use [Windows Azure Command-Line Tool](http://www.windowsazure.com/en-us/develop/nodejs/how-to-guides/command-line-tools/):, +, +* Install [NodeJS](https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager), for example using, +homebrew on MacOS X:, +, +```sh, +brew install node, +```, +, +* Install Azure tools:]