[+++ b/TESTING.asciidoc, +vagrant up --provision trusty && vagrant halt trusty, +vagrant up --provision centos-7 && vagrant halt centos-7, +  vagrant up --provision $box, +vagrant up trusty && vagrant ssh trusty, +vagrant up centos-7 && vagrant ssh centos-7, +vagrant destroy -f trusty && vagrant up trusty, +vagrant up centos-7 && vagrant ssh centos-7, +vagrant up trusty && vagrant ssh trusty, +To run tests instrumented with jacoco and produce a coverage report in, +`target/site/jacoco/`:, +++ b/TESTING.asciidoc, +vagrant up --provision trusty && vagrant halt trusty, +vagrant up --provision centos-7 && vagrant halt centos-7, +  vagrant up --provision $box, +vagrant up trusty && vagrant ssh trusty, +vagrant up centos-7 && vagrant ssh centos-7, +vagrant destroy -f trusty && vagrant up trusty, +vagrant up centos-7 && vagrant ssh centos-7, +vagrant up trusty && vagrant ssh trusty, +To run tests instrumented with jacoco and produce a coverage report in, +`target/site/jacoco/`:, +++ b/core/pom.xml, +, +        <!-- START: dependencies that might be shaded -->, +        <!-- END: dependencies that might be shaded -->, +++ b/TESTING.asciidoc, +vagrant up --provision trusty && vagrant halt trusty, +vagrant up --provision centos-7 && vagrant halt centos-7, +  vagrant up --provision $box, +vagrant up trusty && vagrant ssh trusty, +vagrant up centos-7 && vagrant ssh centos-7, +vagrant destroy -f trusty && vagrant up trusty, +vagrant up centos-7 && vagrant ssh centos-7, +vagrant up trusty && vagrant ssh trusty, +To run tests instrumented with jacoco and produce a coverage report in, +`target/site/jacoco/`:, +++ b/core/pom.xml, +, +        <!-- START: dependencies that might be shaded -->, +        <!-- END: dependencies that might be shaded -->, +++ b/core/src/main/java/org/apache/lucene/queries/MinDocQuery.java, +import org.apache.lucene.util.Bits;, +            public Scorer scorer(LeafReaderContext context, final Bits acceptDocs) throws IOException {, +                        while (doc < maxDoc) {, +                            if (acceptDocs == null || acceptDocs.get(doc)) {, +                                break;, +                            }, +                            doc += 1;, +                        }, +++ b/TESTING.asciidoc, +vagrant up --provision trusty && vagrant halt trusty, +vagrant up --provision centos-7 && vagrant halt centos-7, +  vagrant up --provision $box, +vagrant up trusty && vagrant ssh trusty, +vagrant up centos-7 && vagrant ssh centos-7, +vagrant destroy -f trusty && vagrant up trusty, +vagrant up centos-7 && vagrant ssh centos-7, +vagrant up trusty && vagrant ssh trusty, +To run tests instrumented with jacoco and produce a coverage report in, +`target/site/jacoco/`:, +++ b/core/pom.xml, +, +        <!-- START: dependencies that might be shaded -->, +        <!-- END: dependencies that might be shaded -->, +++ b/core/src/main/java/org/apache/lucene/queries/MinDocQuery.java, +import org.apache.lucene.util.Bits;, +            public Scorer scorer(LeafReaderContext context, final Bits acceptDocs) throws IOException {, +                        while (doc < maxDoc) {, +                            if (acceptDocs == null || acceptDocs.get(doc)) {, +                                break;, +                            }, +                            doc += 1;, +                        }, +++ b/core/src/main/java/org/apache/lucene/queryparser/classic/MapperQueryParser.java, +                        applySlop(q, slop);, +                        applySlop(q, slop);, +    protected WildcardQuery newWildcardQuery(Term t) {, +        // Backport: https://issues.apache.org/jira/browse/LUCENE-6677, +        assert Version.LATEST == Version.LUCENE_5_2_1;, +        WildcardQuery query = new WildcardQuery(t, maxDeterminizedStates);, +        query.setRewriteMethod(multiTermRewriteMethod);, +        return query;, +    }, +, +    @Override, +    private void applySlop(Query q, int slop) {, +        if (q instanceof FilteredQuery) {, +            applySlop(((FilteredQuery)q).getQuery(), slop);, +        if (q instanceof PhraseQuery) {, +            ((PhraseQuery) q).setSlop(slop);, +++ b/TESTING.asciidoc, +vagrant up --provision trusty && vagrant halt trusty, +vagrant up --provision centos-7 && vagrant halt centos-7, +  vagrant up --provision $box, +vagrant up trusty && vagrant ssh trusty, +vagrant up centos-7 && vagrant ssh centos-7, +vagrant destroy -f trusty && vagrant up trusty, +vagrant up centos-7 && vagrant ssh centos-7, +vagrant up trusty && vagrant ssh trusty]