[+++ b/x-pack/qa/evil-tests/src/test/java/org/elasticsearch/xpack/security/authc/kerberos/SimpleKdcLdapServer.java, +                if (ESTestCase.awaitBusy(() -> init()) == false) {, +                    throw new IllegalStateException("could not initialize SimpleKdcLdapServer");, +                }, +    private boolean init() {, +        boolean initialized = false;, +        try {, +            initialized = true;, +        } catch (Exception e) {, +            if (simpleKdc != null) {, +                try {, +                    simpleKdc.stop();, +                } catch (KrbException krbException) {, +                    logger.debug("error occurred while cleaning up after init failure for SimpleKdcLdapServer");, +                }, +            }, +            if (ldapServer != null) {, +                ldapServer.shutDown(true);, +            }, +            ldapPort = 0;, +            kdcPort = 0;, +            initialized = false;, +        }, +        return initialized;, +                serverSocket.setReuseAddress(true);, +                socket.setReuseAddress(true);]