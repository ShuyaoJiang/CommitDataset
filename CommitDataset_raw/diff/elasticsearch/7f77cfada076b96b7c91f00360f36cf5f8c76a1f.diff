[+++ b/src/main/java/org/elasticsearch/threadpool/ThreadPool.java, +            BlockingQueue<Runnable> workQueue;, +            if (capacity == null) {, +                workQueue = new LinkedTransferQueue<Runnable>();, +            } else if ((int) capacity.singles() > 0) {, +                workQueue = new ArrayBlockingQueue<Runnable>((int) capacity.singles());, +            } else {, +                workQueue = new SynchronousQueue<Runnable>();, +            }, +                    workQueue,]