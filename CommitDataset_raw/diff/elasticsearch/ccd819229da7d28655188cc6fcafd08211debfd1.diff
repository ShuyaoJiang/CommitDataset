[+++ b/core/src/main/java/org/elasticsearch/common/util/concurrent/EsThreadPoolExecutor.java, +    private  class FilterAbstractRunnable extends AbstractRunnable {, +            boolean started = false;, +                started = true;, +            } catch (IllegalStateException ex) {, +                if (started || isShutdown() == false) {, +                    throw ex;, +                }, +                // if we hit an ISE here we have been shutting down, +                // this comes from the threadcontext and barfs if, +                // our threadpool has been shutting down, +    private  class FilterRunnable implements Runnable {, +            boolean started = false;, +                started = true;, +            } catch (IllegalStateException ex) {, +                if (started || isShutdown() == false) {, +                    throw ex;, +                }, +                // if we hit an ISE here we have been shutting down, +                // this comes from the threadcontext and barfs if, +                // our threadpool has been shutting down]