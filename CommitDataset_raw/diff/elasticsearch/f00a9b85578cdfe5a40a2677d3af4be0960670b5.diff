[+++ b/pom.xml, +            <version>2.3</version>, +++ b/pom.xml, +            <version>2.3</version>, +++ b/rest-api-spec/test/cat.segments/10_basic.yaml, +         wait_for_status: yellow, +         wait_for_status: yellow, +         wait_for_status: yellow, +++ b/pom.xml, +            <version>2.3</version>, +++ b/rest-api-spec/test/cat.segments/10_basic.yaml, +         wait_for_status: yellow, +         wait_for_status: yellow, +         wait_for_status: yellow, +++ b/rest-api-spec/test/indices.segments/10_basic.yaml, +"segments test":, +++ b/pom.xml, +            <version>2.3</version>, +++ b/rest-api-spec/test/cat.segments/10_basic.yaml, +         wait_for_status: yellow, +         wait_for_status: yellow, +         wait_for_status: yellow, +++ b/rest-api-spec/test/indices.segments/10_basic.yaml, +"segments test":, +++ b/src/main/java/org/elasticsearch/action/admin/indices/segments/IndicesSegmentsRequest.java, +        indicesOptions(IndicesOptions.fromOptions(false, false, true, false));, +++ b/pom.xml, +            <version>2.3</version>, +++ b/rest-api-spec/test/cat.segments/10_basic.yaml, +         wait_for_status: yellow, +         wait_for_status: yellow, +         wait_for_status: yellow, +++ b/rest-api-spec/test/indices.segments/10_basic.yaml, +"segments test":, +++ b/src/main/java/org/elasticsearch/action/admin/indices/segments/IndicesSegmentsRequest.java, +        indicesOptions(IndicesOptions.fromOptions(false, false, true, false));, +++ b/src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java, +import org.elasticsearch.cluster.routing.OperationRouting;, +            updateTasksExecutor.execute(new PrioritizedRunnable(Priority.HIGH) {, +                                timeoutUpdateTask.onFailure(task.source, new ProcessClusterEventTimeoutException(timeoutUpdateTask.timeout(), task.source));, +        long now = System.currentTimeMillis();, +            if (pending.task instanceof UpdateTask) {, +                UpdateTask updateTask = (UpdateTask) pending.task;, +                source = updateTask.source;, +                timeInQueue = now - updateTask.addedAt;, +                timeInQueue = -1;, +    class UpdateTask extends PrioritizedRunnable {, +        public final String source;, +        public final long addedAt = System.currentTimeMillis();, +            super(priority);, +            this.source = source;, +++ b/pom.xml, +            <version>2.3</version>, +++ b/rest-api-spec/test/cat.segments/10_basic.yaml, +         wait_for_status: yellow, +         wait_for_status: yellow, +         wait_for_status: yellow, +++ b/rest-api-spec/test/indices.segments/10_basic.yaml, +"segments test":, +++ b/src/main/java/org/elasticsearch/action/admin/indices/segments/IndicesSegmentsRequest.java, +        indicesOptions(IndicesOptions.fromOptions(false, false, true, false));, +++ b/src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java, +import org.elasticsearch.cluster.routing.OperationRouting;, +            updateTasksExecutor.execute(new PrioritizedRunnable(Priority.HIGH) {, +                                timeoutUpdateTask.onFailure(task.source, new ProcessClusterEventTimeoutException(timeoutUpdateTask.timeout(), task.source));, +        long now = System.currentTimeMillis();, +            if (pending.task instanceof UpdateTask) {, +                UpdateTask updateTask = (UpdateTask) pending.task;, +                source = updateTask.source;, +                timeInQueue = now - updateTask.addedAt;, +                timeInQueue = -1;, +    class UpdateTask extends PrioritizedRunnable {, +        public final String source;, +        public final long addedAt = System.currentTimeMillis();, +            super(priority);, +            this.source = source;, +++ b/src/main/java/org/elasticsearch/cluster/service/PendingClusterTask.java, +import org.elasticsearch.Version;, +++ b/pom.xml, +            <version>2.3</version>, +++ b/rest-api-spec/test/cat.segments/10_basic.yaml, +         wait_for_status: yellow, +         wait_for_status: yellow, +         wait_for_status: yellow, +++ b/rest-api-spec/test/indices.segments/10_basic.yaml, +"segments test":, +++ b/src/main/java/org/elasticsearch/action/admin/indices/segments/IndicesSegmentsRequest.java, +        indicesOptions(IndicesOptions.fromOptions(false, false, true, false));, +++ b/src/main/java/org/elasticsearch/cluster/service/InternalClusterService.java, +import org.elasticsearch.cluster.routing.OperationRouting;, +            updateTasksExecutor.execute(new PrioritizedRunnable(Priority.HIGH) {, +                                timeoutUpdateTask.onFailure(task.source, new ProcessClusterEventTimeoutException(timeoutUpdateTask.timeout(), task.source));, +        long now = System.currentTimeMillis();, +            if (pending.task instanceof UpdateTask) {, +                UpdateTask updateTask = (UpdateTask) pending.task;, +                source = updateTask.source;, +                timeInQueue = now - updateTask.addedAt;, +                timeInQueue = -1;, +    class UpdateTask extends PrioritizedRunnable {, +        public final String source;]