[+++ b/core/src/main/java/org/elasticsearch/ElasticsearchException.java, +    static final Version UNKNOWN_VERSION_ADDED = Version.fromId(0);, +, +            org.elasticsearch.tasks.TaskCancelledException::new, 146, Version.V_5_1_0_UNRELEASED),, +                                           org.elasticsearch.env.ShardLockObtainFailedException::new, 147, Version.V_5_0_2_UNRELEASED);, +, +++ b/core/src/main/java/org/elasticsearch/ElasticsearchException.java, +    static final Version UNKNOWN_VERSION_ADDED = Version.fromId(0);, +, +            org.elasticsearch.tasks.TaskCancelledException::new, 146, Version.V_5_1_0_UNRELEASED),, +                                           org.elasticsearch.env.ShardLockObtainFailedException::new, 147, Version.V_5_0_2_UNRELEASED);, +, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final int V_5_0_2_ID_UNRELEASED = 5000299;, +    public static final Version V_5_0_2_UNRELEASED = new Version(V_5_0_2_ID_UNRELEASED, org.apache.lucene.util.Version.LUCENE_6_2_1);, +    public static final int V_5_1_0_ID_UNRELEASED = 5010099;, +    public static final Version V_5_1_0_UNRELEASED = new Version(V_5_1_0_ID_UNRELEASED, org.apache.lucene.util.Version.LUCENE_6_3_0);, +    public static final int V_5_2_0_ID_UNRELEASED = 5020099;, +    public static final Version V_5_2_0_UNRELEASED = new Version(V_5_2_0_ID_UNRELEASED, org.apache.lucene.util.Version.LUCENE_6_3_0);, +    public static final int V_6_0_0_alpha1_ID_UNRELEASED = 6000001;, +    public static final Version V_6_0_0_alpha1_UNRELEASED =, +        new Version(V_6_0_0_alpha1_ID_UNRELEASED, org.apache.lucene.util.Version.LUCENE_6_3_0);, +    public static final Version CURRENT = V_6_0_0_alpha1_UNRELEASED;, +    // unreleased versions must be added to the above list with the suffix _UNRELEASED (with the exception of CURRENT), +            case V_6_0_0_alpha1_ID_UNRELEASED:, +                return V_6_0_0_alpha1_UNRELEASED;, +            case V_5_2_0_ID_UNRELEASED:, +                return V_5_2_0_UNRELEASED;, +            case V_5_1_0_ID_UNRELEASED:, +                return V_5_1_0_UNRELEASED;, +            case V_5_0_2_ID_UNRELEASED:, +                return V_5_0_2_UNRELEASED;, +        if (this.onOrAfter(Version.V_6_0_0_alpha1_UNRELEASED)) {, +++ b/core/src/main/java/org/elasticsearch/ElasticsearchException.java, +    static final Version UNKNOWN_VERSION_ADDED = Version.fromId(0);, +, +            org.elasticsearch.tasks.TaskCancelledException::new, 146, Version.V_5_1_0_UNRELEASED),, +                                           org.elasticsearch.env.ShardLockObtainFailedException::new, 147, Version.V_5_0_2_UNRELEASED);, +, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final int V_5_0_2_ID_UNRELEASED = 5000299;, +    public static final Version V_5_0_2_UNRELEASED = new Version(V_5_0_2_ID_UNRELEASED, org.apache.lucene.util.Version.LUCENE_6_2_1);, +    public static final int V_5_1_0_ID_UNRELEASED = 5010099;, +    public static final Version V_5_1_0_UNRELEASED = new Version(V_5_1_0_ID_UNRELEASED, org.apache.lucene.util.Version.LUCENE_6_3_0);, +    public static final int V_5_2_0_ID_UNRELEASED = 5020099;, +    public static final Version V_5_2_0_UNRELEASED = new Version(V_5_2_0_ID_UNRELEASED, org.apache.lucene.util.Version.LUCENE_6_3_0);, +    public static final int V_6_0_0_alpha1_ID_UNRELEASED = 6000001;, +    public static final Version V_6_0_0_alpha1_UNRELEASED =, +        new Version(V_6_0_0_alpha1_ID_UNRELEASED, org.apache.lucene.util.Version.LUCENE_6_3_0);, +    public static final Version CURRENT = V_6_0_0_alpha1_UNRELEASED;, +    // unreleased versions must be added to the above list with the suffix _UNRELEASED (with the exception of CURRENT), +            case V_6_0_0_alpha1_ID_UNRELEASED:, +                return V_6_0_0_alpha1_UNRELEASED;, +            case V_5_2_0_ID_UNRELEASED:, +                return V_5_2_0_UNRELEASED;, +            case V_5_1_0_ID_UNRELEASED:, +                return V_5_1_0_UNRELEASED;, +            case V_5_0_2_ID_UNRELEASED:, +                return V_5_0_2_UNRELEASED;, +        if (this.onOrAfter(Version.V_6_0_0_alpha1_UNRELEASED)) {, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsRequest.java, +, +        if (in.getVersion().onOrBefore(Version.V_5_1_0_UNRELEASED)) {, +        if (out.getVersion().onOrBefore(Version.V_5_1_0_UNRELEASED)) {, +++ b/core/src/main/java/org/elasticsearch/ElasticsearchException.java, +    static final Version UNKNOWN_VERSION_ADDED = Version.fromId(0);, +, +            org.elasticsearch.tasks.TaskCancelledException::new, 146, Version.V_5_1_0_UNRELEASED),, +                                           org.elasticsearch.env.ShardLockObtainFailedException::new, 147, Version.V_5_0_2_UNRELEASED);, +, +++ b/core/src/main/java/org/elasticsearch/Version.java, +    public static final int V_5_0_2_ID_UNRELEASED = 5000299;, +    public static final Version V_5_0_2_UNRELEASED = new Version(V_5_0_2_ID_UNRELEASED, org.apache.lucene.util.Version.LUCENE_6_2_1);, +    public static final int V_5_1_0_ID_UNRELEASED = 5010099;, +    public static final Version V_5_1_0_UNRELEASED = new Version(V_5_1_0_ID_UNRELEASED, org.apache.lucene.util.Version.LUCENE_6_3_0);, +    public static final int V_5_2_0_ID_UNRELEASED = 5020099;, +    public static final Version V_5_2_0_UNRELEASED = new Version(V_5_2_0_ID_UNRELEASED, org.apache.lucene.util.Version.LUCENE_6_3_0);, +    public static final int V_6_0_0_alpha1_ID_UNRELEASED = 6000001;, +    public static final Version V_6_0_0_alpha1_UNRELEASED =, +        new Version(V_6_0_0_alpha1_ID_UNRELEASED, org.apache.lucene.util.Version.LUCENE_6_3_0);, +    public static final Version CURRENT = V_6_0_0_alpha1_UNRELEASED;, +    // unreleased versions must be added to the above list with the suffix _UNRELEASED (with the exception of CURRENT), +            case V_6_0_0_alpha1_ID_UNRELEASED:, +                return V_6_0_0_alpha1_UNRELEASED;, +            case V_5_2_0_ID_UNRELEASED:, +                return V_5_2_0_UNRELEASED;, +            case V_5_1_0_ID_UNRELEASED:, +                return V_5_1_0_UNRELEASED;, +            case V_5_0_2_ID_UNRELEASED:, +                return V_5_0_2_UNRELEASED;, +        if (this.onOrAfter(Version.V_6_0_0_alpha1_UNRELEASED)) {, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsRequest.java, +, +        if (in.getVersion().onOrBefore(Version.V_5_1_0_UNRELEASED)) {, +        if (out.getVersion().onOrBefore(Version.V_5_1_0_UNRELEASED)) {, +++ b/core/src/main/java/org/elasticsearch/action/admin/cluster/shards/ClusterSearchShardsResponse.java, +        if (in.getVersion().onOrAfter(Version.V_5_1_0_UNRELEASED)) {, +        if (out.getVersion().onOrAfter(Version.V_5_1_0_UNRELEASED)) {, +, +++ b/core/src/main/java/org/elasticsearch/ElasticsearchException.java]