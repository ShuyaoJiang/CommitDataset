[+++ b/client/rest-high-level/src/test/java/org/elasticsearch/client/CrudIT.java, +                         "reason=can't specify parent if no parent field has been configured]", exception.getMessage());, +++ b/client/rest-high-level/src/test/java/org/elasticsearch/client/CrudIT.java, +                         "reason=can't specify parent if no parent field has been configured]", exception.getMessage());, +++ b/core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java, +                } catch (ElasticsearchParseException | IllegalArgumentException | RoutingMissingException e) {, +++ b/client/rest-high-level/src/test/java/org/elasticsearch/client/CrudIT.java, +                         "reason=can't specify parent if no parent field has been configured]", exception.getMessage());, +++ b/core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java, +                } catch (ElasticsearchParseException | IllegalArgumentException | RoutingMissingException e) {, +++ b/core/src/main/java/org/elasticsearch/action/index/IndexRequest.java, +                throw new IllegalArgumentException("can't specify parent if no parent field has been configured");, +                throw new IllegalArgumentException("can't specify parent if no parent field has been configured");, +        if ("".equals(id)) {, +            throw new IllegalArgumentException("if _id is specified it must not be empty");, +        }, +, +++ b/client/rest-high-level/src/test/java/org/elasticsearch/client/CrudIT.java, +                         "reason=can't specify parent if no parent field has been configured]", exception.getMessage());, +++ b/core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java, +                } catch (ElasticsearchParseException | IllegalArgumentException | RoutingMissingException e) {, +++ b/core/src/main/java/org/elasticsearch/action/index/IndexRequest.java, +                throw new IllegalArgumentException("can't specify parent if no parent field has been configured");, +                throw new IllegalArgumentException("can't specify parent if no parent field has been configured");, +        if ("".equals(id)) {, +            throw new IllegalArgumentException("if _id is specified it must not be empty");, +        }, +, +++ b/core/src/test/java/org/elasticsearch/search/child/ChildQuerySearchIT.java, +            assertThat(e.toString(), containsString("can't specify parent if no parent field has been configured"));, +            assertThat(e.toString(), containsString("can't specify parent if no parent field has been configured"));, +++ b/client/rest-high-level/src/test/java/org/elasticsearch/client/CrudIT.java, +                         "reason=can't specify parent if no parent field has been configured]", exception.getMessage());, +++ b/core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java, +                } catch (ElasticsearchParseException | IllegalArgumentException | RoutingMissingException e) {, +++ b/core/src/main/java/org/elasticsearch/action/index/IndexRequest.java, +                throw new IllegalArgumentException("can't specify parent if no parent field has been configured");, +                throw new IllegalArgumentException("can't specify parent if no parent field has been configured");, +        if ("".equals(id)) {, +            throw new IllegalArgumentException("if _id is specified it must not be empty");, +        }, +, +++ b/core/src/test/java/org/elasticsearch/search/child/ChildQuerySearchIT.java, +            assertThat(e.toString(), containsString("can't specify parent if no parent field has been configured"));, +            assertThat(e.toString(), containsString("can't specify parent if no parent field has been configured"));, +++ b/modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexParentChildTests.java, +import org.elasticsearch.action.bulk.byscroll.BulkByScrollResponse;, +import static org.hamcrest.Matchers.containsString;, +import static org.hamcrest.Matchers.hasToString;, +import static org.hamcrest.Matchers.instanceOf;, +        final BulkByScrollResponse response = copy.get();, +        assertThat(response.getBulkFailures().size(), equalTo(1));, +        final Exception cause = response.getBulkFailures().get(0).getCause();, +        assertThat(cause, instanceOf(IllegalArgumentException.class));, +        assertThat(cause, hasToString(containsString("can't specify parent if no parent field has been configured")));, +++ b/client/rest-high-level/src/test/java/org/elasticsearch/client/CrudIT.java, +                         "reason=can't specify parent if no parent field has been configured]", exception.getMessage());, +++ b/core/src/main/java/org/elasticsearch/action/bulk/TransportBulkAction.java, +                } catch (ElasticsearchParseException | IllegalArgumentException | RoutingMissingException e) {, +++ b/core/src/main/java/org/elasticsearch/action/index/IndexRequest.java, +                throw new IllegalArgumentException("can't specify parent if no parent field has been configured");, +                throw new IllegalArgumentException("can't specify parent if no parent field has been configured");, +        if ("".equals(id)) {, +            throw new IllegalArgumentException("if _id is specified it must not be empty");, +        }, +, +++ b/core/src/test/java/org/elasticsearch/search/child/ChildQuerySearchIT.java, +            assertThat(e.toString(), containsString("can't specify parent if no parent field has been configured"));, +            assertThat(e.toString(), containsString("can't specify parent if no parent field has been configured"));, +++ b/modules/reindex/src/test/java/org/elasticsearch/index/reindex/ReindexParentChildTests.java, +import org.elasticsearch.action.bulk.byscroll.BulkByScrollResponse;, +import static org.hamcrest.Matchers.containsString;, +import static org.hamcrest.Matchers.hasToString;, +import static org.hamcrest.Matchers.instanceOf;, +        final BulkByScrollResponse response = copy.get();, +        assertThat(response.getBulkFailures().size(), equalTo(1));, +        final Exception cause = response.getBulkFailures().get(0).getCause();, +        assertThat(cause, instanceOf(IllegalArgumentException.class));, +        assertThat(cause, hasToString(containsString("can't specify parent if no parent field has been configured")));, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/bulk/10_basic.yaml, +---, +"Empty _id":, +  - skip:, +      version: " - 5.3.0", +      reason: empty IDs were not rejected until 5.3.1, +  - do:, +      bulk:, +        refresh: true, +        body:, +          - index:, +              _index: test, +              _type: type, +              _id: '', +          - f: 1, +          - index:, +              _index: test, +              _type: type, +              _id: id, +          - f: 2, +          - index:]