[+++ b/build.gradle, +final boolean bwc_tests_enabled = true, +final String bwc_tests_disabled_issue = "" /* place a PR link here when committing bwc changes */, +++ b/build.gradle, +final boolean bwc_tests_enabled = true, +final String bwc_tests_disabled_issue = "" /* place a PR link here when committing bwc changes */, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="server[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]action[/\\]support[/\\]master[/\\]TransportMasterNodeActionTests.java" checks="LineLength" />, +++ b/build.gradle, +final boolean bwc_tests_enabled = true, +final String bwc_tests_disabled_issue = "" /* place a PR link here when committing bwc changes */, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="server[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]action[/\\]support[/\\]master[/\\]TransportMasterNodeActionTests.java" checks="LineLength" />, +++ b/client/rest-high-level/src/main/java/org/elasticsearch/client/rollup/job/config/RollupJobConfig.java, + *, + * When the configuration is stored server side, if there is no {@link MetricConfig} for the fields referenced in the, + * {@link HistogramGroupConfig} and {@link DateHistogramGroupConfig} in the passed {@link GroupConfig},, + * then default metrics of {@code ["min", "max"]} are provided, + *, +++ b/build.gradle, +final boolean bwc_tests_enabled = true, +final String bwc_tests_disabled_issue = "" /* place a PR link here when committing bwc changes */, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="server[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]action[/\\]support[/\\]master[/\\]TransportMasterNodeActionTests.java" checks="LineLength" />, +++ b/client/rest-high-level/src/main/java/org/elasticsearch/client/rollup/job/config/RollupJobConfig.java, + *, + * When the configuration is stored server side, if there is no {@link MetricConfig} for the fields referenced in the, + * {@link HistogramGroupConfig} and {@link DateHistogramGroupConfig} in the passed {@link GroupConfig},, + * then default metrics of {@code ["min", "max"]} are provided, + *, +++ b/client/rest-high-level/src/test/java/org/elasticsearch/client/RollupIT.java, +import org.elasticsearch.index.mapper.DateFieldMapper;, +        final List<MetricConfig> metrics = Arrays.asList(, +            new MetricConfig("value", SUPPORTED_METRICS),, +            new MetricConfig("date", Arrays.asList(MaxAggregationBuilder.NAME)));, +                if (metric.getField().equals("value")) {, +                } else {, +                    Number value = (Number) source.get(metric.getField() + ".max.value");, +                    assertEquals(, +                        DateFieldMapper.DEFAULT_DATE_TIME_FORMATTER.parser().parseDateTime("2018-01-01T00:59:50").getMillis(),, +                        value.longValue());, +                }, +++ b/build.gradle, +final boolean bwc_tests_enabled = true, +final String bwc_tests_disabled_issue = "" /* place a PR link here when committing bwc changes */, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +  <suppress files="server[/\\]src[/\\]test[/\\]java[/\\]org[/\\]elasticsearch[/\\]action[/\\]support[/\\]master[/\\]TransportMasterNodeActionTests.java" checks="LineLength" />, +++ b/client/rest-high-level/src/main/java/org/elasticsearch/client/rollup/job/config/RollupJobConfig.java, + *, + * When the configuration is stored server side, if there is no {@link MetricConfig} for the fields referenced in the, + * {@link HistogramGroupConfig} and {@link DateHistogramGroupConfig} in the passed {@link GroupConfig},, + * then default metrics of {@code ["min", "max"]} are provided, + *, +++ b/client/rest-high-level/src/test/java/org/elasticsearch/client/RollupIT.java, +import org.elasticsearch.index.mapper.DateFieldMapper;, +        final List<MetricConfig> metrics = Arrays.asList(, +            new MetricConfig("value", SUPPORTED_METRICS),, +            new MetricConfig("date", Arrays.asList(MaxAggregationBuilder.NAME)));, +                if (metric.getField().equals("value")) {, +                } else {, +                    Number value = (Number) source.get(metric.getField() + ".max.value");, +                    assertEquals(, +                        DateFieldMapper.DEFAULT_DATE_TIME_FORMATTER.parser().parseDateTime("2018-01-01T00:59:50").getMillis(),, +                        value.longValue());, +                }, +++ b/docs/java-rest/high-level/rollup/put_job.asciidoc, +By default, metrics `min`/`max` for the fields in `DateHistogramGroupConfig` and, +`HistogramGroupConfig` are added to the configuration unless the user already provided, +metrics for those fields., +, +So, for the following configuration:, +, +[source,js], +--------------------------------------------------, +"groups" : {, +  "date_histogram": {, +    "field": "timestamp",, +    "interval": "1h",, +    "delay": "7d",, +    "time_zone": "UTC", +  },, +  "terms": {, +    "fields": ["hostname", "datacenter"], +  },, +  "histogram": {, +    "fields": ["load", "net_in", "net_out"],, +    "interval": 5, +  },, +},, +"metrics": [, +    {, +        "field": "load",, +        "metrics": ["max"], +    },, +    {, +        "field": "net_in",, +        "metrics": ["max"], +    }, +], +--------------------------------------------------]