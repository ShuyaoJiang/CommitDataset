[+++ b/plugin/src/main/java/org/elasticsearch/xpack/ml/job/persistence/JobStorageDeletionTask.java, +import org.elasticsearch.action.bulk.byscroll.BulkByScrollResponse;, +import org.elasticsearch.action.bulk.byscroll.DeleteByQueryRequest;, +import org.elasticsearch.index.mapper.Uid;, +import org.elasticsearch.index.mapper.UidFieldMapper;, +import org.elasticsearch.index.query.PrefixQueryBuilder;, +                failureHandler);, +                failureHandler, +                failureHandler, +                failureHandler, +        SearchRequest searchRequest = new SearchRequest();, +        DeleteByQueryRequest request = new DeleteByQueryRequest(searchRequest);, +        PrefixQueryBuilder query = new PrefixQueryBuilder(UidFieldMapper.NAME, Uid.createUid(CategorizerState.TYPE, jobId));, +        searchRequest.source(new SearchSourceBuilder().query(query));, +        searchRequest.indicesOptions(JobProvider.addIgnoreUnavailable(IndicesOptions.lenientExpandOpen()));, +        request.setSlices(5);, +, +        client.execute(MlDeleteByQueryAction.INSTANCE, request, new ActionListener<BulkByScrollResponse>() {, +            @Override, +            public void onResponse(BulkByScrollResponse bulkByScrollResponse) {, +                finishedHandler.onResponse(true);, +            @Override, +            public void onFailure(Exception e) {, +                logger.error("Failed to delete categorizer state for job [" + jobId + "]", e);, +                finishedHandler.onResponse(false);, +            }, +        });]