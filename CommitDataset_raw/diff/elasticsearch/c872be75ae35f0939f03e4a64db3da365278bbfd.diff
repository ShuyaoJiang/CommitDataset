[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/metadata/MetaDataStateIndexService.java, +                ClusterBlocks.Builder blocks = ClusterBlocks.builder().blocks(currentState.blocks()), +                        .addIndexBlock(request.index, INDEX_CLOSED_BLOCK);, +, +                ClusterState updatedState = ClusterState.builder().state(currentState).metaData(mdBuilder).blocks(blocks).build();, +, +                RoutingAllocation.Result routingResult = shardsAllocation.reroute(newClusterStateBuilder().state(updatedState).routingTable(rtBuilder).build());, +                return ClusterState.builder().state(updatedState).routingResult(routingResult).build();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/metadata/MetaDataStateIndexService.java, +                ClusterBlocks.Builder blocks = ClusterBlocks.builder().blocks(currentState.blocks()), +                        .addIndexBlock(request.index, INDEX_CLOSED_BLOCK);, +, +                ClusterState updatedState = ClusterState.builder().state(currentState).metaData(mdBuilder).blocks(blocks).build();, +, +                RoutingAllocation.Result routingResult = shardsAllocation.reroute(newClusterStateBuilder().state(updatedState).routingTable(rtBuilder).build());, +                return ClusterState.builder().state(updatedState).routingResult(routingResult).build();, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/routing/RoutingService.java, +import org.elasticsearch.cluster.ClusterChangedEvent;, +import org.elasticsearch.cluster.ClusterService;, +import org.elasticsearch.cluster.ClusterState;, +import org.elasticsearch.cluster.ClusterStateListener;, +import org.elasticsearch.cluster.ClusterStateUpdateTask;, +            if (event.nodesRemoved()) {, +                // Commented out since we make sure to reroute whenever shards changes state or metadata changes state, +//            } else if (event.routingTableChanged()) {, +//                routingTableDirty = true;, +//                reroute();]