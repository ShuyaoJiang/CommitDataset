[+++ b/.idea/dictionaries/kimchy.xml, +      <w>multibinder</w>, +++ b/.idea/dictionaries/kimchy.xml, +      <w>multibinder</w>, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/cluster/routing/allocation/ShardAllocationModule.java, +import org.elasticsearch.common.collect.Lists;, +import java.util.List;, +, +    private List<Class<? extends NodeAllocation>> allocations = Lists.newArrayList();, +, +    public void addNodeAllocation(Class<? extends NodeAllocation> nodeAllocation) {, +        allocations.add(nodeAllocation);, +    }, +, +        Multibinder<NodeAllocation> allocationMultibinder = Multibinder.newSetBinder(binder(), NodeAllocation.class);, +        allocationMultibinder.addBinding().to(SameShardNodeAllocation.class);, +        allocationMultibinder.addBinding().to(ReplicaAfterPrimaryActiveNodeAllocation.class);, +        allocationMultibinder.addBinding().to(ThrottlingNodeAllocation.class);, +        for (Class<? extends NodeAllocation> allocation : allocations) {, +            allocationMultibinder.addBinding().to(allocation);, +        }]