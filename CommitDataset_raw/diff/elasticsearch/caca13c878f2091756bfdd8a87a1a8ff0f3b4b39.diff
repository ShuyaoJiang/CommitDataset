[+++ b/core/src/main/java/org/elasticsearch/common/util/concurrent/PrioritizedEsThreadPoolExecutor.java, +, +, +        // these two variables are protected by 'this', +        private ScheduledFuture<?> timeoutFuture;, +        private boolean started = false;, +            synchronized (this) {, +            }, +            synchronized (this) {, +                if (timeoutFuture != null) {, +                    throw new IllegalStateException("scheduleTimeout may only be called once");, +                }, +                if (started == false) {, +                }]