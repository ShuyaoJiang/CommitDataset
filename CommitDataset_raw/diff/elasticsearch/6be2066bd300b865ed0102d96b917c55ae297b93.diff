[+++ b/src/main/java/org/elasticsearch/common/util/CollectionUtils.java, +import com.google.common.primitives.Longs;, +                return Longs.compare(array[i], array[j]);, +                return Longs.compare(pivot, array[j]);, +++ b/src/main/java/org/elasticsearch/common/util/CollectionUtils.java, +import com.google.common.primitives.Longs;, +                return Longs.compare(array[i], array[j]);, +                return Longs.compare(pivot, array[j]);, +++ /dev/null, +++ b/src/main/java/org/elasticsearch/common/util/CollectionUtils.java, +import com.google.common.primitives.Longs;, +                return Longs.compare(array[i], array[j]);, +                return Longs.compare(pivot, array[j]);, +++ /dev/null, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/Bucket.java, +            return asc ? Double.compare(v1, v2) : Double.compare(v2, v1);, +++ b/src/main/java/org/elasticsearch/common/util/CollectionUtils.java, +import com.google.common.primitives.Longs;, +                return Longs.compare(array[i], array[j]);, +                return Longs.compare(pivot, array[j]);, +++ /dev/null, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/Bucket.java, +            return asc ? Double.compare(v1, v2) : Double.compare(v2, v1);, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramBase.java, +import com.google.common.primitives.Longs;, +                return Longs.compare(b1.getKey(), b2.getKey());, +                return - Longs.compare(b1.getKey(), b2.getKey());, +                int cmp = Longs.compare(b1.getDocCount(), b2.getDocCount());, +                    cmp = Longs.compare(b1.getKey(), b2.getKey());, +                int cmp = - Longs.compare(b1.getDocCount(), b2.getDocCount());, +                    cmp = Longs.compare(b1.getKey(), b2.getKey());, +++ b/src/main/java/org/elasticsearch/common/util/CollectionUtils.java, +import com.google.common.primitives.Longs;, +                return Longs.compare(array[i], array[j]);, +                return Longs.compare(pivot, array[j]);, +++ /dev/null, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/Bucket.java, +            return asc ? Double.compare(v1, v2) : Double.compare(v2, v1);, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramBase.java, +import com.google.common.primitives.Longs;, +                return Longs.compare(b1.getKey(), b2.getKey());, +                return - Longs.compare(b1.getKey(), b2.getKey());, +                int cmp = Longs.compare(b1.getDocCount(), b2.getDocCount());, +                    cmp = Longs.compare(b1.getKey(), b2.getKey());, +                int cmp = - Longs.compare(b1.getDocCount(), b2.getDocCount());, +                    cmp = Longs.compare(b1.getKey(), b2.getKey());, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalOrder.java, +import com.google.common.primitives.Longs;, +            int cmp = - Longs.compare(o1.getDocCount(), o2.getDocCount());, +            int cmp = Longs.compare(o1.getDocCount(), o2.getDocCount());, +++ b/src/main/java/org/elasticsearch/common/util/CollectionUtils.java, +import com.google.common.primitives.Longs;, +                return Longs.compare(array[i], array[j]);, +                return Longs.compare(pivot, array[j]);, +++ /dev/null, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/Bucket.java, +            return asc ? Double.compare(v1, v2) : Double.compare(v2, v1);, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramBase.java, +import com.google.common.primitives.Longs;, +                return Longs.compare(b1.getKey(), b2.getKey());, +                return - Longs.compare(b1.getKey(), b2.getKey());, +                int cmp = Longs.compare(b1.getDocCount(), b2.getDocCount());, +                    cmp = Longs.compare(b1.getKey(), b2.getKey());, +                int cmp = - Longs.compare(b1.getDocCount(), b2.getDocCount());, +                    cmp = Longs.compare(b1.getKey(), b2.getKey());, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalOrder.java, +import com.google.common.primitives.Longs;, +            int cmp = - Longs.compare(o1.getDocCount(), o2.getDocCount());, +            int cmp = Longs.compare(o1.getDocCount(), o2.getDocCount());, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTerms.java, +import com.google.common.primitives.Longs;, +            return Longs.compare(term, other.getKeyAsNumber().longValue());, +++ b/src/main/java/org/elasticsearch/common/util/CollectionUtils.java, +import com.google.common.primitives.Longs;, +                return Longs.compare(array[i], array[j]);, +                return Longs.compare(pivot, array[j]);, +++ /dev/null, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/Bucket.java, +            return asc ? Double.compare(v1, v2) : Double.compare(v2, v1);, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramBase.java, +import com.google.common.primitives.Longs;, +                return Longs.compare(b1.getKey(), b2.getKey());, +                return - Longs.compare(b1.getKey(), b2.getKey());, +                int cmp = Longs.compare(b1.getDocCount(), b2.getDocCount());, +                    cmp = Longs.compare(b1.getKey(), b2.getKey());, +                int cmp = - Longs.compare(b1.getDocCount(), b2.getDocCount());, +                    cmp = Longs.compare(b1.getKey(), b2.getKey());, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalOrder.java, +import com.google.common.primitives.Longs;, +            int cmp = - Longs.compare(o1.getDocCount(), o2.getDocCount());, +            int cmp = Longs.compare(o1.getDocCount(), o2.getDocCount());, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/LongTerms.java, +import com.google.common.primitives.Longs;, +            return Longs.compare(term, other.getKeyAsNumber().longValue());, +++ b/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/Terms.java, +++ b/src/main/java/org/elasticsearch/common/util/CollectionUtils.java, +import com.google.common.primitives.Longs;, +                return Longs.compare(array[i], array[j]);, +                return Longs.compare(pivot, array[j]);, +++ /dev/null]