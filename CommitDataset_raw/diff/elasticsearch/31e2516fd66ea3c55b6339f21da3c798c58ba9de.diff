[+++ b/pom.xml, +            <artifactId>elasticsearch-license-plugin-api</artifactId>, +            <groupId>org.elasticsearch</groupId>, +            <artifactId>elasticsearch-license-plugin</artifactId>, +            <version>${license.plugin.version}</version>, +            <scope>test</scope>, +        </dependency>, +        <dependency>, +++ b/pom.xml, +            <artifactId>elasticsearch-license-plugin-api</artifactId>, +            <groupId>org.elasticsearch</groupId>, +            <artifactId>elasticsearch-license-plugin</artifactId>, +            <version>${license.plugin.version}</version>, +            <scope>test</scope>, +        </dependency>, +        <dependency>, +++ b/src/main/java/org/elasticsearch/shield/license/LicenseService.java, +    private static final LicensesClientService.TrialLicenseOptions TRIAL_LICENSE_OPTIONS =, +            new LicensesClientService.TrialLicenseOptions(TimeValue.timeValueHours(30 * 24), 1000);, +    private final Collection<LicensesClientService.ExpirationCallback> expirationLoggers;, +                new LicensesClientService.ExpirationCallback.Pre(days(7), days(30), days(1)) {, +                    public void on(License license, LicensesClientService.ExpirationStatus status) {, +                new LicensesClientService.ExpirationCallback.Pre(days(0), days(7), minutes(10)) {, +                    public void on(License license, LicensesClientService.ExpirationStatus status) {, +                new LicensesClientService.ExpirationCallback.Post(days(0), null, minutes(10)) {, +                    public void on(License license, LicensesClientService.ExpirationStatus status) {, +++ b/pom.xml, +            <artifactId>elasticsearch-license-plugin-api</artifactId>, +            <groupId>org.elasticsearch</groupId>, +            <artifactId>elasticsearch-license-plugin</artifactId>, +            <version>${license.plugin.version}</version>, +            <scope>test</scope>, +        </dependency>, +        <dependency>, +++ b/src/main/java/org/elasticsearch/shield/license/LicenseService.java, +    private static final LicensesClientService.TrialLicenseOptions TRIAL_LICENSE_OPTIONS =, +            new LicensesClientService.TrialLicenseOptions(TimeValue.timeValueHours(30 * 24), 1000);, +    private final Collection<LicensesClientService.ExpirationCallback> expirationLoggers;, +                new LicensesClientService.ExpirationCallback.Pre(days(7), days(30), days(1)) {, +                    public void on(License license, LicensesClientService.ExpirationStatus status) {, +                new LicensesClientService.ExpirationCallback.Pre(days(0), days(7), minutes(10)) {, +                    public void on(License license, LicensesClientService.ExpirationStatus status) {, +                new LicensesClientService.ExpirationCallback.Post(days(0), null, minutes(10)) {, +                    public void on(License license, LicensesClientService.ExpirationStatus status) {, +++ b/src/test/java/org/elasticsearch/integration/ClusterPrivilegeTests.java, +, +++ b/pom.xml, +            <artifactId>elasticsearch-license-plugin-api</artifactId>, +            <groupId>org.elasticsearch</groupId>, +            <artifactId>elasticsearch-license-plugin</artifactId>, +            <version>${license.plugin.version}</version>, +            <scope>test</scope>, +        </dependency>, +        <dependency>, +++ b/src/main/java/org/elasticsearch/shield/license/LicenseService.java, +    private static final LicensesClientService.TrialLicenseOptions TRIAL_LICENSE_OPTIONS =, +            new LicensesClientService.TrialLicenseOptions(TimeValue.timeValueHours(30 * 24), 1000);, +    private final Collection<LicensesClientService.ExpirationCallback> expirationLoggers;, +                new LicensesClientService.ExpirationCallback.Pre(days(7), days(30), days(1)) {, +                    public void on(License license, LicensesClientService.ExpirationStatus status) {, +                new LicensesClientService.ExpirationCallback.Pre(days(0), days(7), minutes(10)) {, +                    public void on(License license, LicensesClientService.ExpirationStatus status) {, +                new LicensesClientService.ExpirationCallback.Post(days(0), null, minutes(10)) {, +                    public void on(License license, LicensesClientService.ExpirationStatus status) {, +++ b/src/test/java/org/elasticsearch/integration/ClusterPrivilegeTests.java, +, +++ b/src/test/java/org/elasticsearch/integration/LicensingTests.java, +        public void register(String s, LicensesClientService.TrialLicenseOptions trialLicenseOptions, Collection<LicensesClientService.ExpirationCallback> collection, Listener listener) {]