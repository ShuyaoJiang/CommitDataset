[+++ b/src/main/java/org/elasticsearch/common/compress/CompressorFactory.java, +    public static boolean isCompressed(IndexInput in) throws IOException {, +        return compressor(in) != null;, +    }, +, +++ b/src/main/java/org/elasticsearch/common/compress/CompressorFactory.java, +    public static boolean isCompressed(IndexInput in) throws IOException {, +        return compressor(in) != null;, +    }, +, +++ b/src/main/java/org/elasticsearch/indices/recovery/RecoverySource.java, +import org.elasticsearch.common.compress.CompressorFactory;, +                                    boolean shouldCompressRequest = recoverySettings.compress();, +                                    if (CompressorFactory.isCompressed(indexInput)) {, +                                        shouldCompressRequest = false;, +                                    }, +, +                                                TransportRequestOptions.options().withCompress(shouldCompressRequest).withLowType(), VoidTransportResponseHandler.INSTANCE_SAME).txGet();]