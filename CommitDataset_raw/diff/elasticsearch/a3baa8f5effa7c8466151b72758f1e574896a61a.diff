[+++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/action/TransportFreezeIndexAction.java, +                    imdBuilder.settingsVersion(meta.getSettingsVersion() + 1);, +++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/action/TransportFreezeIndexAction.java, +                    imdBuilder.settingsVersion(meta.getSettingsVersion() + 1);, +++ b/x-pack/plugin/core/src/test/java/org/elasticsearch/index/engine/FrozenIndexTests.java, +import static org.hamcrest.Matchers.equalTo;, +, +    public void testFreezeIndexIncreasesIndexSettingsVersion() throws ExecutionException, InterruptedException {, +        final String index = "test";, +        createIndex(index, Settings.builder().put("index.number_of_shards", 1).put("index.number_of_replicas", 0).build());, +        client().prepareIndex(index, "_doc").setSource("field", "value").execute().actionGet();, +, +        final long settingsVersion = client().admin().cluster().prepareState().get(), +            .getState().metaData().index(index).getSettingsVersion();, +, +        XPackClient xPackClient = new XPackClient(client());, +        assertAcked(xPackClient.freeze(new TransportFreezeIndexAction.FreezeRequest(index)));, +        assertIndexFrozen(index);, +        assertThat(client().admin().cluster().prepareState().get().getState().metaData().index(index).getSettingsVersion(),, +            equalTo(settingsVersion + 1));, +    }]