[+++ b/src/main/java/org/elasticsearch/action/search/TransportMultiSearchAction.java, +import org.elasticsearch.common.util.concurrent.AtomicArray;, +        final AtomicArray<MultiSearchResponse.Item> responses = new AtomicArray<MultiSearchResponse.Item>(request.requests().size());, +        final AtomicInteger counter = new AtomicInteger(responses.length());, +        for (int i = 0; i < responses.length(); i++) {, +                    responses.set(index, new MultiSearchResponse.Item(searchResponse, null));, +                    responses.set(index, new MultiSearchResponse.Item(null, ExceptionsHelper.detailedMessage(e)));, +                    listener.onResponse(new MultiSearchResponse(responses.toArray(new MultiSearchResponse.Item[responses.length()])));]