[+++ b/src/main/java/org/apache/lucene/store/RateLimitedFSDirectory.java, +        if (context.context == Context.MERGE || type == StoreRateLimiting.Type.ALL) {, +            // we are merging, and type is either MERGE or ALL, rate limit..., +            return new RateLimitedIndexOutput(new RateLimiterWrapper(limiter, rateListener), output);, +    // we wrap the limiter to notify our store if we limited to get statistics, +    static final class RateLimiterWrapper extends RateLimiter {, +        private final RateLimiter delegate;, +        RateLimiterWrapper(RateLimiter delegate, StoreRateLimiting.Listener rateListener) {, +        public void setMbPerSec(double mbPerSec) {, +            delegate.setMbPerSec(mbPerSec);, +        }, +, +        @Override, +        public double getMbPerSec() {, +            return delegate.getMbPerSec();, +        }, +, +        @Override, +        public long pause(long bytes) {, +            long pause = delegate.pause(bytes);, +            return pause;, +        public long getMinPauseCheckBytes() {, +            return delegate.getMinPauseCheckBytes();]