[+++ b/core/src/test/java/org/elasticsearch/threadpool/UpdateThreadPoolSettingsTests.java, +import java.util.Map;, +, +                    .put("node.ingest", true), +                            .put("node.ingest", true), +            threadPool = new ThreadPool(settingsBuilder().put("name", "testUpdateSettingsCanNotChangeThreadPoolType"), +                .put("node.ingest", true).build());, +                    .put("name", "testCachedExecutorType").put("node.ingest", true).build();, +                    .put("name", "testFixedExecutorType").put("node.ingest", true).build();, +                    .put("name", "testScalingExecutorType").put("node.ingest", true).build();, +                    .put("name", "testCachedExecutorType").put("node.ingest", true).build();, +                    .put("name", "testCustomThreadPool").put("node.ingest", true).build();, +        return randomFrom(set.toArray(new ThreadPool.ThreadPoolType[set.size()]));, +        return randomFrom(ThreadPool.THREAD_POOL_TYPES.entrySet().stream().filter(t -> t.getValue().equals(type)).map(Map.Entry::getKey).collect(Collectors.toList()));]