[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/IndicesQueryBuilder.java, + * it does not match those indices (by default)., +    private String sNoMatchQuery;, +    private QueryBuilder noMatchQuery;, +, +    /**, +     * Sets the no match query, can either be <tt>all</tt> or <tt>none</tt>., +     */, +    public IndicesQueryBuilder noMatchQuery(String type) {, +        this.sNoMatchQuery = type;, +        return this;, +    }, +, +    /**, +     * Sets the query to use when it executes on an index that does not match the indices provided., +     */, +    public IndicesQueryBuilder noMatchQuery(QueryBuilder noMatchQuery) {, +        this.noMatchQuery = noMatchQuery;, +        return this;, +    }, +, +        if (noMatchQuery != null) {, +            builder.field("no_match_query");, +            noMatchQuery.toXContent(builder, params);, +        } else if (sNoMatchQuery != null) {, +            builder.field("no_match_query", sNoMatchQuery);, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/IndicesQueryBuilder.java, + * it does not match those indices (by default)., +    private String sNoMatchQuery;, +    private QueryBuilder noMatchQuery;, +, +    /**, +     * Sets the no match query, can either be <tt>all</tt> or <tt>none</tt>., +     */, +    public IndicesQueryBuilder noMatchQuery(String type) {, +        this.sNoMatchQuery = type;, +        return this;, +    }, +, +    /**, +     * Sets the query to use when it executes on an index that does not match the indices provided., +     */, +    public IndicesQueryBuilder noMatchQuery(QueryBuilder noMatchQuery) {, +        this.noMatchQuery = noMatchQuery;, +        return this;, +    }, +, +        if (noMatchQuery != null) {, +            builder.field("no_match_query");, +            noMatchQuery.toXContent(builder, params);, +        } else if (sNoMatchQuery != null) {, +            builder.field("no_match_query", sNoMatchQuery);, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/query/IndicesQueryParser.java, +import org.elasticsearch.common.lucene.search.MatchNoDocsQuery;, +        Query noMatchQuery = Queries.MATCH_ALL_QUERY;, +                } else if ("no_match_query".equals(currentFieldName)) {, +                    noMatchQuery = parseContext.parseInnerQuery();, +                } else if ("no_match_query".equals(currentFieldName)) {, +                    String type = parser.text();, +                    if ("all".equals(type)) {, +                        noMatchQuery = Queries.MATCH_ALL_QUERY;, +                    } else if ("none".equals(type)) {, +                        noMatchQuery = MatchNoDocsQuery.INSTANCE;, +                    }, +        return noMatchQuery;]