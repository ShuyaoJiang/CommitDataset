[+++ b/docs/plugins/discovery-ec2.asciidoc, +`TAGNAME` refers to a name of a tag configured for all EC2 instances. Instances which don't, +have this tag set will be ignored by the discovery process., +http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Using_Tags.html[Read more about EC2 Tags]., +++ b/docs/plugins/discovery-ec2.asciidoc, +`TAGNAME` refers to a name of a tag configured for all EC2 instances. Instances which don't, +have this tag set will be ignored by the discovery process., +http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Using_Tags.html[Read more about EC2 Tags]., +++ b/plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2Service.java, +         * Can be one of private_ip, public_ip, private_dns, public_dns or tag:XXXX where, +         * XXXX refers to a name of a tag configured for all EC2 instances. Instances which don't, +         * have this tag set will be ignored by the discovery process. Defaults to private_ip., +++ b/docs/plugins/discovery-ec2.asciidoc, +`TAGNAME` refers to a name of a tag configured for all EC2 instances. Instances which don't, +have this tag set will be ignored by the discovery process., +http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Using_Tags.html[Read more about EC2 Tags]., +++ b/plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2Service.java, +         * Can be one of private_ip, public_ip, private_dns, public_dns or tag:XXXX where, +         * XXXX refers to a name of a tag configured for all EC2 instances. Instances which don't, +         * have this tag set will be ignored by the discovery process. Defaults to private_ip., +++ b/plugins/discovery-ec2/src/main/java/org/elasticsearch/discovery/ec2/AwsEc2UnicastHostsProvider.java, +                            discoNodes.add(new DiscoveryNode(instance.getInstanceId(), "#cloud-" + instance.getInstanceId() + "-" + i, addresses[i],, +++ b/docs/plugins/discovery-ec2.asciidoc, +`TAGNAME` refers to a name of a tag configured for all EC2 instances. Instances which don't, +have this tag set will be ignored by the discovery process., +http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Using_Tags.html[Read more about EC2 Tags]., +++ b/plugins/discovery-ec2/src/main/java/org/elasticsearch/cloud/aws/AwsEc2Service.java, +         * Can be one of private_ip, public_ip, private_dns, public_dns or tag:XXXX where, +         * XXXX refers to a name of a tag configured for all EC2 instances. Instances which don't, +         * have this tag set will be ignored by the discovery process. Defaults to private_ip., +++ b/plugins/discovery-ec2/src/main/java/org/elasticsearch/discovery/ec2/AwsEc2UnicastHostsProvider.java, +                            discoNodes.add(new DiscoveryNode(instance.getInstanceId(), "#cloud-" + instance.getInstanceId() + "-" + i, addresses[i],, +++ b/plugins/discovery-ec2/src/test/java/org/elasticsearch/discovery/ec2/Ec2DiscoveryTests.java, +            poorMansDNS.put("node" + (node + 1), new TransportAddress(InetAddress.getByName(addresses[node]), 9300));, +            tags.add(new Tag("foo", "node" + (node + 1)));, +            TransportAddress address = discoveryNode.getAddress();, +            TransportAddress expected = poorMansDNS.get(discoveryNode.getName());, +            assertEquals(address, expected);]