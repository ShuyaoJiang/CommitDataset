[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +import org.elasticsearch.monitor.jvm.JvmInfo;, +        // warn if running using the client VM, +        if (JvmInfo.jvmInfo().vmName().toLowerCase().contains("client")) {, +            ESLogger logger = Loggers.getLogger(Bootstrap.class);, +            logger.warn("jvm uses the client vm, make sure to run `java` with the server vm for best performance by adding `-server` to the command line");, +        }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +import org.elasticsearch.monitor.jvm.JvmInfo;, +        // warn if running using the client VM, +        if (JvmInfo.jvmInfo().vmName().toLowerCase().contains("client")) {, +            ESLogger logger = Loggers.getLogger(Bootstrap.class);, +            logger.warn("jvm uses the client vm, make sure to run `java` with the server vm for best performance by adding `-server` to the command line");, +        }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/monitor/jvm/JvmInfo.java, +        info.version = runtimeMXBean.getSystemProperties().get("java.version");, +    String version = "";, +    public String version() {, +        return this.version;, +    }, +, +    public String getVersion() {, +        return this.version;, +    }, +, +        builder.field("version", version);, +        version = in.readUTF();, +        out.writeUTF(version);]