[+++ b/server/src/main/java/org/elasticsearch/persistent/PersistentTasksService.java, +     * Checks if the persistent task with giving id (taskId) has the desired state and if it doesn't, +     * waits of it., +        if (predicate.test(PersistentTasksCustomMetaData.getTaskWithId(stateObserver.setAndGetObservedState(), taskId))) {, +            listener.onResponse(taskId);, +        } else {, +    }]