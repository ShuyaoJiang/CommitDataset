[+++ b/core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java, +                                if (newMapper.parentFieldMapper().active()) {, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java, +                                if (newMapper.parentFieldMapper().active()) {, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java, +                                if (newMapper.parentFieldMapper().active()) {, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java, +                                if (newMapper.parentFieldMapper().active()) {, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java, +                                if (newMapper.parentFieldMapper().active()) {, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/plain/ParentChildIndexFieldData.java, +public class ParentChildIndexFieldData extends AbstractIndexFieldData<AtomicParentChildFieldData> implements IndexParentChildFieldData {, +    private final Set<String> parentTypes;, +        Set<String> parentTypes = new HashSet<>();, +                parentTypes.add(parentFieldMapper.type());, +        this.parentTypes = parentTypes;, +        throw new UnsupportedOperationException();, +        return AbstractAtomicParentChildFieldData.empty();, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java, +                                if (newMapper.parentFieldMapper().active()) {, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/plain/ParentChildIndexFieldData.java, +public class ParentChildIndexFieldData extends AbstractIndexFieldData<AtomicParentChildFieldData> implements IndexParentChildFieldData {, +    private final Set<String> parentTypes;, +        Set<String> parentTypes = new HashSet<>();, +                parentTypes.add(parentFieldMapper.type());, +        this.parentTypes = parentTypes;, +        throw new UnsupportedOperationException();, +        return AbstractAtomicParentChildFieldData.empty();, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java, +                                if (newMapper.parentFieldMapper().active()) {, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/plain/ParentChildIndexFieldData.java, +public class ParentChildIndexFieldData extends AbstractIndexFieldData<AtomicParentChildFieldData> implements IndexParentChildFieldData {, +    private final Set<String> parentTypes;, +        Set<String> parentTypes = new HashSet<>();, +                parentTypes.add(parentFieldMapper.type());, +        this.parentTypes = parentTypes;, +        throw new UnsupportedOperationException();, +        return AbstractAtomicParentChildFieldData.empty();, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/index/mapper/MapperService.java, +            if (mapper.type().equals(mapper.parentFieldMapper().type())) {, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java, +                                if (newMapper.parentFieldMapper().active()) {, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/plain/ParentChildIndexFieldData.java, +public class ParentChildIndexFieldData extends AbstractIndexFieldData<AtomicParentChildFieldData> implements IndexParentChildFieldData {, +    private final Set<String> parentTypes;, +        Set<String> parentTypes = new HashSet<>();, +                parentTypes.add(parentFieldMapper.type());, +        this.parentTypes = parentTypes;, +        throw new UnsupportedOperationException();, +        return AbstractAtomicParentChildFieldData.empty();, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/index/mapper/MapperService.java, +            if (mapper.type().equals(mapper.parentFieldMapper().type())) {, +++ b/core/src/main/java/org/elasticsearch/index/query/HasChildQueryBuilder.java, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java, +                                if (newMapper.parentFieldMapper().active()) {, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/plain/ParentChildIndexFieldData.java, +public class ParentChildIndexFieldData extends AbstractIndexFieldData<AtomicParentChildFieldData> implements IndexParentChildFieldData {, +    private final Set<String> parentTypes;, +        Set<String> parentTypes = new HashSet<>();, +                parentTypes.add(parentFieldMapper.type());, +        this.parentTypes = parentTypes;, +        throw new UnsupportedOperationException();, +        return AbstractAtomicParentChildFieldData.empty();, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/index/mapper/MapperService.java, +            if (mapper.type().equals(mapper.parentFieldMapper().type())) {, +++ b/core/src/main/java/org/elasticsearch/index/query/HasChildQueryBuilder.java, +++ b/core/src/main/java/org/elasticsearch/index/query/HasChildQueryParser.java, +++ b/core/src/main/java/org/elasticsearch/cluster/metadata/MetaDataMappingService.java, +                                if (newMapper.parentFieldMapper().active()) {, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldDataService.java, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/plain/ParentChildIndexFieldData.java, +public class ParentChildIndexFieldData extends AbstractIndexFieldData<AtomicParentChildFieldData> implements IndexParentChildFieldData {, +    private final Set<String> parentTypes;]