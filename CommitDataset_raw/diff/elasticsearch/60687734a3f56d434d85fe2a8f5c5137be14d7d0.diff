[+++ b/client/rest/src/main/java/org/elasticsearch/client/RestClient.java, +    static URI buildUri(String pathPrefix, String path, Map<String, String> params) {, +++ b/client/rest/src/main/java/org/elasticsearch/client/RestClient.java, +    static URI buildUri(String pathPrefix, String path, Map<String, String> params) {, +++ b/client/rest/src/test/java/org/elasticsearch/client/RestClientTests.java, +import java.net.URI;, +import java.util.Collections;, +, +    public void testBuildUriLeavesPathUntouched() {, +        {, +            URI uri = RestClient.buildUri("/foo$bar", "/index/type/id", Collections.<String, String>emptyMap());, +            assertEquals("/foo$bar/index/type/id", uri.getPath());, +        }, +        {, +            URI uri = RestClient.buildUri(null, "/foo$bar/ty/pe/i/d", Collections.<String, String>emptyMap());, +            assertEquals("/foo$bar/ty/pe/i/d", uri.getPath());, +        }, +        {, +            URI uri = RestClient.buildUri(null, "/index/type/id", Collections.singletonMap("foo$bar", "x/y/z"));, +            assertEquals("/index/type/id", uri.getPath());, +            assertEquals("foo$bar=x/y/z", uri.getQuery());, +        }, +    }, +]