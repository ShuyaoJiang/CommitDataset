[+++ b/rest-api-spec/src/main/resources/rest-api-spec/api/cat.indices.json, +        },, +        "include_unloaded_segments": {, +          "type": "boolean",, +          "description": "If set to true segment stats will include stats for segments that are not currently loaded into memory",, +          "default": false, +++ b/rest-api-spec/src/main/resources/rest-api-spec/api/cat.indices.json, +        },, +        "include_unloaded_segments": {, +          "type": "boolean",, +          "description": "If set to true segment stats will include stats for segments that are not currently loaded into memory",, +          "default": false, +++ b/rest-api-spec/src/main/resources/rest-api-spec/api/indices.stats.json, +        },, +        "include_unloaded_segments": {, +          "type": "boolean",, +          "description": "If set to true segment stats will include stats for segments that are not currently loaded into memory",, +          "default": false, +++ b/rest-api-spec/src/main/resources/rest-api-spec/api/cat.indices.json, +        },, +        "include_unloaded_segments": {, +          "type": "boolean",, +          "description": "If set to true segment stats will include stats for segments that are not currently loaded into memory",, +          "default": false, +++ b/rest-api-spec/src/main/resources/rest-api-spec/api/indices.stats.json, +        },, +        "include_unloaded_segments": {, +          "type": "boolean",, +          "description": "If set to true segment stats will include stats for segments that are not currently loaded into memory",, +          "default": false, +++ b/server/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java, +                        segments = indexShard.segmentStats(flags.includeSegmentFileSizes(), flags.includeUnloadedSegments());, +++ b/rest-api-spec/src/main/resources/rest-api-spec/api/cat.indices.json, +        },, +        "include_unloaded_segments": {, +          "type": "boolean",, +          "description": "If set to true segment stats will include stats for segments that are not currently loaded into memory",, +          "default": false, +++ b/rest-api-spec/src/main/resources/rest-api-spec/api/indices.stats.json, +        },, +        "include_unloaded_segments": {, +          "type": "boolean",, +          "description": "If set to true segment stats will include stats for segments that are not currently loaded into memory",, +          "default": false, +++ b/server/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java, +                        segments = indexShard.segmentStats(flags.includeSegmentFileSizes(), flags.includeUnloadedSegments());, +++ b/server/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStatsFlags.java, +import org.elasticsearch.Version;, +    private boolean includeUnloadedSegments = false;, +        if (in.getVersion().onOrAfter(Version.V_8_0_0)) {, +            includeUnloadedSegments = in.readBoolean();, +        }, +        if (out.getVersion().onOrAfter(Version.V_8_0_0)) {, +            out.writeBoolean(includeUnloadedSegments);, +        }, +        includeUnloadedSegments = false;, +        includeUnloadedSegments = false;, +    public CommonStatsFlags includeUnloadedSegments(boolean includeUnloadedSegments) {, +        this.includeUnloadedSegments = includeUnloadedSegments;, +        return this;, +    }, +, +    public boolean includeUnloadedSegments() {, +        return this.includeUnloadedSegments;, +    }, +, +++ b/rest-api-spec/src/main/resources/rest-api-spec/api/cat.indices.json, +        },, +        "include_unloaded_segments": {, +          "type": "boolean",, +          "description": "If set to true segment stats will include stats for segments that are not currently loaded into memory",, +          "default": false, +++ b/rest-api-spec/src/main/resources/rest-api-spec/api/indices.stats.json, +        },, +        "include_unloaded_segments": {, +          "type": "boolean",, +          "description": "If set to true segment stats will include stats for segments that are not currently loaded into memory",, +          "default": false, +++ b/server/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStats.java, +                        segments = indexShard.segmentStats(flags.includeSegmentFileSizes(), flags.includeUnloadedSegments());, +++ b/server/src/main/java/org/elasticsearch/action/admin/indices/stats/CommonStatsFlags.java, +import org.elasticsearch.Version;, +    private boolean includeUnloadedSegments = false;, +        if (in.getVersion().onOrAfter(Version.V_8_0_0)) {, +            includeUnloadedSegments = in.readBoolean();, +        }, +        if (out.getVersion().onOrAfter(Version.V_8_0_0)) {, +            out.writeBoolean(includeUnloadedSegments);, +        }, +        includeUnloadedSegments = false;, +        includeUnloadedSegments = false;, +    public CommonStatsFlags includeUnloadedSegments(boolean includeUnloadedSegments) {, +        this.includeUnloadedSegments = includeUnloadedSegments;, +        return this;, +    }, +, +    public boolean includeUnloadedSegments() {, +        return this.includeUnloadedSegments;, +    }, +]