[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java, +        /**, +         * A simulation run, don't perform actual modifications to the mapping., +         */, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java, +        /**, +         * A simulation run, don't perform actual modifications to the mapping., +         */, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java, +    /**, +     * Should the field query {@link #fieldQuery(String)} be used when detecting this, +     * field in query string., +     */, +    void merge(FieldMapper mergeWith, DocumentMapper.MergeFlags mergeFlags) throws MergeMappingException;, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java, +        /**, +         * A simulation run, don't perform actual modifications to the mapping., +         */, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java, +    /**, +     * Should the field query {@link #fieldQuery(String)} be used when detecting this, +     * field in query string., +     */, +    void merge(FieldMapper mergeWith, DocumentMapper.MergeFlags mergeFlags) throws MergeMappingException;, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/json/JsonBoostFieldMapper.java, +import org.elasticsearch.index.mapper.DocumentMapper;, +import org.elasticsearch.index.mapper.FieldMapper;, +import org.elasticsearch.index.mapper.MergeMappingException;, + * @author kimchy (shay.banon), +, +    @Override public void merge(FieldMapper mergeWith, DocumentMapper.MergeFlags mergeFlags) throws MergeMappingException {, +        // do nothing here, no merging, but also no exception, +    }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java, +        /**, +         * A simulation run, don't perform actual modifications to the mapping., +         */, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java, +    /**, +     * Should the field query {@link #fieldQuery(String)} be used when detecting this, +     * field in query string., +     */, +    void merge(FieldMapper mergeWith, DocumentMapper.MergeFlags mergeFlags) throws MergeMappingException;, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/json/JsonBoostFieldMapper.java, +import org.elasticsearch.index.mapper.DocumentMapper;, +import org.elasticsearch.index.mapper.FieldMapper;, +import org.elasticsearch.index.mapper.MergeMappingException;, + * @author kimchy (shay.banon), +, +    @Override public void merge(FieldMapper mergeWith, DocumentMapper.MergeFlags mergeFlags) throws MergeMappingException {, +        // do nothing here, no merging, but also no exception, +    }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/json/JsonDocumentMapper.java, +        rootObjectMapper.mergeMapping(this, jsonMergeWith.rootObjectMapper, mergeFlags);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java, +        /**, +         * A simulation run, don't perform actual modifications to the mapping., +         */, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java, +    /**, +     * Should the field query {@link #fieldQuery(String)} be used when detecting this, +     * field in query string., +     */, +    void merge(FieldMapper mergeWith, DocumentMapper.MergeFlags mergeFlags) throws MergeMappingException;, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/json/JsonBoostFieldMapper.java, +import org.elasticsearch.index.mapper.DocumentMapper;, +import org.elasticsearch.index.mapper.FieldMapper;, +import org.elasticsearch.index.mapper.MergeMappingException;, + * @author kimchy (shay.banon), +, +    @Override public void merge(FieldMapper mergeWith, DocumentMapper.MergeFlags mergeFlags) throws MergeMappingException {, +        // do nothing here, no merging, but also no exception, +    }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/json/JsonDocumentMapper.java, +        rootObjectMapper.mergeMapping(this, jsonMergeWith.rootObjectMapper, mergeFlags);, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/json/JsonFieldMapper.java, +import org.elasticsearch.index.mapper.DocumentMapper;, +import org.elasticsearch.index.mapper.MergeMappingException;, +    @Override public void merge(FieldMapper mergeWith, DocumentMapper.MergeFlags mergeFlags) throws MergeMappingException {, +        if (mergeFlags.ignoreDuplicates()) {, +            return;, +        }, +        throw new MergeMappingException("Mapper [" + names.fullName() + "] exists, can't merge");, +    }, +, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/DocumentMapper.java, +        /**, +         * A simulation run, don't perform actual modifications to the mapping., +         */, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/mapper/FieldMapper.java, +    /**, +     * Should the field query {@link #fieldQuery(String)} be used when detecting this, +     * field in query string., +     */, +    void merge(FieldMapper mergeWith, DocumentMapper.MergeFlags mergeFlags) throws MergeMappingException;, +]