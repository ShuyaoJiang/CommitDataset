[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/count/CountRequest.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/count/CountRequest.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java, +import org.elasticsearch.common.lucene.search.Queries;, +        Query query;, +        if (querySourceLength == 0) {, +            query = Queries.MATCH_ALL_QUERY;, +        } else {, +            query = queryParserService.parse(querySource, querySourceOffset, querySourceLength).query();, +        }, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/action/count/CountRequest.java, +++ b/modules/elasticsearch/src/main/java/org/elasticsearch/index/shard/service/InternalIndexShard.java, +import org.elasticsearch.common.lucene.search.Queries;, +        Query query;, +        if (querySourceLength == 0) {, +            query = Queries.MATCH_ALL_QUERY;, +        } else {, +            query = queryParserService.parse(querySource, querySourceOffset, querySourceLength).query();, +        }, +++ b/modules/test/integration/src/test/java/org/elasticsearch/test/integration/document/DocumentActionsTests.java, +, +            // count with no query is a match all one, +            countResponse = client1.prepareCount("test").execute().actionGet();, +            assertThat("Failures " + countResponse.shardFailures(), countResponse.shardFailures().size(), equalTo(0));, +            assertThat(countResponse.count(), equalTo(2l));, +            assertThat(countResponse.successfulShards(), equalTo(5));, +            assertThat(countResponse.failedShards(), equalTo(0));]