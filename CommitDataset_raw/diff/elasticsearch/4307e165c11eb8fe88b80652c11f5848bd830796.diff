[+++ b/core/src/test/java/org/elasticsearch/common/util/concurrent/EsExecutorsTests.java, +import org.hamcrest.Matcher;, +import static org.hamcrest.Matchers.anyOf;, +                /*, +                 * While you'd expect all threads in the pool to be active when the queue gets long enough to cause rejections this isn't, +                 * always the case. Sometimes you'll see "active threads = <pool - 1>", presumably because one of those threads has finished, +                 * its current task but has yet to pick up another task. You too can reproduce this by adding the @Repeat annotation to this, +                 * test with something like 10000 iterations. I suspect you could see "active threads = <any natural number <= to pool>". So, +                 * that is what we assert., +                 */, +                @SuppressWarnings("unchecked"), +                Matcher<String>[] activeThreads = new Matcher[pool + 1];, +                for (int p = 0; p <= pool; p++) {, +                    activeThreads[p] = containsString("active threads = " + p);, +                }, +                assertThat(message, anyOf(activeThreads));, +++ b/core/src/test/java/org/elasticsearch/common/util/concurrent/EsExecutorsTests.java, +import org.hamcrest.Matcher;, +import static org.hamcrest.Matchers.anyOf;, +                /*, +                 * While you'd expect all threads in the pool to be active when the queue gets long enough to cause rejections this isn't, +                 * always the case. Sometimes you'll see "active threads = <pool - 1>", presumably because one of those threads has finished, +                 * its current task but has yet to pick up another task. You too can reproduce this by adding the @Repeat annotation to this, +                 * test with something like 10000 iterations. I suspect you could see "active threads = <any natural number <= to pool>". So, +                 * that is what we assert., +                 */, +                @SuppressWarnings("unchecked"), +                Matcher<String>[] activeThreads = new Matcher[pool + 1];, +                for (int p = 0; p <= pool; p++) {, +                    activeThreads[p] = containsString("active threads = " + p);, +                }, +                assertThat(message, anyOf(activeThreads));, +++ b/dev-tools/prepare_release_create_release_version.py, +  print ('    s3cmd sync %s s3://download.elasticsearch.org/elasticsearch/staging/elasticsearch-%s-%s/maven/org/elasticsearch' % (localRepoElasticsearch, release_version, shortHash))]