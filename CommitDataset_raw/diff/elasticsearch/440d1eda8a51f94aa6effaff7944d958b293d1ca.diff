[+++ b/client/rest-high-level/src/test/java/org/elasticsearch/client/BulkProcessorIT.java, +import org.elasticsearch.common.xcontent.XContentBuilder;, +    private MultiGetRequest indexDocs(BulkProcessor processor, int numDocs, String localIndex, String localType,, +, +                if (localType != null) {, +                    // If the payload contains types, parsing it into a bulk request results in a warning., +                    assertWarnings(RestBulkAction.TYPES_DEPRECATION_MESSAGE);, +                }, +        XContentBuilder action = jsonBuilder().startObject().startObject("index");, +, +        if (localIndex != null) {, +            action.field("_index", localIndex);, +        }, +, +        if (localType != null) {, +            action.field("_type", localType);, +        }, +, +        action.field("_id", Integer.toString(id));, +        action.endObject().endObject();, +, +        XContentBuilder source = jsonBuilder(), +            .endObject();, +        String request = Strings.toString(action) + "\n" + Strings.toString(source) + "\n";, +    private MultiGetRequest indexDocs(BulkProcessor processor, int numDocs) throws Exception {]