[+++ b/core/src/main/java/org/elasticsearch/index/shard/IndexShard.java, +import org.apache.lucene.index.CheckIndex;, +import org.apache.lucene.index.IndexCommit;, +import org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy;, +import org.apache.lucene.index.SnapshotDeletionPolicy;, +import org.apache.lucene.index.Term;, +import org.elasticsearch.index.engine.CommitStats;, +import org.elasticsearch.index.engine.Engine;, +import org.elasticsearch.index.engine.EngineClosedException;, +import org.elasticsearch.index.engine.EngineConfig;, +import org.elasticsearch.index.engine.EngineException;, +import org.elasticsearch.index.engine.EngineFactory;, +import org.elasticsearch.index.engine.InternalEngineFactory;, +import org.elasticsearch.index.engine.RefreshFailedEngineException;, +import org.elasticsearch.index.engine.Segment;, +import org.elasticsearch.index.engine.SegmentsStats;, +import org.elasticsearch.index.mapper.DocumentMapper;, +import org.elasticsearch.index.mapper.DocumentMapperForType;, +import org.elasticsearch.index.mapper.MapperService;, +import org.elasticsearch.index.mapper.ParsedDocument;, +import org.elasticsearch.index.mapper.SourceToParse;, +import org.elasticsearch.index.mapper.Uid;, +import java.util.Arrays;, +import java.util.EnumSet;, +import java.util.List;, +import java.util.Locale;, +import java.util.Map;, +import java.util.Objects;]