[+++ b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +import org.elasticsearch.cli.UserException;, +            final Map<String, String> esSettings) throws BootstrapException, NodeValidationException, UserException {, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +import org.elasticsearch.cli.UserException;, +            final Map<String, String> esSettings) throws BootstrapException, NodeValidationException, UserException {, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java, +        throws NodeValidationException, UserException {, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +import org.elasticsearch.cli.UserException;, +            final Map<String, String> esSettings) throws BootstrapException, NodeValidationException, UserException {, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java, +        throws NodeValidationException, UserException {, +++ b/core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +import org.elasticsearch.cli.UserException;, +            final Map<String, String> esSettings) throws BootstrapException, NodeValidationException, UserException {, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java, +        throws NodeValidationException, UserException {, +++ b/core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java, +++ b/core/src/main/java/org/elasticsearch/common/logging/LogConfigurator.java, +import org.elasticsearch.cli.ExitCodes;, +import org.elasticsearch.cli.UserException;, +    public static void configure(final Environment environment, final boolean resolveConfig) throws IOException, UserException {, +, +            if (configurations.isEmpty()) {, +                throw new UserException(, +                    ExitCodes.CONFIG,, +                    "no log4j2.properties found; tried [" + environment.configFile() + "] and its subdirectories");, +            }, +, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +import org.elasticsearch.cli.UserException;, +            final Map<String, String> esSettings) throws BootstrapException, NodeValidationException, UserException {, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java, +        throws NodeValidationException, UserException {, +++ b/core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java, +++ b/core/src/main/java/org/elasticsearch/common/logging/LogConfigurator.java, +import org.elasticsearch.cli.ExitCodes;, +import org.elasticsearch.cli.UserException;, +    public static void configure(final Environment environment, final boolean resolveConfig) throws IOException, UserException {, +, +            if (configurations.isEmpty()) {, +                throw new UserException(, +                    ExitCodes.CONFIG,, +                    "no log4j2.properties found; tried [" + environment.configFile() + "] and its subdirectories");, +            }, +, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +import org.elasticsearch.cli.UserException;, +            final Map<String, String> esSettings) throws BootstrapException, NodeValidationException, UserException {, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java, +        throws NodeValidationException, UserException {, +++ b/core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java, +++ b/core/src/main/java/org/elasticsearch/common/logging/LogConfigurator.java, +import org.elasticsearch.cli.ExitCodes;, +import org.elasticsearch.cli.UserException;, +    public static void configure(final Environment environment, final boolean resolveConfig) throws IOException, UserException {, +, +            if (configurations.isEmpty()) {, +                throw new UserException(, +                    ExitCodes.CONFIG,, +                    "no log4j2.properties found; tried [" + environment.configFile() + "] and its subdirectories");, +            }, +, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +import org.elasticsearch.cli.UserException;, +            final Map<String, String> esSettings) throws BootstrapException, NodeValidationException, UserException {, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java, +        throws NodeValidationException, UserException {, +++ b/core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java, +++ b/core/src/main/java/org/elasticsearch/common/logging/LogConfigurator.java, +import org.elasticsearch.cli.ExitCodes;, +import org.elasticsearch.cli.UserException;, +    public static void configure(final Environment environment, final boolean resolveConfig) throws IOException, UserException {, +, +            if (configurations.isEmpty()) {, +                throw new UserException(, +                    ExitCodes.CONFIG,, +                    "no log4j2.properties found; tried [" + environment.configFile() + "] and its subdirectories");, +            }, +, +++ /dev/null, +++ /dev/null, +++ /dev/null, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java, +import org.elasticsearch.cli.UserException;, +            final Map<String, String> esSettings) throws BootstrapException, NodeValidationException, UserException {, +++ b/core/src/main/java/org/elasticsearch/bootstrap/Elasticsearch.java, +        throws NodeValidationException, UserException {, +++ b/core/src/main/java/org/elasticsearch/client/transport/support/TransportProxyClient.java, +++ b/core/src/main/java/org/elasticsearch/common/logging/LogConfigurator.java, +import org.elasticsearch.cli.ExitCodes;, +import org.elasticsearch.cli.UserException;, +    public static void configure(final Environment environment, final boolean resolveConfig) throws IOException, UserException {, +, +            if (configurations.isEmpty()) {]