[+++ b/core/src/main/java/org/elasticsearch/index/engine/EngineConfig.java, +    public static final Setting<String> INDEX_CODEC_SETTING = new Setting<>("index.codec", "default", (s) -> {, +        switch(s) {, +            case "default":, +            case "best_compression":, +                return s;, +            default:, +                throw new IllegalArgumentException("unknown value for [index.codec] must be one of [default, best_compression]");, +        }, +    }, false, Setting.Scope.INDEX);]