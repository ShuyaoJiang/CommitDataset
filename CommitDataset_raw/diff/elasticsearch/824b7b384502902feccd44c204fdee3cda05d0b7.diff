[+++ b/TESTING.asciidoc, +mvn verify -Dtests.filter="@Rest" -Dskip.unit.tests=true, +++ b/TESTING.asciidoc, +mvn verify -Dtests.filter="@Rest" -Dskip.unit.tests=true, +++ b/core/src/main/java/org/apache/lucene/search/vectorhighlight/CustomFieldQuery.java, +++ b/TESTING.asciidoc, +mvn verify -Dtests.filter="@Rest" -Dskip.unit.tests=true, +++ b/core/src/main/java/org/apache/lucene/search/vectorhighlight/CustomFieldQuery.java, +++ b/core/src/main/java/org/elasticsearch/common/lucene/search/Queries.java, +    public static Query newNestedFilter() {, +        return new PrefixQuery(new Term(TypeFieldMapper.NAME, new BytesRef("__")));, +    public static Query newNonNestedFilter() {, +        return not(newNestedFilter());, +++ b/TESTING.asciidoc, +mvn verify -Dtests.filter="@Rest" -Dskip.unit.tests=true, +++ b/core/src/main/java/org/apache/lucene/search/vectorhighlight/CustomFieldQuery.java, +++ b/core/src/main/java/org/elasticsearch/common/lucene/search/Queries.java, +    public static Query newNestedFilter() {, +        return new PrefixQuery(new Term(TypeFieldMapper.NAME, new BytesRef("__")));, +    public static Query newNonNestedFilter() {, +        return not(newNestedFilter());, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldData.java, +import org.apache.lucene.search.DocIdSetIterator;, +import org.apache.lucene.search.Weight;, +            private final Weight innerFilter;, +            public Nested(BitSetProducer rootFilter, Weight innerFilter) {, +            public DocIdSetIterator innerDocs(LeafReaderContext ctx) throws IOException {, +                return innerFilter.scorer(ctx);, +++ b/TESTING.asciidoc, +mvn verify -Dtests.filter="@Rest" -Dskip.unit.tests=true, +++ b/core/src/main/java/org/apache/lucene/search/vectorhighlight/CustomFieldQuery.java, +++ b/core/src/main/java/org/elasticsearch/common/lucene/search/Queries.java, +    public static Query newNestedFilter() {, +        return new PrefixQuery(new Term(TypeFieldMapper.NAME, new BytesRef("__")));, +    public static Query newNonNestedFilter() {, +        return not(newNestedFilter());, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldData.java, +import org.apache.lucene.search.DocIdSetIterator;, +import org.apache.lucene.search.Weight;, +            private final Weight innerFilter;, +            public Nested(BitSetProducer rootFilter, Weight innerFilter) {, +            public DocIdSetIterator innerDocs(LeafReaderContext ctx) throws IOException {, +                return innerFilter.scorer(ctx);, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/BytesRefFieldComparatorSource.java, +import org.apache.lucene.search.DocIdSetIterator;, +                        final DocIdSetIterator innerDocs = nested.innerDocs(context);, +                    final DocIdSetIterator innerDocs = nested.innerDocs(context);, +++ b/TESTING.asciidoc, +mvn verify -Dtests.filter="@Rest" -Dskip.unit.tests=true, +++ b/core/src/main/java/org/apache/lucene/search/vectorhighlight/CustomFieldQuery.java, +++ b/core/src/main/java/org/elasticsearch/common/lucene/search/Queries.java, +    public static Query newNestedFilter() {, +        return new PrefixQuery(new Term(TypeFieldMapper.NAME, new BytesRef("__")));, +    public static Query newNonNestedFilter() {, +        return not(newNestedFilter());, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldData.java, +import org.apache.lucene.search.DocIdSetIterator;, +import org.apache.lucene.search.Weight;, +            private final Weight innerFilter;, +            public Nested(BitSetProducer rootFilter, Weight innerFilter) {, +            public DocIdSetIterator innerDocs(LeafReaderContext ctx) throws IOException {, +                return innerFilter.scorer(ctx);, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/BytesRefFieldComparatorSource.java, +import org.apache.lucene.search.DocIdSetIterator;, +                        final DocIdSetIterator innerDocs = nested.innerDocs(context);, +                    final DocIdSetIterator innerDocs = nested.innerDocs(context);, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/DoubleValuesComparatorSource.java, +import org.apache.lucene.search.DocIdSetIterator;, +                    final DocIdSetIterator innerDocs = nested.innerDocs(context);, +++ b/TESTING.asciidoc, +mvn verify -Dtests.filter="@Rest" -Dskip.unit.tests=true, +++ b/core/src/main/java/org/apache/lucene/search/vectorhighlight/CustomFieldQuery.java, +++ b/core/src/main/java/org/elasticsearch/common/lucene/search/Queries.java, +    public static Query newNestedFilter() {, +        return new PrefixQuery(new Term(TypeFieldMapper.NAME, new BytesRef("__")));, +    public static Query newNonNestedFilter() {, +        return not(newNestedFilter());, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/IndexFieldData.java, +import org.apache.lucene.search.DocIdSetIterator;, +import org.apache.lucene.search.Weight;, +            private final Weight innerFilter;, +            public Nested(BitSetProducer rootFilter, Weight innerFilter) {, +            public DocIdSetIterator innerDocs(LeafReaderContext ctx) throws IOException {, +                return innerFilter.scorer(ctx);, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/BytesRefFieldComparatorSource.java, +import org.apache.lucene.search.DocIdSetIterator;, +                        final DocIdSetIterator innerDocs = nested.innerDocs(context);, +                    final DocIdSetIterator innerDocs = nested.innerDocs(context);, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/DoubleValuesComparatorSource.java, +import org.apache.lucene.search.DocIdSetIterator;, +                    final DocIdSetIterator innerDocs = nested.innerDocs(context);, +++ b/core/src/main/java/org/elasticsearch/index/fielddata/fieldcomparator/FloatValuesComparatorSource.java, +import org.apache.lucene.search.DocIdSetIterator;, +                    final DocIdSetIterator innerDocs = nested.innerDocs(context);, +++ b/TESTING.asciidoc, +mvn verify -Dtests.filter="@Rest" -Dskip.unit.tests=true, +++ b/core/src/main/java/org/apache/lucene/search/vectorhighlight/CustomFieldQuery.java, +++ b/core/src/main/java/org/elasticsearch/common/lucene/search/Queries.java, +    public static Query newNestedFilter() {, +        return new PrefixQuery(new Term(TypeFieldMapper.NAME, new BytesRef("__")));]