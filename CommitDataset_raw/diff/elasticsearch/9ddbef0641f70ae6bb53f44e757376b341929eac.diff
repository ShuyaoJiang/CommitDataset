[+++ b/plugin/bwc-snapshot-dummy-projects/build.gradle, +import org.apache.tools.ant.taskdefs.condition.Os, +import org.elasticsearch.gradle.test.NodeInfo, +    /* Delay building the path as the path will not exist during configuration which will, +     * fail on Windows due to getting the short name requiring the path to already exist., +     */, +    Object esCheckoutPath = """${->, +      if (Os.isFamily(Os.FAMILY_WINDOWS)) {, +        NodeInfo.getShortPathName(esCheckoutDir.toString()), +      } else {, +        esCheckoutDir.toString(), +      }, +    }""", +    Object xpackCheckoutPath = """${->, +      if (Os.isFamily(Os.FAMILY_WINDOWS)) {, +        NodeInfo.getShortPathName(xpackCheckoutDir.toString()), +      } else {, +        xpackCheckoutDir.toString(), +      }, +    }""", +      commandLine = ['git', 'clone', rootDir, esCheckoutPath], +      commandLine = ['git', 'clone', project(':x-pack-elasticsearch').projectDir, xpackCheckoutPath]]