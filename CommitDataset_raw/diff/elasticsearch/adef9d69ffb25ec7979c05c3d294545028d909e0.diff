[+++ b/modules/elasticsearch/src/main/java/org/elasticsearch/gateway/GatewayService.java, +    private final TimeValue recoverAfterTime;, +    private final int recoverAfterNodes;, +        this.recoverAfterTime = componentSettings.getAsTime("recover_after_time", null);, +        this.recoverAfterNodes = componentSettings.getAsInt("recover_after_nodes", -1);, +                if (recoverAfterNodes != -1 && clusterState.nodes().size() < recoverAfterNodes) {, +                    logger.debug("Not recovering from gateway, nodes_size [" + clusterState.nodes().size() + "] < recover_after_nodes [" + recoverAfterNodes + "]");, +                } else {, +            }, +            if (!event.state().metaData().recoveredFromGateway()) {, +                ClusterState clusterState = event.state();, +                if (recoverAfterNodes != -1 && clusterState.nodes().size() < recoverAfterNodes) {, +                    logger.debug("Not recovering from gateway, nodes_size [" + clusterState.nodes().size() + "] < recover_after_nodes [" + recoverAfterNodes + "]");, +                } else {, +                    if (readFromGateway.compareAndSet(false, true)) {, +                    }, +                }, +        logger.debug("Reading state from gateway...");, +        if (recoverAfterTime != null) {, +            logger.debug("Delaying initial state index creation for [{}]", recoverAfterTime);, +            }, recoverAfterTime);, +        if (recoverAfterTime != null) {]