[+++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +import org.gradle.api.InvalidUserDataException, +        if (project.pluginManager.hasPlugin('elasticsearch.standalone-rest-test')) {, +              throw new InvalidUserDataException('elasticsearch.standalone-test, ', +                + 'elasticearch.standalone-rest-test, and elasticsearch.build ', +                + 'are mutually exclusive'), +        }, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +import org.gradle.api.InvalidUserDataException, +        if (project.pluginManager.hasPlugin('elasticsearch.standalone-rest-test')) {, +              throw new InvalidUserDataException('elasticsearch.standalone-test, ', +                + 'elasticearch.standalone-rest-test, and elasticsearch.build ', +                + 'are mutually exclusive'), +        }, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/doc/DocsTestPlugin.groovy, +        project.pluginManager.apply('elasticsearch.standalone-rest-test'), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +import org.gradle.api.InvalidUserDataException, +        if (project.pluginManager.hasPlugin('elasticsearch.standalone-rest-test')) {, +              throw new InvalidUserDataException('elasticsearch.standalone-test, ', +                + 'elasticearch.standalone-rest-test, and elasticsearch.build ', +                + 'are mutually exclusive'), +        }, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/doc/DocsTestPlugin.groovy, +        project.pluginManager.apply('elasticsearch.standalone-rest-test'), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +    String jvmArgs = "-ea" +, +        " " + "-Xms" + System.getProperty('tests.heap.size', '512m') +, +, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +import org.gradle.api.InvalidUserDataException, +        if (project.pluginManager.hasPlugin('elasticsearch.standalone-rest-test')) {, +              throw new InvalidUserDataException('elasticsearch.standalone-test, ', +                + 'elasticearch.standalone-rest-test, and elasticsearch.build ', +                + 'are mutually exclusive'), +        }, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/doc/DocsTestPlugin.groovy, +        project.pluginManager.apply('elasticsearch.standalone-rest-test'), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +    String jvmArgs = "-ea" +, +        " " + "-Xms" + System.getProperty('tests.heap.size', '512m') +, +, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +import java.util.concurrent.TimeUnit, +            project.configurations.elasticsearchBwcDistro.resolutionStrategy.cacheChangingModulesFor(0, TimeUnit.SECONDS), +            project.configurations.elasticsearchBwcPlugins.resolutionStrategy.cacheChangingModulesFor(0, TimeUnit.SECONDS), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +import org.gradle.api.InvalidUserDataException, +        if (project.pluginManager.hasPlugin('elasticsearch.standalone-rest-test')) {, +              throw new InvalidUserDataException('elasticsearch.standalone-test, ', +                + 'elasticearch.standalone-rest-test, and elasticsearch.build ', +                + 'are mutually exclusive'), +        }, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/doc/DocsTestPlugin.groovy, +        project.pluginManager.apply('elasticsearch.standalone-rest-test'), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +    String jvmArgs = "-ea" +, +        " " + "-Xms" + System.getProperty('tests.heap.size', '512m') +, +, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +import java.util.concurrent.TimeUnit, +            project.configurations.elasticsearchBwcDistro.resolutionStrategy.cacheChangingModulesFor(0, TimeUnit.SECONDS), +            project.configurations.elasticsearchBwcPlugins.resolutionStrategy.cacheChangingModulesFor(0, TimeUnit.SECONDS), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/RestTestPlugin.groovy, +import org.elasticsearch.gradle.BuildPlugin, +import org.gradle.api.InvalidUserDataException, +/**, + * Adds support for starting an Elasticsearch cluster before running integration, + * tests. Used in conjunction with {@link StandaloneRestTestPlugin} for qa, + * projects and in conjunction with {@link BuildPlugin} for testing the rest, + * client., + */, +    List REQUIRED_PLUGINS = [, +        'elasticsearch.build',, +        'elasticsearch.standalone-rest-test'], +        if (false == REQUIRED_PLUGINS.any {project.pluginManager.hasPlugin(it)}) {, +            throw new InvalidUserDataException('elasticsearch.rest-test ', +                + 'requires either elasticsearch.build or ', +                + 'elasticsearch.standalone-test'), +        }, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +import org.gradle.api.InvalidUserDataException, +        if (project.pluginManager.hasPlugin('elasticsearch.standalone-rest-test')) {, +              throw new InvalidUserDataException('elasticsearch.standalone-test, ', +                + 'elasticearch.standalone-rest-test, and elasticsearch.build ', +                + 'are mutually exclusive'), +        }, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/doc/DocsTestPlugin.groovy, +        project.pluginManager.apply('elasticsearch.standalone-rest-test'), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterConfiguration.groovy, +    String jvmArgs = "-ea" +, +        " " + "-Xms" + System.getProperty('tests.heap.size', '512m') +, +, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +import java.util.concurrent.TimeUnit, +            project.configurations.elasticsearchBwcDistro.resolutionStrategy.cacheChangingModulesFor(0, TimeUnit.SECONDS), +            project.configurations.elasticsearchBwcPlugins.resolutionStrategy.cacheChangingModulesFor(0, TimeUnit.SECONDS), +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/RestTestPlugin.groovy, +import org.elasticsearch.gradle.BuildPlugin, +import org.gradle.api.InvalidUserDataException]