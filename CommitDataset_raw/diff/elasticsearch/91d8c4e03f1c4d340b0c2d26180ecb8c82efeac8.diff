[+++ b/rest-api-spec/src/main/resources/rest-api-spec/test/search/220_total_hits_object.yml, +      version: " - 7.99.99", +        size: 0, +      search:, +        size: 0, +        track_total_hits: 5, +        body:, +          query:, +            match:, +              foo: bar, +, +  - match: {hits.total.value: 5}, +  - match: {hits.total.relation: eq}, +, +  - do:, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/search/220_total_hits_object.yml, +      version: " - 7.99.99", +        size: 0, +      search:, +        size: 0, +        track_total_hits: 5, +        body:, +          query:, +            match:, +              foo: bar, +, +  - match: {hits.total.value: 5}, +  - match: {hits.total.relation: eq}, +, +  - do:, +++ b/server/src/main/java/org/elasticsearch/action/search/SearchPhaseController.java, +                if (totalHits <= trackTotalHitsUpTo) {]