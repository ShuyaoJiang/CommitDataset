[+++ b/core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java, +                TimeValue ttl = null;, +                                    ttl = TimeValue.parseTimeValue(parser.text(), null, currentFieldName);, +                                    ttl = new TimeValue(parser.longValue());, +++ b/core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java, +                TimeValue ttl = null;, +                                    ttl = TimeValue.parseTimeValue(parser.text(), null, currentFieldName);, +                                    ttl = new TimeValue(parser.longValue());, +++ b/core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java, +        return executeIndexRequestOnPrimary(indexRequest, indexShard);, +++ b/core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java, +                TimeValue ttl = null;, +                                    ttl = TimeValue.parseTimeValue(parser.text(), null, currentFieldName);, +                                    ttl = new TimeValue(parser.longValue());, +++ b/core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java, +        return executeIndexRequestOnPrimary(indexRequest, indexShard);, +++ b/core/src/main/java/org/elasticsearch/action/index/IndexRequest.java, +import org.elasticsearch.common.unit.TimeValue;, +    @Nullable, +    private TimeValue ttl;, +, +        if (ttl != null) {, +            if (ttl.millis() < 0) {, +                validationException = addValidationError("ttl must not be negative", validationException);, +            }, +        }, +     * Sets the ttl value as a time value expression., +    public IndexRequest ttl(String ttl) {, +        this.ttl = TimeValue.parseTimeValue(ttl, null, "ttl");, +, +    /**, +     * Sets the ttl as a {@link TimeValue} instance., +     */, +    public IndexRequest ttl(TimeValue ttl) {, +    /**, +     * Sets the relative ttl value in milliseconds. It musts be greater than 0 as it makes little sense otherwise., +     */, +    public IndexRequest ttl(long ttl) {, +        this.ttl = new TimeValue(ttl);, +        return this;, +    }, +, +    /**, +     * Returns the ttl as a {@link TimeValue}, +     */, +    public TimeValue ttl() {, +        ttl = in.readBoolean() ? TimeValue.readTimeValue(in) : null;, +        if (ttl == null) {, +            out.writeBoolean(false);, +        } else {, +            out.writeBoolean(true);, +            ttl.writeTo(out);, +        }, +++ b/core/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java, +                TimeValue ttl = null;, +                                    ttl = TimeValue.parseTimeValue(parser.text(), null, currentFieldName);, +                                    ttl = new TimeValue(parser.longValue());, +++ b/core/src/main/java/org/elasticsearch/action/bulk/TransportShardBulkAction.java, +        return executeIndexRequestOnPrimary(indexRequest, indexShard);, +++ b/core/src/main/java/org/elasticsearch/action/index/IndexRequest.java, +import org.elasticsearch.common.unit.TimeValue;, +    @Nullable, +    private TimeValue ttl;, +, +        if (ttl != null) {, +            if (ttl.millis() < 0) {, +                validationException = addValidationError("ttl must not be negative", validationException);, +            }, +        }, +     * Sets the ttl value as a time value expression., +    public IndexRequest ttl(String ttl) {, +        this.ttl = TimeValue.parseTimeValue(ttl, null, "ttl");, +, +    /**, +     * Sets the ttl as a {@link TimeValue} instance., +     */, +    public IndexRequest ttl(TimeValue ttl) {, +    /**, +     * Sets the relative ttl value in milliseconds. It musts be greater than 0 as it makes little sense otherwise., +     */, +    public IndexRequest ttl(long ttl) {, +        this.ttl = new TimeValue(ttl);, +        return this;, +    }, +, +    /**, +     * Returns the ttl as a {@link TimeValue}, +     */, +    public TimeValue ttl() {, +        ttl = in.readBoolean() ? TimeValue.readTimeValue(in) : null;, +        if (ttl == null) {, +            out.writeBoolean(false);, +        } else {, +            out.writeBoolean(true);, +            ttl.writeTo(out);, +        }, +++ b/core/src/main/java/org/elasticsearch/action/index/IndexRequestBuilder.java, +import org.elasticsearch.common.unit.TimeValue;, +    /**, +     * Sets the ttl value as a time value expression.]