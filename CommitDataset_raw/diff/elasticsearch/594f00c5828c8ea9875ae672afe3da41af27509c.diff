[+++ b/modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/SearchTemplateResponse.java, +import org.elasticsearch.common.xcontent.XContentType;, +            //we can assume the template is always json as we convert it before compiling it, +            builder.rawField("template_output", source, XContentType.JSON);, +++ b/modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/SearchTemplateResponse.java, +import org.elasticsearch.common.xcontent.XContentType;, +            //we can assume the template is always json as we convert it before compiling it, +            builder.rawField("template_output", source, XContentType.JSON);, +++ b/modules/lang-mustache/src/main/java/org/elasticsearch/script/mustache/TransportSearchTemplateAction.java, +import org.elasticsearch.common.xcontent.XContentType;, +            //we can assume the template is always json as we convert it before compiling it, +            try (XContentParser parser = XContentFactory.xContent(XContentType.JSON).createParser(xContentRegistry, source)) {]