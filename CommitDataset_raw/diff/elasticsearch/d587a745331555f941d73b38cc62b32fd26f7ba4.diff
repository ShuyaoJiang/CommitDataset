[+++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +            systemProperty 'tests.gradle', 'true', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +            systemProperty 'tests.gradle', 'true', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +            systemProperty 'tests.gradle', 'true', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        File configDir = new File(node.homeDir, 'config'), +        copyConfig.into(configDir) // copy must always have a general dest dir, even though we don't use it, +            // wrap source file in closure to delay resolution to execution time, +            copyConfig.from({ extraConfigFile.getValue() }) {, +                // this must be in a closure so it is only applied to the single file specified in from above, +                into(configDir.toPath().relativize(destConfigFile.canonicalFile.parentFile.toPath()).toFile()), +                rename { destConfigFile.name }, +            }, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +            systemProperty 'tests.gradle', 'true', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        File configDir = new File(node.homeDir, 'config'), +        copyConfig.into(configDir) // copy must always have a general dest dir, even though we don't use it, +            // wrap source file in closure to delay resolution to execution time, +            copyConfig.from({ extraConfigFile.getValue() }) {, +                // this must be in a closure so it is only applied to the single file specified in from above, +                into(configDir.toPath().relativize(destConfigFile.canonicalFile.parentFile.toPath()).toFile()), +                rename { destConfigFile.name }, +            }, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +            systemProperty 'tests.gradle', 'true', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        File configDir = new File(node.homeDir, 'config'), +        copyConfig.into(configDir) // copy must always have a general dest dir, even though we don't use it, +            // wrap source file in closure to delay resolution to execution time, +            copyConfig.from({ extraConfigFile.getValue() }) {, +                // this must be in a closure so it is only applied to the single file specified in from above, +                into(configDir.toPath().relativize(destConfigFile.canonicalFile.parentFile.toPath()).toFile()), +                rename { destConfigFile.name }, +            }, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/version.properties, +jackson           = 2.7.1, +# TODO: Upgrade httpclient to a version > 4.5.1 once released. Then remove o.e.test.rest.client.StrictHostnameVerifier* and use, +#  DefaultHostnameVerifier instead since we no longer need to workaround https://issues.apache.org/jira/browse/HTTPCLIENT-1698, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +            systemProperty 'tests.gradle', 'true', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        File configDir = new File(node.homeDir, 'config'), +        copyConfig.into(configDir) // copy must always have a general dest dir, even though we don't use it, +            // wrap source file in closure to delay resolution to execution time, +            copyConfig.from({ extraConfigFile.getValue() }) {, +                // this must be in a closure so it is only applied to the single file specified in from above, +                into(configDir.toPath().relativize(destConfigFile.canonicalFile.parentFile.toPath()).toFile()), +                rename { destConfigFile.name }, +            }, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/version.properties, +jackson           = 2.7.1, +# TODO: Upgrade httpclient to a version > 4.5.1 once released. Then remove o.e.test.rest.client.StrictHostnameVerifier* and use, +#  DefaultHostnameVerifier instead since we no longer need to workaround https://issues.apache.org/jira/browse/HTTPCLIENT-1698, +++ b/core/build.gradle, +  // from org.netty.util.internal.logging.InternalLoggerFactory (netty) - it's optional, +  'org.slf4j.Logger',, +  'org.slf4j.LoggerFactory',, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +            systemProperty 'tests.gradle', 'true', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        File configDir = new File(node.homeDir, 'config'), +        copyConfig.into(configDir) // copy must always have a general dest dir, even though we don't use it, +            // wrap source file in closure to delay resolution to execution time, +            copyConfig.from({ extraConfigFile.getValue() }) {, +                // this must be in a closure so it is only applied to the single file specified in from above, +                into(configDir.toPath().relativize(destConfigFile.canonicalFile.parentFile.toPath()).toFile()), +                rename { destConfigFile.name }, +            }, +++ b/buildSrc/src/main/resources/checkstyle_suppressions.xml, +++ b/buildSrc/version.properties, +jackson           = 2.7.1, +# TODO: Upgrade httpclient to a version > 4.5.1 once released. Then remove o.e.test.rest.client.StrictHostnameVerifier* and use, +#  DefaultHostnameVerifier instead since we no longer need to workaround https://issues.apache.org/jira/browse/HTTPCLIENT-1698, +++ b/core/build.gradle, +  // from org.netty.util.internal.logging.InternalLoggerFactory (netty) - it's optional, +  'org.slf4j.Logger',, +  'org.slf4j.LoggerFactory',, +++ b/core/src/main/java/org/elasticsearch/ElasticsearchException.java, +import org.elasticsearch.common.logging.LoggerMessageFormat;, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +            systemProperty 'tests.gradle', 'true', +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/plugin/PluginBuildPlugin.groovy, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/test/ClusterFormationTasks.groovy, +        File configDir = new File(node.homeDir, 'config'), +        copyConfig.into(configDir) // copy must always have a general dest dir, even though we don't use it, +            // wrap source file in closure to delay resolution to execution time, +            copyConfig.from({ extraConfigFile.getValue() }) {, +                // this must be in a closure so it is only applied to the single file specified in from above]