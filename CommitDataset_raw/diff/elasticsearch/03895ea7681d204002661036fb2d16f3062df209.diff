[+++ b/README.md, +* For master elasticsearch versions, look at [master branch](https://github.com/elasticsearch/elasticsearch-cloud-azure/tree/master)., +* For 1.1.x elasticsearch versions, look at [es-1.1 branch](https://github.com/elasticsearch/elasticsearch-cloud-azure/tree/es-1.1)., +* For 1.0.x elasticsearch versions, look at [es-1.0 branch](https://github.com/elasticsearch/elasticsearch-cloud-azure/tree/es-1.0)., +* For 0.90.x elasticsearch versions, look at [es-0.90 branch](https://github.com/elasticsearch/elasticsearch-cloud-azure/tree/es-0.90)., +| 3.0.0-SNAPSHOT              | master              |  XXXX-XX-XX  |, +, +Please read documentation relative to the version you are using:, +, +* [3.0.0-SNAPSHOT](https://github.com/elasticsearch/elasticsearch-cloud-azure/blob/master/README.md), +++ b/README.md, +* For master elasticsearch versions, look at [master branch](https://github.com/elasticsearch/elasticsearch-cloud-azure/tree/master)., +* For 1.1.x elasticsearch versions, look at [es-1.1 branch](https://github.com/elasticsearch/elasticsearch-cloud-azure/tree/es-1.1)., +* For 1.0.x elasticsearch versions, look at [es-1.0 branch](https://github.com/elasticsearch/elasticsearch-cloud-azure/tree/es-1.0)., +* For 0.90.x elasticsearch versions, look at [es-0.90 branch](https://github.com/elasticsearch/elasticsearch-cloud-azure/tree/es-0.90)., +| 3.0.0-SNAPSHOT              | master              |  XXXX-XX-XX  |, +, +Please read documentation relative to the version you are using:, +, +* [3.0.0-SNAPSHOT](https://github.com/elasticsearch/elasticsearch-cloud-azure/blob/master/README.md), +++ b/dev-tools/build_release.py, +# Moves the README.md file from a snapshot to a release (documentation link), +def remove_documentation_snapshot(readme_file, repo_url, release, branch):, +    pattern = '* [%s-SNAPSHOT](%sblob/%s/README.md)' % (release, repo_url, branch), +    replacement = '* [%s](%sblob/v%s/README.md)' % (release, repo_url, release), +    def callback(line):, +        # If we find pattern, we replace its content, +        if line.find(pattern) >= 0:, +            return line.replace(pattern, replacement), +        else:, +            return line, +    process_file(readme_file, callback), +, +# Add in README.markdown file the documentation for the next version, +def add_documentation_snapshot(readme_file, repo_url, release, snapshot, branch):, +    pattern = '* [%s](%sblob/v%s/README.md)' % (release, repo_url, release), +    replacement = '* [%s-SNAPSHOT](%sblob/%s/README.md)' % (snapshot, repo_url, branch), +    def callback(line):, +        # If we find pattern, we copy the line and replace its content, +        if line.find(pattern) >= 0:, +            return line.replace(pattern, replacement)+line, +        else:, +            return line, +    process_file(readme_file, callback), +    elasticsearch_version = find_from_pom('elasticsearch.version'), +    print('  Elasticsearch: [%s]' % elasticsearch_version), +    if elasticsearch_version.find('-SNAPSHOT') != -1:, +        raise RuntimeError('Can not release with a SNAPSHOT elasticsearch dependency: %s' % elasticsearch_version), +        remove_documentation_snapshot(README_FILE, project_url, release_version, src_branch), +        add_documentation_snapshot(README_FILE, project_url, release_version, snapshot_version, src_branch), +++ b/README.md, +* For master elasticsearch versions, look at [master branch](https://github.com/elasticsearch/elasticsearch-cloud-azure/tree/master)., +* For 1.1.x elasticsearch versions, look at [es-1.1 branch](https://github.com/elasticsearch/elasticsearch-cloud-azure/tree/es-1.1)., +* For 1.0.x elasticsearch versions, look at [es-1.0 branch](https://github.com/elasticsearch/elasticsearch-cloud-azure/tree/es-1.0)., +* For 0.90.x elasticsearch versions, look at [es-0.90 branch](https://github.com/elasticsearch/elasticsearch-cloud-azure/tree/es-0.90)., +| 3.0.0-SNAPSHOT              | master              |  XXXX-XX-XX  |, +, +Please read documentation relative to the version you are using:, +, +* [3.0.0-SNAPSHOT](https://github.com/elasticsearch/elasticsearch-cloud-azure/blob/master/README.md), +++ b/dev-tools/build_release.py, +# Moves the README.md file from a snapshot to a release (documentation link), +def remove_documentation_snapshot(readme_file, repo_url, release, branch):, +    pattern = '* [%s-SNAPSHOT](%sblob/%s/README.md)' % (release, repo_url, branch), +    replacement = '* [%s](%sblob/v%s/README.md)' % (release, repo_url, release), +    def callback(line):, +        # If we find pattern, we replace its content, +        if line.find(pattern) >= 0:, +            return line.replace(pattern, replacement), +        else:, +            return line, +    process_file(readme_file, callback), +, +# Add in README.markdown file the documentation for the next version, +def add_documentation_snapshot(readme_file, repo_url, release, snapshot, branch):, +    pattern = '* [%s](%sblob/v%s/README.md)' % (release, repo_url, release), +    replacement = '* [%s-SNAPSHOT](%sblob/%s/README.md)' % (snapshot, repo_url, branch), +    def callback(line):, +        # If we find pattern, we copy the line and replace its content, +        if line.find(pattern) >= 0:, +            return line.replace(pattern, replacement)+line, +        else:, +            return line, +    process_file(readme_file, callback), +    elasticsearch_version = find_from_pom('elasticsearch.version'), +    print('  Elasticsearch: [%s]' % elasticsearch_version), +    if elasticsearch_version.find('-SNAPSHOT') != -1:, +        raise RuntimeError('Can not release with a SNAPSHOT elasticsearch dependency: %s' % elasticsearch_version), +        remove_documentation_snapshot(README_FILE, project_url, release_version, src_branch), +        add_documentation_snapshot(README_FILE, project_url, release_version, snapshot_version, src_branch), +++ b/pom.xml, +        <elasticsearch.version>2.0.0-SNAPSHOT</elasticsearch.version>]