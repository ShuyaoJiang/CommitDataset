[+++ b/core/src/main/java/org/elasticsearch/common/network/NetworkUtils.java, +        NetworkInterface intf = null;, +        for (NetworkInterface networkInterface : getInterfaces()) {, +            if (name.equals(networkInterface.getName())) {, +                intf = networkInterface;, +                break;, +            }, +        }, +, +++ b/core/src/main/java/org/elasticsearch/common/network/NetworkUtils.java, +        NetworkInterface intf = null;, +        for (NetworkInterface networkInterface : getInterfaces()) {, +            if (name.equals(networkInterface.getName())) {, +                intf = networkInterface;, +                break;, +            }, +        }, +, +++ b/core/src/test/java/org/elasticsearch/common/network/NetworkUtilsTests.java, +import java.net.NetworkInterface;, +import java.util.Arrays;, +import java.util.Collections;, +import java.util.Enumeration;, +, +    /**, +     * Test that selecting by name is possible and properly matches the addresses on all interfaces and virtual, +     * interfaces., +     */, +    public void testAddressInterfaceLookup() throws Exception {, +        for (NetworkInterface netIf : NetworkUtils.getInterfaces()) {, +            String name = netIf.getName();, +            InetAddress[] expectedAddresses = Collections.list(netIf.getInetAddresses()).toArray(new InetAddress[0]);, +            InetAddress[] foundAddresses = NetworkUtils.getAddressesForInterface(name);, +            assertArrayEquals(expectedAddresses, foundAddresses);, +        }, +    }]