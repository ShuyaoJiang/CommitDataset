[+++ b/x-pack/plugin/security/src/test/java/org/elasticsearch/xpack/security/action/saml/TransportSamlInvalidateSessionActionTests.java, +    private static final String REALM_NAME = "saml1";, +, +        final Path metadata = PathUtils.get(SamlRealm.class.getResource("idp1.xml").toURI());, +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.IDP_METADATA_PATH), metadata.toString()), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.IDP_ENTITY_ID), SamlRealmTests.TEST_IDP_ENTITY_ID), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.SP_ENTITY_ID), SamlRealmTestHelper.SP_ENTITY_ID), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.SP_ACS), SamlRealmTestHelper.SP_ACS_URL), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.SP_LOGOUT), SamlRealmTestHelper.SP_LOGOUT_URL), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.PRINCIPAL_ATTRIBUTE.getAttribute()), "uid"), +        final RealmIdentifier realmId = new RealmIdentifier("saml", REALM_NAME);, +                realmId,, +            settings,, +++ b/x-pack/plugin/security/src/test/java/org/elasticsearch/xpack/security/action/saml/TransportSamlInvalidateSessionActionTests.java, +    private static final String REALM_NAME = "saml1";, +, +        final Path metadata = PathUtils.get(SamlRealm.class.getResource("idp1.xml").toURI());, +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.IDP_METADATA_PATH), metadata.toString()), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.IDP_ENTITY_ID), SamlRealmTests.TEST_IDP_ENTITY_ID), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.SP_ENTITY_ID), SamlRealmTestHelper.SP_ENTITY_ID), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.SP_ACS), SamlRealmTestHelper.SP_ACS_URL), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.SP_LOGOUT), SamlRealmTestHelper.SP_LOGOUT_URL), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.PRINCIPAL_ATTRIBUTE.getAttribute()), "uid"), +        final RealmIdentifier realmId = new RealmIdentifier("saml", REALM_NAME);, +                realmId,, +            settings,, +++ b/x-pack/plugin/security/src/test/java/org/elasticsearch/xpack/security/action/saml/TransportSamlLogoutActionTests.java, +    private static final String REALM_NAME = "saml1";, +        final Path metadata = PathUtils.get(SamlRealm.class.getResource("idp1.xml").toURI());, +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.IDP_METADATA_PATH), metadata.toString()), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.IDP_ENTITY_ID), SamlRealmTests.TEST_IDP_ENTITY_ID), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.SP_ENTITY_ID), SP_URL), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.SP_ACS), SP_URL), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.PRINCIPAL_ATTRIBUTE.getAttribute()), "uid"), +        final RealmIdentifier realmIdentifier = new RealmIdentifier("saml", REALM_NAME);, +        final RealmConfig realmConfig = new RealmConfig(realmIdentifier, settings, env, threadContext);, +++ b/x-pack/plugin/security/src/test/java/org/elasticsearch/xpack/security/action/saml/TransportSamlInvalidateSessionActionTests.java, +    private static final String REALM_NAME = "saml1";, +, +        final Path metadata = PathUtils.get(SamlRealm.class.getResource("idp1.xml").toURI());, +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.IDP_METADATA_PATH), metadata.toString()), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.IDP_ENTITY_ID), SamlRealmTests.TEST_IDP_ENTITY_ID), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.SP_ENTITY_ID), SamlRealmTestHelper.SP_ENTITY_ID), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.SP_ACS), SamlRealmTestHelper.SP_ACS_URL), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.SP_LOGOUT), SamlRealmTestHelper.SP_LOGOUT_URL), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.PRINCIPAL_ATTRIBUTE.getAttribute()), "uid"), +        final RealmIdentifier realmId = new RealmIdentifier("saml", REALM_NAME);, +                realmId,, +            settings,, +++ b/x-pack/plugin/security/src/test/java/org/elasticsearch/xpack/security/action/saml/TransportSamlLogoutActionTests.java, +    private static final String REALM_NAME = "saml1";, +        final Path metadata = PathUtils.get(SamlRealm.class.getResource("idp1.xml").toURI());, +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.IDP_METADATA_PATH), metadata.toString()), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.IDP_ENTITY_ID), SamlRealmTests.TEST_IDP_ENTITY_ID), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.SP_ENTITY_ID), SP_URL), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.SP_ACS), SP_URL), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.PRINCIPAL_ATTRIBUTE.getAttribute()), "uid"), +        final RealmIdentifier realmIdentifier = new RealmIdentifier("saml", REALM_NAME);, +        final RealmConfig realmConfig = new RealmConfig(realmIdentifier, settings, env, threadContext);, +++ b/x-pack/plugin/security/src/test/java/org/elasticsearch/xpack/security/authc/file/FileRealmTests.java, +        RealmConfig config = getRealmConfig(globalSettings);, +        return new RealmConfig(REALM_IDENTIFIER, settings, TestEnvironment.newEnvironment(settings), threadContext);, +                Hasher.values()[randomIntBetween(0, Hasher.values().length - 1)].name().toLowerCase(Locale.ROOT)), +            .put(globalSettings), +            .build();, +        RealmConfig config = getRealmConfig(globalSettings);, +        RealmConfig config = getRealmConfig(globalSettings);, +        RealmConfig config = getRealmConfig(globalSettings);, +        RealmConfig config = getRealmConfig(globalSettings);, +        RealmConfig config = getRealmConfig(globalSettings);, +        final int userCount = randomIntBetween(0, 1000);, +        final int order = randomIntBetween(0, 10);, +        Settings settings = Settings.builder(), +            .put(RealmSettings.realmSettingPrefix(REALM_IDENTIFIER) + "order", order), +            .put(globalSettings), +            .build();, +        RealmConfig config = getRealmConfig(settings);, +++ b/x-pack/plugin/security/src/test/java/org/elasticsearch/xpack/security/action/saml/TransportSamlInvalidateSessionActionTests.java, +    private static final String REALM_NAME = "saml1";, +, +        final Path metadata = PathUtils.get(SamlRealm.class.getResource("idp1.xml").toURI());, +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.IDP_METADATA_PATH), metadata.toString()), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.IDP_ENTITY_ID), SamlRealmTests.TEST_IDP_ENTITY_ID), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.SP_ENTITY_ID), SamlRealmTestHelper.SP_ENTITY_ID), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.SP_ACS), SamlRealmTestHelper.SP_ACS_URL), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.SP_LOGOUT), SamlRealmTestHelper.SP_LOGOUT_URL), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.PRINCIPAL_ATTRIBUTE.getAttribute()), "uid"), +        final RealmIdentifier realmId = new RealmIdentifier("saml", REALM_NAME);, +                realmId,, +            settings,, +++ b/x-pack/plugin/security/src/test/java/org/elasticsearch/xpack/security/action/saml/TransportSamlLogoutActionTests.java, +    private static final String REALM_NAME = "saml1";, +        final Path metadata = PathUtils.get(SamlRealm.class.getResource("idp1.xml").toURI());, +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.IDP_METADATA_PATH), metadata.toString()), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.IDP_ENTITY_ID), SamlRealmTests.TEST_IDP_ENTITY_ID), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.SP_ENTITY_ID), SP_URL), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.SP_ACS), SP_URL), +            .put(getFullSettingKey(REALM_NAME, SamlRealmSettings.PRINCIPAL_ATTRIBUTE.getAttribute()), "uid"), +        final RealmIdentifier realmIdentifier = new RealmIdentifier("saml", REALM_NAME);, +        final RealmConfig realmConfig = new RealmConfig(realmIdentifier, settings, env, threadContext);]