[+++ b/core/src/main/java/org/elasticsearch/action/ActionRequest.java, +++ b/core/src/main/java/org/elasticsearch/action/ActionRequest.java, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterModule.java, +        registerIndexDynamicSetting(EngineConfig.INDEX_COMPOUND_ON_FLUSH, Validator.BOOLEAN);, +++ b/core/src/main/java/org/elasticsearch/action/ActionRequest.java, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterModule.java, +        registerIndexDynamicSetting(EngineConfig.INDEX_COMPOUND_ON_FLUSH, Validator.BOOLEAN);, +++ b/core/src/main/java/org/elasticsearch/index/engine/EngineConfig.java, +    private volatile boolean compoundOnFlush = true;, +     * Index setting for compound file on flush. This setting is realtime updateable., +     */, +    public static final String INDEX_COMPOUND_ON_FLUSH = "index.compound_on_flush";, +, +    /**, +        this.compoundOnFlush = settings.getAsBoolean(EngineConfig.INDEX_COMPOUND_ON_FLUSH, compoundOnFlush);, +     * Returns <code>true</code> iff flushed segments should be written as compound file system. Defaults to <code>true</code>, +     */, +    public boolean isCompoundOnFlush() {, +        return compoundOnFlush;, +    }, +, +    /**, +     * Sets if flushed segments should be written as compound file system. Defaults to <code>true</code>, +     */, +    public void setCompoundOnFlush(boolean compoundOnFlush) {, +        this.compoundOnFlush = compoundOnFlush;, +    }, +, +    /**, +++ b/core/src/main/java/org/elasticsearch/action/ActionRequest.java, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterModule.java, +        registerIndexDynamicSetting(EngineConfig.INDEX_COMPOUND_ON_FLUSH, Validator.BOOLEAN);, +++ b/core/src/main/java/org/elasticsearch/index/engine/EngineConfig.java, +    private volatile boolean compoundOnFlush = true;, +     * Index setting for compound file on flush. This setting is realtime updateable., +     */, +    public static final String INDEX_COMPOUND_ON_FLUSH = "index.compound_on_flush";, +, +    /**, +        this.compoundOnFlush = settings.getAsBoolean(EngineConfig.INDEX_COMPOUND_ON_FLUSH, compoundOnFlush);, +     * Returns <code>true</code> iff flushed segments should be written as compound file system. Defaults to <code>true</code>, +     */, +    public boolean isCompoundOnFlush() {, +        return compoundOnFlush;, +    }, +, +    /**, +     * Sets if flushed segments should be written as compound file system. Defaults to <code>true</code>, +     */, +    public void setCompoundOnFlush(boolean compoundOnFlush) {, +        this.compoundOnFlush = compoundOnFlush;, +    }, +, +    /**, +++ b/core/src/main/java/org/elasticsearch/index/engine/InternalEngine.java, +            iwc.setUseCompoundFile(engineConfig.isCompoundOnFlush());, +            iwc.setUseCompoundFile(this.engineConfig.isCompoundOnFlush());, +++ b/core/src/main/java/org/elasticsearch/action/ActionRequest.java, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterModule.java, +        registerIndexDynamicSetting(EngineConfig.INDEX_COMPOUND_ON_FLUSH, Validator.BOOLEAN);, +++ b/core/src/main/java/org/elasticsearch/index/engine/EngineConfig.java, +    private volatile boolean compoundOnFlush = true;, +     * Index setting for compound file on flush. This setting is realtime updateable., +     */, +    public static final String INDEX_COMPOUND_ON_FLUSH = "index.compound_on_flush";, +, +    /**, +        this.compoundOnFlush = settings.getAsBoolean(EngineConfig.INDEX_COMPOUND_ON_FLUSH, compoundOnFlush);, +     * Returns <code>true</code> iff flushed segments should be written as compound file system. Defaults to <code>true</code>, +     */, +    public boolean isCompoundOnFlush() {, +        return compoundOnFlush;, +    }, +, +    /**, +     * Sets if flushed segments should be written as compound file system. Defaults to <code>true</code>, +     */, +    public void setCompoundOnFlush(boolean compoundOnFlush) {, +        this.compoundOnFlush = compoundOnFlush;, +    }, +, +    /**, +++ b/core/src/main/java/org/elasticsearch/index/engine/InternalEngine.java, +            iwc.setUseCompoundFile(engineConfig.isCompoundOnFlush());, +            iwc.setUseCompoundFile(this.engineConfig.isCompoundOnFlush());, +++ b/core/src/main/java/org/elasticsearch/index/shard/IndexShard.java, +            final boolean compoundOnFlush = settings.getAsBoolean(EngineConfig.INDEX_COMPOUND_ON_FLUSH, config.isCompoundOnFlush());, +            if (compoundOnFlush != config.isCompoundOnFlush()) {, +                logger.info("updating {} from [{}] to [{}]", EngineConfig.INDEX_COMPOUND_ON_FLUSH, config.isCompoundOnFlush(), compoundOnFlush);, +                config.setCompoundOnFlush(compoundOnFlush);, +                change = true;, +            }, +++ b/core/src/main/java/org/elasticsearch/action/ActionRequest.java, +++ b/core/src/main/java/org/elasticsearch/cluster/ClusterModule.java, +        registerIndexDynamicSetting(EngineConfig.INDEX_COMPOUND_ON_FLUSH, Validator.BOOLEAN);, +++ b/core/src/main/java/org/elasticsearch/index/engine/EngineConfig.java, +    private volatile boolean compoundOnFlush = true;, +     * Index setting for compound file on flush. This setting is realtime updateable., +     */, +    public static final String INDEX_COMPOUND_ON_FLUSH = "index.compound_on_flush";]