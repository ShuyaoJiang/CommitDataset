[+++ b/build.gradle, +    "downloads.zip:elasticsearch:${version}": ':distribution:archives:zip',, +    "downloads.zip:elasticsearch-oss:${version}": ':distribution:archives:oss-zip',, +    "downloads.tar:elasticsearch:${version}": ':distribution:archives:tar',, +    "downloads.tar:elasticsearch-oss:${version}": ':distribution:archives:oss-tar',, +    "downloads.rpm:elasticsearch:${version}": ':distribution:packages:rpm',, +    "downloads.rpm:elasticsearch-oss:${version}": ':distribution:packages:oss-rpm',, +    "downloads.deb:elasticsearch:${version}": ':distribution:packages:deb',, +    "downloads.deb:elasticsearch-oss:${version}": ':distribution:packages:oss-deb',, +    ext.projectSubstitutions["downloads.deb:elasticsearch:${unreleased}"] = snapshotProject, +    ext.projectSubstitutions["downloads.rpm:elasticsearch:${unreleased}"] = snapshotProject, +    ext.projectSubstitutions["downloads.zip:elasticsearch:${unreleased}"] = snapshotProject, +      ext.projectSubstitutions["downloads.deb:elasticsearch-oss:${unreleased}"] = snapshotProject, +      ext.projectSubstitutions["downloads.rpm:elasticsearch-oss:${unreleased}"] = snapshotProject, +      ext.projectSubstitutions["downloads.zip:elasticsearch-oss:${unreleased}"] = snapshotProject, +++ b/build.gradle, +    "downloads.zip:elasticsearch:${version}": ':distribution:archives:zip',, +    "downloads.zip:elasticsearch-oss:${version}": ':distribution:archives:oss-zip',, +    "downloads.tar:elasticsearch:${version}": ':distribution:archives:tar',, +    "downloads.tar:elasticsearch-oss:${version}": ':distribution:archives:oss-tar',, +    "downloads.rpm:elasticsearch:${version}": ':distribution:packages:rpm',, +    "downloads.rpm:elasticsearch-oss:${version}": ':distribution:packages:oss-rpm',, +    "downloads.deb:elasticsearch:${version}": ':distribution:packages:deb',, +    "downloads.deb:elasticsearch-oss:${version}": ':distribution:packages:oss-deb',, +    ext.projectSubstitutions["downloads.deb:elasticsearch:${unreleased}"] = snapshotProject, +    ext.projectSubstitutions["downloads.rpm:elasticsearch:${unreleased}"] = snapshotProject, +    ext.projectSubstitutions["downloads.zip:elasticsearch:${unreleased}"] = snapshotProject, +      ext.projectSubstitutions["downloads.deb:elasticsearch-oss:${unreleased}"] = snapshotProject, +      ext.projectSubstitutions["downloads.rpm:elasticsearch-oss:${unreleased}"] = snapshotProject, +      ext.projectSubstitutions["downloads.zip:elasticsearch-oss:${unreleased}"] = snapshotProject, +++ b/buildSrc/build.gradle, +  configurations {, +    distribution, +  }, +, +  dependencies {, +    distribution project(':distribution:archives:zip'), +    distribution project(':distribution:archives:oss-zip'), +  }, +, +  String localDownloads = "${rootProject.buildDir}/local-downloads", +  task setupLocalDownloads(type:Copy) {, +    from configurations.distribution, +    into localDownloads, +  }, +, +    dependsOn setupLocalDownloads, +    systemProperty 'test.local-test-downloads-path', localDownloads, +++ b/build.gradle, +    "downloads.zip:elasticsearch:${version}": ':distribution:archives:zip',, +    "downloads.zip:elasticsearch-oss:${version}": ':distribution:archives:oss-zip',, +    "downloads.tar:elasticsearch:${version}": ':distribution:archives:tar',, +    "downloads.tar:elasticsearch-oss:${version}": ':distribution:archives:oss-tar',, +    "downloads.rpm:elasticsearch:${version}": ':distribution:packages:rpm',, +    "downloads.rpm:elasticsearch-oss:${version}": ':distribution:packages:oss-rpm',, +    "downloads.deb:elasticsearch:${version}": ':distribution:packages:deb',, +    "downloads.deb:elasticsearch-oss:${version}": ':distribution:packages:oss-deb',, +    ext.projectSubstitutions["downloads.deb:elasticsearch:${unreleased}"] = snapshotProject, +    ext.projectSubstitutions["downloads.rpm:elasticsearch:${unreleased}"] = snapshotProject, +    ext.projectSubstitutions["downloads.zip:elasticsearch:${unreleased}"] = snapshotProject, +      ext.projectSubstitutions["downloads.deb:elasticsearch-oss:${unreleased}"] = snapshotProject, +      ext.projectSubstitutions["downloads.rpm:elasticsearch-oss:${unreleased}"] = snapshotProject, +      ext.projectSubstitutions["downloads.zip:elasticsearch-oss:${unreleased}"] = snapshotProject, +++ b/buildSrc/build.gradle, +  configurations {, +    distribution, +  }, +, +  dependencies {, +    distribution project(':distribution:archives:zip'), +    distribution project(':distribution:archives:oss-zip'), +  }, +, +  String localDownloads = "${rootProject.buildDir}/local-downloads", +  task setupLocalDownloads(type:Copy) {, +    from configurations.distribution, +    into localDownloads, +  }, +, +    dependsOn setupLocalDownloads, +    systemProperty 'test.local-test-downloads-path', localDownloads, +++ b/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy, +        repos.ivy {, +            url "https://artifacts.elastic.co/downloads", +            patternLayout {, +                artifact "elasticsearch/[module]-[revision](-[classifier]).[ext]", +            }, +        }, +++ b/build.gradle, +    "downloads.zip:elasticsearch:${version}": ':distribution:archives:zip',, +    "downloads.zip:elasticsearch-oss:${version}": ':distribution:archives:oss-zip',, +    "downloads.tar:elasticsearch:${version}": ':distribution:archives:tar',, +    "downloads.tar:elasticsearch-oss:${version}": ':distribution:archives:oss-tar',, +    "downloads.rpm:elasticsearch:${version}": ':distribution:packages:rpm',, +    "downloads.rpm:elasticsearch-oss:${version}": ':distribution:packages:oss-rpm',, +    "downloads.deb:elasticsearch:${version}": ':distribution:packages:deb',, +    "downloads.deb:elasticsearch-oss:${version}": ':distribution:packages:oss-deb',, +    ext.projectSubstitutions["downloads.deb:elasticsearch:${unreleased}"] = snapshotProject, +    ext.projectSubstitutions["downloads.rpm:elasticsearch:${unreleased}"] = snapshotProject, +    ext.projectSubstitutions["downloads.zip:elasticsearch:${unreleased}"] = snapshotProject]