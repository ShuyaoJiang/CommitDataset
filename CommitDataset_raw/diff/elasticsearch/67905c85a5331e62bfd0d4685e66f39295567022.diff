[+++ b/docs/reference/mapping/types/text.asciidoc, +<<index-prefix-config,`index_prefixes`>>::, +Text fields may also index term prefixes to speed up prefix searches. The `index_prefixes`, +          "index_prefixes" : {, +++ b/docs/reference/mapping/types/text.asciidoc, +<<index-prefix-config,`index_prefixes`>>::, +Text fields may also index term prefixes to speed up prefix searches. The `index_prefixes`, +          "index_prefixes" : {, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/search/190_index_prefix_search.yml, +      reason: index_prefixes is only available as of 6.3.0, +                  index_prefixes:, +++ b/docs/reference/mapping/types/text.asciidoc, +<<index-prefix-config,`index_prefixes`>>::, +Text fields may also index term prefixes to speed up prefix searches. The `index_prefixes`, +          "index_prefixes" : {, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/search/190_index_prefix_search.yml, +      reason: index_prefixes is only available as of 6.3.0, +                  index_prefixes:, +++ b/server/src/main/java/org/elasticsearch/index/mapper/TextFieldMapper.java, +                    throw new IllegalArgumentException("Cannot set index_prefixes on unindexed field [" + name() + "]");, +                } else if (propName.equals("index_prefixes")) {, +    static final class PrefixFieldType extends StringFieldType {, +            builder.startObject("index_prefixes");, +        public PrefixFieldType clone() {, +, +        @Override, +        public boolean equals(Object o) {, +            if (this == o) return true;, +            if (o == null || getClass() != o.getClass()) return false;, +            if (!super.equals(o)) return false;, +            PrefixFieldType that = (PrefixFieldType) o;, +            return minChars == that.minChars &&, +                maxChars == that.maxChars;, +        }, +, +        @Override, +        public int hashCode() {, +, +            return Objects.hash(super.hashCode(), minChars, maxChars);, +        }, +            if (ref.prefixFieldType != null) {, +                this.prefixFieldType = ref.prefixFieldType.clone();, +            }, +                    && Objects.equals(prefixFieldType, that.prefixFieldType), +            return Objects.hash(super.hashCode(), fielddata, prefixFieldType,, +        public PrefixFieldType getPrefixFieldType() {, +            return this.prefixFieldType;, +        }, +, +++ b/docs/reference/mapping/types/text.asciidoc, +<<index-prefix-config,`index_prefixes`>>::, +Text fields may also index term prefixes to speed up prefix searches. The `index_prefixes`, +          "index_prefixes" : {, +++ b/rest-api-spec/src/main/resources/rest-api-spec/test/search/190_index_prefix_search.yml, +      reason: index_prefixes is only available as of 6.3.0, +                  index_prefixes:, +++ b/server/src/main/java/org/elasticsearch/index/mapper/TextFieldMapper.java, +                    throw new IllegalArgumentException("Cannot set index_prefixes on unindexed field [" + name() + "]");, +                } else if (propName.equals("index_prefixes")) {, +    static final class PrefixFieldType extends StringFieldType {, +            builder.startObject("index_prefixes");, +        public PrefixFieldType clone() {, +, +        @Override, +        public boolean equals(Object o) {, +            if (this == o) return true;, +            if (o == null || getClass() != o.getClass()) return false;, +            if (!super.equals(o)) return false;, +            PrefixFieldType that = (PrefixFieldType) o;, +            return minChars == that.minChars &&, +                maxChars == that.maxChars;, +        }, +, +        @Override, +        public int hashCode() {, +, +            return Objects.hash(super.hashCode(), minChars, maxChars);, +        }, +            if (ref.prefixFieldType != null) {, +                this.prefixFieldType = ref.prefixFieldType.clone();, +            }, +                    && Objects.equals(prefixFieldType, that.prefixFieldType), +            return Objects.hash(super.hashCode(), fielddata, prefixFieldType,, +        public PrefixFieldType getPrefixFieldType() {, +            return this.prefixFieldType;, +        }, +, +++ b/server/src/test/java/org/elasticsearch/index/mapper/TextFieldMapperTests.java, +                .startObject("index_prefixes").endObject(), +                .startObject("index_prefixes").endObject(), +                .startObject("index_prefixes").endObject(), +                .startObject("index_prefixes").endObject(), +                .startObject("index_prefixes"), +                .startObject("index_prefixes").endObject(), +                .startObject("index_prefixes"), +                .startObject("index_prefixes"), +                .startObject("index_prefixes"), +                .startObject("index_prefixes"), +                .startObject("index_prefixes"), +                .field("index_prefixes", (String) null)]