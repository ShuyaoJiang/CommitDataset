[+++ b/server/src/test/java/org/elasticsearch/persistent/PersistentTasksCustomMetaDataTests.java, +import java.util.NoSuchElementException;, +import static org.elasticsearch.test.VersionUtils.allReleasedVersions;, +        Version minVersion = allReleasedVersions().stream().filter(Version::isRelease).findFirst().orElseThrow(NoSuchElementException::new);, +        System.out.println(minVersion);, +        System.out.println(streamVersion);, +        final boolean transportClient = randomBoolean();, +        if (transportClient) {, +        // if a transport client, then it must have the feature otherwise we add the feature randomly, +        if (transportClient || randomBoolean()) {, +            features.add("test");, +        }]