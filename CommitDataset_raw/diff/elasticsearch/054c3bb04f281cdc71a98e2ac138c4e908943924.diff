[+++ b/server/src/main/java/org/elasticsearch/search/query/QueryPhase.java, +++ b/server/src/main/java/org/elasticsearch/search/query/QueryPhase.java, +++ b/server/src/main/java/org/elasticsearch/search/query/TopDocsCollectorContext.java, +                // implicit total hit counts are valid only when there is no filter collector in the chain, +                final int hitCount = hasFilterCollector ? -1 : shortcutTotalHitCount(reader, query);, +            final float maxScore;, +                topDocs.totalHits = scrollContext.totalHits = totalHitsSupplier.get();, +                maxScore = scrollContext.maxScore = maxScoreSupplier.get();, +                SearchContext.TRACK_TOTAL_HITS_DISABLED : SearchContext.TRACK_TOTAL_HITS_ACCURATE;, +++ b/server/src/main/java/org/elasticsearch/search/query/QueryPhase.java, +++ b/server/src/main/java/org/elasticsearch/search/query/TopDocsCollectorContext.java, +                // implicit total hit counts are valid only when there is no filter collector in the chain, +                final int hitCount = hasFilterCollector ? -1 : shortcutTotalHitCount(reader, query);, +            final float maxScore;, +                topDocs.totalHits = scrollContext.totalHits = totalHitsSupplier.get();, +                maxScore = scrollContext.maxScore = maxScoreSupplier.get();, +                SearchContext.TRACK_TOTAL_HITS_DISABLED : SearchContext.TRACK_TOTAL_HITS_ACCURATE;, +++ b/server/src/test/java/org/elasticsearch/search/stats/SearchStatsIT.java]