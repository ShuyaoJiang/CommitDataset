[+++ b/core/src/main/java/org/elasticsearch/common/Base64.java, +    private static int decode4to3(byte[] source, int srcOffset, byte[] destination, int destOffset, int options) {, +        Objects.requireNonNull(source, "Source array was null.");, +        Objects.requireNonNull(destination, "Destination array was null.");, +, +, +        // Example: Dk==, +        if (source[srcOffset + 2] == EQUALS_SIGN) {, +        outBuff |= ((DECODABET[source[srcOffset + 2]] & 0xFF) << 6);, +, +        // Example: DkL=, +        if (source[srcOffset + 3] == EQUALS_SIGN) {, +        outBuff |= ((DECODABET[source[srcOffset + 3]] & 0xFF));, +        // Example: DkLE, +    public static byte[] decode(byte[] source, int off, int len, int options) throws java.io.IOException {, +        Objects.requireNonNull(source, "Cannot decode null source array.");]