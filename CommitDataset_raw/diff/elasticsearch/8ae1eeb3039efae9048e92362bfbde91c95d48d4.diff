[+++ b/x-pack/plugin/core/src/test/java/org/elasticsearch/xpack/core/ssl/RestrictedTrustManagerTests.java, +import org.apache.logging.log4j.Logger;, +import org.elasticsearch.common.logging.Loggers;, +import org.junit.AfterClass;, +import org.junit.BeforeClass;, +, +import java.util.Locale;, +    private static Locale restoreLocale;, +, +    @BeforeClass, +    public static void ensureSupportedLocale() throws Exception {, +        Logger logger = Loggers.getLogger(RestrictedTrustManagerTests.class);, +        if (isUnusableLocale()) {, +            // See: https://github.com/elastic/elasticsearch/issues/33081, +            logger.warn("Attempting to run RestrictedTrustManagerTests tests in an unusable locale in a FIPS JVM. Certificate expiration " +, +                "validation will fail, switching to English");, +            restoreLocale = Locale.getDefault();, +            Locale.setDefault(Locale.ENGLISH);, +        }, +    }, +, +    private static boolean isUnusableLocale() {, +        return inFipsJvm() && (Locale.getDefault().toLanguageTag().equals("th-TH"), +            || Locale.getDefault().toLanguageTag().equals("ja-JP-u-ca-japanese-x-lvariant-JP"), +            || Locale.getDefault().toLanguageTag().equals("th-TH-u-nu-thai-x-lvariant-TH"));, +    }, +, +    @AfterClass, +    public static void restoreLocale() throws Exception {, +        if (restoreLocale != null) {, +            Locale.setDefault(restoreLocale);, +            restoreLocale = null;, +        }, +    }, +]