[+++ b/spring-social-config/src/main/java/org/springframework/social/config/annotation/ProviderConfigRegistrarSupport.java, +import org.springframework.util.Assert;, +	public ProviderConfigRegistrarSupport(Class<? extends Annotation> providerConfigAnnotation, Class<? extends ConnectionFactory<?>> connectionFactoryClass,, +			Class<? extends ApiHelper<?>> apiHelperClass) {, +		this(providerConfigAnnotation, connectionFactoryClass, null, apiHelperClass);, +	}, +			Class<?> socialAuthenticationServiceClass, Class<? extends ApiHelper<?>> apiHelperClass) {, +		if (socialAuthenticationServiceClass != null) {, +			Assert.isAssignable(SocialAuthenticationService.class, socialAuthenticationServiceClass);, +			this.socialAuthenticationServiceClass = socialAuthenticationServiceClass; , +		}, +		if (isSocialSecurityAvailable() && socialAuthenticationServiceClass != null) {, +		Class<? extends SocialAuthenticationService<?>> socialAuthenticationServiceClass = (Class<? extends SocialAuthenticationService<?>>) this.socialAuthenticationServiceClass;, +	private Class<?> socialAuthenticationServiceClass;, +++ b/spring-social-config/src/main/java/org/springframework/social/config/annotation/ProviderConfigRegistrarSupport.java, +import org.springframework.util.Assert;, +	public ProviderConfigRegistrarSupport(Class<? extends Annotation> providerConfigAnnotation, Class<? extends ConnectionFactory<?>> connectionFactoryClass,, +			Class<? extends ApiHelper<?>> apiHelperClass) {, +		this(providerConfigAnnotation, connectionFactoryClass, null, apiHelperClass);, +	}, +			Class<?> socialAuthenticationServiceClass, Class<? extends ApiHelper<?>> apiHelperClass) {, +		if (socialAuthenticationServiceClass != null) {, +			Assert.isAssignable(SocialAuthenticationService.class, socialAuthenticationServiceClass);, +			this.socialAuthenticationServiceClass = socialAuthenticationServiceClass; , +		}, +		if (isSocialSecurityAvailable() && socialAuthenticationServiceClass != null) {, +		Class<? extends SocialAuthenticationService<?>> socialAuthenticationServiceClass = (Class<? extends SocialAuthenticationService<?>>) this.socialAuthenticationServiceClass;, +	private Class<?> socialAuthenticationServiceClass;, +++ b/spring-social-config/src/test/java/org/springframework/social/config/annotation/FakeProviderConfigRegistrar.java, +		super(EnableFake.class, FakeConnectionFactory.class, FakeSocialAuthenticationService.class, FakeApiHelper.class);]