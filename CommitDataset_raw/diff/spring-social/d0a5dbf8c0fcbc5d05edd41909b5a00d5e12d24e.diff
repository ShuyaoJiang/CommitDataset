[+++ b/samples/spring-social-showcase/pom.xml, +	    , +, +		<!-- JSR 303 with Hibernate Validator -->, +		<dependency>, +			<groupId>javax.validation</groupId>, +			<artifactId>validation-api</artifactId>, +			<version>1.0.0.GA</version>, +		</dependency>, +		<dependency>, +			<groupId>org.hibernate</groupId>, +			<artifactId>hibernate-validator</artifactId>, +			<version>4.1.0.Final</version>, +		</dependency>, +	    , +++ b/samples/spring-social-showcase/pom.xml, +	    , +, +		<!-- JSR 303 with Hibernate Validator -->, +		<dependency>, +			<groupId>javax.validation</groupId>, +			<artifactId>validation-api</artifactId>, +			<version>1.0.0.GA</version>, +		</dependency>, +		<dependency>, +			<groupId>org.hibernate</groupId>, +			<artifactId>hibernate-validator</artifactId>, +			<version>4.1.0.Final</version>, +		</dependency>, +	    , +++ b/samples/spring-social-showcase/src/main/java/org/springframework/social/showcase/JdbcUserRepository.java, +/*, + * Copyright 2011 the original author or authors., + *, + * Licensed under the Apache License, Version 2.0 (the "License");, + * you may not use this file except in compliance with the License., + * You may obtain a copy of the License at, + *, + *      http://www.apache.org/licenses/LICENSE-2.0, + *, + * Unless required by applicable law or agreed to in writing, software, + * distributed under the License is distributed on an "AS IS" BASIS,, + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied., + * See the License for the specific language governing permissions and, + * limitations under the License., + */, +import org.springframework.dao.DuplicateKeyException;, +import org.springframework.security.authentication.encoding.PasswordEncoder;, +import org.springframework.transaction.annotation.Transactional;, +, +	private final PasswordEncoder passwordEncoder;, +	public JdbcUserRepository(JdbcTemplate jdbcTemplate, PasswordEncoder passwordEncoder) {, +		this.passwordEncoder = passwordEncoder;, +	}, +, +	@Transactional, +	public void createUser(ShowcaseUser user) throws UsernameAlreadyInUseException {, +		try {, +			jdbcTemplate.update(, +					"insert into ShowcaseUser (firstName, lastName, username, password) values (?, ?, ?, ?)",, +					user.getFirstName(), user.getLastName(), user.getUsername(),, +					passwordEncoder.encodePassword(user.getPassword(), null));, +		} catch (DuplicateKeyException e) {, +			throw new UsernameAlreadyInUseException(user.getUsername());, +		}, +		return jdbcTemplate.queryForObject("select username, firstName, lastName from ShowcaseUser where username = ?",, +						return new ShowcaseUser(rs.getString("username"), null, rs.getString("firstName"), rs, +								.getString("lastName"));, +++ b/samples/spring-social-showcase/pom.xml, +	    , +, +		<!-- JSR 303 with Hibernate Validator -->, +		<dependency>, +			<groupId>javax.validation</groupId>, +			<artifactId>validation-api</artifactId>, +			<version>1.0.0.GA</version>, +		</dependency>, +		<dependency>, +			<groupId>org.hibernate</groupId>, +			<artifactId>hibernate-validator</artifactId>, +			<version>4.1.0.Final</version>, +		</dependency>, +	    , +++ b/samples/spring-social-showcase/src/main/java/org/springframework/social/showcase/JdbcUserRepository.java, +/*, + * Copyright 2011 the original author or authors., + *, + * Licensed under the Apache License, Version 2.0 (the "License");, + * you may not use this file except in compliance with the License., + * You may obtain a copy of the License at, + *, + *      http://www.apache.org/licenses/LICENSE-2.0, + *, + * Unless required by applicable law or agreed to in writing, software, + * distributed under the License is distributed on an "AS IS" BASIS,, + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied., + * See the License for the specific language governing permissions and, + * limitations under the License., + */, +import org.springframework.dao.DuplicateKeyException;]