[+++ b/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/integration/IntegrationAutoConfiguration.java, +		@EnableIntegrationManagement(defaultCountsEnabled = "true"), +++ b/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/integration/IntegrationAutoConfiguration.java, +		@EnableIntegrationManagement(defaultCountsEnabled = "true"), +++ b/spring-boot-project/spring-boot-autoconfigure/src/test/java/org/springframework/boot/autoconfigure/integration/IntegrationAutoConfigurationTests.java, +import org.springframework.beans.DirectFieldAccessor;, +import org.springframework.integration.core.MessageSource;, +import org.springframework.integration.endpoint.MessageProcessorMessageSource;, +import org.springframework.integration.handler.MessageProcessor;, +	@Test, +	public void integrationEnablesDefaultCounts() {, +		this.contextRunner.withUserConfiguration(MessageSourceConfiguration.class), +				.run((context) -> {, +					assertThat(context).hasBean("myMessageSource");, +					assertThat(new DirectFieldAccessor(context.getBean("myMessageSource")), +							.getPropertyValue("countsEnabled")).isEqualTo(true);, +				});, +	}, +, +	@Configuration, +	static class MessageSourceConfiguration {, +, +		@Bean, +		public MessageSource<?> myMessageSource() {, +			return new MessageProcessorMessageSource(mock(MessageProcessor.class));, +		}, +, +	}, +]