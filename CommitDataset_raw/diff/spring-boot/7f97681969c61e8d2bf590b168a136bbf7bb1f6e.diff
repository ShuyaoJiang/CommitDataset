[+++ b/spring-boot/src/main/java/org/springframework/boot/context/embedded/jetty/JettyEmbeddedServletContainerFactory.java, +import org.eclipse.jetty.server.ConnectionFactory;, +import org.eclipse.jetty.server.ForwardedRequestCustomizer;, +	private boolean useForwardHeaders;, +, +		if (this.useForwardHeaders) {, +			new ForwardHeadersCustomizer().customize(server);, +		}, +	 * Set if x-forward-* headers should be processed., +	 * @param useForwardHeaders if x-forward headers should be used, +	 * @since 1.3.0, +	 */, +	public void setUseForwardHeaders(boolean useForwardHeaders) {, +		this.useForwardHeaders = useForwardHeaders;, +	}, +, +	/**, +	/**, +	 * {@link JettyServerCustomizer} to add {@link ForwardedRequestCustomizer}. Only, +	 * supported with Jetty 9 (hence the inner class), +	 */, +	private static class ForwardHeadersCustomizer implements JettyServerCustomizer {, +, +		@Override, +		public void customize(Server server) {, +			ForwardedRequestCustomizer customizer = new ForwardedRequestCustomizer();, +			for (Connector connector : server.getConnectors()) {, +				for (ConnectionFactory connectionFactory : connector, +						.getConnectionFactories()) {, +					if (connectionFactory instanceof HttpConfiguration.ConnectionFactory) {, +						((HttpConfiguration.ConnectionFactory) connectionFactory), +								.getHttpConfiguration().addCustomizer(customizer);, +					}, +				}, +			}, +		}, +, +	}, +, +++ b/spring-boot/src/main/java/org/springframework/boot/context/embedded/jetty/JettyEmbeddedServletContainerFactory.java, +import org.eclipse.jetty.server.ConnectionFactory;, +import org.eclipse.jetty.server.ForwardedRequestCustomizer;, +	private boolean useForwardHeaders;, +, +		if (this.useForwardHeaders) {, +			new ForwardHeadersCustomizer().customize(server);, +		}, +	 * Set if x-forward-* headers should be processed., +	 * @param useForwardHeaders if x-forward headers should be used, +	 * @since 1.3.0, +	 */, +	public void setUseForwardHeaders(boolean useForwardHeaders) {, +		this.useForwardHeaders = useForwardHeaders;, +	}, +, +	/**, +	/**, +	 * {@link JettyServerCustomizer} to add {@link ForwardedRequestCustomizer}. Only, +	 * supported with Jetty 9 (hence the inner class), +	 */, +	private static class ForwardHeadersCustomizer implements JettyServerCustomizer {, +, +		@Override, +		public void customize(Server server) {, +			ForwardedRequestCustomizer customizer = new ForwardedRequestCustomizer();, +			for (Connector connector : server.getConnectors()) {, +				for (ConnectionFactory connectionFactory : connector, +						.getConnectionFactories()) {, +					if (connectionFactory instanceof HttpConfiguration.ConnectionFactory) {, +						((HttpConfiguration.ConnectionFactory) connectionFactory), +								.getHttpConfiguration().addCustomizer(customizer);, +					}, +				}, +			}, +		}, +, +	}, +, +++ b/spring-boot/src/test/java/org/springframework/boot/context/embedded/jetty/JettyEmbeddedServletContainerFactoryTests.java, +	@Test, +	public void useForwardHeaders() throws Exception {, +		JettyEmbeddedServletContainerFactory factory = getFactory();, +		factory.setUseForwardHeaders(true);, +		assertForwardHeaderIsUsed(factory);, +	}, +]