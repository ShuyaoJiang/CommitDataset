[+++ b/spring-boot-cli/src/main/java/org/springframework/boot/cli/SpringCli.java, + * Copyright 2012-2016 the original author or authors., +import java.io.File;, +import java.net.MalformedURLException;, +import java.net.URL;, +import java.net.URLClassLoader;, +import java.util.ArrayList;, +import java.util.List;, +import org.springframework.util.SystemPropertyUtils;, +				createCommandClassLoader(runner));, +	private static URLClassLoader createCommandClassLoader(CommandRunner runner) {, +		return new URLClassLoader(getExtensionURLs(), runner.getClass().getClassLoader());, +	}, +, +	private static URL[] getExtensionURLs() {, +		List<URL> urls = new ArrayList<URL>();, +		String home = SystemPropertyUtils, +				.resolvePlaceholders("${spring.home:${SPRING_HOME:.}}");, +		File extDirectory = new File(new File(home, "lib"), "ext");, +		if (extDirectory.isDirectory()) {, +			for (File file : extDirectory.listFiles()) {, +				if (file.getName().endsWith(".jar")) {, +					try {, +						urls.add(file.toURI().toURL());, +					}, +					catch (MalformedURLException ex) {, +						throw new IllegalStateException(ex);, +					}, +				}, +			}, +		}, +		return urls.toArray(new URL[urls.size()]);, +	}, +, +++ b/spring-boot-cli/src/main/java/org/springframework/boot/cli/SpringCli.java, + * Copyright 2012-2016 the original author or authors., +import java.io.File;, +import java.net.MalformedURLException;, +import java.net.URL;, +import java.net.URLClassLoader;, +import java.util.ArrayList;, +import java.util.List;, +import org.springframework.util.SystemPropertyUtils;, +				createCommandClassLoader(runner));, +	private static URLClassLoader createCommandClassLoader(CommandRunner runner) {, +		return new URLClassLoader(getExtensionURLs(), runner.getClass().getClassLoader());, +	}, +, +	private static URL[] getExtensionURLs() {, +		List<URL> urls = new ArrayList<URL>();, +		String home = SystemPropertyUtils, +				.resolvePlaceholders("${spring.home:${SPRING_HOME:.}}");, +		File extDirectory = new File(new File(home, "lib"), "ext");, +		if (extDirectory.isDirectory()) {, +			for (File file : extDirectory.listFiles()) {, +				if (file.getName().endsWith(".jar")) {, +					try {, +						urls.add(file.toURI().toURL());, +					}, +					catch (MalformedURLException ex) {, +						throw new IllegalStateException(ex);, +					}, +				}, +			}, +		}, +		return urls.toArray(new URL[urls.size()]);, +	}, +, +++ b/spring-boot-cli/src/main/java/org/springframework/boot/cli/command/install/InstallCommand.java, + * Copyright 2013-2016 the original author or authors., +		super("install", "Install dependencies to the lib/ext directory",, +++ b/spring-boot-cli/src/main/java/org/springframework/boot/cli/SpringCli.java, + * Copyright 2012-2016 the original author or authors., +import java.io.File;, +import java.net.MalformedURLException;, +import java.net.URL;, +import java.net.URLClassLoader;, +import java.util.ArrayList;, +import java.util.List;, +import org.springframework.util.SystemPropertyUtils;, +				createCommandClassLoader(runner));, +	private static URLClassLoader createCommandClassLoader(CommandRunner runner) {, +		return new URLClassLoader(getExtensionURLs(), runner.getClass().getClassLoader());, +	}, +, +	private static URL[] getExtensionURLs() {, +		List<URL> urls = new ArrayList<URL>();, +		String home = SystemPropertyUtils, +				.resolvePlaceholders("${spring.home:${SPRING_HOME:.}}");, +		File extDirectory = new File(new File(home, "lib"), "ext");, +		if (extDirectory.isDirectory()) {, +			for (File file : extDirectory.listFiles()) {, +				if (file.getName().endsWith(".jar")) {, +					try {, +						urls.add(file.toURI().toURL());, +					}, +					catch (MalformedURLException ex) {, +						throw new IllegalStateException(ex);, +					}, +				}]