[+++ b/spring-boot-project/spring-boot-actuator-autoconfigure/src/main/java/org/springframework/boot/actuate/autoconfigure/cloudfoundry/reactive/CloudFoundryWebFluxEndpointHandlerMapping.java, +import org.springframework.web.reactive.result.method.RequestMappingInfoHandlerMapping;, +++ b/spring-boot-project/spring-boot-actuator-autoconfigure/src/main/java/org/springframework/boot/actuate/autoconfigure/cloudfoundry/reactive/CloudFoundryWebFluxEndpointHandlerMapping.java, +import org.springframework.web.reactive.result.method.RequestMappingInfoHandlerMapping;, +++ b/spring-boot-project/spring-boot-actuator-autoconfigure/src/main/java/org/springframework/boot/actuate/autoconfigure/cloudfoundry/servlet/CloudFoundryActuatorAutoConfiguration.java, +import org.springframework.boot.autoconfigure.condition.ConditionalOnBean;, +import org.springframework.boot.autoconfigure.condition.ConditionalOnWebApplication;, +import org.springframework.web.servlet.DispatcherServlet;, +@ConditionalOnWebApplication(type = ConditionalOnWebApplication.Type.SERVLET), +@ConditionalOnClass(DispatcherServlet.class), +@ConditionalOnBean(DispatcherServlet.class)]