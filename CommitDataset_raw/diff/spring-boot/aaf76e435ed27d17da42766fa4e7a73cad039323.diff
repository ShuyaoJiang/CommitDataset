[+++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/data/neo4j/Neo4jDataAutoConfiguration.java, +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/data/neo4j/Neo4jDataAutoConfiguration.java, +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/data/neo4j/Neo4jProperties.java, +import org.neo4j.ogm.config.Configuration.Builder;, +		Builder builder = new Builder();, +		configure(builder);, +		return builder.build();, +	private void configure(Builder builder) {, +			builder.uri(this.uri);, +			configureUriWithDefaults(builder);, +			builder.credentials(this.username, this.password);, +	private void configureUriWithDefaults(Builder builder) {, +		if (!getEmbedded().isEnabled(), +				|| !ClassUtils.isPresent(EMBEDDED_DRIVER, this.classLoader)) {, +			builder.uri(DEFAULT_BOLT_URI);, +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/data/neo4j/Neo4jDataAutoConfiguration.java, +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/data/neo4j/Neo4jProperties.java, +import org.neo4j.ogm.config.Configuration.Builder;, +		Builder builder = new Builder();, +		configure(builder);, +		return builder.build();, +	private void configure(Builder builder) {, +			builder.uri(this.uri);, +			configureUriWithDefaults(builder);, +			builder.credentials(this.username, this.password);, +	private void configureUriWithDefaults(Builder builder) {, +		if (!getEmbedded().isEnabled(), +				|| !ClassUtils.isPresent(EMBEDDED_DRIVER, this.classLoader)) {, +			builder.uri(DEFAULT_BOLT_URI);, +++ b/spring-boot-autoconfigure/src/test/java/org/springframework/boot/autoconfigure/data/neo4j/Neo4jDataAutoConfigurationTests.java, +			return new org.neo4j.ogm.config.Configuration.Builder(), +					.uri("http://localhost:12345").build();, +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/data/neo4j/Neo4jDataAutoConfiguration.java, +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/data/neo4j/Neo4jProperties.java, +import org.neo4j.ogm.config.Configuration.Builder;, +		Builder builder = new Builder();, +		configure(builder);, +		return builder.build();, +	private void configure(Builder builder) {, +			builder.uri(this.uri);, +			configureUriWithDefaults(builder);, +			builder.credentials(this.username, this.password);, +	private void configureUriWithDefaults(Builder builder) {, +		if (!getEmbedded().isEnabled(), +				|| !ClassUtils.isPresent(EMBEDDED_DRIVER, this.classLoader)) {, +			builder.uri(DEFAULT_BOLT_URI);, +++ b/spring-boot-autoconfigure/src/test/java/org/springframework/boot/autoconfigure/data/neo4j/Neo4jDataAutoConfigurationTests.java, +			return new org.neo4j.ogm.config.Configuration.Builder(), +					.uri("http://localhost:12345").build();, +++ b/spring-boot-autoconfigure/src/test/java/org/springframework/boot/autoconfigure/data/neo4j/Neo4jPropertiesTests.java, +		assertDriver(configuration, Neo4jProperties.HTTP_DRIVER, "http://my-server:7474");, +				"spring.data.neo4j.uri=file:target/neo4j/my.db");, +				"file:target/neo4j/my.db");]