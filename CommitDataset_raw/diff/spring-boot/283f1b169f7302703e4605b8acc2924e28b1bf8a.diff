[+++ b/spring-boot-tools/spring-boot-gradle-plugin/src/main/groovy/org/springframework/boot/gradle/task/ProjectLibraries.java, +import java.io.File;, +import org.gradle.api.file.FileCollection;, +		FileCollection custom = this.customConfigurationName != null ? this.project, +			libraries(LibraryScope.CUSTOM, custom, callback);, +			FileCollection compile = this.project.getConfigurations(), +					.getByName("compile");, +			FileCollection runtime = this.project.getConfigurations(), +					.getByName("runtime");, +			runtime = runtime.minus(compile);, +			FileCollection provided = this.project.getConfigurations(), +					.findByName(this.providedConfigurationName);, +, +			if (provided != null) {, +				compile = compile.minus(provided);, +				runtime = runtime.minus(provided);, +			}, +, +			libraries(LibraryScope.COMPILE, compile, callback);, +			libraries(LibraryScope.RUNTIME, runtime, callback);, +			libraries(LibraryScope.PROVIDED, provided, callback);, +	private void libraries(LibraryScope scope, FileCollection files,, +		if (files != null) {, +			for (File file: files) {, +				callback.library(file, scope);, +			}]