[+++ b/spring-boot-samples/spring-boot-sample-web-secure-github/src/test/java/sample/web/secure/github/SampleGithubApplicationTests.java, +import java.net.URI;, +, +import org.springframework.beans.factory.annotation.Value;, +import org.springframework.boot.test.TestRestTemplate;, +import org.springframework.boot.test.WebIntegrationTest;, +import org.springframework.http.HttpStatus;, +import org.springframework.http.ResponseEntity;, +import static org.hamcrest.Matchers.equalTo;, +import static org.hamcrest.Matchers.is;, +import static org.hamcrest.Matchers.startsWith;, +import static org.junit.Assert.assertThat;, + * Basic integration tests for GitHub SSO application., + * @author Andy Wilkinson, +@WebIntegrationTest(randomPort = true), +	@Value("${local.server.port}"), +	private int port;, +		TestRestTemplate restTemplate = new TestRestTemplate();, +		ResponseEntity<Void> entity = restTemplate, +				.getForEntity("http://localhost:" + this.port, Void.class);, +		assertThat(entity.getStatusCode(), is(HttpStatus.FOUND));, +		assertThat(entity.getHeaders().getLocation(),, +				is(equalTo(URI.create("http://localhost:" + this.port + "/login"))));, +		TestRestTemplate restTemplate = new TestRestTemplate();, +		ResponseEntity<Void> entity = restTemplate, +				.getForEntity("http://localhost:" + this.port + "/login", Void.class);, +		assertThat(entity.getStatusCode(), is(HttpStatus.FOUND));, +		assertThat(entity.getHeaders().getLocation().toString(),, +				startsWith("https://github.com/login/oauth"));, +++ b/spring-boot-samples/spring-boot-sample-web-secure-github/src/test/java/sample/web/secure/github/SampleGithubApplicationTests.java, +import java.net.URI;, +, +import org.springframework.beans.factory.annotation.Value;, +import org.springframework.boot.test.TestRestTemplate;, +import org.springframework.boot.test.WebIntegrationTest;, +import org.springframework.http.HttpStatus;, +import org.springframework.http.ResponseEntity;, +import static org.hamcrest.Matchers.equalTo;, +import static org.hamcrest.Matchers.is;, +import static org.hamcrest.Matchers.startsWith;, +import static org.junit.Assert.assertThat;, + * Basic integration tests for GitHub SSO application., + * @author Andy Wilkinson, +@WebIntegrationTest(randomPort = true), +	@Value("${local.server.port}"), +	private int port;, +		TestRestTemplate restTemplate = new TestRestTemplate();, +		ResponseEntity<Void> entity = restTemplate, +				.getForEntity("http://localhost:" + this.port, Void.class);, +		assertThat(entity.getStatusCode(), is(HttpStatus.FOUND));, +		assertThat(entity.getHeaders().getLocation(),, +				is(equalTo(URI.create("http://localhost:" + this.port + "/login"))));, +		TestRestTemplate restTemplate = new TestRestTemplate();, +		ResponseEntity<Void> entity = restTemplate, +				.getForEntity("http://localhost:" + this.port + "/login", Void.class);, +		assertThat(entity.getStatusCode(), is(HttpStatus.FOUND));, +		assertThat(entity.getHeaders().getLocation().toString(),, +				startsWith("https://github.com/login/oauth"));, +++ b/spring-boot/src/main/java/org/springframework/boot/context/web/OrderedRequestContextFilter.java, +	private int order = FilterRegistrationBean.REQUEST_WRAPPER_FILTER_MAX_ORDER - 105;]