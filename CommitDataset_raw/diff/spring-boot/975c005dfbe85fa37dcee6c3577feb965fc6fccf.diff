[+++ b/spring-boot-tools/spring-boot-gradle-plugin/src/main/java/org/springframework/boot/gradle/plugin/DependencyManagementPluginAction.java, +import java.io.File;, +import java.io.IOException;, +import java.net.JarURLConnection;, +import java.net.URL;, +import java.net.URLConnection;, +import java.util.jar.Attributes;, +import java.util.jar.JarFile;, +, +	private static final String SPRING_BOOT_VERSION = determineSpringBootVersion();, +	private static String determineSpringBootVersion() {, +		String implementationVersion = DependencyManagementPluginAction.class.getPackage(), +				.getImplementationVersion();, +		if (implementationVersion != null) {, +			return implementationVersion;, +		}, +		URL codeSourceLocation = DependencyManagementPluginAction.class, +				.getProtectionDomain().getCodeSource().getLocation();, +		try {, +			URLConnection connection = codeSourceLocation.openConnection();, +			if (connection instanceof JarURLConnection) {, +				return getImplementationVersion(, +						((JarURLConnection) connection).getJarFile());, +			}, +			try (JarFile jarFile = new JarFile(new File(codeSourceLocation.toURI()))) {, +				return getImplementationVersion(jarFile);, +			}, +		}, +		catch (Exception ex) {, +			return null;, +		}, +	}, +, +	private static String getImplementationVersion(JarFile jarFile) throws IOException {, +		return jarFile.getManifest().getMainAttributes(), +				.getValue(Attributes.Name.IMPLEMENTATION_VERSION);, +	}, +]