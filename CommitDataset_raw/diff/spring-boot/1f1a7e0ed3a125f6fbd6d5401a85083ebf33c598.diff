[+++ b/spring-boot/src/main/java/org/springframework/boot/builder/ParentContextCloserApplicationListener.java, +import org.springframework.util.ObjectUtils;, +	/**, +	 * {@link ApplicationListener} to close the context., +	 */, +			return ObjectUtils.nullSafeHashCode(this.childContext.get());, +			if (this == obj) {, +			}, +			if (obj == null) {, +			if (obj instanceof ContextCloserListener) {, +				ContextCloserListener other = (ContextCloserListener) obj;, +				return ObjectUtils.nullSafeEquals(this.childContext.get(),, +						other.childContext.get());, +			}, +			return super.equals(obj);, +++ b/spring-boot/src/main/java/org/springframework/boot/builder/ParentContextCloserApplicationListener.java, +import org.springframework.util.ObjectUtils;, +	/**, +	 * {@link ApplicationListener} to close the context., +	 */, +			return ObjectUtils.nullSafeHashCode(this.childContext.get());, +			if (this == obj) {, +			}, +			if (obj == null) {, +			if (obj instanceof ContextCloserListener) {, +				ContextCloserListener other = (ContextCloserListener) obj;, +				return ObjectUtils.nullSafeEquals(this.childContext.get(),, +						other.childContext.get());, +			}, +			return super.equals(obj);, +++ b/spring-boot/src/main/java/org/springframework/boot/context/event/EventPublishingRunListener.java, +			ApplicationFailedEvent event = new ApplicationFailedEvent(this.application,, +					this.args, context, exception);, +			publishEvent(event);, +++ b/spring-boot/src/main/java/org/springframework/boot/builder/ParentContextCloserApplicationListener.java, +import org.springframework.util.ObjectUtils;, +	/**, +	 * {@link ApplicationListener} to close the context., +	 */, +			return ObjectUtils.nullSafeHashCode(this.childContext.get());, +			if (this == obj) {, +			}, +			if (obj == null) {, +			if (obj instanceof ContextCloserListener) {, +				ContextCloserListener other = (ContextCloserListener) obj;, +				return ObjectUtils.nullSafeEquals(this.childContext.get(),, +						other.childContext.get());, +			}, +			return super.equals(obj);, +++ b/spring-boot/src/main/java/org/springframework/boot/context/event/EventPublishingRunListener.java, +			ApplicationFailedEvent event = new ApplicationFailedEvent(this.application,, +					this.args, context, exception);, +			publishEvent(event);, +++ b/spring-boot/src/test/java/org/springframework/boot/SpringApplicationTests.java, + * @author Dave Syer]