[+++ b/spring-boot/src/test/java/org/springframework/boot/OutputCapture.java, +		AnsiOutputControl.get().disableAnsiOutput();, +		AnsiOutputControl.get().enabledAnsiOutput();, +	/**, +	 * Allow AnsiOutput to not be on the test classpath., +	 */, +	private static class AnsiOutputControl {, +, +		public void disableAnsiOutput() {, +		}, +, +		public void enabledAnsiOutput() {, +		}, +, +		public static AnsiOutputControl get() {, +			try {, +				Class.forName("org.springframework.boot.ansi.AnsiOutput");, +				return new AnsiPresentOutputControl();, +			}, +			catch (ClassNotFoundException e) {, +				return new AnsiOutputControl();, +			}, +		}, +	}, +, +	private static class AnsiPresentOutputControl extends AnsiOutputControl {, +, +		@Override, +		public void disableAnsiOutput() {, +			AnsiOutput.setEnabled(Enabled.NEVER);, +		}, +, +		@Override, +		public void enabledAnsiOutput() {, +			AnsiOutput.setEnabled(Enabled.DETECT);, +		}, +, +	}, +]