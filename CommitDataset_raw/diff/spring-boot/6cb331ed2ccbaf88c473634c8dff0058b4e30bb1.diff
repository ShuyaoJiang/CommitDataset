[+++ b/spring-boot-project/spring-boot-actuator-autoconfigure/src/main/java/org/springframework/boot/actuate/autoconfigure/endpoint/condition/OnEnabledEndpointCondition.java, +import java.util.Optional;, +, +import org.springframework.core.env.Environment;, +import org.springframework.util.ConcurrentReferenceHashMap;, +	private static final ConcurrentReferenceHashMap<Environment, Optional<Boolean>> enabledByDefaultCache = new ConcurrentReferenceHashMap<>();, +, +		Environment environment = context.getEnvironment();, +		Boolean userDefinedEnabled = environment.getProperty(key, Boolean.class);, +		Boolean userDefinedDefault = isEnabledByDefault(environment);, +	private Boolean isEnabledByDefault(Environment environment) {, +		Optional<Boolean> enabledByDefault = enabledByDefaultCache.get(environment);, +		if (enabledByDefault == null) {, +			enabledByDefault = Optional.ofNullable(, +					environment.getProperty(ENABLED_BY_DEFAULT_KEY, Boolean.class));, +			enabledByDefaultCache.put(environment, enabledByDefault);, +		}, +		return enabledByDefault.orElse(null);, +	}, +]