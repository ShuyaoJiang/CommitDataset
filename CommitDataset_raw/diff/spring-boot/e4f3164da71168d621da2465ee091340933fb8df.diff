[+++ b/spring-boot-actuator/src/test/java/org/springframework/boot/actuate/health/RedisHealthIndicatorTests.java, +import org.springframework.boot.autoconfigure.AutoConfigurations;, +import org.springframework.boot.test.context.runner.ApplicationContextRunner;, + * @author Stephane Nicoll, +		new ApplicationContextRunner().withConfiguration(AutoConfigurations.of(, +				RedisAutoConfiguration.class, EndpointAutoConfiguration.class,, +				HealthIndicatorAutoConfiguration.class)).run((context) -> {, +			assertThat(context).hasSingleBean(RedisConnectionFactory.class);, +			assertThat(context).hasSingleBean(RedisHealthIndicator.class);, +		});, +		RedisHealthIndicator healthIndicator = createHealthIndicator(redisConnection);, +		given(redisConnection.info()).willThrow(, +				new RedisConnectionFailureException("Connection failed"));, +		RedisHealthIndicator healthIndicator = createHealthIndicator(redisConnection);, +	}, +, +	private RedisHealthIndicator createHealthIndicator(, +			RedisConnection redisConnection) {, +		RedisConnectionFactory redisConnectionFactory = mock(RedisConnectionFactory.class);, +		given(redisConnectionFactory.getConnection()).willReturn(redisConnection);, +		return new RedisHealthIndicator(redisConnectionFactory);]