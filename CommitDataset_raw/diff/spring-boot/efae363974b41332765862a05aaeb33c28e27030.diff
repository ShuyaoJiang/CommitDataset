[+++ b/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/SharedMetadataReaderFactoryContextInitializer.java, +import org.springframework.beans.factory.support.BeanDefinitionBuilder;, +			BeanDefinition definition = BeanDefinitionBuilder, +					.genericBeanDefinition(SharedMetadataReaderFactoryBean.class,, +							SharedMetadataReaderFactoryBean::new), +					.getBeanDefinition();, +++ b/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/SharedMetadataReaderFactoryContextInitializer.java, +import org.springframework.beans.factory.support.BeanDefinitionBuilder;, +			BeanDefinition definition = BeanDefinitionBuilder, +					.genericBeanDefinition(SharedMetadataReaderFactoryBean.class,, +							SharedMetadataReaderFactoryBean::new), +					.getBeanDefinition();, +++ b/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/condition/BeanTypeRegistry.java, +import org.springframework.beans.factory.support.BeanDefinitionBuilder;, +			BeanDefinition bd = BeanDefinitionBuilder, +					.genericBeanDefinition(BeanTypeRegistry.class,, +							() -> new BeanTypeRegistry(, +									(DefaultListableBeanFactory) beanFactory)), +					.getBeanDefinition();, +++ b/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/SharedMetadataReaderFactoryContextInitializer.java, +import org.springframework.beans.factory.support.BeanDefinitionBuilder;, +			BeanDefinition definition = BeanDefinitionBuilder, +					.genericBeanDefinition(SharedMetadataReaderFactoryBean.class,, +							SharedMetadataReaderFactoryBean::new), +					.getBeanDefinition();, +++ b/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/condition/BeanTypeRegistry.java, +import org.springframework.beans.factory.support.BeanDefinitionBuilder;, +			BeanDefinition bd = BeanDefinitionBuilder, +					.genericBeanDefinition(BeanTypeRegistry.class,, +							() -> new BeanTypeRegistry(, +									(DefaultListableBeanFactory) beanFactory)), +					.getBeanDefinition();, +++ b/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/webservices/WebServicesAutoConfiguration.java, +import java.util.function.Function;, +import org.springframework.beans.factory.config.BeanDefinition;, +import org.springframework.beans.factory.support.BeanDefinitionBuilder;, +						SimpleWsdl11Definition::new, registry);, +				registerBeans(wsdlLocation, "*.xsd", SimpleXsdSchema.class,, +						SimpleXsdSchema::new, registry);, +		private <T> void registerBeans(String location, String pattern, Class<T> type,, +				Function<Resource, T> beanSupplier, BeanDefinitionRegistry registry) {, +				BeanDefinition beanDefinition = BeanDefinitionBuilder, +						.genericBeanDefinition(type, () -> beanSupplier.apply(resource)), +						.getBeanDefinition();]