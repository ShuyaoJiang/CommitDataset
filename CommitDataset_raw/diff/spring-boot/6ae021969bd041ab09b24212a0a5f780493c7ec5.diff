[+++ b/spring-boot/src/main/java/org/springframework/boot/test/SpringApplicationContextLoader.java, +		properties.putAll(TestPropertySourceUtils, +				.convertInlinedPropertiesToMap(config.getPropertySourceProperties()));, +++ b/spring-boot/src/main/java/org/springframework/boot/test/SpringApplicationContextLoader.java, +		properties.putAll(TestPropertySourceUtils, +				.convertInlinedPropertiesToMap(config.getPropertySourceProperties()));, +++ b/spring-boot/src/test/java/org/springframework/boot/test/SpringApplicationContextLoaderTests.java, +import org.junit.Ignore;, +import org.springframework.test.context.support.TestPropertySourceUtils;, +	@Test, +	@Ignore, +	public void environmentPropertiesNewLineInValue() throws Exception {, +		// gh-4384, +		Map<String, Object> config = getEnvironmentProperties(NewLineInValue.class);, +		assertKey(config, "key", "myValue");, +		assertKey(config, "variables", "foo=FOO\n bar=BAR");, +	}, +, +		return TestPropertySourceUtils, +				.convertInlinedPropertiesToMap(config.getPropertySourceProperties());, +	@IntegrationTest({ "key=myValue", "variables=foo=FOO\n bar=BAR" }), +	static class NewLineInValue {, +	}, +]