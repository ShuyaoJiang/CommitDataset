[+++ b/spring-boot-project/spring-boot-actuator-autoconfigure/src/main/java/org/springframework/boot/actuate/autoconfigure/metrics/export/prometheus/PrometheusMetricsExportAutoConfiguration.java, +import org.apache.commons.logging.Log;, +import org.apache.commons.logging.LogFactory;, +		private static final Log logger = LogFactory, +				.getLog(PrometheusPushGatewayConfiguration.class);, +, +				logger.warn(String.format(, +						"Invalid PushGateway base url '%s': update your configuration to a valid URL",, +						url));, +++ b/spring-boot-project/spring-boot-actuator-autoconfigure/src/main/java/org/springframework/boot/actuate/autoconfigure/metrics/export/prometheus/PrometheusMetricsExportAutoConfiguration.java, +import org.apache.commons.logging.Log;, +import org.apache.commons.logging.LogFactory;, +		private static final Log logger = LogFactory, +				.getLog(PrometheusPushGatewayConfiguration.class);, +, +				logger.warn(String.format(, +						"Invalid PushGateway base url '%s': update your configuration to a valid URL",, +						url));, +++ b/spring-boot-project/spring-boot-actuator-autoconfigure/src/main/java/org/springframework/boot/actuate/autoconfigure/metrics/export/prometheus/PrometheusProperties.java, + * Copyright 2012-2019 the original author or authors., +		private String baseUrl = "http://localhost:9091";, +++ b/spring-boot-project/spring-boot-actuator-autoconfigure/src/main/java/org/springframework/boot/actuate/autoconfigure/metrics/export/prometheus/PrometheusMetricsExportAutoConfiguration.java, +import org.apache.commons.logging.Log;, +import org.apache.commons.logging.LogFactory;, +		private static final Log logger = LogFactory, +				.getLog(PrometheusPushGatewayConfiguration.class);, +, +				logger.warn(String.format(, +						"Invalid PushGateway base url '%s': update your configuration to a valid URL",, +						url));, +++ b/spring-boot-project/spring-boot-actuator-autoconfigure/src/main/java/org/springframework/boot/actuate/autoconfigure/metrics/export/prometheus/PrometheusProperties.java, + * Copyright 2012-2019 the original author or authors., +		private String baseUrl = "http://localhost:9091";, +++ b/spring-boot-project/spring-boot-actuator-autoconfigure/src/test/java/org/springframework/boot/actuate/autoconfigure/metrics/export/prometheus/PrometheusMetricsExportAutoConfigurationTests.java, +import org.junit.Rule;, +import org.springframework.boot.test.rule.OutputCapture;, +	@Rule, +	public final OutputCapture output = new OutputCapture();, +, +				.withUserConfiguration(BaseConfiguration.class).run((context) -> {, +					assertThat(this.output.toString()), +							.doesNotContain("Invalid PushGateway base url");, +					hasGatewayURL(context, "http://localhost:9091/metrics/job/");, +				});, +	}, +, +	@Test, +	@Deprecated, +	public void withCustomLegacyPushGatewayURL() {, +		this.contextRunner, +				.withConfiguration(, +						AutoConfigurations.of(ManagementContextAutoConfiguration.class)), +				.withPropertyValues(, +						"management.metrics.export.prometheus.pushgateway.enabled=true",, +						"management.metrics.export.prometheus.pushgateway.base-url=localhost:9090"), +				.withUserConfiguration(BaseConfiguration.class).run((context) -> {, +					assertThat(this.output.toString()), +							.contains("Invalid PushGateway base url"), +							.contains("localhost:9090");, +					hasGatewayURL(context, "http://localhost:9090/metrics/job/");, +				});, +						"management.metrics.export.prometheus.pushgateway.base-url=https://example.com:8080"), +						"https://example.com:8080/metrics/job/"));]