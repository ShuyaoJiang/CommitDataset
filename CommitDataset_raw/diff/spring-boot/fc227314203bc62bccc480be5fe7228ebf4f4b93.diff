[+++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/data/redis/RedisAutoConfiguration.java, + * Copyright 2012-2016 the original author or authors., +import org.springframework.boot.autoconfigure.data.redis.RedisProperties.Cluster;, +import org.springframework.data.redis.connection.RedisClusterConfiguration;, +		@Autowired(required = false), +		private RedisClusterConfiguration clusterConfiguration;, +, +		/**, +		 * Create {@link RedisClusterConfiguration} from {@link RedisProperties.Cluster}., +		 * , +		 * , +		 * @return {@literal null} if no {@link RedisProperties.Cluster} set., +		 * , +		 */, +		protected final RedisClusterConfiguration getClusterConfiguration() {, +, +			if (this.clusterConfiguration != null) {, +				return this.clusterConfiguration;, +			}, +, +			if (this.properties.getCluster() == null) {, +				return null;, +			}, +, +			Cluster clusterProperties = this.properties.getCluster();, +			RedisClusterConfiguration config = new RedisClusterConfiguration(, +					clusterProperties.getNodes());, +, +			if (clusterProperties.getMaxRedirects() != null) {, +				config.setMaxRedirects(config.getMaxRedirects().intValue());, +			}, +, +			return config;, +		}, +, +			return applyProperties(createJedisConnectionFactory());, +		private JedisConnectionFactory createJedisConnectionFactory() {, +, +			if (getSentinelConfig() != null) {, +				return new JedisConnectionFactory(getSentinelConfig());, +			}, +, +			if (getClusterConfiguration() != null) {, +				return new JedisConnectionFactory(getClusterConfiguration());, +			}, +, +			return new JedisConnectionFactory();, +		}, +, +			JedisPoolConfig poolConfig = this.properties.getPool() != null ? jedisPoolConfig(), +					: new JedisPoolConfig();, +, +			if (getSentinelConfig() != null) {, +				return new JedisConnectionFactory(getSentinelConfig(), poolConfig);, +			if (getClusterConfiguration() != null) {, +				return new JedisConnectionFactory(getClusterConfiguration(), poolConfig);, +			}, +, +			return new JedisConnectionFactory(poolConfig);, +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/data/redis/RedisAutoConfiguration.java, + * Copyright 2012-2016 the original author or authors., +import org.springframework.boot.autoconfigure.data.redis.RedisProperties.Cluster;, +import org.springframework.data.redis.connection.RedisClusterConfiguration;, +		@Autowired(required = false), +		private RedisClusterConfiguration clusterConfiguration;, +, +		/**, +		 * Create {@link RedisClusterConfiguration} from {@link RedisProperties.Cluster}., +		 * , +		 * , +		 * @return {@literal null} if no {@link RedisProperties.Cluster} set., +		 * , +		 */, +		protected final RedisClusterConfiguration getClusterConfiguration() {, +, +			if (this.clusterConfiguration != null) {, +				return this.clusterConfiguration;, +			}, +, +			if (this.properties.getCluster() == null) {, +				return null;, +			}, +, +			Cluster clusterProperties = this.properties.getCluster();, +			RedisClusterConfiguration config = new RedisClusterConfiguration(, +					clusterProperties.getNodes());, +, +			if (clusterProperties.getMaxRedirects() != null) {, +				config.setMaxRedirects(config.getMaxRedirects().intValue());, +			}, +, +			return config;, +		}, +, +			return applyProperties(createJedisConnectionFactory());, +		private JedisConnectionFactory createJedisConnectionFactory() {, +, +			if (getSentinelConfig() != null) {, +				return new JedisConnectionFactory(getSentinelConfig());, +			}]