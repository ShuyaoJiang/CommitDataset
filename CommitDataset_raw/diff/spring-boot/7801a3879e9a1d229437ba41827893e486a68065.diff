[+++ b/spring-boot/src/main/java/org/springframework/boot/SpringApplication.java, +	private static final String CONFIGURABLE_WEB_ENVIRONMENT_CLASS = "org.springframework.web.context.ConfigurableWebEnvironment";, +, +		if (isWebEnvironment(environment) && !this.webEnvironment) {, +	private boolean isWebEnvironment(ConfigurableEnvironment environment) {, +		try {, +			Class<?> webEnvironmentClass = ClassUtils.forName(, +					CONFIGURABLE_WEB_ENVIRONMENT_CLASS, getClassLoader());, +			return (webEnvironmentClass.isInstance(environment));, +		}, +		catch (Throwable ex) {, +			return false;, +		}, +	}, +]