[+++ b/spring-boot/src/main/java/org/springframework/boot/cloudfoundry/VcapApplicationListener.java, +	@SuppressWarnings("unchecked"), +			String key = getFullKey(path, entry.getKey());, +			if (value instanceof Map) {, +				// Need a compound key, +				flatten(properties, (Map<String, Object>) value, key);, +			}, +			else if (value instanceof Collection) {, +				// Need a compound key, +				Collection<Object> collection = (Collection<Object>) value;, +				properties.put(key,, +						StringUtils.collectionToCommaDelimitedString(collection));, +				int count = 0;, +				for (Object item : collection) {, +					String itemKey = "[" + (count++) + "]";, +					flatten(properties, Collections.singletonMap(itemKey, item), key);, +				}, +			}, +			else if (value instanceof String) {, +	private String getFullKey(String path, String key) {, +		if (!StringUtils.hasText(path)) {, +			return key;, +		}, +		if (key.startsWith("[")) {, +			return path + key;, +		}, +		return path + "." + key;, +	}, +]