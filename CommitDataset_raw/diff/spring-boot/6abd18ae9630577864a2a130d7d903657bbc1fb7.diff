[+++ b/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/client/RestTemplateAutoConfiguration.java, + * Copyright 2012-2019 the original author or authors., +import org.springframework.boot.autoconfigure.condition.ConditionalOnWebApplication;, +import org.springframework.boot.autoconfigure.condition.ConditionalOnWebApplication.Type;, +import org.springframework.boot.autoconfigure.condition.NoneNestedConditions;, +import org.springframework.boot.autoconfigure.web.client.RestTemplateAutoConfiguration.NotReactiveWebApplicationCondition;, +import org.springframework.context.annotation.Conditional;, +@Conditional(NotReactiveWebApplicationCondition.class), +	static class NotReactiveWebApplicationCondition extends NoneNestedConditions {, +, +		NotReactiveWebApplicationCondition() {, +			super(ConfigurationPhase.PARSE_CONFIGURATION);, +		}, +, +		@ConditionalOnWebApplication(type = Type.REACTIVE), +		private static class ReactiveWebApplication {, +, +		}, +, +	}, +, +++ b/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/client/RestTemplateAutoConfiguration.java, + * Copyright 2012-2019 the original author or authors., +import org.springframework.boot.autoconfigure.condition.ConditionalOnWebApplication;, +import org.springframework.boot.autoconfigure.condition.ConditionalOnWebApplication.Type;, +import org.springframework.boot.autoconfigure.condition.NoneNestedConditions;, +import org.springframework.boot.autoconfigure.web.client.RestTemplateAutoConfiguration.NotReactiveWebApplicationCondition;, +import org.springframework.context.annotation.Conditional;, +@Conditional(NotReactiveWebApplicationCondition.class), +	static class NotReactiveWebApplicationCondition extends NoneNestedConditions {, +, +		NotReactiveWebApplicationCondition() {, +			super(ConfigurationPhase.PARSE_CONFIGURATION);, +		}, +, +		@ConditionalOnWebApplication(type = Type.REACTIVE), +		private static class ReactiveWebApplication {, +, +		}, +, +	}, +, +++ b/spring-boot-project/spring-boot-autoconfigure/src/test/java/org/springframework/boot/autoconfigure/web/client/RestTemplateAutoConfigurationTests.java, +import org.springframework.boot.test.context.runner.ReactiveWebApplicationContextRunner;, +import org.springframework.boot.test.context.runner.WebApplicationContextRunner;, +	@Test, +	public void whenServletWebApplicationRestTemplateBuilderIsConfigured() {, +		new WebApplicationContextRunner(), +				.withConfiguration(, +						AutoConfigurations.of(RestTemplateAutoConfiguration.class)), +				.run((context) -> assertThat(context), +						.hasSingleBean(RestTemplateBuilder.class));, +	}, +, +	@Test, +	public void whenReactiveWebApplicationRestTemplateIsNotConfigured() {, +		new ReactiveWebApplicationContextRunner(), +				.withConfiguration(, +						AutoConfigurations.of(RestTemplateAutoConfiguration.class)), +				.run((context) -> assertThat(context), +						.doesNotHaveBean(RestTemplateBuilder.class));, +	}, +]