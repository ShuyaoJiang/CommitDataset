[+++ b/spring-boot-devtools/src/main/java/org/springframework/boot/devtools/restart/RestartApplicationListener.java, +			onApplicationPreparedEvent((ApplicationPreparedEvent) event);, +		if (event instanceof ApplicationFailedEvent) {, +			onApplicationFailedEvent((ApplicationFailedEvent) event);, +	private void onApplicationPreparedEvent(ApplicationPreparedEvent event) {, +		Restarter.getInstance().prepare(event.getApplicationContext());, +	}, +, +	private void onApplicationFailedEvent(ApplicationFailedEvent event) {, +		Restarter.getInstance().remove(event.getApplicationContext());, +	}, +, +++ b/spring-boot-devtools/src/main/java/org/springframework/boot/devtools/restart/RestartApplicationListener.java, +			onApplicationPreparedEvent((ApplicationPreparedEvent) event);, +		if (event instanceof ApplicationFailedEvent) {, +			onApplicationFailedEvent((ApplicationFailedEvent) event);, +	private void onApplicationPreparedEvent(ApplicationPreparedEvent event) {, +		Restarter.getInstance().prepare(event.getApplicationContext());, +	}, +, +	private void onApplicationFailedEvent(ApplicationFailedEvent event) {, +		Restarter.getInstance().remove(event.getApplicationContext());, +	}, +, +++ b/spring-boot-devtools/src/main/java/org/springframework/boot/devtools/restart/Restarter.java, +			for (ConfigurableApplicationContext context : this.rootContexts) {, +				context.close();, +				this.rootContexts.remove(context);]