[+++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration.java, +			DataSource liquibaseDataSource = getDataSource();, +			if (liquibaseDataSource != null) {, +				SpringLiquibase liquibase = new SpringLiquibase();, +				liquibase.setDataSource(liquibaseDataSource);, +				return liquibase;, +			SpringLiquibase liquibase = new DataSourceClosingSpringLiquibase();, +			liquibase.setDataSource(createNewDataSource());, +			if (this.properties.getUrl() == null) {, +		private DataSource createNewDataSource() {, +			return DataSourceBuilder.create().url(this.properties.getUrl()), +					.username(this.properties.getUser()), +					.password(this.properties.getPassword()).build();, +		}, +, +			Class<?> dataSourceClass = getDataSource().getClass();, +			Method closeMethod = ReflectionUtils.findMethod(dataSourceClass, "close");]