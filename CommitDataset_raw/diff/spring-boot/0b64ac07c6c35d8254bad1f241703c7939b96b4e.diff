[+++ b/ci/pipeline.yml, +- name: sync-to-maven-central, +  serial: true, +  plan:, +  - get: spring-boot-ci-image, +  - get: git-repo, +    trigger: false, +  - get: artifactory-repo, +    trigger: false, +    passed: [promote-release], +  - task: sync-to-maven-central, +    image: spring-boot-ci-image, +    file: git-repo/ci/tasks/sync-to-maven-central.yml, +    params:, +  jobs: ["stage-milestone", "stage-rc", "stage-release", "promote-milestone", "promote-rc", "promote-release", "sync-to-maven-central"], +++ b/ci/pipeline.yml, +- name: sync-to-maven-central, +  serial: true, +  plan:, +  - get: spring-boot-ci-image, +  - get: git-repo, +    trigger: false, +  - get: artifactory-repo, +    trigger: false, +    passed: [promote-release], +  - task: sync-to-maven-central, +    image: spring-boot-ci-image, +    file: git-repo/ci/tasks/sync-to-maven-central.yml, +    params:, +  jobs: ["stage-milestone", "stage-rc", "stage-release", "promote-milestone", "promote-rc", "promote-release", "sync-to-maven-central"], +++ b/ci/scripts/promote.sh, +++ b/ci/pipeline.yml, +- name: sync-to-maven-central, +  serial: true, +  plan:, +  - get: spring-boot-ci-image, +  - get: git-repo, +    trigger: false, +  - get: artifactory-repo, +    trigger: false, +    passed: [promote-release], +  - task: sync-to-maven-central, +    image: spring-boot-ci-image, +    file: git-repo/ci/tasks/sync-to-maven-central.yml, +    params:, +  jobs: ["stage-milestone", "stage-rc", "stage-release", "promote-milestone", "promote-rc", "promote-release", "sync-to-maven-central"], +++ b/ci/scripts/promote.sh, +++ b/ci/scripts/sync-to-maven-central.sh, +#!/bin/bash, +set -e, +, +buildName=$( cat artifactory-repo/build-info.json | jq -r '.buildInfo.name' ), +buildNumber=$( cat artifactory-repo/build-info.json | jq -r '.buildInfo.number' ), +groupId=$( cat artifactory-repo/build-info.json | jq -r '.buildInfo.modules[0].id' | sed 's/\(.*\):.*:.*/\1/' ), +version=$( cat artifactory-repo/build-info.json | jq -r '.buildInfo.modules[0].id' | sed 's/.*:.*:\(.*\)/\1/' ), +, +echo "Syncing ${buildName}/${buildNumber} to Maven Central", +	curl \, +			-s \, +			--connect-timeout 240 \, +			--max-time 2700 \, +			-u ${BINTRAY_USERNAME}:${BINTRAY_PASSWORD} \, +			-H "Content-Type: application/json" -d "{\"username\": \"${SONATYPE_USERNAME}\", \"password\": \"${SONATYPE_PASSWORD}\"}" \, +			-f \, +			-X \, +			POST "https://api.bintray.com/maven_central_sync/${BINTRAY_SUBJECT}/${BINTRAY_REPO}/${groupId}/versions/${version}" > /dev/null || { echo "Failed to sync" >&2; exit 1; }, +echo "Sync complete", +++ b/ci/pipeline.yml, +- name: sync-to-maven-central, +  serial: true, +  plan:, +  - get: spring-boot-ci-image, +  - get: git-repo, +    trigger: false, +  - get: artifactory-repo, +    trigger: false, +    passed: [promote-release], +  - task: sync-to-maven-central, +    image: spring-boot-ci-image, +    file: git-repo/ci/tasks/sync-to-maven-central.yml, +    params:, +  jobs: ["stage-milestone", "stage-rc", "stage-release", "promote-milestone", "promote-rc", "promote-release", "sync-to-maven-central"], +++ b/ci/scripts/promote.sh, +++ b/ci/scripts/sync-to-maven-central.sh, +#!/bin/bash, +set -e, +, +buildName=$( cat artifactory-repo/build-info.json | jq -r '.buildInfo.name' ), +buildNumber=$( cat artifactory-repo/build-info.json | jq -r '.buildInfo.number' ), +groupId=$( cat artifactory-repo/build-info.json | jq -r '.buildInfo.modules[0].id' | sed 's/\(.*\):.*:.*/\1/' ), +version=$( cat artifactory-repo/build-info.json | jq -r '.buildInfo.modules[0].id' | sed 's/.*:.*:\(.*\)/\1/' ), +, +echo "Syncing ${buildName}/${buildNumber} to Maven Central", +	curl \, +			-s \, +			--connect-timeout 240 \, +			--max-time 2700 \, +			-u ${BINTRAY_USERNAME}:${BINTRAY_PASSWORD} \, +			-H "Content-Type: application/json" -d "{\"username\": \"${SONATYPE_USERNAME}\", \"password\": \"${SONATYPE_PASSWORD}\"}" \, +			-f \]