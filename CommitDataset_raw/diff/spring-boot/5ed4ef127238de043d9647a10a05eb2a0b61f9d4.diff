[+++ b/spring-boot-tools/spring-boot-antlib/src/main/resources/org/springframework/boot/ant/antlib.xml, +					<attribute name="Spring-Boot-Classes" value="BOOT-INF/classes/" />, +					<attribute name="Spring-Boot-Lib" value="BOOT-INF/lib/" />, +++ b/spring-boot-tools/spring-boot-antlib/src/main/resources/org/springframework/boot/ant/antlib.xml, +					<attribute name="Spring-Boot-Classes" value="BOOT-INF/classes/" />, +					<attribute name="Spring-Boot-Lib" value="BOOT-INF/lib/" />, +++ b/spring-boot-tools/spring-boot-loader-tools/src/main/java/org/springframework/boot/loader/tools/Repackager.java, +	private static final String BOOT_LIB_ATTRIBUTE = "Spring-Boot-Lib";, +, +	private static final String BOOT_CLASSES_ATTRIBUTE = "Spring-Boot-Classes";, +, +		manifest.getMainAttributes().putValue(BOOT_CLASSES_ATTRIBUTE,, +				(this.layout instanceof RepackagingLayout), +						? ((RepackagingLayout) this.layout).getRepackagedClassesLocation(), +						: this.layout.getClassesLocation());, +		manifest.getMainAttributes().putValue(BOOT_LIB_ATTRIBUTE,, +				this.layout.getLibraryDestination("", LibraryScope.COMPILE));, +++ b/spring-boot-tools/spring-boot-antlib/src/main/resources/org/springframework/boot/ant/antlib.xml, +					<attribute name="Spring-Boot-Classes" value="BOOT-INF/classes/" />, +					<attribute name="Spring-Boot-Lib" value="BOOT-INF/lib/" />, +++ b/spring-boot-tools/spring-boot-loader-tools/src/main/java/org/springframework/boot/loader/tools/Repackager.java, +	private static final String BOOT_LIB_ATTRIBUTE = "Spring-Boot-Lib";, +, +	private static final String BOOT_CLASSES_ATTRIBUTE = "Spring-Boot-Classes";, +, +		manifest.getMainAttributes().putValue(BOOT_CLASSES_ATTRIBUTE,, +				(this.layout instanceof RepackagingLayout), +						? ((RepackagingLayout) this.layout).getRepackagedClassesLocation(), +						: this.layout.getClassesLocation());, +		manifest.getMainAttributes().putValue(BOOT_LIB_ATTRIBUTE,, +				this.layout.getLibraryDestination("", LibraryScope.COMPILE));, +++ b/spring-boot-tools/spring-boot-loader-tools/src/test/java/org/springframework/boot/loader/tools/RepackagerTests.java, +	public void executableJarLayoutAttributes() throws Exception {, +		this.testJarFile.addClass("a/b/C.class", ClassWithMainMethod.class);, +		File file = this.testJarFile.getFile();, +		Repackager repackager = new Repackager(file);, +		repackager.repackage(NO_LIBRARIES);, +		Manifest actualManifest = getManifest(file);, +		assertThat(actualManifest.getMainAttributes()), +				.containsEntry(new Attributes.Name("Spring-Boot-Lib"), "BOOT-INF/lib/");, +		assertThat(actualManifest.getMainAttributes()).containsEntry(, +				new Attributes.Name("Spring-Boot-Classes"), "BOOT-INF/classes/");, +	}, +, +	@Test, +	public void executableWarLayoutAttributes() throws Exception {, +		this.testJarFile.addClass("WEB-INF/classes/a/b/C.class",, +				ClassWithMainMethod.class);, +		File file = this.testJarFile.getFile("war");, +		Repackager repackager = new Repackager(file);, +		repackager.repackage(NO_LIBRARIES);, +		Manifest actualManifest = getManifest(file);, +		assertThat(actualManifest.getMainAttributes()), +				.containsEntry(new Attributes.Name("Spring-Boot-Lib"), "WEB-INF/lib/");, +		assertThat(actualManifest.getMainAttributes()).containsEntry(, +				new Attributes.Name("Spring-Boot-Classes"), "WEB-INF/classes/");, +	}, +, +	@Test, +++ b/spring-boot-tools/spring-boot-antlib/src/main/resources/org/springframework/boot/ant/antlib.xml, +					<attribute name="Spring-Boot-Classes" value="BOOT-INF/classes/" />, +					<attribute name="Spring-Boot-Lib" value="BOOT-INF/lib/" />, +++ b/spring-boot-tools/spring-boot-loader-tools/src/main/java/org/springframework/boot/loader/tools/Repackager.java, +	private static final String BOOT_LIB_ATTRIBUTE = "Spring-Boot-Lib";, +, +	private static final String BOOT_CLASSES_ATTRIBUTE = "Spring-Boot-Classes";, +, +		manifest.getMainAttributes().putValue(BOOT_CLASSES_ATTRIBUTE,, +				(this.layout instanceof RepackagingLayout), +						? ((RepackagingLayout) this.layout).getRepackagedClassesLocation(), +						: this.layout.getClassesLocation());, +		manifest.getMainAttributes().putValue(BOOT_LIB_ATTRIBUTE,, +				this.layout.getLibraryDestination("", LibraryScope.COMPILE));, +++ b/spring-boot-tools/spring-boot-loader-tools/src/test/java/org/springframework/boot/loader/tools/RepackagerTests.java, +	public void executableJarLayoutAttributes() throws Exception {, +		this.testJarFile.addClass("a/b/C.class", ClassWithMainMethod.class);, +		File file = this.testJarFile.getFile();, +		Repackager repackager = new Repackager(file);, +		repackager.repackage(NO_LIBRARIES);, +		Manifest actualManifest = getManifest(file);, +		assertThat(actualManifest.getMainAttributes()), +				.containsEntry(new Attributes.Name("Spring-Boot-Lib"), "BOOT-INF/lib/");, +		assertThat(actualManifest.getMainAttributes()).containsEntry(, +				new Attributes.Name("Spring-Boot-Classes"), "BOOT-INF/classes/");, +	}, +, +	@Test, +	public void executableWarLayoutAttributes() throws Exception {, +		this.testJarFile.addClass("WEB-INF/classes/a/b/C.class",, +				ClassWithMainMethod.class);, +		File file = this.testJarFile.getFile("war");, +		Repackager repackager = new Repackager(file);, +		repackager.repackage(NO_LIBRARIES);, +		Manifest actualManifest = getManifest(file);, +		assertThat(actualManifest.getMainAttributes()), +				.containsEntry(new Attributes.Name("Spring-Boot-Lib"), "WEB-INF/lib/");, +		assertThat(actualManifest.getMainAttributes()).containsEntry(, +				new Attributes.Name("Spring-Boot-Classes"), "WEB-INF/classes/");, +	}, +]