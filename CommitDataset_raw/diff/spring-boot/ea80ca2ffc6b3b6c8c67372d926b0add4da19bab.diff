[+++ b/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/embedded/TomcatWebServerFactoryCustomizer.java, +		factory.addConnectorCustomizers((connector) -> {, +			ProtocolHandler handler = connector.getProtocolHandler();, +			if (handler instanceof AbstractProtocol) {, +				((AbstractProtocol<?>) handler).setProcessorCache(processorCache);, +			}, +		});, +++ b/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/embedded/TomcatWebServerFactoryCustomizer.java, +		factory.addConnectorCustomizers((connector) -> {, +			ProtocolHandler handler = connector.getProtocolHandler();, +			if (handler instanceof AbstractProtocol) {, +				((AbstractProtocol<?>) handler).setProcessorCache(processorCache);, +			}, +		});, +++ b/spring-boot-project/spring-boot-autoconfigure/src/test/java/org/springframework/boot/autoconfigure/web/embedded/TomcatWebServerFactoryCustomizerTests.java, +import org.springframework.boot.web.server.WebServer;, +	@Test, +	public void ajpConnectorCanBeCustomized() {, +		TomcatServletWebServerFactory factory = new TomcatServletWebServerFactory(0);, +		factory.setProtocol("AJP/1.3");, +		this.customizer.customize(factory);, +		WebServer server = factory.getWebServer();, +		server.start();, +		server.stop();, +	}, +]