[+++ b/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/http/HttpMessageConvertersAutoConfiguration.java, + * Copyright 2012-2019 the original author or authors., +import org.springframework.boot.autoconfigure.condition.ConditionalOnWebApplication;, +import org.springframework.boot.autoconfigure.condition.ConditionalOnWebApplication.Type;, +import org.springframework.boot.autoconfigure.condition.NoneNestedConditions;, +import org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration.NotReactiveWebApplicationCondition;, +import org.springframework.context.annotation.Conditional;, +@Conditional(NotReactiveWebApplicationCondition.class), +	static class NotReactiveWebApplicationCondition extends NoneNestedConditions {, +, +		NotReactiveWebApplicationCondition() {, +			super(ConfigurationPhase.PARSE_CONFIGURATION);, +		}, +, +		@ConditionalOnWebApplication(type = Type.REACTIVE), +		private static class ReactiveWebApplication {, +, +		}, +, +	}, +, +++ b/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/http/HttpMessageConvertersAutoConfiguration.java, + * Copyright 2012-2019 the original author or authors., +import org.springframework.boot.autoconfigure.condition.ConditionalOnWebApplication;, +import org.springframework.boot.autoconfigure.condition.ConditionalOnWebApplication.Type;, +import org.springframework.boot.autoconfigure.condition.NoneNestedConditions;, +import org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration.NotReactiveWebApplicationCondition;, +import org.springframework.context.annotation.Conditional;, +@Conditional(NotReactiveWebApplicationCondition.class), +	static class NotReactiveWebApplicationCondition extends NoneNestedConditions {, +, +		NotReactiveWebApplicationCondition() {, +			super(ConfigurationPhase.PARSE_CONFIGURATION);, +		}, +, +		@ConditionalOnWebApplication(type = Type.REACTIVE), +		private static class ReactiveWebApplication {, +, +		}, +, +	}, +, +++ b/spring-boot-project/spring-boot-autoconfigure/src/test/java/org/springframework/boot/autoconfigure/http/HttpMessageConvertersAutoConfigurationTests.java, + * Copyright 2012-2019 the original author or authors., +import org.springframework.boot.test.context.runner.ReactiveWebApplicationContextRunner;, +import org.springframework.boot.test.context.runner.WebApplicationContextRunner;, +	@Test, +	public void whenServletWebApplicationHttpMessageConvertersIsConfigured() {, +		new WebApplicationContextRunner(), +				.withConfiguration(AutoConfigurations, +						.of(HttpMessageConvertersAutoConfiguration.class)), +				.run((context) -> assertThat(context), +						.hasSingleBean(HttpMessageConverters.class));, +	}, +, +	@Test, +	public void whenReactiveWebApplicationHttpMessageConvertersRestTemplateIsNotConfigured() {, +		new ReactiveWebApplicationContextRunner(), +				.withConfiguration(AutoConfigurations, +						.of(HttpMessageConvertersAutoConfiguration.class)), +				.run((context) -> assertThat(context), +						.doesNotHaveBean(HttpMessageConverters.class));, +	}, +]