[+++ b/spring-boot/src/test/java/org/springframework/boot/context/embedded/AbstractEmbeddedServletContainerFactoryTests.java, +import static org.hamcrest.Matchers.containsString;, +	@Test, +	public void sslGetScheme() throws Exception { // gh-2232, +		AbstractEmbeddedServletContainerFactory factory = getFactory();, +		factory.setSsl(getSsl(null, "password", "src/test/resources/test.jks"));, +		this.container = factory.getEmbeddedServletContainer(new ServletRegistrationBean(, +				new ExampleServlet(true), "/hello"));, +		this.container.start();, +		SSLConnectionSocketFactory socketFactory = new SSLConnectionSocketFactory(, +				new SSLContextBuilder().loadTrustMaterial(null,, +						new TrustSelfSignedStrategy()).build());, +		HttpClient httpClient = HttpClients.custom().setSSLSocketFactory(socketFactory), +				.build();, +		HttpComponentsClientHttpRequestFactory requestFactory = new HttpComponentsClientHttpRequestFactory(, +				httpClient);, +		assertThat(getResponse(getLocalUrl("https", "/hello"), requestFactory),, +				containsString("scheme=https"));, +	}, +, +++ b/spring-boot/src/test/java/org/springframework/boot/context/embedded/AbstractEmbeddedServletContainerFactoryTests.java, +import static org.hamcrest.Matchers.containsString;, +	@Test, +	public void sslGetScheme() throws Exception { // gh-2232, +		AbstractEmbeddedServletContainerFactory factory = getFactory();, +		factory.setSsl(getSsl(null, "password", "src/test/resources/test.jks"));, +		this.container = factory.getEmbeddedServletContainer(new ServletRegistrationBean(, +				new ExampleServlet(true), "/hello"));, +		this.container.start();, +		SSLConnectionSocketFactory socketFactory = new SSLConnectionSocketFactory(, +				new SSLContextBuilder().loadTrustMaterial(null,, +						new TrustSelfSignedStrategy()).build());, +		HttpClient httpClient = HttpClients.custom().setSSLSocketFactory(socketFactory), +				.build();, +		HttpComponentsClientHttpRequestFactory requestFactory = new HttpComponentsClientHttpRequestFactory(, +				httpClient);, +		assertThat(getResponse(getLocalUrl("https", "/hello"), requestFactory),, +				containsString("scheme=https"));, +	}, +, +++ b/spring-boot/src/test/java/org/springframework/boot/context/embedded/ExampleServlet.java, +	private final boolean echoRequestInfo;, +, +	public ExampleServlet() {, +		this(false);, +	}, +, +	public ExampleServlet(boolean echoRequestInfo) {, +		this.echoRequestInfo = echoRequestInfo;, +	}, +, +		String content = "Hello World";, +		if (this.echoRequestInfo) {, +			content += " scheme=" + request.getScheme();, +		}, +		response.getWriter().write(content);]