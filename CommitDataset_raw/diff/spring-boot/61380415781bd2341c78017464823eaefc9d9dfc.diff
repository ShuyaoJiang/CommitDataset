[+++ b/spring-boot-project/spring-boot-actuator/src/test/java/org/springframework/boot/actuate/metrics/web/servlet/WebMvcMetricsFilterTests.java, + * Copyright 2012-2019 the original author or authors., +import org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter;, +	public void streamingError() throws Exception {, +		MvcResult result = this.mvc.perform(get("/api/c1/streamingError")), +				.andExpect(request().asyncStarted()).andReturn();, +		assertThatCode(, +				() -> this.mvc.perform(asyncDispatch(result)).andExpect(status().isOk()));, +		assertThat(this.registry.get("http.server.requests"), +				.tags("exception", "IOException").timer().count()).isEqualTo(1L);, +	}, +, +	@Test, +		@GetMapping("/streamingError"), +		public ResponseBodyEmitter streamingError() {, +			ResponseBodyEmitter emitter = new ResponseBodyEmitter();, +			emitter.completeWithError(, +					new IOException("error while writing to the response"));, +			return emitter;, +		}, +]