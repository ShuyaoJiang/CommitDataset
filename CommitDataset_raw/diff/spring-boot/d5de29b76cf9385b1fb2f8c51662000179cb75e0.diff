[+++ b/spring-boot/src/test/java/org/springframework/boot/SpringApplicationTests.java, +import static org.junit.Assert.assertArrayEquals;, +	public void addProfiles() throws Exception {, +		SpringApplication application = new SpringApplication(ExampleConfig.class);, +		application.setWebEnvironment(false);, +		application.setAdditionalProfiles("foo");, +		ConfigurableEnvironment environment = new StandardEnvironment();, +		application.setEnvironment(environment);, +		application.run();, +		assertTrue(environment.acceptsProfiles("foo"));, +	}, +, +	@Test, +	public void addProfilesOrder() throws Exception {, +		SpringApplication application = new SpringApplication(ExampleConfig.class);, +		application.setWebEnvironment(false);, +		application.setAdditionalProfiles("foo");, +		ConfigurableEnvironment environment = new StandardEnvironment();, +		application.setEnvironment(environment);, +		application.run("--spring.profiles.active=bar");, +		// Command line arguably should always come last (not the case currently), +		assertArrayEquals(new String[] { "bar", "foo" }, environment.getActiveProfiles());, +	}, +, +	@Test, +		assertEquals("bucket", environment.getProperty("foo"));]