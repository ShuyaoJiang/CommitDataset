[+++ b/ci/images/spring-boot-jdk10-ci-image/Dockerfile, +FROM openjdk:10-ea32-jdk, +, +RUN apt-get update && \, +    apt-get install -y git && \, +    apt-get install -y libxml2-utils && \, +    apt-get install -y jq, +, +ADD https://raw.githubusercontent.com/spring-io/concourse-java-scripts/v0.0.2/concourse-java.sh /opt/, +, +ENV DOCKER_VERSION=17.05.0-ce \, +    ENTRYKIT_VERSION=0.4.0, +, +RUN apt-get update && \, +    apt-get install -y curl && \, +	apt-get install -y libudev1 && \, +	apt-get install -y iptables && \, +    curl https://get.docker.com/builds/Linux/x86_64/docker-${DOCKER_VERSION}.tgz | tar zx && \, +    mv /docker/* /bin/ && chmod +x /bin/docker*, +, +# Install entrykit, +RUN curl -L https://github.com/progrium/entrykit/releases/download/v${ENTRYKIT_VERSION}/entrykit_${ENTRYKIT_VERSION}_Linux_x86_64.tgz | tar zx && \, +    chmod +x entrykit && \, +    mv entrykit /bin/entrykit && \, +    entrykit --symlink, +, +ADD https://raw.githubusercontent.com/spring-projects/spring-boot/master/ci/images/docker-lib.sh /docker-lib.sh, +, +ENTRYPOINT [ \, +	"switch", \, +		"shell=/bin/sh", "--", \, +	"codep", \, +		"/bin/docker daemon" \, +], +++ b/ci/images/spring-boot-jdk10-ci-image/Dockerfile, +FROM openjdk:10-ea32-jdk, +, +RUN apt-get update && \, +    apt-get install -y git && \, +    apt-get install -y libxml2-utils && \, +    apt-get install -y jq, +, +ADD https://raw.githubusercontent.com/spring-io/concourse-java-scripts/v0.0.2/concourse-java.sh /opt/, +, +ENV DOCKER_VERSION=17.05.0-ce \, +    ENTRYKIT_VERSION=0.4.0, +, +RUN apt-get update && \, +    apt-get install -y curl && \, +	apt-get install -y libudev1 && \, +	apt-get install -y iptables && \, +    curl https://get.docker.com/builds/Linux/x86_64/docker-${DOCKER_VERSION}.tgz | tar zx && \, +    mv /docker/* /bin/ && chmod +x /bin/docker*, +, +# Install entrykit, +RUN curl -L https://github.com/progrium/entrykit/releases/download/v${ENTRYKIT_VERSION}/entrykit_${ENTRYKIT_VERSION}_Linux_x86_64.tgz | tar zx && \, +    chmod +x entrykit && \, +    mv entrykit /bin/entrykit && \, +    entrykit --symlink, +, +ADD https://raw.githubusercontent.com/spring-projects/spring-boot/master/ci/images/docker-lib.sh /docker-lib.sh, +, +ENTRYPOINT [ \, +	"switch", \, +		"shell=/bin/sh", "--", \, +	"codep", \, +		"/bin/docker daemon" \, +], +++ b/ci/pipeline.yml, +- name: spring-boot-jdk10-ci-image, +  type: docker-image, +  source:, +    repository: ((docker-hub-organization))/spring-boot-jdk10-ci-image, +    username: ((docker-hub-username)), +    password: ((docker-hub-password)), +    tag: ((branch)), +  - put: spring-boot-jdk10-ci-image, +    params:, +      build: ci-images-git-repo/ci/images/spring-boot-jdk10-ci-image, +- name: jdk10-build, +  serial: true, +  public: true, +  plan:, +  - get: spring-boot-jdk10-ci-image, +  - get: git-repo, +    trigger: true, +  - do:, +    - task: build-project, +      privileged: true, +      timeout: 1h30m, +      image: spring-boot-jdk10-ci-image, +      file: git-repo/ci/tasks/build-project.yml, +    - aggregate:, +      - task: build-samples, +        timeout: 1h30m, +        image: spring-boot-jdk10-ci-image, +        file: git-repo/ci/tasks/build-samples.yml, +      - task: build-integration-tests, +        timeout: 1h30m, +        image: spring-boot-jdk10-ci-image]