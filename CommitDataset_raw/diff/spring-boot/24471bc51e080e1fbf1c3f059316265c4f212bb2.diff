[+++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/endpoint/EnvironmentEndpoint.java, +import java.util.Collections;, +			Set<PropertySource<?>> nested = getNestedPropertySources((CompositePropertySource) source);, +	@SuppressWarnings("unchecked"), +	private Set<PropertySource<?>> getNestedPropertySources(CompositePropertySource source) {, +		try {, +			Field field = ReflectionUtils.findField(CompositePropertySource.class,, +					"propertySources");, +			field.setAccessible(true);, +			return (Set<PropertySource<?>>) field.get(source);, +		}, +		catch (Exception ex) {, +			return Collections.emptySet();, +		}, +	}, +, +++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/endpoint/EnvironmentEndpoint.java, +import java.util.Collections;, +			Set<PropertySource<?>> nested = getNestedPropertySources((CompositePropertySource) source);, +	@SuppressWarnings("unchecked"), +	private Set<PropertySource<?>> getNestedPropertySources(CompositePropertySource source) {, +		try {, +			Field field = ReflectionUtils.findField(CompositePropertySource.class,, +					"propertySources");, +			field.setAccessible(true);, +			return (Set<PropertySource<?>>) field.get(source);, +		}, +		catch (Exception ex) {, +			return Collections.emptySet();, +		}, +	}, +, +++ b/spring-boot-actuator/src/test/java/org/springframework/boot/actuate/autoconfigure/EndpointMvcIntegrationTests.java, + * Copyright 2012-2014 the original author or authors., +import org.springframework.boot.actuate.endpoint.Endpoint;, + * Integration tests for MVC {@link Endpoint}s., + * ]