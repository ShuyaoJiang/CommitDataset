[+++ b/spring-boot/src/main/java/org/springframework/boot/context/embedded/EmbeddedWebApplicationContext.java, +			if (ServletListenerRegistrationBean.isSupportedType(listener), +					&& !filterRegistrations.contains(listener)) {, +++ b/spring-boot/src/main/java/org/springframework/boot/context/embedded/EmbeddedWebApplicationContext.java, +			if (ServletListenerRegistrationBean.isSupportedType(listener), +					&& !filterRegistrations.contains(listener)) {, +++ b/spring-boot/src/main/java/org/springframework/boot/context/embedded/RegistrationBean.java, + * Base class for Servlet 3.0+ based registration beans., + * @see ServletListenerRegistrationBean, +++ b/spring-boot/src/main/java/org/springframework/boot/context/embedded/EmbeddedWebApplicationContext.java, +			if (ServletListenerRegistrationBean.isSupportedType(listener), +					&& !filterRegistrations.contains(listener)) {, +++ b/spring-boot/src/main/java/org/springframework/boot/context/embedded/RegistrationBean.java, + * Base class for Servlet 3.0+ based registration beans., + * @see ServletListenerRegistrationBean, +++ b/spring-boot/src/main/java/org/springframework/boot/context/embedded/ServletListenerRegistrationBean.java, +import java.util.Collections;, +import java.util.HashSet;, +import java.util.Set;, +import javax.servlet.ServletContextAttributeListener;, +import javax.servlet.ServletContextListener;, +import javax.servlet.ServletRequestAttributeListener;, +import javax.servlet.ServletRequestListener;, +import javax.servlet.http.HttpSessionAttributeListener;, +import javax.servlet.http.HttpSessionListener;, +, +import org.springframework.util.Assert;, +import org.springframework.util.ClassUtils;, + * A {@link ServletContextInitializer} to register {@link EventListener}s in a Servlet, + * 3.0+ container. Similar to the {@link ServletContext#addListener(EventListener), + * registration} features provided by {@link ServletContext} but with a Spring Bean, + * friendly design., + * , + * This bean can be used to register the following types of listener:, + * <ul>, + * <li>{@link ServletContextAttributeListener}</li>, + * <li>{@link ServletRequestListener}</li>, + * <li>{@link ServletRequestAttributeListener}</li>, + * <li>{@link HttpSessionAttributeListener}</li>, + * <li>{@link HttpSessionListener}</li>, + * <li>{@link ServletContextListener}</li>, + * </ul>, + * @author Phillip Webb, + * @param <T> the type of listener, +	private static final Set<Class<?>> SUPPORTED_TYPES;, +	static {, +		Set<Class<?>> types = new HashSet<Class<?>>();, +		types.add(ServletContextAttributeListener.class);, +		types.add(ServletRequestListener.class);, +		types.add(ServletRequestAttributeListener.class);, +		types.add(HttpSessionAttributeListener.class);, +		types.add(HttpSessionListener.class);, +		types.add(ServletContextListener.class);, +		SUPPORTED_TYPES = Collections.unmodifiableSet(types);, +	}, +, +	 * Create a new {@link ServletListenerRegistrationBean} instance., +	 */, +	public ServletListenerRegistrationBean() {, +	}, +, +	/**, +	 * Create a new {@link ServletListenerRegistrationBean} instance., +		Assert.notNull(listener, "Listener must not be null");, +		Assert.isTrue(isSupportedType(listener), "EventLisener is not a supported type");, +	 * Set the listener that will be registered., +		Assert.notNull(listener, "Listener must not be null");, +		Assert.isTrue(isSupportedType(listener), "EventLisener is not a supported type");, +	/**, +	 * Returns {@code true} if the specified listener is one of the supported types., +	 * @param listener the listener to test, +	 * @return if the listener is of a supported type, +	 */, +	public static boolean isSupportedType(EventListener listener) {, +		for (Class<?> type : SUPPORTED_TYPES) {, +			if (ClassUtils.isAssignableValue(type, listener)) {, +				return true;, +			}, +		}, +		return false;, +	}, +, +++ b/spring-boot/src/main/java/org/springframework/boot/context/embedded/EmbeddedWebApplicationContext.java, +			if (ServletListenerRegistrationBean.isSupportedType(listener), +					&& !filterRegistrations.contains(listener)) {, +++ b/spring-boot/src/main/java/org/springframework/boot/context/embedded/RegistrationBean.java, + * Base class for Servlet 3.0+ based registration beans., + * @see ServletListenerRegistrationBean, +++ b/spring-boot/src/main/java/org/springframework/boot/context/embedded/ServletListenerRegistrationBean.java, +import java.util.Collections;, +import java.util.HashSet;, +import java.util.Set;, +import javax.servlet.ServletContextAttributeListener;, +import javax.servlet.ServletContextListener;, +import javax.servlet.ServletRequestAttributeListener;, +import javax.servlet.ServletRequestListener;, +import javax.servlet.http.HttpSessionAttributeListener;, +import javax.servlet.http.HttpSessionListener;, +, +import org.springframework.util.Assert;]