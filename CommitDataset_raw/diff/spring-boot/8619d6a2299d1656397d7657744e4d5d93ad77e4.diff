[+++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/autoconfigure/EndpointWebMvcAutoConfiguration.java, +							.getEmbeddedWebServer() != null) {, +++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/autoconfigure/EndpointWebMvcAutoConfiguration.java, +							.getEmbeddedWebServer() != null) {, +++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/autoconfigure/EndpointWebMvcChildContextConfiguration.java, +import org.springframework.boot.context.embedded.EmbeddedWebServer;, + * {@link EmbeddedWebServer} running on a different port is required., +++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/autoconfigure/EndpointWebMvcAutoConfiguration.java, +							.getEmbeddedWebServer() != null) {, +++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/autoconfigure/EndpointWebMvcChildContextConfiguration.java, +import org.springframework.boot.context.embedded.EmbeddedWebServer;, + * {@link EmbeddedWebServer} running on a different port is required., +++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/endpoint/TomcatPublicMetrics.java, +import org.springframework.boot.context.embedded.EmbeddedWebServer;, +		EmbeddedWebServer embeddedWebServer = applicationContext, +				.getEmbeddedWebServer();, +		if (embeddedWebServer instanceof TomcatEmbeddedServletContainer) {, +			return getManager((TomcatEmbeddedServletContainer) embeddedWebServer);, +++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/autoconfigure/EndpointWebMvcAutoConfiguration.java, +							.getEmbeddedWebServer() != null) {, +++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/autoconfigure/EndpointWebMvcChildContextConfiguration.java, +import org.springframework.boot.context.embedded.EmbeddedWebServer;, + * {@link EmbeddedWebServer} running on a different port is required., +++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/endpoint/TomcatPublicMetrics.java, +import org.springframework.boot.context.embedded.EmbeddedWebServer;, +		EmbeddedWebServer embeddedWebServer = applicationContext, +				.getEmbeddedWebServer();, +		if (embeddedWebServer instanceof TomcatEmbeddedServletContainer) {, +			return getManager((TomcatEmbeddedServletContainer) embeddedWebServer);, +++ b/spring-boot-actuator/src/test/java/org/springframework/boot/actuate/autoconfigure/EndpointWebMvcAutoConfigurationTests.java, +import org.springframework.boot.context.embedded.EmbeddedWebServer;, +import org.springframework.boot.context.embedded.EmbeddedWebServerException;, +			this.thrown.expect(EmbeddedWebServerException.class);, +		private EmbeddedWebServer servletContainer;, +		public EmbeddedWebServer getServletContainer() {, +++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/autoconfigure/EndpointWebMvcAutoConfiguration.java, +							.getEmbeddedWebServer() != null) {, +++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/autoconfigure/EndpointWebMvcChildContextConfiguration.java, +import org.springframework.boot.context.embedded.EmbeddedWebServer;, + * {@link EmbeddedWebServer} running on a different port is required., +++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/endpoint/TomcatPublicMetrics.java, +import org.springframework.boot.context.embedded.EmbeddedWebServer;, +		EmbeddedWebServer embeddedWebServer = applicationContext, +				.getEmbeddedWebServer();, +		if (embeddedWebServer instanceof TomcatEmbeddedServletContainer) {, +			return getManager((TomcatEmbeddedServletContainer) embeddedWebServer);, +++ b/spring-boot-actuator/src/test/java/org/springframework/boot/actuate/autoconfigure/EndpointWebMvcAutoConfigurationTests.java, +import org.springframework.boot.context.embedded.EmbeddedWebServer;, +import org.springframework.boot.context.embedded.EmbeddedWebServerException;, +			this.thrown.expect(EmbeddedWebServerException.class);, +		private EmbeddedWebServer servletContainer;, +		public EmbeddedWebServer getServletContainer() {, +++ b/spring-boot-actuator/src/test/java/org/springframework/boot/actuate/cloudfoundry/SkipSslVerificationHttpRequestFactoryTests.java, +import org.springframework.boot.context.embedded.EmbeddedWebServer;, +		EmbeddedWebServer container = factory.getEmbeddedServletContainer(, +++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/autoconfigure/EndpointWebMvcAutoConfiguration.java, +							.getEmbeddedWebServer() != null) {, +++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/autoconfigure/EndpointWebMvcChildContextConfiguration.java, +import org.springframework.boot.context.embedded.EmbeddedWebServer;, + * {@link EmbeddedWebServer} running on a different port is required., +++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/endpoint/TomcatPublicMetrics.java, +import org.springframework.boot.context.embedded.EmbeddedWebServer;, +		EmbeddedWebServer embeddedWebServer = applicationContext, +				.getEmbeddedWebServer();, +		if (embeddedWebServer instanceof TomcatEmbeddedServletContainer) {, +			return getManager((TomcatEmbeddedServletContainer) embeddedWebServer);, +++ b/spring-boot-actuator/src/test/java/org/springframework/boot/actuate/autoconfigure/EndpointWebMvcAutoConfigurationTests.java, +import org.springframework.boot.context.embedded.EmbeddedWebServer;, +import org.springframework.boot.context.embedded.EmbeddedWebServerException;, +			this.thrown.expect(EmbeddedWebServerException.class);, +		private EmbeddedWebServer servletContainer;, +		public EmbeddedWebServer getServletContainer() {, +++ b/spring-boot-actuator/src/test/java/org/springframework/boot/actuate/cloudfoundry/SkipSslVerificationHttpRequestFactoryTests.java, +import org.springframework.boot.context.embedded.EmbeddedWebServer;, +		EmbeddedWebServer container = factory.getEmbeddedServletContainer(, +++ b/spring-boot-autoconfigure/src/test/java/org/springframework/boot/autoconfigure/admin/SpringApplicationAdminJmxAutoConfigurationTests.java, +				.getEmbeddedWebServer().getPort();, +++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/autoconfigure/EndpointWebMvcAutoConfiguration.java, +							.getEmbeddedWebServer() != null) {, +++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/autoconfigure/EndpointWebMvcChildContextConfiguration.java, +import org.springframework.boot.context.embedded.EmbeddedWebServer;, + * {@link EmbeddedWebServer} running on a different port is required., +++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/endpoint/TomcatPublicMetrics.java, +import org.springframework.boot.context.embedded.EmbeddedWebServer;, +		EmbeddedWebServer embeddedWebServer = applicationContext, +				.getEmbeddedWebServer();, +		if (embeddedWebServer instanceof TomcatEmbeddedServletContainer) {, +			return getManager((TomcatEmbeddedServletContainer) embeddedWebServer);, +++ b/spring-boot-actuator/src/test/java/org/springframework/boot/actuate/autoconfigure/EndpointWebMvcAutoConfigurationTests.java, +import org.springframework.boot.context.embedded.EmbeddedWebServer;, +import org.springframework.boot.context.embedded.EmbeddedWebServerException;, +			this.thrown.expect(EmbeddedWebServerException.class);, +		private EmbeddedWebServer servletContainer;, +		public EmbeddedWebServer getServletContainer() {, +++ b/spring-boot-actuator/src/test/java/org/springframework/boot/actuate/cloudfoundry/SkipSslVerificationHttpRequestFactoryTests.java, +import org.springframework.boot.context.embedded.EmbeddedWebServer;, +		EmbeddedWebServer container = factory.getEmbeddedServletContainer(, +++ b/spring-boot-autoconfigure/src/test/java/org/springframework/boot/autoconfigure/admin/SpringApplicationAdminJmxAutoConfigurationTests.java, +				.getEmbeddedWebServer().getPort();, +++ b/spring-boot-autoconfigure/src/test/java/org/springframework/boot/autoconfigure/mustache/MustacheAutoConfigurationIntegrationTests.java]