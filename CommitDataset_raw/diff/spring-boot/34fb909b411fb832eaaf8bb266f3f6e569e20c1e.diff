[+++ b/spring-boot-devtools/src/main/java/org/springframework/boot/devtools/restart/RestartApplicationListener.java, +				Restarter.getInstance().remove(((ApplicationFailedEvent) event).getApplicationContext());, +++ b/spring-boot-devtools/src/main/java/org/springframework/boot/devtools/restart/RestartApplicationListener.java, +				Restarter.getInstance().remove(((ApplicationFailedEvent) event).getApplicationContext());, +++ b/spring-boot-devtools/src/main/java/org/springframework/boot/devtools/restart/Restarter.java, +import java.util.concurrent.CopyOnWriteArrayList;, +import org.springframework.util.CollectionUtils;, +	private final List<ConfigurableApplicationContext> rootContexts = new CopyOnWriteArrayList<ConfigurableApplicationContext>();, +			if (!CollectionUtils.isEmpty(this.rootContexts)) {, +				for (ConfigurableApplicationContext rootContext : this.rootContexts) {, +					rootContext.close();, +				}, +				this.rootContexts.clear();, +		this.rootContexts.add(applicationContext);, +	}, +, +	void remove(ConfigurableApplicationContext applicationContext) {, +		if (applicationContext != null) {, +			this.rootContexts.remove(applicationContext);, +		}, +++ b/spring-boot-devtools/src/main/java/org/springframework/boot/devtools/restart/RestartApplicationListener.java, +				Restarter.getInstance().remove(((ApplicationFailedEvent) event).getApplicationContext());, +++ b/spring-boot-devtools/src/main/java/org/springframework/boot/devtools/restart/Restarter.java, +import java.util.concurrent.CopyOnWriteArrayList;, +import org.springframework.util.CollectionUtils;, +	private final List<ConfigurableApplicationContext> rootContexts = new CopyOnWriteArrayList<ConfigurableApplicationContext>();, +			if (!CollectionUtils.isEmpty(this.rootContexts)) {, +				for (ConfigurableApplicationContext rootContext : this.rootContexts) {, +					rootContext.close();, +				}, +				this.rootContexts.clear();, +		this.rootContexts.add(applicationContext);, +	}, +, +	void remove(ConfigurableApplicationContext applicationContext) {, +		if (applicationContext != null) {, +			this.rootContexts.remove(applicationContext);, +		}, +++ b/spring-boot-devtools/src/test/java/org/springframework/boot/devtools/restart/RestartApplicationListenerTests.java, +import java.util.List;, +, +		assertThat((List<?>) ReflectionTestUtils.getField(Restarter.getInstance(),, +				"rootContexts")).isNotEmpty();, +		assertThat((List<?>) ReflectionTestUtils.getField(Restarter.getInstance(),, +				"rootContexts")).isEmpty();]