[+++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaAutoConfiguration.java, +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaAutoConfiguration.java, +++ b/spring-boot-samples/spring-boot-sample-data-jpa/pom.xml, +			<groupId>${project.groupId}</groupId>, +			<artifactId>spring-boot</artifactId>, +			<classifier>tests</classifier>, +			<version>${spring-boot.version}</version>, +		</dependency>, +		<dependency>, +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaAutoConfiguration.java, +++ b/spring-boot-samples/spring-boot-sample-data-jpa/pom.xml, +			<groupId>${project.groupId}</groupId>, +			<artifactId>spring-boot</artifactId>, +			<classifier>tests</classifier>, +			<version>${spring-boot.version}</version>, +		</dependency>, +		<dependency>, +++ /dev/null, +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaAutoConfiguration.java, +++ b/spring-boot-samples/spring-boot-sample-data-jpa/pom.xml, +			<groupId>${project.groupId}</groupId>, +			<artifactId>spring-boot</artifactId>, +			<classifier>tests</classifier>, +			<version>${spring-boot.version}</version>, +		</dependency>, +		<dependency>, +++ /dev/null, +++ b/spring-boot-samples/spring-boot-sample-data-jpa/src/test/java/org/springframework/boot/sample/data/jpa/SampleDataJpaApplicationTests.java, +import org.junit.Before;, +import org.junit.Test;, +import org.junit.runner.RunWith;, +import org.springframework.beans.factory.annotation.Autowired;, +import org.springframework.boot.test.SpringApplicationContextLoader;, +import org.springframework.test.context.ActiveProfiles;, +import org.springframework.test.context.ContextConfiguration;, +import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;, +import org.springframework.test.context.web.WebAppConfiguration;, +import org.springframework.test.web.servlet.MockMvc;, +import org.springframework.test.web.servlet.setup.MockMvcBuilders;, +import org.springframework.web.context.WebApplicationContext;, +, +@RunWith(SpringJUnit4ClassRunner.class), +@ContextConfiguration(classes = SampleDataJpaApplication.class, loader=SpringApplicationContextLoader.class), +@WebAppConfiguration, +@ActiveProfiles("scratch") // Separate profile for web tests to avoid clashing databases, +public class SampleDataJpaApplicationTests {, +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaAutoConfiguration.java, +++ b/spring-boot-samples/spring-boot-sample-data-jpa/pom.xml, +			<groupId>${project.groupId}</groupId>, +			<artifactId>spring-boot</artifactId>, +			<classifier>tests</classifier>, +			<version>${spring-boot.version}</version>, +		</dependency>, +		<dependency>, +++ /dev/null, +++ b/spring-boot-samples/spring-boot-sample-data-jpa/src/test/java/org/springframework/boot/sample/data/jpa/SampleDataJpaApplicationTests.java, +import org.junit.Before;, +import org.junit.Test;, +import org.junit.runner.RunWith;, +import org.springframework.beans.factory.annotation.Autowired;, +import org.springframework.boot.test.SpringApplicationContextLoader;, +import org.springframework.test.context.ActiveProfiles;, +import org.springframework.test.context.ContextConfiguration;, +import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;, +import org.springframework.test.context.web.WebAppConfiguration;, +import org.springframework.test.web.servlet.MockMvc;, +import org.springframework.test.web.servlet.setup.MockMvcBuilders;, +import org.springframework.web.context.WebApplicationContext;, +, +@RunWith(SpringJUnit4ClassRunner.class), +@ContextConfiguration(classes = SampleDataJpaApplication.class, loader=SpringApplicationContextLoader.class), +@WebAppConfiguration, +@ActiveProfiles("scratch") // Separate profile for web tests to avoid clashing databases, +public class SampleDataJpaApplicationTests {, +++ b/spring-boot-samples/spring-boot-sample-data-jpa/src/test/java/org/springframework/boot/sample/data/jpa/service/CityRepositoryIntegrationTests.java, +import static org.hamcrest.Matchers.is;, +import static org.hamcrest.Matchers.greaterThan;, +import static org.junit.Assert.assertThat;, +, +import org.junit.runner.RunWith;, +import org.springframework.boot.sample.data.jpa.SampleDataJpaApplication;, +import org.springframework.boot.test.SpringApplicationContextLoader;, +import org.springframework.test.context.ContextConfiguration;, +import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;, +@RunWith(SpringJUnit4ClassRunner.class), +@ContextConfiguration(classes = SampleDataJpaApplication.class, loader=SpringApplicationContextLoader.class), +public class CityRepositoryIntegrationTests {, +		assertThat(cities.getTotalElements(), is(greaterThan(20L)));, +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaAutoConfiguration.java, +++ b/spring-boot-samples/spring-boot-sample-data-jpa/pom.xml, +			<groupId>${project.groupId}</groupId>, +			<artifactId>spring-boot</artifactId>, +			<classifier>tests</classifier>, +			<version>${spring-boot.version}</version>, +		</dependency>, +		<dependency>, +++ /dev/null, +++ b/spring-boot-samples/spring-boot-sample-data-jpa/src/test/java/org/springframework/boot/sample/data/jpa/SampleDataJpaApplicationTests.java, +import org.junit.Before;, +import org.junit.Test;]