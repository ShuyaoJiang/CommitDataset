[+++ b/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration.java, +import org.springframework.boot.autoconfigure.template.TemplateAvailabilityProviders;, +import org.springframework.context.ApplicationContext;, + * @author Bruce Brouwer, +		public WelcomePageHandlerMapping welcomePageHandlerMapping(, +				ApplicationContext applicationContext) {, +			return new WelcomePageHandlerMapping(, +					new TemplateAvailabilityProviders(applicationContext),, +					applicationContext, getWelcomePage(),, +++ b/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration.java, +import org.springframework.boot.autoconfigure.template.TemplateAvailabilityProviders;, +import org.springframework.context.ApplicationContext;, + * @author Bruce Brouwer, +		public WelcomePageHandlerMapping welcomePageHandlerMapping(, +				ApplicationContext applicationContext) {, +			return new WelcomePageHandlerMapping(, +					new TemplateAvailabilityProviders(applicationContext),, +					applicationContext, getWelcomePage(),, +++ b/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/servlet/WelcomePageHandlerMapping.java, +import org.springframework.boot.autoconfigure.template.TemplateAvailabilityProviders;, +import org.springframework.context.ApplicationContext;, + * @author Bruce Brouwer, +	WelcomePageHandlerMapping(TemplateAvailabilityProviders templateAvailabilityProviders,, +			ApplicationContext applicationContext, Optional<Resource> welcomePage,, +			String staticPathPattern) {, +		if (welcomeTemplateExists(templateAvailabilityProviders, applicationContext)) {, +			logger.info("Adding welcome page template: index");, +			setRootViewName("index");, +		}, +		else if (welcomePage.isPresent() && "/**".equals(staticPathPattern)) {, +			logger.info("Adding welcome page: " + welcomePage);, +			setRootViewName("forward:index.html");, +		}, +	}, +, +	private boolean welcomeTemplateExists(, +			TemplateAvailabilityProviders templateAvailabilityProviders,, +			ApplicationContext applicationContext) {, +		return templateAvailabilityProviders.getProvider("index",, +				applicationContext) != null;, +	}, +, +	private void setRootViewName(final String viewName) {, +		controller.setViewName(viewName);]