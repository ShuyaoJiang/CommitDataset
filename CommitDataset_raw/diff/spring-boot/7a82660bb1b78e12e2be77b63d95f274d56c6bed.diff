[+++ b/spring-boot-tools/spring-boot-test-support/src/main/java/org/springframework/boot/testsupport/runner/classpath/ModifiedClassPathRunner.java, +import java.lang.management.ManagementFactory;, +import java.util.stream.Stream;, +		ClassLoader classLoader = this.getClass().getClassLoader();, +	private URL[] extractUrls(ClassLoader classLoader) throws Exception {, +		doExtractUrls(classLoader).forEach((URL url) -> {, +		});, +	private Stream<URL> doExtractUrls(ClassLoader classLoader) throws Exception {, +		if (classLoader instanceof URLClassLoader) {, +			return Stream.of(((URLClassLoader) classLoader).getURLs());, +		}, +		return Stream.of(ManagementFactory.getRuntimeMXBean().getClassPath(), +				.split(File.pathSeparator)).map(this::toURL);, +	}, +, +	private URL toURL(String entry) {, +		try {, +			return new File(entry).toURI().toURL();, +		}, +		catch (Exception ex) {, +			throw new IllegalArgumentException(ex);, +		}, +	}, +, +	private List<URL> extractUrlsFromManifestClassPath(URL booterJar) {, +		try {, +		}, +		catch (Exception ex) {, +			throw new RuntimeException(ex);, +		}]