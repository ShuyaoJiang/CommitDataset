[+++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/ServerProperties.java, +		private String portHeader = "x-forwarded-port";, +		private String remoteIpHeader = "x-forwarded-for";, +					&& StringUtils.hasText(protocolHeader)) {, +				// The internal proxies default to a white list of "safe" internal IP, +				// addresses, +				// ... so it's safe to add this valve by default., +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/ServerProperties.java, +		private String portHeader = "x-forwarded-port";, +		private String remoteIpHeader = "x-forwarded-for";, +					&& StringUtils.hasText(protocolHeader)) {, +				// The internal proxies default to a white list of "safe" internal IP, +				// addresses, +				// ... so it's safe to add this valve by default., +++ b/spring-boot-docs/src/main/asciidoc/howto.adoc, +Your app might need to send 302 redirects, or render UI templates with, +absolute links to itself, or hypermedia links back to itself in the, +case of a RESTful service. If the app is behind a proxy, the caller, +wants a link to the proxy not to the physical address of the app, so, +something has to be done in the backend. Typically this is handled via, +a contract with the proxy, which will add headers to tell the back end, +how to construct links to itself. If the proxy adds conventional, +headers (most do this out of the box) the absolute links should be, +rendered correctly by default using the Tomcat server., +, +Spring Boot using Tomcat automatically adds a `RemoteIpValve`. This, +transparently takes the standard `x-forwarded-for` and, +`x-forwarded-proto` headers and uses them to change local URLs created, +in the `HttpServletRequest`. You can configure the header names in, +Spring Boot and the valve is switched on unless one or both of these, +properties is empty. These values are the defaults and are the, +conventional values used by most proxies, so you don't need to set, +them unless you need different values:, +NOTE: You can trust all proxies by setting the `internal_proxies` to empty (but don't do this in production)., +, +You can take complete control of the configuration of the, +`RemoteIpValve` by switching the automatic one off (i.e. set one of, +the headers to empty) and adding a new valve instance in a, +`TomcatEmbeddedServletContainerFactory` bean.]