[+++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/jdbc/DataSourceAutoConfiguration.java, +import org.apache.commons.logging.Log;, +import org.apache.commons.logging.LogFactory;, +, +import org.springframework.beans.factory.NoSuchBeanDefinitionException;, +import org.springframework.beans.factory.config.BeanDefinition;, +import org.springframework.beans.factory.config.ConfigurableListableBeanFactory;, +	private static final Log logger = LogFactory, +			.getLog(DataSourceAutoConfiguration.class);, +, +	/**, +	 * Determines if the {@code dataSource} being used by Spring was created from, +	 * {@link EmbeddedDataSourceConfiguration}., +	 * @param beanFactory the bean factory, +	 * @return true if the data source was auto-configured., +	 */, +	public static boolean containsAutoConfiguredDataSource(, +			ConfigurableListableBeanFactory beanFactory) {, +		try {, +			BeanDefinition beanDefinition = beanFactory.getBeanDefinition("dataSource");, +			return EmbeddedDataSourceConfiguration.class.getName(), +					.equals(beanDefinition.getFactoryBeanName());, +		}, +		catch (NoSuchBeanDefinitionException ex) {, +			return false;, +		}, +	}, +, +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/jdbc/DataSourceAutoConfiguration.java, +import org.apache.commons.logging.Log;, +import org.apache.commons.logging.LogFactory;, +, +import org.springframework.beans.factory.NoSuchBeanDefinitionException;, +import org.springframework.beans.factory.config.BeanDefinition;, +import org.springframework.beans.factory.config.ConfigurableListableBeanFactory;, +	private static final Log logger = LogFactory, +			.getLog(DataSourceAutoConfiguration.class);, +, +	/**, +	 * Determines if the {@code dataSource} being used by Spring was created from, +	 * {@link EmbeddedDataSourceConfiguration}., +	 * @param beanFactory the bean factory, +	 * @return true if the data source was auto-configured., +	 */, +	public static boolean containsAutoConfiguredDataSource(, +			ConfigurableListableBeanFactory beanFactory) {, +		try {, +			BeanDefinition beanDefinition = beanFactory.getBeanDefinition("dataSource");, +			return EmbeddedDataSourceConfiguration.class.getName(), +					.equals(beanDefinition.getFactoryBeanName());, +		}, +		catch (NoSuchBeanDefinitionException ex) {, +			return false;, +		}, +	}, +, +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/jdbc/DataSourceInitializer.java, + * @since 1.1.0]