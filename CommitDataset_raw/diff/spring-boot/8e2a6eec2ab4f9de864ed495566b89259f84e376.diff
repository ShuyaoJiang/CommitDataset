[+++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/health/SimpleHealthIndicator.java, +import java.util.HashMap;, +	private static Map<String, String> queries = new HashMap<String, String>();, +, +	static {, +		queries.put("HSQL Database Engine",, +				"SELECT COUNT(*) FROM INFORMATION_SCHEMA.SYSTEM_USERS");, +		queries.put("Oracle", "SELECT 'Hello' from DUAL");, +		queries.put("Apache Derby", "SELECT 1 FROM SYSIBM.SYSDUMMY1");, +	}, +, +	private static String DEFAULT_QUERY = "SELECT 'Hello'";, +, +	private String query = null;, +		String product = "unknown";, +				product = this.jdbcTemplate.execute(new ConnectionCallback<String>() {, +			String query = detectQuery(product);, +			if (StringUtils.hasText(query)) {, +							this.jdbcTemplate.queryForObject(query, String.class));, +	protected String detectQuery(String product) {, +		String query = this.query;, +		if (!StringUtils.hasText(query)) {, +			query = queries.get(product);, +		}, +		if (!StringUtils.hasText(query)) {, +			query = DEFAULT_QUERY;, +		}, +		return query;, +	}, +, +++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/health/SimpleHealthIndicator.java, +import java.util.HashMap;, +	private static Map<String, String> queries = new HashMap<String, String>();, +, +	static {, +		queries.put("HSQL Database Engine",, +				"SELECT COUNT(*) FROM INFORMATION_SCHEMA.SYSTEM_USERS");, +		queries.put("Oracle", "SELECT 'Hello' from DUAL");, +		queries.put("Apache Derby", "SELECT 1 FROM SYSIBM.SYSDUMMY1");, +	}, +, +	private static String DEFAULT_QUERY = "SELECT 'Hello'";, +, +	private String query = null;, +		String product = "unknown";, +				product = this.jdbcTemplate.execute(new ConnectionCallback<String>() {, +			String query = detectQuery(product);, +			if (StringUtils.hasText(query)) {, +							this.jdbcTemplate.queryForObject(query, String.class));, +	protected String detectQuery(String product) {, +		String query = this.query;, +		if (!StringUtils.hasText(query)) {, +			query = queries.get(product);, +		}, +		if (!StringUtils.hasText(query)) {, +			query = DEFAULT_QUERY;, +		}, +		return query;, +	}, +, +++ b/spring-boot-actuator/src/test/java/org/springframework/boot/actuate/health/SimpleHealthIndicatorTests.java]