[+++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/health/MailHealthIndicator.java, +		this.mailSender.testConnection();, +++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/health/MailHealthIndicator.java, +		this.mailSender.testConnection();, +++ b/spring-boot-actuator/src/test/java/org/springframework/boot/actuate/health/MailHealthIndicatorTests.java, +, +import static org.junit.Assert.assertNotNull;, +import static org.junit.Assert.assertTrue;, +import static org.mockito.Mockito.doThrow;, + * @author Stephane Nicoll, +	public void smtpIsDown() throws MessagingException {, +		doThrow(new MessagingException("A test exception")).when(this.mailSender).testConnection();, +		Object errorMessage = health.getDetails().get("error");, +		assertNotNull(errorMessage);, +		assertTrue(errorMessage.toString().contains("A test exception"));]