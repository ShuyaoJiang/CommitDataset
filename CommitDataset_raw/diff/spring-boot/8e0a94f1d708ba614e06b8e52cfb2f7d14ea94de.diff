[+++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/cache/CacheAutoConfiguration.java, +import org.springframework.boot.autoconfigure.AutoConfigureBefore;, +import org.springframework.boot.autoconfigure.data.jpa.EntityManagerFactoryDependsOnPostProcessor;, +import org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration;, +import org.springframework.orm.jpa.AbstractEntityManagerFactoryBean;, +import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;, +@AutoConfigureBefore(HibernateJpaAutoConfiguration.class), +	@Configuration, +	@ConditionalOnClass(LocalContainerEntityManagerFactoryBean.class), +	@ConditionalOnBean(AbstractEntityManagerFactoryBean.class), +	protected static class CacheManagerJpaDependencyConfiguration, +			extends EntityManagerFactoryDependsOnPostProcessor {, +, +		public CacheManagerJpaDependencyConfiguration() {, +			super("cacheManager");, +		}, +, +	}, +, +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/cache/CacheAutoConfiguration.java, +import org.springframework.boot.autoconfigure.AutoConfigureBefore;, +import org.springframework.boot.autoconfigure.data.jpa.EntityManagerFactoryDependsOnPostProcessor;, +import org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration;, +import org.springframework.orm.jpa.AbstractEntityManagerFactoryBean;, +import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;, +@AutoConfigureBefore(HibernateJpaAutoConfiguration.class), +	@Configuration, +	@ConditionalOnClass(LocalContainerEntityManagerFactoryBean.class), +	@ConditionalOnBean(AbstractEntityManagerFactoryBean.class), +	protected static class CacheManagerJpaDependencyConfiguration, +			extends EntityManagerFactoryDependsOnPostProcessor {, +, +		public CacheManagerJpaDependencyConfiguration() {, +			super("cacheManager");, +		}, +, +	}, +, +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/hazelcast/HazelcastAutoConfiguration.java, +import org.springframework.boot.autoconfigure.condition.ConditionalOnBean;, +import org.springframework.boot.autoconfigure.data.jpa.EntityManagerFactoryDependsOnPostProcessor;, +import org.springframework.orm.jpa.AbstractEntityManagerFactoryBean;, +import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;, +	@Configuration, +	@ConditionalOnClass(LocalContainerEntityManagerFactoryBean.class), +	@ConditionalOnBean(AbstractEntityManagerFactoryBean.class), +	protected static class HazelcastInstanceJpaDependencyConfiguration, +			extends EntityManagerFactoryDependsOnPostProcessor {, +, +		public HazelcastInstanceJpaDependencyConfiguration() {, +			super("hazelcastInstance");, +		}, +, +	}, +]