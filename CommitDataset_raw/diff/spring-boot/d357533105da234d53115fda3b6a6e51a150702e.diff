[+++ b/spring-boot/src/main/java/org/springframework/boot/context/embedded/undertow/UndertowEmbeddedServletContainer.java, +import java.net.InetSocketAddress;, +import java.net.SocketAddress;, +import org.xnio.channels.BoundChannel;, +				for (BoundChannel channel : extractChannels()) {, +					ports.add(getPortFromChannel(channel));, +	@SuppressWarnings("unchecked"), +	private List<BoundChannel> extractChannels() {, +		Field channelsField = ReflectionUtils.findField(Undertow.class, "channels");, +		ReflectionUtils.makeAccessible(channelsField);, +		return (List<BoundChannel>) ReflectionUtils, +				.getField(channelsField, this.undertow);, +	private Port getPortFromChannel(BoundChannel channel) {, +		String protocol = ReflectionUtils.findField(channel.getClass(), "ssl") != null ? "https", +				: "http";, +		SocketAddress socketAddress = channel.getLocalAddress();, +		if (socketAddress instanceof InetSocketAddress) {, +			return new Port(((InetSocketAddress) socketAddress).getPort(), protocol);]