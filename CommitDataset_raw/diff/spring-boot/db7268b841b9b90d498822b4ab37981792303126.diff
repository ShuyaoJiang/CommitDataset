[+++ b/spring-boot-project/spring-boot-test/src/main/java/org/springframework/boot/test/web/client/TestRestTemplate.java, +	private static RestTemplate buildRestTemplate(, +			RestTemplateBuilder restTemplateBuilder) {, +		Assert.notNull(restTemplateBuilder, "RestTemplateBuilder must not be null");, +		return restTemplateBuilder.build();, +	}, +, +		if (getRequestFactoryClass(restTemplate).getName(), +	private Class<? extends ClientHttpRequestFactory> getRequestFactoryClass(RestTemplate restTemplate) {, +		ClientHttpRequestFactory requestFactory = restTemplate.getRequestFactory();, +		if (InterceptingClientHttpRequestFactory.class.isAssignableFrom(requestFactory.getClass())) {, +			Field requestFactoryField = ReflectionUtils, +					.findField(RestTemplate.class, "requestFactory");, +			ReflectionUtils.makeAccessible(requestFactoryField);, +			requestFactory = (ClientHttpRequestFactory), +					ReflectionUtils.getField(requestFactoryField, restTemplate);, +		}, +		return requestFactory.getClass();, +		RestTemplate restTemplate = new RestTemplateBuilder(), +				.messageConverters(getRestTemplate().getMessageConverters()), +				.interceptors(getRestTemplate().getInterceptors()), +				.uriTemplateHandler(getRestTemplate().getUriTemplateHandler()), +				.build();]