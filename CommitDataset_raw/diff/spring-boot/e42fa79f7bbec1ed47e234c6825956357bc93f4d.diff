[+++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/security/AuthenticationManagerConfiguration.java, + * Copyright 2012-2015 the original author or authors., +import org.springframework.core.Ordered;, +import org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;, +public class AuthenticationManagerConfiguration {, +	public AuthenticationManager authenticationManager(AuthenticationConfiguration auth) throws Exception {, +		return auth.getAuthenticationManager();, +	@Bean, +	public static BootDefaultingAuthenticationConfigurerAdapter bootDefaultingAuthenticationConfigurerAdapter(SecurityProperties security,, +			List<SecurityPrerequisite> dependencies) {, +		return new BootDefaultingAuthenticationConfigurerAdapter(security);, +	@Order(Ordered.LOWEST_PRECEDENCE - 100), +	private static class BootDefaultingAuthenticationConfigurerAdapter extends GlobalAuthenticationConfigurerAdapter {, +		private final SecurityProperties security;, +		@Autowired, +		public BootDefaultingAuthenticationConfigurerAdapter(SecurityProperties security) {, +			this.security = security;, +		public void init(AuthenticationManagerBuilder auth) throws Exception {, +, +			User user = this.security.getUser();, +			auth, +				.inMemoryAuthentication(), +					.withUser(user.getName()), +						.password(user.getPassword()), +						.roles(roles.toArray(new String[roles.size()]));]