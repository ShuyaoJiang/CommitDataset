[+++ /dev/null, +++ /dev/null, +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/mongo/MongoTemplateAutoConfiguration.java, +import org.springframework.data.mongodb.MongoDbFactory;, +import org.springframework.data.mongodb.core.SimpleMongoDbFactory;, +import org.springframework.data.mongodb.gridfs.GridFsTemplate;, +import org.springframework.util.StringUtils;, +	public MongoTemplate mongoTemplate(MongoDbFactory mongoDbFactory), +			throws UnknownHostException {, +		return new MongoTemplate(mongoDbFactory);, +	}, +, +	@Bean, +	@ConditionalOnMissingBean, +	public MongoDbFactory mongoDbFactory(Mongo mongo) throws Exception {, +		String db = StringUtils.hasText(this.properties.getGridFsDatabase()) ? this.properties, +				.getGridFsDatabase() : this.properties.getMongoClientDatabase();, +, +		return new SimpleMongoDbFactory(mongo, db);, +	}, +, +	@Bean, +	@ConditionalOnMissingBean, +	public GridFsTemplate gridFsTemplate(MongoDbFactory mongoDbFactory,, +			MongoTemplate mongoTemplate) {, +		return new GridFsTemplate(mongoDbFactory, mongoTemplate.getConverter());, +++ /dev/null, +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/mongo/MongoTemplateAutoConfiguration.java, +import org.springframework.data.mongodb.MongoDbFactory;, +import org.springframework.data.mongodb.core.SimpleMongoDbFactory;, +import org.springframework.data.mongodb.gridfs.GridFsTemplate;, +import org.springframework.util.StringUtils;, +	public MongoTemplate mongoTemplate(MongoDbFactory mongoDbFactory), +			throws UnknownHostException {, +		return new MongoTemplate(mongoDbFactory);, +	}, +, +	@Bean, +	@ConditionalOnMissingBean, +	public MongoDbFactory mongoDbFactory(Mongo mongo) throws Exception {, +		String db = StringUtils.hasText(this.properties.getGridFsDatabase()) ? this.properties, +				.getGridFsDatabase() : this.properties.getMongoClientDatabase();, +, +		return new SimpleMongoDbFactory(mongo, db);, +	}, +, +	@Bean, +	@ConditionalOnMissingBean, +	public GridFsTemplate gridFsTemplate(MongoDbFactory mongoDbFactory,, +			MongoTemplate mongoTemplate) {, +		return new GridFsTemplate(mongoDbFactory, mongoTemplate.getConverter());, +++ b/spring-boot-autoconfigure/src/test/java/org/springframework/boot/autoconfigure/mongo/GridFsTemplateAutoConfigurationTests.java, + * Tests for, + * {@link org.springframework.boot.autoconfigure.mongo.MongoTemplateAutoConfiguration}., +				MongoTemplateAutoConfiguration.class);]