[+++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/security/oauth2/client/OAuth2RestOperationsConfiguration.java, +		@Bean, +		public FilterRegistrationBean oauth2ClientFilterRegistration(, +				OAuth2ClientContextFilter filter) {, +			FilterRegistrationBean registration = new FilterRegistrationBean();, +			registration.setFilter(filter);, +			registration.setOrder(-100);, +			return registration;, +		}, +, +		@Configuration, +		protected static class ClientContextConfiguration {, +, +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/security/oauth2/client/OAuth2RestOperationsConfiguration.java, +		@Bean, +		public FilterRegistrationBean oauth2ClientFilterRegistration(, +				OAuth2ClientContextFilter filter) {, +			FilterRegistrationBean registration = new FilterRegistrationBean();, +			registration.setFilter(filter);, +			registration.setOrder(-100);, +			return registration;, +		}, +, +		@Configuration, +		protected static class ClientContextConfiguration {, +, +++ b/spring-boot-deployment-tests/pom.xml, +		<module>spring-boot-deployment-test-glassfish</module>, +		<module>spring-boot-deployment-test-tomee</module>, +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/security/oauth2/client/OAuth2RestOperationsConfiguration.java, +		@Bean, +		public FilterRegistrationBean oauth2ClientFilterRegistration(, +				OAuth2ClientContextFilter filter) {, +			FilterRegistrationBean registration = new FilterRegistrationBean();, +			registration.setFilter(filter);, +			registration.setOrder(-100);, +			return registration;, +		}, +, +		@Configuration, +		protected static class ClientContextConfiguration {, +, +++ b/spring-boot-deployment-tests/pom.xml, +		<module>spring-boot-deployment-test-glassfish</module>, +		<module>spring-boot-deployment-test-tomee</module>, +++ b/spring-boot-deployment-tests/spring-boot-deployment-test-glassfish/pom.xml, +<?xml version="1.0" encoding="UTF-8"?>, +<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">, +	<modelVersion>4.0.0</modelVersion>, +	<parent>, +		<groupId>org.springframework.boot</groupId>, +		<artifactId>spring-boot-deployment-tests</artifactId>, +		<version>1.3.0.BUILD-SNAPSHOT</version>, +	</parent>, +	<artifactId>spring-boot-deployment-test-glassfish</artifactId>, +	<packaging>war</packaging>, +	<name>Spring Boot Glassfish Deployment Test</name>, +	<description>Spring Boot Glassfish Deployment Test</description>, +	<url>http://projects.spring.io/spring-boot/</url>, +	<organization>, +		<name>Pivotal Software, Inc.</name>, +		<url>http://www.spring.io</url>, +	</organization>, +	<properties>, +		<main.basedir>${basedir}/../..</main.basedir>, +		<glassfish.version>4.1.1</glassfish.version>, +		<cargo.container.id>glassfish4x</cargo.container.id>, +		<cargo.container.url>http://download.oracle.com/glassfish/${glassfish.version}/release/glassfish-${glassfish.version}.zip</cargo.container.url>, +	</properties>, +	<dependencies>, +		<dependency>, +			<groupId>org.springframework.boot</groupId>, +			<artifactId>spring-boot-starter-web</artifactId>, +			<exclusions>, +				<exclusion>, +					<groupId>org.springframework.boot</groupId>, +					<artifactId>spring-boot-starter-tomcat</artifactId>, +				</exclusion>, +			</exclusions>, +		</dependency>, +		<dependency>, +			<groupId>javax.servlet</groupId>, +			<artifactId>javax.servlet-api</artifactId>, +			<scope>provided</scope>, +		</dependency>, +	</dependencies>, +	<build>, +		<plugins>, +			<plugin>, +				<groupId>org.codehaus.mojo</groupId>, +				<artifactId>build-helper-maven-plugin</artifactId>, +				<executions>, +					<execution>, +						<id>reserve-network-port</id>, +						<goals>, +							<goal>reserve-network-port</goal>, +						</goals>, +						<phase>process-resources</phase>, +						<configuration>, +							<portNames>]