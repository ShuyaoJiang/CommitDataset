[+++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/metrics/repository/InMemoryMetricRepository.java, +import java.util.concurrent.ConcurrentNavigableMap;, +	public void setValues(ConcurrentNavigableMap<String, Metric<?>> values) {, +		this.metrics.setValues(values);, +	}, +, +++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/metrics/repository/InMemoryMetricRepository.java, +import java.util.concurrent.ConcurrentNavigableMap;, +	public void setValues(ConcurrentNavigableMap<String, Metric<?>> values) {, +		this.metrics.setValues(values);, +	}, +, +++ b/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/metrics/util/SimpleInMemoryRepository.java, +import org.springframework.util.ConcurrentReferenceHashMap;, +, +	private ConcurrentNavigableMap<String, T> values = new ConcurrentSkipListMap<String, T>();, +	private final ConcurrentMap<String, Object> locks = new ConcurrentReferenceHashMap<String, Object>();, +	public void setValues(ConcurrentNavigableMap<String, T> values) {, +		this.values = values;, +	}, +]