[+++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/sendgrid/SendGridAutoConfiguration.java, + * Copyright 2012-2016 the original author or authors., + * @author Patrick Bray, +		SendGrid sendGrid = createSendGrid();, +	private SendGrid createSendGrid() {, +		if (this.properties.getApiKey() != null) {, +			return new SendGrid(this.properties.getApiKey());, +		}, +		else {, +			return new SendGrid(this.properties.getUsername(),, +					this.properties.getPassword());, +		}, +	}, +, +, +		static class SendGridUserProperty {, +		@ConditionalOnProperty(prefix = "spring.sendgrid", value = "api-key"), +		static class SendGridApiKeyProperty {, +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/sendgrid/SendGridAutoConfiguration.java, + * Copyright 2012-2016 the original author or authors., + * @author Patrick Bray, +		SendGrid sendGrid = createSendGrid();, +	private SendGrid createSendGrid() {, +		if (this.properties.getApiKey() != null) {, +			return new SendGrid(this.properties.getApiKey());, +		}, +		else {, +			return new SendGrid(this.properties.getUsername(),, +					this.properties.getPassword());, +		}, +	}, +, +, +		static class SendGridUserProperty {, +		@ConditionalOnProperty(prefix = "spring.sendgrid", value = "api-key"), +		static class SendGridApiKeyProperty {, +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/sendgrid/SendGridProperties.java, + * Copyright 2012-2016 the original author or authors., +	 * SendGrid username. Alternative to api key., +	 * SendGrid api key. Alternative to username/password., +	private String apiKey;, +	public String getApiKey() {, +		return this.apiKey;, +	}, +, +	public void setApiKey(final String apiKey) {, +		this.apiKey = apiKey;, +	}, +, +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/sendgrid/SendGridAutoConfiguration.java, + * Copyright 2012-2016 the original author or authors., + * @author Patrick Bray, +		SendGrid sendGrid = createSendGrid();, +	private SendGrid createSendGrid() {, +		if (this.properties.getApiKey() != null) {, +			return new SendGrid(this.properties.getApiKey());, +		}, +		else {, +			return new SendGrid(this.properties.getUsername(),, +					this.properties.getPassword());, +		}, +	}, +, +, +		static class SendGridUserProperty {, +		@ConditionalOnProperty(prefix = "spring.sendgrid", value = "api-key"), +		static class SendGridApiKeyProperty {, +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/sendgrid/SendGridProperties.java, + * Copyright 2012-2016 the original author or authors., +	 * SendGrid username. Alternative to api key., +	 * SendGrid api key. Alternative to username/password., +	private String apiKey;, +	public String getApiKey() {, +		return this.apiKey;, +	}, +, +	public void setApiKey(final String apiKey) {, +		this.apiKey = apiKey;, +	}, +, +++ b/spring-boot-autoconfigure/src/test/java/org/springframework/boot/autoconfigure/sendgrid/SendGridAutoConfigurationTests.java, + * Copyright 2012-2016 the original author or authors., + * @author Patrick Bray, +	public void expectedSendGridBeanCreatedUsername() {, +	public void expectedSendGridBeanCreatedApiKey() {, +		loadContext("spring.sendgrid.apiKey:SG.SECRET-API-KEY");, +		assertEquals("SG.SECRET-API-KEY", ReflectionTestUtils.getField(sendGrid, "password"));, +++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/sendgrid/SendGridAutoConfiguration.java, + * Copyright 2012-2016 the original author or authors., + * @author Patrick Bray, +		SendGrid sendGrid = createSendGrid();, +	private SendGrid createSendGrid() {, +		if (this.properties.getApiKey() != null) {, +			return new SendGrid(this.properties.getApiKey());, +		}, +		else {, +			return new SendGrid(this.properties.getUsername(),, +					this.properties.getPassword());, +		}, +	}]