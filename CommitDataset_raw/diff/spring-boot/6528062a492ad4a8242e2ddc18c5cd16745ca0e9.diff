[+++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaAutoConfiguration.java, +import org.springframework.boot.autoconfigure.condition.ConditionOutcome;, +import org.springframework.boot.autoconfigure.condition.SpringBootCondition;, +import org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration.HibernateEntityManagerCondition;, +import org.springframework.context.annotation.ConditionContext;, +import org.springframework.context.annotation.Conditional;, +import org.springframework.core.type.AnnotatedTypeMetadata;, +import org.springframework.util.ClassUtils;, +		EnableTransactionManagement.class, EntityManager.class }), +@Conditional(HibernateEntityManagerCondition.class), +, +	public static class HibernateEntityManagerCondition extends SpringBootCondition {, +, +		@Override, +		public ConditionOutcome getMatchOutcome(ConditionContext context,, +				AnnotatedTypeMetadata metadata) {, +			if (ClassUtils.isPresent("org.hibernate.ejb.HibernateEntityManager",, +					context.getClassLoader()), +					|| ClassUtils.isPresent("org.hibernate.jpa.HibernateEntityManager",, +							context.getClassLoader())) {, +				return ConditionOutcome.match("found HibernateEntityManager class");, +			}, +			return ConditionOutcome.noMatch("did not find HibernateEntityManager class");, +		}, +	}, +]