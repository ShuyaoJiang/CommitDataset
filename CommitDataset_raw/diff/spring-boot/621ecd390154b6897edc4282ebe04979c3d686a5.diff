[+++ b/spring-boot-cli/samples/tx.groovy, +package org.test, +, +@Grab("org.hsqldb:hsqldb:2.2.9"), +, +@Configuration, +@EnableTransactionManagement, +class Example implements CommandLineRunner {, +, +  @Autowired, +  JdbcTemplate jdbcTemplate, +, +  @Transactional, +  void run(String... args) {, +    println "Foo count=" + jdbcTemplate.queryForObject("SELECT COUNT(*) from FOO", Integer), +  }, +, +}, +, +++ b/spring-boot-cli/samples/tx.groovy, +package org.test, +, +@Grab("org.hsqldb:hsqldb:2.2.9"), +, +@Configuration, +@EnableTransactionManagement, +class Example implements CommandLineRunner {, +, +  @Autowired, +  JdbcTemplate jdbcTemplate, +, +  @Transactional, +  void run(String... args) {, +    println "Foo count=" + jdbcTemplate.queryForObject("SELECT COUNT(*) from FOO", Integer), +  }, +, +}, +, +++ b/spring-boot-cli/src/main/java/org/springframework/boot/cli/compiler/AstUtils.java, +import java.util.Arrays;, +import java.util.HashSet;, +import java.util.List;, +import java.util.Set;, +, +import org.codehaus.groovy.ast.ClassNode;, +import org.codehaus.groovy.ast.FieldNode;, +import org.codehaus.groovy.ast.MethodNode;, + * @author Dave Syer, +	 * N.B. the annotation type names are not normally fully qualified., +	/**, +	 * Determine if an {@link ClassNode} has one or more fields of the specified types or, +	 * method returning one or more of the specified types. N.B. the type names are not, +	 * normally fully qualified., +	 */, +	public static boolean hasAtLeastOneFieldOrMethod(ClassNode node, String... types) {, +, +		Set<String> set = new HashSet<String>(Arrays.asList(types));, +		List<FieldNode> fields = node.getFields();, +		for (FieldNode field : fields) {, +			if (set.contains(field.getType().getName())) {, +				return true;, +			}, +		}, +		List<MethodNode> methods = node.getMethods();, +		for (MethodNode method : methods) {, +			if (set.contains(method.getReturnType().getName())) {, +				return true;, +			}, +		}, +		return false;, +, +	}, +, +++ b/spring-boot-cli/samples/tx.groovy, +package org.test, +, +@Grab("org.hsqldb:hsqldb:2.2.9"), +, +@Configuration, +@EnableTransactionManagement, +class Example implements CommandLineRunner {, +, +  @Autowired, +  JdbcTemplate jdbcTemplate, +, +  @Transactional, +  void run(String... args) {, +    println "Foo count=" + jdbcTemplate.queryForObject("SELECT COUNT(*) from FOO", Integer), +  }, +, +}, +, +++ b/spring-boot-cli/src/main/java/org/springframework/boot/cli/compiler/AstUtils.java, +import java.util.Arrays;, +import java.util.HashSet;, +import java.util.List;, +import java.util.Set;, +, +import org.codehaus.groovy.ast.ClassNode;, +import org.codehaus.groovy.ast.FieldNode;]