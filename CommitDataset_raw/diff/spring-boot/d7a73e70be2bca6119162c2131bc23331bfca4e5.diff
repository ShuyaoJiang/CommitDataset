[+++ b/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/data/redis/LettuceConnectionConfiguration.java, +@ConditionalOnClass(RedisClient.class), +		LettuceClientConfigurationBuilder builder = createBuilder(pool);, +	private LettuceClientConfigurationBuilder createBuilder(Pool pool) {, +		if (pool == null) {, +			return LettuceClientConfiguration.builder();, +		}, +		return new PoolBuilderFactory().createBuilder(pool);, +	}, +, +	/**, +	 * Inner class to allow optional commons-pool2 dependency., +	 */, +	private static class PoolBuilderFactory {, +, +		public LettuceClientConfigurationBuilder createBuilder(Pool properties) {, +			return LettucePoolingClientConfiguration.builder(), +					.poolConfig(getPoolConfig(properties));, +		}, +, +		private GenericObjectPoolConfig getPoolConfig(Pool properties) {, +			GenericObjectPoolConfig config = new GenericObjectPoolConfig();, +			config.setMaxTotal(properties.getMaxActive());, +			config.setMaxIdle(properties.getMaxIdle());, +			config.setMinIdle(properties.getMinIdle());, +			config.setMaxWaitMillis(properties.getMaxWait());, +			return config;, +		}, +, +	}, +]