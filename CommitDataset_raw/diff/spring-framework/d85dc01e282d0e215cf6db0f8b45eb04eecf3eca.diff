[+++ b/org.springframework.beans/src/test/java/org/springframework/beans/factory/DefaultListableBeanFactoryTests.java, +import static org.junit.Assert.assertEquals;, +import static org.junit.Assert.assertFalse;, +import static org.junit.Assert.assertNotNull;, +import static org.junit.Assert.assertNotSame;, +import static org.junit.Assert.assertNull;, +import static org.junit.Assert.assertSame;, +import static org.junit.Assert.assertTrue;, +import static org.junit.Assert.fail;, +, +, +import org.springframework.core.convert.support.ConversionServiceFactory;, +import org.springframework.core.convert.support.GenericConversionService;, +import test.beans.DerivedTestBean;, +import test.beans.DummyFactory;, +import test.beans.ITestBean;, +import test.beans.LifecycleBean;, +import test.beans.NestedTestBean;, +import test.beans.TestBean;, +, +		GenericConversionService conversionService = (GenericConversionService) ConversionServiceFactory.createDefault();, +++ b/org.springframework.beans/src/test/java/org/springframework/beans/factory/DefaultListableBeanFactoryTests.java, +import static org.junit.Assert.assertEquals;, +import static org.junit.Assert.assertFalse;, +import static org.junit.Assert.assertNotNull;, +import static org.junit.Assert.assertNotSame;, +import static org.junit.Assert.assertNull;, +import static org.junit.Assert.assertSame;, +import static org.junit.Assert.assertTrue;, +import static org.junit.Assert.fail;, +, +, +import org.springframework.core.convert.support.ConversionServiceFactory;, +import org.springframework.core.convert.support.GenericConversionService;, +import test.beans.DerivedTestBean;, +import test.beans.DummyFactory;, +import test.beans.ITestBean;, +import test.beans.LifecycleBean;, +import test.beans.NestedTestBean;, +import test.beans.TestBean;, +, +		GenericConversionService conversionService = (GenericConversionService) ConversionServiceFactory.createDefault();, +++ b/org.springframework.context/src/main/java/org/springframework/format/support/FormattingConversionService.java, +import org.springframework.core.convert.converter.ConditionalGenericConverter;, +import org.springframework.core.convert.converter.GenericConverter;, +import org.springframework.core.convert.support.ConversionServiceFactory;, +	private ConversionService conversionService = ConversionServiceFactory.createDefault();, +		getConverterRegistry().addGenericConverter(new PrinterConverter(fieldType, printer, this.conversionService));, +		getConverterRegistry().addGenericConverter(new ParserConverter(fieldType, parser, this.conversionService));, +		getConverterRegistry().addGenericConverter(new PrinterConverter(fieldType, formatter, this.conversionService));, +		getConverterRegistry().addGenericConverter(new ParserConverter(fieldType, formatter, this.conversionService));, +			getConverterRegistry().addGenericConverter(new ConditionalGenericConverter() {, +				public Class<?>[][] getConvertibleTypes() {, +					return new Class<?>[][] { { fieldType, String.class } };, +				}, +					return new PrinterConverter(fieldType, printer, conversionService).convert(source, sourceType, targetType);, +			getConverterRegistry().addGenericConverter(new ConditionalGenericConverter() {, +				public Class<?>[][] getConvertibleTypes() {, +					return new Class<?>[][] { { String.class, fieldType } };, +				}, +					return new ParserConverter(fieldType, parser, conversionService).convert(source, sourceType, targetType);		, +		return (ConverterRegistry) this.conversionService;, +		private Class<?> fieldType;, +		, +		public PrinterConverter(Class<?> fieldType, Printer<?> printer, ConversionService conversionService) {, +			this.fieldType = fieldType;, +		public Class<?>[][] getConvertibleTypes() {, +			return new Class<?>[][] { { this.fieldType, String.class } };, +		}, +, +		private Class<?> fieldType;, +		, +		public ParserConverter(Class<?> fieldType, Parser<?> parser, ConversionService conversionService) {, +			this.fieldType = fieldType;, +		public Class<?>[][] getConvertibleTypes() {, +			return new Class<?>[][] { { String.class, this.fieldType } };, +		}, +, +++ b/org.springframework.beans/src/test/java/org/springframework/beans/factory/DefaultListableBeanFactoryTests.java, +import static org.junit.Assert.assertEquals;, +import static org.junit.Assert.assertFalse;, +import static org.junit.Assert.assertNotNull;, +import static org.junit.Assert.assertNotSame;, +import static org.junit.Assert.assertNull;, +import static org.junit.Assert.assertSame;, +import static org.junit.Assert.assertTrue;, +import static org.junit.Assert.fail;, +, +, +import org.springframework.core.convert.support.ConversionServiceFactory;, +import org.springframework.core.convert.support.GenericConversionService;, +import test.beans.DerivedTestBean;, +import test.beans.DummyFactory;, +import test.beans.ITestBean;, +import test.beans.LifecycleBean;, +import test.beans.NestedTestBean;, +import test.beans.TestBean;, +, +		GenericConversionService conversionService = (GenericConversionService) ConversionServiceFactory.createDefault();, +++ b/org.springframework.context/src/main/java/org/springframework/format/support/FormattingConversionService.java]