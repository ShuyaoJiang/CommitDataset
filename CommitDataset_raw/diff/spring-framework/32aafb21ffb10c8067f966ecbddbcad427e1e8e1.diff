[+++ b/spring-test/src/main/java/org/springframework/test/web/servlet/setup/DefaultMockMvcBuilder.java, +import javax.servlet.ServletContext;, +, + * @author Sebastien Deleuze, +		ServletContext servletContext = this.webAppContext.getServletContext();, +		servletContext.setAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE, this.webAppContext);, +++ b/spring-test/src/main/java/org/springframework/test/web/servlet/setup/DefaultMockMvcBuilder.java, +import javax.servlet.ServletContext;, +, + * @author Sebastien Deleuze, +		ServletContext servletContext = this.webAppContext.getServletContext();, +		servletContext.setAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE, this.webAppContext);, +++ b/spring-test/src/test/java/org/springframework/test/web/servlet/setup/DefaultMockMvcBuilderTests.java, + * Copyright 2002-2014 the original author or authors., +import static org.junit.Assert.assertEquals;, +import org.springframework.mock.web.MockServletContext;, +import org.springframework.web.context.support.WebApplicationContextUtils;, + * @author Sebastien Deleuze, +	@Test // SPR-12553, +	public void applicationContextAttribute() {, +		MockServletContext servletContext = new MockServletContext();, +		StubWebApplicationContext wac = new StubWebApplicationContext(servletContext);, +		DefaultMockMvcBuilder builder = MockMvcBuilders.webAppContextSetup(wac);, +		assertEquals(builder.initWebAppContext(), WebApplicationContextUtils, +				.getRequiredWebApplicationContext(servletContext));, +	}, +, +++ b/spring-test/src/main/java/org/springframework/test/web/servlet/setup/DefaultMockMvcBuilder.java, +import javax.servlet.ServletContext;, +, + * @author Sebastien Deleuze, +		ServletContext servletContext = this.webAppContext.getServletContext();, +		servletContext.setAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE, this.webAppContext);, +++ b/spring-test/src/test/java/org/springframework/test/web/servlet/setup/DefaultMockMvcBuilderTests.java, + * Copyright 2002-2014 the original author or authors., +import static org.junit.Assert.assertEquals;, +import org.springframework.mock.web.MockServletContext;, +import org.springframework.web.context.support.WebApplicationContextUtils;, + * @author Sebastien Deleuze, +	@Test // SPR-12553, +	public void applicationContextAttribute() {, +		MockServletContext servletContext = new MockServletContext();, +		StubWebApplicationContext wac = new StubWebApplicationContext(servletContext);, +		DefaultMockMvcBuilder builder = MockMvcBuilders.webAppContextSetup(wac);, +		assertEquals(builder.initWebAppContext(), WebApplicationContextUtils, +				.getRequiredWebApplicationContext(servletContext));, +	}, +, +++ b/spring-test/src/test/java/org/springframework/test/web/servlet/setup/StandaloneMockMvcBuilderTests.java, +import org.springframework.web.context.support.WebApplicationContextUtils;, +	@Test // SPR-12553, +	public void applicationContextAttribute() {, +		TestStandaloneMockMvcBuilder builder = new TestStandaloneMockMvcBuilder(new PlaceholderController());, +		builder.addPlaceHolderValue("sys.login.ajax", "/foo");, +		WebApplicationContext  wac = builder.initWebAppContext();, +		assertEquals(wac, WebApplicationContextUtils, +				.getRequiredWebApplicationContext(wac.getServletContext()));, +	}, +, +]