[+++ b/org.springframework.orm/src/main/java/org/springframework/orm/jdo/PersistenceManagerFactoryUtils.java, + * Copyright 2002-2011 the original author or authors., +		protected boolean shouldReleaseAfterCompletion(PersistenceManagerHolder resourceHolder) {, +			return !resourceHolder.getPersistenceManager().isClosed();, +		}, +, +		@Override, +++ b/org.springframework.orm/src/main/java/org/springframework/orm/jdo/PersistenceManagerFactoryUtils.java, + * Copyright 2002-2011 the original author or authors., +		protected boolean shouldReleaseAfterCompletion(PersistenceManagerHolder resourceHolder) {, +			return !resourceHolder.getPersistenceManager().isClosed();, +		}, +, +		@Override, +++ b/org.springframework.transaction/src/main/java/org/springframework/transaction/support/ResourceHolderSynchronization.java, + * Copyright 2002-2011 the original author or authors., +				releaseNecessary = shouldReleaseAfterCompletion(this.resourceHolder);, +	 * Return whether this holder's resource should be released after, +	 * transaction completion (<code>true</code>)., +	 * <p>The default implementation returns <code>!shouldReleaseBeforeCompletion()</code>,, +	 * releasing after completion if no attempt was made before completion., +	 * @see #releaseResource, +	 */, +	protected boolean shouldReleaseAfterCompletion(H resourceHolder) {, +		return !shouldReleaseBeforeCompletion();, +	}, +, +	/**]