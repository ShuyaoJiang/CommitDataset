[+++ b/org.springframework.test/src/test/java/org/springframework/test/context/junit4/FailingBeforeAndAfterMethodsTests.java, + * JUnit 4 based unit test for verifying that '<i>before</i>' and '<i>after</i>', + * methods of {@link TestExecutionListener TestExecutionListeners} as well as, + * {@link BeforeTransaction &#064;BeforeTransaction} and, + * {@link AfterTransaction &#064;AfterTransaction} methods can fail a test in a, + * JUnit 4.4 environment, as requested in <a, + * <p>, + * Indirectly, this class also verifies that all {@link TestExecutionListener}, + * lifecycle callbacks are called., + * </p>, + * <p>, + * As of Spring 3.0, this class also tests support for the new, + * {@link TestExecutionListener#beforeTestClass(TestContext) beforeTestClass()}, + * and {@link TestExecutionListener#afterTestClass(TestContext), + * afterTestClass()} lifecycle callback methods., + * </p>, +			{ AlwaysFailingBeforeTestClassTestCase.class },//, +			{ AlwaysFailingAfterTestClassTestCase.class },//, +			{ AlwaysFailingPrepareTestInstanceTestCase.class },//, +			{ FailingBeforeTransactionTestCase.class },//, +			{ FailingAfterTransactionTestCase.class } //, +		assertEquals("Verifying number of failures for test class [" + this.clazz + "].", 1,, +			listener.getTestFailureCount());, +	// -------------------------------------------------------------------, +, +	static class AlwaysFailingBeforeTestClassTestExecutionListener extends AbstractTestExecutionListener {, +, +		@Override, +		public void beforeTestClass(TestContext testContext) {, +			fail("always failing beforeTestClass()");, +		}, +	}, +, +	static class AlwaysFailingAfterTestClassTestExecutionListener extends AbstractTestExecutionListener {, +, +		@Override, +		public void afterTestClass(TestContext testContext) {, +			fail("always failing afterTestClass()");, +		}, +	}, +, +	static class AlwaysFailingPrepareTestInstanceTestExecutionListener extends AbstractTestExecutionListener {, +, +		@Override, +		public void prepareTestInstance(TestContext testContext) throws Exception {, +			fail("always failing prepareTestInstance()");, +		}, +	}, +, +	@RunWith(SpringJUnit4ClassRunner.class), +	@TestExecutionListeners( {}), +	public static class BaseTestCase {, +	@TestExecutionListeners(AlwaysFailingBeforeTestClassTestExecutionListener.class), +	public static class AlwaysFailingBeforeTestClassTestCase extends BaseTestCase {, +	@TestExecutionListeners(AlwaysFailingAfterTestClassTestExecutionListener.class), +	public static class AlwaysFailingAfterTestClassTestCase extends BaseTestCase {, +	}, +, +	@TestExecutionListeners(AlwaysFailingPrepareTestInstanceTestExecutionListener.class), +	public static class AlwaysFailingPrepareTestInstanceTestCase extends BaseTestCase {, +	}, +, +	@TestExecutionListeners(AlwaysFailingBeforeTestMethodTestExecutionListener.class), +	public static class AlwaysFailingBeforeTestMethodTestCase extends BaseTestCase {, +	}, +, +	@TestExecutionListeners(AlwaysFailingAfterTestMethodTestExecutionListener.class), +	public static class AlwaysFailingAfterTestMethodTestCase extends BaseTestCase {, +	}, +, +	@ContextConfiguration("FailingBeforeAndAfterMethodsTests-context.xml"), +	public static class FailingBeforeTransactionTestCase extends AbstractTransactionalJUnit4SpringContextTests {, +	@ContextConfiguration("FailingBeforeAndAfterMethodsTests-context.xml"), +	public static class FailingAfterTransactionTestCase extends AbstractTransactionalJUnit4SpringContextTests {]