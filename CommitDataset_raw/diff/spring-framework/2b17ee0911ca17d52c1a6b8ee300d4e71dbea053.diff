[+++ b/org.springframework.test/src/test/java/org/springframework/test/context/testng/AnnotationConfigTransactionalTestNGSpringContextTests.java, +import javax.sql.DataSource;, +, +import org.springframework.context.annotation.Bean;, +import org.springframework.context.annotation.Configuration;, +import org.springframework.jdbc.datasource.DataSourceTransactionManager;, +import org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseBuilder;, +import org.springframework.transaction.PlatformTransactionManager;, +, +	@Configuration, +	static class ContextConfiguration {, +, +		@Bean, +		public Employee employee() {, +			Employee employee = new Employee();, +			employee.setName("John Smith");, +			employee.setAge(42);, +			employee.setCompany("Acme Widgets, Inc.");, +			return employee;, +		}, +, +		@Bean, +		public Pet pet() {, +			return new Pet("Fido");, +		}, +, +		@Bean, +		public PlatformTransactionManager transactionManager() {, +			return new DataSourceTransactionManager(dataSource());, +		}, +, +		@Bean, +		public DataSource dataSource() {, +			return new EmbeddedDatabaseBuilder()//, +			.addScript("classpath:/org/springframework/test/context/testng/schema.sql")//, +			.addScript("classpath:/org/springframework/test/context/testng/data.sql")//, +			.build();, +		}, +, +	}, +, +++ b/org.springframework.test/src/test/java/org/springframework/test/context/testng/AnnotationConfigTransactionalTestNGSpringContextTests.java, +import javax.sql.DataSource;, +, +import org.springframework.context.annotation.Bean;, +import org.springframework.context.annotation.Configuration;, +import org.springframework.jdbc.datasource.DataSourceTransactionManager;, +import org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseBuilder;, +import org.springframework.transaction.PlatformTransactionManager;, +, +	@Configuration, +	static class ContextConfiguration {, +, +		@Bean, +		public Employee employee() {, +			Employee employee = new Employee();, +			employee.setName("John Smith");, +			employee.setAge(42);, +			employee.setCompany("Acme Widgets, Inc.");, +			return employee;, +		}, +, +		@Bean, +		public Pet pet() {, +			return new Pet("Fido");, +		}, +, +		@Bean, +		public PlatformTransactionManager transactionManager() {, +			return new DataSourceTransactionManager(dataSource());, +		}, +, +		@Bean, +		public DataSource dataSource() {, +			return new EmbeddedDatabaseBuilder()//, +			.addScript("classpath:/org/springframework/test/context/testng/schema.sql")//, +			.addScript("classpath:/org/springframework/test/context/testng/data.sql")//, +			.build();, +		}, +, +	}, +, +++ /dev/null]