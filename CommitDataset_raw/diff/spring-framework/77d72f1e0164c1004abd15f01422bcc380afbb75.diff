[+++ b/spring-beans/src/main/java/org/springframework/beans/factory/support/DefaultListableBeanFactory.java, +		if (descriptor instanceof MultiElementDescriptor) {, +			Object beanInstance = descriptor.resolveCandidate(candidateName, requiredType, this);, +			if (!(beanInstance instanceof NullBean)) {, +				candidates.put(candidateName, beanInstance);, +			}, +		}, +		else if (containsSingleton(candidateName)) {, +++ b/spring-beans/src/main/java/org/springframework/beans/factory/support/DefaultListableBeanFactory.java, +		if (descriptor instanceof MultiElementDescriptor) {, +			Object beanInstance = descriptor.resolveCandidate(candidateName, requiredType, this);, +			if (!(beanInstance instanceof NullBean)) {, +				candidates.put(candidateName, beanInstance);, +			}, +		}, +		else if (containsSingleton(candidateName)) {, +++ b/spring-beans/src/test/java/org/springframework/beans/factory/annotation/AutowiredAnnotationBeanPostProcessorTests.java, +		assertEquals(1, bean.getNestedTestBeans().size());, +		assertSame(ntb2, bean.getNestedTestBeans().get(0));, +		assertEquals(1, bean.getTestBeanMap().size());, +		assertEquals(1, bean.getTestBeanMap().size());]