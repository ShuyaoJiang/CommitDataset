[+++ b/org.springframework.transaction/src/main/java/org/springframework/transaction/support/TransactionSynchronizationUtils.java, +import org.springframework.aop.scope.ScopedObject;, +		Object resourceRef = resource;, +		if (resource instanceof ScopedObject) {, +			// First unwrap a scoped proxy., +			resourceRef = ((ScopedObject) resource).getTargetObject();, +		}, +		// Now unwrap infrastructure proxy, +		return (resourceRef instanceof InfrastructureProxy ? ((InfrastructureProxy) resourceRef).getWrappedObject() : resourceRef);]