[+++ b/spring-context/src/main/java/org/springframework/context/support/ApplicationListenerDetector.java, +import org.springframework.util.ObjectUtils;, +		if (this.applicationContext != null) {, +			this.singletonNames.put(beanName, beanDefinition.isSingleton());, +			else if (Boolean.FALSE.equals(flag)) {, +				this.singletonNames.remove(beanName);, +		if (this.applicationContext != null && bean instanceof ApplicationListener) {, +		return ObjectUtils.nullSafeHashCode(this.applicationContext);]