[+++ b/spring-web/src/test/java/org/springframework/remoting/httpinvoker/HttpInvokerFactoryBeanIntegrationTests.java, +import org.springframework.core.env.Environment;, +	@Test, +	public void withConfigurationClassWithPlainFactoryBean() {, +		AnnotationConfigApplicationContext context = new AnnotationConfigApplicationContext();, +		context.register(ConfigWithPlainFactoryBean.class);, +		context.refresh();, +		MyBean myBean = context.getBean("myBean", MyBean.class);, +		assertSame(context.getBean("myService"), myBean.myService);, +		myBean.myService.handle();, +		myBean.myService.handleAsync();, +	}, +, +, +	@Configuration, +	static class ConfigWithPlainFactoryBean {, +, +		@Autowired, +		Environment env;, +, +		@Bean, +		public MyBean myBean() {, +			return new MyBean();, +		}, +, +		@Bean, +		public FactoryBean myService() {, +			String name = env.getProperty("testbean.name");, +			HttpInvokerProxyFactoryBean factory = new HttpInvokerProxyFactoryBean();, +			factory.setServiceUrl("/svc/" + name);, +			factory.setServiceInterface(MyService.class);, +			factory.setHttpInvokerRequestExecutor(new HttpInvokerRequestExecutor() {, +				@Override, +				public RemoteInvocationResult executeRequest(HttpInvokerClientConfiguration config, RemoteInvocation invocation) {, +					return new RemoteInvocationResult(null);, +				}, +			});, +			return factory;, +		}, +	}, +]