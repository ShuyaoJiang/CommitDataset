[+++ b/build.gradle, +		optional("org.eclipse.jetty.websocket:websocket-server:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet-api", +		}, +		optional("org.eclipse.jetty.websocket:websocket-client:9.1.0.RC0"), +		testCompile("org.eclipse.jetty:jetty-webapp:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet-api", +		optional("org.eclipse.jetty:jetty-servlet:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet-api", +		optional("org.eclipse.jetty:jetty-server:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet-api", +		optional("org.eclipse.jetty:jetty-webapp:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet", +		optional("org.eclipse.jetty.websocket:websocket-server:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet", +		}, +		optional("org.eclipse.jetty.websocket:websocket-client:9.1.0.RC0"), +		testCompile("org.eclipse.jetty:jetty-servlet:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet", +		testCompile("org.eclipse.jetty:jetty-server:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet", +++ b/build.gradle, +		optional("org.eclipse.jetty.websocket:websocket-server:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet-api", +		}, +		optional("org.eclipse.jetty.websocket:websocket-client:9.1.0.RC0"), +		testCompile("org.eclipse.jetty:jetty-webapp:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet-api", +		optional("org.eclipse.jetty:jetty-servlet:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet-api", +		optional("org.eclipse.jetty:jetty-server:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet-api", +		optional("org.eclipse.jetty:jetty-webapp:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet", +		optional("org.eclipse.jetty.websocket:websocket-server:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet", +		}, +		optional("org.eclipse.jetty.websocket:websocket-client:9.1.0.RC0"), +		testCompile("org.eclipse.jetty:jetty-servlet:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet", +		testCompile("org.eclipse.jetty:jetty-server:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet", +++ b/spring-web/src/test/java/org/springframework/http/client/AbstractJettyServerTestCase.java, +++ b/build.gradle, +		optional("org.eclipse.jetty.websocket:websocket-server:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet-api", +		}, +		optional("org.eclipse.jetty.websocket:websocket-client:9.1.0.RC0"), +		testCompile("org.eclipse.jetty:jetty-webapp:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet-api", +		optional("org.eclipse.jetty:jetty-servlet:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet-api", +		optional("org.eclipse.jetty:jetty-server:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet-api", +		optional("org.eclipse.jetty:jetty-webapp:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet", +		optional("org.eclipse.jetty.websocket:websocket-server:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet", +		}, +		optional("org.eclipse.jetty.websocket:websocket-client:9.1.0.RC0"), +		testCompile("org.eclipse.jetty:jetty-servlet:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet", +		testCompile("org.eclipse.jetty:jetty-server:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet", +++ b/spring-web/src/test/java/org/springframework/http/client/AbstractJettyServerTestCase.java, +++ b/spring-websocket/src/main/java/org/springframework/web/socket/server/support/JettyRequestUpgradeStrategy.java, +import org.eclipse.jetty.websocket.servlet.ServletUpgradeRequest;, +import org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse;, +, +			public Object createWebSocket(ServletUpgradeRequest request, ServletUpgradeResponse response) {, +				// Cast to avoid infinite recursion, +				return createWebSocket((UpgradeRequest) request, (UpgradeResponse) response);, +			}, +, +			// For Jetty 9.0.x, +++ b/build.gradle, +		optional("org.eclipse.jetty.websocket:websocket-server:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet-api", +		}, +		optional("org.eclipse.jetty.websocket:websocket-client:9.1.0.RC0"), +		testCompile("org.eclipse.jetty:jetty-webapp:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet-api", +		optional("org.eclipse.jetty:jetty-servlet:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet-api", +		optional("org.eclipse.jetty:jetty-server:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet-api", +		optional("org.eclipse.jetty:jetty-webapp:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet", +		optional("org.eclipse.jetty.websocket:websocket-server:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet", +		}, +		optional("org.eclipse.jetty.websocket:websocket-client:9.1.0.RC0"), +		testCompile("org.eclipse.jetty:jetty-servlet:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet", +		testCompile("org.eclipse.jetty:jetty-server:9.1.0.RC0") {, +			exclude group: "javax.servlet", module: "javax.servlet", +++ b/spring-web/src/test/java/org/springframework/http/client/AbstractJettyServerTestCase.java, +++ b/spring-websocket/src/main/java/org/springframework/web/socket/server/support/JettyRequestUpgradeStrategy.java, +import org.eclipse.jetty.websocket.servlet.ServletUpgradeRequest;, +import org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse;]