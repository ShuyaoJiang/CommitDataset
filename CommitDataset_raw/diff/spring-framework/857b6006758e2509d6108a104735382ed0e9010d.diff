[+++ b/spring-web/src/main/java/org/springframework/http/codec/json/AbstractJackson2Encoder.java, +import org.springframework.core.io.buffer.DataBufferUtils;, +		boolean release = true;, +			JsonGenerator generator =, +					getObjectMapper().getFactory().createGenerator(outputStream, encoding);, +			release = false;, +			throw new IllegalStateException("Unexpected I/O error while writing to data buffer",, +					ex);, +		}, +		finally {, +			if (release) {, +				DataBufferUtils.release(buffer);, +			}]