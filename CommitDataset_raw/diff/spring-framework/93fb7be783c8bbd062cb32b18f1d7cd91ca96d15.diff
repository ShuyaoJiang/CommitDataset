[+++ b/spring-test/src/main/java/org/springframework/test/context/BootstrapUtils.java, +import static org.springframework.beans.BeanUtils.instantiateClass;, + * @author Phillip Webb, +	private static final String DEFAULT_WEB_TEST_CONTEXT_BOOTSTRAPPER_CLASS_NAME = "org.springframework.test.context.web.WebTestContextBootstrapper";, +, +	private static final String WEB_APP_CONFIGURATION_ANNOTATION_CLASS_NAME = "org.springframework.test.context.web.WebAppConfiguration";, +, +	 * Otherwise, either the, +	 * {@link org.springframework.test.context.support.DefaultTestContextBootstrapper, +	 * DefaultTestContextBootstrapper} or the, +	 * {@link org.springframework.test.context.web.WebTestContextBootstrapper, +	 * WebTestContextBootstrapper} will be used, depending on the presence of, +	 * {@link org.springframework.test.context.web.WebAppConfiguration @WebAppConfiguration}., +	/**, +	 * @since 4.3, +	 */, +	/**, +	 * @since 4.3, +	 */, +	private static Class<?> resolveDefaultTestContextBootstrapper(Class<?> testClass) throws Exception {, +		if (AnnotatedElementUtils.isAnnotated(testClass, WEB_APP_CONFIGURATION_ANNOTATION_CLASS_NAME)) {, +			return ClassUtils.forName(DEFAULT_WEB_TEST_CONTEXT_BOOTSTRAPPER_CLASS_NAME, classLoader);, +++ b/spring-test/src/main/java/org/springframework/test/context/BootstrapUtils.java, +import static org.springframework.beans.BeanUtils.instantiateClass;, + * @author Phillip Webb, +	private static final String DEFAULT_WEB_TEST_CONTEXT_BOOTSTRAPPER_CLASS_NAME = "org.springframework.test.context.web.WebTestContextBootstrapper";, +, +	private static final String WEB_APP_CONFIGURATION_ANNOTATION_CLASS_NAME = "org.springframework.test.context.web.WebAppConfiguration";, +, +	 * Otherwise, either the, +	 * {@link org.springframework.test.context.support.DefaultTestContextBootstrapper, +	 * DefaultTestContextBootstrapper} or the, +	 * {@link org.springframework.test.context.web.WebTestContextBootstrapper, +	 * WebTestContextBootstrapper} will be used, depending on the presence of, +	 * {@link org.springframework.test.context.web.WebAppConfiguration @WebAppConfiguration}., +	/**, +	 * @since 4.3, +	 */, +	/**, +	 * @since 4.3, +	 */, +	private static Class<?> resolveDefaultTestContextBootstrapper(Class<?> testClass) throws Exception {, +		if (AnnotatedElementUtils.isAnnotated(testClass, WEB_APP_CONFIGURATION_ANNOTATION_CLASS_NAME)) {, +			return ClassUtils.forName(DEFAULT_WEB_TEST_CONTEXT_BOOTSTRAPPER_CLASS_NAME, classLoader);, +++ b/spring-test/src/main/java/org/springframework/test/context/web/WebAppConfiguration.java, + * <p>The presence of {@code @WebAppConfiguration} on a test class indicates that, + * a {@code WebApplicationContext} should be loaded for the test using a default, +++ b/spring-test/src/main/java/org/springframework/test/context/BootstrapUtils.java, +import static org.springframework.beans.BeanUtils.instantiateClass;, + * @author Phillip Webb, +	private static final String DEFAULT_WEB_TEST_CONTEXT_BOOTSTRAPPER_CLASS_NAME = "org.springframework.test.context.web.WebTestContextBootstrapper";, +, +	private static final String WEB_APP_CONFIGURATION_ANNOTATION_CLASS_NAME = "org.springframework.test.context.web.WebAppConfiguration";, +, +	 * Otherwise, either the, +	 * {@link org.springframework.test.context.support.DefaultTestContextBootstrapper, +	 * DefaultTestContextBootstrapper} or the, +	 * {@link org.springframework.test.context.web.WebTestContextBootstrapper, +	 * WebTestContextBootstrapper} will be used, depending on the presence of, +	 * {@link org.springframework.test.context.web.WebAppConfiguration @WebAppConfiguration}., +	/**, +	 * @since 4.3, +	 */, +	/**, +	 * @since 4.3, +	 */, +	private static Class<?> resolveDefaultTestContextBootstrapper(Class<?> testClass) throws Exception {, +		if (AnnotatedElementUtils.isAnnotated(testClass, WEB_APP_CONFIGURATION_ANNOTATION_CLASS_NAME)) {, +			return ClassUtils.forName(DEFAULT_WEB_TEST_CONTEXT_BOOTSTRAPPER_CLASS_NAME, classLoader);, +++ b/spring-test/src/main/java/org/springframework/test/context/web/WebAppConfiguration.java, + * <p>The presence of {@code @WebAppConfiguration} on a test class indicates that, + * a {@code WebApplicationContext} should be loaded for the test using a default, +++ b/spring-test/src/test/java/org/springframework/test/context/BootstrapUtilsTests.java, +import static org.hamcrest.CoreMatchers.containsString;, +import static org.junit.Assert.assertEquals;, +import static org.junit.Assert.assertNotNull;, +import static org.mockito.Mockito.mock;, +import static org.springframework.test.context.BootstrapUtils.resolveTestContextBootstrapper;, + * @author Phillip Webb, +	public final ExpectedException exception = ExpectedException.none();, +	public void resolveTestContextBootstrapperForWebAppConfigurationAnnotatedClass() {, +		assertBootstrapper(WebAppConfigurationAnnotatedClass.class, WebTestContextBootstrapper.class);, +	static class WebAppConfigurationAnnotatedClass {}, +++ b/spring-test/src/main/java/org/springframework/test/context/BootstrapUtils.java, +import static org.springframework.beans.BeanUtils.instantiateClass;, + * @author Phillip Webb, +	private static final String DEFAULT_WEB_TEST_CONTEXT_BOOTSTRAPPER_CLASS_NAME = "org.springframework.test.context.web.WebTestContextBootstrapper";, +, +	private static final String WEB_APP_CONFIGURATION_ANNOTATION_CLASS_NAME = "org.springframework.test.context.web.WebAppConfiguration";, +, +	 * Otherwise, either the, +	 * {@link org.springframework.test.context.support.DefaultTestContextBootstrapper, +	 * DefaultTestContextBootstrapper} or the, +	 * {@link org.springframework.test.context.web.WebTestContextBootstrapper, +	 * WebTestContextBootstrapper} will be used, depending on the presence of, +	 * {@link org.springframework.test.context.web.WebAppConfiguration @WebAppConfiguration}., +	/**, +	 * @since 4.3, +	 */, +	/**]