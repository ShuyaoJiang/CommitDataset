[+++ b/spring-context/src/main/java/org/springframework/context/annotation/ConfigurationClassParser.java, + * Copyright 2002-2013 the original author or authors., +import org.springframework.util.CollectionUtils;, +		if (!CollectionUtils.isEmpty(imports)) {, +	private Set<String> getImports(String className, Set<String> imports, Set<String> visited) throws IOException {, +		if (visited.add(className) && !className.startsWith("java")) {, +				else if (new AssignableTypeFilter(ImportBeanDefinitionRegistrar.class).match(reader, this.metadataReaderFactory)) {, +				((ResourceLoaderAware) registrar).setResourceLoader(this.resourceLoader);, +				ClassLoader classLoader = (this.registry instanceof ConfigurableBeanFactory ?, +						((ConfigurableBeanFactory) this.registry).getBeanClassLoader() :, +						this.resourceLoader.getClassLoader());, +			if (registrar instanceof BeanFactoryAware && this.registry instanceof BeanFactory) {, +				((BeanFactoryAware) registrar).setBeanFactory((BeanFactory) this.registry);, +, +]