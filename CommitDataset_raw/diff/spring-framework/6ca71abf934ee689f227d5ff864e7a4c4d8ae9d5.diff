[+++ b/spring-context/src/test/java/org/springframework/jmx/support/MBeanServerFactoryBeanTests.java, +import java.lang.reflect.Field;, +import java.util.List;, +, + * @author Phillip Webb, +	@Override, +	protected void setUp() throws Exception {, +		resetPlatformManager();, +	}, +, +	@Override, +	protected void tearDown() throws Exception {, +		resetPlatformManager();, +	}, +, +	/**, +	 * Resets MBeanServerFactory and ManagementFactory to a known consistent state., +	 * This involves releasing all currently registered MBeanServers and resetting, +	 * the platformMBeanServer to null., +	 */, +	private void resetPlatformManager() throws Exception {, +		for (MBeanServer server : MBeanServerFactory.findMBeanServer(null)) {, +			MBeanServerFactory.releaseMBeanServer(server);, +		}, +		Field field = ManagementFactory.class.getDeclaredField("platformMBeanServer");, +		field.setAccessible(true);, +		field.set(null, null);, +	}, +]