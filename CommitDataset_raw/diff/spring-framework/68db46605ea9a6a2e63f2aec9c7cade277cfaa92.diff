[+++ b/build-spring-framework/build.xml, +<project name="build-spring-framework" default="precommit">, +	<target name="precommit" depends="clean,clean-integration,test"/>, +++ b/build-spring-framework/build.xml, +<project name="build-spring-framework" default="precommit">, +	<target name="precommit" depends="clean,clean-integration,test"/>, +++ /dev/null, +++ b/build-spring-framework/build.xml, +<project name="build-spring-framework" default="precommit">, +	<target name="precommit" depends="clean,clean-integration,test"/>, +++ /dev/null, +++ b/build-spring-framework/package-top-level.xml, +		<!--ant dir="../spring-framework-reference" target="doc" inheritAll="false">, +		</subant-->, +				<exclude name="ivy-cache/repository/org.apache.velocity/org.apache.velocity.docbookframework.dist/**"/>, +			<zipfileset dir="${package.dir}">, +				<exclude name="${package.basename}/docs/**"/>, +				<exclude name="${package.basename}/projects/ivy-cache/**"/>, +			</zipfileset>, +		<zip destfile="${artifacts.dir}/${package.basename}-with-docs.zip">, +			<zipfileset dir="${package.dir}">, +				<exclude name="${package.basename}/projects/ivy-cache/**"/>, +			</zipfileset>, +		</zip>, +, +		<zip destfile="${artifacts.dir}/${package.basename}-with-dependencies.zip">, +			<zipfileset dir="${package.dir}"/>, +		</zip>, +++ b/build-spring-framework/build.xml, +<project name="build-spring-framework" default="precommit">, +	<target name="precommit" depends="clean,clean-integration,test"/>, +++ /dev/null, +++ b/build-spring-framework/package-top-level.xml, +		<!--ant dir="../spring-framework-reference" target="doc" inheritAll="false">, +		</subant-->, +				<exclude name="ivy-cache/repository/org.apache.velocity/org.apache.velocity.docbookframework.dist/**"/>, +			<zipfileset dir="${package.dir}">, +				<exclude name="${package.basename}/docs/**"/>, +				<exclude name="${package.basename}/projects/ivy-cache/**"/>, +			</zipfileset>, +		<zip destfile="${artifacts.dir}/${package.basename}-with-docs.zip">, +			<zipfileset dir="${package.dir}">, +				<exclude name="${package.basename}/projects/ivy-cache/**"/>, +			</zipfileset>, +		</zip>, +, +		<zip destfile="${artifacts.dir}/${package.basename}-with-dependencies.zip">, +			<zipfileset dir="${package.dir}"/>, +		</zip>, +++ b/build-spring-framework/publish-top-level.xml, +	<target name="publish-package" depends="aws.init">, +		<checksum file="${package.output.file}" algorithm="sha1"/>, +		<checksum file="${artifacts.dir}/${package.basename}-with-docs.zip" algorithm="sha1"/>, +		<checksum file="${artifacts.dir}/${package.basename}-with-dependencies.zip" algorithm="sha1"/>, +		, +		<aws:s3 accessKey="${accessKey}" secretKey="${secretKey}">, +			<upload bucketName="dist.${bucket.basename}" file="${package.output.file}", +					toFile="${adjusted.release.type}/${project.key}/${package.file.name}" publicRead="true">, +				<metadata name="project.name" value="Spring Framework"/>, +				<metadata name="release.type" value="${release.type}"/>, +				<metadata name="bundle.version" value="${bundle.version}"/>, +				<metadata name="package.file.name" value="${package.file.name}"/>, +			</upload>, +			<upload bucketName="dist.${bucket.basename}" file="${package.output.file}.sha1", +					toFile="${adjusted.release.type}/${project.key}/${package.file.name}.sha1" publicRead="true"/>, +, +			<upload bucketName="dist.${bucket.basename}" file="${artifacts.dir}/${package.basename}-with-docs.zip", +					toFile="${adjusted.release.type}/${project.key}/${package.basename}-with-docs.zip" publicRead="true">, +				<metadata name="project.name" value="Spring Framework"/>, +				<metadata name="release.type" value="${release.type}"/>, +				<metadata name="bundle.version" value="${bundle.version}"/>, +				<metadata name="package.file.name" value="${package.basename}-with-docs.zip"/>, +			</upload>, +			<upload bucketName="dist.${bucket.basename}" file="${artifacts.dir}/${package.basename}-with-docs.zip.sha1", +					toFile="${adjusted.release.type}/${project.key}/${package.basename}-with-docs.zip.sha1" publicRead="true"/>, +, +			<upload bucketName="dist.${bucket.basename}" file="${artifacts.dir}/${package.basename}-with-dependencies.zip", +					toFile="${adjusted.release.type}/${project.key}/${package.basename}-with-dependencies.zip" publicRead="true">, +				<metadata name="project.name" value="Spring Framework"/>, +				<metadata name="release.type" value="${release.type}"/>, +				<metadata name="bundle.version" value="${bundle.version}"/>, +				<metadata name="package.file.name" value="${package.basename}-with-dependencies.zip"/>, +			</upload>, +			<upload bucketName="dist.${bucket.basename}" file="${artifacts.dir}/${package.basename}-with-dependencies.zip.sha1", +					toFile="${adjusted.release.type}/${project.key}/${package.basename}-with-dependencies.zip.sha1" publicRead="true"/>, +		</aws:s3>, +	</target>, +++ b/build-spring-framework/build.xml, +<project name="build-spring-framework" default="precommit">, +	<target name="precommit" depends="clean,clean-integration,test"/>, +++ /dev/null, +++ b/build-spring-framework/package-top-level.xml, +		<!--ant dir="../spring-framework-reference" target="doc" inheritAll="false">, +		</subant-->, +				<exclude name="ivy-cache/repository/org.apache.velocity/org.apache.velocity.docbookframework.dist/**"/>, +			<zipfileset dir="${package.dir}">, +				<exclude name="${package.basename}/docs/**"/>, +				<exclude name="${package.basename}/projects/ivy-cache/**"/>, +			</zipfileset>, +		<zip destfile="${artifacts.dir}/${package.basename}-with-docs.zip">]