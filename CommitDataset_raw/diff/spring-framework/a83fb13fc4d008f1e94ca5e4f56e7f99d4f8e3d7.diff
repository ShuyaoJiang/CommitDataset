[+++ b/src/asciidoc/index.adoc, +All deprecated packages, and many deprecated classes, methods, and fields have been, +removed with version 4.0. If you are upgrading from a previous release of Spring, you, +should ensure that you have fixed any deprecated calls that you were making., +=== Testing Improvements, +In addition to pruning of deprecated code within the `spring-test` module, Spring, +Framework 4.0 introduces several new features for use in unit and integration testing., +* Almost all annotations in the `spring-test` module (e.g., `@ContextConfiguration`,, +  `@WebAppConfiguration`, `@ContextHierarchy`, `@ActiveProfiles`, etc.) can now be used, +  as <<beans-meta-annotations,meta-annotations>> to create custom _composed annotations_, +  and reduce configuration duplication across tests., +* Active bean definition profiles can now be resolved programmatically, simply by, +  implementing a custom <<testcontext-ctx-management-env-profiles-ActiveProfilesResolver,`ActiveProfilesResolver`>>, +  and registering it via the `resolver` attribute of `@ActiveProfiles`., +* A new `SocketUtils` utility class has been introduced in the `spring-core` module, +  which enables you to scan for free TCP & UDP server ports on localhost. This, +  functionality is not specific to testing but can prove very useful when writing, +  integration tests that require the use of sockets, for example tests that start, +  an in-memory SMTP server, FTP server, Servlet container, etc., +* As of Spring 4.0, the set of mocks in the `org.springframework.mock.web` package is, +  now compatible with Servlet 3.0. Furthermore, several of the Servlet API mocks, +  (e.g., `MockHttpServletRequest`, `MockServletContext`, etc.) have been updated with, +  minor enhancements and improved configurability., +definition profiles programmatically by implementing a custom, +<<testcontext-ctx-management-env-profiles-ActiveProfilesResolver,`ActiveProfilesResolver`>>, +[[testcontext-ctx-management-env-profiles-ActiveProfilesResolver]]]