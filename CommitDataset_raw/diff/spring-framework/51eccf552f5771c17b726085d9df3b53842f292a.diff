[+++ b/spring-test/src/main/java/org/springframework/test/context/web/ServletTestExecutionListener.java, + * @author Phillip Webb, +	 * Attribute name for a {@link TestContext} attribute which indicates that that, +	 * the {@code ServletTestExecutionListener} should be activated. When not set to, +	 * {@code true}, activation occurs when the {@linkplain TestContext#getTestClass(), +	 *, +	 * <p>Permissible values include {@link Boolean#TRUE} and {@link Boolean#FALSE}., +	 * @since 4.3, +		ServletTestExecutionListener.class, "activateListener");, +++ b/spring-test/src/main/java/org/springframework/test/context/web/ServletTestExecutionListener.java, + * @author Phillip Webb, +	 * Attribute name for a {@link TestContext} attribute which indicates that that, +	 * the {@code ServletTestExecutionListener} should be activated. When not set to, +	 * {@code true}, activation occurs when the {@linkplain TestContext#getTestClass(), +	 *, +	 * <p>Permissible values include {@link Boolean#TRUE} and {@link Boolean#FALSE}., +	 * @since 4.3, +		ServletTestExecutionListener.class, "activateListener");, +++ b/spring-test/src/test/java/org/springframework/test/context/web/ServletTestExecutionListenerTests.java, + * @author Phillip Webb, +	private static final String SET_UP_OUTSIDE_OF_STEL = "setUpOutsideOfStel";, +		assertSetUpOutsideOfStelAttributeExists();, +		assertSetUpOutsideOfStelAttributeExists();, +		assertSetUpOutsideOfStelAttributeExists();, +		assertSetUpOutsideOfStelAttributeExists();, +		assertSetUpOutsideOfStelAttributeExists();, +		assertRequestAttributesDoNotExist();, +		assertRequestAttributesDoNotExist();, +		assertRequestAttributesDoNotExist();, +		assertRequestAttributesDoNotExist();, +		assertSetUpOutsideOfStelAttributeExists();, +		assertSetUpOutsideOfStelAttributeExists();, +		assertSetUpOutsideOfStelAttributeExists();, +		assertSetUpOutsideOfStelAttributeExists();, +		assertRequestAttributesDoNotExist();, +		assertRequestAttributesExist();, +	/**, +	 * @since 4.3, +	 */, +	public void activateListenerWithoutExistingRequestAttributes() throws Exception {, +		assertRequestAttributesDoNotExist();, +, +	private RequestAttributes assertRequestAttributesExist() {, +		RequestAttributes requestAttributes = RequestContextHolder.getRequestAttributes();, +		assertNotNull("request attributes should exist", requestAttributes);, +		return requestAttributes;, +	}, +, +	private void assertRequestAttributesDoNotExist() {, +		assertNull("request attributes should not not exist", RequestContextHolder.getRequestAttributes());, +	}, +, +	private void assertSetUpOutsideOfStelAttributeExists() {, +		RequestAttributes requestAttributes = assertRequestAttributesExist();, +		Object setUpOutsideOfStel = requestAttributes.getAttribute(SET_UP_OUTSIDE_OF_STEL,, +			RequestAttributes.SCOPE_REQUEST);, +		assertNotNull(SET_UP_OUTSIDE_OF_STEL + " should exist as a request attribute", setUpOutsideOfStel);, +	}, +, +	private void assertSetUpOutsideOfStelAttributeDoesNotExist() {, +		RequestAttributes requestAttributes = assertRequestAttributesExist();, +		Object setUpOutsideOfStel = requestAttributes.getAttribute(SET_UP_OUTSIDE_OF_STEL,, +			RequestAttributes.SCOPE_REQUEST);, +		assertNull(SET_UP_OUTSIDE_OF_STEL + " should NOT exist as a request attribute", setUpOutsideOfStel);, +	}, +, +		assertRequestAttributesExist();, +		assertSetUpOutsideOfStelAttributeDoesNotExist();, +		assertRequestAttributesExist();, +		assertSetUpOutsideOfStelAttributeDoesNotExist();, +		assertRequestAttributesDoNotExist();]