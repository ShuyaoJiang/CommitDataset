[+++ b/org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/view/ContentNegotiatingViewResolver.java, +			String requestUri = urlPathHelper.getLookupPathForRequest(request);, +++ b/org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/view/ContentNegotiatingViewResolver.java, +			String requestUri = urlPathHelper.getLookupPathForRequest(request);, +++ b/org.springframework.web.servlet/src/test/java/org/springframework/web/servlet/view/ContentNegotiatingViewResolverTests.java, +	// SPR-8678, +	, +	@Test, +	public void getMediaTypeFilenameWithContextPath() {, +		request.setContextPath("/project-1.0.0.M3");, +		request.setRequestURI("/project-1.0.0.M3/");, +		assertTrue("Context path should be excluded", viewResolver.getMediaTypes(request).isEmpty());, +		request.setRequestURI("/project-1.0.0.M3");, +		assertTrue("Context path should be excluded", viewResolver.getMediaTypes(request).isEmpty());, +	}, +]