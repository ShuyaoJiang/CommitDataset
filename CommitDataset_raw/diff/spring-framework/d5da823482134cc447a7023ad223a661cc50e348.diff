[+++ b/spring-core/src/main/java/org/springframework/core/io/buffer/DataBufferUtils.java, +		private final AtomicLong position;, +			this.position = new AtomicLong(position);, +			this.channel.write(byteBuffer, this.position.get(), byteBuffer, this);, +, +			if (this.dataBuffer == null) {, +				this.sink.complete();, +			}, +			this.position.addAndGet(written);, +				this.channel.write(byteBuffer, this.position.get(), byteBuffer, this);, +, +			if (this.dataBuffer != null) {, +				this.dataBuffer = null;, +++ b/spring-core/src/main/java/org/springframework/core/io/buffer/DataBufferUtils.java, +		private final AtomicLong position;, +			this.position = new AtomicLong(position);, +			this.channel.write(byteBuffer, this.position.get(), byteBuffer, this);, +, +			if (this.dataBuffer == null) {, +				this.sink.complete();, +			}, +			this.position.addAndGet(written);, +				this.channel.write(byteBuffer, this.position.get(), byteBuffer, this);, +, +			if (this.dataBuffer != null) {, +				this.dataBuffer = null;, +++ b/spring-core/src/test/java/org/springframework/core/io/buffer/DataBufferUtilsTests.java]