[+++ b/spring-core/src/main/java/org/springframework/core/codec/StringDecoder.java, +import org.springframework.core.io.buffer.PooledDataBuffer;, +				.flatMap(StringDecoder::joinUntilEndFrame), +				.doOnDiscard(PooledDataBuffer.class, DataBufferUtils::release);, +++ b/spring-core/src/main/java/org/springframework/core/codec/StringDecoder.java, +import org.springframework.core.io.buffer.PooledDataBuffer;, +				.flatMap(StringDecoder::joinUntilEndFrame), +				.doOnDiscard(PooledDataBuffer.class, DataBufferUtils::release);, +++ b/spring-core/src/test/java/org/springframework/core/codec/StringDecoderTests.java, +		DataBuffer barBuffer = stringBuffer("bar");, +				Flux.just(fooBuffer, barBuffer).concatWith(Flux.error(new RuntimeException()));]