[+++ b/spring-messaging/src/main/java/org/springframework/messaging/simp/broker/DefaultSubscriptionRegistry.java, + * @author Juergen Hoeller, +					logger.debug("Failed to evaluate selector", ex);, +			return "registry[" + this.sessions.size() + " sessions]";, +				Set<Subscription> subs = this.destinationLookup.get(destination);, +				if (subs != null) {, +					for (Subscription sub : subs) {, +			}, +				synchronized (this.destinationLookup) {, +				Set<Subscription> subs = this.destinationLookup.get(destination);, +				if (subs != null) {, +					for (Subscription sub : subs) {, +						if (sub.getId().equals(subscriptionId) && subs.remove(sub)) {, +							synchronized (this.destinationLookup) {, +								if (subs.isEmpty()) {, +			}]