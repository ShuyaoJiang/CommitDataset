[+++ b/spring-web/src/main/java/org/springframework/web/client/AsyncRestTemplate.java, +import org.springframework.web.util.DefaultUriBuilderFactory;, +		if (handler instanceof DefaultUriBuilderFactory) {, +			((DefaultUriBuilderFactory) handler).setDefaultUriVariables(defaultUriVariables);, +		}, +		else if (handler instanceof AbstractUriTemplateHandler) {, +		else {, +			throw new IllegalArgumentException(, +					"This property is not supported with the configured UriTemplateHandler.");, +		}, +	}, +++ b/spring-web/src/main/java/org/springframework/web/client/AsyncRestTemplate.java, +import org.springframework.web.util.DefaultUriBuilderFactory;, +		if (handler instanceof DefaultUriBuilderFactory) {, +			((DefaultUriBuilderFactory) handler).setDefaultUriVariables(defaultUriVariables);, +		}, +		else if (handler instanceof AbstractUriTemplateHandler) {, +		else {, +			throw new IllegalArgumentException(, +					"This property is not supported with the configured UriTemplateHandler.");, +		}, +	}, +++ b/spring-web/src/main/java/org/springframework/web/client/RestTemplate.java, +import org.springframework.web.util.DefaultUriBuilderFactory;, +	private UriTemplateHandler uriTemplateHandler = new DefaultUriBuilderFactory();, +	 * DefaultUriBuilderFactory factory = new DefaultUriBuilderFactory();, +	 * @param uriVars the default URI variable values, +	public void setDefaultUriVariables(Map<String, ?> uriVars) {, +		if (this.uriTemplateHandler instanceof DefaultUriBuilderFactory) {, +			((DefaultUriBuilderFactory) this.uriTemplateHandler).setDefaultUriVariables(uriVars);, +		}, +		else if (this.uriTemplateHandler instanceof AbstractUriTemplateHandler) {, +			((AbstractUriTemplateHandler) this.uriTemplateHandler).setDefaultUriVariables(uriVars);, +		}, +		else {, +			throw new IllegalArgumentException(, +					"This property is not supported with the configured UriTemplateHandler.");, +		}, +	 * By default the {@link DefaultUriBuilderFactory} is used which relies on, +++ b/spring-web/src/main/java/org/springframework/web/client/AsyncRestTemplate.java, +import org.springframework.web.util.DefaultUriBuilderFactory;, +		if (handler instanceof DefaultUriBuilderFactory) {, +			((DefaultUriBuilderFactory) handler).setDefaultUriVariables(defaultUriVariables);, +		}, +		else if (handler instanceof AbstractUriTemplateHandler) {, +		else {, +			throw new IllegalArgumentException(, +					"This property is not supported with the configured UriTemplateHandler.");, +		}, +	}, +++ b/spring-web/src/main/java/org/springframework/web/client/RestTemplate.java, +import org.springframework.web.util.DefaultUriBuilderFactory;, +	private UriTemplateHandler uriTemplateHandler = new DefaultUriBuilderFactory();, +	 * DefaultUriBuilderFactory factory = new DefaultUriBuilderFactory();, +	 * @param uriVars the default URI variable values, +	public void setDefaultUriVariables(Map<String, ?> uriVars) {, +		if (this.uriTemplateHandler instanceof DefaultUriBuilderFactory) {, +			((DefaultUriBuilderFactory) this.uriTemplateHandler).setDefaultUriVariables(uriVars);, +		}, +		else if (this.uriTemplateHandler instanceof AbstractUriTemplateHandler) {, +			((AbstractUriTemplateHandler) this.uriTemplateHandler).setDefaultUriVariables(uriVars);, +		}, +		else {, +			throw new IllegalArgumentException(, +					"This property is not supported with the configured UriTemplateHandler.");, +		}, +	 * By default the {@link DefaultUriBuilderFactory} is used which relies on, +++ b/spring-web/src/main/java/org/springframework/web/util/AbstractUriTemplateHandler.java, + * @deprecated as of 5.0 in favor of {@link DefaultUriBuilderFactory}, +@Deprecated, +++ b/spring-web/src/main/java/org/springframework/web/client/AsyncRestTemplate.java, +import org.springframework.web.util.DefaultUriBuilderFactory;, +		if (handler instanceof DefaultUriBuilderFactory) {, +			((DefaultUriBuilderFactory) handler).setDefaultUriVariables(defaultUriVariables);, +		}, +		else if (handler instanceof AbstractUriTemplateHandler) {, +		else {, +			throw new IllegalArgumentException(, +					"This property is not supported with the configured UriTemplateHandler.");, +		}, +	}, +++ b/spring-web/src/main/java/org/springframework/web/client/RestTemplate.java, +import org.springframework.web.util.DefaultUriBuilderFactory;, +	private UriTemplateHandler uriTemplateHandler = new DefaultUriBuilderFactory();, +	 * DefaultUriBuilderFactory factory = new DefaultUriBuilderFactory();, +	 * @param uriVars the default URI variable values, +	public void setDefaultUriVariables(Map<String, ?> uriVars) {, +		if (this.uriTemplateHandler instanceof DefaultUriBuilderFactory) {, +			((DefaultUriBuilderFactory) this.uriTemplateHandler).setDefaultUriVariables(uriVars);, +		}, +		else if (this.uriTemplateHandler instanceof AbstractUriTemplateHandler) {, +			((AbstractUriTemplateHandler) this.uriTemplateHandler).setDefaultUriVariables(uriVars);, +		}, +		else {, +			throw new IllegalArgumentException(, +					"This property is not supported with the configured UriTemplateHandler.");, +		}, +	 * By default the {@link DefaultUriBuilderFactory} is used which relies on, +++ b/spring-web/src/main/java/org/springframework/web/util/AbstractUriTemplateHandler.java, + * @deprecated as of 5.0 in favor of {@link DefaultUriBuilderFactory}]