[+++ b/spring-jdbc/src/test/java/org/springframework/jdbc/datasource/init/AbstractDatabasePopulatorTests.java, + * Copyright 2002-2017 the original author or authors., +	protected final ResourceDatabasePopulator databasePopulator = new ResourceDatabasePopulator();, +++ b/spring-jdbc/src/test/java/org/springframework/jdbc/datasource/init/AbstractDatabasePopulatorTests.java, + * Copyright 2002-2017 the original author or authors., +	protected final ResourceDatabasePopulator databasePopulator = new ResourceDatabasePopulator();, +++ b/spring-jdbc/src/test/java/org/springframework/jdbc/datasource/init/H2DatabasePopulatorTests.java, + * Copyright 2002-2017 the original author or authors., +import org.junit.Test;, +import static org.hamcrest.Matchers.*;, +import static org.junit.Assert.*;, +, +	/**, +	 * https://jira.spring.io/browse/SPR-15896, +	 *, +	 * @since 5.0, +	 */, +	@Test, +	public void scriptWithH2Alias() throws Exception {, +		databasePopulator.addScript(usersSchema());, +		databasePopulator.addScript(resource("db-test-data-h2-alias.sql"));, +		// Set statement separator to double newline so that ";" is not, +		// considered a statement separator within the source code of the, +		// aliased function 'REVERSE'., +		databasePopulator.setSeparator("\n\n");, +		DatabasePopulatorUtils.execute(databasePopulator, db);, +		String sql = "select REVERSE(first_name) from users where last_name='Brannen'";, +		assertThat(jdbcTemplate.queryForObject(sql, String.class), equalTo("maS"));, +	}, +, +++ b/spring-jdbc/src/test/java/org/springframework/jdbc/datasource/init/AbstractDatabasePopulatorTests.java, + * Copyright 2002-2017 the original author or authors., +	protected final ResourceDatabasePopulator databasePopulator = new ResourceDatabasePopulator();, +++ b/spring-jdbc/src/test/java/org/springframework/jdbc/datasource/init/H2DatabasePopulatorTests.java, + * Copyright 2002-2017 the original author or authors., +import org.junit.Test;, +import static org.hamcrest.Matchers.*;, +import static org.junit.Assert.*;, +, +	/**, +	 * https://jira.spring.io/browse/SPR-15896, +	 *, +	 * @since 5.0, +	 */, +	@Test, +	public void scriptWithH2Alias() throws Exception {, +		databasePopulator.addScript(usersSchema());, +		databasePopulator.addScript(resource("db-test-data-h2-alias.sql"));, +		// Set statement separator to double newline so that ";" is not, +		// considered a statement separator within the source code of the, +		// aliased function 'REVERSE'., +		databasePopulator.setSeparator("\n\n");, +		DatabasePopulatorUtils.execute(databasePopulator, db);, +		String sql = "select REVERSE(first_name) from users where last_name='Brannen'";, +		assertThat(jdbcTemplate.queryForObject(sql, String.class), equalTo("maS"));, +	}, +, +++ b/spring-jdbc/src/test/resources/org/springframework/jdbc/datasource/init/db-test-data-h2-alias.sql, +DROP ALIAS IF EXISTS REVERSE;, +, +-- REVERSE function borrowed from http://www.h2database.com/html/grammar.html#create_alias, +CREATE ALIAS REVERSE AS $$, +	String reverse(String s) {, +		return new StringBuilder(s).reverse().toString();, +	}, +$$;, +, +INSERT INTO users(first_name, last_name) values('Sam', 'Brannen');]