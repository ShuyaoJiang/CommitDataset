[+++ b/org.springframework.web.portlet/src/main/java/org/springframework/web/portlet/context/PortletWebRequest.java, +	/**, +	 * Last-modified handling not supported for portlet requests:, +	 * As a consequence, this method always returns <code>false</code>., +	 */, +	public boolean checkNotModified(String eTag) {, +		return false;, +	}, +, +++ b/org.springframework.web.portlet/src/main/java/org/springframework/web/portlet/context/PortletWebRequest.java, +	/**, +	 * Last-modified handling not supported for portlet requests:, +	 * As a consequence, this method always returns <code>false</code>., +	 */, +	public boolean checkNotModified(String eTag) {, +		return false;, +	}, +, +++ b/org.springframework.web/src/main/java/org/springframework/web/context/request/FacesWebRequest.java, +	public boolean checkNotModified(String eTag) {, +		return false;, +	}, +, +++ b/org.springframework.web.portlet/src/main/java/org/springframework/web/portlet/context/PortletWebRequest.java, +	/**, +	 * Last-modified handling not supported for portlet requests:, +	 * As a consequence, this method always returns <code>false</code>., +	 */, +	public boolean checkNotModified(String eTag) {, +		return false;, +	}, +, +++ b/org.springframework.web/src/main/java/org/springframework/web/context/request/FacesWebRequest.java, +	public boolean checkNotModified(String eTag) {, +		return false;, +	}, +, +++ b/org.springframework.web/src/main/java/org/springframework/web/context/request/ServletWebRequest.java, +	private static final String HEADER_ETAG = "ETag";, +, +	private static final String HEADER_IF_NONE_MATCH = "If-None-Match";, +, +	private static final String METHOD_GET = "GET";, +	, +				if (this.notModified && METHOD_GET.equals(getRequest().getMethod())) {, +	public boolean checkNotModified(String eTag) {, +		if (StringUtils.hasLength(eTag) && !this.notModified &&, +				(this.response == null || !this.response.containsHeader(HEADER_ETAG))) {, +			if (!eTag.startsWith("\"")) {, +				eTag = "\"" + eTag;, +			}, +			if (!eTag.endsWith("\"")) {, +				eTag = eTag + "\"";, +			}, +			String ifNoneMatch = getRequest().getHeader(HEADER_IF_NONE_MATCH);, +			this.notModified = eTag.equals(ifNoneMatch);, +			if (this.response != null) {, +				if (this.notModified && METHOD_GET.equals(getRequest().getMethod())) {, +					this.response.setStatus(HttpServletResponse.SC_NOT_MODIFIED);, +				}, +				else {, +					this.response.setHeader(HEADER_ETAG, eTag);, +				}, +			}, +		}, +		return this.notModified;, +, +	}, +, +++ b/org.springframework.web.portlet/src/main/java/org/springframework/web/portlet/context/PortletWebRequest.java, +	/**, +	 * Last-modified handling not supported for portlet requests:, +	 * As a consequence, this method always returns <code>false</code>., +	 */, +	public boolean checkNotModified(String eTag) {, +		return false;, +	}, +, +++ b/org.springframework.web/src/main/java/org/springframework/web/context/request/FacesWebRequest.java, +	public boolean checkNotModified(String eTag) {, +		return false;, +	}, +, +++ b/org.springframework.web/src/main/java/org/springframework/web/context/request/ServletWebRequest.java, +	private static final String HEADER_ETAG = "ETag";, +, +	private static final String HEADER_IF_NONE_MATCH = "If-None-Match";, +, +	private static final String METHOD_GET = "GET";, +	, +				if (this.notModified && METHOD_GET.equals(getRequest().getMethod())) {, +	public boolean checkNotModified(String eTag) {, +		if (StringUtils.hasLength(eTag) && !this.notModified &&, +				(this.response == null || !this.response.containsHeader(HEADER_ETAG))) {, +			if (!eTag.startsWith("\"")) {, +				eTag = "\"" + eTag;, +			}, +			if (!eTag.endsWith("\"")) {, +				eTag = eTag + "\"";, +			}]