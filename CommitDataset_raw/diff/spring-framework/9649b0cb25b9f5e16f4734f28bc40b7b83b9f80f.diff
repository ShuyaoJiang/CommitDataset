[+++ b/spring-beans/src/main/java/org/springframework/beans/factory/support/DefaultListableBeanFactory.java, +	@SuppressWarnings("unchecked"), +				Object beanInstance = getBean(beanName);, +				result.put(beanName, (beanInstance instanceof NullBean ? null : (T) beanInstance));, +++ b/spring-beans/src/main/java/org/springframework/beans/factory/support/DefaultListableBeanFactory.java, +	@SuppressWarnings("unchecked"), +				Object beanInstance = getBean(beanName);, +				result.put(beanName, (beanInstance instanceof NullBean ? null : (T) beanInstance));, +++ b/spring-beans/src/test/java/org/springframework/beans/factory/annotation/AutowiredAnnotationBeanPostProcessorTests.java, +, +		Map<String, NestedTestBean> map = bf.getBeansOfType(NestedTestBean.class);, +		assertNull(map.get("nestedTestBean1"));, +		assertSame(ntb2, map.get("nestedTestBean2"));, +]