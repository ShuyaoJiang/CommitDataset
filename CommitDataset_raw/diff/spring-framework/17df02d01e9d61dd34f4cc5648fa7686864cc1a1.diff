[+++ b/src/asciidoc/testing.adoc, +When you test application code that manipulates the state of the Hibernate or JPA session,, +make sure to __flush__ the underlying session within test methods that execute that code., +this applies to any ORM frameworks that maintain an in-memory __unit of work__., +		// False positive: an exception will be thrown once the Hibernate, +		// Session is finally flushed (i.e., in production code), +	@Test(expected = ...), +, +Or for JPA:, +, +[source,java,indent=0], +[subs="verbatim,quotes"], +----, +	// ..., +, +	@Autowired, +	private EntityManager entityManager;, +, +	@Test // no expected exception!, +	public void falsePositive() {, +		updateEntityInJpaTransaction();, +		// False positive: an exception will be thrown once the JPA, +		// EntityManager is finally flushed (i.e., in production code), +	}, +, +	@Test(expected = ...), +	public void updateWithEntityManagerFlush() {, +		updateEntityInJpaTransaction();, +		// Manual flush is required to avoid false positive in test, +		entityManager.flush();, +	}, +, +	// ..., +----]