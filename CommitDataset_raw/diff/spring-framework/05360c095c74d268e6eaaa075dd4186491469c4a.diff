[+++ b/org.springframework.web/src/test/java/org/springframework/web/util/UrlPathHelperTests.java, +import org.junit.Before;, +import org.junit.Test;, +import org.springframework.mock.web.MockHttpServletRequest;, +, + * @author Costin Leau, +	private static final String WEBSPHERE_URI_ATTRIBUTE = "com.ibm.websphere.servlet.uri_non_decoded";, +, +	//, +	// suite of tests root requests for default servlets (SRV 11.2) on Websphere vs Tomcat and other containers, +	// see: http://jira.springframework.org/browse/SPR-7064, +	// , +, +, +	//, +	// / mapping (default servlet), +	//, +, +	@Test, +	public void tomcatDefaultServletRoot() throws Exception {, +		request.setContextPath("/test");, +		request.setPathInfo(null);, +		request.setServletPath("/");, +		request.setRequestURI("/test/");, +, +		assertEquals("/", helper.getLookupPathForRequest(request));, +	}, +, +	@Test, +	public void tomcatDefaultServletFile() throws Exception {, +		request.setContextPath("/test");, +		request.setPathInfo(null);, +		request.setServletPath("/foo");, +		request.setRequestURI("/test/foo");, +, +		assertEquals("/foo", helper.getLookupPathForRequest(request));, +	}, +, +	@Test, +	public void tomcatDefaultServletFolder() throws Exception {, +		request.setContextPath("/test");, +		request.setPathInfo(null);, +		request.setServletPath("/foo/");, +		request.setRequestURI("/test/foo/");, +, +		assertEquals("/foo/", helper.getLookupPathForRequest(request));, +	}, +, +, +	@Test, +	public void wasDefaultServletRoot() throws Exception {, +		request.setContextPath("/test");, +		request.setPathInfo("/");, +		request.setServletPath("");, +		request.setRequestURI("/test/");, +		request.setAttribute(WEBSPHERE_URI_ATTRIBUTE, "/test/");, +, +		assertEquals("/", helper.getLookupPathForRequest(request));, +	}, +, +	@Test, +	public void wasDefaultServletFile() throws Exception {, +		request.setContextPath("/test");, +		request.setPathInfo("/foo");, +		request.setServletPath("");, +		request.setRequestURI("/test/foo");, +		request.setAttribute(WEBSPHERE_URI_ATTRIBUTE, "/test/foo");, +, +		assertEquals("/foo", helper.getLookupPathForRequest(request));, +	}, +, +	@Test, +	public void wasDefaultServletFolder() throws Exception {, +		request.setContextPath("/test");, +		request.setPathInfo("/foo/");, +		request.setServletPath("");, +		request.setRequestURI("/test/foo/");, +		request.setAttribute(WEBSPHERE_URI_ATTRIBUTE, "/test/foo/");, +, +		assertEquals("/foo/", helper.getLookupPathForRequest(request));, +	}, +, +	//, +	// /foo/* mapping, +	//, +, +	@Test, +	public void tomcatCasualServletRoot() throws Exception {, +		request.setContextPath("/test");, +		request.setPathInfo("/");, +		request.setServletPath("/foo");, +		request.setRequestURI("/test/foo/");, +, +		assertEquals("/", helper.getLookupPathForRequest(request));, +	}, +, +	// test the root mapping for /foo/* w/o a trailing slash - <host>/<context>/foo, +	@Test, +	public void tomcatCasualServletRootWithMissingSlash() throws Exception {, +		request.setContextPath("/test");]