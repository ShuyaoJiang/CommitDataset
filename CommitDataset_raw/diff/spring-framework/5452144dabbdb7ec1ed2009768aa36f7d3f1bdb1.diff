[+++ b/spring-orm/src/main/java/org/springframework/orm/jpa/vendor/HibernateJpaDialect.java, +		Integer previousIsolationLevel = null;, +		boolean resetConnection = false;, +, +				resetConnection = true;, +		FlushMode previousFlushMode = prepareFlushMode(session, definition.isReadOnly());, +		return new SessionTransactionData(session, previousFlushMode, resetConnection, previousIsolationLevel);, +		Session session = getSession(entityManager);, +		FlushMode previousFlushMode = prepareFlushMode(session, readOnly);, +		return new SessionTransactionData(session, previousFlushMode, false, null);, +	protected FlushMode prepareFlushMode(Session session, boolean readOnly) throws PersistenceException {, +			if (!flushMode.equals(FlushMode.MANUAL)) {, +				return flushMode;, +			}, +				return flushMode;, +		// No FlushMode change needed..., +		return null;, +	protected Session getSession(EntityManager entityManager) {, +		return entityManager.unwrap(Session.class);, +		private final boolean resetConnection;, +			this.resetConnection = resetConnection;, +			if (this.resetConnection && this.session.isConnected()) {]