[+++ b/spring-web-reactive/src/main/java/org/springframework/web/reactive/socket/server/upgrade/JettyRequestUpgradeStrategy.java, +++ b/spring-web-reactive/src/main/java/org/springframework/web/reactive/socket/server/upgrade/JettyRequestUpgradeStrategy.java, +++ b/spring-web/src/test/java/org/springframework/http/server/reactive/bootstrap/JettyHttpServer.java, +	private ServletContextHandler contextHandler;, +, +		this.contextHandler = new ServletContextHandler(this.jettyServer, "", false, false);, +		this.contextHandler.addServlet(servletHolder, "/");, +		this.contextHandler.start();, +				if (this.contextHandler.isRunning()) {, +					this.contextHandler.stop();, +				}, +			finally {, +				try {, +					if (this.jettyServer.isRunning()) {, +						this.jettyServer.setStopTimeout(5000);, +						this.jettyServer.stop();, +						this.jettyServer.destroy();, +					}, +				}, +				catch (Exception ex) {, +					throw new IllegalStateException(ex);, +				}, +			}]