[+++ b/spring-aop/src/main/java/org/springframework/aop/aspectj/annotation/AspectJProxyFactory.java, + * Copyright 2002-2015 the original author or authors., +import org.springframework.core.annotation.AnnotationAwareOrderComparator;, +		AnnotationAwareOrderComparator.sort(advisors);, +++ b/spring-aop/src/main/java/org/springframework/aop/aspectj/annotation/AspectJProxyFactory.java, + * Copyright 2002-2015 the original author or authors., +import org.springframework.core.annotation.AnnotationAwareOrderComparator;, +		AnnotationAwareOrderComparator.sort(advisors);, +++ b/spring-aop/src/main/java/org/springframework/aop/aspectj/autoproxy/AspectJPrecedenceComparator.java, + * Copyright 2002-2015 the original author or authors., +import org.springframework.core.annotation.AnnotationAwareOrderComparator;, +		this.advisorComparator = AnnotationAwareOrderComparator.INSTANCE;, +++ b/spring-aop/src/main/java/org/springframework/aop/aspectj/annotation/AspectJProxyFactory.java, + * Copyright 2002-2015 the original author or authors., +import org.springframework.core.annotation.AnnotationAwareOrderComparator;, +		AnnotationAwareOrderComparator.sort(advisors);, +++ b/spring-aop/src/main/java/org/springframework/aop/aspectj/autoproxy/AspectJPrecedenceComparator.java, + * Copyright 2002-2015 the original author or authors., +import org.springframework.core.annotation.AnnotationAwareOrderComparator;, +		this.advisorComparator = AnnotationAwareOrderComparator.INSTANCE;, +++ b/spring-aop/src/main/java/org/springframework/aop/framework/ProxyFactoryBean.java, + * Copyright 2002-2015 the original author or authors., +import org.springframework.core.annotation.AnnotationAwareOrderComparator;, +		AnnotationAwareOrderComparator.sort(beans);, +++ b/spring-aop/src/main/java/org/springframework/aop/aspectj/annotation/AspectJProxyFactory.java, + * Copyright 2002-2015 the original author or authors., +import org.springframework.core.annotation.AnnotationAwareOrderComparator;, +		AnnotationAwareOrderComparator.sort(advisors);, +++ b/spring-aop/src/main/java/org/springframework/aop/aspectj/autoproxy/AspectJPrecedenceComparator.java, + * Copyright 2002-2015 the original author or authors., +import org.springframework.core.annotation.AnnotationAwareOrderComparator;, +		this.advisorComparator = AnnotationAwareOrderComparator.INSTANCE;, +++ b/spring-aop/src/main/java/org/springframework/aop/framework/ProxyFactoryBean.java, + * Copyright 2002-2015 the original author or authors., +import org.springframework.core.annotation.AnnotationAwareOrderComparator;, +		AnnotationAwareOrderComparator.sort(beans);, +++ b/spring-aop/src/main/java/org/springframework/aop/framework/autoproxy/AbstractAdvisorAutoProxyCreator.java, + * Copyright 2002-2015 the original author or authors., +import org.springframework.core.annotation.AnnotationAwareOrderComparator;, +	 * @see org.springframework.core.annotation.Order, +	 * @see org.springframework.core.annotation.AnnotationAwareOrderComparator, +		AnnotationAwareOrderComparator.sort(advisors);, +++ b/spring-aop/src/main/java/org/springframework/aop/aspectj/annotation/AspectJProxyFactory.java, + * Copyright 2002-2015 the original author or authors., +import org.springframework.core.annotation.AnnotationAwareOrderComparator;, +		AnnotationAwareOrderComparator.sort(advisors);, +++ b/spring-aop/src/main/java/org/springframework/aop/aspectj/autoproxy/AspectJPrecedenceComparator.java, + * Copyright 2002-2015 the original author or authors., +import org.springframework.core.annotation.AnnotationAwareOrderComparator;, +		this.advisorComparator = AnnotationAwareOrderComparator.INSTANCE;, +++ b/spring-aop/src/main/java/org/springframework/aop/framework/ProxyFactoryBean.java, + * Copyright 2002-2015 the original author or authors., +import org.springframework.core.annotation.AnnotationAwareOrderComparator;, +		AnnotationAwareOrderComparator.sort(beans);, +++ b/spring-aop/src/main/java/org/springframework/aop/framework/autoproxy/AbstractAdvisorAutoProxyCreator.java, + * Copyright 2002-2015 the original author or authors., +import org.springframework.core.annotation.AnnotationAwareOrderComparator;, +	 * @see org.springframework.core.annotation.Order, +	 * @see org.springframework.core.annotation.AnnotationAwareOrderComparator, +		AnnotationAwareOrderComparator.sort(advisors);, +++ b/spring-context/src/main/java/org/springframework/context/support/PostProcessorRegistrationDelegate.java, +import java.util.Collections;, +import java.util.Comparator;, +import org.springframework.beans.factory.support.DefaultListableBeanFactory;, +			sortPostProcessors(beanFactory, priorityOrderedPostProcessors);, +			sortPostProcessors(beanFactory, orderedPostProcessors);, +		sortPostProcessors(beanFactory, priorityOrderedPostProcessors);, +		sortPostProcessors(beanFactory, orderedPostProcessors);, +		sortPostProcessors(beanFactory, priorityOrderedPostProcessors);, +		sortPostProcessors(beanFactory, orderedPostProcessors);, +		sortPostProcessors(beanFactory, internalPostProcessors);, +	private static void sortPostProcessors(ConfigurableListableBeanFactory beanFactory, List<?> postProcessors) {, +		Comparator<Object> comparatorToUse = null;, +		if (beanFactory instanceof DefaultListableBeanFactory) {, +			comparatorToUse = ((DefaultListableBeanFactory) beanFactory).getDependencyComparator();, +		}, +		if (comparatorToUse == null) {, +			comparatorToUse = OrderComparator.INSTANCE;, +		}, +		Collections.sort(postProcessors, comparatorToUse);, +	}, +, +++ b/spring-aop/src/main/java/org/springframework/aop/aspectj/annotation/AspectJProxyFactory.java, + * Copyright 2002-2015 the original author or authors., +import org.springframework.core.annotation.AnnotationAwareOrderComparator;, +		AnnotationAwareOrderComparator.sort(advisors);, +++ b/spring-aop/src/main/java/org/springframework/aop/aspectj/autoproxy/AspectJPrecedenceComparator.java, + * Copyright 2002-2015 the original author or authors., +import org.springframework.core.annotation.AnnotationAwareOrderComparator;, +		this.advisorComparator = AnnotationAwareOrderComparator.INSTANCE;, +++ b/spring-aop/src/main/java/org/springframework/aop/framework/ProxyFactoryBean.java, + * Copyright 2002-2015 the original author or authors., +import org.springframework.core.annotation.AnnotationAwareOrderComparator;, +		AnnotationAwareOrderComparator.sort(beans);, +++ b/spring-aop/src/main/java/org/springframework/aop/framework/autoproxy/AbstractAdvisorAutoProxyCreator.java, + * Copyright 2002-2015 the original author or authors., +import org.springframework.core.annotation.AnnotationAwareOrderComparator;, +	 * @see org.springframework.core.annotation.Order, +	 * @see org.springframework.core.annotation.AnnotationAwareOrderComparator, +		AnnotationAwareOrderComparator.sort(advisors);]