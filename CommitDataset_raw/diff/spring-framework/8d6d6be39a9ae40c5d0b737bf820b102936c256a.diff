[+++ b/spring-context/src/main/java/org/springframework/jmx/support/MBeanRegistrationSupport.java, +	private final Set<ObjectName> registeredBeans = new LinkedHashSet<ObjectName>();, +		ObjectName actualObjectName;, +, +		synchronized (this.registeredBeans) {, +			actualObjectName = (registeredBean != null ? registeredBean.getObjectName() : null);, +		}, +, +		Set<ObjectName> snapshot;, +		synchronized (this.registeredBeans) {, +			snapshot = new LinkedHashSet<ObjectName>(this.registeredBeans);, +		}, +		for (ObjectName objectName : snapshot) {, +		boolean actuallyUnregistered = false;, +, +		synchronized (this.registeredBeans) {, +			if (this.registeredBeans.remove(objectName)) {, +					// MBean might already have been unregistered by an external process, +						actuallyUnregistered = true;, +			}, +		}, +, +		if (actuallyUnregistered) {, +			onUnregister(objectName);, +		}, +		synchronized (this.registeredBeans) {, +	}]