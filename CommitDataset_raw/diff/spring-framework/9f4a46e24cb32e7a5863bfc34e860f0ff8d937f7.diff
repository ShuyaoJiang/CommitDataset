[+++ b/org.springframework.integration-tests/src/test/java/org/springframework/orm/hibernate3/HibernateSessionFactoryConfigurationTests.java, +import org.springframework.core.InfrastructureProxy;, +		assertThat(sessionFactory, instanceOf(InfrastructureProxy.class));, +++ b/org.springframework.integration-tests/src/test/java/org/springframework/orm/hibernate3/HibernateSessionFactoryConfigurationTests.java, +import org.springframework.core.InfrastructureProxy;, +		assertThat(sessionFactory, instanceOf(InfrastructureProxy.class));, +++ b/org.springframework.orm/src/main/java/org/springframework/orm/hibernate3/SessionFactoryBuilderSupport.java, +import org.springframework.core.InfrastructureProxy;, +				InfrastructureProxy.class,, +					if (method.equals(InfrastructureProxy.class.getMethod("getWrappedObject"))) {, +						return rawSf;, +					}]