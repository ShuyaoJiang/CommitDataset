[+++ b/org.springframework.test/src/main/java/org/springframework/test/context/ContextLoaderUtils.java, +import java.util.LinkedHashSet;, +import java.util.Set;, +		final Set<String> activeProfiles = new LinkedHashSet<String>();, +					activeProfiles.add(profile);, +		return StringUtils.toStringArray(activeProfiles);, +++ b/org.springframework.test/src/main/java/org/springframework/test/context/ContextLoaderUtils.java, +import java.util.LinkedHashSet;, +import java.util.Set;, +		final Set<String> activeProfiles = new LinkedHashSet<String>();, +					activeProfiles.add(profile);, +		return StringUtils.toStringArray(activeProfiles);, +++ b/org.springframework.test/src/test/java/org/springframework/test/context/ContextLoaderUtilsTests.java, +import static org.junit.Assert.assertTrue;, +, +import java.util.Arrays;, +import java.util.List;, +	public void resolveActivatedProfilesWithDuplicatedProfiles() {, +		String[] profiles = ContextLoaderUtils.resolveActivatedProfiles(DuplicatedProfiles.class);, +		assertNotNull(profiles);, +		assertEquals(3, profiles.length);, +, +		List<String> list = Arrays.asList(profiles);, +		assertTrue(list.contains("foo"));, +		assertTrue(list.contains("bar"));, +		assertTrue(list.contains("baz"));, +	}, +, +	@Test, +, +		List<String> list = Arrays.asList(profiles);, +		assertTrue(list.contains("foo"));, +		assertTrue(list.contains("bar"));, +, +		List<String> list = Arrays.asList(profiles);, +		assertTrue(list.contains("dog"));, +		assertTrue(list.contains("cat"));, +	@ActivateProfiles({ "foo", "bar", "foo", "bar", "baz" }), +	private static class DuplicatedProfiles {, +	}, +]