[+++ b/org.springframework.oxm/build.xml, +	<property name="test.castor.dir" value="${target.dir}/castor/staging/test"/>, +	<property name="test.jaxb.dir" value="${target.dir}/jaxb/staging/test"/>, +, +	<macrodef name="test-compile">, +		<attribute name="classpath.id"/>, +		<attribute name="input.dir"/>, +		<attribute name="output.dir"/>, +		<attribute name="resources.dir"/>, +		<sequential>, +			<delete quiet="true" dir="@{output.dir}"/>, +			<mkdir dir="@{output.dir}"/>, +, +			<!-- Castor -->, +			<ivy:cachepath resolveId="castor.classpath" pathid="castor.classpath" organisation="org.codehaus.castor", +					module="com.springsource.org.castor.anttask" revision="1.2.0" conf="runtime" type="jar", +					inline="true" log="download-only"/>, +			<taskdef name="castor" classname="org.castor.anttask.CastorCodeGenTask" classpathref="castor.classpath"/>, +, +			<delete quiet="true" dir="${test.castor.dir}" />, +			<mkdir dir="${test.castor.dir}" />, +, +			<castor types="j2" warnings="false" file="${schema}" todir="${test.castor.dir}", +					package="org.springframework.oxm.castor"/>, +			<do-compile classpath.id="@{classpath.id}" input.dir="${test.castor.dir}" output.dir="@{output.dir}", +					resources.dir="${test.castor.dir}"/>, +, +			<!-- JAXB2 -->, +		    <ivy:cachepath resolveId="jaxb.classpath" pathid="jaxb.classpath" organisation="com.sun.xml", +					module="com.springsource.com.sun.tools.xjc" revision="2.1.7" conf="runtime" type="jar" inline="true", +					log="download-only"/>, +			<taskdef name="xjc" classname="com.sun.tools.xjc.XJCTask" classpathref="jaxb.classpath"/>, +, +			<delete quiet="true" dir="${test.jaxb.dir}" />, +			<mkdir dir="${test.jaxb.dir}" />, +, +			<xjc destdir="${test.jaxb.dir}" package="org.springframework.oxm.jaxb" schema="${schema}">, +				<produces dir="${test.jaxb.dir}" includes="**/*.java"/>, +			</xjc>, +			<do-compile classpath.id="@{classpath.id}" input.dir="${test.jaxb.dir}" output.dir="@{output.dir}", +					resources.dir="${test.jaxb.dir}"/>, +, +			<!-- Standard Compile -->, +			<test-pre-compile classpath.id="@{classpath.id}" input.dir="@{input.dir}" output.dir="@{output.dir}", +					resources.dir="@{resources.dir}"/>, +			<do-compile classpath.id="@{classpath.id}" input.dir="@{input.dir}" output.dir="@{output.dir}", +					resources.dir="@{resources.dir}"/>, +			<test-post-compile classpath.id="@{classpath.id}" input.dir="@{input.dir}" output.dir="@{output.dir}", +					resources.dir="@{resources.dir}"/>, +		</sequential>, +	</macrodef>, +			<taskdef name="xmlbeans" classname="org.apache.xmlbeans.impl.tool.XMLBean" classpathref="xmlbeans.classpath"/>, +			<!-- JiBX -->]