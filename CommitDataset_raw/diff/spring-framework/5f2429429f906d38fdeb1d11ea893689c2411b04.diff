[+++ b/spring-web/src/main/java/org/springframework/web/context/request/RequestContextListener.java, + * Copyright 2002-2014 the original author or authors., +		ServletRequestAttributes attributes = null;, +		Object reqAttr = requestEvent.getServletRequest().getAttribute(REQUEST_ATTRIBUTES_ATTRIBUTE);, +		if (reqAttr instanceof ServletRequestAttributes) {, +			attributes = (ServletRequestAttributes) reqAttr;, +		}, +		RequestAttributes threadAttributes = RequestContextHolder.getRequestAttributes();, +			if (attributes == null && threadAttributes instanceof ServletRequestAttributes) {, +				attributes = (ServletRequestAttributes) threadAttributes;, +			}]