[+++ b/org.springframework.web.portlet/src/main/java/org/springframework/web/portlet/FrameworkPortlet.java, +		PortletRequestAttributes requestAttributes = null;, +		if (previousRequestAttributes == null || previousRequestAttributes.getClass().equals(PortletRequestAttributes.class)) {, +			requestAttributes = new PortletRequestAttributes(request);, +		}, +			// Clear request attributes and reset thread-bound context., +			if (requestAttributes != null) {, +				RequestContextHolder.setRequestAttributes(previousRequestAttributes, this.threadContextInheritable);, +			}, +++ b/org.springframework.web.portlet/src/main/java/org/springframework/web/portlet/FrameworkPortlet.java, +		PortletRequestAttributes requestAttributes = null;, +		if (previousRequestAttributes == null || previousRequestAttributes.getClass().equals(PortletRequestAttributes.class)) {, +			requestAttributes = new PortletRequestAttributes(request);, +		}, +			// Clear request attributes and reset thread-bound context., +			if (requestAttributes != null) {, +				RequestContextHolder.setRequestAttributes(previousRequestAttributes, this.threadContextInheritable);, +			}, +++ b/org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/FrameworkServlet.java, +		ServletRequestAttributes requestAttributes = null;, +		if (previousRequestAttributes == null || previousRequestAttributes.getClass().equals(ServletRequestAttributes.class)) {, +			requestAttributes = new ServletRequestAttributes(request);, +		}, +			// Clear request attributes and reset thread-bound context., +			if (requestAttributes != null) {, +				RequestContextHolder.setRequestAttributes(previousRequestAttributes, this.threadContextInheritable);, +			}, +++ b/org.springframework.web.portlet/src/main/java/org/springframework/web/portlet/FrameworkPortlet.java, +		PortletRequestAttributes requestAttributes = null;, +		if (previousRequestAttributes == null || previousRequestAttributes.getClass().equals(PortletRequestAttributes.class)) {, +			requestAttributes = new PortletRequestAttributes(request);, +		}, +			// Clear request attributes and reset thread-bound context., +			if (requestAttributes != null) {, +				RequestContextHolder.setRequestAttributes(previousRequestAttributes, this.threadContextInheritable);, +			}, +++ b/org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/FrameworkServlet.java, +		ServletRequestAttributes requestAttributes = null;, +		if (previousRequestAttributes == null || previousRequestAttributes.getClass().equals(ServletRequestAttributes.class)) {, +			requestAttributes = new ServletRequestAttributes(request);, +		}, +			// Clear request attributes and reset thread-bound context., +			if (requestAttributes != null) {, +				RequestContextHolder.setRequestAttributes(previousRequestAttributes, this.threadContextInheritable);, +			}, +++ b/org.springframework.web/src/main/java/org/springframework/web/context/request/RequestContextListener.java, + * Copyright 2002-2009 the original author or authors., +			RequestContextHolder.resetRequestAttributes();, +++ b/org.springframework.web.portlet/src/main/java/org/springframework/web/portlet/FrameworkPortlet.java, +		PortletRequestAttributes requestAttributes = null;, +		if (previousRequestAttributes == null || previousRequestAttributes.getClass().equals(PortletRequestAttributes.class)) {, +			requestAttributes = new PortletRequestAttributes(request);, +		}, +			// Clear request attributes and reset thread-bound context., +			if (requestAttributes != null) {, +				RequestContextHolder.setRequestAttributes(previousRequestAttributes, this.threadContextInheritable);, +			}, +++ b/org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/FrameworkServlet.java, +		ServletRequestAttributes requestAttributes = null;, +		if (previousRequestAttributes == null || previousRequestAttributes.getClass().equals(ServletRequestAttributes.class)) {, +			requestAttributes = new ServletRequestAttributes(request);, +		}, +			// Clear request attributes and reset thread-bound context., +			if (requestAttributes != null) {, +				RequestContextHolder.setRequestAttributes(previousRequestAttributes, this.threadContextInheritable);, +			}, +++ b/org.springframework.web/src/main/java/org/springframework/web/context/request/RequestContextListener.java, + * Copyright 2002-2009 the original author or authors., +			RequestContextHolder.resetRequestAttributes();, +++ b/org.springframework.web/src/main/java/org/springframework/web/filter/RequestContextFilter.java, + * Copyright 2002-2009 the original author or authors., +			RequestContextHolder.resetRequestAttributes();]