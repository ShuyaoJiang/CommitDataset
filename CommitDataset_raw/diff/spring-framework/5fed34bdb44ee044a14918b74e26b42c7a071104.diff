[+++ b/org.springframework.beans/src/test/java/org/springframework/beans/factory/support/BeanFactoryGenericsTests.java, + * Copyright 2002-2009 the original author or authors., +import static org.junit.Assert.*;, +import test.beans.GenericBean;, +import test.beans.GenericIntegerBean;, +import test.beans.GenericSetOfIntegerBean;, +import test.beans.TestBean;, +, +import org.springframework.beans.factory.BeanCreationException;, +	public void testGenericListPropertyWithInvalidElementType() {, +		DefaultListableBeanFactory bf = new DefaultListableBeanFactory();, +		RootBeanDefinition rbd = new RootBeanDefinition(GenericIntegerBean.class);, +, +		List input = new ArrayList();, +		input.add(1);, +		rbd.getPropertyValues().addPropertyValue("testBeanList", input);, +, +		bf.registerBeanDefinition("genericBean", rbd);, +		try {, +			bf.getBean("genericBean");, +			fail("Should have thrown BeanCreationException");, +		}, +		catch (BeanCreationException ex) {, +			assertTrue(ex.getMessage().contains("genericBean") && ex.getMessage().contains("testBeanList[0]"));, +			assertTrue(ex.getMessage().contains(TestBean.class.getName()) && ex.getMessage().contains("Integer"));, +		}, +	}, +, +	@Test, +++ b/org.springframework.beans/src/test/java/org/springframework/beans/factory/support/BeanFactoryGenericsTests.java, + * Copyright 2002-2009 the original author or authors., +import static org.junit.Assert.*;, +import test.beans.GenericBean;, +import test.beans.GenericIntegerBean;, +import test.beans.GenericSetOfIntegerBean;, +import test.beans.TestBean;, +, +import org.springframework.beans.factory.BeanCreationException;, +	public void testGenericListPropertyWithInvalidElementType() {, +		DefaultListableBeanFactory bf = new DefaultListableBeanFactory();, +		RootBeanDefinition rbd = new RootBeanDefinition(GenericIntegerBean.class);, +, +		List input = new ArrayList();, +		input.add(1);, +		rbd.getPropertyValues().addPropertyValue("testBeanList", input);, +, +		bf.registerBeanDefinition("genericBean", rbd);, +		try {, +			bf.getBean("genericBean");, +			fail("Should have thrown BeanCreationException");, +		}, +		catch (BeanCreationException ex) {, +			assertTrue(ex.getMessage().contains("genericBean") && ex.getMessage().contains("testBeanList[0]"));, +			assertTrue(ex.getMessage().contains(TestBean.class.getName()) && ex.getMessage().contains("Integer"));, +		}, +	}, +, +	@Test, +++ b/org.springframework.beans/src/test/java/test/beans/GenericBean.java, +	private List<TestBean> testBeanList;, +, +	public List<TestBean> getTestBeanList() {, +		return testBeanList;, +	}, +, +	public void setTestBeanList(List<TestBean> testBeanList) {, +		this.testBeanList = testBeanList;, +	}, +]