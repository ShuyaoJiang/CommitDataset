[+++ b/spring-web/src/main/java/org/springframework/http/client/Netty4ClientHttpRequestFactory.java, +import javax.net.ssl.SSLException;, +import io.netty.handler.ssl.SslContextBuilder;, + * @author Brian Clozel, +	private volatile Bootstrap sslBootstrap;, +, +	private SslContext getDefaultClientSslContext() {, +		try {, +			return SslContextBuilder.forClient().build();, +		}, +		catch (SSLException exc) {, +			throw new IllegalStateException("Could not create default client SslContext", exc);, +		}, +	}, +, +	 * <p>A default client SslContext is configured if none has been provided., +	private Bootstrap getBootstrap(URI uri) {, +		boolean isSecure = (uri.getPort() == 443), +				|| (uri.getPort() == -1 && "https".equalsIgnoreCase(uri.getScheme()));, +		if (isSecure) {, +			if (this.sslBootstrap == null) {, +				this.sslBootstrap = buildBootstrap(true);, +			}, +			return this.sslBootstrap;, +		}, +		else {, +				this.bootstrap = buildBootstrap(false);, +			}, +			return this.bootstrap;, +		}, +	}, +, +	private Bootstrap buildBootstrap(boolean isSecure) {, +						if (isSecure) {, +							Assert.notNull(sslContext, "sslContext should not be null");, +		return bootstrap;, +	public void afterPropertiesSet() throws Exception {, +		if (this.sslContext == null) {, +			this.sslContext = getDefaultClientSslContext();, +	}, +		return new Netty4ClientHttpRequest(getBootstrap(uri), uri, httpMethod);]