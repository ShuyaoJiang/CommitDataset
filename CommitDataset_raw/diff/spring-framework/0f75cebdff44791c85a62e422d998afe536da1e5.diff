[+++ b/org.springframework.transaction/src/main/java/org/springframework/transaction/interceptor/TransactionAspectUtils.java, + * Copyright 2002-2011 the original author or authors., +import org.springframework.beans.factory.NoSuchBeanDefinitionException;, +		if (bf.containsBean(beanName)) {, +			try {, +			catch (NoSuchBeanDefinitionException ex) {, +				// ignore - can't compare qualifiers for a manually registered singleton object, +			}, +		}, +++ b/org.springframework.transaction/src/main/java/org/springframework/transaction/interceptor/TransactionAspectUtils.java, + * Copyright 2002-2011 the original author or authors., +import org.springframework.beans.factory.NoSuchBeanDefinitionException;, +		if (bf.containsBean(beanName)) {, +			try {, +			catch (NoSuchBeanDefinitionException ex) {, +				// ignore - can't compare qualifiers for a manually registered singleton object, +			}, +		}, +++ b/org.springframework.transaction/src/test/java/org/springframework/transaction/config/AnnotationDrivenTests.java, + * Copyright 2002-2011 the original author or authors., +import org.springframework.context.ApplicationContext;, +import org.springframework.context.annotation.AnnotationConfigApplicationContext;, +		doTestWithMultipleTransactionManagers(context);, +		AnnotationConfigApplicationContext parent = new AnnotationConfigApplicationContext();, +		parent.register(TransactionManagerConfiguration.class);, +		parent.refresh();, +		ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(new String[] {"annotationDrivenConfigurationClassTests.xml"}, getClass(), parent);, +		doTestWithMultipleTransactionManagers(context);, +	}, +, +	private void doTestWithMultipleTransactionManagers(ApplicationContext context) {, +++ b/org.springframework.transaction/src/main/java/org/springframework/transaction/interceptor/TransactionAspectUtils.java, + * Copyright 2002-2011 the original author or authors., +import org.springframework.beans.factory.NoSuchBeanDefinitionException;, +		if (bf.containsBean(beanName)) {, +			try {, +			catch (NoSuchBeanDefinitionException ex) {, +				// ignore - can't compare qualifiers for a manually registered singleton object, +			}, +		}, +++ b/org.springframework.transaction/src/test/java/org/springframework/transaction/config/AnnotationDrivenTests.java, + * Copyright 2002-2011 the original author or authors., +import org.springframework.context.ApplicationContext;, +import org.springframework.context.annotation.AnnotationConfigApplicationContext;, +		doTestWithMultipleTransactionManagers(context);, +		AnnotationConfigApplicationContext parent = new AnnotationConfigApplicationContext();, +		parent.register(TransactionManagerConfiguration.class);, +		parent.refresh();, +		ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(new String[] {"annotationDrivenConfigurationClassTests.xml"}, getClass(), parent);, +		doTestWithMultipleTransactionManagers(context);, +	}, +, +	private void doTestWithMultipleTransactionManagers(ApplicationContext context) {, +++ b/org.springframework.transaction/src/test/java/org/springframework/transaction/config/annotationDrivenConfigurationClassTests.xml]