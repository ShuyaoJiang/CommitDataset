[+++ b/org.springframework.expression/src/main/java/org/springframework/expression/spel/standard/InternalSpelExpressionParser.java, +		if (peekToken()==null) {, +			// unexpectedly ran out of data , +			raiseInternalException(t.startpos,SpelMessage.OOD);, +		} else {, +		}, +++ b/org.springframework.expression/src/main/java/org/springframework/expression/spel/standard/InternalSpelExpressionParser.java, +		if (peekToken()==null) {, +			// unexpectedly ran out of data , +			raiseInternalException(t.startpos,SpelMessage.OOD);, +		} else {, +		}, +++ b/org.springframework.expression/src/test/java/org/springframework/expression/spel/EvaluationTests.java, +import org.junit.Test;, +	@Test, +	public void testRogueTrailingDotCausesNPE_SPR6866() {, +		try {, +			new SpelExpressionParser().parseExpression("placeOfBirth.foo.");, +			Assert.fail("Should have failed to parse");, +		} catch (ParseException e) {, +			Assert.assertTrue(e instanceof SpelParseException);, +			SpelParseException spe = (SpelParseException)e;, +			Assert.assertEquals(SpelMessage.OOD,spe.getMessageCode());, +			Assert.assertEquals(16,spe.getPosition());, +		}	, +	}, +	, +]