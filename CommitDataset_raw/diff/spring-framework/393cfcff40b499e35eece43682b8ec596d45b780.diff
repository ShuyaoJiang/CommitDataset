[+++ b/spring-beans/src/main/java/org/springframework/beans/factory/annotation/AutowiredAnnotationBeanPostProcessor.java, +	private final Map<String, InjectionMetadata> injectionMetadataCache =, +			new ConcurrentHashMap<String, InjectionMetadata>(64);, +			InjectionMetadata metadata = findAutowiringMetadata(beanName, beanType);, +		InjectionMetadata metadata = findAutowiringMetadata(beanName, bean.getClass());, +		InjectionMetadata metadata = findAutowiringMetadata(clazz.getName(), clazz);, +	private InjectionMetadata findAutowiringMetadata(String beanName, Class<?> clazz) {, +		InjectionMetadata metadata = this.injectionMetadataCache.get(beanName);, +				metadata = this.injectionMetadataCache.get(beanName);, +					this.injectionMetadataCache.put(beanName, metadata);, +++ b/spring-beans/src/main/java/org/springframework/beans/factory/annotation/AutowiredAnnotationBeanPostProcessor.java, +	private final Map<String, InjectionMetadata> injectionMetadataCache =, +			new ConcurrentHashMap<String, InjectionMetadata>(64);, +			InjectionMetadata metadata = findAutowiringMetadata(beanName, beanType);, +		InjectionMetadata metadata = findAutowiringMetadata(beanName, bean.getClass());, +		InjectionMetadata metadata = findAutowiringMetadata(clazz.getName(), clazz);, +	private InjectionMetadata findAutowiringMetadata(String beanName, Class<?> clazz) {, +		InjectionMetadata metadata = this.injectionMetadataCache.get(beanName);, +				metadata = this.injectionMetadataCache.get(beanName);, +					this.injectionMetadataCache.put(beanName, metadata);, +++ b/spring-context/src/main/java/org/springframework/context/annotation/CommonAnnotationBeanPostProcessor.java, +	private transient final Map<String, InjectionMetadata> injectionMetadataCache =, +			new ConcurrentHashMap<String, InjectionMetadata>(64);, +			InjectionMetadata metadata = findResourceMetadata(beanName, beanType);, +		InjectionMetadata metadata = findResourceMetadata(beanName, bean.getClass());, +	private InjectionMetadata findResourceMetadata(String beanName, final Class<?> clazz) {, +		InjectionMetadata metadata = this.injectionMetadataCache.get(beanName);, +				metadata = this.injectionMetadataCache.get(beanName);, +					this.injectionMetadataCache.put(beanName, metadata);, +++ b/spring-beans/src/main/java/org/springframework/beans/factory/annotation/AutowiredAnnotationBeanPostProcessor.java, +	private final Map<String, InjectionMetadata> injectionMetadataCache =, +			new ConcurrentHashMap<String, InjectionMetadata>(64);, +			InjectionMetadata metadata = findAutowiringMetadata(beanName, beanType);, +		InjectionMetadata metadata = findAutowiringMetadata(beanName, bean.getClass());, +		InjectionMetadata metadata = findAutowiringMetadata(clazz.getName(), clazz);, +	private InjectionMetadata findAutowiringMetadata(String beanName, Class<?> clazz) {, +		InjectionMetadata metadata = this.injectionMetadataCache.get(beanName);, +				metadata = this.injectionMetadataCache.get(beanName);, +					this.injectionMetadataCache.put(beanName, metadata);, +++ b/spring-context/src/main/java/org/springframework/context/annotation/CommonAnnotationBeanPostProcessor.java, +	private transient final Map<String, InjectionMetadata> injectionMetadataCache =, +			new ConcurrentHashMap<String, InjectionMetadata>(64);, +			InjectionMetadata metadata = findResourceMetadata(beanName, beanType);, +		InjectionMetadata metadata = findResourceMetadata(beanName, bean.getClass());, +	private InjectionMetadata findResourceMetadata(String beanName, final Class<?> clazz) {, +		InjectionMetadata metadata = this.injectionMetadataCache.get(beanName);, +				metadata = this.injectionMetadataCache.get(beanName);, +					this.injectionMetadataCache.put(beanName, metadata);, +++ b/spring-orm/src/main/java/org/springframework/orm/jpa/support/PersistenceAnnotationBeanPostProcessor.java, +	private transient final Map<String, InjectionMetadata> injectionMetadataCache =, +			new ConcurrentHashMap<String, InjectionMetadata>(64);, +			InjectionMetadata metadata = findPersistenceMetadata(beanName, beanType);, +		InjectionMetadata metadata = findPersistenceMetadata(beanName, bean.getClass());, +	private InjectionMetadata findPersistenceMetadata(String beanName, final Class<?> clazz) {, +		InjectionMetadata metadata = this.injectionMetadataCache.get(beanName);, +				metadata = this.injectionMetadataCache.get(beanName);, +					this.injectionMetadataCache.put(beanName, metadata);, +++ b/spring-beans/src/main/java/org/springframework/beans/factory/annotation/AutowiredAnnotationBeanPostProcessor.java, +	private final Map<String, InjectionMetadata> injectionMetadataCache =, +			new ConcurrentHashMap<String, InjectionMetadata>(64);, +			InjectionMetadata metadata = findAutowiringMetadata(beanName, beanType);, +		InjectionMetadata metadata = findAutowiringMetadata(beanName, bean.getClass());, +		InjectionMetadata metadata = findAutowiringMetadata(clazz.getName(), clazz);, +	private InjectionMetadata findAutowiringMetadata(String beanName, Class<?> clazz) {, +		InjectionMetadata metadata = this.injectionMetadataCache.get(beanName);, +				metadata = this.injectionMetadataCache.get(beanName);, +					this.injectionMetadataCache.put(beanName, metadata);, +++ b/spring-context/src/main/java/org/springframework/context/annotation/CommonAnnotationBeanPostProcessor.java, +	private transient final Map<String, InjectionMetadata> injectionMetadataCache =, +			new ConcurrentHashMap<String, InjectionMetadata>(64);, +			InjectionMetadata metadata = findResourceMetadata(beanName, beanType);, +		InjectionMetadata metadata = findResourceMetadata(beanName, bean.getClass());, +	private InjectionMetadata findResourceMetadata(String beanName, final Class<?> clazz) {, +		InjectionMetadata metadata = this.injectionMetadataCache.get(beanName);, +				metadata = this.injectionMetadataCache.get(beanName);, +					this.injectionMetadataCache.put(beanName, metadata);, +++ b/spring-orm/src/main/java/org/springframework/orm/jpa/support/PersistenceAnnotationBeanPostProcessor.java, +	private transient final Map<String, InjectionMetadata> injectionMetadataCache =, +			new ConcurrentHashMap<String, InjectionMetadata>(64);, +			InjectionMetadata metadata = findPersistenceMetadata(beanName, beanType);, +		InjectionMetadata metadata = findPersistenceMetadata(beanName, bean.getClass());, +	private InjectionMetadata findPersistenceMetadata(String beanName, final Class<?> clazz) {, +		InjectionMetadata metadata = this.injectionMetadataCache.get(beanName);, +				metadata = this.injectionMetadataCache.get(beanName);, +					this.injectionMetadataCache.put(beanName, metadata);, +++ b/spring-orm/src/test/java/org/springframework/orm/jpa/support/PersistenceInjectionTests.java, +, +			babpp.postProcessPropertyValues(null, null, new FieldOfWrongTypeAnnotatedWithPersistenceUnit(), "bean");, +			babpp.postProcessPropertyValues(null, null, new SetterOfWrongTypeAnnotatedWithPersistenceUnit(), "bean");, +			babpp.postProcessPropertyValues(null, null, new SetterWithNoArgs(), "bean");, +		babpp.postProcessPropertyValues(null, null, transactionalField, "bean");, +		babpp.postProcessPropertyValues(null, null, transactionalFieldWithProperties, "bean1");, +		babpp.postProcessPropertyValues(null, null, transactionalField, "bean2");, +		babpp.postProcessPropertyValues(null, null, transactionalFieldWithProperties, "bean1");, +		babpp.postProcessPropertyValues(null, null, transactionalField, "bean2");]