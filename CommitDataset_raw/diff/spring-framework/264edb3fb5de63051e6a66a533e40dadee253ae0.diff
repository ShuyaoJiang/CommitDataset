[+++ b/spring-core/src/test/java/org/springframework/tests/Assume.java, + * Copyright 2002-2017 the original author or authors., + * <p>Tests can be categorized into {@link TestGroup}s. Active groups are enabled using, + *, + * <pre class="code">, + * <p>Groups can be specified as a comma separated list of values, or using the pseudo group, +	static final String TEST_GROUPS_SYSTEM_PROPERTY = "testGroups";, +		Set<TestGroup> testGroups = loadTestGroups();, +		if (!testGroups.contains(group)) {, +			throw new AssumptionViolatedException("Requires unspecified group " + group + " from " + testGroups);, +		Set<TestGroup> testGroups = loadTestGroups();, +		if (testGroups.contains(group)) {, +	/**, +	 * Load test groups dynamically instead of during static, +	 * initialization in order to avoid a {@link NoClassDefFoundError}, +	 * being thrown while attempting to load the {@code Assume} class., +	 */, +	private static Set<TestGroup> loadTestGroups() {, +		try {, +			return TestGroup.parse(System.getProperty(TEST_GROUPS_SYSTEM_PROPERTY));, +		}, +		catch (Exception ex) {, +			throw new IllegalStateException("Failed to parse '" + TEST_GROUPS_SYSTEM_PROPERTY, +					+ "' system property: " + ex.getMessage(), ex);, +		}, +	}, +, +++ b/spring-core/src/test/java/org/springframework/tests/Assume.java, + * Copyright 2002-2017 the original author or authors., + * <p>Tests can be categorized into {@link TestGroup}s. Active groups are enabled using, + *, + * <pre class="code">, + * <p>Groups can be specified as a comma separated list of values, or using the pseudo group, +	static final String TEST_GROUPS_SYSTEM_PROPERTY = "testGroups";, +		Set<TestGroup> testGroups = loadTestGroups();, +		if (!testGroups.contains(group)) {, +			throw new AssumptionViolatedException("Requires unspecified group " + group + " from " + testGroups);, +		Set<TestGroup> testGroups = loadTestGroups();, +		if (testGroups.contains(group)) {, +	/**, +	 * Load test groups dynamically instead of during static, +	 * initialization in order to avoid a {@link NoClassDefFoundError}, +	 * being thrown while attempting to load the {@code Assume} class., +	 */, +	private static Set<TestGroup> loadTestGroups() {, +		try {, +			return TestGroup.parse(System.getProperty(TEST_GROUPS_SYSTEM_PROPERTY));, +		}, +		catch (Exception ex) {, +			throw new IllegalStateException("Failed to parse '" + TEST_GROUPS_SYSTEM_PROPERTY, +					+ "' system property: " + ex.getMessage(), ex);, +		}, +	}, +, +++ b/spring-core/src/test/java/org/springframework/tests/AssumeTests.java, +/*, + * Copyright 2002-2017 the original author or authors., + *, + * Licensed under the Apache License, Version 2.0 (the "License");, + * you may not use this file except in compliance with the License., + * You may obtain a copy of the License at, + *, + *      http://www.apache.org/licenses/LICENSE-2.0, + *, + * Unless required by applicable law or agreed to in writing, software, + * distributed under the License is distributed on an "AS IS" BASIS,, + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied., + * See the License for the specific language governing permissions and, + * limitations under the License., + */, +, +package org.springframework.tests;, +, +import java.util.Arrays;, +, +import org.junit.After;, +import org.junit.AssumptionViolatedException;, +import org.junit.Before;, +import org.junit.Test;, +, +import static java.util.stream.Collectors.*;, +import static org.hamcrest.CoreMatchers.*;, +import static org.junit.Assert.*;, +import static org.springframework.tests.Assume.*;, +import static org.springframework.tests.TestGroup.*;, +, +/**, + * Tests for {@link Assume}., + *, + * @author Sam Brannen, + * @since 5.0, + */, +public class AssumeTests {, +, +	private String originalTestGroups;, +, +, +	@Before, +	public void trackOriginalTestGroups() {, +		this.originalTestGroups = System.getProperty(TEST_GROUPS_SYSTEM_PROPERTY);]