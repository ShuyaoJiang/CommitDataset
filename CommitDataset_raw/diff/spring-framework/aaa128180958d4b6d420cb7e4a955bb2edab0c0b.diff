[+++ b/spring-core/src/main/java/org/springframework/core/codec/AbstractSingleValueEncoder.java, +				concatMap(t -> encode(t, bufferFactory, elementType, mimeType, hints));, +			ResolvableType type, MimeType mimeType, Map<String, Object> hints);, +++ b/spring-core/src/main/java/org/springframework/core/codec/AbstractSingleValueEncoder.java, +				concatMap(t -> encode(t, bufferFactory, elementType, mimeType, hints));, +			ResolvableType type, MimeType mimeType, Map<String, Object> hints);, +++ b/spring-core/src/main/java/org/springframework/core/codec/ResourceEncoder.java, +			ResolvableType type, MimeType mimeType, Map<String, Object> hints) {, +		try {, +			return DataBufferUtils.read(channel, dataBufferFactory, this.bufferSize);, +		}, +		catch (IOException ex) {, +			return Flux.error(ex);, +		}]