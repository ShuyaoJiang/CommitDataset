[+++ b/spring-beans/src/main/java/org/springframework/beans/factory/support/BeanDefinitionValueResolver.java, +			String actualInnerBeanName = adaptInnerBeanName(innerBeanName);, +			this.beanFactory.registerContainedBean(actualInnerBeanName, this.beanName);, +++ b/spring-beans/src/main/java/org/springframework/beans/factory/support/BeanDefinitionValueResolver.java, +			String actualInnerBeanName = adaptInnerBeanName(innerBeanName);, +			this.beanFactory.registerContainedBean(actualInnerBeanName, this.beanName);, +++ b/spring-context/src/test/java/org/springframework/beans/factory/xml/XmlBeanFactoryTests.java, +import org.xml.sax.InputSource;, +, +, +import static org.hamcrest.CoreMatchers.*;, +import static org.junit.Assert.*;, +		assertTrue(inner1.getBeanName().startsWith("innerBean"));, +		assertTrue(inner5.getBeanName().startsWith("innerBean"));]