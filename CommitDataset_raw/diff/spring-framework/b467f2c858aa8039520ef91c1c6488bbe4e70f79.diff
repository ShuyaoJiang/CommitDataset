[+++ b/org.springframework.jdbc/src/main/java/org/springframework/jdbc/datasource/embedded/DerbyEmbeddedDatabaseConfigurer.java, +, +	private static final boolean IS_AT_LEAST_DOT_SIX = new EmbeddedDriver().getMinorVersion() >= 6;, +	private static final String SHUTDOWN_COMMAND = String.format("%s=true", IS_AT_LEAST_DOT_SIX ? "drop" : "shutdown");, +			new EmbeddedDriver().connect(String.format(URL_TEMPLATE, databaseName, SHUTDOWN_COMMAND), new Properties());, +		} catch (SQLException ex) {, +, +			if (!SHUTDOWN_CODE.equals(ex.getSQLState())) {, +				return;, +			}, +, +			if (!IS_AT_LEAST_DOT_SIX) {, +				purgeDatabase(databaseName);]