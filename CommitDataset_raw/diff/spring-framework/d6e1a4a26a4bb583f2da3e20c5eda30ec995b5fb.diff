[+++ b/spring-jdbc/src/main/java/org/springframework/jdbc/datasource/DataSourceUtils.java, + * Copyright 2002-2012 the original author or authors., +		doCloseConnection(con, dataSource);, +	}, +, +	/**, +	 * Close the Connection, unless a {@link SmartDataSource} doesn't want us to., +	 * @param con the Connection to close if necessary, +	 * @param dataSource the DataSource that the Connection was obtained from, +	 * @throws SQLException if thrown by JDBC methods, +	 * @see Connection#close(), +	 * @see SmartDataSource#shouldClose(Connection), +	 */, +	public static void doCloseConnection(Connection con, DataSource dataSource) throws SQLException {, +		if (!(dataSource instanceof SmartDataSource) || ((SmartDataSource) dataSource).shouldClose(con)) {, +++ b/spring-jdbc/src/main/java/org/springframework/jdbc/datasource/DataSourceUtils.java, + * Copyright 2002-2012 the original author or authors., +		doCloseConnection(con, dataSource);, +	}, +, +	/**, +	 * Close the Connection, unless a {@link SmartDataSource} doesn't want us to., +	 * @param con the Connection to close if necessary, +	 * @param dataSource the DataSource that the Connection was obtained from, +	 * @throws SQLException if thrown by JDBC methods, +	 * @see Connection#close(), +	 * @see SmartDataSource#shouldClose(Connection), +	 */, +	public static void doCloseConnection(Connection con, DataSource dataSource) throws SQLException {, +		if (!(dataSource instanceof SmartDataSource) || ((SmartDataSource) dataSource).shouldClose(con)) {, +++ b/spring-orm/src/main/java/org/springframework/orm/hibernate3/LocalDataSourceConnectionProvider.java, + * Copyright 2002-2012 the original author or authors., +import org.springframework.jdbc.datasource.DataSourceUtils;, +, +	 * This implementation calls {@link DataSourceUtils#doCloseConnection},, +	 * checking against a {@link org.springframework.jdbc.datasource.SmartDataSource}., +			DataSourceUtils.doCloseConnection(con, this.dataSourceToUse);]