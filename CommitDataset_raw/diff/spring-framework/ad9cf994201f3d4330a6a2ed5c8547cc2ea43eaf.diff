[+++ b/spring-webflux/src/main/java/org/springframework/web/reactive/function/server/ResourceHandlerFunction.java, +				return EntityResponse.fromObject(this.resource).build(), +						.map(response -> response);, +				return EntityResponse.fromObject(headResource).build(), +						.map(response -> response);, +++ b/spring-webflux/src/main/java/org/springframework/web/reactive/function/server/ResourceHandlerFunction.java, +				return EntityResponse.fromObject(this.resource).build(), +						.map(response -> response);, +				return EntityResponse.fromObject(headResource).build(), +						.map(response -> response);, +++ b/spring-webflux/src/test/java/org/springframework/web/reactive/function/server/ResourceHandlerFunctionTests.java, +					assertTrue(response instanceof EntityResponse);, +					EntityResponse<Resource> entityResponse = (EntityResponse<Resource>) response;, +					assertEquals(this.resource, entityResponse.entity());, +		Mono<ServerResponse> responseMono = this.handlerFunction.handle(request);, +		Mono<Void> result = responseMono.flatMap(response -> {, +			assertEquals(HttpStatus.OK, response.statusCode());, +			assertTrue(response instanceof EntityResponse);, +			EntityResponse<Resource> entityResponse = (EntityResponse<Resource>) response;, +			assertEquals(this.resource.getFilename(), entityResponse.entity().getFilename());, +			return response.writeTo(exchange, HandlerStrategies.withDefaults());]