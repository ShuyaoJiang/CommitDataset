[+++ b/spring-test-mvc/src/main/java/org/springframework/test/web/servlet/request/MockHttpServletRequestBuilder.java, +	static final boolean servlet3Present = ClassUtils.hasMethod(ServletRequest.class, "startAsync");, +, +		return servlet3Present ? createServlet3Request(servletContext) : new MockHttpServletRequest(servletContext);, +++ b/spring-test-mvc/src/main/java/org/springframework/test/web/servlet/request/MockHttpServletRequestBuilder.java, +	static final boolean servlet3Present = ClassUtils.hasMethod(ServletRequest.class, "startAsync");, +, +		return servlet3Present ? createServlet3Request(servletContext) : new MockHttpServletRequest(servletContext);, +++ b/spring-test-mvc/src/main/java/org/springframework/test/web/servlet/request/MockMultipartHttpServletRequestBuilder.java, +		MockMultipartHttpServletRequest request = servlet3Present ?, +++ b/spring-test-mvc/src/main/java/org/springframework/test/web/servlet/request/MockHttpServletRequestBuilder.java, +	static final boolean servlet3Present = ClassUtils.hasMethod(ServletRequest.class, "startAsync");, +, +		return servlet3Present ? createServlet3Request(servletContext) : new MockHttpServletRequest(servletContext);, +++ b/spring-test-mvc/src/main/java/org/springframework/test/web/servlet/request/MockMultipartHttpServletRequestBuilder.java, +		MockMultipartHttpServletRequest request = servlet3Present ?, +++ b/spring-test-mvc/src/main/java/org/springframework/test/web/servlet/result/PrintingResultHandler.java, +	private static final boolean servlet3Present = ClassUtils.hasMethod(ServletRequest.class, "startAsync");, +, +		if (servlet3Present) {, +		if (servlet3Present) {, +	}, +++ b/spring-test-mvc/src/main/java/org/springframework/test/web/servlet/request/MockHttpServletRequestBuilder.java, +	static final boolean servlet3Present = ClassUtils.hasMethod(ServletRequest.class, "startAsync");, +, +		return servlet3Present ? createServlet3Request(servletContext) : new MockHttpServletRequest(servletContext);, +++ b/spring-test-mvc/src/main/java/org/springframework/test/web/servlet/request/MockMultipartHttpServletRequestBuilder.java, +		MockMultipartHttpServletRequest request = servlet3Present ?, +++ b/spring-test-mvc/src/main/java/org/springframework/test/web/servlet/result/PrintingResultHandler.java, +	private static final boolean servlet3Present = ClassUtils.hasMethod(ServletRequest.class, "startAsync");, +, +		if (servlet3Present) {, +		if (servlet3Present) {, +	}, +++ b/spring-test-mvc/src/test/java/org/springframework/test/web/servlet/result/PrintingResultHandlerTests.java, +import org.springframework.util.LinkedMultiValueMap;, +import org.springframework.util.MultiValueMap;, +		this.request = new MockHttpServletRequest("GET", "/") {, +			public boolean isAsyncStarted() {, +				return false;, +			}, +		};, +		MultiValueMap<String, String> params = new LinkedMultiValueMap<String, String>();, +		params.add("param", "paramValue");, +, +		assertValue("MockHttpServletRequest", "Parameters", params);]