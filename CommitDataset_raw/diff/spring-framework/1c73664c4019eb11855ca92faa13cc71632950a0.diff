[+++ b/spring-web/src/main/java/org/springframework/http/client/HttpComponentsClientHttpRequestFactory.java, + * Copyright 2002-2016 the original author or authors., +import org.springframework.util.ClassUtils;, +	private static Class<?> abstractHttpClientClass;, +, +	static {, +		try {, +			// Looking for AbstractHttpClient class (deprecated as of HttpComponents 4.3), +			abstractHttpClientClass = ClassUtils.forName("org.apache.http.impl.client.AbstractHttpClient",, +					HttpComponentsClientHttpRequestFactory.class.getClassLoader());, +		}, +		catch (ClassNotFoundException ex) {, +			// Probably removed from HttpComponents in the meantime..., +		}, +	}, +, +, +		if (abstractHttpClientClass != null && abstractHttpClientClass.isInstance(client)) {, +		if (abstractHttpClientClass != null && abstractHttpClientClass.isInstance(client)) {, +++ b/spring-web/src/main/java/org/springframework/http/client/HttpComponentsClientHttpRequestFactory.java, + * Copyright 2002-2016 the original author or authors., +import org.springframework.util.ClassUtils;, +	private static Class<?> abstractHttpClientClass;, +, +	static {, +		try {, +			// Looking for AbstractHttpClient class (deprecated as of HttpComponents 4.3), +			abstractHttpClientClass = ClassUtils.forName("org.apache.http.impl.client.AbstractHttpClient",, +					HttpComponentsClientHttpRequestFactory.class.getClassLoader());, +		}, +		catch (ClassNotFoundException ex) {, +			// Probably removed from HttpComponents in the meantime..., +		}, +	}, +, +, +		if (abstractHttpClientClass != null && abstractHttpClientClass.isInstance(client)) {, +		if (abstractHttpClientClass != null && abstractHttpClientClass.isInstance(client)) {, +++ b/spring-web/src/main/java/org/springframework/remoting/httpinvoker/HttpComponentsHttpInvokerRequestExecutor.java, + * Copyright 2002-2016 the original author or authors., +import org.springframework.util.ClassUtils;, +, +	private static Class<?> abstractHttpClientClass;, +, +	static {, +		try {, +			// Looking for AbstractHttpClient class (deprecated as of HttpComponents 4.3), +			abstractHttpClientClass = ClassUtils.forName("org.apache.http.impl.client.AbstractHttpClient",, +					HttpComponentsHttpInvokerRequestExecutor.class.getClassLoader());, +		}, +		catch (ClassNotFoundException ex) {, +			// Probably removed from HttpComponents in the meantime..., +		}, +	}, +, +, +		if (abstractHttpClientClass != null && abstractHttpClientClass.isInstance(client)) {, +		if (abstractHttpClientClass != null && abstractHttpClientClass.isInstance(client)) {]