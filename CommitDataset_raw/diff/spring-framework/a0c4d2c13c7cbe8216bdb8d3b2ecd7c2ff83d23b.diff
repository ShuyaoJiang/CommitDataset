[+++ b/org.springframework.context/src/main/java/org/springframework/context/support/DefaultLifecycleProcessor.java, +		Map<String, SmartLifecycle> smartLifecycles =, +				this.beanFactory.getBeansOfType(SmartLifecycle.class, false, true);, +		beans.putAll(smartLifecycles);, +		String[] singletonNames = this.beanFactory.getSingletonNames();, +		for (String beanName : singletonNames) {, +			if (!beans.containsKey(beanName)) {, +				Object bean = this.beanFactory.getSingleton(beanName);, +				if (bean instanceof Lifecycle && !this.equals(bean)) {]