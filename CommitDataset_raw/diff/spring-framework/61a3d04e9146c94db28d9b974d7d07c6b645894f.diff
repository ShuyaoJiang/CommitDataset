[+++ b/spring-aop/src/main/java/org/springframework/aop/scope/ScopedProxyUtils.java, +		proxyDefinition.setRole(targetDefinition.getRole());, +++ b/spring-aop/src/main/java/org/springframework/aop/scope/ScopedProxyUtils.java, +		proxyDefinition.setRole(targetDefinition.getRole());, +++ b/spring-context/src/test/java/org/springframework/context/annotation/ConfigurationClassPostProcessorTests.java, +import org.springframework.aop.scope.ScopedProxyUtils;, +import org.springframework.beans.factory.config.BeanDefinitionHolder;, +	public void testPostProcessorDoesNotOverrideRegularBeanDefinitionsEvenWithScopedProxy() {, +		RootBeanDefinition rbd = new RootBeanDefinition(TestBean.class);, +		rbd.setResource(new DescriptiveResource("XML or something"));, +		BeanDefinitionHolder proxied = ScopedProxyUtils.createScopedProxy(new BeanDefinitionHolder(rbd, "bar"), beanFactory, true);, +		beanFactory.registerBeanDefinition("bar", proxied.getBeanDefinition());, +		beanFactory.registerBeanDefinition("config", new RootBeanDefinition(SingletonBeanConfig.class));, +		ConfigurationClassPostProcessor pp = new ConfigurationClassPostProcessor();, +		pp.postProcessBeanFactory(beanFactory);, +		beanFactory.getBean("foo", Foo.class);, +		beanFactory.getBean("bar", TestBean.class);, +	}, +, +	@Test]