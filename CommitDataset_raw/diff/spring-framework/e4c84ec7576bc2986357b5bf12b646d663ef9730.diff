[+++ b/spring-web/src/main/java/org/springframework/web/util/DefaultUriBuilderFactory.java, +			if (StringUtils.isEmpty(uriTemplate)) {, +				result = baseUri != null ? baseUri.cloneBuilder() : UriComponentsBuilder.newInstance();, +			}, +			else if (baseUri != null) {, +				UriComponentsBuilder builder = UriComponentsBuilder.fromUriString(uriTemplate);, +				UriComponents uri = builder.build();, +				result = uri.getHost() == null ? baseUri.cloneBuilder().uriComponents(uri) : builder;, +++ b/spring-web/src/main/java/org/springframework/web/util/DefaultUriBuilderFactory.java, +			if (StringUtils.isEmpty(uriTemplate)) {, +				result = baseUri != null ? baseUri.cloneBuilder() : UriComponentsBuilder.newInstance();, +			}, +			else if (baseUri != null) {, +				UriComponentsBuilder builder = UriComponentsBuilder.fromUriString(uriTemplate);, +				UriComponents uri = builder.build();, +				result = uri.getHost() == null ? baseUri.cloneBuilder().uriComponents(uri) : builder;, +++ b/spring-web/src/test/java/org/springframework/web/util/DefaultUriBuilderFactoryTests.java, +		URI uri = factory.uriString("/foo/{id}").build("a/b");, +		assertEquals("/foo/a%2Fb", uri.toString());, +	}, +, +	@Test // SPR-17465, +	public void defaultSettingsWithBuilder() {, +		DefaultUriBuilderFactory factory = new DefaultUriBuilderFactory();, +		URI uri = factory.builder().path("/foo/{id}").build("a/b");]