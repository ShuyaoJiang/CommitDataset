[+++ b/spring-core/src/main/java/org/springframework/util/ResourceUtils.java, + * Copyright 2002-2015 the original author or authors., +	/** URL protocol for an entry from a Tomcat war file: "war" */, +	public static final String URL_PROTOCOL_WAR = "war";, +, +				URL_PROTOCOL_WAR.equals(protocol) || URL_PROTOCOL_WSJAR.equals(protocol) ||, +				URL_PROTOCOL_VFSZIP.equals(protocol));, +		int startIndex = (urlFile.startsWith(JAR_URL_PREFIX) ? JAR_URL_PREFIX.length() : 0);, +		int endIndex = urlFile.indexOf(JAR_URL_SEPARATOR);, +		if (endIndex != -1) {, +			String jarFile = urlFile.substring(startIndex, endIndex);, +++ b/spring-core/src/main/java/org/springframework/util/ResourceUtils.java, + * Copyright 2002-2015 the original author or authors., +	/** URL protocol for an entry from a Tomcat war file: "war" */, +	public static final String URL_PROTOCOL_WAR = "war";, +, +				URL_PROTOCOL_WAR.equals(protocol) || URL_PROTOCOL_WSJAR.equals(protocol) ||, +				URL_PROTOCOL_VFSZIP.equals(protocol));, +		int startIndex = (urlFile.startsWith(JAR_URL_PREFIX) ? JAR_URL_PREFIX.length() : 0);, +		int endIndex = urlFile.indexOf(JAR_URL_SEPARATOR);, +		if (endIndex != -1) {, +			String jarFile = urlFile.substring(startIndex, endIndex);, +++ b/spring-core/src/test/java/org/springframework/util/ResourceUtilsTests.java, +		assertTrue(ResourceUtils.isJarURL(new URL(null, "war:jar:file:myjar.jar!/mypath", new DummyURLStreamHandler())));, +				ResourceUtils.extractJarFileURL(new URL(null, "war:jar:file:myjar.jar!/mypath", new DummyURLStreamHandler())));, +, +		assertEquals(new URL("file:myjar.jar"),, +				ResourceUtils.extractJarFileURL(new URL(null, "war:jar:file:myjar.jar!/", new DummyURLStreamHandler())));, +		assertEquals(new URL("file:myjar.jar"),]