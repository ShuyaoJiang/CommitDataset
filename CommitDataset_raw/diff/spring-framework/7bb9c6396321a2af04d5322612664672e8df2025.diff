[+++ b/spring-websocket/src/main/java/org/springframework/web/socket/server/support/TomcatRequestUpgradeStrategy.java, +import javax.servlet.ServletContext;, +		String attribute = "javax.websocket.server.ServerContainer";, +		ServletContext servletContext = servletRequest.getServletContext();, +		WsServerContainer serverContainer = (WsServerContainer) servletContext.getAttribute(attribute);, +++ b/spring-websocket/src/main/java/org/springframework/web/socket/server/support/TomcatRequestUpgradeStrategy.java, +import javax.servlet.ServletContext;, +		String attribute = "javax.websocket.server.ServerContainer";, +		ServletContext servletContext = servletRequest.getServletContext();, +		WsServerContainer serverContainer = (WsServerContainer) servletContext.getAttribute(attribute);, +++ b/spring-websocket/src/test/resources/log4j.xml, +		<level value="debug" />]