[+++ b/spring-websocket/src/main/java/org/springframework/web/socket/server/standard/UndertowRequestUpgradeStrategy.java, +import java.lang.reflect.InvocationHandler;, +import java.lang.reflect.Proxy;, +			createChannelMethod = ReflectionUtils.findMethod(Handshake.class, "createChannel", (Class<?>[]) null);, +		HttpUpgradeListener upgradeListener = (HttpUpgradeListener) Proxy.newProxyInstance(, +				getClass().getClassLoader(), new Class<?>[] {HttpUpgradeListener.class},, +				new InvocationHandler() {, +					public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {, +						if ("handleUpgrade".equals(method.getName())) {, +							Object connection = args[0];  // currently an XNIO StreamConnection, +							return null;, +						}, +						else {, +							// any java.lang.Object method: equals, hashCode, toString..., +							return ReflectionUtils.invokeMethod(method, this, args);, +						}, +		exchange.upgradeChannel(upgradeListener);]