[+++ b/spring-messaging/src/main/java/org/springframework/messaging/simp/stomp/StompHeaderAccessor.java, + * Copyright 2002-2016 the original author or authors., +import org.springframework.util.ClassUtils;, +		if (getMessageType() != SimpMessageType.MESSAGE) {, +			throw new IllegalStateException("Unexpected message type " + getMessageType());, +		}, +		if (getMessageType() != SimpMessageType.MESSAGE) {, +			throw new IllegalStateException("Unexpected message type " + getMessageType());, +		}, +		if (payload.getClass() != byte[].class) {, +			throw new IllegalStateException(, +					"Expected byte array payload but got: " + ClassUtils.getQualifiedName(payload.getClass()));, +		}]