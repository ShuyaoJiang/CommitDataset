[+++ b/org.springframework.orm/src/main/java/org/springframework/orm/jpa/vendor/HibernateJpaDialect.java, + * Copyright 2002-2011 the original author or authors., +import java.lang.reflect.Method;, +import org.springframework.util.ReflectionUtils;, + * tested against 3.3, 3.5, 3.6 and 4.0 (with the latter including, +		private static volatile Method connectionMethod;, +, +			try {, +				if (connectionMethod == null) {, +					// reflective lookup to bridge between Hibernate 3.x and 4.x, +					connectionMethod = this.session.getClass().getMethod("connection");, +				}, +				return (Connection) ReflectionUtils.invokeMethod(connectionMethod, this.session);, +			}, +			catch (NoSuchMethodException ex) {, +				throw new IllegalStateException("Cannot find connection() method on Hibernate session", ex);, +			}]