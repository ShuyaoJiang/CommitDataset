[+++ b/spring-web/src/main/java/org/springframework/web/util/UriComponentsBuilder.java, +			String[] ports = StringUtils.commaDelimitedListToStringArray(portHeader);, +			port = Integer.parseInt(ports[0]);, +++ b/spring-web/src/main/java/org/springframework/web/util/UriComponentsBuilder.java, +			String[] ports = StringUtils.commaDelimitedListToStringArray(portHeader);, +			port = Integer.parseInt(ports[0]);, +++ b/spring-web/src/test/java/org/springframework/web/util/UriComponentsBuilderTests.java, +	// SPR-12813, +	@Test, +	public void fromHttpRequestWithForwardedPortMultiValueHeader() {, +		MockHttpServletRequest request = new MockHttpServletRequest();, +		request.setScheme("http");, +		request.setServerName("localhost");, +		request.setServerPort(9090);, +		request.setRequestURI("/mvc-showcase");, +		request.addHeader("X-Forwarded-Host", "a.example.org");, +		request.addHeader("X-Forwarded-Port", "80,52022");, +		HttpRequest httpRequest = new ServletServerHttpRequest(request);, +		UriComponents result = UriComponentsBuilder.fromHttpRequest(httpRequest).build();, +, +		assertEquals("http://a.example.org/mvc-showcase", result.toString());, +	}]