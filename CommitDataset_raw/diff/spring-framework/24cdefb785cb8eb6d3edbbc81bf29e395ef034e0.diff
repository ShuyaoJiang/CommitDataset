[+++ b/spring-websocket/src/main/java/org/springframework/web/socket/sockjs/support/AbstractSockJsService.java, +		try {, +		}, +		catch (NullPointerException npe) {, +			// See SPR-11919 and https://issues.jboss.org/browse/WFLY-3474, +		}, +++ b/spring-websocket/src/main/java/org/springframework/web/socket/sockjs/support/AbstractSockJsService.java, +		try {, +		}, +		catch (NullPointerException npe) {, +			// See SPR-11919 and https://issues.jboss.org/browse/WFLY-3474, +		}, +++ b/spring-websocket/src/test/java/org/springframework/web/socket/sockjs/support/SockJsServiceTests.java, +import org.springframework.http.server.ServletServerHttpResponse;, +import static org.mockito.Mockito.*;, +, +import javax.servlet.ServletOutputStream;, +import javax.servlet.http.HttpServletResponse;, +	// SPR-11919, +, +	@Test, +	public void handleInfoGetWildflyNPE() throws Exception {, +		HttpServletResponse mockResponse = mock(HttpServletResponse.class);, +		ServletOutputStream ous = mock(ServletOutputStream.class);, +		when(mockResponse.getHeaders("Access-Control-Allow-Origin")).thenThrow(NullPointerException.class);, +		when(mockResponse.getOutputStream()).thenReturn(ous);, +		this.response = new ServletServerHttpResponse(mockResponse);, +, +		handleRequest("GET", "/echo/info", HttpStatus.OK);, +, +		verify(mockResponse.getOutputStream(), times(1));, +	}, +]