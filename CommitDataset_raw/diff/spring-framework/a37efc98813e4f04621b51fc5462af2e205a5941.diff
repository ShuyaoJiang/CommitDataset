[+++ b/spring-web/src/test/java/org/springframework/http/codec/xml/XmlEventDecoderTests.java, +import org.springframework.core.io.buffer.DataBuffer;, +import static org.junit.Assert.*;, +	@Test, +	public void decodeErrorAalto() {, +		Flux<DataBuffer> source = Flux.just(stringBuffer("<pojo>")), +				.concatWith(Flux.error(new RuntimeException()));, +, +		Flux<XMLEvent> events =, +				this.decoder.decode(source, null, null, Collections.emptyMap());, +, +		StepVerifier.create(events), +				.consumeNextWith(e -> assertTrue(e.isStartDocument())), +				.consumeNextWith(e -> assertStartElement(e, "pojo")), +				.expectError(RuntimeException.class), +				.verify();, +	}, +, +	@Test, +	public void decodeErrorNonAalto() {, +		decoder.useAalto = false;, +, +		Flux<DataBuffer> source = Flux.just(stringBuffer("<pojo>")), +				.concatWith(Flux.error(new RuntimeException()));, +, +		Flux<XMLEvent> events =, +				this.decoder.decode(source, null, null, Collections.emptyMap());, +, +		StepVerifier.create(events), +				.expectError(RuntimeException.class), +				.verify();, +	}, +]