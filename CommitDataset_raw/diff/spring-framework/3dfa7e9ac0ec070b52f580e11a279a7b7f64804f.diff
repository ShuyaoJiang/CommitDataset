[+++ b/spring-beans/src/test/java/org/springframework/beans/factory/annotation/AutowiredAnnotationBeanPostProcessorTests.java, + * Copyright 2002-2014 the original author or authors., +	@Test, +	public void testCircularTypeReference() {, +		DefaultListableBeanFactory bf = new DefaultListableBeanFactory();, +		bf.setAutowireCandidateResolver(new QualifierAnnotationAutowireCandidateResolver());, +		AutowiredAnnotationBeanPostProcessor bpp = new AutowiredAnnotationBeanPostProcessor();, +		bpp.setBeanFactory(bf);, +		bf.addBeanPostProcessor(bpp);, +		bf.registerBeanDefinition("bean1", new RootBeanDefinition(StockServiceImpl.class));, +		bf.registerBeanDefinition("bean2", new RootBeanDefinition(StockMovementDaoImpl.class));, +		bf.registerBeanDefinition("bean3", new RootBeanDefinition(StockMovementImpl.class));, +		bf.registerBeanDefinition("bean4", new RootBeanDefinition(StockMovementInstructionImpl.class));, +, +		StockServiceImpl service = bf.getBean(StockServiceImpl.class);, +		assertSame(bf.getBean(StockMovementDaoImpl.class), service.stockMovementDao);, +	}, +, +, +	public interface StockMovement<P extends StockMovementInstruction> {, +	}, +, +, +	public interface StockMovementInstruction<C extends StockMovement> {, +	}, +, +, +	public interface StockMovementDao<S extends StockMovement> {, +	}, +, +, +	public static class StockMovementImpl<P extends StockMovementInstruction> implements StockMovement<P> {, +	}, +, +, +	public static class StockMovementInstructionImpl<C extends StockMovement> implements StockMovementInstruction<C> {, +	}, +, +, +	public static class StockMovementDaoImpl<E extends StockMovement> implements StockMovementDao<E> {, +	}, +, +, +	public static class StockServiceImpl {, +, +		@Autowired, +		private StockMovementDao<StockMovement> stockMovementDao;, +	}, +, +++ b/spring-beans/src/test/java/org/springframework/beans/factory/annotation/AutowiredAnnotationBeanPostProcessorTests.java, + * Copyright 2002-2014 the original author or authors., +	@Test, +	public void testCircularTypeReference() {, +		DefaultListableBeanFactory bf = new DefaultListableBeanFactory();, +		bf.setAutowireCandidateResolver(new QualifierAnnotationAutowireCandidateResolver());, +		AutowiredAnnotationBeanPostProcessor bpp = new AutowiredAnnotationBeanPostProcessor();, +		bpp.setBeanFactory(bf);, +		bf.addBeanPostProcessor(bpp);, +		bf.registerBeanDefinition("bean1", new RootBeanDefinition(StockServiceImpl.class));, +		bf.registerBeanDefinition("bean2", new RootBeanDefinition(StockMovementDaoImpl.class));, +		bf.registerBeanDefinition("bean3", new RootBeanDefinition(StockMovementImpl.class));, +		bf.registerBeanDefinition("bean4", new RootBeanDefinition(StockMovementInstructionImpl.class));, +, +		StockServiceImpl service = bf.getBean(StockServiceImpl.class);, +		assertSame(bf.getBean(StockMovementDaoImpl.class), service.stockMovementDao);, +	}, +, +, +	public interface StockMovement<P extends StockMovementInstruction> {, +	}, +, +, +	public interface StockMovementInstruction<C extends StockMovement> {, +	}, +, +, +	public interface StockMovementDao<S extends StockMovement> {, +	}, +, +, +	public static class StockMovementImpl<P extends StockMovementInstruction> implements StockMovement<P> {, +	}, +, +, +	public static class StockMovementInstructionImpl<C extends StockMovement> implements StockMovementInstruction<C> {, +	}, +, +, +	public static class StockMovementDaoImpl<E extends StockMovement> implements StockMovementDao<E> {, +	}, +, +, +	public static class StockServiceImpl {, +, +		@Autowired, +		private StockMovementDao<StockMovement> stockMovementDao;, +	}, +, +++ b/spring-core/src/main/java/org/springframework/core/ResolvableType.java, +import java.util.IdentityHashMap;]