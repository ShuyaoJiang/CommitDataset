[+++ b/spring-messaging/src/main/java/org/springframework/messaging/tcp/reactor/Reactor2TcpClient.java, +		final TcpClient<Message<P>, Message<P>> tcpClient;, +		Runnable cleanupTask;, +			cleanupTask = new Runnable() {, +				@Override, +				public void run() {, +					synchronized (tcpClients) {, +						tcpClients.remove(tcpClient);, +					}, +				}, +			};, +		Promise<Void> promise = tcpClient.start(, +				new MessageChannelStreamHandler<P>(connectionHandler, cleanupTask));, +		final TcpClient<Message<P>, Message<P>> tcpClient;, +		Runnable cleanupTask;, +			cleanupTask = new Runnable() {, +				@Override, +				public void run() {, +					synchronized (tcpClients) {, +						tcpClients.remove(tcpClient);, +					}, +				}, +			};, +				new MessageChannelStreamHandler<P>(connectionHandler, cleanupTask),, +, +		private final Runnable cleanupTask;, +, +		public MessageChannelStreamHandler(TcpConnectionHandler<P> connectionHandler, Runnable cleanupTask) {, +			this.cleanupTask = cleanupTask;, +							cleanupTask.run();]