[+++ b/org.springframework.context/src/main/java/org/springframework/context/support/AbstractApplicationContext.java, +	/**, +	 * {@inheritDoc}, +	 * <p>The parent {@linkplain #getEnvironment() environment} is, +	 * delegated to this (child) context if the parent is a, +	 * {@link ConfigurableApplicationContext} implementation., +	 */, +		if (parent instanceof ConfigurableApplicationContext) {, +			this.setEnvironment(((ConfigurableApplicationContext)parent).getEnvironment());, +		}, +++ b/org.springframework.context/src/main/java/org/springframework/context/support/AbstractApplicationContext.java, +	/**, +	 * {@inheritDoc}, +	 * <p>The parent {@linkplain #getEnvironment() environment} is, +	 * delegated to this (child) context if the parent is a, +	 * {@link ConfigurableApplicationContext} implementation., +	 */, +		if (parent instanceof ConfigurableApplicationContext) {, +			this.setEnvironment(((ConfigurableApplicationContext)parent).getEnvironment());, +		}, +++ b/org.springframework.web.portlet/src/main/java/org/springframework/web/portlet/context/AbstractRefreshablePortletApplicationContext.java, +	/**, +	 * {@inheritDoc}, +	 * <p>The parent {@linkplain #getEnvironment() environment} is, +	 * delegated to this (child) context if the parent is a, +	 * {@link ConfigurableApplicationContext} implementation., +	 * <p>The parent {@linkplain #getServletContext() servlet context} is, +	 * delegated to this (child) context if the parent is a {@link WebApplicationContext}, +	 * implementation., +	 */, +++ b/org.springframework.context/src/main/java/org/springframework/context/support/AbstractApplicationContext.java, +	/**, +	 * {@inheritDoc}, +	 * <p>The parent {@linkplain #getEnvironment() environment} is, +	 * delegated to this (child) context if the parent is a, +	 * {@link ConfigurableApplicationContext} implementation., +	 */, +		if (parent instanceof ConfigurableApplicationContext) {, +			this.setEnvironment(((ConfigurableApplicationContext)parent).getEnvironment());, +		}, +++ b/org.springframework.web.portlet/src/main/java/org/springframework/web/portlet/context/AbstractRefreshablePortletApplicationContext.java, +	/**, +	 * {@inheritDoc}, +	 * <p>The parent {@linkplain #getEnvironment() environment} is, +	 * delegated to this (child) context if the parent is a, +	 * {@link ConfigurableApplicationContext} implementation., +	 * <p>The parent {@linkplain #getServletContext() servlet context} is, +	 * delegated to this (child) context if the parent is a {@link WebApplicationContext}, +	 * implementation., +	 */, +++ b/org.springframework.web.portlet/src/main/java/org/springframework/web/portlet/context/StaticPortletApplicationContext.java, +	/**, +	 * {@inheritDoc}, +	 * <p>The parent {@linkplain #getEnvironment() environment} is, +	 * delegated to this (child) context if the parent is a, +	 * {@link ConfigurableApplicationContext} implementation., +	 * <p>The parent {@linkplain #getServletContext() servlet context} is, +	 * delegated to this (child) context if the parent is a {@link WebApplicationContext}, +	 * implementation., +	 */, +++ b/org.springframework.context/src/main/java/org/springframework/context/support/AbstractApplicationContext.java, +	/**, +	 * {@inheritDoc}, +	 * <p>The parent {@linkplain #getEnvironment() environment} is, +	 * delegated to this (child) context if the parent is a, +	 * {@link ConfigurableApplicationContext} implementation., +	 */, +		if (parent instanceof ConfigurableApplicationContext) {, +			this.setEnvironment(((ConfigurableApplicationContext)parent).getEnvironment());, +		}, +++ b/org.springframework.web.portlet/src/main/java/org/springframework/web/portlet/context/AbstractRefreshablePortletApplicationContext.java, +	/**, +	 * {@inheritDoc}, +	 * <p>The parent {@linkplain #getEnvironment() environment} is, +	 * delegated to this (child) context if the parent is a, +	 * {@link ConfigurableApplicationContext} implementation., +	 * <p>The parent {@linkplain #getServletContext() servlet context} is, +	 * delegated to this (child) context if the parent is a {@link WebApplicationContext}, +	 * implementation., +	 */, +++ b/org.springframework.web.portlet/src/main/java/org/springframework/web/portlet/context/StaticPortletApplicationContext.java, +	/**, +	 * {@inheritDoc}, +	 * <p>The parent {@linkplain #getEnvironment() environment} is, +	 * delegated to this (child) context if the parent is a, +	 * {@link ConfigurableApplicationContext} implementation., +	 * <p>The parent {@linkplain #getServletContext() servlet context} is, +	 * delegated to this (child) context if the parent is a {@link WebApplicationContext}, +	 * implementation., +	 */, +++ b/org.springframework.web.servlet/src/test/java/org/springframework/web/context/XmlWebApplicationContextTests.java, +import static org.hamcrest.CoreMatchers.sameInstance;, +import static org.junit.Assert.assertThat;, +, +	public void testEnvironmentInheritance() {, +		assertThat(this.applicationContext.getEnvironment(), sameInstance(this.root.getEnvironment()));, +	}, +]