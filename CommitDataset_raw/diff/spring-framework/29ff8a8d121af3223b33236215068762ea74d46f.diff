[+++ b/spring-test/src/main/java/org/springframework/test/web/servlet/TestDispatcherServlet.java, +			MockAsyncContext asyncContext;, +			if (request.getAsyncContext() instanceof MockAsyncContext) {, +				asyncContext = (MockAsyncContext) request.getAsyncContext();, +			}, +			else {, +				asyncContext = (MockAsyncContext) mockRequest.getAsyncContext();, +				Assert.notNull(asyncContext, () ->, +						"Outer request wrapper " + request.getClass().getName() + " has an AsyncContext," +, +								"but it is not a MockAsyncContext, while the nested " +, +								mockRequest.getClass().getName() + " does not have an AsyncContext at all.");, +			}, +			asyncContext.addDispatchHandler(dispatchLatch::countDown);]