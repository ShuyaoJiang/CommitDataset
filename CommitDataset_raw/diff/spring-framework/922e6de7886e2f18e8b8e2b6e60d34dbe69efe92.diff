[+++ b/spring-messaging/src/main/java/org/springframework/messaging/simp/broker/AbstractSubscriptionRegistry.java, +import org.springframework.util.CollectionUtils;, +import org.springframework.util.LinkedMultiValueMap;, +	private static MultiValueMap<String, String> EMPTY_MAP =, +			CollectionUtils.unmodifiableMultiValueMap(new LinkedMultiValueMap<String, String>(0));, +, +, +			return EMPTY_MAP;, +++ b/spring-messaging/src/main/java/org/springframework/messaging/simp/broker/AbstractSubscriptionRegistry.java, +import org.springframework.util.CollectionUtils;, +import org.springframework.util.LinkedMultiValueMap;, +	private static MultiValueMap<String, String> EMPTY_MAP =, +			CollectionUtils.unmodifiableMultiValueMap(new LinkedMultiValueMap<String, String>(0));, +, +, +			return EMPTY_MAP;, +++ b/spring-messaging/src/main/java/org/springframework/messaging/simp/broker/DefaultSubscriptionRegistry.java, +	private volatile boolean selectorHeaderInUse = false;, +, +	private final ExpressionParser expressionParser = new SpelExpressionParser();, +				this.selectorHeaderInUse = true;, +		if (!this.selectorHeaderInUse) {, +			return allMatches;, +		}]