[+++ b/org.springframework.web/src/main/java/org/springframework/http/client/InterceptingClientHttpRequest.java, +				if (body.length > 0) {, +				}, +++ b/org.springframework.web/src/main/java/org/springframework/http/client/InterceptingClientHttpRequest.java, +				if (body.length > 0) {, +				}, +++ b/org.springframework.web/src/main/java/org/springframework/http/client/SimpleStreamingClientHttpRequest.java, +            writeHeaders(headers);, +            this.connection.connect();, +			this.body = this.connection.getOutputStream();, +		}, +		return new NonClosingOutputStream(this.body);, +	}, +, +    private void writeHeaders(HttpHeaders headers) {, +            else {, +                writeHeaders(headers);, +                this.connection.connect();, +            }, +++ b/org.springframework.web/src/main/java/org/springframework/http/client/InterceptingClientHttpRequest.java, +				if (body.length > 0) {, +				}, +++ b/org.springframework.web/src/main/java/org/springframework/http/client/SimpleStreamingClientHttpRequest.java, +            writeHeaders(headers);, +            this.connection.connect();, +			this.body = this.connection.getOutputStream();, +		}, +		return new NonClosingOutputStream(this.body);, +	}, +, +    private void writeHeaders(HttpHeaders headers) {, +            else {, +                writeHeaders(headers);, +                this.connection.connect();, +            }, +++ b/org.springframework.web/src/test/java/org/springframework/http/client/AbstractHttpRequestFactoryTestCase.java, +import org.springframework.http.HttpMethod;, +import org.springframework.http.HttpStatus;, +import org.springframework.util.FileCopyUtils;, +, +import static org.junit.Assert.assertEquals;, +import static org.junit.Assert.assertTrue;, +        protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {, +			echo(req, resp);, +++ b/org.springframework.web/src/main/java/org/springframework/http/client/InterceptingClientHttpRequest.java, +				if (body.length > 0) {, +				}, +++ b/org.springframework.web/src/main/java/org/springframework/http/client/SimpleStreamingClientHttpRequest.java, +            writeHeaders(headers);, +            this.connection.connect();, +			this.body = this.connection.getOutputStream();, +		}, +		return new NonClosingOutputStream(this.body);, +	}, +, +    private void writeHeaders(HttpHeaders headers) {, +            else {, +                writeHeaders(headers);, +                this.connection.connect();, +            }, +++ b/org.springframework.web/src/test/java/org/springframework/http/client/AbstractHttpRequestFactoryTestCase.java, +import org.springframework.http.HttpMethod;, +import org.springframework.http.HttpStatus;, +import org.springframework.util.FileCopyUtils;, +, +import static org.junit.Assert.assertEquals;, +import static org.junit.Assert.assertTrue;, +        protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {, +			echo(req, resp);, +++ b/org.springframework.web/src/test/java/org/springframework/http/client/StreamingSimpleHttpRequestFactoryTests.java, +import org.junit.Ignore;, +import org.junit.Test;, +, +import static org.junit.Assert.assertEquals;, +			ClientHttpRequest request = factory.createRequest(new URI(baseUrl + "/echo"), HttpMethod.GET);]