[+++ b/spring-websocket/src/main/java/org/springframework/web/socket/messaging/SubProtocolWebSocketHandler.java, +				this.lastSessionCheckTime = currentTime;, +++ b/spring-websocket/src/main/java/org/springframework/web/socket/messaging/SubProtocolWebSocketHandler.java, +				this.lastSessionCheckTime = currentTime;, +++ b/spring-websocket/src/test/java/org/springframework/web/socket/messaging/SubProtocolWebSocketHandlerTests.java, +, +		DirectFieldAccessor handlerAccessor = new DirectFieldAccessor(this.webSocketHandler);, +		Map<String, ?> map = (Map<String, ?>) handlerAccessor.getPropertyValue("sessions");, +		DirectFieldAccessor session1Accessor = new DirectFieldAccessor(map.get("id1"));, +		DirectFieldAccessor session2Accessor = new DirectFieldAccessor(map.get("id2"));, +		handlerAccessor.setPropertyValue("lastSessionCheckTime", sixtyOneSecondsAgo);, +		session1Accessor.setPropertyValue("createTime", sixtyOneSecondsAgo);, +		session2Accessor.setPropertyValue("createTime", sixtyOneSecondsAgo);, +		assertFalse(session2.isOpen());, +		assertEquals(CloseStatus.SESSION_NOT_RELIABLE, session2.getCloseStatus());, +, +		assertNotEquals("lastSessionCheckTime not updated", sixtyOneSecondsAgo,, +				handlerAccessor.getPropertyValue("lastSessionCheckTime"));, +	}]