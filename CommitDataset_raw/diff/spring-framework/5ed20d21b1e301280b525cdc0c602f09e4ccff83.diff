[+++ b/spring-tx/src/test/java/org/springframework/transaction/annotation/AnnotationTransactionNamespaceHandlerTests.java, +		@Transactional("qualifiedTransactionManager"), +		public void saveQualifiedFoo() {, +		}, +, +++ b/spring-tx/src/test/java/org/springframework/transaction/annotation/AnnotationTransactionNamespaceHandlerTests.java, +		@Transactional("qualifiedTransactionManager"), +		public void saveQualifiedFoo() {, +		}, +, +++ b/spring-tx/src/test/java/org/springframework/transaction/annotation/EnableTransactionManagementTests.java, + * Copyright 2002-2014 the original author or authors., +import org.springframework.beans.factory.annotation.Autowired;, +import org.springframework.context.ConfigurableApplicationContext;, +import javax.annotation.PostConstruct;, +, + * @author Stephane Nicoll, +	@Test, +	public void spr11915() {, +		AnnotationConfigApplicationContext ctx =, +				new AnnotationConfigApplicationContext(Spr11915Config.class);, +, +		TransactionalTestBean bean = ctx.getBean(TransactionalTestBean.class);, +		bean.saveQualifiedFoo();, +, +		CallCountingTransactionManager txManager = ctx, +				.getBean("qualifiedTransactionManager", CallCountingTransactionManager.class);, +		assertThat(txManager.begun, equalTo(1));, +		assertThat(txManager.commits, equalTo(1));, +		assertThat(txManager.rollbacks, equalTo(0));, +	}, +, +	@Configuration, +	@EnableTransactionManagement, +	static class Spr11915Config {, +, +		@Autowired, +		private ConfigurableApplicationContext applicationContext;, +, +		@PostConstruct, +		public void initializeApp() {, +			applicationContext.getBeanFactory().registerSingleton(, +					"qualifiedTransactionManager", new CallCountingTransactionManager());, +		}, +, +		@Bean, +		public TransactionalTestBean testBean() {, +			return new TransactionalTestBean();, +		}, +	}, +]