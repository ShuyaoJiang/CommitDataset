[+++ b/org.springframework.test/src/test/java/org/springframework/test/context/junit4/FailingBeforeAndAfterMethodsTests.java, +	public static abstract class BaseTestCase {, +++ b/org.springframework.test/src/test/java/org/springframework/test/context/junit4/FailingBeforeAndAfterMethodsTests.java, +	public static abstract class BaseTestCase {, +++ b/org.springframework.test/src/test/java/org/springframework/test/context/testng/FailingBeforeAndAfterMethodsTests.java, + * Copyright 2002-2009 the original author or authors., +import org.testng.ITestContext;, +import org.testng.ITestListener;, +import org.testng.ITestResult;, +import org.testng.TestNG;, + * JUnit 4 based unit test for verifying that '<i>before</i>' and '<i>after</i>', + * {@link BeforeTransaction &#064;BeforeTransaction} and, + * {@link AfterTransaction &#064;AfterTransaction} methods can fail a test in a, + * <p>, + * Indirectly, this class also verifies that all {@link TestExecutionListener}, + * lifecycle callbacks are called., + * </p>, + * <p>, + * As of Spring 3.0, this class also tests support for the new, + * {@link TestExecutionListener#beforeTestClass(TestContext) beforeTestClass()}, + * and {@link TestExecutionListener#afterTestClass(TestContext), + * afterTestClass()} lifecycle callback methods., + * </p>, +		return Arrays.asList(new Object[][] {//, +		//, +			{ AlwaysFailingBeforeTestClassTestCase.class, 1, 0, 0, 1 },//, +			{ AlwaysFailingAfterTestClassTestCase.class, 1, 1, 0, 1 },//, +			{ AlwaysFailingPrepareTestInstanceTestCase.class, 1, 0, 0, 1 },//, +			{ AlwaysFailingBeforeTestMethodTestCase.class, 1, 0, 0, 1 },//, +			{ AlwaysFailingAfterTestMethodTestCase.class, 1, 1, 0, 1 },//, +			{ FailingBeforeTransactionTestCase.class, 1, 0, 0, 1 },//, +			{ FailingAfterTransactionTestCase.class, 1, 1, 0, 1 } //, +	// -------------------------------------------------------------------, +, +	static class AlwaysFailingBeforeTestClassTestExecutionListener extends AbstractTestExecutionListener {, +, +		@Override, +		public void beforeTestClass(TestContext testContext) {, +			org.testng.Assert.fail("always failing beforeTestClass()");, +		}, +	}, +, +	static class AlwaysFailingAfterTestClassTestExecutionListener extends AbstractTestExecutionListener {, +, +		@Override, +		public void afterTestClass(TestContext testContext) {, +			org.testng.Assert.fail("always failing afterTestClass()");, +		}, +	}, +, +	static class AlwaysFailingPrepareTestInstanceTestExecutionListener extends AbstractTestExecutionListener {, +, +		@Override, +		public void prepareTestInstance(TestContext testContext) throws Exception {, +			org.testng.Assert.fail("always failing prepareTestInstance()");, +		}, +	}, +	// -------------------------------------------------------------------, +	@TestExecutionListeners(value = {}, inheritListeners = false), +	public static abstract class BaseTestCase extends AbstractTestNGSpringContextTests {, +	@TestExecutionListeners(AlwaysFailingBeforeTestClassTestExecutionListener.class), +	public static class AlwaysFailingBeforeTestClassTestCase extends BaseTestCase {, +	@TestExecutionListeners(AlwaysFailingAfterTestClassTestExecutionListener.class), +	public static class AlwaysFailingAfterTestClassTestCase extends BaseTestCase {, +	}, +	@TestExecutionListeners(AlwaysFailingPrepareTestInstanceTestExecutionListener.class), +	public static class AlwaysFailingPrepareTestInstanceTestCase extends BaseTestCase {, +	}, +, +	@TestExecutionListeners(AlwaysFailingBeforeTestMethodTestExecutionListener.class), +	public static class AlwaysFailingBeforeTestMethodTestCase extends BaseTestCase {, +	}, +, +	@TestExecutionListeners(AlwaysFailingAfterTestMethodTestExecutionListener.class), +	public static class AlwaysFailingAfterTestMethodTestCase extends BaseTestCase {, +	}, +, +	@ContextConfiguration("FailingBeforeAndAfterMethodsTests-context.xml"), +	public static class FailingBeforeTransactionTestCase extends AbstractTransactionalTestNGSpringContextTests {, +	@ContextConfiguration("FailingBeforeAndAfterMethodsTests-context.xml"), +	public static class FailingAfterTransactionTestCase extends AbstractTransactionalTestNGSpringContextTests {]