[+++ b/spring-web/src/main/java/org/springframework/http/HttpHeaders.java, +		final int idx;, +		if (value.startsWith("[")) {, +			idx = value.indexOf(':', value.indexOf(']'));, +		} else {, +			idx = value.lastIndexOf(':');, +		}, +++ b/spring-web/src/main/java/org/springframework/http/HttpHeaders.java, +		final int idx;, +		if (value.startsWith("[")) {, +			idx = value.indexOf(':', value.indexOf(']'));, +		} else {, +			idx = value.lastIndexOf(':');, +		}, +++ b/spring-web/src/test/java/org/springframework/http/HttpHeadersTests.java, +	@Test, +	public void ipv6Host() {, +		InetSocketAddress host = InetSocketAddress.createUnresolved("[::1]", 0);, +		headers.setHost(host);, +		assertEquals("Invalid Host header", host, headers.getHost());, +		assertEquals("Invalid Host header", "[::1]", headers.getFirst("Host"));, +	}, +]