[+++ b/org.springframework.beans/src/main/java/org/springframework/beans/propertyeditors/URIEditor.java, + * Copyright 2002-2010 the original author or authors., +		int colonIndex = value.indexOf(':');, +		if (this.encode && colonIndex != -1) {, +			int fragmentIndex = value.indexOf('#', colonIndex + 1);, +			String scheme = value.substring(0, colonIndex);, +			String ssp = value.substring(colonIndex + 1, (fragmentIndex > 0 ? fragmentIndex : value.length()));, +			String fragment = (fragmentIndex > 0 ? value.substring(fragmentIndex + 1) : null);, +			return new URI(scheme, ssp, fragment);, +			// not encoding or the value contains no scheme - fallback to default, +++ b/org.springframework.beans/src/main/java/org/springframework/beans/propertyeditors/URIEditor.java, + * Copyright 2002-2010 the original author or authors., +		int colonIndex = value.indexOf(':');, +		if (this.encode && colonIndex != -1) {, +			int fragmentIndex = value.indexOf('#', colonIndex + 1);, +			String scheme = value.substring(0, colonIndex);, +			String ssp = value.substring(colonIndex + 1, (fragmentIndex > 0 ? fragmentIndex : value.length()));, +			String fragment = (fragmentIndex > 0 ? value.substring(fragmentIndex + 1) : null);, +			return new URI(scheme, ssp, fragment);, +			// not encoding or the value contains no scheme - fallback to default, +++ b/org.springframework.beans/src/test/java/org/springframework/beans/propertyeditors/URIEditorTests.java, + * Copyright 2002-2010 the original author or authors., +	private void doTestURI(String uriSpec) {, +		uriEditor.setAsText(uriSpec);, +		assertEquals(uriSpec, uri.toString());, +	}, +, +	@Test, +	public void standardURI() throws Exception {, +		doTestURI("mailto:juergen.hoeller@interface21.com");, +	}, +, +	@Test, +	public void withNonExistentResource() throws Exception {, +		doTestURI("gonna:/freak/in/the/morning/freak/in/the.evening");, +		doTestURI("http://www.springframework.org");, +	}, +, +	@Test, +	public void standardURLWithFragment() throws Exception {, +		doTestURI("http://www.springframework.org#1");, +		assertEquals("http://www.springframework.org", uri.toString());]