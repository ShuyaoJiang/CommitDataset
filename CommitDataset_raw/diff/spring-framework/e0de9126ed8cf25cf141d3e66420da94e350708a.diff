[+++ b/spring-messaging/src/main/java/org/springframework/messaging/simp/broker/DefaultSubscriptionRegistry.java, + * Copyright 2002-2018 the original author or authors., +import org.springframework.expression.spel.support.SimpleEvaluationContext;, +	/** Static evaluation context to re-use */, +	private static SimpleEvaluationContext evaluationContext = SimpleEvaluationContext.builder(), +			.propertyAccessor(new SimpMessageHeaderPropertyAccessor()).build();, +, +, +					if (Boolean.TRUE.equals(expression.getValue(evaluationContext, message, Boolean.class))) {, +			return new Class<?>[] {Message.class, MessageHeaders.class};, +		public TypedValue read(EvaluationContext context, @Nullable Object target, String name) {, +			Object value;, +			if (target instanceof Message) {, +				value = name.equals("headers") ? ((Message) target).getHeaders() : null;, +			}, +			else if (target instanceof MessageHeaders) {, +			}, +			else {, +				// Should never happen..., +				throw new IllegalStateException("Expected Message or MessageHeaders.");, +			}]