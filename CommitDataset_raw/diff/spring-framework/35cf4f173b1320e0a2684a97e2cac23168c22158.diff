[+++ b/spring-web/src/main/java/org/springframework/http/server/reactive/AbstractRequestBodyPublisher.java, +				getAndSub(this.demand, 1L);, +	/**, +	 * Concurrent substraction bound to 0 and Long.MAX_VALUE., +	 * Any concurrent write will "happen" before this operation., +	 *, +	 * @param sequence current atomic to update, +	 * @param toSub    delta to sub, +	 * @return value before subscription, 0 or Long.MAX_VALUE, +	 */, +	private static long getAndSub(AtomicLong sequence, long toSub) {, +		long r;, +		long u;, +		do {, +			r = sequence.get();, +			if (r == 0 || r == Long.MAX_VALUE) {, +				return r;, +			}, +			u = Operators.subOrZero(r, toSub);, +		} while (!sequence.compareAndSet(r, u));, +, +		return r;, +	}, +, +]