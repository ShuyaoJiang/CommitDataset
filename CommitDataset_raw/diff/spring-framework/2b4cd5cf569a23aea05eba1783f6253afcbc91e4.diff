[+++ b/spring-web/src/main/java/org/springframework/web/util/HierarchicalUriComponents.java, +		// Array-based vars rely on the below order.., +, +		String fragmentTo = expandUriComponent(getFragment(), uriVariables, this.variableEncoder);, +++ b/spring-web/src/main/java/org/springframework/web/util/HierarchicalUriComponents.java, +		// Array-based vars rely on the below order.., +, +		String fragmentTo = expandUriComponent(getFragment(), uriVariables, this.variableEncoder);, +++ b/spring-web/src/test/java/org/springframework/web/util/UriComponentsTests.java, +	@Test // gh-22447, +	public void expandWithFragmentOrder() {, +		UriComponents uriComponents = UriComponentsBuilder, +				.fromUriString("http://{host}/{path}#{fragment}").build(), +				.expand("example.com", "foo", "bar");, +, +		assertEquals("http://example.com/foo#bar", uriComponents.toUriString());, +	}, +]