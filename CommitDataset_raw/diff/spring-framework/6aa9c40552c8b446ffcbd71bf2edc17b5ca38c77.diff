[+++ b/spring-context/src/main/java/org/springframework/context/annotation/ConfigurationClassParser.java, +			// Enforce ASM via class name resolution, +			Object sourceToProcess = this.source;, +, +			if (sourceToProcess instanceof Class<?>) {, +				Class<?> sourceClass = (Class<?>) sourceToProcess;, +				try {, +					Class<?>[] declaredClasses = sourceClass.getDeclaredClasses();, +					List<SourceClass> members = new ArrayList<SourceClass>(declaredClasses.length);, +					for (Class<?> declaredClass : declaredClasses) {, +					return members;, +				catch (NoClassDefFoundError err) {, +					// getDeclaredClasses() failed because of non-resolvable dependencies, +					// -> fall back to ASM below, +					sourceToProcess = metadataReaderFactory.getMetadataReader(sourceClass.getName());, +				}, +			}, +, +			// ASM-based resolution - safe for non-resolvable classes as well, +			MetadataReader sourceReader = (MetadataReader) sourceToProcess;, +			String[] memberClassNames = sourceReader.getClassMetadata().getMemberClassNames();, +			List<SourceClass> members = new ArrayList<SourceClass>(memberClassNames.length);, +			for (String memberClassName : memberClassNames) {]