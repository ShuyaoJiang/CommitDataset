[+++ b/spring-web/src/main/java/org/springframework/http/server/reactive/AbstractListenerReadPublisher.java, +		while ((r = demand) > 0 && !publisherCompleted) {, +					if (publisher.changeState(NO_DEMAND, DEMAND)) {, +						publisher.checkOnDataAvailable();, +					}, +				for (;;) {, +					if (!read(publisher)) {, +						return;, +					}, +					long r = publisher.demand;, +					if (r == 0  || publisher.changeState(NO_DEMAND, this)) {, +						break;, +					}, +				}, +			}, +, +			<T> boolean read(AbstractListenerReadPublisher<T> publisher) {, +							if (publisher.changeState(READING, DEMAND)) {, +								return false;, +						}, +						else if (publisher.changeState(READING, NO_DEMAND)) {, +					return true;, +				return false;, +					if (publisher.changeState(NO_DEMAND, DEMAND)) {, +						publisher.checkOnDataAvailable();, +					}, +			if (publisher.changeState(this, COMPLETED)) {, +				publisher.publisherCompleted = true;, +			}, +			else {, +				publisher.publisherCompleted = true;]