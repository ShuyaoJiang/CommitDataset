[+++ b/spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter.java, +, +	private volatile Handler handler;, +		Assert.state(!this.complete, "ResponseBodyEmitter is already set complete");, +		if (this.handler == null) {, +				if (this.handler == null) {, +			if (this.handler != null) {, +			if (this.handler != null) {, +++ b/spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter.java, +, +	private volatile Handler handler;, +		Assert.state(!this.complete, "ResponseBodyEmitter is already set complete");, +		if (this.handler == null) {, +				if (this.handler == null) {, +			if (this.handler != null) {, +			if (this.handler != null) {, +++ b/spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitterReturnValueHandler.java, +, +, +, +			throw new IllegalArgumentException("No suitable converter for " + data.getClass());, +++ b/spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter.java, +, +	private volatile Handler handler;, +		Assert.state(!this.complete, "ResponseBodyEmitter is already set complete");, +		if (this.handler == null) {, +				if (this.handler == null) {, +			if (this.handler != null) {, +			if (this.handler != null) {, +++ b/spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitterReturnValueHandler.java, +, +, +, +			throw new IllegalArgumentException("No suitable converter for " + data.getClass());, +++ b/spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/SseEmitter.java, +, + * A specialization of {@link ResponseBodyEmitter} for sending, +	static final MediaType TEXT_PLAIN = new MediaType("text", "plain", Charset.forName("UTF-8"));, +, +]