[+++ b/org.springframework.beans/src/main/java/org/springframework/beans/factory/config/ConstructorArgumentValues.java, +						(requiredType != null && ClassUtils.matchesTypeName(requiredType, valueHolder.getType()))) &&, +			if (valueHolder.getName() != null &&, +					(requiredName == null || !valueHolder.getName().equals(requiredName))) {, +			if (valueHolder.getType() != null &&, +					(requiredType == null || !ClassUtils.matchesTypeName(requiredType, valueHolder.getType()))) {, +++ b/org.springframework.beans/src/main/java/org/springframework/beans/factory/config/ConstructorArgumentValues.java, +						(requiredType != null && ClassUtils.matchesTypeName(requiredType, valueHolder.getType()))) &&, +			if (valueHolder.getName() != null &&, +					(requiredName == null || !valueHolder.getName().equals(requiredName))) {, +			if (valueHolder.getType() != null &&, +					(requiredType == null || !ClassUtils.matchesTypeName(requiredType, valueHolder.getType()))) {, +++ b/org.springframework.context/src/test/java/org/springframework/beans/factory/xml/XmlBeanFactoryTests-constructorArg.xml, +	<bean id="nan" class="java.lang.Double" factory-method="valueOf">, +		<constructor-arg value="NaN" type="double"/>, +	</bean>, +, +	<bean id="constructorArray" class="org.springframework.beans.factory.xml.XmlBeanFactoryTests$ConstructorArrayTestBean">, +		<constructor-arg type="int[]">, +			<array value-type="int">, +				<value>1</value>, +			</array>, +		</constructor-arg>, +	</bean>, +, +	<bean id="indexedConstructorArray" class="org.springframework.beans.factory.xml.XmlBeanFactoryTests$ConstructorArrayTestBean">, +		<constructor-arg index="0" type="int[]">, +			<array value-type="int">, +				<value>1</value>, +			</array>, +		</constructor-arg>, +	</bean>, +, +++ b/org.springframework.beans/src/main/java/org/springframework/beans/factory/config/ConstructorArgumentValues.java, +						(requiredType != null && ClassUtils.matchesTypeName(requiredType, valueHolder.getType()))) &&, +			if (valueHolder.getName() != null &&, +					(requiredName == null || !valueHolder.getName().equals(requiredName))) {, +			if (valueHolder.getType() != null &&, +					(requiredType == null || !ClassUtils.matchesTypeName(requiredType, valueHolder.getType()))) {, +++ b/org.springframework.context/src/test/java/org/springframework/beans/factory/xml/XmlBeanFactoryTests-constructorArg.xml, +	<bean id="nan" class="java.lang.Double" factory-method="valueOf">, +		<constructor-arg value="NaN" type="double"/>, +	</bean>, +, +	<bean id="constructorArray" class="org.springframework.beans.factory.xml.XmlBeanFactoryTests$ConstructorArrayTestBean">, +		<constructor-arg type="int[]">, +			<array value-type="int">, +				<value>1</value>, +			</array>, +		</constructor-arg>, +	</bean>, +, +	<bean id="indexedConstructorArray" class="org.springframework.beans.factory.xml.XmlBeanFactoryTests$ConstructorArrayTestBean">, +		<constructor-arg index="0" type="int[]">, +			<array value-type="int">, +				<value>1</value>, +			</array>, +		</constructor-arg>, +	</bean>, +, +++ b/org.springframework.context/src/test/java/org/springframework/beans/factory/xml/XmlBeanFactoryTests.java, +	public @Test void testPrimitiveConstructorArray() {, +		XmlBeanFactory xbf = new XmlBeanFactory(CONSTRUCTOR_ARG_CONTEXT);, +		ConstructorArrayTestBean bean = (ConstructorArrayTestBean) xbf.getBean("constructorArray");, +		assertTrue(bean.array instanceof int[]);, +		assertEquals(1, ((int[]) bean.array).length);, +		assertEquals(1, ((int[]) bean.array)[0]);, +	}, +, +	public @Test void testIndexedPrimitiveConstructorArray() {, +		XmlBeanFactory xbf = new XmlBeanFactory(CONSTRUCTOR_ARG_CONTEXT);, +		ConstructorArrayTestBean bean = (ConstructorArrayTestBean) xbf.getBean("indexedConstructorArray");, +		assertTrue(bean.array instanceof int[]);, +		assertEquals(1, ((int[]) bean.array).length);, +		assertEquals(1, ((int[]) bean.array)[0]);, +	}, +, +	public static class ConstructorArrayTestBean {, +, +		public final Object array;, +, +		public ConstructorArrayTestBean(int[] array) {, +			this.array = array;, +		}, +, +		public ConstructorArrayTestBean(float[] array) {, +			this.array = array;, +		}, +, +		public ConstructorArrayTestBean(short[] array) {, +			this.array = array;, +		}, +	}, +, +, +++ b/org.springframework.beans/src/main/java/org/springframework/beans/factory/config/ConstructorArgumentValues.java, +						(requiredType != null && ClassUtils.matchesTypeName(requiredType, valueHolder.getType()))) &&, +			if (valueHolder.getName() != null &&, +					(requiredName == null || !valueHolder.getName().equals(requiredName))) {, +			if (valueHolder.getType() != null &&]