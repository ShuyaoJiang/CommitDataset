[+++ b/spring-websocket/src/main/java/org/springframework/web/socket/config/annotation/WebMvcStompEndpointRegistry.java, +public class WebMvcStompEndpointRegistry implements StompEndpointRegistry {, +	protected void setApplicationContext(ApplicationContext applicationContext) {, +		this.stompHandler.setApplicationEventPublisher(applicationContext);, +	}, +++ b/spring-websocket/src/main/java/org/springframework/web/socket/config/annotation/WebMvcStompEndpointRegistry.java, +public class WebMvcStompEndpointRegistry implements StompEndpointRegistry {, +	protected void setApplicationContext(ApplicationContext applicationContext) {, +		this.stompHandler.setApplicationEventPublisher(applicationContext);, +	}, +++ b/spring-websocket/src/main/java/org/springframework/web/socket/config/annotation/WebSocketMessageBrokerConfigurationSupport.java, +		WebMvcStompEndpointRegistry registry = new WebMvcStompEndpointRegistry(subProtocolWebSocketHandler(),, +				getTransportRegistration(), userSessionRegistry(), messageBrokerSockJsTaskScheduler());]