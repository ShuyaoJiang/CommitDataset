[+++ b/spring-web/src/main/java/org/springframework/web/method/HandlerMethod.java, + * Copyright 2002-2012 the original author or authors., +				p[i] = new HandlerMethodParameter(i);, +	 * Return the HandlerMethod return type., +		return new HandlerMethodParameter(-1);, +	}, +, +	/**, +	 * Return the actual return value type., +	 */, +	public MethodParameter getReturnValueType(Object returnValue) {, +		return new ReturnValueMethodParameter(returnValue);, +	 * A MethodParameter with HandlerMethod-specific behavior., +		protected HandlerMethodParameter(int index) {, +			super(HandlerMethod.this.bridgedMethod, index);, +	/**, +	 * A MethodParameter for a HandlerMethod return type based on an actual return value., +	 */, +	private class ReturnValueMethodParameter extends HandlerMethodParameter {, +, +		private final Object returnValue;, +, +		public ReturnValueMethodParameter(Object returnValue) {, +			super(-1);, +			this.returnValue = returnValue;, +		}, +, +		@Override, +		public Class<?> getParameterType() {, +			return (this.returnValue != null) ? this.returnValue.getClass() : super.getParameterType();, +		}, +	}, +, +++ b/spring-web/src/main/java/org/springframework/web/method/HandlerMethod.java, + * Copyright 2002-2012 the original author or authors., +				p[i] = new HandlerMethodParameter(i);, +	 * Return the HandlerMethod return type., +		return new HandlerMethodParameter(-1);, +	}, +, +	/**, +	 * Return the actual return value type., +	 */, +	public MethodParameter getReturnValueType(Object returnValue) {, +		return new ReturnValueMethodParameter(returnValue);, +	 * A MethodParameter with HandlerMethod-specific behavior., +		protected HandlerMethodParameter(int index) {, +			super(HandlerMethod.this.bridgedMethod, index);, +	/**, +	 * A MethodParameter for a HandlerMethod return type based on an actual return value., +	 */, +	private class ReturnValueMethodParameter extends HandlerMethodParameter {, +, +		private final Object returnValue;, +, +		public ReturnValueMethodParameter(Object returnValue) {, +			super(-1);, +			this.returnValue = returnValue;, +		}, +, +		@Override, +		public Class<?> getParameterType() {, +			return (this.returnValue != null) ? this.returnValue.getClass() : super.getParameterType();, +		}, +	}, +, +++ b/spring-web/src/main/java/org/springframework/web/method/support/HandlerMethodReturnValueHandlerComposite.java, +				return returnValueHandler;, +		return null;, +++ b/spring-web/src/main/java/org/springframework/web/method/HandlerMethod.java, + * Copyright 2002-2012 the original author or authors., +				p[i] = new HandlerMethodParameter(i);, +	 * Return the HandlerMethod return type., +		return new HandlerMethodParameter(-1);, +	}, +, +	/**, +	 * Return the actual return value type., +	 */, +	public MethodParameter getReturnValueType(Object returnValue) {, +		return new ReturnValueMethodParameter(returnValue);, +	 * A MethodParameter with HandlerMethod-specific behavior., +		protected HandlerMethodParameter(int index) {, +			super(HandlerMethod.this.bridgedMethod, index);, +	/**, +	 * A MethodParameter for a HandlerMethod return type based on an actual return value., +	 */, +	private class ReturnValueMethodParameter extends HandlerMethodParameter {, +, +		private final Object returnValue;, +, +		public ReturnValueMethodParameter(Object returnValue) {, +			super(-1);, +			this.returnValue = returnValue;, +		}, +, +		@Override, +		public Class<?> getParameterType() {, +			return (this.returnValue != null) ? this.returnValue.getClass() : super.getParameterType();, +		}]