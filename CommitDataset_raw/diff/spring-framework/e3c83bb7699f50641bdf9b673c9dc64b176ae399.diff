[+++ b/spring-beans/src/main/java/org/springframework/beans/factory/xml/BeanDefinitionDocumentReader.java, + * Copyright 2002-2013 the original author or authors., +import org.w3c.dom.Document;, +, +	 * Set the Environment to use when reading bean definitions., +	 * <p>Used for evaluating profile information to determine whether a, +	 * {@code <beans/>} document/element should be included or ignored., +	 */, +	void setEnvironment(Environment environment);, +, +	/**, +	 * Read bean definitions from the given DOM document and, +	 * register them with the registry in the given reader context., +	 * @param readerContext the current context of the reader, +	 * (includes the target registry and the resource being parsed), +++ b/spring-beans/src/main/java/org/springframework/beans/factory/xml/BeanDefinitionDocumentReader.java, + * Copyright 2002-2013 the original author or authors., +import org.w3c.dom.Document;, +, +	 * Set the Environment to use when reading bean definitions., +	 * <p>Used for evaluating profile information to determine whether a, +	 * {@code <beans/>} document/element should be included or ignored., +	 */, +	void setEnvironment(Environment environment);, +, +	/**, +	 * Read bean definitions from the given DOM document and, +	 * register them with the registry in the given reader context., +	 * @param readerContext the current context of the reader, +	 * (includes the target registry and the resource being parsed), +++ b/spring-beans/src/main/java/org/springframework/beans/factory/xml/DefaultBeanDefinitionDocumentReader.java, + * Copyright 2002-2013 the original author or authors., +	private XmlReaderContext readerContext;, +, +, +			Assert.state(this.environment != null, "Environment must be set for evaluating profiles");, +			String[] specifiedProfiles = StringUtils.tokenizeToStringArray(, +					profileSpec, BeanDefinitionParserDelegate.MULTI_VALUE_ATTRIBUTE_DELIMITERS);, +		// Any nested <beans> elements will cause recursion in this method. In, +		this.delegate = createHelper(this.readerContext, root, parent);, +	protected BeanDefinitionParserDelegate createHelper(, +			XmlReaderContext readerContext, Element root, BeanDefinitionParserDelegate parentDelegate) {, +]