[+++ b/src/asciidoc/index.adoc, +[NOTE], +====, +If you are a WebSphere 7 user, be sure install the JPA 2.0 feature pack. On, +====, +WebSocket, covering adoption challenges, design considerations, and thoughts on, +WebSocket support. It is compatible with the Java WebSocket API standard, +(http://jcp.org/en/jsr/detail?id=356[JSR-356]), +Furthermore, some restrictive proxies, +for too long. A good overview on this topic from Peter Lubbers is available in, +the InfoQ article, +http://www.infoq.com/articles/Web-Sockets-Proxy-Servers["How HTML5 Web Sockets Interact With Proxy Servers"]., +, +Aside from short-to-midterm adoption challenges, using WebSocket, +early on, especially in contrast to what we know about building web applications today., +on having many URLs (__nouns__), a handful of HTTP methods (__verbs__), and, +other principles such as using hypermedia (__links__), remaining stateless, etc., +set of annotations for mapping messages to methods, similar to the Spring MVC, +WebSocket does imply a __messaging architecture__ but does not mandate the, +use of any specific __messaging protocol__. It is a very thin layer over TCP, +Unlike HTTP, which is an application-level protocol, in the WebSocket protocol, +too low level for anything but a very trivial application. It can be done, but, +During the handshake, client and server can use the header, +protocol to use. The use of a sub-protocol is not required, but, +With all the design considerations surrounding the use of WebSocket, it is, +For other application types, however, this may not be the case., +For example, a news or social feed that shows breaking news as they become, +Here latency is important, but it is acceptable if the news takes a, +the use of the WebSocket protocol critical. Even in such applications,, +HTTP and REST? The answer is going to vary by application, however, it is likely, +order to provide clients with alternatives. Furthermore, a REST API call may need, +For example, it runs on JSR-356 runtimes such as Tomcat (7.0.47+) and GlassFish (4.0+) but, +As explained in the <<websocket-intro-sub-protocol,introduction>>, direct use of a, +relevant, much like the details of TCP communication are not exposed to applications, +{javadoc-baseurl}/org/springframework/web/socket/server/support/WebSocketHttpRequestHandler.html[WebSocketHttpRequestHandler]., +a `HandshakeInterceptor`, which exposes "before" and "after" the handshake methods., +available to the `WebSocketSession`. For example, there is a built-in interceptor, +the steps of the WebSocket handshake, including validating the client origin,, +Both the Java-config and XML namespace make it possible to configure a custom, +implementations are provided and added by default when using the WebSocket Java-config, +understand. However, special considerations apply with regards to JSR-356 runtimes., +involves a Servlet container classpath scan (Servlet 3 feature) at startup; and, +are expected to perform an SCI scan that can slow down application startup,, +through the use of an `<absolute-ordering />` element in `web.xml`:, +As explained in the <<websocket-into-fallback-options,introduction>>, WebSocket is not, +supported in all browsers yet and may be precluded by restrictive network proxies., +{javadoc-baseurl}/org/springframework/web/socket/sockjs/support/SockJsHttpRequestHandler.html[SockJsHttpRequestHandler]., +configuration options, for example, to specify which transports to include., +https://github.com/sockjs/sockjs-protocol/blob/master/sockjs-protocol-0.3.3.py[test suite],, +SockJS adds a minimal amount of message framing. For example, the server can send, +"close frame" (the letter +c+); while the client sends messages as a JSON-encoded, +array prepended with the letter `a` (e.g. +a["message1","message2"]+)., +hierarchy of classes that implement the `SockJsService` interface, while, +To implement HTTP streaming and long polling in Servlet containers (both of which require, +an HTTP connection to remain open longer than usual),  Spring's SockJS support, +to the response; at which point the SockJS session will be closed. Since the, +messaging protocol originally created for scripting languages (such as Ruby, Python and, +Perl) to connect to enterprise message brokers. It is designed to address a, +For example, a client can use the +SEND+ command to send a message or the, +require a +"destination"+ header that indicates where to send a message to, or likewise, +the syntax of the destinations that they support. It is very common however, for, +destinations to be path-like strings where `"/topic/.."` implies publish-subscribe, +(__one-to-many__) and `"/queue/"` to implies point-to-point (__one-to-one__) message, +exchanges., +options. The endpoint is available for clients to connect to at URL path `/portfolio`:, +https://spring.io/spring-integration[Spring Integration] project, including, +{javadoc-baseurl}/org/springframework/messaging/MessageChannel.html[MessageChannel], +{javadoc-baseurl}/org/springframework/messaging/SubscribableChannel.html[SubscribableChannel] extends, +it, with the ability to register subscribers; and, +{javadoc-baseurl}/org/springframework/messaging/support/ExecutorSubscribableChannel.html[ExecutorSubscribableChannel], +The provided Java-config `@EnableWebSocketMessageBroker` and XML namespace, +customized, or extended. For example, an application can add a, +{javadoc-baseurl}/org/springframework/messaging/support/ChannelInterceptor.html[ChannelInterceptor], +to any message channel in order to intercept messages passing through it;, +necessary. As explained later, you can also use a full-featured message broker, +The configuration example assigns destination prefixes -- `/app` for filtering, +messages to annotated methods and `/topic` for messages to the broker. The, +example, this method handles messages to destination `/app/greetings`:, +channel named `"brokerChannel"` (which is used for sending messages to the broker, +from within the application). The new message is sent to the same destination, +as that of the client message, but with the default prefix `/topic`, +(you can also use `@SendTo` for any other target destination):, +destination `/app/greetings`. The message is routed to `GreetingController`,, +broker with destination `/topic/greetings`. The broker then broadcasts the, +, +for access to all headers in the message., +* `MessageHeaders` method argument for getting access to a map of all headers., +to `@Controller` methods. It is supported on the method level, but can also be, +broker. This is useful for implementing request-reply message interactions; for, +example, to fetch application data when the application UI is being initialized., +, +The easist way to do that is to have a `SimpMessagingTemplate` injected, and, +, +stores them in memory, and broadcasts messages to connected clients with matching, +destinations. The broker supports path-like destinations, including subscriptions, +, +Instead, applications can use a full-featured message broker and use it for, +managing client subscriptions and broadcasting messages; while annotated, +methods can still be used for application processing. In other words, all, +else remains the same, except a full-featured broker replaces the simple]