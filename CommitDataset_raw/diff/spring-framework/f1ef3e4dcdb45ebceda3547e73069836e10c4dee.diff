[+++ b/org.springframework.integration-tests/src/test/java/org/springframework/transaction/annotation/EnableTransactionManagementIntegrationTests.java, +import java.util.ArrayList;, +import org.springframework.cache.Cache;, +import org.springframework.cache.CacheManager;, +import org.springframework.cache.concurrent.ConcurrentMapCache;, +import org.springframework.cache.support.SimpleCacheManager;, +import org.springframework.context.annotation.ImportResource;, +	@Test, +	public void apcEscalation() {, +		AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();, +		ctx.register(EnableTxAndCachingConfig.class);, +		ctx.refresh();, +	}, +, +, +	@Configuration, +	@EnableTransactionManagement, +	@ImportResource("org/springframework/transaction/annotation/enable-caching.xml"), +	static class EnableTxAndCachingConfig {, +		@Bean, +		public PlatformTransactionManager txManager() {, +			return new CallCountingTransactionManager();, +		}, +, +		@Bean, +		public FooRepository fooRepository() {, +			return new DummyFooRepository();, +		}, +	, +		@Bean, +		public CacheManager cacheManager() {, +			SimpleCacheManager mgr = new SimpleCacheManager();, +			ArrayList<Cache> caches = new ArrayList<Cache>();, +			caches.add(new ConcurrentMapCache());, +			mgr.setCaches(caches);, +			return mgr;, +		}, +	}, +, +++ b/org.springframework.integration-tests/src/test/java/org/springframework/transaction/annotation/EnableTransactionManagementIntegrationTests.java, +import java.util.ArrayList;, +import org.springframework.cache.Cache;, +import org.springframework.cache.CacheManager;, +import org.springframework.cache.concurrent.ConcurrentMapCache;, +import org.springframework.cache.support.SimpleCacheManager;, +import org.springframework.context.annotation.ImportResource;, +	@Test, +	public void apcEscalation() {, +		AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();, +		ctx.register(EnableTxAndCachingConfig.class);, +		ctx.refresh();, +	}, +, +, +	@Configuration, +	@EnableTransactionManagement, +	@ImportResource("org/springframework/transaction/annotation/enable-caching.xml"), +	static class EnableTxAndCachingConfig {, +		@Bean, +		public PlatformTransactionManager txManager() {, +			return new CallCountingTransactionManager();, +		}, +, +		@Bean, +		public FooRepository fooRepository() {, +			return new DummyFooRepository();, +		}, +	, +		@Bean, +		public CacheManager cacheManager() {, +			SimpleCacheManager mgr = new SimpleCacheManager();, +			ArrayList<Cache> caches = new ArrayList<Cache>();, +			caches.add(new ConcurrentMapCache());, +			mgr.setCaches(caches);, +			return mgr;, +		}, +	}, +, +++ b/org.springframework.integration-tests/src/test/resources/org/springframework/transaction/annotation/enable-caching.xml, +<?xml version="1.0" encoding="UTF-8"?>, +<beans xmlns="http://www.springframework.org/schema/beans", +	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance", +	xmlns:cache="http://www.springframework.org/schema/cache", +	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd, +		http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd">, +, +	<cache:annotation-driven/>, +, +</beans>, +++ b/org.springframework.integration-tests/src/test/java/org/springframework/transaction/annotation/EnableTransactionManagementIntegrationTests.java, +import java.util.ArrayList;, +import org.springframework.cache.Cache;, +import org.springframework.cache.CacheManager;, +import org.springframework.cache.concurrent.ConcurrentMapCache;, +import org.springframework.cache.support.SimpleCacheManager;, +import org.springframework.context.annotation.ImportResource;, +	@Test, +	public void apcEscalation() {, +		AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();, +		ctx.register(EnableTxAndCachingConfig.class);]