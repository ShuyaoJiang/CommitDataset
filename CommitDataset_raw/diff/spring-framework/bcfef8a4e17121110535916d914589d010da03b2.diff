[+++ b/org.springframework.orm/src/main/java/org/springframework/orm/jpa/SharedEntityManagerCreator.java, +import org.springframework.util.ClassUtils;, +		private final ClassLoader proxyClassLoader;, +, +			if (this.targetFactory instanceof EntityManagerFactoryInfo) {, +				this.proxyClassLoader = ((EntityManagerFactoryInfo) this.targetFactory).getBeanClassLoader();, +			}, +			else {, +				this.proxyClassLoader = EntityManagerFactory.class.getClassLoader();, +			}, +						Class[] ifcs = ClassUtils.getAllInterfacesForClass(query.getClass(), this.proxyClassLoader);, +						result = Proxy.newProxyInstance(this.proxyClassLoader, ifcs,, +		public DeferredQueryInvocationHandler(Query target, EntityManager em) {]