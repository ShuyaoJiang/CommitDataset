[+++ b/spring-messaging/src/main/java/org/springframework/messaging/simp/stomp/StompBrokerRelayMessageHandler.java, +import java.util.concurrent.Callable;, +import org.springframework.util.concurrent.ListenableFutureTask;, +	private static final ListenableFutureTask<Void> EMPTY_TASK = new ListenableFutureTask<Void>(new VoidCallable());, +, +					if (StompCommand.DISCONNECT.equals(StompHeaderAccessor.wrap(message).getCommand())) {, +						return EMPTY_TASK;, +					}, +, +			this.isStompConnected = false;, +, +			TcpConnection<byte[]> conn = this.tcpConnection;, +			this.tcpConnection = null;, +			if (conn != null) {, +				conn.close();, +	private static class VoidCallable implements Callable<Void> {, +, +		@Override, +		public Void call() throws Exception {, +			return null;, +		}, +	}, +]