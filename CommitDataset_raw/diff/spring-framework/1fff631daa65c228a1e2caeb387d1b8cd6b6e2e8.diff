[+++ b/spring-websocket/src/main/java/org/springframework/web/socket/messaging/SubProtocolWebSocketHandler.java, +import java.util.HashSet;, +import java.util.Set;, +	private final Set<SubProtocolHandler> protocolHandlers = new HashSet<SubProtocolHandler>();, +		return new ArrayList<SubProtocolHandler>(this.protocolHandlers);, +				handler = this.protocolHandlers.iterator().next();, +++ b/spring-websocket/src/main/java/org/springframework/web/socket/messaging/SubProtocolWebSocketHandler.java, +import java.util.HashSet;, +import java.util.Set;, +	private final Set<SubProtocolHandler> protocolHandlers = new HashSet<SubProtocolHandler>();, +		return new ArrayList<SubProtocolHandler>(this.protocolHandlers);, +				handler = this.protocolHandlers.iterator().next();, +++ b/spring-websocket/src/test/java/org/springframework/web/socket/config/annotation/WebMvcStompEndpointRegistryTests.java, +		//SPR-12403, +		assertEquals(1, this.webSocketHandler.getProtocolHandlers().size());, +]