[+++ b/org.springframework.jdbc/src/test/java/org/springframework/jdbc/datasource/init/DatabasePopulatorTests.java, +import static org.junit.Assert.assertEquals;, +, +, +import org.junit.After;, +import org.junit.Ignore;, + * @author Sam Brannen, +	private final EmbeddedDatabaseBuilder builder = new EmbeddedDatabaseBuilder();, +	private final EmbeddedDatabase db = builder.build();, +	private final ResourceDatabasePopulator databasePopulator = new ResourceDatabasePopulator();, +	private final ClassRelativeResourceLoader resourceLoader = new ClassRelativeResourceLoader(getClass());, +	private final JdbcTemplate jdbcTemplate = new JdbcTemplate(db);, +, +	private void assertTestDatabaseCreated() {, +		assertEquals("Keith", jdbcTemplate.queryForObject("select NAME from T_TEST", String.class));, +	}, +, +	private void assertUsersDatabaseCreated(DataSource db) {, +		assertEquals("Sam", jdbcTemplate.queryForObject("select first_name from users where last_name = 'Brannen'",, +				String.class));, +	}, +, +	@After, +	public void shutDown() {, +		db.shutdown();, +	}, +, +		} finally {, +, +		assertTestDatabaseCreated();, +	@Ignore("Disabled until SPR-7449 is resolved"), +	@Test, +	public void scriptWithEolBetweenTokens() throws Exception {, +		databasePopulator.addScript(resourceLoader.getResource("users-schema.sql"));, +		databasePopulator.addScript(resourceLoader.getResource("users-data.sql"));, +		Connection connection = db.getConnection();, +		try {, +			databasePopulator.populate(connection);, +		} finally {, +			connection.close();, +		}, +, +		assertUsersDatabaseCreated(db);, +++ b/org.springframework.jdbc/src/test/java/org/springframework/jdbc/datasource/init/DatabasePopulatorTests.java, +import static org.junit.Assert.assertEquals;, +, +, +import org.junit.After;, +import org.junit.Ignore;, + * @author Sam Brannen, +	private final EmbeddedDatabaseBuilder builder = new EmbeddedDatabaseBuilder();, +	private final EmbeddedDatabase db = builder.build();, +	private final ResourceDatabasePopulator databasePopulator = new ResourceDatabasePopulator();, +	private final ClassRelativeResourceLoader resourceLoader = new ClassRelativeResourceLoader(getClass());, +	private final JdbcTemplate jdbcTemplate = new JdbcTemplate(db);, +, +	private void assertTestDatabaseCreated() {, +		assertEquals("Keith", jdbcTemplate.queryForObject("select NAME from T_TEST", String.class));, +	}, +, +	private void assertUsersDatabaseCreated(DataSource db) {, +		assertEquals("Sam", jdbcTemplate.queryForObject("select first_name from users where last_name = 'Brannen'",, +				String.class));, +	}, +, +	@After, +	public void shutDown() {, +		db.shutdown();, +	}, +, +		} finally {, +, +		assertTestDatabaseCreated();, +	@Ignore("Disabled until SPR-7449 is resolved"), +	@Test, +	public void scriptWithEolBetweenTokens() throws Exception {, +		databasePopulator.addScript(resourceLoader.getResource("users-schema.sql"));, +		databasePopulator.addScript(resourceLoader.getResource("users-data.sql"));, +		Connection connection = db.getConnection();, +		try {, +			databasePopulator.populate(connection);, +		} finally {, +			connection.close();, +		}, +, +		assertUsersDatabaseCreated(db);, +++ b/org.springframework.jdbc/src/test/resources/org/springframework/jdbc/datasource/init/users-data.sql, +INSERT INTO, +users(first_name, last_name), +values('Sam', 'Brannen');, +++ b/org.springframework.jdbc/src/test/java/org/springframework/jdbc/datasource/init/DatabasePopulatorTests.java, +import static org.junit.Assert.assertEquals;, +, +, +import org.junit.After;, +import org.junit.Ignore;, + * @author Sam Brannen, +	private final EmbeddedDatabaseBuilder builder = new EmbeddedDatabaseBuilder();, +	private final EmbeddedDatabase db = builder.build();, +	private final ResourceDatabasePopulator databasePopulator = new ResourceDatabasePopulator();]