[+++ b/org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/annotation/AnnotationMethodHandlerAdapter.java, +			MediaType.sortByQualityValue(acceptedMediaTypes);, +			MediaType.sortByQualityValue(requestAccepts);, +			, +++ b/org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/annotation/AnnotationMethodHandlerAdapter.java, +			MediaType.sortByQualityValue(acceptedMediaTypes);, +			MediaType.sortByQualityValue(requestAccepts);, +			, +++ b/org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/annotation/AnnotationMethodHandlerExceptionResolver.java, + * Copyright 2002-2010 the original author or authors., +import java.io.IOException;, +import javax.servlet.ServletException;, +import org.springframework.http.HttpInputMessage;, +import org.springframework.http.HttpOutputMessage;, +import org.springframework.http.MediaType;, +import org.springframework.http.converter.ByteArrayHttpMessageConverter;, +import org.springframework.http.converter.FormHttpMessageConverter;, +import org.springframework.http.converter.HttpMessageConverter;, +import org.springframework.http.converter.StringHttpMessageConverter;, +import org.springframework.http.converter.xml.SourceHttpMessageConverter;, +import org.springframework.http.server.ServletServerHttpRequest;, +import org.springframework.http.server.ServletServerHttpResponse;, +import org.springframework.web.bind.annotation.ResponseStatus;, +		MediaType.sortByQualityValue(acceptedMediaTypes);, +++ b/org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/annotation/AnnotationMethodHandlerAdapter.java, +			MediaType.sortByQualityValue(acceptedMediaTypes);, +			MediaType.sortByQualityValue(requestAccepts);, +			, +++ b/org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/annotation/AnnotationMethodHandlerExceptionResolver.java, + * Copyright 2002-2010 the original author or authors., +import java.io.IOException;, +import javax.servlet.ServletException;, +import org.springframework.http.HttpInputMessage;, +import org.springframework.http.HttpOutputMessage;, +import org.springframework.http.MediaType;, +import org.springframework.http.converter.ByteArrayHttpMessageConverter;, +import org.springframework.http.converter.FormHttpMessageConverter;, +import org.springframework.http.converter.HttpMessageConverter;, +import org.springframework.http.converter.StringHttpMessageConverter;, +import org.springframework.http.converter.xml.SourceHttpMessageConverter;, +import org.springframework.http.server.ServletServerHttpRequest;, +import org.springframework.http.server.ServletServerHttpResponse;, +import org.springframework.web.bind.annotation.ResponseStatus;, +		MediaType.sortByQualityValue(acceptedMediaTypes);, +++ b/org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/view/ContentNegotiatingViewResolver.java, +				MediaType.sortByQualityValue(mediaTypes);, +++ b/org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/annotation/AnnotationMethodHandlerAdapter.java, +			MediaType.sortByQualityValue(acceptedMediaTypes);, +			MediaType.sortByQualityValue(requestAccepts);, +			, +++ b/org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/annotation/AnnotationMethodHandlerExceptionResolver.java, + * Copyright 2002-2010 the original author or authors., +import java.io.IOException;, +import javax.servlet.ServletException;, +import org.springframework.http.HttpInputMessage;, +import org.springframework.http.HttpOutputMessage;, +import org.springframework.http.MediaType;, +import org.springframework.http.converter.ByteArrayHttpMessageConverter;, +import org.springframework.http.converter.FormHttpMessageConverter;, +import org.springframework.http.converter.HttpMessageConverter;, +import org.springframework.http.converter.StringHttpMessageConverter;, +import org.springframework.http.converter.xml.SourceHttpMessageConverter;, +import org.springframework.http.server.ServletServerHttpRequest;, +import org.springframework.http.server.ServletServerHttpResponse;, +import org.springframework.web.bind.annotation.ResponseStatus;, +		MediaType.sortByQualityValue(acceptedMediaTypes);, +++ b/org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/view/ContentNegotiatingViewResolver.java, +				MediaType.sortByQualityValue(mediaTypes);, +++ b/org.springframework.web.servlet/src/test/java/org/springframework/web/servlet/mvc/annotation/RequestMappingInfoComparatorTests.java, +		// See SPR-7000, +		request = new MockHttpServletRequest();, +		request.addHeader("Accept", "text/html;q=0.9,application/xml");, +		comparator = new AnnotationMethodHandlerAdapter.RequestMappingInfoComparator(new MockComparator(), request);, +, +		assertTrue(comparator.compare(html, xml) > 0);, +		assertTrue(comparator.compare(xml, html) < 0);, +	}, +++ b/org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/annotation/AnnotationMethodHandlerAdapter.java, +			MediaType.sortByQualityValue(acceptedMediaTypes);, +			MediaType.sortByQualityValue(requestAccepts);, +			, +++ b/org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/annotation/AnnotationMethodHandlerExceptionResolver.java, + * Copyright 2002-2010 the original author or authors., +import java.io.IOException;, +import javax.servlet.ServletException;, +import org.springframework.http.HttpInputMessage;, +import org.springframework.http.HttpOutputMessage;, +import org.springframework.http.MediaType;, +import org.springframework.http.converter.ByteArrayHttpMessageConverter;, +import org.springframework.http.converter.FormHttpMessageConverter;, +import org.springframework.http.converter.HttpMessageConverter;, +import org.springframework.http.converter.StringHttpMessageConverter;, +import org.springframework.http.converter.xml.SourceHttpMessageConverter;, +import org.springframework.http.server.ServletServerHttpRequest;, +import org.springframework.http.server.ServletServerHttpResponse;, +import org.springframework.web.bind.annotation.ResponseStatus;, +		MediaType.sortByQualityValue(acceptedMediaTypes);, +++ b/org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/view/ContentNegotiatingViewResolver.java, +				MediaType.sortByQualityValue(mediaTypes);, +++ b/org.springframework.web.servlet/src/test/java/org/springframework/web/servlet/mvc/annotation/RequestMappingInfoComparatorTests.java]