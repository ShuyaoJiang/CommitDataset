[+++ b/spring-websocket/src/main/java/org/springframework/web/socket/messaging/StompSubProtocolHandler.java, +	private static final String[] SUPPORTED_VERSIONS = {"1.2", "1.1", "1.0"};, +, +			connectedHeaders.setVersion(, +					Arrays.stream(SUPPORTED_VERSIONS), +							.filter(acceptVersions::contains), +							.findAny(), +							.orElseThrow(() -> new IllegalArgumentException(, +									"Unsupported STOMP version '" + acceptVersions + "'")));, +++ b/spring-websocket/src/main/java/org/springframework/web/socket/messaging/StompSubProtocolHandler.java, +	private static final String[] SUPPORTED_VERSIONS = {"1.2", "1.1", "1.0"};, +, +			connectedHeaders.setVersion(, +					Arrays.stream(SUPPORTED_VERSIONS), +							.filter(acceptVersions::contains), +							.findAny(), +							.orElseThrow(() -> new IllegalArgumentException(, +									"Unsupported STOMP version '" + acceptVersions + "'")));, +++ b/spring-websocket/src/test/java/org/springframework/web/socket/messaging/StompSubProtocolHandlerTests.java, +		accessor.setAcceptVersion("1.0,1.1,1.2");, +		assertEquals("CONNECTED\n" + "version:1.2\n" + "heart-beat:15000,15000\n" +, +		accessor.setAcceptVersion("1.0");, +		assertEquals("CONNECTED\n" + "version:1.0\n" + "heart-beat:0,0\n" +]