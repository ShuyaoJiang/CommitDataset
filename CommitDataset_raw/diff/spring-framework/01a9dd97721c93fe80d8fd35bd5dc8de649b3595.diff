[+++ b/spring-webmvc/src/main/java/org/springframework/web/servlet/view/json/MappingJackson2JsonView.java, +import java.io.ByteArrayOutputStream;, +import java.io.OutputStream;, +	private boolean updateContentLength = false;, +	/**, +	 * Whether to update the 'Content-Length' header of the response. When set to, +	 * {@code true}, the response is buffered in order to determine the content, +	 * length and set the 'Content-Length' header of the response., +	 * <p>The default setting is {@code false}., +	 */, +	public void setUpdateContentLength(boolean updateContentLength) {, +		this.updateContentLength = updateContentLength;, +	}, +		OutputStream stream = this.updateContentLength ? createTemporaryOutputStream() : response.getOutputStream();, +, +		JsonGenerator generator = this.objectMapper.getJsonFactory().createJsonGenerator(stream, this.encoding);, +, +		if (this.updateContentLength) {, +			writeToResponse(response, (ByteArrayOutputStream) stream);, +		}, +++ b/spring-webmvc/src/main/java/org/springframework/web/servlet/view/json/MappingJackson2JsonView.java, +import java.io.ByteArrayOutputStream;, +import java.io.OutputStream;, +	private boolean updateContentLength = false;, +	/**, +	 * Whether to update the 'Content-Length' header of the response. When set to, +	 * {@code true}, the response is buffered in order to determine the content, +	 * length and set the 'Content-Length' header of the response., +	 * <p>The default setting is {@code false}., +	 */, +	public void setUpdateContentLength(boolean updateContentLength) {, +		this.updateContentLength = updateContentLength;, +	}, +		OutputStream stream = this.updateContentLength ? createTemporaryOutputStream() : response.getOutputStream();, +, +		JsonGenerator generator = this.objectMapper.getJsonFactory().createJsonGenerator(stream, this.encoding);, +, +		if (this.updateContentLength) {, +			writeToResponse(response, (ByteArrayOutputStream) stream);, +		}, +++ b/spring-webmvc/src/main/java/org/springframework/web/servlet/view/json/MappingJacksonJsonView.java, + * Copyright 2002-2012 the original author or authors., +import java.io.ByteArrayOutputStream;, +import java.io.OutputStream;, +	private boolean updateContentLength = false;, +	/**, +	 * Whether to update the 'Content-Length' header of the response. When set to, +	 * {@code true}, the response is buffered in order to determine the content, +	 * length and set the 'Content-Length' header of the response., +	 * <p>The default setting is {@code false}., +	 */, +	public void setUpdateContentLength(boolean updateContentLength) {, +		this.updateContentLength = updateContentLength;, +	}, +, +		OutputStream stream = this.updateContentLength ? createTemporaryOutputStream() : response.getOutputStream();, +, +		JsonGenerator generator = this.objectMapper.getJsonFactory().createJsonGenerator(stream, this.encoding);, +, +		if (this.updateContentLength) {, +			writeToResponse(response, (ByteArrayOutputStream) stream);, +		}, +++ b/spring-webmvc/src/main/java/org/springframework/web/servlet/view/json/MappingJackson2JsonView.java, +import java.io.ByteArrayOutputStream;, +import java.io.OutputStream;, +	private boolean updateContentLength = false;, +	/**, +	 * Whether to update the 'Content-Length' header of the response. When set to, +	 * {@code true}, the response is buffered in order to determine the content, +	 * length and set the 'Content-Length' header of the response., +	 * <p>The default setting is {@code false}., +	 */, +	public void setUpdateContentLength(boolean updateContentLength) {, +		this.updateContentLength = updateContentLength;, +	}, +		OutputStream stream = this.updateContentLength ? createTemporaryOutputStream() : response.getOutputStream();, +, +		JsonGenerator generator = this.objectMapper.getJsonFactory().createJsonGenerator(stream, this.encoding);, +, +		if (this.updateContentLength) {, +			writeToResponse(response, (ByteArrayOutputStream) stream);, +		}, +++ b/spring-webmvc/src/main/java/org/springframework/web/servlet/view/json/MappingJacksonJsonView.java, + * Copyright 2002-2012 the original author or authors., +import java.io.ByteArrayOutputStream;, +import java.io.OutputStream;, +	private boolean updateContentLength = false;, +	/**, +	 * Whether to update the 'Content-Length' header of the response. When set to, +	 * {@code true}, the response is buffered in order to determine the content, +	 * length and set the 'Content-Length' header of the response., +	 * <p>The default setting is {@code false}., +	 */, +	public void setUpdateContentLength(boolean updateContentLength) {, +		this.updateContentLength = updateContentLength;, +	}, +, +		OutputStream stream = this.updateContentLength ? createTemporaryOutputStream() : response.getOutputStream();, +, +		JsonGenerator generator = this.objectMapper.getJsonFactory().createJsonGenerator(stream, this.encoding);]