[+++ b/org.springframework.context/src/main/java/org/springframework/context/annotation/ConfigurationClassPostProcessor.java, +	private boolean postProcessBeanFactoryCalled = false;, +, +		if (this.postProcessBeanDefinitionRegistryCalled) {, +			throw new IllegalStateException(, +					"postProcessBeanDefinitionRegistry already called for this post-processor");, +		}, +		if (this.postProcessBeanFactoryCalled) {, +			throw new IllegalStateException(, +					"postProcessBeanFactory already called for this post-processor");, +		}, +		if (this.postProcessBeanFactoryCalled) {, +			throw new IllegalStateException(, +					"postProcessBeanFactory already called for this post-processor");, +		}, +		this.postProcessBeanFactoryCalled = true;]