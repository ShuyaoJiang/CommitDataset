[+++ b/org.springframework.beans/src/test/java/org/springframework/beans/BeanWrapperGenericsTests.java, + * Copyright 2002-2009 the original author or authors., +import static org.junit.Assert.*;, +import org.springframework.beans.propertyeditors.CustomNumberEditor;, +import org.springframework.beans.propertyeditors.StringTrimmerEditor;, +import org.springframework.core.io.Resource;, +import org.springframework.core.io.UrlResource;, +, +	public void testGenericLowerBoundedSet() {, +		GenericBean<?> gb = new GenericBean<Object>();, +		BeanWrapper bw = new BeanWrapperImpl(gb);, +		bw.registerCustomEditor(Number.class, new CustomNumberEditor(Integer.class, true));, +		Set<String> input = new HashSet<String>();, +		input.add("4");, +		input.add("5");, +		bw.setPropertyValue("numberSet", input);, +		assertTrue(gb.getNumberSet().contains(new Integer(4)));, +		assertTrue(gb.getNumberSet().contains(new Integer(5)));, +	}, +, +	@Test, +++ b/org.springframework.beans/src/test/java/org/springframework/beans/BeanWrapperGenericsTests.java, + * Copyright 2002-2009 the original author or authors., +import static org.junit.Assert.*;, +import org.springframework.beans.propertyeditors.CustomNumberEditor;, +import org.springframework.beans.propertyeditors.StringTrimmerEditor;, +import org.springframework.core.io.Resource;, +import org.springframework.core.io.UrlResource;, +, +	public void testGenericLowerBoundedSet() {, +		GenericBean<?> gb = new GenericBean<Object>();, +		BeanWrapper bw = new BeanWrapperImpl(gb);, +		bw.registerCustomEditor(Number.class, new CustomNumberEditor(Integer.class, true));, +		Set<String> input = new HashSet<String>();, +		input.add("4");, +		input.add("5");, +		bw.setPropertyValue("numberSet", input);, +		assertTrue(gb.getNumberSet().contains(new Integer(4)));, +		assertTrue(gb.getNumberSet().contains(new Integer(5)));, +	}, +, +	@Test, +++ b/org.springframework.beans/src/test/java/test/beans/GenericBean.java, + * Copyright 2002-2009 the original author or authors., +	private Set<? extends Number> numberSet;, +, +	public Set<? extends Number> getNumberSet() {, +		return numberSet;, +	}, +, +	public void setNumberSet(Set<? extends Number> numberSet) {, +		this.numberSet = numberSet;, +	}, +, +++ b/org.springframework.beans/src/test/java/org/springframework/beans/BeanWrapperGenericsTests.java, + * Copyright 2002-2009 the original author or authors., +import static org.junit.Assert.*;, +import org.springframework.beans.propertyeditors.CustomNumberEditor;, +import org.springframework.beans.propertyeditors.StringTrimmerEditor;, +import org.springframework.core.io.Resource;, +import org.springframework.core.io.UrlResource;, +, +	public void testGenericLowerBoundedSet() {, +		GenericBean<?> gb = new GenericBean<Object>();, +		BeanWrapper bw = new BeanWrapperImpl(gb);, +		bw.registerCustomEditor(Number.class, new CustomNumberEditor(Integer.class, true));, +		Set<String> input = new HashSet<String>();, +		input.add("4");, +		input.add("5");, +		bw.setPropertyValue("numberSet", input);, +		assertTrue(gb.getNumberSet().contains(new Integer(4)));, +		assertTrue(gb.getNumberSet().contains(new Integer(5)));, +	}, +, +	@Test, +++ b/org.springframework.beans/src/test/java/test/beans/GenericBean.java, + * Copyright 2002-2009 the original author or authors., +	private Set<? extends Number> numberSet;, +, +	public Set<? extends Number> getNumberSet() {, +		return numberSet;, +	}, +, +	public void setNumberSet(Set<? extends Number> numberSet) {, +		this.numberSet = numberSet;, +	}, +, +++ b/org.springframework.core/src/main/java/org/springframework/core/GenericCollectionTypeResolver.java, +			WildcardType wildcardType = (WildcardType) paramType;, +			Type[] upperBounds = wildcardType.getUpperBounds();, +			if (upperBounds != null && upperBounds.length > 0 && !Object.class.equals(upperBounds[0])) {, +				paramType = upperBounds[0];, +			}, +			else {, +				Type[] lowerBounds = wildcardType.getLowerBounds();, +				if (lowerBounds != null && lowerBounds.length > 0 && !Object.class.equals(lowerBounds[0])) {, +		}, +++ b/org.springframework.beans/src/test/java/org/springframework/beans/BeanWrapperGenericsTests.java, + * Copyright 2002-2009 the original author or authors., +import static org.junit.Assert.*;]