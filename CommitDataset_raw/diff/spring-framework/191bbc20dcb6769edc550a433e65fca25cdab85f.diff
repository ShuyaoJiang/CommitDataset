[+++ b/spring-test/src/main/java/org/springframework/test/web/servlet/setup/StandaloneMockMvcBuilder.java, + * Copyright 2002-2017 the original author or authors., +import java.util.function.Supplier;, +	private final List<Object> controllers;, +	private Supplier<RequestMappingHandlerMapping> handlerMappingFactory = RequestMappingHandlerMapping::new;, +, +		this.controllers = Arrays.asList(controllers);, +	/**, +	 * Configure factory to create a custom {@link RequestMappingHandlerMapping}., +	 * @param factory the factory, +	 * @since 5.0, +	 */, +	public StandaloneMockMvcBuilder setCustomHandlerMapping(Supplier<RequestMappingHandlerMapping> factory) {, +		Assert.notNull(factory, "RequestMappingHandlerMapping supplier is required.");, +		this.handlerMappingFactory = factory;, +		return this;, +	}, +, +		wac.addBeans(this.controllers);, +		RequestMappingHandlerMapping hm = config.getHandlerMapping();, +		public RequestMappingHandlerMapping getHandlerMapping() {, +			RequestMappingHandlerMapping handlerMapping = handlerMappingFactory.get();]