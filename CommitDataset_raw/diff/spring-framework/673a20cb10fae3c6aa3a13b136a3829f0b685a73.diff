[+++ b/spring-core/src/main/java/org/springframework/util/xml/StaxUtils.java, + * Copyright 2002-2019 the original author or authors., +import java.util.function.Supplier;, +	 * @return a new defensively initialized input factory instance to use, +		return createDefensiveInputFactory(XMLInputFactory::newFactory);, +	}, +, +	/**, +	 * Variant of {@link #createDefensiveInputFactory()} with a custom instance., +	 * @param instanceSupplier supplier for the input factory instance, +	 * @return a new defensively initialized input factory instance to use, +	 * @since 5.0.12, +	 */, +	public static <T extends XMLInputFactory> T createDefensiveInputFactory(Supplier<T> instanceSupplier) {, +		T inputFactory = instanceSupplier.get();, +++ b/spring-core/src/main/java/org/springframework/util/xml/StaxUtils.java, + * Copyright 2002-2019 the original author or authors., +import java.util.function.Supplier;, +	 * @return a new defensively initialized input factory instance to use, +		return createDefensiveInputFactory(XMLInputFactory::newFactory);, +	}, +, +	/**, +	 * Variant of {@link #createDefensiveInputFactory()} with a custom instance., +	 * @param instanceSupplier supplier for the input factory instance, +	 * @return a new defensively initialized input factory instance to use, +	 * @since 5.0.12, +	 */, +	public static <T extends XMLInputFactory> T createDefensiveInputFactory(Supplier<T> instanceSupplier) {, +		T inputFactory = instanceSupplier.get();, +++ b/spring-web/src/main/java/org/springframework/http/codec/xml/XmlEventDecoder.java, + * Copyright 2002-2019 the original author or authors., +		private static final AsyncXMLInputFactory inputFactory =, +				StaxUtils.createDefensiveInputFactory(InputFactoryImpl::new);, +]