[+++ b/src/asciidoc/index.adoc, +When a STOMP endpoint is configured, the Spring application acts as the STOMP broker, +to connected clients. It handles incoming messages and sends messages back., +This section provides a big picture overview of how messages flow inside the application., +The `spring-messaging` module contains a number of abstractions that originated in the, +https://spring.io/spring-integration[Spring Integration] project and are intended, +for use as building blocks in messaging applications:, +* {javadoc-baseurl}/org/springframework/messaging/Message.html[Message] --, +* {javadoc-baseurl}/org/springframework/messaging/MessageHandler.html[MessageHandler] --, +a contract for handling a message., +* {javadoc-baseurl}/org/springframework/messaging/MessageChannel.html[MessageChannel] --, +a contract for sending a message enabling loose coupling between senders and receivers., +* {javadoc-baseurl}/org/springframework/messaging/SubscribableChannel.html[SubscribableChannel] --, +* {javadoc-baseurl}/org/springframework/messaging/support/ExecutorSubscribableChannel.html[ExecutorSubscribableChannel] --, +asynchronously through a thread pool., +The provided STOMP over WebSocket config, both Java and XML, uses the above to, +assemble a concrete message flow including the following 3 channels:, +* `"clientInboundChannel"` -- for messages from WebSocket clients. Every incoming, +WebSocket message carrying a STOMP frame is sent through this channel., +* `"clientOutboundChannel"` -- for messages to WebSocket clients. Every outgoing, +STOMP message from the broker is sent through this channel before getting sent, +to a client's WebSocket session., +* `"brokerChannel"` -- for messages to the broker from within the application., +Every message sent from the application to the broker passes through this channel., +Messages on the `"clientInboundChannel"` can flow to annotated, +the "/app" prefix could route messages to annotated methods while the "/topic", +and "/queue" prefixes could route messages to the broker., +The broker in turn broadcasts the message to clients. Sending a message, +to a destination can also be done from anywhere in the application with, +the help of a messaging template. For example a an HTTP POST handling method, +can broadcast a message to connected clients or a service component may, +periodically broadcast stock quotes., +The following explains the message flow for the above exmaple:]