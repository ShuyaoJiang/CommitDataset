[+++ b/org.springframework.beans/src/main/java/org/springframework/beans/factory/support/RootBeanDefinition.java, +	/**, +	 * Check whether the given candidate qualifies as a factory method., +	 */, +++ b/org.springframework.beans/src/main/java/org/springframework/beans/factory/support/RootBeanDefinition.java, +	/**, +	 * Check whether the given candidate qualifies as a factory method., +	 */, +++ b/org.springframework.context/src/main/java/org/springframework/context/annotation/ConfigurationClassBeanDefinitionReader.java, +import org.springframework.beans.factory.annotation.AnnotatedBeanDefinition;, +import org.springframework.core.type.AnnotationMetadata;, +		ConfigurationClass configClass = method.getDeclaringClass();, +		RootBeanDefinition beanDef = new ConfigurationClassBeanDefinition(configClass);, +		beanDef.setResource(configClass.getResource());, +	private class ConfigurationClassBeanDefinition extends RootBeanDefinition implements AnnotatedBeanDefinition {, +		private AnnotationMetadata annotationMetadata;, +, +		public ConfigurationClassBeanDefinition(ConfigurationClass configClass) {, +			this.annotationMetadata = configClass.getMetadata();, +			this.annotationMetadata = original.annotationMetadata;, +		}, +, +		public AnnotationMetadata getMetadata() {, +			return this.annotationMetadata;]