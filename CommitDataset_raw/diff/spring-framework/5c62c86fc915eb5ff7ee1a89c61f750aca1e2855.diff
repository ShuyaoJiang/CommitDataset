[+++ b/spring-webmvc/src/main/java/org/springframework/web/servlet/config/annotation/WebMvcConfigurationSupport.java, +		SimpleUrlHandlerMapping hm = (SimpleUrlHandlerMapping) resourceHandlerMapping();, +		return new ResourceUrlGenerator(hm.getUrlMap());, +++ b/spring-webmvc/src/main/java/org/springframework/web/servlet/config/annotation/WebMvcConfigurationSupport.java, +		SimpleUrlHandlerMapping hm = (SimpleUrlHandlerMapping) resourceHandlerMapping();, +		return new ResourceUrlGenerator(hm.getUrlMap());, +++ b/spring-webmvc/src/test/java/org/springframework/web/servlet/resource/ResourceUrlFilterTests.java, +import java.util.Collections;, +import org.springframework.context.annotation.Bean;, +import org.springframework.web.servlet.handler.SimpleUrlHandlerMapping;, +, +		@Bean, +		public ResourceUrlGenerator resourceUrlGenerator() {, +			ResourceUrlGenerator generator = new ResourceUrlGenerator();, +			SimpleUrlHandlerMapping handlerMapping = (SimpleUrlHandlerMapping) resourceHandlerMapping();, +			generator.setResourceHandlerMappings(Collections.singletonList(handlerMapping));, +			return generator;, +		}]