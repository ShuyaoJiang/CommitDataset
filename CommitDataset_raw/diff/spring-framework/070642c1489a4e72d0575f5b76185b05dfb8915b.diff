[+++ b/spring-beans/src/main/java/org/springframework/beans/factory/config/CustomScopeConfigurer.java, + * Copyright 2002-2014 the original author or authors., +import java.util.LinkedHashMap;, +	/**, +	 * Add the given scope to this configurer's map of scopes., +	 * @param scopeName the name of the scope, +	 * @param scope the scope implementation, +	 * @since 4.1.1, +	 */, +	public void addScope(String scopeName, Scope scope) {, +		if (this.scopes == null) {, +			this.scopes = new LinkedHashMap<String, Object>(1);, +		}, +		this.scopes.put(scopeName, scope);, +	}, +, +, +++ b/spring-beans/src/main/java/org/springframework/beans/factory/config/CustomScopeConfigurer.java, + * Copyright 2002-2014 the original author or authors., +import java.util.LinkedHashMap;, +	/**, +	 * Add the given scope to this configurer's map of scopes., +	 * @param scopeName the name of the scope, +	 * @param scope the scope implementation, +	 * @since 4.1.1, +	 */, +	public void addScope(String scopeName, Scope scope) {, +		if (this.scopes == null) {, +			this.scopes = new LinkedHashMap<String, Object>(1);, +		}, +		this.scopes.put(scopeName, scope);, +	}, +, +, +++ b/spring-websocket/src/main/java/org/springframework/web/socket/config/annotation/WebSocketConfigurationSupport.java, + * Copyright 2002-2014 the original author or authors., +++ b/spring-beans/src/main/java/org/springframework/beans/factory/config/CustomScopeConfigurer.java, + * Copyright 2002-2014 the original author or authors., +import java.util.LinkedHashMap;, +	/**, +	 * Add the given scope to this configurer's map of scopes., +	 * @param scopeName the name of the scope, +	 * @param scope the scope implementation, +	 * @since 4.1.1, +	 */, +	public void addScope(String scopeName, Scope scope) {, +		if (this.scopes == null) {, +			this.scopes = new LinkedHashMap<String, Object>(1);, +		}, +		this.scopes.put(scopeName, scope);, +	}, +, +, +++ b/spring-websocket/src/main/java/org/springframework/web/socket/config/annotation/WebSocketConfigurationSupport.java, + * Copyright 2002-2014 the original author or authors., +++ b/spring-websocket/src/main/java/org/springframework/web/socket/config/annotation/WebSocketMessageBrokerConfigurationSupport.java, +import org.springframework.messaging.simp.broker.AbstractBrokerMessageHandler;, + *, + * <p>Typically used in conjunction with, +		configurer.addScope("websocket", new SimpSessionScope());, +		AbstractBrokerMessageHandler relayBean = stompBrokerRelayMessageHandler();, +		StompBrokerRelayMessageHandler brokerRelay = (relayBean instanceof StompBrokerRelayMessageHandler ?, +				(StompBrokerRelayMessageHandler) relayBean : null);]