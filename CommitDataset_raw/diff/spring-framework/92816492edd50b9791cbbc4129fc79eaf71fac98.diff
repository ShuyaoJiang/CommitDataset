[+++ b/spring-orm-hibernate4/src/main/java/org/springframework/orm/hibernate4/LocalSessionFactoryBuilder.java, +import java.util.TreeSet;, +		Set<String> classNames = new TreeSet<String>();, +		Set<String> packageNames = new TreeSet<String>();, +							classNames.add(className);, +							packageNames.add(className.substring(0, className.length() - PACKAGE_INFO_SUFFIX.length()));, +		try {, +			for (String className : classNames) {, +				addAnnotatedClass(this.resourcePatternResolver.getClassLoader().loadClass(className));, +			}, +			for (String packageName : packageNames) {, +				addPackage(packageName);, +			}, +		}, +		return this;, +++ b/spring-orm-hibernate4/src/main/java/org/springframework/orm/hibernate4/LocalSessionFactoryBuilder.java, +import java.util.TreeSet;, +		Set<String> classNames = new TreeSet<String>();, +		Set<String> packageNames = new TreeSet<String>();, +							classNames.add(className);, +							packageNames.add(className.substring(0, className.length() - PACKAGE_INFO_SUFFIX.length()));, +		try {, +			for (String className : classNames) {, +				addAnnotatedClass(this.resourcePatternResolver.getClassLoader().loadClass(className));, +			}, +			for (String packageName : packageNames) {, +				addPackage(packageName);, +			}, +		}, +		return this;, +++ b/spring-orm/src/main/java/org/springframework/orm/hibernate3/annotation/AnnotationSessionFactoryBean.java, +import java.util.Set;, +import java.util.TreeSet;, +, + * <p>Requires Hibernate 3.6 or later, as of Spring 4.0., + *, +			Set<String> classNames = new TreeSet<String>();, +			Set<String> packageNames = new TreeSet<String>();, +								classNames.add(className);, +								packageNames.add(className.substring(0, className.length() - PACKAGE_INFO_SUFFIX.length()));, +			try {, +				for (String className : classNames) {, +					config.addAnnotatedClass(this.resourcePatternResolver.getClassLoader().loadClass(className));, +				}, +				for (String packageName : packageNames) {, +					config.addPackage(packageName);, +				}, +			}]