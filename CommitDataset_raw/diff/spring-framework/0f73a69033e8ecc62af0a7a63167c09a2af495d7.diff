[+++ b/spring-context/src/main/java/org/springframework/context/support/AbstractApplicationContext.java, + * Copyright 2002-2019 the original author or authors., +	/** Local listeners registered before refresh. */, +	@Nullable, +	private Set<ApplicationListener<?>> earlyApplicationListeners;, +, +	/** ApplicationEvents published before the multicaster setup. */, +		// Switch to active., +		// Initialize any placeholder property sources in the context environment., +		// Validate that all properties marked as required are resolvable:, +		// Store pre-refresh ApplicationListeners..., +		if (this.earlyApplicationListeners == null) {, +			this.earlyApplicationListeners = new LinkedHashSet<>(this.applicationListeners);, +		}, +		else {, +			// Reset local application listeners to pre-refresh state., +			this.applicationListeners.clear();, +			this.applicationListeners.addAll(this.earlyApplicationListeners);, +		}, +, +		// Check whether an actual close attempt is necessary..., +			// Reset local application listeners to pre-refresh state., +			if (this.earlyApplicationListeners != null) {, +				this.applicationListeners.clear();, +				this.applicationListeners.addAll(this.earlyApplicationListeners);, +			}, +, +			// Switch to inactive.]