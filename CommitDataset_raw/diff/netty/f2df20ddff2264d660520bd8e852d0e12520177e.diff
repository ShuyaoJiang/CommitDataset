[+++ b/buffer/src/main/java/io/netty/buffer/ChannelBufferInputStream.java, +        while ( lineBuf.length() > 0 &&, +                lineBuf.charAt(lineBuf.length() - 1) == '\r') {, +++ b/buffer/src/main/java/io/netty/buffer/ChannelBufferInputStream.java, +        while ( lineBuf.length() > 0 &&, +                lineBuf.charAt(lineBuf.length() - 1) == '\r') {, +++ b/buffer/src/test/java/io/netty/buffer/ChannelBufferStreamTest.java, +, +    @Test, +    public void testEmptyReadLine() throws Exception {, +        ChannelBuffer buf = ChannelBuffers.buffer(0);, +        ChannelBufferInputStream in = new ChannelBufferInputStream(buf);, +, +        String s = in.readLine();, +        assertEquals(0, s.length());, +, +        in.close();, +    }]