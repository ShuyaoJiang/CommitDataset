[+++ b/transport-sctp/src/main/java/io/netty/channel/sctp/nio/NioSctpChannel.java, +            ByteBuffer data = buffer.internalNioBuffer(buffer.writerIndex(), buffer.writableBytes());, +            int pos = data.position();, +, +            buf.add(new SctpMessage(messageInfo, buffer.writerIndex(buffer.writerIndex() + (data.position() - pos))));, +++ b/transport-sctp/src/main/java/io/netty/channel/sctp/nio/NioSctpChannel.java, +            ByteBuffer data = buffer.internalNioBuffer(buffer.writerIndex(), buffer.writableBytes());, +            int pos = data.position();, +, +            buf.add(new SctpMessage(messageInfo, buffer.writerIndex(buffer.writerIndex() + (data.position() - pos))));, +++ b/transport/src/main/java/io/netty/channel/socket/nio/NioDatagramChannel.java, +            ByteBuffer nioData = data.internalNioBuffer(data.writerIndex(), data.writableBytes());, +            int pos = nioData.position();, +            int readBytes = nioData.position() - pos;]