[+++ b/buffer/src/main/java/io/netty/buffer/DefaultCompositeByteBuf.java, +        if (components.isEmpty()) {, +            return;, +        }, +, +++ b/buffer/src/main/java/io/netty/buffer/DefaultCompositeByteBuf.java, +        if (components.isEmpty()) {, +            return;, +        }, +, +++ b/buffer/src/test/java/io/netty/buffer/AbstractCompositeByteBufTest.java, +import static io.netty.buffer.Unpooled.wrappedBuffer;, +, +    @Test, +    public void testRemoveLastComponent() {, +        CompositeByteBuf buf = freeLater(compositeBuffer());, +        buf.addComponent(wrappedBuffer(new byte[]{1, 2}));, +        assertEquals(1, buf.numComponents());, +        buf.removeComponent(0);, +        assertEquals(0, buf.numComponents());, +    }]