[+++ b/codec/src/main/java/io/netty/handler/codec/compression/JZlibDecoder.java, +        final int inputLength = in.readableBytes();, +        if (inputLength == 0) {, +++ b/codec/src/main/java/io/netty/handler/codec/compression/JZlibDecoder.java, +        final int inputLength = in.readableBytes();, +        if (inputLength == 0) {, +++ b/codec/src/main/java/io/netty/handler/codec/compression/JdkZlibDecoder.java, +        int readableBytes = in.readableBytes();, +        if (readableBytes == 0) {, +            if (readableBytes < 2) {, +            boolean nowrap = !looksLikeZlib(in.getShort(in.readerIndex()));, +            // Some bytes may have been consumed, and so we must re-set the number of readable bytes., +            readableBytes = in.readableBytes();, +            inflater.setInput(in.array(), in.arrayOffset() + in.readerIndex(), readableBytes);, +            byte[] array = new byte[readableBytes];]