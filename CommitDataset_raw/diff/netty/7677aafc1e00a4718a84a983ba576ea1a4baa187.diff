[+++ b/src/main/java/org/jboss/netty/handler/codec/http/CookieDecoder.java, +        int version = 0;, +                String name = trimName(cookie[0]);, +                String value;, +, +                // $Version is the only attribute that can come before the, +                // actual cookie name-value pair., +                if (name.equalsIgnoreCase(CookieHeaderNames.VERSION)) {, +                    try {, +                        version = Integer.parseInt(trimValue(cookie[1]));, +                    } catch (NumberFormatException e) {, +                        // Ignore., +                    }, +                    continue;, +                }, +, +                // If it's not a version attribute, it's the name-value pair., +                value = QueryStringDecoder.decodeComponent(trimValue(cookie[1]), charset);, +                int maxAge = -1;, +                        name = trimName(val[0]);, +                        value = trimValue(val[1]);, +                            value = trimValue(value);, +                            value = trimValue(value);, +    private String trimName(String name) {, +        if (name.startsWith("$")) {, +            return name.substring(1);, +        } else {, +            return name;, +        }, +    }, +, +    private String trimValue(String value) {, +        value = value.trim();, +++ b/src/main/java/org/jboss/netty/handler/codec/http/CookieDecoder.java, +        int version = 0;, +                String name = trimName(cookie[0]);, +                String value;, +, +                // $Version is the only attribute that can come before the, +                // actual cookie name-value pair., +                if (name.equalsIgnoreCase(CookieHeaderNames.VERSION)) {, +                    try {, +                        version = Integer.parseInt(trimValue(cookie[1]));, +                    } catch (NumberFormatException e) {, +                        // Ignore., +                    }, +                    continue;, +                }, +, +                // If it's not a version attribute, it's the name-value pair., +                value = QueryStringDecoder.decodeComponent(trimValue(cookie[1]), charset);, +                int maxAge = -1;, +                        name = trimName(val[0]);, +                        value = trimValue(val[1]);, +                            value = trimValue(value);, +                            value = trimValue(value);, +    private String trimName(String name) {, +        if (name.startsWith("$")) {, +            return name.substring(1);, +        } else {, +            return name;, +        }, +    }, +, +    private String trimValue(String value) {, +        value = value.trim();, +++ b/src/main/java/org/jboss/netty/handler/codec/http/DefaultCookie.java, +, +        // FIXME: Refuse known attribute names.]