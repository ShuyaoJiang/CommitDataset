[+++ b/buffer/src/main/java/io/netty/buffer/PoolArena.java, +    void free(PoolChunk<T> chunk, long handle, int normCapacity, boolean sameThreads) {, +            if (sameThreads) {, +            }, +, +            free(oldChunk, oldHandle, oldMaxLength, buf.initThread == Thread.currentThread());, +++ b/buffer/src/main/java/io/netty/buffer/PoolArena.java, +    void free(PoolChunk<T> chunk, long handle, int normCapacity, boolean sameThreads) {, +            if (sameThreads) {, +            }, +, +            free(oldChunk, oldHandle, oldMaxLength, buf.initThread == Thread.currentThread());, +++ b/buffer/src/main/java/io/netty/buffer/PooledByteBuf.java, +    Thread initThread;, +        initThread = Thread.currentThread();, +        initThread = Thread.currentThread();, +            boolean sameThread = initThread == Thread.currentThread();, +            initThread = null;, +            chunk.arena.free(chunk, handle, maxLength, sameThread);]