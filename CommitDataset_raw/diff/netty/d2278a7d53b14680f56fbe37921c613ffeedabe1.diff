[+++ b/src/main/java/org/jboss/netty/channel/ChannelFutureAggregator.java, +    private Set<ChannelFuture> pendingFutures;, +        synchronized(this) {, +            if (pendingFutures == null) {, +                pendingFutures = new HashSet<ChannelFuture>();, +            }, +        }, +    public void operationComplete(ChannelFuture future), +        synchronized (this) {, +            if (pendingFutures == null) {, +                aggregateFuture.setSuccess();, +            } else {, +                } else {, +, +        }, +        , +    }, +}]