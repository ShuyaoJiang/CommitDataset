[+++ b/buffer/src/main/java/io/netty/buffer/CompositeByteBuf.java, +        int offset = first.offset;, +        setIndex(readerIndex - offset, writerIndex - offset);, +        adjustMarkers(offset);, +++ b/buffer/src/main/java/io/netty/buffer/CompositeByteBuf.java, +        int offset = first.offset;, +        setIndex(readerIndex - offset, writerIndex - offset);, +        adjustMarkers(offset);, +++ b/buffer/src/test/java/io/netty/buffer/AbstractCompositeByteBufTest.java, +, +    // See https://github.com/netty/netty/issues/1976, +    @Test, +    public void testDiscardSomeReadBytes() {, +        CompositeByteBuf cbuf = freeLater(compositeBuffer());, +        int len = 8 * 4;, +        for (int i = 0; i < len; i += 4) {, +            ByteBuf buf = Unpooled.buffer().writeInt(i);, +            cbuf.capacity(cbuf.writerIndex()).addComponent(buf).writerIndex(i + 4);, +        }, +        cbuf.writeByte(1);, +, +        byte[] me = new byte[len];, +        cbuf.readBytes(me);, +        cbuf.readByte();, +, +        cbuf.discardSomeReadBytes();, +    }]