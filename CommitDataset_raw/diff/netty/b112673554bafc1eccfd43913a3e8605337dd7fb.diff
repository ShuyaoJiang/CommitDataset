[+++ b/codec-http/src/main/java/io/netty/handler/codec/http/HttpObjectDecoder.java, +        if (evt instanceof HttpExpectationFailedEvent) {, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/HttpObjectDecoder.java, +        if (evt instanceof HttpExpectationFailedEvent) {, +++ b/codec/src/main/java/io/netty/handler/codec/ByteToMessageDecoder.java, +import io.netty.channel.socket.ChannelInputShutdownEvent;, +        channelInputClosed(ctx, true);, +    }, +, +    @Override, +    public void userEventTriggered(ChannelHandlerContext ctx, Object evt) throws Exception {, +        if (evt instanceof ChannelInputShutdownEvent) {, +            // The decodeLast method is invoked when a channelInactive event is encountered., +            // This method is responsible for ending requests in some situations and must be called, +            // when the input has been shutdown., +            channelInputClosed(ctx, false);, +        }, +        super.userEventTriggered(ctx, evt);, +    }, +, +    private void channelInputClosed(ChannelHandlerContext ctx, boolean callChannelInactive) throws Exception {, +                if (callChannelInactive) {, +                }]