[+++ b/codec-http/src/main/java/io/netty/handler/codec/http/multipart/HttpPostRequestEncoder.java, +import io.netty.buffer.ByteBuf;, +import io.netty.buffer.MessageBuf;, +import io.netty.handler.codec.http.DefaultHttpChunk;, +import io.netty.handler.codec.http.HttpChunk;, +import io.netty.handler.codec.http.HttpConstants;, +import io.netty.handler.codec.http.HttpHeaders;, +import io.netty.handler.codec.http.HttpMethod;, +import io.netty.handler.codec.http.HttpRequest;, +import io.netty.handler.codec.http.HttpTransferEncoding;, +import io.netty.handler.stream.ChunkedMessageInput;, +, +                    buffer = ((HttpData) currentData).getChunk(sizeleft);, +            buffer = ((HttpData) currentData).getChunk(size);, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/multipart/HttpPostRequestEncoder.java, +import io.netty.buffer.ByteBuf;, +import io.netty.buffer.MessageBuf;, +import io.netty.handler.codec.http.DefaultHttpChunk;, +import io.netty.handler.codec.http.HttpChunk;, +import io.netty.handler.codec.http.HttpConstants;, +import io.netty.handler.codec.http.HttpHeaders;, +import io.netty.handler.codec.http.HttpMethod;, +import io.netty.handler.codec.http.HttpRequest;, +import io.netty.handler.codec.http.HttpTransferEncoding;, +import io.netty.handler.stream.ChunkedMessageInput;, +, +                    buffer = ((HttpData) currentData).getChunk(sizeleft);, +            buffer = ((HttpData) currentData).getChunk(size);, +++ b/example/src/main/java/io/netty/example/http/upload/HttpUploadServerHandler.java, +import static io.netty.buffer.Unpooled.*;, +import static io.netty.handler.codec.http.HttpHeaders.Names.*;, +, +                            responseContent.append(fileUpload.getString(fileUpload.getCharset()));]