[+++ b/src/main/java/org/jboss/netty/channel/socket/nio/NioSocketChannel.java, +    volatile boolean inWriteNowLoop;, +++ b/src/main/java/org/jboss/netty/channel/socket/nio/NioSocketChannel.java, +    volatile boolean inWriteNowLoop;, +++ b/src/main/java/org/jboss/netty/channel/socket/nio/NioWorker.java, +        if (channel.inWriteNowLoop) {, +            channel.inWriteNowLoop = true;, +            channel.inWriteNowLoop = false;]