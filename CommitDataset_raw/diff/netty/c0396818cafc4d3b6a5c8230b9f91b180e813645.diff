[+++ b/testsuite/src/main/java/io/netty/testsuite/transport/socket/DatagramUnicastTest.java, +        Channel sc = null;, +        Channel cc = null;, +, +        try {, +            sc = setupServerChannel(sb, bytes, latch);, +        } finally {, +            // release as we used buf.retain() before, +            buf.release();, +            closeChannel(cc);, +            closeChannel(sc);, +        }, +        try {, +        } finally {, +    }, +        Channel sc = null;, +            final CountDownLatch latch = new CountDownLatch(count);, +            sc = setupServerChannel(sb, bytes, latch);, +            assertTrue("NotYetConnectedException expected, got: " + future.cause(),, +                    future.cause() instanceof NotYetConnectedException);, +            closeChannel(cc);, +            closeChannel(sc);, +, +    private static void closeChannel(Channel channel) throws Exception {, +        if (channel != null) {, +            channel.close().sync();, +        }, +    }]