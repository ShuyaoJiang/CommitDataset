[+++ b/src/main/java/org/jboss/netty/channel/socket/http/HttpTunnelingClientSocketChannel.java, +                                    realChannel.write(req);, +                                    requestHeaderWritten = true;, +++ b/src/main/java/org/jboss/netty/channel/socket/http/HttpTunnelingClientSocketChannel.java, +                                    realChannel.write(req);, +                                    requestHeaderWritten = true;, +++ b/src/main/java/org/jboss/netty/channel/socket/http/HttpTunnelingServlet.java, +import java.io.EOFException;, +                ChannelBuffer buffer;, +                try {, +                    buffer = read(in);, +                } catch (EOFException e) {, +                    break;, +                }, +++ b/src/main/java/org/jboss/netty/channel/socket/http/HttpTunnelingClientSocketChannel.java, +                                    realChannel.write(req);, +                                    requestHeaderWritten = true;, +++ b/src/main/java/org/jboss/netty/channel/socket/http/HttpTunnelingServlet.java, +import java.io.EOFException;, +                ChannelBuffer buffer;, +                try {, +                    buffer = read(in);, +                } catch (EOFException e) {, +                    break;, +                }, +++ b/src/main/java/org/jboss/netty/example/http/tunnel/HttpTunnelingClientExample.java, +import org.jboss.netty.example.securechat.SecureChatSslContextFactory;, +import org.jboss.netty.handler.logging.LoggingHandler;, +import org.jboss.netty.logging.InternalLogLevel;, +        bootstrap.getPipeline().addLast("handler", new LoggingHandler(InternalLogLevel.INFO));, +        // Configure SSL if necessary, +        if (scheme.equals("https")) {, +            bootstrap.setOption("sslContext", SecureChatSslContextFactory.getClientContext());, +        } else if (!scheme.equals("http")) {, +            // Only HTTP and HTTPS are supported., +            System.err.println("Only HTTP(S) is supported.");, +            return;, +        }, +, +]