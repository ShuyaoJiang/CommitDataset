[+++ b/codec-http/src/main/java/io/netty/handler/codec/http/HttpUtil.java, +            m.headers().set(HttpHeaderNames.TRANSFER_ENCODING, HttpHeaderValues.CHUNKED);, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/HttpUtil.java, +            m.headers().set(HttpHeaderNames.TRANSFER_ENCODING, HttpHeaderValues.CHUNKED);, +++ b/codec-http/src/test/java/io/netty/handler/codec/http/HttpUtilTest.java, +import java.util.Collections;, +, +    @Test, +    public void testDoubleChunkedHeader() {, +        HttpMessage message = new DefaultHttpResponse(HttpVersion.HTTP_1_1, HttpResponseStatus.OK);, +        message.headers().add(HttpHeaderNames.TRANSFER_ENCODING, "chunked");, +        HttpUtil.setTransferEncodingChunked(message, true);, +        List<String> expected = Collections.singletonList("chunked");, +        assertEquals(expected, message.headers().getAll(HttpHeaderNames.TRANSFER_ENCODING));, +    }]