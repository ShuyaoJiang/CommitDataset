[+++ b/codec-http/src/main/java/io/netty/handler/codec/http/websocketx/WebSocketClientHandshaker.java, +        ChannelHandlerContext ctx = p.context(HttpResponseDecoder.class);, +        } else {, +            if (p.get(HttpRequestEncoder.class) != null) {, +                p.remove(HttpRequestEncoder.class);, +            }, +            p.replaceAndForward(ctx.name(),, +                    "ws-decoder", newWebsocketDecoder());, +        }]