[+++ b/codec-http/src/main/java/io/netty/handler/codec/http/HttpChunkedInput.java, +import io.netty.buffer.ByteBufAllocator;, +    @Deprecated, +        return readChunk(ctx.alloc());, +    }, +, +    @Override, +    public HttpContent readChunk(ByteBufAllocator allocator) throws Exception {, +            ByteBuf buf = input.readChunk(allocator);, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/HttpChunkedInput.java, +import io.netty.buffer.ByteBufAllocator;, +    @Deprecated, +        return readChunk(ctx.alloc());, +    }, +, +    @Override, +    public HttpContent readChunk(ByteBufAllocator allocator) throws Exception {, +            ByteBuf buf = input.readChunk(allocator);, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/multipart/HttpPostRequestEncoder.java, +import io.netty.buffer.ByteBufAllocator;, +    @Deprecated, +    @Override, +    public HttpContent readChunk(ChannelHandlerContext ctx) throws Exception {, +        return readChunk(ctx.alloc());, +    }, +, +    public HttpContent readChunk(ByteBufAllocator allocator) throws Exception {, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/HttpChunkedInput.java, +import io.netty.buffer.ByteBufAllocator;, +    @Deprecated, +        return readChunk(ctx.alloc());, +    }, +, +    @Override, +    public HttpContent readChunk(ByteBufAllocator allocator) throws Exception {, +            ByteBuf buf = input.readChunk(allocator);, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/multipart/HttpPostRequestEncoder.java, +import io.netty.buffer.ByteBufAllocator;, +    @Deprecated, +    @Override, +    public HttpContent readChunk(ChannelHandlerContext ctx) throws Exception {, +        return readChunk(ctx.alloc());, +    }, +, +    public HttpContent readChunk(ByteBufAllocator allocator) throws Exception {, +++ b/codec-http/src/test/java/io/netty/handler/codec/http/multipart/HttpPostRequestEncoderTest.java, +import io.netty.buffer.ByteBufAllocator;, +import static io.netty.handler.codec.http.HttpHeaderNames.CONTENT_DISPOSITION;, +import static io.netty.handler.codec.http.HttpHeaderNames.CONTENT_LENGTH;, +import static io.netty.handler.codec.http.HttpHeaderNames.CONTENT_TRANSFER_ENCODING;, +import static io.netty.handler.codec.http.HttpHeaderNames.CONTENT_TYPE;, +import static org.junit.Assert.assertEquals;, +            HttpContent httpContent = encoder.readChunk((ByteBufAllocator) null);, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/HttpChunkedInput.java, +import io.netty.buffer.ByteBufAllocator;, +    @Deprecated, +        return readChunk(ctx.alloc());, +    }, +, +    @Override, +    public HttpContent readChunk(ByteBufAllocator allocator) throws Exception {, +            ByteBuf buf = input.readChunk(allocator);, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/multipart/HttpPostRequestEncoder.java, +import io.netty.buffer.ByteBufAllocator;, +    @Deprecated, +    @Override, +    public HttpContent readChunk(ChannelHandlerContext ctx) throws Exception {, +        return readChunk(ctx.alloc());, +    }, +, +    public HttpContent readChunk(ByteBufAllocator allocator) throws Exception {, +++ b/codec-http/src/test/java/io/netty/handler/codec/http/multipart/HttpPostRequestEncoderTest.java, +import io.netty.buffer.ByteBufAllocator;, +import static io.netty.handler.codec.http.HttpHeaderNames.CONTENT_DISPOSITION;, +import static io.netty.handler.codec.http.HttpHeaderNames.CONTENT_LENGTH;, +import static io.netty.handler.codec.http.HttpHeaderNames.CONTENT_TRANSFER_ENCODING;, +import static io.netty.handler.codec.http.HttpHeaderNames.CONTENT_TYPE;, +import static org.junit.Assert.assertEquals;, +            HttpContent httpContent = encoder.readChunk((ByteBufAllocator) null);, +++ b/handler/src/main/java/io/netty/handler/stream/ChunkedFile.java, +import io.netty.buffer.ByteBufAllocator;, +    @Deprecated, +        return readChunk(ctx.alloc());, +    }, +, +    @Override, +    public ByteBuf readChunk(ByteBufAllocator allocator) throws Exception {, +        ByteBuf buf = allocator.heapBuffer(chunkSize);, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/HttpChunkedInput.java, +import io.netty.buffer.ByteBufAllocator;, +    @Deprecated, +        return readChunk(ctx.alloc());, +    }, +, +    @Override, +    public HttpContent readChunk(ByteBufAllocator allocator) throws Exception {, +            ByteBuf buf = input.readChunk(allocator);, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/multipart/HttpPostRequestEncoder.java, +import io.netty.buffer.ByteBufAllocator;, +    @Deprecated]