[+++ b/handler/src/main/java/io/netty/handler/ssl/SslHandler.java, +    /**, +     * Loop over all the pending writes and fail them., +     *, +     * See <a href="https://github.com/netty/netty/issues/305">#305</a> for more details., +     */, +    @Override, +    public void channelClosed(ChannelHandlerContext ctx, ChannelStateEvent e) throws Exception {, +        Throwable cause = null;, +        synchronized (pendingUnencryptedWrites) {, +            for (;;) {, +                PendingWrite pw = pendingUnencryptedWrites.poll();, +                if (pw == null) {, +                    break;, +                }, +                if (cause == null) {, +                    cause = new ClosedChannelException();, +                }, +                pw.future.setFailure(cause);, +                , +            }, +            , +            , +            for (;;) {, +                MessageEvent ev = pendingEncryptedWrites.poll();, +                if (ev == null) {, +                    break;, +                }, +                if (cause == null) {, +                    cause = new ClosedChannelException();, +                }, +                ev.getFuture().setFailure(cause);, +                , +            }, +        }, +       , +        if (cause != null) {, +            fireExceptionCaught(ctx, cause);, +        }, +        , +        super.channelClosed(ctx, e);, +    }, +    ]