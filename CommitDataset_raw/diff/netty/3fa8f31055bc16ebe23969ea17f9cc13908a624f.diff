[+++ b/buffer/src/main/java/io/netty/buffer/AbstractReferenceCountedByteBuf.java, +            if (refCnt == 0 || refCnt == Integer.MAX_VALUE) {, +                throw new IllegalReferenceCountException(refCnt, 1);, +            final int nextCnt;, +            if (refCnt == 0 || (nextCnt = refCnt + increment) < 0) {, +            if (refCntUpdater.compareAndSet(this, refCnt, nextCnt)) {]