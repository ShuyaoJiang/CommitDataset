[+++ b/codec/src/main/java/io/netty/handler/codec/ByteToMessageCodec.java, +import io.netty.buffer.ChannelBuf;, +    @Override, +    public void freeInboundBuffer(ChannelHandlerContext ctx, ChannelBuf buf) throws Exception {, +        decoder.freeInboundBuffer(ctx, buf);, +    }, +, +    @Override, +    public void freeOutboundBuffer(ChannelHandlerContext ctx, ChannelBuf buf) throws Exception {, +        encoder.freeOutboundBuffer(ctx, buf);, +    }, +, +++ b/codec/src/main/java/io/netty/handler/codec/ByteToMessageCodec.java, +import io.netty.buffer.ChannelBuf;, +    @Override, +    public void freeInboundBuffer(ChannelHandlerContext ctx, ChannelBuf buf) throws Exception {, +        decoder.freeInboundBuffer(ctx, buf);, +    }, +, +    @Override, +    public void freeOutboundBuffer(ChannelHandlerContext ctx, ChannelBuf buf) throws Exception {, +        encoder.freeOutboundBuffer(ctx, buf);, +    }, +, +++ b/codec/src/main/java/io/netty/handler/codec/MessageToMessageCodec.java, +        buf.unsafe().free();, +        buf.unsafe().free();]