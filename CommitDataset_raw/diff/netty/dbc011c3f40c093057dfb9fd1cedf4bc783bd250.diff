[+++ b/buffer/src/main/java/io/netty/buffer/PoolChunk.java, +            short dd = (short) (d << BYTE_LENGTH | d);, +            id <<= 1;, +                id ^= 1;, +        assert value == d && (id & initial) == 1 << d : String.format("val = %d, id & initial = %d, d = %d",, +        memoryMap[id] = (short) (memoryMap[id] & UPPER_BYTE_MASK | val);, +    private static int log2(int val) {, +        return 1 << log2ChunkSize - depth(id);, +        int shift = id ^ 1 << depth(id);]