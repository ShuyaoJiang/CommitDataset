[+++ b/buffer/src/main/java/io/netty/buffer/CompositeByteBuf.java, +    private static final ByteBuffer FULL_BYTEBUFFER = (ByteBuffer) ByteBuffer.allocate(1).position(1);, +        if (length == 0) {, +            return this;, +        }, +, +        if (length == 0) {, +            return this;, +        }, +        if (length == 0) {, +            return this;, +        }, +, +        if (length == 0) {, +            return this;, +        }, +        if (length == 0) {, +            return in.read(EmptyArrays.EMPTY_BYTES);, +        }, +        if (length == 0) {, +            return in.read(FULL_BYTEBUFFER);, +        }, +        if (length != 0) {, +        }, +++ b/buffer/src/main/java/io/netty/buffer/CompositeByteBuf.java, +    private static final ByteBuffer FULL_BYTEBUFFER = (ByteBuffer) ByteBuffer.allocate(1).position(1);, +        if (length == 0) {, +            return this;, +        }, +, +        if (length == 0) {, +            return this;, +        }, +        if (length == 0) {, +            return this;, +        }, +, +        if (length == 0) {, +            return this;, +        }, +        if (length == 0) {, +            return in.read(EmptyArrays.EMPTY_BYTES);, +        }, +        if (length == 0) {, +            return in.read(FULL_BYTEBUFFER);, +        }, +        if (length != 0) {, +        }, +++ b/buffer/src/test/java/io/netty/buffer/AbstractCompositeByteBufTest.java, +, +    @Test, +    public void testCopyEmpty() {, +        CompositeByteBuf buf = freeLater(compositeBuffer());, +        assertEquals(0, buf.numComponents());, +        assertEquals(0, freeLater(buf.copy()).readableBytes());, +    }, +, +    @Test, +    public void testDuplicateEmpty() {, +        CompositeByteBuf buf = freeLater(compositeBuffer());, +        assertEquals(0, buf.numComponents());, +        assertEquals(0, freeLater(buf.duplicate()).readableBytes());, +    }]