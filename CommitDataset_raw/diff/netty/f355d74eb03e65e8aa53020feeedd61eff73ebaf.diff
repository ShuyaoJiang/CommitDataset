[+++ b/src/main/java/org/jboss/netty/handler/codec/compression/ZlibDecoder.java, +     *, +     * @throws ZStreamException if failed to initialize zlib, +    public ZlibDecoder() throws ZStreamException {, +        int resultCode = z.inflateInit();, +        if (resultCode != JZlib.Z_OK) {, +            ZlibEncoder.fail(z, "initialization failure", resultCode);, +        }, +    }, +, +    /**, +     * Creates a new instance with the specified preset dictionary., +     *, +     * @throws ZStreamException if failed to initialize zlib, +     */, +    public ZlibDecoder(byte[] dictionary) throws ZStreamException {, +        if (dictionary == null) {, +            throw new NullPointerException("dictionary");, +        }, +, +        int resultCode;, +        resultCode = z.inflateInit();, +        if (resultCode != JZlib.Z_OK) {, +            ZlibEncoder.fail(z, "initialization failure", resultCode);, +        } else {, +            resultCode = z.inflateSetDictionary(dictionary, dictionary.length);, +            if (resultCode != JZlib.Z_OK) {, +                ZlibEncoder.fail(z, "failed to set the dictionary", resultCode);, +            }, +        }, +++ b/src/main/java/org/jboss/netty/handler/codec/compression/ZlibDecoder.java, +     *, +     * @throws ZStreamException if failed to initialize zlib, +    public ZlibDecoder() throws ZStreamException {, +        int resultCode = z.inflateInit();, +        if (resultCode != JZlib.Z_OK) {, +            ZlibEncoder.fail(z, "initialization failure", resultCode);, +        }, +    }, +, +    /**, +     * Creates a new instance with the specified preset dictionary., +     *, +     * @throws ZStreamException if failed to initialize zlib, +     */, +    public ZlibDecoder(byte[] dictionary) throws ZStreamException {, +        if (dictionary == null) {, +            throw new NullPointerException("dictionary");, +        }, +, +        int resultCode;, +        resultCode = z.inflateInit();, +        if (resultCode != JZlib.Z_OK) {, +            ZlibEncoder.fail(z, "initialization failure", resultCode);, +        } else {, +            resultCode = z.inflateSetDictionary(dictionary, dictionary.length);, +            if (resultCode != JZlib.Z_OK) {, +                ZlibEncoder.fail(z, "failed to set the dictionary", resultCode);, +            }, +        }, +++ b/src/main/java/org/jboss/netty/handler/codec/compression/ZlibEncoder.java, +            fail(z, "initialization failure", resultCode);, +        if (dictionary == null) {, +            throw new NullPointerException("dictionary");, +        }, +        int resultCode;, +            fail(z, "initialization failure", resultCode);, +                fail(z, "failed to set the dictionary", resultCode);, +                fail(z, "compression failure", resultCode);, +                        exception(z, "compression failure", resultCode));, +    static void fail(ZStream z, String message, int resultCode) throws ZStreamException {, +        throw exception(z, message, resultCode);, +    static ZStreamException exception(ZStream z, String message, int resultCode) {]