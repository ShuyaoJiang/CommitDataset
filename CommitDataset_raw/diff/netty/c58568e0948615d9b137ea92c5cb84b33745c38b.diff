[+++ b/src/main/java/org/jboss/netty/channel/socket/http/HttpTunnelingClientSocketChannel.java, +    void connectAndSendHeaders(boolean reconnect, HttpTunnelAddress remoteAddress) {, +                append("Host: ").append(url.getHost()).append(":").append(url.getPort()).append(HttpTunnelingClientSocketPipelineSink.LINE_TERMINATOR)., +        channel.write(ChannelBuffers.copiedBuffer(msg, "ASCII"));, +++ b/src/main/java/org/jboss/netty/channel/socket/http/HttpTunnelingClientSocketChannel.java, +    void connectAndSendHeaders(boolean reconnect, HttpTunnelAddress remoteAddress) {, +                append("Host: ").append(url.getHost()).append(":").append(url.getPort()).append(HttpTunnelingClientSocketPipelineSink.LINE_TERMINATOR)., +        channel.write(ChannelBuffers.copiedBuffer(msg, "ASCII"));, +++ b/src/main/java/org/jboss/netty/channel/socket/http/HttpTunnelingServlet.java, +        try {, +            response.setHeader("JSESSIONID", session.getId());, +            for (;;) {, +            }, +        } finally {, +            // Mark the channel as closed if the client didn't reconnect in time., +    }, +        for (;;) {, +        }, +, +        response.setHeader("JSESSIONID", session.getId());]