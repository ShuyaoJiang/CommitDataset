[+++ b/codec-http/pom.xml, +    <dependency>, +      <groupId>${project.groupId}</groupId>, +      <artifactId>netty-handler</artifactId>, +      <version>${project.version}</version>, +    </dependency>, +++ b/codec-http/pom.xml, +    <dependency>, +      <groupId>${project.groupId}</groupId>, +      <artifactId>netty-handler</artifactId>, +      <version>${project.version}</version>, +    </dependency>, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/websocketx/WebSocketServerHandshakeHandler.java, +import io.netty.channel.ChannelPipeline;, +import io.netty.handler.ssl.SslHandler;, +                getWebSocketLocation(ctx.pipeline(), req, websocketPath), subprotocols, allowExtensions);, +    private static String getWebSocketLocation(ChannelPipeline cp, HttpRequest req, String path) {, +        String protocol = "ws";, +        if (cp.get(SslHandler.class) != null) {, +            // SSL in use so use Secure WebSockets, +            protocol = "wss";, +        }, +        return protocol + "://" + req.getHeader(HttpHeaders.Names.HOST) + path;]