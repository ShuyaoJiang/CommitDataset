[+++ b/testsuite-shading/pom.xml, +        <nativeTransportLib>netty_transport_native_kqueue_${os.detected.arch}.jnilib</nativeTransportLib>, +        <nativeTcnativeLib>netty_tcnative.jnilib</nativeTcnativeLib>, +        <!-- Needed to test shading of netty-tcnative -->, +        <dependency>, +          <groupId>${project.groupId}</groupId>, +          <artifactId>netty-handler</artifactId>, +          <version>${project.version}</version>, +          <scope>compile</scope>, +        </dependency>, +        <dependency>, +          <groupId>${project.groupId}</groupId>, +          <artifactId>${tcnative.artifactId}</artifactId>, +          <version>${tcnative.version}</version>, +          <classifier>${tcnative.classifier}</classifier>, +          <scope>compile</scope>, +        </dependency>, +                    <move file="${classesShadedNativeDir}/lib${nativeTransportLib}" tofile="${classesShadedNativeDir}/lib${shadingPrefix}_${nativeTransportLib}" />, +                    <move file="${classesShadedNativeDir}/lib${nativeTcnativeLib}" tofile="${classesShadedNativeDir}/lib${shadingPrefix}_${nativeTcnativeLib}" />, +        <nativeTransportLib>netty_transport_native_epoll_${os.detected.arch}.so</nativeTransportLib>, +        <nativeTcnativeLib>netty_tcnative.so</nativeTcnativeLib>, +        <!-- Needed to test shading of netty-tcnative -->, +        <dependency>, +          <groupId>${project.groupId}</groupId>, +          <artifactId>netty-handler</artifactId>, +          <version>${project.version}</version>, +          <scope>compile</scope>, +        </dependency>, +        <dependency>, +          <groupId>${project.groupId}</groupId>, +          <artifactId>${tcnative.artifactId}</artifactId>, +          <version>${tcnative.version}</version>, +          <classifier>${tcnative.classifier}</classifier>, +          <scope>compile</scope>, +        </dependency>, +                    <move file="${classesShadedNativeDir}/lib${nativeTransportLib}" tofile="${classesShadedNativeDir}/lib${shadingPrefix}_${nativeTransportLib}" />, +                    <move file="${classesShadedNativeDir}/lib${nativeTcnativeLib}" tofile="${classesShadedNativeDir}/lib${shadingPrefix}_${nativeTcnativeLib}" />, +++ b/testsuite-shading/pom.xml, +        <nativeTransportLib>netty_transport_native_kqueue_${os.detected.arch}.jnilib</nativeTransportLib>, +        <nativeTcnativeLib>netty_tcnative.jnilib</nativeTcnativeLib>, +        <!-- Needed to test shading of netty-tcnative -->, +        <dependency>, +          <groupId>${project.groupId}</groupId>, +          <artifactId>netty-handler</artifactId>, +          <version>${project.version}</version>, +          <scope>compile</scope>, +        </dependency>, +        <dependency>, +          <groupId>${project.groupId}</groupId>, +          <artifactId>${tcnative.artifactId}</artifactId>, +          <version>${tcnative.version}</version>, +          <classifier>${tcnative.classifier}</classifier>, +          <scope>compile</scope>, +        </dependency>, +                    <move file="${classesShadedNativeDir}/lib${nativeTransportLib}" tofile="${classesShadedNativeDir}/lib${shadingPrefix}_${nativeTransportLib}" />, +                    <move file="${classesShadedNativeDir}/lib${nativeTcnativeLib}" tofile="${classesShadedNativeDir}/lib${shadingPrefix}_${nativeTcnativeLib}" />, +        <nativeTransportLib>netty_transport_native_epoll_${os.detected.arch}.so</nativeTransportLib>, +        <nativeTcnativeLib>netty_tcnative.so</nativeTcnativeLib>, +        <!-- Needed to test shading of netty-tcnative -->, +        <dependency>, +          <groupId>${project.groupId}</groupId>, +          <artifactId>netty-handler</artifactId>, +          <version>${project.version}</version>, +          <scope>compile</scope>, +        </dependency>, +        <dependency>, +          <groupId>${project.groupId}</groupId>, +          <artifactId>${tcnative.artifactId}</artifactId>, +          <version>${tcnative.version}</version>, +          <classifier>${tcnative.classifier}</classifier>, +          <scope>compile</scope>, +        </dependency>, +                    <move file="${classesShadedNativeDir}/lib${nativeTransportLib}" tofile="${classesShadedNativeDir}/lib${shadingPrefix}_${nativeTransportLib}" />, +                    <move file="${classesShadedNativeDir}/lib${nativeTcnativeLib}" tofile="${classesShadedNativeDir}/lib${shadingPrefix}_${nativeTcnativeLib}" />, +++ b/testsuite-shading/src/test/java/io/netty/testsuite/shading/ShadingIT.java, +    public void testShadingNativeTransport() throws Exception {, +        testShading0(PlatformDependent.isOsx() ? "io.netty.channel.kqueue.KQueue" : "io.netty.channel.epoll.Epoll");, +    @Test, +    public void testShadingTcnative() throws Exception {, +        testShading0("io.netty.handler.ssl.OpenSsl");, +    }, +, +    private static void testShading0(String classname) throws Exception {, +        String shadingPrefix = System.getProperty("shadingPrefix");, +        final Class<?> clazz = Class.forName(shadingPrefix + '.' + classname);, +        Method method = clazz.getMethod("ensureAvailability");, +        method.invoke(null);]