[+++ b/codec-http/src/main/java/io/netty/handler/codec/http/HttpObjectAggregator.java, +import io.netty.buffer.DefaultByteBufHolder;, +import io.netty.handler.codec.DecoderResult;, +        AggregatedFullHttpMessage ret;, +            ret = new AggregatedFullHttpRequest((HttpRequest) start, content, null);, +            ret = new AggregatedFullHttpResponse((HttpResponse) start, content, null);, +            ((AggregatedFullHttpMessage) aggregated).setTrailingHeaders(((LastHttpContent) content).trailingHeaders());, +, +    private abstract static class AggregatedFullHttpMessage extends DefaultByteBufHolder implements FullHttpMessage {, +        protected final HttpMessage message;, +        private HttpHeaders trailingHeaders;, +, +        private AggregatedFullHttpMessage(HttpMessage message, ByteBuf content, HttpHeaders trailingHeaders) {, +            super(content);, +            this.message = message;, +            this.trailingHeaders = trailingHeaders;, +        }, +        @Override, +        public HttpHeaders trailingHeaders() {, +            return trailingHeaders;, +        }, +, +        public void setTrailingHeaders(HttpHeaders trailingHeaders) {, +            this.trailingHeaders = trailingHeaders;, +        }, +, +        @Override, +        public HttpVersion getProtocolVersion() {, +            return message.protocolVersion();, +        }, +, +        @Override, +        public HttpVersion protocolVersion() {, +            return message.protocolVersion();, +        }, +, +        @Override, +        public FullHttpMessage setProtocolVersion(HttpVersion version) {, +            message.setProtocolVersion(version);, +            return this;, +        }, +, +        @Override, +        public HttpHeaders headers() {, +            return message.headers();, +        }, +, +        @Override, +        public DecoderResult decoderResult() {, +            return message.decoderResult();, +        }, +, +        @Override, +        public DecoderResult getDecoderResult() {, +            return message.decoderResult();, +        }, +, +        @Override, +        public void setDecoderResult(DecoderResult result) {, +            message.setDecoderResult(result);, +        }, +, +        @Override, +        public FullHttpMessage retain(int increment) {, +            super.retain(increment);, +            return this;, +        }, +, +        @Override, +        public FullHttpMessage retain() {, +            super.retain();, +            return this;, +        }, +, +        @Override, +        public FullHttpMessage touch(Object hint) {, +            super.touch(hint);, +            return this;, +        }, +, +        @Override, +        public FullHttpMessage touch() {, +            super.touch();, +            return this;, +        }, +, +        @Override, +        public abstract FullHttpMessage copy();, +, +        @Override, +        public abstract FullHttpMessage duplicate();, +    }, +, +    private static final class AggregatedFullHttpRequest extends AggregatedFullHttpMessage implements FullHttpRequest {, +, +        private AggregatedFullHttpRequest(HttpRequest request, ByteBuf content, HttpHeaders trailingHeaders) {, +            super(request, content, trailingHeaders);, +        }, +, +        @Override]