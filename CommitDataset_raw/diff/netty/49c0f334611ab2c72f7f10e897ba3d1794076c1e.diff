[+++ b/src/main/java/org/jboss/netty/channel/xnio/AbstractXnioChannelHandler.java, +import org.jboss.netty.buffer.ChannelBufferFactory;, +import org.jboss.netty.channel.ReceiveBufferSizePredictor;, +        ReceiveBufferSizePredictor predictor = c.getConfig().getReceiveBufferSizePredictor();, +        ChannelBufferFactory bufferFactory = c.getConfig().getBufferFactory();, +        ChannelBuffer buf = bufferFactory.getBuffer(predictor.nextReceiveBufferSize());, +, +            // Update the predictor., +            predictor.previousReceiveBufferSize(buf.readableBytes());, +, +            // Fire the event., +]