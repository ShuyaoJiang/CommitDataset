[+++ b/transport/src/main/java/io/netty/channel/nio/AbstractNioChannel.java, +                    fulfillConnectPromise(promise, wasActive);, +        private void fulfillConnectPromise(ChannelPromise promise, boolean wasActive) {, +            // trySuccess() will return false if a user cancelled the connection attempt., +            boolean promiseSet = promise.trySuccess();, +, +            // Regardless if the connection attempt was cancelled, channelActive() event should be triggered,, +            // because what happened is what happened., +            if (!wasActive && isActive()) {, +                pipeline().fireChannelActive();, +            }, +, +            // If a user cancelled the connection attempt, close the channel, which is followed by channelInactive()., +            if (!promiseSet) {, +                close(voidPromise());, +            }, +        }, +, +                fulfillConnectPromise(connectPromise, wasActive);]