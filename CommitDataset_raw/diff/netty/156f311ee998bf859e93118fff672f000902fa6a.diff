[+++ b/example/src/main/java/io/netty/example/http/websocketx/client/WebSocketClient.java, + * Copyright 2014 The Netty Project, +/**, + * This is an example of a WebSocket client., + * <p>, + * In order to run this example you need a compatible WebSocket server., + * Therefore you can either start the WebSocket server from the examples, + * by running {@link io.netty.example.http.websocketx.server.WebSocketServer}, + * or connect to an existing WebSocket server such as, + * <a href="http://www.websocket.org/echo.html">ws://echo.websocket.org</a>., + * <p>, + * The client will attempt to connect to the URI passed to it as the first argument., + * You don't have to specify any arguments if you want to connect to the example WebSocket server,, + * as this is the default., + */, +public final class WebSocketClient {, +    private WebSocketClient() {, +    public static void main(String... args) throws Exception {, +, +        new WebSocketClientRunner(uri).run();, +++ b/example/src/main/java/io/netty/example/http/websocketx/client/WebSocketClient.java, + * Copyright 2014 The Netty Project, +/**, + * This is an example of a WebSocket client., + * <p>, + * In order to run this example you need a compatible WebSocket server., + * Therefore you can either start the WebSocket server from the examples, + * by running {@link io.netty.example.http.websocketx.server.WebSocketServer}, + * or connect to an existing WebSocket server such as, + * <a href="http://www.websocket.org/echo.html">ws://echo.websocket.org</a>., + * <p>, + * The client will attempt to connect to the URI passed to it as the first argument., + * You don't have to specify any arguments if you want to connect to the example WebSocket server,, + * as this is the default., + */, +public final class WebSocketClient {, +    private WebSocketClient() {, +    public static void main(String... args) throws Exception {, +, +        new WebSocketClientRunner(uri).run();, +++ b/example/src/main/java/io/netty/example/http/websocketx/client/WebSocketClientRunner.java, +/*, + * Copyright 2014 The Netty Project, + *, + * The Netty Project licenses this file to you under the Apache License,, + * version 2.0 (the "License"); you may not use this file except in compliance, + * with the License. You may obtain a copy of the License at:, + *, + *   http://www.apache.org/licenses/LICENSE-2.0, + *, + * Unless required by applicable law or agreed to in writing, software, + * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT, + * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the, + * License for the specific language governing permissions and limitations, + * under the License., + */, +package io.netty.example.http.websocketx.client;, +, +import io.netty.bootstrap.Bootstrap;, +import io.netty.buffer.Unpooled;, +import io.netty.channel.Channel;, +import io.netty.channel.ChannelInitializer;, +import io.netty.channel.EventLoopGroup;, +import io.netty.channel.nio.NioEventLoopGroup;, +import io.netty.channel.socket.SocketChannel;, +import io.netty.channel.socket.nio.NioSocketChannel;, +import io.netty.handler.codec.http.DefaultHttpHeaders;, +import io.netty.handler.codec.http.HttpClientCodec;, +import io.netty.handler.codec.http.HttpObjectAggregator;, +import io.netty.handler.codec.http.websocketx.CloseWebSocketFrame;, +import io.netty.handler.codec.http.websocketx.PingWebSocketFrame;, +import io.netty.handler.codec.http.websocketx.TextWebSocketFrame;, +import io.netty.handler.codec.http.websocketx.WebSocketClientHandshakerFactory;, +import io.netty.handler.codec.http.websocketx.WebSocketFrame;, +import io.netty.handler.codec.http.websocketx.WebSocketVersion;, +import io.netty.handler.ssl.SslHandler;, +, +import javax.net.ssl.SSLEngine;, +import java.io.BufferedReader;, +import java.io.InputStreamReader;, +import java.net.URI;, +, +public final class WebSocketClientRunner {, +, +    private final URI uri;, +, +    public WebSocketClientRunner(URI uri) {, +        this.uri = uri;, +    }, +, +    public void run() throws Exception {, +        EventLoopGroup group = new NioEventLoopGroup();, +        try {, +            // Connect with V13 (RFC 6455 aka HyBi-17). You can change it to V08 or V00., +            // If you change it to V00, ping is not supported and remember to change, +            // HttpResponseDecoder to WebSocketHttpResponseDecoder in the pipeline., +            final WebSocketClientHandler handler =, +                    new WebSocketClientHandler(, +                            WebSocketClientHandshakerFactory.newHandshaker(, +                                    uri, WebSocketVersion.V13, null, false, new DefaultHttpHeaders()));]