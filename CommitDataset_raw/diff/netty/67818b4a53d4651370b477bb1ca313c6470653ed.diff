[+++ b/src/main/java/org/jboss/netty/handler/execution/OrderedMemoryAwareThreadPoolExecutor.java, +import org.jboss.netty.channel.ChannelState;, +import org.jboss.netty.channel.ChannelStateEvent;, +, +        // Remove the entry when the channel closes., +        if (e instanceof ChannelStateEvent) {, +            ChannelStateEvent se = (ChannelStateEvent) e;, +            if (se.getState() == ChannelState.OPEN &&, +                !channel.isOpen()) {, +                childExecutors.remove(channel);, +            }, +        }]