[+++ b/src/main/java/org/jboss/netty/channel/socket/nio/NioWorker.java, +            while ((ret = buffer.writeBytes(ch, buffer.writableBytes())) > 0) {, +                if (!buffer.writable()) {]