[+++ b/src/main/java/org/jboss/netty/channel/socket/nio/NioSocketChannel.java, +import java.util.concurrent.atomic.AtomicBoolean;, +    final AtomicBoolean writeTaskInTaskQueue = new AtomicBoolean();, +            writeTaskInTaskQueue.set(false);, +++ b/src/main/java/org/jboss/netty/channel/socket/nio/NioSocketChannel.java, +import java.util.concurrent.atomic.AtomicBoolean;, +    final AtomicBoolean writeTaskInTaskQueue = new AtomicBoolean();, +            writeTaskInTaskQueue.set(false);, +++ b/src/main/java/org/jboss/netty/channel/socket/nio/NioWorker.java, +                if (channel.writeTaskInTaskQueue.compareAndSet(false, true)) {, +                }]