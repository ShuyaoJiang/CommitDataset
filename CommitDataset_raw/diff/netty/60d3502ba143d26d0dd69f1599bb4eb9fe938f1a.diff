[+++ b/src/main/java/org/jboss/netty/channel/socket/nio/NioAcceptedSocketChannel.java, +        setConnected();, +++ b/src/main/java/org/jboss/netty/channel/socket/nio/NioAcceptedSocketChannel.java, +        setConnected();, +++ b/src/main/java/org/jboss/netty/channel/socket/nio/NioClientSocketPipelineSink.java, +            channel.setBound();, +++ b/src/main/java/org/jboss/netty/channel/socket/nio/NioAcceptedSocketChannel.java, +        setConnected();, +++ b/src/main/java/org/jboss/netty/channel/socket/nio/NioClientSocketPipelineSink.java, +            channel.setBound();, +++ b/src/main/java/org/jboss/netty/channel/socket/nio/NioSocketChannel.java, +    private static final int ST_OPEN = 0;, +    private static final int ST_BOUND = 1;, +    private static final int ST_CONNECTED = 2;, +    private static final int ST_CLOSED = -1;, +    private volatile int state = ST_OPEN;, +, +    @Override, +    public boolean isOpen() {, +        return state >= ST_OPEN;, +    }, +, +        return state >= ST_BOUND;, +        return state == ST_CONNECTED;, +    }, +, +    final void setBound() {, +        assert state == ST_OPEN;, +        state = ST_BOUND;, +    }, +, +    final void setConnected() {, +        assert state == ST_OPEN || state == ST_BOUND;, +        state = ST_CONNECTED;, +    }, +, +    @Override, +    protected boolean setClosed() {, +        state = ST_CLOSED;, +        return super.setClosed();, +++ b/src/main/java/org/jboss/netty/channel/socket/nio/NioAcceptedSocketChannel.java, +        setConnected();, +++ b/src/main/java/org/jboss/netty/channel/socket/nio/NioClientSocketPipelineSink.java, +            channel.setBound();, +++ b/src/main/java/org/jboss/netty/channel/socket/nio/NioSocketChannel.java, +    private static final int ST_OPEN = 0;, +    private static final int ST_BOUND = 1;, +    private static final int ST_CONNECTED = 2;, +    private static final int ST_CLOSED = -1;, +    private volatile int state = ST_OPEN;, +, +    @Override, +    public boolean isOpen() {, +        return state >= ST_OPEN;, +    }, +, +        return state >= ST_BOUND;, +        return state == ST_CONNECTED;, +    }, +, +    final void setBound() {, +        assert state == ST_OPEN;, +        state = ST_BOUND;, +    }, +, +    final void setConnected() {, +        assert state == ST_OPEN || state == ST_BOUND;, +        state = ST_CONNECTED;, +    }, +, +    @Override, +    protected boolean setClosed() {, +        state = ST_CLOSED;, +        return super.setClosed();, +++ b/src/main/java/org/jboss/netty/channel/socket/nio/NioWorker.java, +                channel.setConnected();]