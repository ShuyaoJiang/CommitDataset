[+++ b/codec/src/main/java/io/netty/handler/codec/json/JsonObjectDecoder.java, +            if (state == ST_DECODING_ARRAY_STREAM) {, +                insideString = false;, +                openBraces = 1;, +            }, +++ b/codec/src/main/java/io/netty/handler/codec/json/JsonObjectDecoder.java, +            if (state == ST_DECODING_ARRAY_STREAM) {, +                insideString = false;, +                openBraces = 1;, +            }, +++ b/codec/src/test/java/io/netty/handler/codec/json/JsonObjectDecoderTest.java, +    public void testStreamJsonArrayOverMultipleWrites1() {, +        String[] array = new String[] {, +                "   [{\"test",, +                "case\"  : \"\\\"}]Escaped dou\\\"ble quotes \\\" in JSON str\\\"ing\"",, +                "  }\n\n    , ",, +                "{\"testcase\" : \"Streaming string me",, +                "ssage\"} ]      ", +                };, +        String[] result = new String[] {, +                "{\"testcase\"  : \"\\\"}]Escaped dou\\\"ble quotes \\\" in JSON str\\\"ing\"  }",, +                "{\"testcase\" : \"Streaming string message\"}", +                };, +        doTestStreamJsonArrayOverMultipleWrites(2, array, result);, +    }, +, +    @Test, +    public void testStreamJsonArrayOverMultipleWrites2() {, +        String[] array = new String[] {, +                "   [{\"test",, +                "case\"  : \"\\\"}]Escaped dou\\\"ble quotes \\\" in JSON str\\\"ing\"",, +                "  }\n\n    , {\"test",, +                "case\" : \"Streaming string me",, +                "ssage\"} ]      ", +                };, +        String[] result = new String[] {, +                "{\"testcase\"  : \"\\\"}]Escaped dou\\\"ble quotes \\\" in JSON str\\\"ing\"  }",, +                "{\"testcase\" : \"Streaming string message\"}", +                };, +        doTestStreamJsonArrayOverMultipleWrites(2, array, result);, +    }, +, +    @Test, +    public void testStreamJsonArrayOverMultipleWrites3() {, +        String[] array = new String[] {, +                "   [{\"test",, +                "case\"  : \"\\\"}]Escaped dou\\\"ble quotes \\\" in JSON str\\\"ing\"",, +                "  }\n\n    , [{\"test",, +                "case\" : \"Streaming string me",, +                "ssage\"}] ]      ", +                };, +        String[] result = new String[] {, +                "{\"testcase\"  : \"\\\"}]Escaped dou\\\"ble quotes \\\" in JSON str\\\"ing\"  }",, +                "[{\"testcase\" : \"Streaming string message\"}]", +                };, +        doTestStreamJsonArrayOverMultipleWrites(2, array, result);, +    }, +, +    private static void doTestStreamJsonArrayOverMultipleWrites(int indexDataAvailable,, +            String[] array, String[] result) {, +        boolean dataAvailable = false;, +        for (String part : array) {, +            dataAvailable = ch.writeInbound(Unpooled.copiedBuffer(part, CharsetUtil.UTF_8));, +            if (indexDataAvailable > 0) {, +            } else {, +            }, +            indexDataAvailable--;, +        }, +        for (String part : result) {, +            assertEquals(part, res.toString(CharsetUtil.UTF_8));, +        }]