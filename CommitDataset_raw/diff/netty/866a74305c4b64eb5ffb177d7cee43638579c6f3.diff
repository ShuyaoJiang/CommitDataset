[+++ b/src/main/java/org/jboss/netty/channel/DefaultChannelPipeline.java, +        if (oldHead == null) {, +            throw new NoSuchElementException();, +        }, +        if (oldHead.next == null) {, +            head = tail = null;, +            name2ctx.clear();, +        } else {, +        }, +        if (oldTail == null) {, +            throw new NoSuchElementException();, +        }, +        if (oldTail.prev == null) {, +            head = tail = null;, +            name2ctx.clear();, +        } else {, +        }]