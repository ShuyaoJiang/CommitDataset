[+++ b/buffer/src/main/java/io/netty/buffer/ByteBufUtil.java, +    private static final int MAX_BYTES_PER_CHAR_UTF8 =, +            (int) CharsetUtil.getEncoder(CharsetUtil.UTF_8).maxBytesPerChar();, +     * it to a {@link ByteBuf} allocated with {@code alloc}., +     * @param alloc The allocator used to allocate a new {@link ByteBuf}., +     * @param seq The characters to write into a buffer., +     * @return The {@link ByteBuf} which contains the <a href="http://en.wikipedia.org/wiki/UTF-8">UTF-8</a> encoded, +     * result., +     */, +    public static ByteBuf writeUtf8(ByteBufAllocator alloc, CharSequence seq) {, +        // UTF-8 uses max. 3 bytes per char, so calculate the worst case., +        ByteBuf buf = alloc.buffer(seq.length() * MAX_BYTES_PER_CHAR_UTF8);, +        writeUtf8(buf, seq);, +        return buf;, +    }, +, +    /**, +     * Encode a {@link CharSequence} in <a href="http://en.wikipedia.org/wiki/UTF-8">UTF-8</a> and write, +        buf.ensureWritable(len * MAX_BYTES_PER_CHAR_UTF8);, +     * Encode a {@link CharSequence} in <a href="http://en.wikipedia.org/wiki/ASCII">ASCII</a> and write, +     * it to a {@link ByteBuf} allocated with {@code alloc}., +     * @param alloc The allocator used to allocate a new {@link ByteBuf}., +     * @param seq The characters to write into a buffer., +     * @return The {@link ByteBuf} which contains the <a href="http://en.wikipedia.org/wiki/ASCII">ASCII</a> encoded, +     * result., +     */, +    public static ByteBuf writeAscii(ByteBufAllocator alloc, CharSequence seq) {, +        // ASCII uses 1 byte per char, +        ByteBuf buf = alloc.buffer(seq.length());, +        writeAscii(buf, seq);, +        return buf;, +    }, +, +    /**]