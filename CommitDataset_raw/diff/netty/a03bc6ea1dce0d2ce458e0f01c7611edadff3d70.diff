[+++ b/transport/src/main/java/io/netty/channel/DefaultChannelPipeline.java, +    private void callAfterRemove(ChannelHandlerContext ctx) {, +        // Free all buffers before completing removal., +        ChannelHandler handler = ctx.handler();, +        if (handler instanceof ChannelInboundHandler) {, +                ((ChannelInboundHandler) handler).freeInboundBuffer(ctx);, +            } catch (Exception e) {, +                notifyHandlerException(e);, +            }, +        }, +        if (handler instanceof ChannelOutboundHandler) {, +            try {, +                ((ChannelOutboundHandler) handler).freeOutboundBuffer(ctx);, +            } catch (Exception e) {, +                notifyHandlerException(e);, +            }, +        }, +, +        // Notify the complete removal., +        try {, +            handler.afterRemove(ctx);]