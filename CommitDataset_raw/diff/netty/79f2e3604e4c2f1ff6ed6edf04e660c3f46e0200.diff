[+++ b/codec-http2/src/main/java/io/netty/handler/codec/http2/Http2ConnectionHandler.java, +import static io.netty.buffer.Unpooled.EMPTY_BUFFER;, +        // If the user has already sent a GO_AWAY frame they may be attempting to do a graceful shutdown which requires, +        // sending multiple GO_AWAY frames. We should only send a GO_AWAY here if one has not already been sent. If, +        // a GO_AWAY has been sent we send a empty buffer just so we can wait to close until all other data has been, +        // flushed to the OS., +        // https://github.com/netty/netty/issues/5307, +        final ChannelFuture future = connection().goAwaySent() ? ctx.write(EMPTY_BUFFER) : goAway(ctx, null);, +            // If there are no active streams, close immediately after the GO_AWAY write completes., +            // If there are active streams we should wait until they are all closed before closing the connection.]