[+++ b/src/main/java/org/jboss/netty/handler/codec/http/HttpMessageEncoder.java, +            } else if (chunk instanceof HttpChunkTrailer) {, +                ChannelBuffer trailer = ChannelBuffers.dynamicBuffer(, +                        channel.getConfig().getBufferFactory());, +                trailer.writeByte((byte) '0');, +                trailer.writeBytes(CRLF);, +                encodeTrailingHeaders(trailer, (HttpChunkTrailer) chunk);, +                trailer.writeBytes(CRLF);, +                return trailer;, +                    encodeHeader(buf, header, value);, +    private void encodeTrailingHeaders(ChannelBuffer buf, HttpChunkTrailer trailer) {, +        Set<String> headers = trailer.getHeaderNames();, +        try {, +            for (String header : headers) {, +                List<String> values = trailer.getHeaders(header);, +                for (String value : values) {, +                    encodeHeader(buf, header, value);, +                }, +            }, +        } catch (UnsupportedEncodingException e) {, +            throw (Error) new Error().initCause(e);, +        }, +    }, +, +    private void encodeHeader(ChannelBuffer buf, String header, String value), +            throws UnsupportedEncodingException {, +        buf.writeBytes(header.getBytes("ASCII"));, +        buf.writeByte(COLON);, +        buf.writeByte(SP);, +        buf.writeBytes(value.getBytes("ASCII"));, +        buf.writeBytes(CRLF);, +    }, +]