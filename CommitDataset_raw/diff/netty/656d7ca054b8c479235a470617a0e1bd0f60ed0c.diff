[+++ b/common/src/main/java/io/netty/util/NetUtil.java, +import io.netty.util.internal.PlatformDependent;, +        // Find the first loopback interface available., +        NetworkInterface loopbackIface = null;, +            for (Enumeration<NetworkInterface> ifaces = NetworkInterface.getNetworkInterfaces();, +                 ifaces.hasMoreElements();) {, +, +                NetworkInterface iface = ifaces.nextElement();, +                if (iface.isLoopback()) {, +                    // Found, +                    loopbackIface = iface;, +                    break;, +                }, +            }, +            if (loopbackIface == null) {, +                logger.warn("Failed to find the loopback interface");, +            }, +        } catch (SocketException e) {, +            logger.warn("Failed to find the loopback interface", e);, +        }, +, +        LOOPBACK_IF = loopbackIface;, +, +        // Find the localhost address, +        InetAddress localhost = null;, +        if (LOOPBACK_IF != null) {, +            logger.debug("Loopback interface: {}", LOOPBACK_IF.getDisplayName());, +            for (Enumeration<InetAddress> addrs = LOOPBACK_IF.getInetAddresses();, +                 addrs.hasMoreElements();) {, +                InetAddress a = addrs.nextElement();, +                if (localhost == null) {, +                    logger.debug("Loopback address: {} (primary)", a);, +                    localhost = a;, +                } else {, +                    logger.debug("Loopback address: {}", a);, +                }, +            }, +        }, +, +        if (localhost == null) {, +            InetAddress localhost6 = null;, +                localhost6 = InetAddress.getByAddress(new byte[]{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 });, +            } catch (Exception e) {, +                // We should not get here as long as the length of the address is correct., +                PlatformDependent.throwException(e);, +            }, +, +                if (NetworkInterface.getByInetAddress(localhost6) != null) {, +                    logger.debug("Using hard-coded IPv6 localhost address: {}", localhost6);, +                    localhost = localhost6;, +                }, +            } catch (Exception e) {, +                // Ignore, +            } finally {, +                if (localhost == null) {, +                    InetAddress localhost4 = null;, +                    try {, +                        localhost4 = InetAddress.getByAddress(new byte[]{ 127, 0, 0, 1 });, +                    } catch (Exception e) {, +                        // We should not get here as long as the length of the address is correct., +                        PlatformDependent.throwException(e);, +                    }, +, +                    logger.debug("Using hard-coded IPv4 localhost address: {}", localhost4);, +                    localhost = localhost4;, +            logger.debug("/proc/sys/net/core/somaxconn: {}", somaxconn);, +    public static byte[] createByteArrayFromIpAddressString(String ipAddressString) {, +            StringTokenizer tokenizer = new StringTokenizer(ipAddressString, ".");]