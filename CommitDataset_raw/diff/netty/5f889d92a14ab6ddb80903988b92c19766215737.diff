[+++ b/codec/src/main/java/io/netty/handler/codec/compression/Bzip2Decoder.java, +                    , +                    final int blockLength = blockDecompressor.blockLength();, +                    final ByteBuf uncompressed = ctx.alloc().buffer(blockLength);, +                    boolean success = false;, +                    try {, +                        success = true;, +                    } finally {, +                        if (!success) {, +                            uncompressed.release();, +                        }, +                    }, +++ b/codec/src/main/java/io/netty/handler/codec/compression/Bzip2Decoder.java, +                    , +                    final int blockLength = blockDecompressor.blockLength();, +                    final ByteBuf uncompressed = ctx.alloc().buffer(blockLength);, +                    boolean success = false;, +                    try {, +                        success = true;, +                    } finally {, +                        if (!success) {, +                            uncompressed.release();, +                        }, +                    }, +++ b/codec/src/test/java/io/netty/handler/codec/compression/Bzip2DecoderTest.java, +        try {, +        } finally {, +            for (;;) {, +                ByteBuf inflated = channel.readInbound();, +                if (inflated == null) {, +                    break;, +                }, +                inflated.release();, +            }, +            channel.finish();, +        }]