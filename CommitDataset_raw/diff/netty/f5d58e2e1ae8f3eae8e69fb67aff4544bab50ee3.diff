[+++ b/common/src/main/java/io/netty/util/concurrent/DefaultPromise.java, +     * Threading - synchronized(this). We must prevent concurrent notification and FIFO listener notification if the, +     * executor changes., +            // Only proceed if there are listeners to notify and we are not already notifying listeners., +            if (notifyingListeners || this.listeners == null) {, +            notifyingListeners = true;, +        for (;;) {, +            synchronized (this) {, +                if (this.listeners == null) {, +                    // Nothing can throw from within this method, so setting notifyingListeners back to false does not, +                    // need to be in a finally block., +                    return;, +                }, +                listeners = this.listeners;, +                this.listeners = null;]