[+++ b/codec-http/src/main/java/io/netty/handler/codec/http/QueryStringEncoder.java, +            return PATTERN.matcher(URLEncoder.encode(s, charset.name())).replaceAll("%20");, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/QueryStringEncoder.java, +            return PATTERN.matcher(URLEncoder.encode(s, charset.name())).replaceAll("%20");, +++ b/codec-http/src/test/java/io/netty/handler/codec/http/QueryStringEncoderTest.java, +, +    @Test, +    public void testWhitespaceEncoding() throws Exception {, +        QueryStringEncoder e = new QueryStringEncoder("/foo");, +        e.addParam("a", "b c");, +        Assert.assertEquals("/foo?a=b%20c", e.toString());, +        Assert.assertEquals(new URI("/foo?a=b%20c"), e.toUri());, +    }]