[+++ b/transport/src/main/java/io/netty/channel/DefaultChannelHandlerContext.java, +    void initHeadHandler() {, +        // Must be called for the head handler., +        HeadHandler h = (HeadHandler) handler;, +        if (h.initialized) {, +            return;, +, +        assert executor().inEventLoop();, +, +        h.init(this);, +        h.initialized = true;, +        outByteBuf = h.byteSink;, +        outMsgBuf = h.msgSink;, +++ b/transport/src/main/java/io/netty/channel/DefaultChannelHandlerContext.java, +    void initHeadHandler() {, +        // Must be called for the head handler., +        HeadHandler h = (HeadHandler) handler;, +        if (h.initialized) {, +            return;, +, +        assert executor().inEventLoop();, +, +        h.init(this);, +        h.initialized = true;, +        outByteBuf = h.byteSink;, +        outMsgBuf = h.msgSink;, +++ b/transport/src/main/java/io/netty/channel/DefaultChannelPipeline.java, +        head.initHeadHandler();, +        head.initHeadHandler();, +        boolean initialized;, +            assert !initialized;]