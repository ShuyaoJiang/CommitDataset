[+++ b/handler-proxy/src/main/java/io/netty/handler/proxy/HttpProxyHandler.java, +        authorization = new AsciiString("Basic " + authzBase64.toString(CharsetUtil.US_ASCII));, +            req.headers().set(HttpHeaderNames.PROXY_AUTHORIZATION, authorization);, +++ b/handler-proxy/src/main/java/io/netty/handler/proxy/HttpProxyHandler.java, +        authorization = new AsciiString("Basic " + authzBase64.toString(CharsetUtil.US_ASCII));, +            req.headers().set(HttpHeaderNames.PROXY_AUTHORIZATION, authorization);, +++ b/handler-proxy/src/test/java/io/netty/handler/proxy/HttpProxyServer.java, +import io.netty.util.internal.StringUtil;, +            CharSequence authz = req.headers().get(HttpHeaderNames.PROXY_AUTHORIZATION);, +                String[] authzParts = StringUtil.split(authz.toString(), ' ', 2);, +                ByteBuf authzBuf64 = Unpooled.copiedBuffer(authzParts[1], CharsetUtil.US_ASCII);, +, +                String expectedAuthz = username + ':' + password;, +                authzSuccess = "Basic".equals(authzParts[0]) &&, +                               expectedAuthz.equals(authzBuf.toString(CharsetUtil.US_ASCII));, +]