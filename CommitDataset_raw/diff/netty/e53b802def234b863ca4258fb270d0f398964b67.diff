[+++ b/src/main/java/org/jboss/netty/channel/socket/nio/NioProviderMetadata.java, +import org.jboss.netty.logging.InternalLogger;, +import org.jboss.netty.logging.InternalLoggerFactory;, +, +    private static final InternalLogger logger =, +        InternalLoggerFactory.getInstance(NioProviderMetadata.class);, +, +    private static final String CONSTRAINT_LEVEL_PROPERTY =, +        "java.nio.channels.spi.constraintLevel";, +    static final int CONSTRAINT_LEVEL;, +        int constraintLevel = -1;, +, +        // Use the system property if possible., +        try {, +            String value = System.getProperty(CONSTRAINT_LEVEL_PROPERTY);, +            constraintLevel = Integer.parseInt(value);, +            if (constraintLevel < 0 || constraintLevel > 2) {, +                constraintLevel = -1;, +            } else {, +                logger.debug(, +                        "Using the specified NIO constraint level: " +, +                        constraintLevel);, +            }, +        } catch (Exception e) {, +            // format error or security issue, +        }, +, +        if (constraintLevel < 0) {, +            constraintLevel = detectConstraintLevel();, +            if (constraintLevel < 0) {, +                constraintLevel = 2;, +                logger.warn(, +                        "Failed to autodetect the NIO constraint level; " +, +                        "using the safest level (2)");, +            } else {, +                logger.debug(, +                        "Using the autodected NIO constraint level: " +, +                        constraintLevel);, +            }, +        }, +, +        CONSTRAINT_LEVEL = constraintLevel;, +, +, +    private static int detectConstraintLevel() {, +        // FIXME Auto-detect the level, +        return 0;, +    }]