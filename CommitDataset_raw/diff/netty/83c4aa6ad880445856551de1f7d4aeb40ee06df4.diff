[+++ b/codec-http2/src/main/java/io/netty/handler/codec/http2/Http2ConnectionHandler.java, +                if (ctx.channel().isActive() && readClientPrefaceString(in) && verifyFirstFrameIsSettings(in)) {, +                if (logger.isWarnEnabled()) {, +                    logger.warn("{} Sending GOAWAY failed: lastStreamId '{}', errorCode '{}', " +, +++ b/codec-http2/src/main/java/io/netty/handler/codec/http2/Http2ConnectionHandler.java, +                if (ctx.channel().isActive() && readClientPrefaceString(in) && verifyFirstFrameIsSettings(in)) {, +                if (logger.isWarnEnabled()) {, +                    logger.warn("{} Sending GOAWAY failed: lastStreamId '{}', errorCode '{}', " +, +++ b/codec-http2/src/test/java/io/netty/handler/codec/http2/Http2ConnectionHandlerTest.java, +    @Test, +    public void channelClosedDoesNotThrowPrefaceException() throws Exception {, +        when(connection.isServer()).thenReturn(true);, +        handler = newHandler();, +        when(channel.isActive()).thenReturn(false);, +        handler.channelInactive(ctx);, +        verify(frameWriter, never()).writeGoAway(any(ChannelHandlerContext.class), anyInt(), anyLong(),, +                                                 any(ByteBuf.class), any(ChannelPromise.class));, +        verify(frameWriter, never()).writeRstStream(any(ChannelHandlerContext.class), anyInt(), anyLong(),, +                                                    any(ChannelPromise.class));, +    }, +]