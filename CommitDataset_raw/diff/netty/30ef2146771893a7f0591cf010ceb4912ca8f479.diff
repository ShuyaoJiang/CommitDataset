[+++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyFrameDecoder.java, +    protected Object decodeLast(, +            ChannelHandlerContext ctx, Channel channel, ChannelBuffer buffer), +            throws Exception {, +        try {, +            Object frame = decode(ctx, channel, buffer);, +            return frame;, +        } finally {, +            headerBlockDecompressor.end();, +        }, +    }, +, +, +    @Override, +++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyFrameDecoder.java, +    protected Object decodeLast(, +            ChannelHandlerContext ctx, Channel channel, ChannelBuffer buffer), +            throws Exception {, +        try {, +            Object frame = decode(ctx, channel, buffer);, +            return frame;, +        } finally {, +            headerBlockDecompressor.end();, +        }, +    }, +, +, +    @Override, +++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyHeaderBlockCompressor.java, +import io.netty.util.internal.DetectionUtil;, +        if (DetectionUtil.javaVersion() >= 7) {, +++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyFrameDecoder.java, +    protected Object decodeLast(, +            ChannelHandlerContext ctx, Channel channel, ChannelBuffer buffer), +            throws Exception {, +        try {, +            Object frame = decode(ctx, channel, buffer);, +            return frame;, +        } finally {, +            headerBlockDecompressor.end();, +        }, +    }, +, +, +    @Override, +++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyHeaderBlockCompressor.java, +import io.netty.util.internal.DetectionUtil;, +        if (DetectionUtil.javaVersion() >= 7) {, +++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyHeaderBlockDecompressor.java, +        return new SpdyHeaderBlockZlibDecompressor();, +    abstract void decode(ChannelBuffer decompressed) throws Exception;, +    abstract void end();, +++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyFrameDecoder.java, +    protected Object decodeLast(, +            ChannelHandlerContext ctx, Channel channel, ChannelBuffer buffer), +            throws Exception {, +        try {, +            Object frame = decode(ctx, channel, buffer);, +            return frame;, +        } finally {, +            headerBlockDecompressor.end();, +        }, +    }, +, +, +    @Override, +++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyHeaderBlockCompressor.java, +import io.netty.util.internal.DetectionUtil;, +        if (DetectionUtil.javaVersion() >= 7) {, +++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyHeaderBlockDecompressor.java, +        return new SpdyHeaderBlockZlibDecompressor();, +    abstract void decode(ChannelBuffer decompressed) throws Exception;, +    abstract void end();, +++ /dev/null, +++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyFrameDecoder.java, +    protected Object decodeLast(, +            ChannelHandlerContext ctx, Channel channel, ChannelBuffer buffer), +            throws Exception {, +        try {, +            Object frame = decode(ctx, channel, buffer);, +            return frame;, +        } finally {, +            headerBlockDecompressor.end();, +        }, +    }, +, +, +    @Override, +++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyHeaderBlockCompressor.java, +import io.netty.util.internal.DetectionUtil;, +        if (DetectionUtil.javaVersion() >= 7) {, +++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyHeaderBlockDecompressor.java, +        return new SpdyHeaderBlockZlibDecompressor();, +    abstract void decode(ChannelBuffer decompressed) throws Exception;, +    abstract void end();, +++ /dev/null, +++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyHeaderBlockZlibDecompressor.java, +/*, + * Copyright 2012 The Netty Project, + *]