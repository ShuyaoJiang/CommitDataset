[+++ b/codec-haproxy/src/main/java/io/netty/handler/codec/haproxy/HAProxyMessage.java, +        switch (addrFamily) {, +            case AF_UNSPEC:, +                if (address != null) {, +                return;, +            case AF_UNIX:, +        if (address == null) {, +            throw new NullPointerException("address");, +        switch (addrFamily) {, +            case AF_IPv4:, +                if (!NetUtil.isValidIpV4Address(address)) {, +                    throw new HAProxyProtocolException("invalid IPv4 address: " + address);, +                }, +                break;, +            case AF_IPv6:, +                if (!NetUtil.isValidIpV6Address(address)) {, +                    throw new HAProxyProtocolException("invalid IPv6 address: " + address);, +                }, +                break;, +            default:, +                throw new Error();]