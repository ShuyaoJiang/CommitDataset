[+++ b/src/main/java/org/jboss/netty/handler/codec/protobuf/ProtobufDecoder.java, +import org.jboss.netty.handler.codec.oneone.OneToOneEncoder;, + * pipeline.addLast("frameEncoder",, + *                  new {@link OneToOneEncoder}() {, + *                      protected Object encode(ChannelHandlerContext ctx, Channel channel, Object msg) {, + *                          ChannelBuffer header = ChanelBuffers.buffer(4);, + *                          ChannelBuffer body = (ChannelBuffer) msg;, + *                          header.writeInt(body.readableBytes());, + *                          return ChannelBuffers.wrappedBuffer(header, body);, + *                      }, + *                  });, +++ b/src/main/java/org/jboss/netty/handler/codec/protobuf/ProtobufDecoder.java, +import org.jboss.netty.handler.codec.oneone.OneToOneEncoder;, + * pipeline.addLast("frameEncoder",, + *                  new {@link OneToOneEncoder}() {, + *                      protected Object encode(ChannelHandlerContext ctx, Channel channel, Object msg) {, + *                          ChannelBuffer header = ChanelBuffers.buffer(4);, + *                          ChannelBuffer body = (ChannelBuffer) msg;, + *                          header.writeInt(body.readableBytes());, + *                          return ChannelBuffers.wrappedBuffer(header, body);, + *                      }, + *                  });, +++ b/src/main/java/org/jboss/netty/handler/codec/protobuf/ProtobufEncoder.java, + * pipeline.addLast("frameEncoder",, + *                  new {@link OneToOneEncoder}() {, + *                      protected Object encode(ChannelHandlerContext ctx, Channel channel, Object msg) {, + *                          ChannelBuffer header = ChanelBuffers.buffer(4);, + *                          ChannelBuffer body = (ChannelBuffer) msg;, + *                          header.writeInt(body.readableBytes());, + *                          return ChannelBuffers.wrappedBuffer(header, body);, + *                      }, + *                  });]