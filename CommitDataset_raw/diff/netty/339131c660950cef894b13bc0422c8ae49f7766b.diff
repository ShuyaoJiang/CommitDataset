[+++ b/transport/src/main/java/io/netty/channel/DefaultChannelPipeline.java, +import java.util.concurrent.atomic.AtomicReferenceFieldUpdater;, +    private static final AtomicReferenceFieldUpdater<DefaultChannelPipeline, MessageSizeEstimator.Handle> ESTIMATOR =, +            AtomicReferenceFieldUpdater.newUpdater(, +                    DefaultChannelPipeline.class, MessageSizeEstimator.Handle.class, "estimatorHandle");, +    private volatile MessageSizeEstimator.Handle estimatorHandle;, +        MessageSizeEstimator.Handle handle = estimatorHandle;, +        if (handle == null) {, +            handle = channel.config().getMessageSizeEstimator().newHandle();, +            if (!ESTIMATOR.compareAndSet(this, null, handle)) {, +                handle = estimatorHandle;, +        }, +        return handle;]