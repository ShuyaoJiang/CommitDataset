[+++ b/common/src/main/java/io/netty/util/NetUtil.java, +     * {@code true} if IPv4 should be used even if the system supports both IPv4 and IPv6., +     * {@code true} if an IPv6 address should be preferred when a host has both an IPv4 address and an IPv6 address., +     */, +    private static final boolean IPV6_ADDRESSES_PREFERRED = Boolean.getBoolean("java.net.preferIPv6Addresses");, +, +    /**, +        logger.debug("-Djava.net.preferIPv4Stack: {}", IPV4_PREFERRED);, +        logger.debug("-Djava.net.preferIPv6Addresses: {}", IPV6_ADDRESSES_PREFERRED);, +, +     * Returns {@code true} if IPv4 should be used even if the system supports both IPv4 and IPv6. Setting this, +     * property to {@code true} will disable IPv6 support. The default value of this property is {@code false}., +     *, +     * @see <a href="https://docs.oracle.com/javase/8/docs/api/java/net/doc-files/net-properties.html">Java SE, +     *      networking properties</a>, +     * Returns {@code true} if an IPv6 address should be preferred when a host has both an IPv4 address and an IPv6, +     * address. The default value of this property is {@code false}., +     *, +     * @see <a href="https://docs.oracle.com/javase/8/docs/api/java/net/doc-files/net-properties.html">Java SE, +     *      networking properties</a>, +     */, +    public static boolean isIpV6AddressesPreferred() {, +        return IPV6_ADDRESSES_PREFERRED;, +    }, +, +    /**, +++ b/common/src/main/java/io/netty/util/NetUtil.java, +     * {@code true} if IPv4 should be used even if the system supports both IPv4 and IPv6., +     * {@code true} if an IPv6 address should be preferred when a host has both an IPv4 address and an IPv6 address., +     */, +    private static final boolean IPV6_ADDRESSES_PREFERRED = Boolean.getBoolean("java.net.preferIPv6Addresses");, +, +    /**, +        logger.debug("-Djava.net.preferIPv4Stack: {}", IPV4_PREFERRED);, +        logger.debug("-Djava.net.preferIPv6Addresses: {}", IPV6_ADDRESSES_PREFERRED);, +, +     * Returns {@code true} if IPv4 should be used even if the system supports both IPv4 and IPv6. Setting this, +     * property to {@code true} will disable IPv6 support. The default value of this property is {@code false}., +     *, +     * @see <a href="https://docs.oracle.com/javase/8/docs/api/java/net/doc-files/net-properties.html">Java SE, +     *      networking properties</a>, +     * Returns {@code true} if an IPv6 address should be preferred when a host has both an IPv4 address and an IPv6, +     * address. The default value of this property is {@code false}., +     *, +     * @see <a href="https://docs.oracle.com/javase/8/docs/api/java/net/doc-files/net-properties.html">Java SE, +     *      networking properties</a>, +     */, +    public static boolean isIpV6AddressesPreferred() {, +        return IPV6_ADDRESSES_PREFERRED;, +    }, +, +    /**, +++ b/resolver-dns/src/main/java/io/netty/resolver/dns/DnsNameResolver.java, +    static final InternetProtocolFamily[] DEFAULT_RESOLVE_ADDRESS_TYPES;, +        if (NetUtil.isIpV4StackPreferred()) {, +            DEFAULT_RESOLVE_ADDRESS_TYPES = new InternetProtocolFamily[] { InternetProtocolFamily.IPv4 };, +            LOCALHOST_ADDRESS = NetUtil.LOCALHOST4;, +        } else {, +            DEFAULT_RESOLVE_ADDRESS_TYPES = new InternetProtocolFamily[2];, +            if (NetUtil.isIpV6AddressesPreferred()) {, +            }]