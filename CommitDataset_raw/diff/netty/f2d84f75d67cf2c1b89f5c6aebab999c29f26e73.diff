[+++ b/codec/src/main/java/io/netty/handler/codec/ByteToByteDecoder.java, +    private volatile boolean singleDecode;, +, +    /**, +     * If set then only one message is decoded on each {@link #inboundBufferUpdated(ChannelHandlerContext)} call., +     * This may be useful if you need to do some protocol upgrade and want to make sure nothing is mixed up., +     *, +     * Default is {@code false} as this has performance impacts., +     */, +    public void setSingleDecode(boolean singleDecode) {, +        this.singleDecode = singleDecode;, +    }, +, +    /**, +     * If {@code true} then only one message is decoded on each, +     * {@link #inboundBufferUpdated(ChannelHandlerContext)} call., +     *, +     * Default is {@code false} as this has performance impacts., +     */, +    public boolean isSingleDecode() {, +        return singleDecode;, +    }, +, +            if (oldInSize == in.readableBytes() || isSingleDecode()) {, +++ b/codec/src/main/java/io/netty/handler/codec/ByteToByteDecoder.java, +    private volatile boolean singleDecode;, +, +    /**, +     * If set then only one message is decoded on each {@link #inboundBufferUpdated(ChannelHandlerContext)} call., +     * This may be useful if you need to do some protocol upgrade and want to make sure nothing is mixed up., +     *, +     * Default is {@code false} as this has performance impacts., +     */, +    public void setSingleDecode(boolean singleDecode) {, +        this.singleDecode = singleDecode;, +    }, +, +    /**, +     * If {@code true} then only one message is decoded on each, +     * {@link #inboundBufferUpdated(ChannelHandlerContext)} call., +     *, +     * Default is {@code false} as this has performance impacts., +     */, +    public boolean isSingleDecode() {, +        return singleDecode;, +    }, +, +            if (oldInSize == in.readableBytes() || isSingleDecode()) {, +++ b/codec/src/main/java/io/netty/handler/codec/ByteToMessageDecoder.java, +    private volatile boolean singleDecode;, +, +    /**, +     * If set then only one message is decoded on each {@link #inboundBufferUpdated(ChannelHandlerContext)} call., +     * This may be useful if you need to do some protocol upgrade and want to make sure nothing is mixed up., +     *, +     * Default is {@code false} as this has performance impacts., +     */, +    public void setSingleDecode(boolean singleDecode) {, +        this.singleDecode = singleDecode;, +    }, +, +    /**, +     * If {@code true} then only one message is decoded on each, +     * {@link #inboundBufferUpdated(ChannelHandlerContext)} call., +     *, +     * Default is {@code false} as this has performance impacts., +     */, +    public boolean isSingleDecode() {, +        return singleDecode;, +    }, +, +                    if (isSingleDecode()) {, +                        break;, +                    }, +++ b/codec/src/main/java/io/netty/handler/codec/ByteToByteDecoder.java, +    private volatile boolean singleDecode;, +, +    /**, +     * If set then only one message is decoded on each {@link #inboundBufferUpdated(ChannelHandlerContext)} call., +     * This may be useful if you need to do some protocol upgrade and want to make sure nothing is mixed up., +     *, +     * Default is {@code false} as this has performance impacts., +     */, +    public void setSingleDecode(boolean singleDecode) {, +        this.singleDecode = singleDecode;, +    }, +, +    /**, +     * If {@code true} then only one message is decoded on each, +     * {@link #inboundBufferUpdated(ChannelHandlerContext)} call., +     *, +     * Default is {@code false} as this has performance impacts., +     */, +    public boolean isSingleDecode() {, +        return singleDecode;, +    }, +, +            if (oldInSize == in.readableBytes() || isSingleDecode()) {, +++ b/codec/src/main/java/io/netty/handler/codec/ByteToMessageDecoder.java, +    private volatile boolean singleDecode;]