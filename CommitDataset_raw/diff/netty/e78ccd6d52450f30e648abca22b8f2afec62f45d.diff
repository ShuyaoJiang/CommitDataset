[+++ b/handler/src/main/java/io/netty/handler/ipfilter/IpSubnetFilterRule.java, +            final InetAddress inetAddress = remoteAddress.getAddress();, +            if (inetAddress instanceof Inet4Address) {, +                int ipAddress = ipToInt((Inet4Address) inetAddress);, +            return false;, +        }, +            final InetAddress inetAddress = remoteAddress.getAddress();, +            if (inetAddress instanceof Inet6Address) {, +                BigInteger ipAddress = ipToInt((Inet6Address) inetAddress);, +            return false;, +        }, +++ b/handler/src/main/java/io/netty/handler/ipfilter/IpSubnetFilterRule.java, +            final InetAddress inetAddress = remoteAddress.getAddress();, +            if (inetAddress instanceof Inet4Address) {, +                int ipAddress = ipToInt((Inet4Address) inetAddress);, +            return false;, +        }, +            final InetAddress inetAddress = remoteAddress.getAddress();, +            if (inetAddress instanceof Inet6Address) {, +                BigInteger ipAddress = ipToInt((Inet6Address) inetAddress);, +            return false;, +        }, +++ b/handler/src/test/java/io/netty/handler/ipfilter/IpSubnetFilterTest.java, +    public void testIpv4SubnetMaskCorrectlyHandlesIpv6() {, +        IpSubnetFilterRule rule = new IpSubnetFilterRule("0.0.0.0", 0, IpFilterRuleType.ACCEPT);, +        Assert.assertFalse(rule.matches(newSockAddress("2001:db8:abcd:0000::1")));, +    }, +, +    @Test, +    public void testIpv6SubnetMaskCorrectlyHandlesIpv4() {, +        IpSubnetFilterRule rule = new IpSubnetFilterRule("::", 0, IpFilterRuleType.ACCEPT);, +        Assert.assertFalse(rule.matches(newSockAddress("91.114.240.43")));, +    }, +, +    @Test]