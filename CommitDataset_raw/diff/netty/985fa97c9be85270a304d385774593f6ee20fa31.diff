[+++ b/codec/src/main/java/io/netty/handler/codec/ByteToMessageDecoder.java, +import io.netty.channel.ChannelHandlerUtil;, +            if (ChannelHandlerUtil.unfoldAndAdd(ctx, decodeLast(ctx, in), true)) {, +                if (ChannelHandlerUtil.unfoldAndAdd(ctx, o, true)) {, +++ b/codec/src/main/java/io/netty/handler/codec/ByteToMessageDecoder.java, +import io.netty.channel.ChannelHandlerUtil;, +            if (ChannelHandlerUtil.unfoldAndAdd(ctx, decodeLast(ctx, in), true)) {, +                if (ChannelHandlerUtil.unfoldAndAdd(ctx, o, true)) {, +++ /dev/null, +++ b/codec/src/main/java/io/netty/handler/codec/ByteToMessageDecoder.java, +import io.netty.channel.ChannelHandlerUtil;, +            if (ChannelHandlerUtil.unfoldAndAdd(ctx, decodeLast(ctx, in), true)) {, +                if (ChannelHandlerUtil.unfoldAndAdd(ctx, o, true)) {, +++ /dev/null, +++ b/codec/src/main/java/io/netty/handler/codec/MessageToByteEncoder.java, +import io.netty.channel.ChannelHandlerUtil;, +        this.acceptedMsgTypes = ChannelHandlerUtil.acceptedMessageTypes(acceptedMsgTypes);, +                ChannelHandlerUtil.addToNextOutboundBuffer(ctx, msg);, +        return ChannelHandlerUtil.acceptMessage(acceptedMsgTypes, msg);, +++ b/codec/src/main/java/io/netty/handler/codec/ByteToMessageDecoder.java, +import io.netty.channel.ChannelHandlerUtil;, +            if (ChannelHandlerUtil.unfoldAndAdd(ctx, decodeLast(ctx, in), true)) {, +                if (ChannelHandlerUtil.unfoldAndAdd(ctx, o, true)) {, +++ /dev/null, +++ b/codec/src/main/java/io/netty/handler/codec/MessageToByteEncoder.java, +import io.netty.channel.ChannelHandlerUtil;, +        this.acceptedMsgTypes = ChannelHandlerUtil.acceptedMessageTypes(acceptedMsgTypes);, +                ChannelHandlerUtil.addToNextOutboundBuffer(ctx, msg);, +        return ChannelHandlerUtil.acceptMessage(acceptedMsgTypes, msg);, +++ b/codec/src/main/java/io/netty/handler/codec/MessageToMessageCodec.java, +import io.netty.channel.ChannelHandlerUtil;, +        this.acceptedInboundMsgTypes = ChannelHandlerUtil.acceptedMessageTypes(acceptedInboundMsgTypes);, +        this.acceptedOutboundMsgTypes = ChannelHandlerUtil.acceptedMessageTypes(acceptedOutboundMsgTypes);, +        return ChannelHandlerUtil.acceptMessage(acceptedInboundMsgTypes, msg);, +        return ChannelHandlerUtil.acceptMessage(acceptedOutboundMsgTypes, msg);, +++ b/codec/src/main/java/io/netty/handler/codec/ByteToMessageDecoder.java, +import io.netty.channel.ChannelHandlerUtil;, +            if (ChannelHandlerUtil.unfoldAndAdd(ctx, decodeLast(ctx, in), true)) {, +                if (ChannelHandlerUtil.unfoldAndAdd(ctx, o, true)) {, +++ /dev/null, +++ b/codec/src/main/java/io/netty/handler/codec/MessageToByteEncoder.java, +import io.netty.channel.ChannelHandlerUtil;, +        this.acceptedMsgTypes = ChannelHandlerUtil.acceptedMessageTypes(acceptedMsgTypes);, +                ChannelHandlerUtil.addToNextOutboundBuffer(ctx, msg);, +        return ChannelHandlerUtil.acceptMessage(acceptedMsgTypes, msg);, +++ b/codec/src/main/java/io/netty/handler/codec/MessageToMessageCodec.java, +import io.netty.channel.ChannelHandlerUtil;, +        this.acceptedInboundMsgTypes = ChannelHandlerUtil.acceptedMessageTypes(acceptedInboundMsgTypes);, +        this.acceptedOutboundMsgTypes = ChannelHandlerUtil.acceptedMessageTypes(acceptedOutboundMsgTypes);, +        return ChannelHandlerUtil.acceptMessage(acceptedInboundMsgTypes, msg);, +        return ChannelHandlerUtil.acceptMessage(acceptedOutboundMsgTypes, msg);, +++ b/codec/src/main/java/io/netty/handler/codec/MessageToMessageDecoder.java, +import io.netty.channel.ChannelHandlerUtil;, +        this.acceptedMsgTypes = ChannelHandlerUtil.acceptedMessageTypes(acceptedMsgTypes);, +                    ChannelHandlerUtil.addToNextInboundBuffer(ctx, msg);, +                if (ChannelHandlerUtil.unfoldAndAdd(ctx, omsg, true)) {, +        return ChannelHandlerUtil.acceptMessage(acceptedMsgTypes, msg);, +++ b/codec/src/main/java/io/netty/handler/codec/ByteToMessageDecoder.java, +import io.netty.channel.ChannelHandlerUtil;, +            if (ChannelHandlerUtil.unfoldAndAdd(ctx, decodeLast(ctx, in), true)) {, +                if (ChannelHandlerUtil.unfoldAndAdd(ctx, o, true)) {, +++ /dev/null, +++ b/codec/src/main/java/io/netty/handler/codec/MessageToByteEncoder.java, +import io.netty.channel.ChannelHandlerUtil;, +        this.acceptedMsgTypes = ChannelHandlerUtil.acceptedMessageTypes(acceptedMsgTypes);, +                ChannelHandlerUtil.addToNextOutboundBuffer(ctx, msg);, +        return ChannelHandlerUtil.acceptMessage(acceptedMsgTypes, msg);, +++ b/codec/src/main/java/io/netty/handler/codec/MessageToMessageCodec.java, +import io.netty.channel.ChannelHandlerUtil;, +        this.acceptedInboundMsgTypes = ChannelHandlerUtil.acceptedMessageTypes(acceptedInboundMsgTypes);, +        this.acceptedOutboundMsgTypes = ChannelHandlerUtil.acceptedMessageTypes(acceptedOutboundMsgTypes);, +        return ChannelHandlerUtil.acceptMessage(acceptedInboundMsgTypes, msg);, +        return ChannelHandlerUtil.acceptMessage(acceptedOutboundMsgTypes, msg);, +++ b/codec/src/main/java/io/netty/handler/codec/MessageToMessageDecoder.java, +import io.netty.channel.ChannelHandlerUtil;, +        this.acceptedMsgTypes = ChannelHandlerUtil.acceptedMessageTypes(acceptedMsgTypes);, +                    ChannelHandlerUtil.addToNextInboundBuffer(ctx, msg);, +                if (ChannelHandlerUtil.unfoldAndAdd(ctx, omsg, true)) {, +        return ChannelHandlerUtil.acceptMessage(acceptedMsgTypes, msg);, +++ b/codec/src/main/java/io/netty/handler/codec/MessageToMessageEncoder.java, +import io.netty.channel.ChannelHandlerUtil;, +        this.acceptedMsgTypes = ChannelHandlerUtil.acceptedMessageTypes(acceptedMsgTypes);, +                    ChannelHandlerUtil.addToNextOutboundBuffer(ctx, msg);, +                ChannelHandlerUtil.unfoldAndAdd(ctx, omsg, false);, +        return ChannelHandlerUtil.acceptMessage(acceptedMsgTypes, msg);, +++ b/codec/src/main/java/io/netty/handler/codec/ByteToMessageDecoder.java, +import io.netty.channel.ChannelHandlerUtil;, +            if (ChannelHandlerUtil.unfoldAndAdd(ctx, decodeLast(ctx, in), true)) {, +                if (ChannelHandlerUtil.unfoldAndAdd(ctx, o, true)) {, +++ /dev/null, +++ b/codec/src/main/java/io/netty/handler/codec/MessageToByteEncoder.java, +import io.netty.channel.ChannelHandlerUtil;, +        this.acceptedMsgTypes = ChannelHandlerUtil.acceptedMessageTypes(acceptedMsgTypes);, +                ChannelHandlerUtil.addToNextOutboundBuffer(ctx, msg);, +        return ChannelHandlerUtil.acceptMessage(acceptedMsgTypes, msg);, +++ b/codec/src/main/java/io/netty/handler/codec/MessageToMessageCodec.java, +import io.netty.channel.ChannelHandlerUtil;, +        this.acceptedInboundMsgTypes = ChannelHandlerUtil.acceptedMessageTypes(acceptedInboundMsgTypes);, +        this.acceptedOutboundMsgTypes = ChannelHandlerUtil.acceptedMessageTypes(acceptedOutboundMsgTypes);, +        return ChannelHandlerUtil.acceptMessage(acceptedInboundMsgTypes, msg);]