[+++ b/codec/src/test/java/io/netty/handler/codec/compression/AbstractDecoderTest.java, +import org.junit.After;, +    @After, +    public void destroyChannel() {, +        if (channel != null) {, +            channel.finishAndReleaseAll();, +            channel = null;, +        }, +    }, +, +++ b/codec/src/test/java/io/netty/handler/codec/compression/AbstractDecoderTest.java, +import org.junit.After;, +    @After, +    public void destroyChannel() {, +        if (channel != null) {, +            channel.finishAndReleaseAll();, +            channel = null;, +        }, +    }, +, +++ b/codec/src/test/java/io/netty/handler/codec/compression/AbstractEncoderTest.java, +import org.junit.After;, +    @After, +    public void destroyChannel() {, +        if (channel != null) {, +            channel.finishAndReleaseAll();, +            channel = null;, +        }, +    }, +, +++ b/codec/src/test/java/io/netty/handler/codec/compression/AbstractDecoderTest.java, +import org.junit.After;, +    @After, +    public void destroyChannel() {, +        if (channel != null) {, +            channel.finishAndReleaseAll();, +            channel = null;, +        }, +    }, +, +++ b/codec/src/test/java/io/netty/handler/codec/compression/AbstractEncoderTest.java, +import org.junit.After;, +    @After, +    public void destroyChannel() {, +        if (channel != null) {, +            channel.finishAndReleaseAll();, +            channel = null;, +        }, +    }, +, +++ b/codec/src/test/java/io/netty/handler/codec/compression/Bzip2DecoderTest.java, +import static org.junit.Assert.fail;, +    private void writeInboundDestroyAndExpectDecompressionException(ByteBuf in) {, +        try {, +            channel.writeInbound(in);, +        } finally {, +            try {, +                destroyChannel();, +                fail();, +            } catch (DecompressionException ignored) {, +                // expected, +            }, +        }, +    }, +, +        writeInboundDestroyAndExpectDecompressionException(in);, +        writeInboundDestroyAndExpectDecompressionException(in);, +        writeInboundDestroyAndExpectDecompressionException(in);]