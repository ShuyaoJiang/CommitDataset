[+++ b/buffer/src/main/java/io/netty/buffer/CompositeChannelBuffer.java, +, +        // If the list is empty we need to assign a new one because, +        // we get a List that is immutable. , +        //, +        // See https://github.com/netty/netty/issues/325, +        if (list.isEmpty()) {, +            list = new ArrayList<ChannelBuffer>(1);, +        }, +        , +++ b/buffer/src/main/java/io/netty/buffer/CompositeChannelBuffer.java, +, +        // If the list is empty we need to assign a new one because, +        // we get a List that is immutable. , +        //, +        // See https://github.com/netty/netty/issues/325, +        if (list.isEmpty()) {, +            list = new ArrayList<ChannelBuffer>(1);, +        }, +        , +++ b/buffer/src/test/java/io/netty/buffer/AbstractChannelBufferTest.java, +    , +    // Test case for https://github.com/netty/netty/issues/325, +    @Test, +    public void testDiscardAllReadBytes() {, +        buffer.writerIndex(buffer.capacity());, +        buffer.readerIndex(buffer.writerIndex());, +        buffer.discardReadBytes();, +    }]