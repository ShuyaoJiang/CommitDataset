[+++ b/buffer/src/main/java/io/netty/buffer/AbstractMessageBuf.java, +    @SuppressWarnings("unchecked"), +    public boolean unfoldAndAdd(Object o) {, +        if (o == null) {, +            return false;, +        }, +, +        if (o instanceof Object[]) {, +            Object[] a = (Object[]) o;, +            int i;, +            for (i = 0; i < a.length; i ++) {, +                Object m = a[i];, +                if (m == null) {, +                    break;, +                }, +                add((T) m);, +            }, +            return i != 0;, +        }, +, +        return add((T) o);, +    }, +, +    @Override, +++ b/buffer/src/main/java/io/netty/buffer/AbstractMessageBuf.java, +    @SuppressWarnings("unchecked"), +    public boolean unfoldAndAdd(Object o) {, +        if (o == null) {, +            return false;, +        }, +, +        if (o instanceof Object[]) {, +            Object[] a = (Object[]) o;, +            int i;, +            for (i = 0; i < a.length; i ++) {, +                Object m = a[i];, +                if (m == null) {, +                    break;, +                }, +                add((T) m);, +            }, +            return i != 0;, +        }, +, +        return add((T) o);, +    }, +, +    @Override, +++ b/buffer/src/main/java/io/netty/buffer/MessageBuf.java, +     * Unfold the specified object if necessary, and then add the unfolded objects (or the specified object if, +     * unfonding was not necessary) to this buffer. If the specified object is an object array ({@code Object[]}),, +     * this method adds the elements of the array to this buffer until {@code null} is encountered.  If the specified, +     * object is {@code null}, nothing is added to this buffer.  Otherwise, the specified object is added to this, +     * buffer as-is., +     *, +     * @return {@code true} if one or more messages were added to this buffer. {@code false} otherwise., +     */, +    boolean unfoldAndAdd(Object o);, +, +    /**, +++ b/buffer/src/main/java/io/netty/buffer/AbstractMessageBuf.java, +    @SuppressWarnings("unchecked"), +    public boolean unfoldAndAdd(Object o) {, +        if (o == null) {, +            return false;, +        }, +, +        if (o instanceof Object[]) {, +            Object[] a = (Object[]) o;, +            int i;, +            for (i = 0; i < a.length; i ++) {, +                Object m = a[i];, +                if (m == null) {, +                    break;, +                }, +                add((T) m);, +            }, +            return i != 0;, +        }, +, +        return add((T) o);, +    }, +, +    @Override, +++ b/buffer/src/main/java/io/netty/buffer/MessageBuf.java, +     * Unfold the specified object if necessary, and then add the unfolded objects (or the specified object if, +     * unfonding was not necessary) to this buffer. If the specified object is an object array ({@code Object[]}),, +     * this method adds the elements of the array to this buffer until {@code null} is encountered.  If the specified, +     * object is {@code null}, nothing is added to this buffer.  Otherwise, the specified object is added to this, +     * buffer as-is., +     *, +     * @return {@code true} if one or more messages were added to this buffer. {@code false} otherwise., +     */, +    boolean unfoldAndAdd(Object o);, +, +    /**, +++ b/codec/src/main/java/io/netty/handler/codec/ByteToMessageDecoder.java, +import io.netty.buffer.MessageBuf;, +            if (ctx.nextInboundMessageBuffer().unfoldAndAdd(decodeLast(ctx, in))) {, +        MessageBuf<Object> out = ctx.nextInboundMessageBuffer();]