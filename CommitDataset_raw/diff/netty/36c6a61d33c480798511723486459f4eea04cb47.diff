[+++ b/codec-http2/src/main/java/io/netty/handler/codec/http2/DefaultHttp2FrameWriter.java, +            buf.writeInt(exclusive ? (int) (0x80000000L | streamDependency) : streamDependency);, +            buf.writeInt((int) errorCode);, +                buf.writeChar(entry.key());, +                buf.writeInt(entry.value().intValue());, +            buf.writeInt((int) errorCode);, +                buf.writeInt(exclusive ? (int) (0x80000000L | streamDependency) : streamDependency);, +++ b/codec-http2/src/main/java/io/netty/handler/codec/http2/DefaultHttp2FrameWriter.java, +            buf.writeInt(exclusive ? (int) (0x80000000L | streamDependency) : streamDependency);, +            buf.writeInt((int) errorCode);, +                buf.writeChar(entry.key());, +                buf.writeInt(entry.value().intValue());, +            buf.writeInt((int) errorCode);, +                buf.writeInt(exclusive ? (int) (0x80000000L | streamDependency) : streamDependency);, +++ b/codec-http2/src/main/java/io/netty/handler/codec/http2/Http2ClientUpgradeCodec.java, +import static io.netty.handler.codec.base64.Base64Dialect.URL_SAFE;, +import static io.netty.handler.codec.http2.Http2CodecUtil.HTTP_UPGRADE_PROTOCOL_NAME;, +import static io.netty.handler.codec.http2.Http2CodecUtil.HTTP_UPGRADE_SETTINGS_HEADER;, +import static io.netty.handler.codec.http2.Http2CodecUtil.SETTING_ENTRY_LENGTH;, +import static io.netty.util.CharsetUtil.UTF_8;, +import static io.netty.util.ReferenceCountUtil.release;, +import static io.netty.util.internal.ObjectUtil.checkNotNull;, +, +                buf.writeChar(entry.key());, +                buf.writeInt(entry.value().intValue());, +++ b/codec-http2/src/main/java/io/netty/handler/codec/http2/DefaultHttp2FrameWriter.java, +            buf.writeInt(exclusive ? (int) (0x80000000L | streamDependency) : streamDependency);, +            buf.writeInt((int) errorCode);, +                buf.writeChar(entry.key());, +                buf.writeInt(entry.value().intValue());, +            buf.writeInt((int) errorCode);, +                buf.writeInt(exclusive ? (int) (0x80000000L | streamDependency) : streamDependency);, +++ b/codec-http2/src/main/java/io/netty/handler/codec/http2/Http2ClientUpgradeCodec.java, +import static io.netty.handler.codec.base64.Base64Dialect.URL_SAFE;, +import static io.netty.handler.codec.http2.Http2CodecUtil.HTTP_UPGRADE_PROTOCOL_NAME;, +import static io.netty.handler.codec.http2.Http2CodecUtil.HTTP_UPGRADE_SETTINGS_HEADER;, +import static io.netty.handler.codec.http2.Http2CodecUtil.SETTING_ENTRY_LENGTH;, +import static io.netty.util.CharsetUtil.UTF_8;, +import static io.netty.util.ReferenceCountUtil.release;, +import static io.netty.util.internal.ObjectUtil.checkNotNull;, +, +                buf.writeChar(entry.key());, +                buf.writeInt(entry.value().intValue());, +++ b/codec-http2/src/main/java/io/netty/handler/codec/http2/Http2CodecUtil.java, +    public static final short MAX_UNSIGNED_BYTE = 0xff;, +    public static final long MAX_UNSIGNED_INT = 0xffffffffL;, +    public static final int MAX_FRAME_SIZE_UPPER_BOUND = 0xffffff;, +        return buf.readInt() & 0x7fffffff;, +++ b/codec-http2/src/main/java/io/netty/handler/codec/http2/DefaultHttp2FrameWriter.java, +            buf.writeInt(exclusive ? (int) (0x80000000L | streamDependency) : streamDependency);, +            buf.writeInt((int) errorCode);, +                buf.writeChar(entry.key());, +                buf.writeInt(entry.value().intValue());, +            buf.writeInt((int) errorCode);, +                buf.writeInt(exclusive ? (int) (0x80000000L | streamDependency) : streamDependency);, +++ b/codec-http2/src/main/java/io/netty/handler/codec/http2/Http2ClientUpgradeCodec.java, +import static io.netty.handler.codec.base64.Base64Dialect.URL_SAFE;, +import static io.netty.handler.codec.http2.Http2CodecUtil.HTTP_UPGRADE_PROTOCOL_NAME;, +import static io.netty.handler.codec.http2.Http2CodecUtil.HTTP_UPGRADE_SETTINGS_HEADER;, +import static io.netty.handler.codec.http2.Http2CodecUtil.SETTING_ENTRY_LENGTH;, +import static io.netty.util.CharsetUtil.UTF_8;, +import static io.netty.util.ReferenceCountUtil.release;, +import static io.netty.util.internal.ObjectUtil.checkNotNull;, +, +                buf.writeChar(entry.key());, +                buf.writeInt(entry.value().intValue());, +++ b/codec-http2/src/main/java/io/netty/handler/codec/http2/Http2CodecUtil.java, +    public static final short MAX_UNSIGNED_BYTE = 0xff;, +    public static final long MAX_UNSIGNED_INT = 0xffffffffL;, +    public static final int MAX_FRAME_SIZE_UPPER_BOUND = 0xffffff;, +        return buf.readInt() & 0x7fffffff;, +++ b/codec-http2/src/test/java/io/netty/handler/codec/http2/DefaultHttp2FrameReaderTest.java, +            headerBlock.writeInt(streamDependency);, +        output.writeInt(streamDependency);]