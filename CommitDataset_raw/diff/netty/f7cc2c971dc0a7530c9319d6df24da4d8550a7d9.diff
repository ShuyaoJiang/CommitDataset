[+++ b/src/main/java/org/jboss/netty/channel/local/LocalChannel.java, +            if (pairedChannel == null || !pairedChannel.setClosed()) {, +        if (isConnected()){, +            // Channel is open and connected and channelConnected event has, +            // been fired., +, +            return;, +        }, +, +        if (pairedChannel != null) {, +            // Channel is open and connected but channelConnected event has, +            // not been fired yet., +            return;, +        }, +, +        if (pairedChannel == null || !isOpen()) {, +            // Channel is closed or not connected yet - notify as failures., +            Exception cause;, +            if (isOpen()) {, +                cause = new NotYetConnectedException();, +            } else {, +                cause = new ClosedChannelException();, +            }, +, +            for (;;) {, +                MessageEvent e = writeBuffer.poll();, +                if(e == null) {, +                    break;, +                }, +, +                e.getFuture().setFailure(cause);, +                fireExceptionCaught(this, cause);, +            }]