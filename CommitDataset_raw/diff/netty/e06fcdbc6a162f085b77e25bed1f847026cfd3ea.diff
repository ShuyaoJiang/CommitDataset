[+++ b/handler/src/main/java/io/netty/handler/ssl/SslHandler.java, +        try {, +            if (msgs.isEmpty()) {, +                // if the MessageList is empty we need to add an empty buffer as pending write as otherwise, +                // the promise will never be notified., +                // See https://github.com/netty/netty/issues/1475, +                pendingUnencryptedWrites.add(new PendingWrite(Unpooled.EMPTY_BUFFER, promise));, +            } else {, +            }, +        } finally {, +            msgs.recycle();, +        }, +++ b/handler/src/main/java/io/netty/handler/ssl/SslHandler.java, +        try {, +            if (msgs.isEmpty()) {, +                // if the MessageList is empty we need to add an empty buffer as pending write as otherwise, +                // the promise will never be notified., +                // See https://github.com/netty/netty/issues/1475, +                pendingUnencryptedWrites.add(new PendingWrite(Unpooled.EMPTY_BUFFER, promise));, +            } else {, +            }, +        } finally {, +            msgs.recycle();, +        }, +++ b/testsuite/src/test/java/io/netty/testsuite/transport/socket/SocketSslEchoTest.java]