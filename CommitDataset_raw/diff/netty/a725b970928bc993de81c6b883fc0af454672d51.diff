[+++ b/resolver-dns/src/main/java/io/netty/resolver/dns/DnsNameResolver.java, +import io.netty.util.internal.PlatformDependent;, +    private static final String LOCALHOST = "localhost";, +    private static final InetAddress LOCALHOST_ADDRESS;, +            LOCALHOST_ADDRESS = NetUtil.LOCALHOST6;, +            LOCALHOST_ADDRESS = NetUtil.LOCALHOST4;, +        if (hostsFileEntriesResolver == null) {, +            return null;, +        } else {, +            InetAddress address = hostsFileEntriesResolver.address(hostname);, +            if (address == null && PlatformDependent.isWindows() && LOCALHOST.equalsIgnoreCase(hostname)) {, +                // If we tried to resolve localhost we need workaround that windows removed localhost from its, +                // hostfile in later versions., +                // See https://github.com/netty/netty/issues/5386, +                return LOCALHOST_ADDRESS;, +            }, +            return address;, +        }]