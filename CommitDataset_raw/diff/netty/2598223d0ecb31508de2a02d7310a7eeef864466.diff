[+++ b/codec-http/src/main/java/io/netty/handler/codec/http/websocketx/WebSocketServerProtocolHandler.java, +            if (handshaker != null) {, +            } else {, +                ctx.writeAndFlush(Unpooled.EMPTY_BUFFER).addListener(ChannelFutureListener.CLOSE);, +            }, +                    ((FullHttpRequest) msg).release();, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/websocketx/WebSocketServerProtocolHandler.java, +            if (handshaker != null) {, +            } else {, +                ctx.writeAndFlush(Unpooled.EMPTY_BUFFER).addListener(ChannelFutureListener.CLOSE);, +            }, +                    ((FullHttpRequest) msg).release();, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/websocketx/WebSocketServerProtocolHandshakeHandler.java, +    WebSocketServerProtocolHandshakeHandler(String websocketPath, String subprotocols,, +        try {, +        } finally {, +            req.release();, +        }]