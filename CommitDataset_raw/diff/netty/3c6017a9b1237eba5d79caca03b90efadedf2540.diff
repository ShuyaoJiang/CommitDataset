[+++ b/NOTICE.txt, +This product optionally depends on 'Compress-LZF', a Java library for encoding and, +decoding data in LZF format, written by Tatu Saloranta. It can be obtained at:, +, +  * LICENSE:, +    * license/LICENSE.compress-lzf.txt (Apache License 2.0), +  * HOMEPAGE:, +    * https://github.com/ning/compress, +, +++ b/NOTICE.txt, +This product optionally depends on 'Compress-LZF', a Java library for encoding and, +decoding data in LZF format, written by Tatu Saloranta. It can be obtained at:, +, +  * LICENSE:, +    * license/LICENSE.compress-lzf.txt (Apache License 2.0), +  * HOMEPAGE:, +    * https://github.com/ning/compress, +, +++ b/codec/pom.xml, +    <dependency>, +      <groupId>com.ning</groupId>, +      <artifactId>compress-lzf</artifactId>, +      <optional>true</optional>, +    </dependency>, +++ b/NOTICE.txt, +This product optionally depends on 'Compress-LZF', a Java library for encoding and, +decoding data in LZF format, written by Tatu Saloranta. It can be obtained at:, +, +  * LICENSE:, +    * license/LICENSE.compress-lzf.txt (Apache License 2.0), +  * HOMEPAGE:, +    * https://github.com/ning/compress, +, +++ b/codec/pom.xml, +    <dependency>, +      <groupId>com.ning</groupId>, +      <artifactId>compress-lzf</artifactId>, +      <optional>true</optional>, +    </dependency>, +++ b/codec/src/main/java/io/netty/handler/codec/compression/LzfDecoder.java, +/*, + * Copyright 2014 The Netty Project, + *, + * The Netty Project licenses this file to you under the Apache License,, + * version 2.0 (the "License"); you may not use this file except in compliance, + * with the License. You may obtain a copy of the License at:, + *, + *   http://www.apache.org/licenses/LICENSE-2.0, + *, + * Unless required by applicable law or agreed to in writing, software, + * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT, + * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the, + * License for the specific language governing permissions and limitations, + * under the License., + */, +package io.netty.handler.codec.compression;, +, +import com.ning.compress.BufferRecycler;, +import com.ning.compress.lzf.ChunkDecoder;, +import com.ning.compress.lzf.util.ChunkDecoderFactory;, +import io.netty.buffer.ByteBuf;, +import io.netty.channel.ChannelHandlerContext;, +import io.netty.handler.codec.ByteToMessageDecoder;, +, +import java.util.List;, +, +import static com.ning.compress.lzf.LZFChunk.BYTE_Z;, +import static com.ning.compress.lzf.LZFChunk.BYTE_V;, +import static com.ning.compress.lzf.LZFChunk.MAX_HEADER_LEN;, +import static com.ning.compress.lzf.LZFChunk.HEADER_LEN_COMPRESSED;, +import static com.ning.compress.lzf.LZFChunk.HEADER_LEN_NOT_COMPRESSED;, +import static com.ning.compress.lzf.LZFChunk.BLOCK_TYPE_NON_COMPRESSED;, +import static com.ning.compress.lzf.LZFChunk.BLOCK_TYPE_COMPRESSED;, +, +/**, + * Uncompresses a {@link ByteBuf} encoded with the LZF format., + *, + * See original <a href="http://oldhome.schmorp.de/marc/liblzf.html">LZF package</a>, + * and <a href="https://github.com/ning/compress/wiki/LZFFormat">LZF format</a> for full description., + */, +public class LzfDecoder extends ByteToMessageDecoder {, +    /**, +     * A brief signature for content auto-detection., +     */, +    private static final short SIGNATURE_OF_CHUNK = BYTE_Z << 8 | BYTE_V;, +, +    /**, +     * Offset to the "Type" in chunk header., +     */, +    private static final int TYPE_OFFSET = 2;, +, +    /**, +     * Offset to the "ChunkLength" in chunk header., +     */, +    private static final int CHUNK_LENGTH_OFFSET = 3;, +, +    /**, +     * Offset to the "OriginalLength" in chunk header., +     */, +    private static final int ORIGINAL_LENGTH_OFFSET = 5;]