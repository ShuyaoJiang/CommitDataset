[+++ b/transport/src/main/java/io/netty/channel/group/DefaultChannelGroup.java, +import io.netty.buffer.ByteBuf;, +import io.netty.buffer.ByteBufHolder;, +            futures.put(c.id(), c.write(safeDuplicate(message)));, +            int size = messages.size();, +            MessageList<Object> messageCopy = MessageList.newInstance(size);, +            for (int i = 0 ; i < size; i++) {, +                messageCopy.add(safeDuplicate(messages.get(i)));, +            }, +            futures.put(c.id(), c.write(messageCopy));, +    // Create a safe duplicate of the message to write it to a channel but not affect other writes., +    // See https://github.com/netty/netty/issues/1461, +    private static Object safeDuplicate(Object message) {, +        if (message instanceof ByteBuf) {, +            return ((ByteBuf) message).duplicate().retain();, +        } else if (message instanceof ByteBufHolder) {, +            return ((ByteBufHolder) message).copy();, +        } else {, +            return ReferenceCountUtil.retain(message);, +        }, +    }, +]