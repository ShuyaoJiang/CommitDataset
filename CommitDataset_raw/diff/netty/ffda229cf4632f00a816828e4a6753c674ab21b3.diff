[+++ b/codec-http/src/main/java/io/netty/handler/codec/http/websocketx/WebSocket08FrameDecoder.java, +                            checkCloseFrameBody(ctx, payloadBuffer);, +            Object closeMessage;, +            if (receivedClosingHandshake) {, +                closeMessage = Unpooled.EMPTY_BUFFER;, +            } else {, +                closeMessage = new CloseWebSocketFrame(1002, null);, +            }, +            ctx.writeAndFlush(closeMessage).addListener(ChannelFutureListener.CLOSE);]