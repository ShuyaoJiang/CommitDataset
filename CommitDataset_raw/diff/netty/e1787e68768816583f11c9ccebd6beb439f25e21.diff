[+++ b/resolver-dns/src/main/java/io/netty/resolver/dns/DnsNameResolver.java, +        DnsCacheEntry oldEntry = queryCache.put(question, entry);, +        if (oldEntry != null) {, +            oldEntry.release();, +        }, +, +                    clearCache(question);, +                clearCache(question);, +, +                    Promise<DnsResponse> qPromise = qCtx.promise();, +                    if (qPromise.setUncancellable()) {, +                        qPromise.setSuccess(res.retain());, +                    }, +++ b/resolver-dns/src/main/java/io/netty/resolver/dns/DnsNameResolver.java, +        DnsCacheEntry oldEntry = queryCache.put(question, entry);, +        if (oldEntry != null) {, +            oldEntry.release();, +        }, +, +                    clearCache(question);, +                clearCache(question);, +, +                    Promise<DnsResponse> qPromise = qCtx.promise();, +                    if (qPromise.setUncancellable()) {, +                        qPromise.setSuccess(res.retain());, +                    }, +++ b/resolver-dns/src/test/java/io/netty/resolver/dns/DnsNameResolverTest.java, +import org.junit.After;, +    @After, +    public void reset() throws Exception {]