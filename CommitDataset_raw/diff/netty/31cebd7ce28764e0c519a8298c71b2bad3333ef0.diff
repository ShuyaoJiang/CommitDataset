[+++ b/transport/src/main/java/io/netty/channel/socket/aio/AioServerSocketChannel.java, +    private boolean closed;, +        if (!closed) {, +            closed = true;, +                channel.closed = true;, +++ b/transport/src/main/java/io/netty/channel/socket/aio/AioServerSocketChannel.java, +    private boolean closed;, +        if (!closed) {, +            closed = true;, +                channel.closed = true;, +++ b/transport/src/main/java/io/netty/channel/socket/aio/AioSocketChannel.java, +    private boolean closed;, +    private boolean flushing;, +        if (!closed) {, +            closed = true;, +        if (!flushing) {, +            flushing = true;, +            channel.flushing = false;, +                channel.closed = true;, +            channel.flushing = false;, +                    channel.closed = true;, +                channel.closed = true;, +                channel.closed = true;]