[+++ b/codec/src/main/java/io/netty/handler/codec/compression/SnappyFramedEncoder.java, +                if (dataLength > Short.MAX_VALUE) {, +                    ByteBuf slice = in.readSlice(Short.MAX_VALUE);, +                    snappy.encode(slice, out, Short.MAX_VALUE);, +                    dataLength -= Short.MAX_VALUE;]