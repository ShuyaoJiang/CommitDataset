[+++ b/common/src/main/java/io/netty/util/internal/logging/Log4J2Logger.java, +import java.security.AccessController;, +import java.security.PrivilegedAction;, +, +    private static final boolean VARARGS_ONLY;, +, +    static {, +        // Older Log4J2 versions have only log methods that takes the format + varargs. So we should not use, +        // Log4J2 if the version is too old., +        // See https://github.com/netty/netty/issues/8217, +        VARARGS_ONLY = AccessController.doPrivileged(new PrivilegedAction<Boolean>() {, +            @Override, +            public Boolean run() {, +                try {, +                    Logger.class.getMethod("debug", String.class, Object.class);, +                    return false;, +                } catch (NoSuchMethodException ignore) {, +                    // Log4J2 version too old., +                    return true;, +                } catch (SecurityException ignore) {, +                    // We could not detect the version so we will use Log4J2 if its on the classpath., +                    return false;, +                }, +            }, +        });, +    }, +        if (VARARGS_ONLY) {, +            throw new UnsupportedOperationException("Log4J2 version mismatch");, +        }]