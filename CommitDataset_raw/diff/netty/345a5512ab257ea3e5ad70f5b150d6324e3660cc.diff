[+++ b/src/main/java/org/jboss/netty/handler/codec/frame/FrameDecoder.java, +            ChannelBuffer cumulation = this.cumulation.getAndSet(null);, +            if (cumulation == null) {, +                return;, +            }, +, +++ b/src/main/java/org/jboss/netty/handler/codec/frame/FrameDecoder.java, +            ChannelBuffer cumulation = this.cumulation.getAndSet(null);, +            if (cumulation == null) {, +                return;, +            }, +, +++ b/src/main/java/org/jboss/netty/handler/codec/replay/ReplayingDecoder.java, +        ChannelBuffer cumulation = this.cumulation.get();, +        if (cumulation != null) {, +            checkpoint = cumulation.readerIndex();, +        } else {, +            checkpoint = -1; // buffer not available (already cleaned up), +        }, +        checkpoint();, +        setState(state);, +                int checkpoint = this.checkpoint;, +                if (checkpoint >= 0) {, +                } else {, +                    // Called by cleanup() - no need to maintain the readerIndex, +                    // anymore because the buffer has been released already., +                }, +            ChannelBuffer cumulation = this.cumulation.getAndSet(null);, +            if (cumulation == null) {, +                return;, +            }, +, +            replayable.terminate();, +]