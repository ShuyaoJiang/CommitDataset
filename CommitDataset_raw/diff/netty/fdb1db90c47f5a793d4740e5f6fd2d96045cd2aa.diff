[+++ b/transport/src/main/java/io/netty/channel/AbstractChannel.java, +            ChannelOutboundBuffer outboundBuffer = this.outboundBuffer;, +            if (outboundBuffer == null) {, +                // If the outboundBuffer is null we know the channel was closed and so, +                // need to fail the future right away. If it is not null the handling of the rest, +                // will be done in flush0(), +                // See https://github.com/netty/netty/issues/2362, +                return;, +            outboundBuffer.addMessage(msg, promise);]