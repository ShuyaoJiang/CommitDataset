[+++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/AbstractEpollStreamChannel.java, +            IovArray array = ((EpollEventLoop) eventLoop()).cleanIovArray();, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/AbstractEpollStreamChannel.java, +            IovArray array = ((EpollEventLoop) eventLoop()).cleanIovArray();, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/EpollDatagramChannel.java, +                    NativeDatagramPacketArray array = ((EpollEventLoop) eventLoop()).cleanDatagramPacketArray();, +                    in.forEachFlushedMessage(array);, +            IovArray array = ((EpollEventLoop) eventLoop()).cleanIovArray();, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/AbstractEpollStreamChannel.java, +            IovArray array = ((EpollEventLoop) eventLoop()).cleanIovArray();, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/EpollDatagramChannel.java, +                    NativeDatagramPacketArray array = ((EpollEventLoop) eventLoop()).cleanDatagramPacketArray();, +                    in.forEachFlushedMessage(array);, +            IovArray array = ((EpollEventLoop) eventLoop()).cleanIovArray();, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/EpollEventLoop.java, +    private final NativeDatagramPacketArray datagramPacketArray = new NativeDatagramPacketArray();, +, +    IovArray cleanIovArray() {, +    /**, +     * Return a cleared {@link NativeDatagramPacketArray} that can be used for writes in this {@link EventLoop}., +     */, +    NativeDatagramPacketArray cleanDatagramPacketArray() {, +        datagramPacketArray.clear();, +        return datagramPacketArray;, +    }, +, +            datagramPacketArray.release();, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/AbstractEpollStreamChannel.java, +            IovArray array = ((EpollEventLoop) eventLoop()).cleanIovArray();, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/EpollDatagramChannel.java, +                    NativeDatagramPacketArray array = ((EpollEventLoop) eventLoop()).cleanDatagramPacketArray();, +                    in.forEachFlushedMessage(array);, +            IovArray array = ((EpollEventLoop) eventLoop()).cleanIovArray();, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/EpollEventLoop.java, +    private final NativeDatagramPacketArray datagramPacketArray = new NativeDatagramPacketArray();, +, +    IovArray cleanIovArray() {, +    /**, +     * Return a cleared {@link NativeDatagramPacketArray} that can be used for writes in this {@link EventLoop}., +     */, +    NativeDatagramPacketArray cleanDatagramPacketArray() {, +        datagramPacketArray.clear();, +        return datagramPacketArray;, +    }, +, +            datagramPacketArray.release();, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/NativeDatagramPacketArray.java, +    NativeDatagramPacketArray() {, +    public boolean processMessage(Object msg) {, +    void clear() {, +        this.count = 0;, +    }, +, +    void release() {, +        // Release all packets, +        for (NativeDatagramPacket datagramPacket : packets) {, +            datagramPacket.release();, +        }]