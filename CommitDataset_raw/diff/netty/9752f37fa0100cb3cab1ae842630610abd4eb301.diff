[+++ b/transport/src/main/java/io/netty/channel/DefaultChannelPipeline.java, +        if (first == tail) {, +++ b/transport/src/main/java/io/netty/channel/DefaultChannelPipeline.java, +        if (first == tail) {, +++ b/transport/src/test/java/io/netty/channel/DefaultChannelPipelineTest.java, +    @Test, +    public void testFirstContextEmptyPipeline() throws Exception {, +        ChannelPipeline pipeline = new LocalChannel().pipeline();, +        assertNull(pipeline.firstContext());, +    }, +, +    @Test, +    public void testLastContextEmptyPipeline() throws Exception {, +        ChannelPipeline pipeline = new LocalChannel().pipeline();, +        assertNull(pipeline.lastContext());, +    }, +, +    @Test, +    public void testFirstHandlerEmptyPipeline() throws Exception {, +        ChannelPipeline pipeline = new LocalChannel().pipeline();, +        assertNull(pipeline.first());, +    }, +, +    @Test, +    public void testLastHandlerEmptyPipeline() throws Exception {, +        ChannelPipeline pipeline = new LocalChannel().pipeline();, +        assertNull(pipeline.last());, +    }, +]