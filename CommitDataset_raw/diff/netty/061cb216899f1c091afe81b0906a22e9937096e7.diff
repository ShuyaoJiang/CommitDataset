[+++ b/transport/src/main/java/io/netty/channel/ChannelOutboundBuffer.java, +        long newWriteBufferSize = TOTAL_PENDING_SIZE_UPDATER.addAndGet(this, size);, +        if (newWriteBufferSize > channel.config().getWriteBufferHighWaterMark()) {, +        long newWriteBufferSize = TOTAL_PENDING_SIZE_UPDATER.addAndGet(this, -size);, +        if (newWriteBufferSize == 0 || newWriteBufferSize < channel.config().getWriteBufferLowWaterMark()) {, +                TOTAL_PENDING_SIZE_UPDATER.addAndGet(this, -size);]