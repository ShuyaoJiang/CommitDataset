[+++ b/buffer/src/test/java/io/netty/buffer/PooledByteBufAllocatorTest.java, +        ThreadCache tcache0 = createNewThreadCache(allocator);, +        ThreadCache tcache1 = createNewThreadCache(allocator);, +        tcache0.destroy();, +        tcache1.destroy();, +        ThreadCache tcache0 = createNewThreadCache(allocator);, +        ThreadCache tcache1 = createNewThreadCache(allocator);, +        tcache1.destroy();, +, +        ThreadCache tcache2 = createNewThreadCache(allocator);, +        tcache0.destroy();, +        tcache2.destroy();, +    private static ThreadCache createNewThreadCache(final PooledByteBufAllocator allocator), +        final Thread t = new FastThreadLocalThread(new Runnable() {, +        return new ThreadCache() {, +            @Override, +            public void destroy() throws InterruptedException {, +                latch.countDown();, +                t.join();, +            }, +        };, +    }, +, +    private interface ThreadCache {, +        void destroy() throws InterruptedException;]