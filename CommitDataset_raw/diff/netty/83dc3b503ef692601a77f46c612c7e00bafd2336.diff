[+++ b/buffer/src/main/java/io/netty/buffer/ByteBufInputStream.java, +import io.netty.util.internal.StringUtil;, +    private StringBuilder lineBuf;, +        if (lineBuf != null) {, +        }, +, +        boolean anyChar = false;, +                return toStringIfAnyChar(lineBuf, anyChar);, +            anyChar = true;, +                    if (lineBuf == null) {, +                        lineBuf = new StringBuilder();, +                    }, +        return lineBuf != null && lineBuf.length() > 0 ? lineBuf.toString() : StringUtil.EMPTY_STRING;, +    }, +, +    private static String toStringIfAnyChar(StringBuilder lineBuf, boolean anyChars) {, +        if (anyChars) {, +            return lineBuf != null && lineBuf.length() > 0 ? lineBuf.toString() : StringUtil.EMPTY_STRING;, +        } else {, +            return null;, +        }, +++ b/buffer/src/main/java/io/netty/buffer/ByteBufInputStream.java, +import io.netty.util.internal.StringUtil;, +    private StringBuilder lineBuf;, +        if (lineBuf != null) {, +        }, +, +        boolean anyChar = false;, +                return toStringIfAnyChar(lineBuf, anyChar);, +            anyChar = true;, +                    if (lineBuf == null) {, +                        lineBuf = new StringBuilder();, +                    }, +        return lineBuf != null && lineBuf.length() > 0 ? lineBuf.toString() : StringUtil.EMPTY_STRING;, +    }, +, +    private static String toStringIfAnyChar(StringBuilder lineBuf, boolean anyChars) {, +        if (anyChars) {, +            return lineBuf != null && lineBuf.length() > 0 ? lineBuf.toString() : StringUtil.EMPTY_STRING;, +        } else {, +            return null;, +        }, +++ b/buffer/src/test/java/io/netty/buffer/ByteBufStreamTest.java, +        int charCount = 7; //total chars in the string below without new line characters, +        byte[] abc = "\na\n\nb\r\nc\nd\ne".getBytes(utf8);, +        assertEquals("", in.readLine());, +        assertEquals("", in.readLine());]