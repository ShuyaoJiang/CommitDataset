[+++ b/codec/src/main/java/io/netty/handler/codec/compression/JZlibEncoder.java, +import com.jcraft.jzlib.Deflater;, +import com.jcraft.jzlib.JZlib;, +                    future.setFailure(ZlibUtil.deflaterException(z, "compression failure", resultCode));, +++ b/codec/src/main/java/io/netty/handler/codec/compression/JZlibEncoder.java, +import com.jcraft.jzlib.Deflater;, +import com.jcraft.jzlib.JZlib;, +                    future.setFailure(ZlibUtil.deflaterException(z, "compression failure", resultCode));, +++ b/codec/src/main/java/io/netty/handler/codec/compression/ZlibUtil.java, +import com.jcraft.jzlib.Deflater;, +import com.jcraft.jzlib.Inflater;, +    static void fail(Inflater z, String message, int resultCode) {, +        throw inflaterException(z, message, resultCode);, +    static void fail(Deflater z, String message, int resultCode) {, +        throw deflaterException(z, message, resultCode);, +    }, +, +    static CompressionException inflaterException(Inflater z, String message, int resultCode) {, +        return new CompressionException(message + " (" + resultCode + ')' + (z.msg != null? ": " + z.msg : ""));, +    }, +, +    static CompressionException deflaterException(Deflater z, String message, int resultCode) {, +        return new CompressionException(message + " (" + resultCode + ')' + (z.msg != null? ": " + z.msg : ""));, +++ b/codec/src/main/java/io/netty/handler/codec/compression/JZlibEncoder.java, +import com.jcraft.jzlib.Deflater;, +import com.jcraft.jzlib.JZlib;, +                    future.setFailure(ZlibUtil.deflaterException(z, "compression failure", resultCode));, +++ b/codec/src/main/java/io/netty/handler/codec/compression/ZlibUtil.java, +import com.jcraft.jzlib.Deflater;, +import com.jcraft.jzlib.Inflater;, +    static void fail(Inflater z, String message, int resultCode) {, +        throw inflaterException(z, message, resultCode);, +    static void fail(Deflater z, String message, int resultCode) {, +        throw deflaterException(z, message, resultCode);, +    }, +, +    static CompressionException inflaterException(Inflater z, String message, int resultCode) {, +        return new CompressionException(message + " (" + resultCode + ')' + (z.msg != null? ": " + z.msg : ""));, +    }, +, +    static CompressionException deflaterException(Deflater z, String message, int resultCode) {, +        return new CompressionException(message + " (" + resultCode + ')' + (z.msg != null? ": " + z.msg : ""));, +++ b/common/src/main/java/io/netty/util/concurrent/DefaultPromise.java, +    @SuppressWarnings("unchecked"), +    @SuppressWarnings("unchecked")]