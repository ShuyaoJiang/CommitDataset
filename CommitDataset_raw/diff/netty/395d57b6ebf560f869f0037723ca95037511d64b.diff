[+++ b/src/main/java/org/jboss/netty/example/http/HttpClient.java, +import org.jboss.netty.handler.codec.http.CookieEncoder;, +, +import java.net.InetSocketAddress;, +import java.net.URI;, +import java.util.concurrent.Executors;, +        CookieEncoder httpCookieEncoder = new CookieEncoder(2);, +++ b/src/main/java/org/jboss/netty/example/http/HttpClient.java, +import org.jboss.netty.handler.codec.http.CookieEncoder;, +, +import java.net.InetSocketAddress;, +import java.net.URI;, +import java.util.concurrent.Executors;, +        CookieEncoder httpCookieEncoder = new CookieEncoder(2);, +++ b/src/main/java/org/jboss/netty/example/http/HttpRequestHandler.java, +import java.util.List;, +import java.util.Map;, +import java.util.Map.Entry;, +, +                CookieEncoder cookieEncoder = new CookieEncoder(2);, +++ b/src/main/java/org/jboss/netty/example/http/HttpClient.java, +import org.jboss.netty.handler.codec.http.CookieEncoder;, +, +import java.net.InetSocketAddress;, +import java.net.URI;, +import java.util.concurrent.Executors;, +        CookieEncoder httpCookieEncoder = new CookieEncoder(2);, +++ b/src/main/java/org/jboss/netty/example/http/HttpRequestHandler.java, +import java.util.List;, +import java.util.Map;, +import java.util.Map.Entry;, +, +                CookieEncoder cookieEncoder = new CookieEncoder(2);, +++ b/src/main/java/org/jboss/netty/handler/codec/http/Cookie.java, +    String getCommentURL();, +    void setCommentURL(String commentURL);, +    boolean isDiscard();, +    void setDiscard(boolean discard);, +    int[] getPortList();, +    void setPortList(int[] portList);, +++ b/src/main/java/org/jboss/netty/example/http/HttpClient.java, +import org.jboss.netty.handler.codec.http.CookieEncoder;, +, +import java.net.InetSocketAddress;, +import java.net.URI;, +import java.util.concurrent.Executors;, +        CookieEncoder httpCookieEncoder = new CookieEncoder(2);, +++ b/src/main/java/org/jboss/netty/example/http/HttpRequestHandler.java, +import java.util.List;, +import java.util.Map;, +import java.util.Map.Entry;, +, +                CookieEncoder cookieEncoder = new CookieEncoder(2);, +++ b/src/main/java/org/jboss/netty/handler/codec/http/Cookie.java, +    String getCommentURL();, +    void setCommentURL(String commentURL);, +    boolean isDiscard();, +    void setDiscard(boolean discard);, +    int[] getPortList();, +    void setPortList(int[] portList);, +++ b/src/main/java/org/jboss/netty/handler/codec/http/CookieEncoder.java, +import org.jboss.netty.util.CaseIgnoringComparator;, +, +    private final int encodingVersion;, +, +        this(QueryStringDecoder.DEFAULT_CHARSET, 0);, +    }, +, +    public CookieEncoder(int encodingVersion) {, +        this(QueryStringDecoder.DEFAULT_CHARSET, encodingVersion);, +        this(charset, 0);, +    }, +, +    public CookieEncoder(String charset, int encodingVersion) {, +        if (encodingVersion < 0 || encodingVersion > 2) {, +            throw new IllegalArgumentException("encoding version must be 0,1 or 2");, +        }, +        this.encodingVersion = encodingVersion;, +            Cookie cookie = cookies.get(cookieName);, +            add(sb, cookieName, QueryStringEncoder.encodeComponent(cookie.getValue(), charset));, +, +            add(sb, CookieHeaderNames.getMaxAgeString(encodingVersion), cookie.getMaxAge());, +, +            if (cookie.getPath() != null) {, +                add(sb, CookieHeaderNames.PATH, QueryStringEncoder.encodeComponent(cookie.getPath(), charset));, +            }, +, +            if (cookie.getDomain() != null) {, +                add(sb, CookieHeaderNames.DOMAIN, QueryStringEncoder.encodeComponent(cookie.getDomain(), charset));, +            }, +            if (cookie.isSecure()) {, +                    sb.append(CookieHeaderNames.SECURE);, +            if (encodingVersion >= 1) {, +                if (cookie.getComment() != null) {, +                    add(sb, CookieHeaderNames.COMMENT, QueryStringEncoder.encodeComponent(cookie.getComment(), charset));, +                }, +, +                add(sb, CookieHeaderNames.VERSION, encodingVersion);, +            }, +]