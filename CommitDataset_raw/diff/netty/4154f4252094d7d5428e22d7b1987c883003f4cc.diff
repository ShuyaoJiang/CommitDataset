[+++ b/transport/src/main/java/io/netty/channel/SingleThreadEventLoop.java, +    public void addShutdownHook(final Runnable task) {, +        if (inEventLoop()) {, +            shutdownHooks.add(task);, +        } else {, +            execute(new Runnable() {, +                @Override, +                public void run() {, +            });, +        }, +    public void removeShutdownHook(final Runnable task) {, +        if (inEventLoop()) {, +            shutdownHooks.remove(task);, +        } else {, +            execute(new Runnable() {, +                @Override, +                public void run() {, +                    shutdownHooks.remove(task);, +                }, +            });]