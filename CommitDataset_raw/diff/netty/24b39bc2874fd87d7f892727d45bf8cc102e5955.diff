[+++ b/buffer/src/main/java/io/netty/buffer/PoolThreadCache.java, +    private final Thread deathWatchThread;, +    private final Runnable freeTask;, +    private int allocations;, +        // We only need to watch the thread when any cache is used., +        if (tinySubPageDirectCaches != null || smallSubPageDirectCaches != null || normalDirectCaches != null, +                || tinySubPageHeapCaches != null || smallSubPageHeapCaches != null || normalHeapCaches != null) {, +            freeTask = new Runnable() {, +                @Override, +                public void run() {, +                    free0();, +                }, +            };, +, +            deathWatchThread = Thread.currentThread();, +, +            ThreadDeathWatcher.watch(deathWatchThread, freeTask);, +        } else {, +            freeTask = null;, +            deathWatchThread = null;, +        }, +        if (freeTask != null) {, +            assert deathWatchThread != null;, +            ThreadDeathWatcher.unwatch(deathWatchThread, freeTask);, +        }, +            logger.debug("Freed {} thread-local buffer(s) from thread: {}", numFreed, Thread.currentThread().getName());]