[+++ b/codec-http2/src/main/java/io/netty/handler/codec/http2/Http2MultiplexCodec.java, +        // We need to copy parent's channel options into a child's options to make, +        // sure they share same allocator, same receive buffer allocator, etc., +        //, +        // See https://github.com/netty/netty/issues/6551, +        channel.config().setOptions(parentChannel.config().getOptions());, +, +++ b/codec-http2/src/main/java/io/netty/handler/codec/http2/Http2MultiplexCodec.java, +        // We need to copy parent's channel options into a child's options to make, +        // sure they share same allocator, same receive buffer allocator, etc., +        //, +        // See https://github.com/netty/netty/issues/6551, +        channel.config().setOptions(parentChannel.config().getOptions());, +, +++ b/codec-http2/src/test/java/io/netty/handler/codec/http2/Http2MultiplexCodecTest.java, +, +    public void childChannelShouldShareParentsChannelOptions() {, +        EmbeddedChannel parent = new EmbeddedChannel();, +        parent.config().setAutoRead(false);, +        parent.config().setWriteSpinCount(42);, +, +        Http2StreamChannelBootstrap b = new Http2StreamChannelBootstrap();, +        parent.pipeline().addLast(new Http2MultiplexCodec(true, b));, +, +        Channel child = b, +            .parentChannel(parent), +            .handler(new TestChannelInitializer()), +            .connect(), +            .channel();, +, +        assertFalse(child.config().isAutoRead());, +        assertEquals(child.config().getWriteSpinCount(), 42);, +, +        child.close();, +        assertTrue(!parent.finish());, +    }, +, +    @Test]