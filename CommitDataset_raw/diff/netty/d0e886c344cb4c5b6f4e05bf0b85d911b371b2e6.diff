[+++ b/src/main/java/org/jboss/netty/handler/codec/http/DefaultHttpChunkTrailer.java, +    public void addHeader(final String name, final Object value) {, +    public void setHeader(final String name, final Object value) {, +    public void setHeader(final String name, final Iterable<?> values) {, +++ b/src/main/java/org/jboss/netty/handler/codec/http/DefaultHttpChunkTrailer.java, +    public void addHeader(final String name, final Object value) {, +    public void setHeader(final String name, final Object value) {, +    public void setHeader(final String name, final Iterable<?> values) {, +++ b/src/main/java/org/jboss/netty/handler/codec/http/DefaultHttpMessage.java, +import org.jboss.netty.handler.codec.http.HttpHeaders.Names;, +import org.jboss.netty.handler.codec.http.HttpHeaders.Values;, +    public void addHeader(final String name, final Object value) {, +    public void setHeader(final String name, final Object value) {, +    public void setHeader(final String name, final Iterable<?> values) {, +    @Deprecated, +        return HttpHeaders.getContentLength(this);, +    @Deprecated, +        return HttpHeaders.getContentLength(this, defaultValue);, +        HttpVersion version = getProtocolVersion();, +        if (!version.getProtocolName().equals("HTTP")) {, +        String connection = getHeader(Names.CONNECTION);, +        if (HttpHeaders.Values.CLOSE.equalsIgnoreCase(connection)) {, +            return false;, +        }, +, +        if (version.equals(HttpVersion.HTTP_1_0) &&, +            !HttpHeaders.Values.KEEP_ALIVE.equalsIgnoreCase(connection)) {, +    public void setKeepAlive(boolean keepAlive) {, +        HttpVersion version = getProtocolVersion();, +        if (!version.getProtocolName().equals("HTTP")) {, +            return;, +        }, +, +        if (version.equals(HttpVersion.HTTP_1_0)) {, +            if (keepAlive) {, +                setHeader(Names.CONNECTION, Values.KEEP_ALIVE);, +            } else {, +                removeHeader(Names.CONNECTION);, +            }, +        } else {, +            if (keepAlive) {, +                removeHeader(Names.CONNECTION);, +            } else {, +                setHeader(Names.CONNECTION, Values.CLOSE);, +            }, +        }, +    }, +, +++ b/src/main/java/org/jboss/netty/handler/codec/http/DefaultHttpChunkTrailer.java, +    public void addHeader(final String name, final Object value) {, +    public void setHeader(final String name, final Object value) {, +    public void setHeader(final String name, final Iterable<?> values) {, +++ b/src/main/java/org/jboss/netty/handler/codec/http/DefaultHttpMessage.java, +import org.jboss.netty.handler.codec.http.HttpHeaders.Names;, +import org.jboss.netty.handler.codec.http.HttpHeaders.Values;, +    public void addHeader(final String name, final Object value) {, +    public void setHeader(final String name, final Object value) {, +    public void setHeader(final String name, final Iterable<?> values) {, +    @Deprecated, +        return HttpHeaders.getContentLength(this);, +    @Deprecated, +        return HttpHeaders.getContentLength(this, defaultValue);, +        HttpVersion version = getProtocolVersion();, +        if (!version.getProtocolName().equals("HTTP")) {, +        String connection = getHeader(Names.CONNECTION);, +        if (HttpHeaders.Values.CLOSE.equalsIgnoreCase(connection)) {, +            return false;, +        }, +, +        if (version.equals(HttpVersion.HTTP_1_0) &&, +            !HttpHeaders.Values.KEEP_ALIVE.equalsIgnoreCase(connection)) {, +    public void setKeepAlive(boolean keepAlive) {, +        HttpVersion version = getProtocolVersion();, +        if (!version.getProtocolName().equals("HTTP")) {, +            return;, +        }, +, +        if (version.equals(HttpVersion.HTTP_1_0)) {, +            if (keepAlive) {, +                setHeader(Names.CONNECTION, Values.KEEP_ALIVE);, +            } else {, +                removeHeader(Names.CONNECTION);, +            }, +        } else {, +            if (keepAlive) {, +                removeHeader(Names.CONNECTION);, +            } else {, +                setHeader(Names.CONNECTION, Values.CLOSE);, +            }, +        }, +    }, +, +++ b/src/main/java/org/jboss/netty/handler/codec/http/HttpChunk.java, +        public void addHeader(String name, Object value) {, +        public void setHeader(String name, Object value) {, +        public void setHeader(String name, Iterable<?> values) {, +++ b/src/main/java/org/jboss/netty/handler/codec/http/DefaultHttpChunkTrailer.java, +    public void addHeader(final String name, final Object value) {, +    public void setHeader(final String name, final Object value) {, +    public void setHeader(final String name, final Iterable<?> values) {]