[+++ b/codec-http2/src/main/java/io/netty/handler/codec/http2/DefaultHttp2RemoteFlowController.java, +     * This will allocate bytes by stream weight and priority for the entire tree rooted at {@code parent}, but does not, +     * write any bytes. The connection window is generally distributed amongst siblings according to their weight,, +     * however we need to ensure that the entire connection window is used (assuming streams have >= connection window, +     * bytes to send) and we may need some sort of rounding to accomplish this., +                // In order to make progress toward the connection window due to possible rounding errors, we make sure, +                // that each stream (with data to send) is given at least 1 byte toward the connection window., +                int connectionWindowChunk = Math.max(1, (int) (connectionWindow * weightRatio));, +                int bytesForTree = Math.min(nextConnectionWindow, connectionWindowChunk);]