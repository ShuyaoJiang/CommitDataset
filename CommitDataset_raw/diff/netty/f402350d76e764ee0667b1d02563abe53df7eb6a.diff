[+++ b/codec-http/src/main/java/io/netty/handler/codec/http/multipart/HttpPostMultipartRequestDecoder.java, +                    // check but do not changed readerIndex, +                    nextByte = undecodedChunk.getByte(undecodedChunk.readerIndex());, +                        // force read, +                        undecodedChunk.readByte();, +                    } else {, +                        // Write CR (not followed by LF), +                        line.writeByte(HttpConstants.CR);, +                        } else {, +                            // Write CR (not followed by LF), +                            sao.pos--;, +                            line.writeByte(HttpConstants.CR);, +                        } else {, +                            // error CR without LF, +                            // delimiter not found so break here !, +                            undecodedChunk.readerIndex(readerIndex);, +                            throw new NotEnoughDataDecoderException();, +                                        } else {, +                                            // error CR without LF, +                                            // delimiter not found so break here !, +                                            undecodedChunk.readerIndex(readerIndex);, +                                            throw new NotEnoughDataDecoderException();, +                                } else {, +                                    // Unread second nextByte, +                                    lastPosition = undecodedChunk.readerIndex() - 1;, +                                    undecodedChunk.readerIndex(lastPosition);, +                            } else {, +                                lastPosition = undecodedChunk.readerIndex() - 1;, +                            } else {, +                                // Unread second nextByte, +                                lastPosition = undecodedChunk.readerIndex() - 1;, +                                undecodedChunk.readerIndex(lastPosition);, +                        } else {, +                            lastPosition = undecodedChunk.readerIndex() - 1;, +                                } else {, +                                    // Unread last nextByte, +                                    sao.pos--;, +                                    lastrealpos = sao.pos;, +                            } else {, +                                // Unread last nextByte, +                                sao.pos--;, +                                lastrealpos = sao.pos;, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/multipart/HttpPostMultipartRequestDecoder.java, +                    // check but do not changed readerIndex, +                    nextByte = undecodedChunk.getByte(undecodedChunk.readerIndex());, +                        // force read, +                        undecodedChunk.readByte();, +                    } else {, +                        // Write CR (not followed by LF), +                        line.writeByte(HttpConstants.CR);, +                        } else {, +                            // Write CR (not followed by LF), +                            sao.pos--;, +                            line.writeByte(HttpConstants.CR);, +                        } else {, +                            // error CR without LF, +                            // delimiter not found so break here !, +                            undecodedChunk.readerIndex(readerIndex);, +                            throw new NotEnoughDataDecoderException();, +                                        } else {, +                                            // error CR without LF, +                                            // delimiter not found so break here !, +                                            undecodedChunk.readerIndex(readerIndex);, +                                            throw new NotEnoughDataDecoderException();, +                                } else {, +                                    // Unread second nextByte, +                                    lastPosition = undecodedChunk.readerIndex() - 1;, +                                    undecodedChunk.readerIndex(lastPosition);, +                            } else {, +                                lastPosition = undecodedChunk.readerIndex() - 1;, +                            } else {, +                                // Unread second nextByte, +                                lastPosition = undecodedChunk.readerIndex() - 1;, +                                undecodedChunk.readerIndex(lastPosition);, +                        } else {, +                            lastPosition = undecodedChunk.readerIndex() - 1;, +                                } else {, +                                    // Unread last nextByte, +                                    sao.pos--;, +                                    lastrealpos = sao.pos;, +                            } else {, +                                // Unread last nextByte, +                                sao.pos--;, +                                lastrealpos = sao.pos;, +++ b/codec-http/src/test/java/io/netty/handler/codec/http/multipart/HttpPostRequestDecoderTest.java, +    // See https://github.com/netty/netty/issues/2544, +    @Test, +    public void testMultipartCodecWithCRasEndOfAttribute() throws Exception {, +        final String boundary = "dLV9Wyq26L_-JQxk6ferf-RT153LhOO";, +, +        // Force to use memory-based data., +        final DefaultHttpDataFactory inMemoryFactory = new DefaultHttpDataFactory(false);, +        // Build test case, +        String extradata = "aaaa";, +        String [] datas = new String[5];, +        for (int i = 0; i < 4; i++) {, +            datas[i] = extradata;, +            for (int j = 0; j < i ; j++) {, +                datas[i] += '\r';, +            }]