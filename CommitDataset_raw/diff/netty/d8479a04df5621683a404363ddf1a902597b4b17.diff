[+++ b/handler/src/main/java/io/netty/handler/stream/ChunkedFile.java, +        ByteBuf buf = ctx.alloc().heapBuffer(chunkSize);, +        boolean release = true;, +        try {, +            file.readFully(buf.array(), buf.arrayOffset(), chunkSize);, +            buf.writerIndex(chunkSize);, +            release = false;, +            return buf;, +        } finally {, +            if (release) {, +                buf.release();, +            }, +        }]