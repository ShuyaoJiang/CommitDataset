[+++ b/transport/src/main/java/io/netty/channel/ChannelPromiseAggregator.java, +        if (aggregatePromise == null) {, +            throw new NullPointerException("aggregatePromise");, +        }, +    /**, +     * Add the given {@link ChannelPromise}s to the aggregator., +     */, +        if (promises.length == 0) {, +            return this;, +        }, +                int size;, +                if (promises.length > 1) {, +                    size = promises.length;, +                } else {, +                    size = 2;, +                }, +                pendingPromises = new HashSet<ChannelPromise>(size);]