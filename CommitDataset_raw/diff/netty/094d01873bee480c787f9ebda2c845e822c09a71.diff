[+++ b/codec/src/main/java/io/netty/handler/codec/ByteToMessageCodec.java, +/**, + * A Codec for on-the-fly encoding/decoding of bytes to messages and vise-versa., + *, + * This can be thought of as a combination of {@link ByteToMessageDecoder} and {@link MessageToByteEncoder}., + *, + * Be aware that sub-classes of {@link ByteToMessageCodec} <strong>MUST NOT</strong>, + * annotated with {@link @Sharable}., + */, +        checkForSharableAnnotation();, +        checkForSharableAnnotation();, +    private void checkForSharableAnnotation() {, +        if (getClass().isAnnotationPresent(Sharable.class)) {, +            throw new IllegalStateException("@Sharable annotation is not allowed");, +        }, +    }, +, +++ b/codec/src/main/java/io/netty/handler/codec/ByteToMessageCodec.java, +/**, + * A Codec for on-the-fly encoding/decoding of bytes to messages and vise-versa., + *, + * This can be thought of as a combination of {@link ByteToMessageDecoder} and {@link MessageToByteEncoder}., + *, + * Be aware that sub-classes of {@link ByteToMessageCodec} <strong>MUST NOT</strong>, + * annotated with {@link @Sharable}., + */, +        checkForSharableAnnotation();, +        checkForSharableAnnotation();, +    private void checkForSharableAnnotation() {, +        if (getClass().isAnnotationPresent(Sharable.class)) {, +            throw new IllegalStateException("@Sharable annotation is not allowed");, +        }, +    }, +, +++ b/codec/src/main/java/io/netty/handler/codec/ByteToMessageDecoder.java, + *, + * Be aware that sub-classes of {@link ByteToMessageDecoder} <strong>MUST NOT</strong>, + * annotated with {@link @Sharable}., +    protected ByteToMessageDecoder() {, +        if (getClass().isAnnotationPresent(Sharable.class)) {, +            throw new IllegalStateException("@Sharable annotation is not allowed");, +        }, +    }, +]