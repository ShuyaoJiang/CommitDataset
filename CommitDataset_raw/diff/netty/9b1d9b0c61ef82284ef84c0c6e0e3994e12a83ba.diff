[+++ b/src/main/java/org/jboss/netty/channel/socket/nio/NioWorker.java, +        final java.nio.channels.SocketChannel nioch =, +            (java.nio.channels.SocketChannel) k.channel();, +        final NioSocketChannel channel = (NioSocketChannel) k.attachment();, +        final NioSocketChannelConfig cfg = channel.getConfig();, +        final ReceiveBufferSizePredictor predictor = cfg.getReceiveBufferSizePredictor();, +        final ChannelBufferFactory bufferFactory = cfg.getBufferFactory();, +        final ChannelBuffer buffer = bufferFactory.getBuffer(predictor.nextReceiveBufferSize());, +            while ((ret = nioch.read(directBuffer)) > 0) {]