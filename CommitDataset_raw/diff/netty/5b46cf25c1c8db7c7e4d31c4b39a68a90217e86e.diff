[+++ b/codec-http2/src/main/java/io/netty/handler/codec/http2/DefaultHttp2ConnectionEncoder.java, +import io.netty.buffer.Unpooled;, +        FlowControlledData(Http2Stream stream, ByteBuf buf, int padding, boolean endOfStream,, +            if (!endOfStream) {, +                if (queuedData == 0) {, +                    // There's no need to write any data frames because there are only empty data frames in the queue, +                    // and it is not end of stream yet. Just complete their promises by writing an empty buffer., +                    ChannelPromise writePromise = ctx.newPromise().addListener(this);, +                    queue.remove(0, writePromise).release();, +                    ctx.write(Unpooled.EMPTY_BUFFER, writePromise);, +                if (allowedBytes == 0) {, +                    return;, +                }, +            }, +, +        FlowControlledHeaders(Http2Stream stream, Http2Headers headers, int streamDependency, short weight,, +        protected FlowControlledBase(final Http2Stream stream, int padding, boolean endOfStream,]