[+++ b/common/src/main/java/io/netty/util/Recycler.java, +, +        private static final int INITIAL_CAPACITY = 256;, +, +        private T[] elements;, +        private int size;, +        private final Map<T, Boolean> map = new IdentityHashMap<T, Boolean>(INITIAL_CAPACITY);, +        @SuppressWarnings({ "unchecked", "SuspiciousArrayCast" }), +            elements = newArray(INITIAL_CAPACITY);, +            int size = this.size;, +            if (size == 0) {, +                return null;, +            }, +            size --;, +            T ret = elements[size];, +            elements[size] = null;, +            this.size = size;, +, +            int size = this.size;, +            if (size == elements.length) {, +                T[] newElements = newArray(size << 1);, +                System.arraycopy(elements, 0, newElements, 0, size);, +                elements = newElements;, +            }, +, +            elements[size] = o;, +            this.size = size + 1;, +        }, +, +        @SuppressWarnings({ "unchecked", "SuspiciousArrayCast" }), +        private static <T> T[] newArray(int length) {, +            return (T[]) new Object[length];]