[+++ b/transport/src/main/java/io/netty/channel/socket/aio/AioSocketChannel.java, +        ByteBuffer buffer = (ByteBuffer) byteBuf.nioBuffer(byteBuf.writerIndex(), byteBuf.writableBytes()).clear();, +                , +                channel.notifyFlushFutures();, +                channel.unsafe().close(channel.unsafe().voidFuture());, +            } else {, +                ByteBuf buf = channel.pipeline().outboundByteBuffer();, +                if (!buf.readable()) {, +                    buf.discardReadBytes();, +                }, +                    channel.unsafe().close(channel.unsafe().voidFuture());, +                    channel.unsafe().close(channel.unsafe().voidFuture());, +                channel.unsafe().close(channel.unsafe().voidFuture());]