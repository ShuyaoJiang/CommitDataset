[+++ b/codec/src/test/java/io/netty/handler/codec/bytes/ByteArrayEncoderTest.java, +import org.junit.After;, +import static org.hamcrest.CoreMatchers.*;, +    @After, +    public void tearDown() {, +        assertThat(ch.finish(), is(false));, +    }, +, +        ByteBuf encoded = ch.readOutbound();, +        assertThat(encoded, is(wrappedBuffer(b)));, +        encoded.release();, +        assertThat((ByteBuf) ch.readOutbound(), is(sameInstance(EMPTY_BUFFER)));]