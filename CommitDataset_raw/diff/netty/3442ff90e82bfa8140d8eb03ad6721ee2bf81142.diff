[+++ b/codec/src/test/java/io/netty/handler/codec/bytes/ByteArrayDecoderTest.java, +import io.netty.channel.embedded.EmbeddedMessageChannel;, +    private EmbeddedMessageChannel ch;, +        ch = new EmbeddedMessageChannel(new ByteArrayDecoder());, +        ch.writeInbound(wrappedBuffer(b));, +        assertThat((byte[]) ch.readInbound(), is(b));, +        ch.writeInbound(wrappedBuffer(b));, +        assertThat((byte[]) ch.readInbound(), is(b));, +        ch.writeInbound(str);, +        assertThat(ch.readInbound(), is((Object) str));, +++ b/codec/src/test/java/io/netty/handler/codec/bytes/ByteArrayDecoderTest.java, +import io.netty.channel.embedded.EmbeddedMessageChannel;, +    private EmbeddedMessageChannel ch;, +        ch = new EmbeddedMessageChannel(new ByteArrayDecoder());, +        ch.writeInbound(wrappedBuffer(b));, +        assertThat((byte[]) ch.readInbound(), is(b));, +        ch.writeInbound(wrappedBuffer(b));, +        assertThat((byte[]) ch.readInbound(), is(b));, +        ch.writeInbound(str);, +        assertThat(ch.readInbound(), is((Object) str));, +++ b/codec/src/test/java/io/netty/handler/codec/bytes/ByteArrayEncoderTest.java, +import io.netty.channel.embedded.EmbeddedMessageChannel;, +    private EmbeddedMessageChannel ch;, +        ch = new EmbeddedMessageChannel(new ByteArrayEncoder());, +        ch.writeOutbound(b);, +        assertThat((ChannelBuffer) ch.readOutbound(), is(wrappedBuffer(b)));, +        ch.writeOutbound(b);, +        assertThat(ch.readOutbound(), nullValue());, +        ch.writeOutbound(str);, +        assertThat(ch.readOutbound(), is((Object) str));, +++ b/codec/src/test/java/io/netty/handler/codec/bytes/ByteArrayDecoderTest.java, +import io.netty.channel.embedded.EmbeddedMessageChannel;, +    private EmbeddedMessageChannel ch;, +        ch = new EmbeddedMessageChannel(new ByteArrayDecoder());, +        ch.writeInbound(wrappedBuffer(b));, +        assertThat((byte[]) ch.readInbound(), is(b));, +        ch.writeInbound(wrappedBuffer(b));, +        assertThat((byte[]) ch.readInbound(), is(b));, +        ch.writeInbound(str);, +        assertThat(ch.readInbound(), is((Object) str));, +++ b/codec/src/test/java/io/netty/handler/codec/bytes/ByteArrayEncoderTest.java, +import io.netty.channel.embedded.EmbeddedMessageChannel;, +    private EmbeddedMessageChannel ch;, +        ch = new EmbeddedMessageChannel(new ByteArrayEncoder());, +        ch.writeOutbound(b);, +        assertThat((ChannelBuffer) ch.readOutbound(), is(wrappedBuffer(b)));, +        ch.writeOutbound(b);, +        assertThat(ch.readOutbound(), nullValue());, +        ch.writeOutbound(str);, +        assertThat(ch.readOutbound(), is((Object) str));, +++ b/codec/src/test/java/io/netty/handler/codec/frame/DelimiterBasedFrameDecoderTest.java, +import io.netty.channel.embedded.EmbeddedStreamChannel;, +, +        EmbeddedStreamChannel ch = new EmbeddedStreamChannel(, +            ch.writeInbound(ChannelBuffers.wrappedBuffer(new byte[] { 1, 2 }));, +                assertTrue(ch.writeInbound(ChannelBuffers.wrappedBuffer(new byte[] { 0 })));, +            ch.writeInbound(ChannelBuffers.wrappedBuffer(new byte[] { 'A', 0 }));, +            ChannelBuffer buf = (ChannelBuffer) ch.readInbound();, +        EmbeddedStreamChannel ch = new EmbeddedStreamChannel(, +                assertTrue(ch.writeInbound(ChannelBuffers.wrappedBuffer(new byte[] { 1, 2 })));, +            ch.writeInbound(ChannelBuffers.wrappedBuffer(new byte[] { 0, 'A', 0 }));, +            ChannelBuffer buf = (ChannelBuffer) ch.readInbound();, +++ b/codec/src/test/java/io/netty/handler/codec/bytes/ByteArrayDecoderTest.java, +import io.netty.channel.embedded.EmbeddedMessageChannel;, +    private EmbeddedMessageChannel ch;, +        ch = new EmbeddedMessageChannel(new ByteArrayDecoder());, +        ch.writeInbound(wrappedBuffer(b));, +        assertThat((byte[]) ch.readInbound(), is(b));, +        ch.writeInbound(wrappedBuffer(b));, +        assertThat((byte[]) ch.readInbound(), is(b));, +        ch.writeInbound(str);, +        assertThat(ch.readInbound(), is((Object) str));, +++ b/codec/src/test/java/io/netty/handler/codec/bytes/ByteArrayEncoderTest.java, +import io.netty.channel.embedded.EmbeddedMessageChannel;, +    private EmbeddedMessageChannel ch;, +        ch = new EmbeddedMessageChannel(new ByteArrayEncoder());, +        ch.writeOutbound(b);, +        assertThat((ChannelBuffer) ch.readOutbound(), is(wrappedBuffer(b)));, +        ch.writeOutbound(b);, +        assertThat(ch.readOutbound(), nullValue());, +        ch.writeOutbound(str);, +        assertThat(ch.readOutbound(), is((Object) str));, +++ b/codec/src/test/java/io/netty/handler/codec/frame/DelimiterBasedFrameDecoderTest.java, +import io.netty.channel.embedded.EmbeddedStreamChannel;, +, +        EmbeddedStreamChannel ch = new EmbeddedStreamChannel(, +            ch.writeInbound(ChannelBuffers.wrappedBuffer(new byte[] { 1, 2 }));, +                assertTrue(ch.writeInbound(ChannelBuffers.wrappedBuffer(new byte[] { 0 })));, +            ch.writeInbound(ChannelBuffers.wrappedBuffer(new byte[] { 'A', 0 }));, +            ChannelBuffer buf = (ChannelBuffer) ch.readInbound();, +        EmbeddedStreamChannel ch = new EmbeddedStreamChannel(, +                assertTrue(ch.writeInbound(ChannelBuffers.wrappedBuffer(new byte[] { 1, 2 })));, +            ch.writeInbound(ChannelBuffers.wrappedBuffer(new byte[] { 0, 'A', 0 }));, +            ChannelBuffer buf = (ChannelBuffer) ch.readInbound();, +++ b/codec/src/test/java/io/netty/handler/codec/frame/LengthFieldBasedFrameDecoderTest.java, +import io.netty.channel.embedded.EmbeddedStreamChannel;, +        EmbeddedStreamChannel ch = new EmbeddedStreamChannel(, +            assertFalse(ch.writeInbound(ChannelBuffers.wrappedBuffer(new byte[] { 0, 0, 0, 2 })));, +                assertTrue(ch.writeInbound(ChannelBuffers.wrappedBuffer(new byte[] { 0, 0 })));, +            ch.writeInbound(ChannelBuffers.wrappedBuffer(new byte[] { 0, 0, 0, 1, 'A' }));]