[+++ b/transport/src/main/java/io/netty/channel/AbstractChannel.java, +, +                    // Make sure the message list is not empty., +                    // Make sure the promise has not been cancelled yet., +                    if (!promise.setUncancellable()) {, +                        messages.releaseAllAndRecycle();, +                        if (!outboundBuffer.next()) {, +                            break;, +                        } else {, +                            continue;, +                        }, +                    }, +, +                    // Write the messages.]