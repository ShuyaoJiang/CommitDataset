[+++ b/transport/src/main/java/io/netty/channel/socket/nio/NioSocketChannel.java, +            expectedWrittenBytes += readableBytes;, +            if (buf.isDirect()) {, +            } else {, +                ByteBuf directBuf = alloc().directBuffer(readableBytes);, +                directBuf.writeBytes(buf, buf.readerIndex(), readableBytes);, +                buf.release();, +                bufs.set(i, directBuf);, +                if (nioBufferCnt == nioBuffers.length) {, +                    nioBuffers = doubleNioBufferArray(nioBuffers, nioBufferCnt);, +                }, +                nioBuffers[nioBufferCnt ++] = directBuf.nioBuffer();, +            }]