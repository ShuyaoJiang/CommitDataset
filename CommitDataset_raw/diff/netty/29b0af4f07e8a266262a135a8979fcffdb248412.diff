[+++ b/src/main/java/org/jboss/netty/handler/codec/http/QueryStringDecoder.java, +import java.io.UnsupportedEncodingException;, +import java.net.URLDecoder;, +import java.nio.charset.UnsupportedCharsetException;, + * @author Trustin Lee (tlee@redhat.com), +    static final String DEFAULT_CHARSET = "UTF-8";, +, +    private final String charset;, +        this(uri, DEFAULT_CHARSET);, +    }, +, +    public QueryStringDecoder(String uri, String charset) {, +        if (uri == null) {, +            throw new NullPointerException("uri");, +        }, +        if (charset == null) {, +            throw new NullPointerException("charset");, +        }, +, +        this.charset = charset;, +        this(uri, DEFAULT_CHARSET);, +    }, +, +    public QueryStringDecoder(URI uri, String charset){, +        if (uri == null) {, +            throw new NullPointerException("uri");, +        }, +        if (charset == null) {, +            throw new NullPointerException("charset");, +        }, +, +        this.charset = charset;, +            String key = decodeComponent(split[0]);, +                values.add(decodeComponent(split[1]));, +    private String decodeComponent(String s) {, +        try {, +            return URLDecoder.decode(s, charset);, +        } catch (UnsupportedEncodingException e) {, +            throw new UnsupportedCharsetException(charset);, +        }, +++ b/src/main/java/org/jboss/netty/handler/codec/http/QueryStringDecoder.java, +import java.io.UnsupportedEncodingException;, +import java.net.URLDecoder;, +import java.nio.charset.UnsupportedCharsetException;, + * @author Trustin Lee (tlee@redhat.com), +    static final String DEFAULT_CHARSET = "UTF-8";, +, +    private final String charset;, +        this(uri, DEFAULT_CHARSET);, +    }, +, +    public QueryStringDecoder(String uri, String charset) {, +        if (uri == null) {, +            throw new NullPointerException("uri");, +        }, +        if (charset == null) {, +            throw new NullPointerException("charset");, +        }, +, +        this.charset = charset;, +        this(uri, DEFAULT_CHARSET);, +    }, +, +    public QueryStringDecoder(URI uri, String charset){, +        if (uri == null) {, +            throw new NullPointerException("uri");, +        }, +        if (charset == null) {, +            throw new NullPointerException("charset");, +        }, +, +        this.charset = charset;, +            String key = decodeComponent(split[0]);, +                values.add(decodeComponent(split[1]));, +    private String decodeComponent(String s) {, +        try {, +            return URLDecoder.decode(s, charset);, +        } catch (UnsupportedEncodingException e) {, +            throw new UnsupportedCharsetException(charset);, +        }, +++ b/src/main/java/org/jboss/netty/handler/codec/http/QueryStringEncoder.java, +import java.io.UnsupportedEncodingException;, +import java.net.URLEncoder;, +import java.nio.charset.UnsupportedCharsetException;, + * @author Trustin Lee (tlee@redhat.com), +    private final String charset;, +    private final String uri;, +    public QueryStringEncoder(String uri) {, +        this(uri, QueryStringDecoder.DEFAULT_CHARSET);, +    }, +, +    public QueryStringEncoder(String uri, String charset) {, +        if (uri == null) {, +            throw new NullPointerException("uri");, +        }, +        if (charset == null) {, +            throw new NullPointerException("charset");, +        }, +, +        this.uri = uri;]