[+++ b/transport/src/main/java/io/netty/channel/AbstractChannel.java, +                    closeFuture.setClosed();, +                closeFuture.setClosed();, +++ b/transport/src/main/java/io/netty/channel/AbstractChannel.java, +                    closeFuture.setClosed();, +                closeFuture.setClosed();, +++ b/transport/src/main/java/io/netty/channel/local/LocalChannel.java, +    protected void doClose() throws Exception {, +        if (state <= 2) {, +++ b/transport/src/main/java/io/netty/channel/AbstractChannel.java, +                    closeFuture.setClosed();, +                closeFuture.setClosed();, +++ b/transport/src/main/java/io/netty/channel/local/LocalChannel.java, +    protected void doClose() throws Exception {, +        if (state <= 2) {, +++ b/transport/src/main/java/io/netty/channel/local/LocalServerChannel.java, +    protected void doClose() throws Exception {, +        if (state <= 1) {]