[+++ b/codec-http/src/main/java/io/netty/handler/codec/http/multipart/AbstractHttpData.java, +    public long definedLength() {, +        return definedSize;, +    }, +, +    @Override, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/multipart/AbstractHttpData.java, +    public long definedLength() {, +        return definedSize;, +    }, +, +    @Override, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/multipart/DefaultHttpDataFactory.java, +    @Override, +    public Attribute createAttribute(HttpRequest request, String name, long definedSize) {, +        if (useDisk) {, +            Attribute attribute = new DiskAttribute(name, definedSize, charset);, +            attribute.setMaxSize(maxSize);, +            List<HttpData> fileToDelete = getList(request);, +            fileToDelete.add(attribute);, +            return attribute;, +        }, +        if (checkSize) {, +            Attribute attribute = new MixedAttribute(name, definedSize, minSize, charset);, +            attribute.setMaxSize(maxSize);, +            List<HttpData> fileToDelete = getList(request);, +            fileToDelete.add(attribute);, +            return attribute;, +        }, +        MemoryAttribute attribute = new MemoryAttribute(name, definedSize);, +        attribute.setMaxSize(maxSize);, +        return attribute;, +    }, +, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/multipart/AbstractHttpData.java, +    public long definedLength() {, +        return definedSize;, +    }, +, +    @Override, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/multipart/DefaultHttpDataFactory.java, +    @Override, +    public Attribute createAttribute(HttpRequest request, String name, long definedSize) {, +        if (useDisk) {, +            Attribute attribute = new DiskAttribute(name, definedSize, charset);, +            attribute.setMaxSize(maxSize);, +            List<HttpData> fileToDelete = getList(request);, +            fileToDelete.add(attribute);, +            return attribute;, +        }, +        if (checkSize) {, +            Attribute attribute = new MixedAttribute(name, definedSize, minSize, charset);, +            attribute.setMaxSize(maxSize);, +            List<HttpData> fileToDelete = getList(request);, +            fileToDelete.add(attribute);, +            return attribute;, +        }, +        MemoryAttribute attribute = new MemoryAttribute(name, definedSize);, +        attribute.setMaxSize(maxSize);, +        return attribute;, +    }, +, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/multipart/DiskAttribute.java, +    public DiskAttribute(String name, long definedSize) {, +        this(name, definedSize, HttpConstants.DEFAULT_CHARSET);, +    }, +, +    public DiskAttribute(String name, long definedSize, Charset charset) {, +        super(name, charset, definedSize);, +    }, +, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/multipart/AbstractHttpData.java, +    public long definedLength() {, +        return definedSize;, +    }, +, +    @Override, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/multipart/DefaultHttpDataFactory.java, +    @Override, +    public Attribute createAttribute(HttpRequest request, String name, long definedSize) {, +        if (useDisk) {, +            Attribute attribute = new DiskAttribute(name, definedSize, charset);, +            attribute.setMaxSize(maxSize);, +            List<HttpData> fileToDelete = getList(request);, +            fileToDelete.add(attribute);, +            return attribute;, +        }, +        if (checkSize) {, +            Attribute attribute = new MixedAttribute(name, definedSize, minSize, charset);, +            attribute.setMaxSize(maxSize);, +            List<HttpData> fileToDelete = getList(request);, +            fileToDelete.add(attribute);, +            return attribute;, +        }, +        MemoryAttribute attribute = new MemoryAttribute(name, definedSize);, +        attribute.setMaxSize(maxSize);, +        return attribute;, +    }, +, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/multipart/DiskAttribute.java]