[+++ b/src/main/java/org/jboss/netty/channel/local/LocalAddress.java, +import java.util.concurrent.atomic.AtomicInteger;, +import org.jboss.netty.channel.ChannelException;, +    private static final AtomicInteger nextEphemeralPort = new AtomicInteger();, +        for (long i = (long) Integer.MAX_VALUE - Integer.MIN_VALUE; i >= 0; i --) {, +            String id = "ephemeral-" +, +                        Integer.toHexString(nextEphemeralPort.incrementAndGet());, +, +        // Not likely to reach here but let's be a paranoid., +        throw new ChannelException("failed to allocate a local ephemeral port");]