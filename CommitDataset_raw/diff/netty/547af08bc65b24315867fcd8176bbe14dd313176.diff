[+++ b/src/main/java/org/jboss/netty/bootstrap/Bootstrap.java, +        if (factory == null) {, +            throw new NullPointerException("factory");, +        }, +++ b/src/main/java/org/jboss/netty/bootstrap/Bootstrap.java, +        if (factory == null) {, +            throw new NullPointerException("factory");, +        }, +++ b/src/main/java/org/jboss/netty/bootstrap/ServerBootstrap.java, +import org.jboss.netty.channel.ServerChannelFactory;, +    @Override, +    public void setFactory(ChannelFactory factory) {, +        if (factory == null) {, +            throw new NullPointerException("factory");, +        }, +        if (!(factory instanceof ServerChannelFactory)) {, +            throw new IllegalArgumentException(, +                    "factory must be a " +, +                    ServerChannelFactory.class.getSimpleName() + ": " +, +                    factory.getClass());, +        }, +        super.setFactory(factory);, +    }, +]