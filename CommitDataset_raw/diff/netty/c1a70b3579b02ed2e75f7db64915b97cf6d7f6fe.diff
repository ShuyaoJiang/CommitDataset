[+++ b/src/main/java/org/jboss/netty/example/http/snoop/HttpClient.java, +        int port = uri.getPort();, +        if (port == -1) {, +            if (scheme.equalsIgnoreCase("http")) {, +                port = 80;, +            } else if (scheme.equalsIgnoreCase("https")) {, +                port = 443;, +            }, +        }, +        if (!scheme.equalsIgnoreCase("http") && !scheme.equalsIgnoreCase("https")) {, +            System.err.println("Only HTTP(S) is supported.");, +        boolean ssl = scheme.equalsIgnoreCase("https");, +, +        bootstrap.setPipelineFactory(new HttpClientPipelineFactory(ssl));, +        // Prepare the HTTP request., +, +        // Set some example cookies., +, +        // Send the HTTP request., +++ b/src/main/java/org/jboss/netty/example/http/snoop/HttpClient.java, +        int port = uri.getPort();, +        if (port == -1) {, +            if (scheme.equalsIgnoreCase("http")) {, +                port = 80;, +            } else if (scheme.equalsIgnoreCase("https")) {, +                port = 443;, +            }, +        }, +        if (!scheme.equalsIgnoreCase("http") && !scheme.equalsIgnoreCase("https")) {, +            System.err.println("Only HTTP(S) is supported.");, +        boolean ssl = scheme.equalsIgnoreCase("https");, +, +        bootstrap.setPipelineFactory(new HttpClientPipelineFactory(ssl));, +        // Prepare the HTTP request., +, +        // Set some example cookies., +, +        // Send the HTTP request., +++ b/src/main/java/org/jboss/netty/example/http/snoop/HttpClientPipelineFactory.java, +import javax.net.ssl.SSLEngine;, +, +import org.jboss.netty.example.securechat.SecureChatSslContextFactory;, +import org.jboss.netty.handler.codec.http.HttpClientCodec;, +import org.jboss.netty.handler.ssl.SslHandler;, +, +    private final boolean ssl;, +, +    public HttpClientPipelineFactory(boolean ssl) {, +        this.ssl = ssl;, +    }, +, +, +        // Enable HTTPS if necessary., +        if (ssl) {, +            SSLEngine engine =, +                SecureChatSslContextFactory.getClientContext().createSSLEngine();, +            engine.setUseClientMode(true);, +, +            pipeline.addLast("ssl", new SslHandler(engine));, +        }, +, +        pipeline.addLast("codec", new HttpClientCodec());, +, +, +]