[+++ b/handler/src/main/java/io/netty/handler/ssl/SslHandler.java, +            ctx.flush();, +++ b/handler/src/main/java/io/netty/handler/ssl/SslHandler.java, +            ctx.flush();, +++ b/handler/src/main/java/io/netty/handler/ssl/SslUtils.java, +        // We have may haven written some parts of data before an exception was thrown so ensure we always flush., +        // See https://github.com/netty/netty/issues/3900#issuecomment-172481830, +        ctx.flush();, +++ b/handler/src/main/java/io/netty/handler/ssl/SslHandler.java, +            ctx.flush();, +++ b/handler/src/main/java/io/netty/handler/ssl/SslUtils.java, +        // We have may haven written some parts of data before an exception was thrown so ensure we always flush., +        // See https://github.com/netty/netty/issues/3900#issuecomment-172481830, +        ctx.flush();, +++ b/handler/src/test/java/io/netty/handler/ssl/SniHandlerTest.java, +import io.netty.util.ReferenceCountUtil;, +        assertThat(ch.finish(), is(true));, +, +        for (;;) {, +            Object msg = ch.readOutbound();, +            if (msg == null) {, +                break;, +            }, +            ReferenceCountUtil.release(msg);, +        }]