[+++ b/buffer/src/main/java/io/netty/buffer/ByteBufInputStream.java, +, +        loop: while (true) {, +            if (!buffer.isReadable()) {, +                return (lineBuf.length() > 0) ? lineBuf.toString() : null;, +            int c = buffer.readUnsignedByte();, +            switch (c) {, +                case '\n':, +                    break loop;, +                case '\r':, +                    if (buffer.isReadable() && buffer.getUnsignedByte(buffer.readerIndex()) == '\n') {, +                        buffer.skipBytes(1);, +                    }, +                    break loop;, +, +                default:, +                    lineBuf.append((char) c);, +++ b/buffer/src/main/java/io/netty/buffer/ByteBufInputStream.java, +, +        loop: while (true) {, +            if (!buffer.isReadable()) {, +                return (lineBuf.length() > 0) ? lineBuf.toString() : null;, +            int c = buffer.readUnsignedByte();, +            switch (c) {, +                case '\n':, +                    break loop;, +                case '\r':, +                    if (buffer.isReadable() && buffer.getUnsignedByte(buffer.readerIndex()) == '\n') {, +                        buffer.skipBytes(1);, +                    }, +                    break loop;, +, +                default:, +                    lineBuf.append((char) c);, +++ b/buffer/src/test/java/io/netty/buffer/ByteBufStreamTest.java, +        assertEquals("", in.readLine());]