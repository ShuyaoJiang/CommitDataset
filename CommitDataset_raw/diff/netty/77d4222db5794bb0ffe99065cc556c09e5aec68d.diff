[+++ b/transport/src/main/java/io/netty/channel/local/LocalChannel.java, +        final LocalChannel peer = this.peer;, +            // Need to execute the close in the correct EventLoop, +            // See https://github.com/netty/netty/issues/1777, +            EventLoop eventLoop = peer.eventLoop();, +            if (eventLoop.inEventLoop()) {, +            } else {, +                peer.eventLoop().execute(new Runnable() {, +                    @Override, +                    public void run() {, +                        peer.unsafe().close(unsafe().voidPromise());, +                    }, +                });, +            }]