[+++ b/src/main/java/org/jboss/netty/handler/codec/serialization/CompactObjectInputStream.java, +        this(in, null);, +            Class<?> clazz;, +            if (classLoader == null) {, +                clazz = Class.forName(, +                        className, true,, +                        Thread.currentThread().getContextClassLoader());, +            } else {, +                clazz = Class.forName(className, true, classLoader);, +            }, +++ b/src/main/java/org/jboss/netty/handler/codec/serialization/CompactObjectInputStream.java, +        this(in, null);, +            Class<?> clazz;, +            if (classLoader == null) {, +                clazz = Class.forName(, +                        className, true,, +                        Thread.currentThread().getContextClassLoader());, +            } else {, +                clazz = Class.forName(className, true, classLoader);, +            }, +++ b/src/main/java/org/jboss/netty/handler/codec/serialization/ObjectDecoder.java, +        return new CompactObjectInputStream(, +                new ChannelBufferInputStream(buffer, dataLen), classLoader).readObject();]