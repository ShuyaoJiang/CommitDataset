[+++ b/buffer/src/main/java/io/netty/buffer/CompositeByteBuf.java, +        int size = components.size();, +        if (size <= cIndex) {, +        for (int i = cIndex; i < size; i ++) {, +++ b/buffer/src/main/java/io/netty/buffer/CompositeByteBuf.java, +        int size = components.size();, +        if (size <= cIndex) {, +        for (int i = cIndex; i < size; i ++) {, +++ b/buffer/src/test/java/io/netty/buffer/AbstractCompositeByteBufTest.java, +    @Test, +    public void testRemoveLastComponentWithOthersLeft() {, +        CompositeByteBuf buf = freeLater(compositeBuffer());, +        buf.addComponent(wrappedBuffer(new byte[]{1, 2}));, +        buf.addComponent(wrappedBuffer(new byte[]{1, 2}));, +        assertEquals(2, buf.numComponents());, +        buf.removeComponent(1);, +        assertEquals(1, buf.numComponents());, +    }, +]