[+++ b/transport/src/main/java/io/netty/channel/DefaultChannelHandlerContext.java, +    boolean removed;, +            if (!removed && handler instanceof ChannelInboundByteHandler && !isInboundBufferFreed()) {, +            if (!removed && handler instanceof ChannelOutboundByteHandler && !isOutboundBufferFreed()) {, +++ b/transport/src/main/java/io/netty/channel/DefaultChannelHandlerContext.java, +    boolean removed;, +            if (!removed && handler instanceof ChannelInboundByteHandler && !isInboundBufferFreed()) {, +            if (!removed && handler instanceof ChannelOutboundByteHandler && !isOutboundBufferFreed()) {, +++ b/transport/src/main/java/io/netty/channel/DefaultChannelPipeline.java, +    private void callAfterRemove(final DefaultChannelHandlerContext ctx) {, +        ctx.removed = true;]