[+++ b/transport/src/main/java/io/netty/channel/MessageList.java, +        if (src == null) {, +            throw new NullPointerException("src");, +        }, +, +        int dstIdx = size;, +        final int newSize = dstIdx + srcLen;, +, +        final int srcEndIdx = srcIdx + srcLen;, +        int i = srcIdx;, +        try {, +                for (; i < srcEndIdx; i ++) {, +                    T m = src[srcIdx];, +                    if (m == null) {, +                        throw new NullPointerException("src[" + srcIdx + ']');, +                    }, +, +                    elements[dstIdx ++] = m;, +, +                    if (!(m instanceof ByteBuf)) {, +            for (; i < srcEndIdx; i ++) {, +                T m = src[srcIdx];, +                if (m == null) {, +                    throw new NullPointerException("src[" + srcIdx + ']');, +                }, +, +                elements[dstIdx ++] = m;, +            }, +        } finally {, +            if (dstIdx != newSize) {, +                // Could not finish iteration., +                Arrays.fill(elements, size, dstIdx, null);, +            }, +        }, +, +        assert dstIdx == newSize;, +        size = newSize;, +, +     * Returns the backing array of this list.  Use this array when you want to iterate over the list fast:, +     * <pre>, +     * {@link MessageList} list = ...;, +     * for (Object m: list.array()) {, +     *     if (m == null) {, +     *         break;, +     *     }, +     *, +     *     handleMessage(m);, +     * }, +     * </pre>, +     */, +    public T[] array() {, +        return elements;, +    }, +, +    /**]