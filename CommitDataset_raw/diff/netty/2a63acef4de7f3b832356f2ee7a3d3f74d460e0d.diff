[+++ b/example/src/main/java/io/netty/example/echo/EchoClient.java, +                             //new LoggingHandler(LogLevel.INFO),, +++ b/example/src/main/java/io/netty/example/echo/EchoClient.java, +                             //new LoggingHandler(LogLevel.INFO),, +++ b/example/src/main/java/io/netty/example/echo/EchoServer.java, +                             //new LoggingHandler(LogLevel.INFO),, +++ b/example/src/main/java/io/netty/example/echo/EchoClient.java, +                             //new LoggingHandler(LogLevel.INFO),, +++ b/example/src/main/java/io/netty/example/echo/EchoServer.java, +                             //new LoggingHandler(LogLevel.INFO),, +++ b/example/src/main/java/io/netty/example/echo/EchoServerHandler.java, +import io.netty.channel.ChannelInboundStreamHandlerAdapter;, +public class EchoServerHandler extends ChannelInboundStreamHandlerAdapter {, +    public void inboundBufferUpdated(ChannelInboundHandlerContext<Byte> ctx, ChannelBuffer in) {, +++ b/example/src/main/java/io/netty/example/echo/EchoClient.java, +                             //new LoggingHandler(LogLevel.INFO),, +++ b/example/src/main/java/io/netty/example/echo/EchoServer.java, +                             //new LoggingHandler(LogLevel.INFO),, +++ b/example/src/main/java/io/netty/example/echo/EchoServerHandler.java, +import io.netty.channel.ChannelInboundStreamHandlerAdapter;, +public class EchoServerHandler extends ChannelInboundStreamHandlerAdapter {, +    public void inboundBufferUpdated(ChannelInboundHandlerContext<Byte> ctx, ChannelBuffer in) {, +++ b/transport/src/main/java/io/netty/channel/ChannelInboundStreamHandlerAdapter.java, +import io.netty.buffer.ChannelBuffer;, +, +, +    @Override, +    public void inboundBufferUpdated(ChannelInboundHandlerContext<Byte> ctx), +            throws Exception {, +        inboundBufferUpdated(ctx, ctx.inbound().byteBuffer());, +    }, +, +    public void inboundBufferUpdated(ChannelInboundHandlerContext<Byte> ctx, ChannelBuffer in), +            throws Exception {, +        ctx.nextInboundByteBuffer().writeBytes(in);, +        in.discardReadBytes();, +    }, +++ b/example/src/main/java/io/netty/example/echo/EchoClient.java, +                             //new LoggingHandler(LogLevel.INFO),, +++ b/example/src/main/java/io/netty/example/echo/EchoServer.java, +                             //new LoggingHandler(LogLevel.INFO),, +++ b/example/src/main/java/io/netty/example/echo/EchoServerHandler.java, +import io.netty.channel.ChannelInboundStreamHandlerAdapter;, +public class EchoServerHandler extends ChannelInboundStreamHandlerAdapter {, +    public void inboundBufferUpdated(ChannelInboundHandlerContext<Byte> ctx, ChannelBuffer in) {, +++ b/transport/src/main/java/io/netty/channel/ChannelInboundStreamHandlerAdapter.java, +import io.netty.buffer.ChannelBuffer;, +, +, +    @Override, +    public void inboundBufferUpdated(ChannelInboundHandlerContext<Byte> ctx), +            throws Exception {, +        inboundBufferUpdated(ctx, ctx.inbound().byteBuffer());, +    }, +, +    public void inboundBufferUpdated(ChannelInboundHandlerContext<Byte> ctx, ChannelBuffer in), +            throws Exception {, +        ctx.nextInboundByteBuffer().writeBytes(in);, +        in.discardReadBytes();, +    }, +++ b/transport/src/main/java/io/netty/channel/DefaultChannelPipeline.java, +        } finally {, +            ChannelBufferHolder<Object> inbound = ctx.inbound();, +            if (inbound.isEmpty() && inbound.hasByteBuffer()) {, +                inbound.byteBuffer().discardReadBytes();, +            }]