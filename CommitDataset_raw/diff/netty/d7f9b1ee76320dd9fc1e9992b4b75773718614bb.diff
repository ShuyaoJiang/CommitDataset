[+++ b/transport/src/main/java/io/netty/channel/AbstractChannel.java, +                closeIfClosed();, +                closeIfClosed();, +            closeIfClosed(); // doDisconnect() might have closed the channel, +++ b/transport/src/main/java/io/netty/channel/AbstractChannel.java, +                closeIfClosed();, +                closeIfClosed();, +            closeIfClosed(); // doDisconnect() might have closed the channel, +++ b/transport/src/main/java/io/netty/channel/local/LocalChannel.java, +import java.util.Collections;, +                    Collections.addAll(peer.inboundBuffer, msgsCopy);, +++ b/transport/src/main/java/io/netty/channel/AbstractChannel.java, +                closeIfClosed();, +                closeIfClosed();, +            closeIfClosed(); // doDisconnect() might have closed the channel, +++ b/transport/src/main/java/io/netty/channel/local/LocalChannel.java, +import java.util.Collections;, +                    Collections.addAll(peer.inboundBuffer, msgsCopy);, +++ b/transport/src/main/java/io/netty/channel/nio/AbstractNioChannel.java, +                closeIfClosed();, +++ b/transport/src/main/java/io/netty/channel/AbstractChannel.java, +                closeIfClosed();, +                closeIfClosed();, +            closeIfClosed(); // doDisconnect() might have closed the channel, +++ b/transport/src/main/java/io/netty/channel/local/LocalChannel.java, +import java.util.Collections;, +                    Collections.addAll(peer.inboundBuffer, msgsCopy);, +++ b/transport/src/main/java/io/netty/channel/nio/AbstractNioChannel.java, +                closeIfClosed();, +++ b/transport/src/main/java/io/netty/channel/oio/AbstractOioChannel.java, +                closeIfClosed();]