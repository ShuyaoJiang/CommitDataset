[+++ b/src/main/java/org/jboss/netty/handler/codec/serialization/CompactObjectInputStream.java, +        case CompactObjectOutputStream.TYPE_FAT_DESCRIPTOR:, +        case CompactObjectOutputStream.TYPE_THIN_DESCRIPTOR:, +++ b/src/main/java/org/jboss/netty/handler/codec/serialization/CompactObjectInputStream.java, +        case CompactObjectOutputStream.TYPE_FAT_DESCRIPTOR:, +        case CompactObjectOutputStream.TYPE_THIN_DESCRIPTOR:, +++ b/src/main/java/org/jboss/netty/handler/codec/serialization/CompactObjectOutputStream.java, +    static final int TYPE_FAT_DESCRIPTOR = 0;, +    static final int TYPE_THIN_DESCRIPTOR = 1;, +        Class<?> clazz = desc.forClass();, +        if (clazz.isPrimitive() || clazz.isArray()) {, +            write(TYPE_FAT_DESCRIPTOR);, +            write(TYPE_THIN_DESCRIPTOR);]