[+++ b/buffer/src/test/java/io/netty/buffer/PooledByteBufAllocatorTest.java, +import java.util.concurrent.atomic.AtomicBoolean;, +        final AtomicBoolean threadCachesCreated = new AtomicBoolean(true);, +, +                    // Make sure that thread caches are actually created,, +                    // so that down below we are not testing for zero, +                    // thread caches without any of them ever having been initialized., +                    if (allocator.numThreadLocalCaches() == 0) {, +                        threadCachesCreated.set(false);, +                    }, +, +        assertTrue(threadCachesCreated.get());]