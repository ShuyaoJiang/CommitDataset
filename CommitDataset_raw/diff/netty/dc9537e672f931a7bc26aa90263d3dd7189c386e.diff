[+++ b/testsuite/src/test/java/io/netty/testsuite/transport/socket/SocketConnectionAttemptTest.java, +import static org.junit.Assume.*;, +        cb.handler(new TestHandler()).option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 2000);, +        boolean badHostTimedOut = true;, +            badHostTimedOut = false;, +        assumeThat("The connection attempt to " + BAD_HOST + " does not time out.", badHostTimedOut, is(true));, +, +        cb.handler(new TestHandler()).option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 4000);, +            if (future.await(1000)) {, +                if (future.isSuccess()) {, +                    fail("A connection attempt to " + BAD_HOST + " must not succeed.");, +                } else {, +                    throw future.cause();, +                }, +            }, +, +            InternalLoggerFactory.getInstance(, +                    SocketConnectionAttemptTest.class).warn("Unexpected exception:", cause);]