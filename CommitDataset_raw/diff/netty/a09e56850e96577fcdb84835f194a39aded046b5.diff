[+++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/EpollEventLoop.java, +                    try {, +                    } finally {, +                        // Ensure we always run tasks., +                    }, +                    try {, +                    } finally {, +                        // Ensure we always run tasks., +                }, +            } catch (Throwable t) {, +                handleLoopException(t);, +            }, +            // Always handle shutdown even if the loop processing threw an exception., +            try {, +                handleLoopException(t);, +            }, +        }, +    }, +, +    private static void handleLoopException(Throwable t) {, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/EpollEventLoop.java, +                    try {, +                    } finally {, +                        // Ensure we always run tasks., +                    }, +                    try {, +                    } finally {, +                        // Ensure we always run tasks., +                }, +            } catch (Throwable t) {, +                handleLoopException(t);, +            }, +            // Always handle shutdown even if the loop processing threw an exception., +            try {, +                handleLoopException(t);, +            }, +        }, +    }, +, +    private static void handleLoopException(Throwable t) {, +++ b/transport/src/main/java/io/netty/channel/nio/NioEventLoop.java, +                    try {, +                    } finally {, +                        // Ensure we always run tasks., +                    }, +                    try {, +                    } finally {, +                        // Ensure we always run tasks., +                }, +            } catch (Throwable t) {, +                handleLoopException(t);, +            }, +            // Always handle shutdown even if the loop processing threw an exception., +            try {, +                        return;, +                handleLoopException(t);, +            }, +        }, +    }, +, +    private static void handleLoopException(Throwable t) {]