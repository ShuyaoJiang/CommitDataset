[+++ b/transport/src/main/java/io/netty/channel/pool/FixedChannelPool.java, +import java.util.concurrent.atomic.AtomicInteger;, +    private final AtomicInteger acquiredChannelCount = new AtomicInteger();, +    /** Returns the number of acquired channels that this pool thinks it has. */, +    public int acquiredChannelCount() {, +        return acquiredChannelCount.get();, +    }, +, +        if (acquiredChannelCount.get() < maxConnections) {, +            assert acquiredChannelCount.get() >= 0;, +        int currentCount = acquiredChannelCount.decrementAndGet();, +        assert currentCount >= 0;, +        while (acquiredChannelCount.get() < maxConnections) {, +        assert acquiredChannelCount.get() >= 0;, +            acquiredChannelCount.incrementAndGet();, +            acquiredChannelCount.set(0);]