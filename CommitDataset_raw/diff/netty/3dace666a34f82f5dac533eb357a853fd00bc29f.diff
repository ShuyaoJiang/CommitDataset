[+++ b/codec-http/src/main/java/io/netty/handler/codec/http/HttpObjectEncoder.java, +        ByteBuf buf = null;, +            buf = ctx.alloc().buffer();, +                    if (buf != null && buf.writableBytes() >= contentLength && msg instanceof HttpContent) {, +                        // merge into other buffer for performance reasons, +                        buf.writeBytes(((HttpContent) msg).content());, +                        out.add(buf);, +                    } else {, +                        if (buf != null) {, +                            out.add(buf);, +                        }, +                    }, +                } else {, +                    if (buf != null) {, +                        out.add(buf);, +                }, +                if (buf != null) {, +                    out.add(buf);, +                }, +        } else {, +            if (buf != null) {, +                out.add(buf);, +            }]