[+++ b/example/src/main/java/io/netty/example/http2/helloworld/client/Http2ClientInitializer.java, +import io.netty.handler.ssl.ApplicationProtocolNames;, +import io.netty.handler.ssl.ApplicationProtocolNegotiationHandler;, +        pipeline.addLast(sslCtx.newHandler(ch.alloc()));, +        // We must wait for the handshake to finish and the protocol to be negotiated before configuring, +        // the HTTP/2 components of the pipeline., +        pipeline.addLast(new ApplicationProtocolNegotiationHandler("") {, +            @Override, +            protected void configurePipeline(ChannelHandlerContext ctx, String protocol) {, +                if (ApplicationProtocolNames.HTTP_2.equals(protocol)) {, +                    ChannelPipeline p = ctx.pipeline();, +                    p.addLast(connectionHandler);, +                    configureEndOfPipeline(p);, +                    return;, +                }, +                ctx.close();, +                throw new IllegalStateException("unknown protocol: " + protocol);, +            }, +        });]