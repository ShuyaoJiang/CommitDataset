[+++ b/src/main/java/org/jboss/netty/handler/codec/embedder/AbstractCodecEmbedder.java, +import org.jboss.netty.channel.DefaultChannelPipeline;, +        pipeline = new EmbeddedChannelPipeline();, +        configurePipeline(handlers);, +    private void configurePipeline(ChannelHandler... handlers) {, +        if (handlers == null) {, +            throw new NullPointerException("handlers");, +        }, +, +        if (handlers.length == 0) {, +            throw new IllegalArgumentException(, +                    "handlers should contain at least one " +, +                    ChannelHandler.class.getSimpleName() + '.');, +        }, +, +        for (int i = 0; i < handlers.length; i ++) {, +            ChannelHandler h = handlers[i];, +            if (h == null) {, +                throw new NullPointerException("handlers[" + i + "]");, +            }, +            pipeline.addLast(String.valueOf(i), handlers[i]);, +        }, +        pipeline.addLast("SINK", sink);, +    }, +, +    private static final class EmbeddedChannelPipeline extends DefaultChannelPipeline {, +        EmbeddedChannelPipeline() {, +            super();]