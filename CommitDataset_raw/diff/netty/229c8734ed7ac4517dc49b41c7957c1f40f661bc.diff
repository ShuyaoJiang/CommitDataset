[+++ b/src/main/java/org/jboss/netty/handler/codec/replay/ReplayingDecoder.java, +    private ChannelBuffer cumulation;, +    private boolean needsCleanup = false;, +        ChannelBuffer cumulation = this.cumulation;, +        ChannelBuffer buf = this.cumulation;, +        needsCleanup = true;, +                this.cumulation = null;, +            if (!needsCleanup) {, +            } else {, +                needsCleanup = false;, +            ChannelBuffer cumulation = this.cumulation;, +            this.cumulation = null;, +        ChannelBuffer buf = this.cumulation;, +            if (cumulation == null) {, +                cumulation = buf;, +                buf = cumulation;]