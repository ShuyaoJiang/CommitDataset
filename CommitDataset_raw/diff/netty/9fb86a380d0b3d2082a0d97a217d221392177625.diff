[+++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/AbstractEpollChannel.java, +        final void epollInBefore() { maybeMoreDataToRead = false; }, +                readPending = false;, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/AbstractEpollChannel.java, +        final void epollInBefore() { maybeMoreDataToRead = false; }, +                readPending = false;, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/AbstractEpollServerChannel.java, +            if (fd().isInputShutdown()) {, +            final ChannelConfig config = config();, +            epollInBefore();, +                        readPending = false;, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/AbstractEpollChannel.java, +        final void epollInBefore() { maybeMoreDataToRead = false; }, +                readPending = false;, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/AbstractEpollServerChannel.java, +            if (fd().isInputShutdown()) {, +            final ChannelConfig config = config();, +            epollInBefore();, +                        readPending = false;, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/AbstractEpollStreamChannel.java, +                    readPending = false;, +            if (fd().isInputShutdown()) {, +            final ChannelConfig config = config();, +            epollInBefore();, +                    readPending = false;, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/AbstractEpollChannel.java, +        final void epollInBefore() { maybeMoreDataToRead = false; }, +                readPending = false;, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/AbstractEpollServerChannel.java, +            if (fd().isInputShutdown()) {, +            final ChannelConfig config = config();, +            epollInBefore();, +                        readPending = false;, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/AbstractEpollStreamChannel.java, +                    readPending = false;, +            if (fd().isInputShutdown()) {, +            final ChannelConfig config = config();, +            epollInBefore();, +                    readPending = false;, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/EpollDatagramChannel.java, +            if (fd().isInputShutdown()) {, +            DatagramChannelConfig config = config();, +            epollInBefore();, +                    readPending = false;, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/AbstractEpollChannel.java, +        final void epollInBefore() { maybeMoreDataToRead = false; }, +                readPending = false;, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/AbstractEpollServerChannel.java, +            if (fd().isInputShutdown()) {, +            final ChannelConfig config = config();, +            epollInBefore();, +                        readPending = false;, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/AbstractEpollStreamChannel.java, +                    readPending = false;, +            if (fd().isInputShutdown()) {, +            final ChannelConfig config = config();, +            epollInBefore();, +                    readPending = false;, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/EpollDatagramChannel.java, +            if (fd().isInputShutdown()) {, +            DatagramChannelConfig config = config();, +            epollInBefore();, +                    readPending = false;, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/EpollDomainSocketChannel.java, +            if (fd().isInputShutdown()) {, +            final ChannelConfig config = config();, +            epollInBefore();, +                        readPending = false;, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/AbstractEpollChannel.java, +        final void epollInBefore() { maybeMoreDataToRead = false; }, +                readPending = false;, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/AbstractEpollServerChannel.java, +            if (fd().isInputShutdown()) {, +            final ChannelConfig config = config();, +            epollInBefore();, +                        readPending = false;, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/AbstractEpollStreamChannel.java, +                    readPending = false;, +            if (fd().isInputShutdown()) {, +            final ChannelConfig config = config();, +            epollInBefore();, +                    readPending = false;, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/EpollDatagramChannel.java, +            if (fd().isInputShutdown()) {, +            DatagramChannelConfig config = config();, +            epollInBefore();, +                    readPending = false;, +++ b/transport-native-epoll/src/main/java/io/netty/channel/epoll/EpollDomainSocketChannel.java, +            if (fd().isInputShutdown()) {, +            final ChannelConfig config = config();, +            epollInBefore();, +                        readPending = false;, +++ b/transport-native-epoll/src/test/java/io/netty/channel/epoll/EpollSocketChannelTest.java, +    @Test, +    public void testReadPendingIsResetAfterEachRead() throws InterruptedException {, +        EventLoopGroup group = new EpollEventLoopGroup();, +        try {, +            runReadPendingTest(group, EpollServerSocketChannel.class, EpollSocketChannel.class,, +                    new InetSocketAddress(0));, +            runReadPendingTest(group, EpollServerDomainSocketChannel.class, EpollDomainSocketChannel.class,]