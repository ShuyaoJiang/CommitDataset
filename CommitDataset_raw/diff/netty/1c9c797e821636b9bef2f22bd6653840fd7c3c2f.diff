[+++ b/transport/src/main/java/io/netty/channel/ChannelOutboundBuffer.java, +, +        final int mask = buffer.length - 1;, +        int i = flushed;, +        while (i != unflushed && buffer[i].msg != null) {, +            Entry entry = buffer[i];, +            if (!entry.promise.setUncancellable()) {, +                // Was cancelled so make sure we free up memory and notify about the freed bytes, +                int pending = entry.cancel();, +                decrementPendingOutboundBytes(pending);, +            }, +            i = i + 1 & mask;, +        }, +]