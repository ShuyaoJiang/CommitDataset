[+++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyHttpResponseStreamIdHandler.java, +import io.netty.handler.codec.http.HttpMessage;, +        MessageToMessageCodec<HttpRequest, HttpRequest, Object, Object> {, +        super(new Class<?>[] { HttpRequest.class, SpdyRstStreamFrame.class }, new Class<?>[] { HttpResponse.class });, +    public Object encode(ChannelHandlerContext ctx, Object msg) throws Exception {, +        if (msg instanceof HttpMessage) {, +            boolean contains = ((HttpMessage)msg).containsHeader(SpdyHttpHeaders.Names.STREAM_ID);, +                ids.add(SpdyHttpHeaders.getStreamId((HttpMessage) msg));, +        } else if (msg instanceof SpdyRstStreamFrame) {, +            ids.remove(((SpdyRstStreamFrame)msg).getStreamId());, +        }, +, +++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyHttpResponseStreamIdHandler.java, +import io.netty.handler.codec.http.HttpMessage;, +        MessageToMessageCodec<HttpRequest, HttpRequest, Object, Object> {, +        super(new Class<?>[] { HttpRequest.class, SpdyRstStreamFrame.class }, new Class<?>[] { HttpResponse.class });, +    public Object encode(ChannelHandlerContext ctx, Object msg) throws Exception {, +        if (msg instanceof HttpMessage) {, +            boolean contains = ((HttpMessage)msg).containsHeader(SpdyHttpHeaders.Names.STREAM_ID);, +                ids.add(SpdyHttpHeaders.getStreamId((HttpMessage) msg));, +        } else if (msg instanceof SpdyRstStreamFrame) {, +            ids.remove(((SpdyRstStreamFrame)msg).getStreamId());, +        }, +, +++ b/example/src/main/java/io/netty/example/http/websocketx/autobahn/package-info.java, + * <h3>How to run the tests on Ubuntu</h3>, + * <p>01. Add <tt>ppa:twisted-dev/ppa</tt> to your system's Software Sources, + * <p>02. Install Twisted V11: <tt>sudo apt-get install python-twisted</tt>, + * <p>03. Intall Python Setup Tools: <tt>sudo apt-get install python-setuptools</tt>, + * <p>04. Install AutoBahn: <tt>sudo easy_install Autobahn</tt>. If you already have Autobahn installed, you may need, + * to upgrade it: <tt>sudo easy_install --upgrade Autobahn</tt>. Make suer v0.4.10 is installed., + * <p>05. Get AutoBahn testsuite source code: <tt>git clone git@github.com:tavendo/AutobahnPython.git</tt>, + * <p>06. Go to AutoBahn directory: <tt>cd AutobahnPython</tt>, + * <p>07. Checkout stable version: <tt>git checkout v0.4.10</tt>, + * <p>08. Go to test suite directory: <tt>cd testsuite/websockets</tt>, + *, + * <p>09. Edit <tt>fuzzing_clinet_spec.json</tt> and set the hybi specification version to 10 or 17 (RFC 6455)., + *       "servers": [{"agent": "Netty", "url": "ws://localhost:9000", "options": {"version": 17}}],, + *       "exclude-agent-cases": {"FoobarServer*": ["4.*", "1.1.3"]}, + * <p>10. Run our <tt>AutobahnServer</tt> located in this package. If you are in Eclipse IDE, right click on, + * <p>11. Run the Autobahn test <tt>python fuzzing_client.py</tt>. Note that the actual test case python code is, + * located with the easy_install package (e.g. in <tt>/usr/local/lib/python2.7/dist-packages/, + * autobahn-0.4.10-py2.7.egg/autobahn/cases</tt>) and not in the checked out git repository., + * <p>12. See the results in <tt>reports/servers/index.html</tt>]