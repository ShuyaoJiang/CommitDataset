[+++ b/codec/src/main/java/io/netty/handler/codec/ReplayingDecoderBuffer.java, +        if (fromIndex == toIndex) {, +            return -1;, +        }, +, +        if (Math.max(fromIndex, toIndex) > buffer.writerIndex()) {, +, +        return buffer.indexOf(fromIndex, toIndex, value);, +        final int readerIndex = buffer.readerIndex();, +        return bytesBefore(readerIndex, buffer.writerIndex() - readerIndex, value);, +        final int writerIndex = buffer.writerIndex();, +        if (index >= writerIndex) {, +, +        if (index <= writerIndex - length) {, +            return buffer.bytesBefore(index, length, value);, +        }, +, +        int res = buffer.bytesBefore(index, writerIndex - index, value);, +        if (res < 0) {, +            throw REPLAY;, +        } else {, +            return res;, +        }, +        if (index <= writerIndex - length) {]