[+++ b/codec/src/main/java/io/netty/handler/codec/compression/Snappy.java, +                    // We need at least 4 remaining bytes to read the hash, +                    if (nextIndex > maxIndex - 4) {, +++ b/codec/src/main/java/io/netty/handler/codec/compression/Snappy.java, +                    // We need at least 4 remaining bytes to read the hash, +                    if (nextIndex > maxIndex - 4) {, +++ b/codec/src/main/java/io/netty/handler/codec/compression/SnappyFramedEncoder.java, +                if (dataLength >= 32768) {, +                    ByteBuf slice = in.readSlice(32767);, +                    snappy.encode(slice, out, 32767);, +                    dataLength -= 32767;, +++ b/codec/src/main/java/io/netty/handler/codec/compression/Snappy.java, +                    // We need at least 4 remaining bytes to read the hash, +                    if (nextIndex > maxIndex - 4) {, +++ b/codec/src/main/java/io/netty/handler/codec/compression/SnappyFramedEncoder.java, +                if (dataLength >= 32768) {, +                    ByteBuf slice = in.readSlice(32767);, +                    snappy.encode(slice, out, 32767);, +                    dataLength -= 32767;, +++ b/codec/src/test/java/io/netty/handler/codec/compression/SnappyIntegrationTest.java]