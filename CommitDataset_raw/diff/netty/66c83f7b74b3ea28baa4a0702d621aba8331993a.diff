[+++ b/codec-mqtt/src/main/java/io/netty/handler/codec/mqtt/MqttConnectPayload.java, +import io.netty.util.CharsetUtil;, +    private final byte[] willMessage;, +    private final byte[] password;, +    /**, +     * @deprecated use {@link MqttConnectPayload#MqttConnectPayload(String, String, byte[], String, byte[])} instead, +     */, +    @Deprecated, +        this(, +          clientIdentifier,, +          willTopic,, +          willMessage.getBytes(CharsetUtil.UTF_8),, +          userName,, +          password.getBytes(CharsetUtil.UTF_8));, +    }, +, +    public MqttConnectPayload(, +            String clientIdentifier,, +            String willTopic,, +            byte[] willMessage,, +            String userName,, +            byte[] password) {, +    /**, +     * @deprecated use {@link MqttConnectPayload#willMessageInBytes()} instead, +     */, +    @Deprecated, +        return new String(willMessage, CharsetUtil.UTF_8);, +    }, +, +    public byte[] willMessageInBytes() {, +    /**, +     * @deprecated use {@link MqttConnectPayload#passwordInBytes()} instead, +     */, +    @Deprecated, +        return new String(password, CharsetUtil.UTF_8);, +    }, +, +    public byte[] passwordInBytes() {, +++ b/codec-mqtt/src/main/java/io/netty/handler/codec/mqtt/MqttConnectPayload.java, +import io.netty.util.CharsetUtil;, +    private final byte[] willMessage;, +    private final byte[] password;, +    /**, +     * @deprecated use {@link MqttConnectPayload#MqttConnectPayload(String, String, byte[], String, byte[])} instead, +     */, +    @Deprecated, +        this(, +          clientIdentifier,, +          willTopic,, +          willMessage.getBytes(CharsetUtil.UTF_8),, +          userName,, +          password.getBytes(CharsetUtil.UTF_8));, +    }, +, +    public MqttConnectPayload(, +            String clientIdentifier,, +            String willTopic,, +            byte[] willMessage,, +            String userName,, +            byte[] password) {, +    /**, +     * @deprecated use {@link MqttConnectPayload#willMessageInBytes()} instead, +     */, +    @Deprecated, +        return new String(willMessage, CharsetUtil.UTF_8);, +    }, +, +    public byte[] willMessageInBytes() {, +    /**, +     * @deprecated use {@link MqttConnectPayload#passwordInBytes()} instead, +     */, +    @Deprecated, +        return new String(password, CharsetUtil.UTF_8);, +    }, +, +    public byte[] passwordInBytes() {, +++ b/codec-mqtt/src/main/java/io/netty/handler/codec/mqtt/MqttDecoder.java, +        Result<byte[]> decodedWillMessage = null;, +            decodedWillMessage = decodeByteArray(buffer);, +        Result<byte[]> decodedPassword = null;, +            decodedPassword = decodeByteArray(buffer);, +    private static Result<byte[]> decodeByteArray(ByteBuf buffer) {, +        final Result<Integer> decodedSize = decodeMsbLsb(buffer);, +        int size = decodedSize.value;, +        byte[] bytes = new byte[size];, +        buffer.readBytes(bytes);, +        return new Result<byte[]>(bytes, decodedSize.numberOfBytesConsumed + size);, +    }, +, +++ b/codec-mqtt/src/main/java/io/netty/handler/codec/mqtt/MqttConnectPayload.java, +import io.netty.util.CharsetUtil;, +    private final byte[] willMessage;, +    private final byte[] password;, +    /**, +     * @deprecated use {@link MqttConnectPayload#MqttConnectPayload(String, String, byte[], String, byte[])} instead, +     */, +    @Deprecated, +        this(, +          clientIdentifier,, +          willTopic,]