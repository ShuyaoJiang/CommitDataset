[+++ b/transport/src/main/java/io/netty/channel/VoidChannelPromise.java, +        fireException(cause);, +        fireException(cause);, +        fireException(new CancellationException());, +, +    private void fireException(Throwable cause) {, +        // Only fire the exception if the channel is open and registered, +        // if not the pipeline is not setup and so it would hit the tail, +        // of the pipeline., +        // See https://github.com/netty/netty/issues/1517, +        if (fireException && channel.isRegistered()) {, +            channel.pipeline().fireExceptionCaught(cause);, +        }, +    }]