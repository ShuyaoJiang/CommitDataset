[+++ b/src/main/java/org/jboss/netty/channel/socket/nio/NioSocketChannel.java, +        setClosedFlag();, +    final void setClosedFlag() {, +        state = ST_CLOSED;, +    }, +, +++ b/src/main/java/org/jboss/netty/channel/socket/nio/NioSocketChannel.java, +        setClosedFlag();, +    final void setClosedFlag() {, +        state = ST_CLOSED;, +    }, +, +++ b/src/main/java/org/jboss/netty/channel/socket/nio/NioWorker.java, +        java.nio.channels.SocketChannel ch =, +            (java.nio.channels.SocketChannel) k.channel();, +            if (!ch.isConnected()) {, +                channel.setClosedFlag();, +            }, +            if (t instanceof AsynchronousCloseException) {, +                // Can happen, and does not need a user attention., +            } else {, +        }, +                } catch (Throwable t) {, +                    if (!channel.socket.isConnected()) {, +                        channel.setClosedFlag();, +                    }, +                    if (t instanceof AsynchronousCloseException) {, +                    } else {, +            }]