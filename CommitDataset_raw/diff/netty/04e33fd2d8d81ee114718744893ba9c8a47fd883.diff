[+++ b/transport/src/main/java/io/netty/channel/nio/NioEventLoop.java, +import io.netty.channel.EventLoop;, +    private void processSelectedKey(SelectionKey k, AbstractNioChannel ch) {, +            final EventLoop eventLoop;, +            try {, +                eventLoop = ch.eventLoop();, +            } catch (Throwable ignored) {, +                // If the channel implementation throws an exception because there is no event loop, we ignore this, +                // because we are only trying to determine if ch is registered to this event loop and thus has authority, +                // to close ch., +                return;, +            }, +            // Only close ch if ch is still registerd to this EventLoop. ch could have deregistered from the event loop, +            // and thus the SelectionKey could be cancelled as part of the deregistration process, but the channel is, +            // still healthy and should not be closed., +            // See https://github.com/netty/netty/issues/5125, +            if (eventLoop != this || eventLoop == null) {, +                return;, +            }]