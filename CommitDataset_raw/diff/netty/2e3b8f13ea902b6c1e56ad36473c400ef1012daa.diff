[+++ b/codec/src/main/java/io/netty/handler/codec/protobuf/ProtobufEncoder.java, +import io.netty.handler.codec.MessageToMessageEncoder;, +, +import static io.netty.buffer.Unpooled.*;, +public class ProtobufEncoder extends MessageToMessageEncoder<MessageLiteOrBuilder> {, +    protected Object encode(ChannelHandlerContext ctx, MessageLiteOrBuilder msg) throws Exception {, +            return wrappedBuffer(((MessageLite) msg).toByteArray());, +            return wrappedBuffer(((MessageLite.Builder) msg).build().toByteArray());, +        return null;]