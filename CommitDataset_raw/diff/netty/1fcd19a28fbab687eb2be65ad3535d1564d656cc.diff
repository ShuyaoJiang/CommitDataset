[+++ b/transport/src/main/java/io/netty/channel/nio/AbstractNioByteChannel.java, +                int byteBufCapacity = allocHandle.guess();, +                int totalReadAmount = 0;, +                    byteBuf = allocator.ioBuffer(byteBufCapacity);, +, +, +                    if (totalReadAmount >= Integer.MAX_VALUE - localReadAmount) {, +                        // Avoid overflow., +                        totalReadAmount = Integer.MAX_VALUE;, +                        break;, +                    }, +, +                    totalReadAmount += localReadAmount;, +                        // Read less than what the buffer can hold,, +                        // which might mean we drained the recv buffer completely., +                allocHandle.record(totalReadAmount);]