[+++ b/src/main/java/org/jboss/netty/util/HashedWheelTimer.java, +        private static final int ST_INIT = 0;, +        private static final int ST_CANCELLED = 1;, +        private static final int ST_EXPIRED = 2;, +, +        private final AtomicInteger state = new AtomicInteger(ST_INIT);, +            if (!state.compareAndSet(ST_INIT, ST_CANCELLED)) {, +                // TODO return false, +            return state.get() == ST_CANCELLED;, +            return state.get() != ST_INIT;, +            if (!state.compareAndSet(ST_INIT, ST_EXPIRED)) {]