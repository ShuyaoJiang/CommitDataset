[+++ b/transport/src/main/java/io/netty/channel/DefaultChannelHandlerContext.java, +    private void validatePromise(ChannelPromise promise, boolean allowVoidPromise) {, +, +        if (promise.getClass() == DefaultChannelPromise.class) {, +            return;, +        }, +, +        if (!allowVoidPromise && promise instanceof VoidChannelPromise) {, +, +++ b/transport/src/main/java/io/netty/channel/DefaultChannelHandlerContext.java, +    private void validatePromise(ChannelPromise promise, boolean allowVoidPromise) {, +, +        if (promise.getClass() == DefaultChannelPromise.class) {, +            return;, +        }, +, +        if (!allowVoidPromise && promise instanceof VoidChannelPromise) {, +, +++ b/transport/src/main/java/io/netty/channel/DefaultChannelPromise.java]