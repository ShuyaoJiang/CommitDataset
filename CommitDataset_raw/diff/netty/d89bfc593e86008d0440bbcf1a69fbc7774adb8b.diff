[+++ b/codec/src/main/java/io/netty/handler/codec/compression/JdkZlibDecoder.java, +    private static boolean looksLikeZlib(short cmf_flg) {, +++ b/codec/src/main/java/io/netty/handler/codec/compression/JdkZlibDecoder.java, +    private static boolean looksLikeZlib(short cmf_flg) {, +++ b/codec/src/test/java/io/netty/handler/codec/compression/ZlibTest.java, +        try {, +        } finally {, +            // close channel to prevent any leak even on exception, +            chDecoderGZip.close();, +        }, +        EmbeddedChannel chDecoderZlib = new EmbeddedChannel(createDecoder(decoderWrapper));, +        try {, +        } finally {, +            // close channels in all cases to guard against leak when exception was thrown, +            chEncoder.close();, +            chDecoderZlib.close();, +        }, +        EmbeddedChannel chDecoderZlib = new EmbeddedChannel(createDecoder(decoderWrapper));, +        try {, +            boolean decoded = false;, +                decoded = true;, +            assertFalse("should decode nothing", decoded);, +        } finally {, +            // close channels in all cases to guard against leak when exception was thrown, +            chEncoder.close();, +            chDecoderZlib.close();, +        }]