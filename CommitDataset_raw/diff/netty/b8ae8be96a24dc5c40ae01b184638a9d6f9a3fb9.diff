[+++ b/buffer/src/main/java/io/netty/buffer/DefaultCompositeByteBuf.java, +        if (index < 0) {, +            throw new IndexOutOfBoundsException("index must be >= 0");, +        }, +        if (length == 0) {, +            return;, +        }, +        int i = toComponentIndex(index);, +, +        if (index < 0) {, +            throw new IndexOutOfBoundsException("index must be >= 0");, +        }, +        if (length == 0) {, +            return;, +        }, +        int i = toComponentIndex(index);, +        if (index < 0) {, +            throw new IndexOutOfBoundsException("index must be >= 0");, +        }, +        if (length == 0) {, +            return;, +        }, +        int i = toComponentIndex(index);, +        if (index < 0) {, +            throw new IndexOutOfBoundsException("index must be >= 0");, +        }, +        if (length == 0) {, +            return;, +        }, +        int i = toComponentIndex(index);, +        if (index < 0) {, +            throw new IndexOutOfBoundsException("index must be >= 0");, +        }, +        if (length == 0) {, +            return new ByteBuffer[0];, +        }, +        int componentId = toComponentIndex(index);, +++ b/buffer/src/main/java/io/netty/buffer/DefaultCompositeByteBuf.java, +        if (index < 0) {, +            throw new IndexOutOfBoundsException("index must be >= 0");, +        }, +        if (length == 0) {, +            return;, +        }, +        int i = toComponentIndex(index);, +, +        if (index < 0) {, +            throw new IndexOutOfBoundsException("index must be >= 0");, +        }, +        if (length == 0) {, +            return;, +        }, +        int i = toComponentIndex(index);, +        if (index < 0) {, +            throw new IndexOutOfBoundsException("index must be >= 0");, +        }, +        if (length == 0) {, +            return;, +        }, +        int i = toComponentIndex(index);, +        if (index < 0) {, +            throw new IndexOutOfBoundsException("index must be >= 0");, +        }, +        if (length == 0) {, +            return;, +        }, +        int i = toComponentIndex(index);, +        if (index < 0) {, +            throw new IndexOutOfBoundsException("index must be >= 0");, +        }, +        if (length == 0) {, +            return new ByteBuffer[0];, +        }, +        int componentId = toComponentIndex(index);, +++ b/buffer/src/test/java/io/netty/buffer/AbstractCompositeChannelBufferTest.java, +, +    @Test , +    public void testEmptyBuffer() {, +        ByteBuf b = wrappedBuffer(new byte[] {1, 2}, new byte[] {3, 4});, +        b.readBytes(new byte[4]);, +        b.readBytes(new byte[0]);, +    }, +++ b/buffer/src/main/java/io/netty/buffer/DefaultCompositeByteBuf.java, +        if (index < 0) {, +            throw new IndexOutOfBoundsException("index must be >= 0");, +        }, +        if (length == 0) {, +            return;, +        }, +        int i = toComponentIndex(index);, +, +        if (index < 0) {, +            throw new IndexOutOfBoundsException("index must be >= 0");, +        }, +        if (length == 0) {, +            return;, +        }, +        int i = toComponentIndex(index);, +        if (index < 0) {, +            throw new IndexOutOfBoundsException("index must be >= 0");]