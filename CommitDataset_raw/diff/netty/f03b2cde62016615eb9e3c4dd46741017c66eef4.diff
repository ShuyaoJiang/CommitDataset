[+++ b/transport/src/main/java/io/netty/channel/oio/OioByteStreamChannel.java, +        int length = Math.max(1, Math.min(available(), buf.maxWritableBytes()));]