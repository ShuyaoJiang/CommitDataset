[+++ b/codec/src/main/java/io/netty/handler/codec/xml/XmlFrameDecoder.java, +                if (atLeastOneXmlElementFound && openBracketsCount == 0) {, +            if (length >= in.writerIndex()) {, +                length = in.readableBytes();, +            }, +++ b/codec/src/main/java/io/netty/handler/codec/xml/XmlFrameDecoder.java, +                if (atLeastOneXmlElementFound && openBracketsCount == 0) {, +            if (length >= in.writerIndex()) {, +                length = in.readableBytes();, +            }, +++ b/codec/src/main/java/io/netty/handler/codec/xml/package-info.java, +/*, + * Copyright 2012 The Netty Project, + *, + * The Netty Project licenses this file to you under the Apache License,, + * version 2.0 (the "License"); you may not use this file except in compliance, + * with the License. You may obtain a copy of the License at:, + *, + *   http://www.apache.org/licenses/LICENSE-2.0, + *, + * Unless required by applicable law or agreed to in writing, software, + * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT, + * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the, + * License for the specific language governing permissions and limitations, + * under the License., + */, +, +/**, + * Xml specific codecs., + */, +package io.netty.handler.codec.xml;, +++ b/codec/src/main/java/io/netty/handler/codec/xml/XmlFrameDecoder.java, +                if (atLeastOneXmlElementFound && openBracketsCount == 0) {, +            if (length >= in.writerIndex()) {, +                length = in.readableBytes();, +            }, +++ b/codec/src/main/java/io/netty/handler/codec/xml/package-info.java, +/*, + * Copyright 2012 The Netty Project, + *, + * The Netty Project licenses this file to you under the Apache License,, + * version 2.0 (the "License"); you may not use this file except in compliance, + * with the License. You may obtain a copy of the License at:, + *, + *   http://www.apache.org/licenses/LICENSE-2.0, + *, + * Unless required by applicable law or agreed to in writing, software, + * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT, + * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the, + * License for the specific language governing permissions and limitations, + * under the License., + */, +, +/**, + * Xml specific codecs., + */, +package io.netty.handler.codec.xml;, +++ b/codec/src/test/java/io/netty/handler/codec/xml/XmlFrameDecoderTest.java, +import java.io.IOException;, +import java.net.URISyntaxException;, +import java.net.URL;, +import java.nio.ByteBuffer;, +import java.nio.charset.StandardCharsets;, +import java.nio.file.Files;, +import java.nio.file.Paths;, +    private final List<String> xmlSamples;, +, +    public XmlFrameDecoderTest() throws IOException, URISyntaxException {, +        xmlSamples = Arrays.asList(sample("01"), sample("02"), sample("03"), sample("04"));, +    }, +                        "<root xmlns=\"http://www.acme.com/acme\" status=\"start\" time=\"0\" " +, +                        "timestamp=\"1362410584794\">\n<child active=\"1\" status=\"started\" id=\"935449\" " +, +                        "msgnr=\"2\"/>\n</root>",, +    private String sample(String number) throws IOException, URISyntaxException {, +        String path = "io/netty/handler/codec/xml/sample-".concat(number).concat(".xml");, +        URL url = getClass().getClassLoader().getResource(path);, +        if (url == null) {, +            throw new IllegalArgumentException("file not found: ".concat(path));, +        }, +        byte[] buf = Files.readAllBytes(Paths.get(url.toURI()));, +        return StandardCharsets.UTF_8.decode(ByteBuffer.wrap(buf)).toString();, +    }, +++ b/codec/src/main/java/io/netty/handler/codec/xml/XmlFrameDecoder.java, +                if (atLeastOneXmlElementFound && openBracketsCount == 0) {, +            if (length >= in.writerIndex()) {, +                length = in.readableBytes();, +            }, +++ b/codec/src/main/java/io/netty/handler/codec/xml/package-info.java, +/*, + * Copyright 2012 The Netty Project, + *, + * The Netty Project licenses this file to you under the Apache License,, + * version 2.0 (the "License"); you may not use this file except in compliance, + * with the License. You may obtain a copy of the License at:, + *, + *   http://www.apache.org/licenses/LICENSE-2.0, + *, + * Unless required by applicable law or agreed to in writing, software, + * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT, + * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the]