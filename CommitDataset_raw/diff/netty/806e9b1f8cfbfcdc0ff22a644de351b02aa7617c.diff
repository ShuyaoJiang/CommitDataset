[+++ b/codec/src/main/java/io/netty/handler/codec/base64/Base64Encoder.java, +import io.netty.channel.ChannelHandlerUtil;, +import io.netty.channel.ChannelOutboundMessageHandlerAdapter;, +public class Base64Encoder extends ChannelOutboundMessageHandlerAdapter<ByteBuf> {, +    public void flush(ChannelHandlerContext ctx,, +        ByteBuf buf = Base64.encode(msg, msg.readerIndex(), msg.readableBytes(), breakLines, dialect);, +        ChannelHandlerUtil.addToNextOutboundBuffer(ctx, buf);, +++ b/codec/src/main/java/io/netty/handler/codec/base64/Base64Encoder.java, +import io.netty.channel.ChannelHandlerUtil;, +import io.netty.channel.ChannelOutboundMessageHandlerAdapter;, +public class Base64Encoder extends ChannelOutboundMessageHandlerAdapter<ByteBuf> {, +    public void flush(ChannelHandlerContext ctx,, +        ByteBuf buf = Base64.encode(msg, msg.readerIndex(), msg.readableBytes(), breakLines, dialect);, +        ChannelHandlerUtil.addToNextOutboundBuffer(ctx, buf);, +++ b/codec/src/main/java/io/netty/handler/codec/bytes/ByteArrayEncoder.java, +        switch (ctx.nextOutboundBufferType()) {, +++ b/codec/src/main/java/io/netty/handler/codec/base64/Base64Encoder.java, +import io.netty.channel.ChannelHandlerUtil;, +import io.netty.channel.ChannelOutboundMessageHandlerAdapter;, +public class Base64Encoder extends ChannelOutboundMessageHandlerAdapter<ByteBuf> {, +    public void flush(ChannelHandlerContext ctx,, +        ByteBuf buf = Base64.encode(msg, msg.readerIndex(), msg.readableBytes(), breakLines, dialect);, +        ChannelHandlerUtil.addToNextOutboundBuffer(ctx, buf);, +++ b/codec/src/main/java/io/netty/handler/codec/bytes/ByteArrayEncoder.java, +        switch (ctx.nextOutboundBufferType()) {, +++ b/codec/src/test/java/io/netty/handler/codec/bytes/ByteArrayEncoderTest.java, +        ch = new EmbeddedMessageChannel(new ByteArrayEncoder());, +++ b/codec/src/main/java/io/netty/handler/codec/base64/Base64Encoder.java, +import io.netty.channel.ChannelHandlerUtil;, +import io.netty.channel.ChannelOutboundMessageHandlerAdapter;, +public class Base64Encoder extends ChannelOutboundMessageHandlerAdapter<ByteBuf> {, +    public void flush(ChannelHandlerContext ctx,, +        ByteBuf buf = Base64.encode(msg, msg.readerIndex(), msg.readableBytes(), breakLines, dialect);, +        ChannelHandlerUtil.addToNextOutboundBuffer(ctx, buf);, +++ b/codec/src/main/java/io/netty/handler/codec/bytes/ByteArrayEncoder.java, +        switch (ctx.nextOutboundBufferType()) {, +++ b/codec/src/test/java/io/netty/handler/codec/bytes/ByteArrayEncoderTest.java, +        ch = new EmbeddedMessageChannel(new ByteArrayEncoder());, +++ b/handler/src/main/java/io/netty/handler/stream/ChunkedWriteHandler.java, +import io.netty.channel.ChannelHandlerUtil;, +                ChannelHandlerUtil.addToNextOutboundBuffer(ctx, currentEvent);, +++ b/codec/src/main/java/io/netty/handler/codec/base64/Base64Encoder.java, +import io.netty.channel.ChannelHandlerUtil;, +import io.netty.channel.ChannelOutboundMessageHandlerAdapter;, +public class Base64Encoder extends ChannelOutboundMessageHandlerAdapter<ByteBuf> {, +    public void flush(ChannelHandlerContext ctx,, +        ByteBuf buf = Base64.encode(msg, msg.readerIndex(), msg.readableBytes(), breakLines, dialect);, +        ChannelHandlerUtil.addToNextOutboundBuffer(ctx, buf);, +++ b/codec/src/main/java/io/netty/handler/codec/bytes/ByteArrayEncoder.java, +        switch (ctx.nextOutboundBufferType()) {, +++ b/codec/src/test/java/io/netty/handler/codec/bytes/ByteArrayEncoderTest.java, +        ch = new EmbeddedMessageChannel(new ByteArrayEncoder());, +++ b/handler/src/main/java/io/netty/handler/stream/ChunkedWriteHandler.java, +import io.netty.channel.ChannelHandlerUtil;, +                ChannelHandlerUtil.addToNextOutboundBuffer(ctx, currentEvent);, +++ b/testsuite/src/test/java/io/netty/testsuite/transport/socket/SocketSslEchoTest.java, +import io.netty.buffer.BufUtil;, +import io.netty.channel.ChannelOperationHandlerAdapter;, +import io.netty.channel.ChannelOutboundMessageHandlerAdapter;, +import io.netty.channel.ChannelPromise;, +import io.netty.handler.codec.ByteToByteEncoder;, +import io.netty.handler.stream.ChunkedWriteHandler;, +        testSslEcho0(sb, cb, false);, +    }, +, +, +    @Test, +    public void testSslEchoWithChunkHandler() throws Throwable {, +        run();, +    }, +, +    public void testSslEchoWithChunkHandler(ServerBootstrap sb, Bootstrap cb) throws Throwable {, +        testSslEcho0(sb, cb, true);, +    }, +, +    private void testSslEcho0(ServerBootstrap sb, Bootstrap cb, final boolean chunkWriteHandler) throws Throwable {, +                if (chunkWriteHandler) {, +                    sch.pipeline().addLast(new ChunkedWriteHandler());, +                }, +                if (chunkWriteHandler) {, +                    sch.pipeline().addLast(new ChunkedWriteHandler());, +                }, +, +++ b/codec/src/main/java/io/netty/handler/codec/base64/Base64Encoder.java, +import io.netty.channel.ChannelHandlerUtil;, +import io.netty.channel.ChannelOutboundMessageHandlerAdapter;, +public class Base64Encoder extends ChannelOutboundMessageHandlerAdapter<ByteBuf> {, +    public void flush(ChannelHandlerContext ctx,, +        ByteBuf buf = Base64.encode(msg, msg.readerIndex(), msg.readableBytes(), breakLines, dialect);, +        ChannelHandlerUtil.addToNextOutboundBuffer(ctx, buf);, +++ b/codec/src/main/java/io/netty/handler/codec/bytes/ByteArrayEncoder.java, +        switch (ctx.nextOutboundBufferType()) {, +++ b/codec/src/test/java/io/netty/handler/codec/bytes/ByteArrayEncoderTest.java, +        ch = new EmbeddedMessageChannel(new ByteArrayEncoder());, +++ b/handler/src/main/java/io/netty/handler/stream/ChunkedWriteHandler.java, +import io.netty.channel.ChannelHandlerUtil;, +                ChannelHandlerUtil.addToNextOutboundBuffer(ctx, currentEvent);, +++ b/testsuite/src/test/java/io/netty/testsuite/transport/socket/SocketSslEchoTest.java, +import io.netty.buffer.BufUtil;, +import io.netty.channel.ChannelOperationHandlerAdapter;]