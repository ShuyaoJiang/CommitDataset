[+++ b/src/main/java/org/jboss/netty/handler/codec/http/HttpCodecUtil.java, +    static final String DEFAULT_CHARSET = "UTF-8";, +, +++ b/src/main/java/org/jboss/netty/handler/codec/http/HttpCodecUtil.java, +    static final String DEFAULT_CHARSET = "UTF-8";, +, +++ b/src/main/java/org/jboss/netty/handler/codec/http/QueryStringDecoder.java, +import java.util.regex.Matcher;, +import java.util.regex.Pattern;, +    private static final Pattern PARAM_PATTERN = Pattern.compile("([^=]*)=([^&]*)&*");, +        this(uri, HttpCodecUtil.DEFAULT_CHARSET);, +        this(uri, HttpCodecUtil.DEFAULT_CHARSET);, +        int pathEndPos = uri.indexOf('?');, +        if (pathEndPos < 0) {, +            path = uri;, +        } else {, +            path = uri.substring(0, pathEndPos);, +            decodeParams(uri.substring(pathEndPos + 1));, +        }, +        Matcher m = PARAM_PATTERN.matcher(s);, +        int pos = 0;, +        while (m.find(pos)) {, +            pos = m.end();, +            String key = decodeComponent(m.group(1), charset);, +            String value = decodeComponent(m.group(2), charset);, +, +            List<String> values = params.get(key);, +                params.put(key,values);, +            values.add(value);, +        if (s == null) {, +            return "";, +        }, +, +++ b/src/main/java/org/jboss/netty/handler/codec/http/HttpCodecUtil.java, +    static final String DEFAULT_CHARSET = "UTF-8";, +, +++ b/src/main/java/org/jboss/netty/handler/codec/http/QueryStringDecoder.java, +import java.util.regex.Matcher;, +import java.util.regex.Pattern;, +    private static final Pattern PARAM_PATTERN = Pattern.compile("([^=]*)=([^&]*)&*");, +        this(uri, HttpCodecUtil.DEFAULT_CHARSET);, +        this(uri, HttpCodecUtil.DEFAULT_CHARSET);, +        int pathEndPos = uri.indexOf('?');, +        if (pathEndPos < 0) {, +            path = uri;, +        } else {, +            path = uri.substring(0, pathEndPos);, +            decodeParams(uri.substring(pathEndPos + 1));, +        }, +        Matcher m = PARAM_PATTERN.matcher(s);, +        int pos = 0;, +        while (m.find(pos)) {, +            pos = m.end();, +            String key = decodeComponent(m.group(1), charset);, +            String value = decodeComponent(m.group(2), charset);, +, +            List<String> values = params.get(key);, +                params.put(key,values);, +            values.add(value);, +        if (s == null) {, +            return "";, +        }, +, +++ b/src/main/java/org/jboss/netty/handler/codec/http/QueryStringEncoder.java, +        this(uri, HttpCodecUtil.DEFAULT_CHARSET);]