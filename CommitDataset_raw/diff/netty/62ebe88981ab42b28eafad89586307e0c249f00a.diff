[+++ b/transport/src/main/java/io/netty/channel/nio/NioEventLoop.java, +        if (ioRatio <= 0 || ioRatio > 100) {, +            throw new IllegalArgumentException("ioRatio: " + ioRatio + " (expected: 0 < ioRatio < 101)");, +                if (ioRatio == 100) {, +                    processSelectedKeys();, +                    runAllTasks();, +                } else {, +                    final long ioStartTime = System.nanoTime();, +, +                    processSelectedKeys();, +, +                    final long ioTime = System.nanoTime() - ioStartTime;, +                }, +    private void processSelectedKeys() {, +        if (selectedKeys != null) {, +            processSelectedKeysOptimized(selectedKeys.flip());, +        } else {, +            processSelectedKeysPlain(selector.selectedKeys());, +        }, +    }, +]