[+++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyFrameEncoder.java, +            ByteBuf data = headerBlockEncoder.encode(ctx, spdySynStreamFrame);, +            try {, +            } finally {, +                data.release();, +            }, +            ByteBuf data = headerBlockEncoder.encode(ctx, spdySynReplyFrame);, +            try {, +            } finally {, +                data.release();, +            }, +            ByteBuf data = headerBlockEncoder.encode(ctx, spdyHeadersFrame);, +            try {, +            } finally {, +                data.release();, +            }, +++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyFrameEncoder.java, +            ByteBuf data = headerBlockEncoder.encode(ctx, spdySynStreamFrame);, +            try {, +            } finally {, +                data.release();, +            }, +            ByteBuf data = headerBlockEncoder.encode(ctx, spdySynReplyFrame);, +            try {, +            } finally {, +                data.release();, +            }, +            ByteBuf data = headerBlockEncoder.encode(ctx, spdyHeadersFrame);, +            try {, +            } finally {, +                data.release();, +            }, +++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyHeaderBlockEncoder.java, +import io.netty.channel.ChannelHandlerContext;, +    abstract ByteBuf encode(ChannelHandlerContext ctx, SpdyHeadersFrame frame) throws Exception;, +++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyFrameEncoder.java, +            ByteBuf data = headerBlockEncoder.encode(ctx, spdySynStreamFrame);, +            try {, +            } finally {, +                data.release();, +            }, +            ByteBuf data = headerBlockEncoder.encode(ctx, spdySynReplyFrame);, +            try {, +            } finally {, +                data.release();, +            }, +            ByteBuf data = headerBlockEncoder.encode(ctx, spdyHeadersFrame);, +            try {, +            } finally {, +                data.release();, +            }, +++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyHeaderBlockEncoder.java, +import io.netty.channel.ChannelHandlerContext;, +    abstract ByteBuf encode(ChannelHandlerContext ctx, SpdyHeadersFrame frame) throws Exception;, +++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyHeaderBlockJZlibEncoder.java, +import io.netty.channel.ChannelHandlerContext;, +import static io.netty.handler.codec.spdy.SpdyCodecUtil.*;, +, +    public synchronized ByteBuf encode(ChannelHandlerContext ctx, SpdyHeadersFrame frame) throws Exception {, +        ByteBuf decompressed = super.encode(ctx, frame);, +        ByteBuf compressed = ctx.alloc().buffer();, +++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyFrameEncoder.java, +            ByteBuf data = headerBlockEncoder.encode(ctx, spdySynStreamFrame);, +            try {, +            } finally {, +                data.release();, +            }, +            ByteBuf data = headerBlockEncoder.encode(ctx, spdySynReplyFrame);, +            try {, +            } finally {, +                data.release();, +            }, +            ByteBuf data = headerBlockEncoder.encode(ctx, spdyHeadersFrame);, +            try {, +            } finally {, +                data.release();, +            }, +++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyHeaderBlockEncoder.java, +import io.netty.channel.ChannelHandlerContext;, +    abstract ByteBuf encode(ChannelHandlerContext ctx, SpdyHeadersFrame frame) throws Exception;, +++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyHeaderBlockJZlibEncoder.java, +import io.netty.channel.ChannelHandlerContext;, +import static io.netty.handler.codec.spdy.SpdyCodecUtil.*;, +, +    public synchronized ByteBuf encode(ChannelHandlerContext ctx, SpdyHeadersFrame frame) throws Exception {, +        ByteBuf decompressed = super.encode(ctx, frame);, +        ByteBuf compressed = ctx.alloc().buffer();, +++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyHeaderBlockRawEncoder.java, +import io.netty.channel.ChannelHandlerContext;, +, +import java.util.Set;, +    public ByteBuf encode(ChannelHandlerContext ctx, SpdyHeadersFrame frame) throws Exception {, +++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyFrameEncoder.java, +            ByteBuf data = headerBlockEncoder.encode(ctx, spdySynStreamFrame);, +            try {, +            } finally {, +                data.release();, +            }, +            ByteBuf data = headerBlockEncoder.encode(ctx, spdySynReplyFrame);, +            try {]