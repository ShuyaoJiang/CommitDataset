[+++ b/buffer/src/main/java/io/netty/buffer/UnpooledUnsafeNoCleanerDirectByteBuf.java, +        if (newCapacity == oldCapacity) {, +            return this;, +, +        ByteBuffer newBuffer = reallocateDirect(buffer, newCapacity);, +, +        if (newCapacity < oldCapacity) {, +            if (readerIndex() < newCapacity) {, +                if (writerIndex() > newCapacity) {, +                    writerIndex(newCapacity);, +                }, +        setByteBuffer(newBuffer, false);]