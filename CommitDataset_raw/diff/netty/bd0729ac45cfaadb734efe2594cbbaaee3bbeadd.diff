[+++ b/transport/src/main/java/io/netty/channel/group/DefaultChannelGroup.java, +import io.netty.buffer.BufUtil;, +        if (message == null) {, +            throw new NullPointerException("message");, +, +        Map<Integer, ChannelFuture> futures = new LinkedHashMap<Integer, ChannelFuture>(size());, +            BufUtil.retain(message);, +, +        BufUtil.release(message);]