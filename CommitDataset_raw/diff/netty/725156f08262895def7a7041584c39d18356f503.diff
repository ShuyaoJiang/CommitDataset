[+++ b/transport/src/main/java/io/netty/channel/socket/aio/AioSocketChannel.java, +, +    private static final int NO_WRITE_IN_PROGRESS = 0;, +    private static final int WRITE_IN_PROGRESS = 1;, +    private static final int WRITE_FAILED = -2;, +, +    private int writeInProgress;, +        if (inDoFlushByteBuffer || writeInProgress != NO_WRITE_IN_PROGRESS) {, +                    writeInProgress = WRITE_IN_PROGRESS;, +                    if (writeInProgress != NO_WRITE_IN_PROGRESS) {, +                        if (writeInProgress == WRITE_FAILED) {, +                            // failed because of an exception so reset state and break out of the loop now, +                            // See #1242, +                            writeInProgress = NO_WRITE_IN_PROGRESS;, +                            break;, +                        }, +            channel.writeInProgress = NO_WRITE_IN_PROGRESS;, +            channel.writeInProgress = WRITE_FAILED;]