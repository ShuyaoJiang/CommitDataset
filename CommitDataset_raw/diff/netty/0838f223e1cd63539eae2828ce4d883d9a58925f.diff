[+++ b/transport/src/main/java/io/netty/channel/AbstractChannel.java, +                size = pipeline.estimatorHandle().size(msg);, +++ b/transport/src/main/java/io/netty/channel/AbstractChannel.java, +                size = pipeline.estimatorHandle().size(msg);, +++ b/transport/src/main/java/io/netty/channel/AbstractChannelHandlerContext.java, +                    task.size = ctx.pipeline.estimatorHandle().size(msg) + WRITE_TASK_OVERHEAD;, +++ b/transport/src/main/java/io/netty/channel/AbstractChannel.java, +                size = pipeline.estimatorHandle().size(msg);, +++ b/transport/src/main/java/io/netty/channel/AbstractChannelHandlerContext.java, +                    task.size = ctx.pipeline.estimatorHandle().size(msg) + WRITE_TASK_OVERHEAD;, +++ b/transport/src/main/java/io/netty/channel/DefaultChannelPipeline.java, +    private final Channel channel;, +    private MessageSizeEstimator.Handle estimatorHandle;, +    final MessageSizeEstimator.Handle estimatorHandle() {, +        if (estimatorHandle == null) {, +            estimatorHandle = channel.config().getMessageSizeEstimator().newHandle();, +        }, +        return estimatorHandle;, +    }, +]