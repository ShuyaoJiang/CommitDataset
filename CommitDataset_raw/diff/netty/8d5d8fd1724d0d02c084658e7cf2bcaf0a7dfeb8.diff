[+++ b/src/main/java/org/jboss/netty/channel/socket/nio/NioSocketChannel.java, +    final Object interestOpsLock = new Object();, +    final Object writeLock = new Object();, +, +++ b/src/main/java/org/jboss/netty/channel/socket/nio/NioSocketChannel.java, +    final Object interestOpsLock = new Object();, +    final Object writeLock = new Object();, +, +++ b/src/main/java/org/jboss/netty/channel/socket/nio/NioWorker.java, +, +        // interestOps can change at any time and at any thread., +        // Acquire a lock to avoid possible race condition., +        synchronized (channel.interestOpsLock) {, +        }, +        boolean changed = false;, +        try {, +            // interestOps can change at any time and at any thread., +            // Acquire a lock to avoid possible race condition., +            synchronized (channel.interestOpsLock) {, +            }]