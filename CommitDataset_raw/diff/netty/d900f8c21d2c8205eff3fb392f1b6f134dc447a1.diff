[+++ b/codec-http/src/main/java/io/netty/handler/codec/http/HttpContentEncoder.java, +            if (encoder.finish()) {, +                for (;;) {, +                    ByteBuf buf = (ByteBuf) encoder.readOutbound();, +                    if (buf == null) {, +                        break;, +                    }, +                    // Release the buffer, +                    // https://github.com/netty/netty/issues/1524, +                    buf.release();, +                }, +            }, +            encoder = null;, +, +            // Need to release the buffer after write it, +            // See https://github.com/netty/netty/issues/1524, +            buf.release();]