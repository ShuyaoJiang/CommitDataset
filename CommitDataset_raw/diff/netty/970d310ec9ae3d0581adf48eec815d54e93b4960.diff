[+++ b/resolver-dns/src/main/java/io/netty/resolver/dns/DnsNameResolver.java, +            {DnsRecordType.A};, +            {InternetProtocolFamily.IPv4};, +            {DnsRecordType.A, DnsRecordType.AAAA};, +            {InternetProtocolFamily.IPv4, InternetProtocolFamily.IPv6};, +            {DnsRecordType.AAAA};, +            {InternetProtocolFamily.IPv6};, +            {DnsRecordType.AAAA, DnsRecordType.A};, +            {InternetProtocolFamily.IPv6, InternetProtocolFamily.IPv4};, +        return preferredAddressType().localhost();, +++ b/resolver-dns/src/main/java/io/netty/resolver/dns/DnsNameResolver.java, +            {DnsRecordType.A};, +            {InternetProtocolFamily.IPv4};, +            {DnsRecordType.A, DnsRecordType.AAAA};, +            {InternetProtocolFamily.IPv4, InternetProtocolFamily.IPv6};, +            {DnsRecordType.AAAA};, +            {InternetProtocolFamily.IPv6};, +            {DnsRecordType.AAAA, DnsRecordType.A};, +            {InternetProtocolFamily.IPv6, InternetProtocolFamily.IPv4};, +        return preferredAddressType().localhost();, +++ b/resolver-dns/src/main/java/io/netty/resolver/dns/DnsNameResolverContext.java, +        final Class<? extends InetAddress> inetAddressType = parent.preferredAddressType().addressType();, +            InetAddress address = resolvedEntries.get(i).address();, +            if (inetAddressType.isInstance(address)) {, +++ b/resolver-dns/src/main/java/io/netty/resolver/dns/DnsNameResolver.java, +            {DnsRecordType.A};, +            {InternetProtocolFamily.IPv4};, +            {DnsRecordType.A, DnsRecordType.AAAA};, +            {InternetProtocolFamily.IPv4, InternetProtocolFamily.IPv6};, +            {DnsRecordType.AAAA};, +            {InternetProtocolFamily.IPv6};, +            {DnsRecordType.AAAA, DnsRecordType.A};, +            {InternetProtocolFamily.IPv6, InternetProtocolFamily.IPv4};, +        return preferredAddressType().localhost();, +++ b/resolver-dns/src/main/java/io/netty/resolver/dns/DnsNameResolverContext.java, +        final Class<? extends InetAddress> inetAddressType = parent.preferredAddressType().addressType();, +            InetAddress address = resolvedEntries.get(i).address();, +            if (inetAddressType.isInstance(address)) {, +++ b/transport/src/main/java/io/netty/channel/socket/InternetProtocolFamily.java, +    IPv4(Inet4Address.class, 1, NetUtil.LOCALHOST4),, +    IPv6(Inet6Address.class, 2, NetUtil.LOCALHOST6);, +    InternetProtocolFamily(Class<? extends InetAddress> addressType, int addressNumber, InetAddress localHost) {, +        this.addressNumber = addressNumber;, +        this.localHost = localHost;]