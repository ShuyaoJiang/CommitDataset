[+++ b/transport/src/main/java/io/netty/channel/socket/nio/AbstractNioChannel.java, +            // FIXME: Magic number, +++ b/transport/src/main/java/io/netty/channel/socket/nio/AbstractNioChannel.java, +            // FIXME: Magic number, +++ b/transport/src/main/java/io/netty/channel/socket/oio/OioSocketChannel.java, +import java.io.InputStream;, +    private InputStream is;, +                is = socket.getInputStream();, +            is = socket.getInputStream();, +            if (available > 0) {, +            } else if (!buf.writable()) {, +                // FIXME: Magic number, +                buf.ensureWritableBytes(4096);, +            }, +, +            int readBytes = buf.writeBytes(is, buf.writableBytes());, +            if (!buf.writable()) {, +                // FIXME: Magic number, +                buf.ensureWritableBytes(4096);, +            }, +            return readBytes;]