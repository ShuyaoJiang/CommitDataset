[+++ b/codec/src/main/java/io/netty/handler/codec/string/StringEncoder.java, +    public StringEncoder() {, +        this(Charset.defaultCharset());, +    public StringEncoder(Charset charset) {, +        if (msg.length() == 0) {, +            return;, +        }, +        switch (ctx.nextOutboundBufferType()) {, +                ctx.nextOutboundMessageBuffer().add(Unpooled.wrappedBuffer(encoded));]