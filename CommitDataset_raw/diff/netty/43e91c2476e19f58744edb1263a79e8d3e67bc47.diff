[+++ b/buffer/src/main/java/io/netty/buffer/DefaultByteBufHolder.java, +, +    @Override, +    public boolean equals(Object o) {, +        if (this == o) {, +            return true;, +        }, +        if (o instanceof ByteBufHolder) {, +            return data.equals(((ByteBufHolder) o).content());, +        }, +        return false;, +    }, +, +    @Override, +    public int hashCode() {, +        return data.hashCode();, +    }, +++ b/buffer/src/main/java/io/netty/buffer/DefaultByteBufHolder.java, +, +    @Override, +    public boolean equals(Object o) {, +        if (this == o) {, +            return true;, +        }, +        if (o instanceof ByteBufHolder) {, +            return data.equals(((ByteBufHolder) o).content());, +        }, +        return false;, +    }, +, +    @Override, +    public int hashCode() {, +        return data.hashCode();, +    }, +++ b/buffer/src/test/java/io/netty/buffer/DefaultByteBufHolderTest.java, +, +    @Test, +    public void testEqualsAndHashCode() {, +        ByteBufHolder holder = new DefaultByteBufHolder(Unpooled.EMPTY_BUFFER);, +        ByteBufHolder copy = holder.copy();, +        try {, +            assertEquals(holder, copy);, +            assertEquals(holder.hashCode(), copy.hashCode());, +        } finally {, +            holder.release();, +            copy.release();, +        }, +    }]