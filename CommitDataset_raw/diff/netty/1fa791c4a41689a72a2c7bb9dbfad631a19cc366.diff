[+++ b/src/main/java/org/jboss/netty/buffer/ChannelBuffers.java, +    public static ChannelBuffer dynamicBuffer(ChannelBufferFactory factory) {, +        if (factory == null) {, +            throw new NullPointerException("factory");, +        }, +, +        return new DynamicChannelBuffer(factory.getDefaultOrder(), 256, factory);, +    }, +, +++ b/src/main/java/org/jboss/netty/buffer/ChannelBuffers.java, +    public static ChannelBuffer dynamicBuffer(ChannelBufferFactory factory) {, +        if (factory == null) {, +            throw new NullPointerException("factory");, +        }, +, +        return new DynamicChannelBuffer(factory.getDefaultOrder(), 256, factory);, +    }, +, +++ b/src/main/java/org/jboss/netty/buffer/DirectChannelBufferFactory.java, +        slice.clear();, +++ b/src/main/java/org/jboss/netty/buffer/ChannelBuffers.java, +    public static ChannelBuffer dynamicBuffer(ChannelBufferFactory factory) {, +        if (factory == null) {, +            throw new NullPointerException("factory");, +        }, +, +        return new DynamicChannelBuffer(factory.getDefaultOrder(), 256, factory);, +    }, +, +++ b/src/main/java/org/jboss/netty/buffer/DirectChannelBufferFactory.java, +        slice.clear();, +++ b/src/main/java/org/jboss/netty/handler/codec/frame/FrameDecoder.java, +import java.util.concurrent.atomic.AtomicReference;, +import org.jboss.netty.channel.ChannelEvent;, +    private final AtomicReference<ChannelBuffer> cumulation =, +        new AtomicReference<ChannelBuffer>();, +        ChannelBuffer cumulation = cumulation(e);, +        ChannelBuffer cumulation = cumulation(e);, +, +    private ChannelBuffer cumulation(ChannelEvent e) {, +        ChannelBuffer buf = cumulation.get();, +        if (buf == null) {, +            buf = ChannelBuffers.dynamicBuffer(, +                    e.getChannel().getConfig().getBufferFactory());, +            if (!cumulation.compareAndSet(null, buf)) {, +                buf = cumulation.get();, +            }, +        }, +        return buf;, +    }, +++ b/src/main/java/org/jboss/netty/buffer/ChannelBuffers.java, +    public static ChannelBuffer dynamicBuffer(ChannelBufferFactory factory) {, +        if (factory == null) {, +            throw new NullPointerException("factory");, +        }, +, +        return new DynamicChannelBuffer(factory.getDefaultOrder(), 256, factory);, +    }, +, +++ b/src/main/java/org/jboss/netty/buffer/DirectChannelBufferFactory.java, +        slice.clear();, +++ b/src/main/java/org/jboss/netty/handler/codec/frame/FrameDecoder.java, +import java.util.concurrent.atomic.AtomicReference;, +import org.jboss.netty.channel.ChannelEvent;, +    private final AtomicReference<ChannelBuffer> cumulation =, +        new AtomicReference<ChannelBuffer>();, +        ChannelBuffer cumulation = cumulation(e);, +        ChannelBuffer cumulation = cumulation(e);, +, +    private ChannelBuffer cumulation(ChannelEvent e) {, +        ChannelBuffer buf = cumulation.get();, +        if (buf == null) {, +            buf = ChannelBuffers.dynamicBuffer(, +                    e.getChannel().getConfig().getBufferFactory());, +            if (!cumulation.compareAndSet(null, buf)) {, +                buf = cumulation.get();, +            }, +        }, +        return buf;, +    }, +++ b/src/main/java/org/jboss/netty/handler/codec/http/HttpMessageDecoder.java, +                content = ChannelBuffers.dynamicBuffer(channel.getConfig().getBufferFactory());, +            readChunkedContent(channel, buffer);, +    private void readChunkedContent(Channel channel, ChannelBuffer buffer) {, +            content = ChannelBuffers.dynamicBuffer(, +                    chunkSize, channel.getConfig().getBufferFactory());, +++ b/src/main/java/org/jboss/netty/buffer/ChannelBuffers.java, +    public static ChannelBuffer dynamicBuffer(ChannelBufferFactory factory) {, +        if (factory == null) {, +            throw new NullPointerException("factory");, +        }, +, +        return new DynamicChannelBuffer(factory.getDefaultOrder(), 256, factory);, +    }, +, +++ b/src/main/java/org/jboss/netty/buffer/DirectChannelBufferFactory.java, +        slice.clear();, +++ b/src/main/java/org/jboss/netty/handler/codec/frame/FrameDecoder.java, +import java.util.concurrent.atomic.AtomicReference;, +import org.jboss.netty.channel.ChannelEvent;]