[+++ b/codec-http2/src/main/java/io/netty/handler/codec/http2/DefaultHttp2HeadersEncoder.java, +import static io.netty.handler.codec.http2.Http2Error.INTERNAL_ERROR;, +import static io.netty.util.internal.ObjectUtil.checkNotNull;, +    private final SensitivityDetector sensitivityDetector;, +        this(DEFAULT_HEADER_TABLE_SIZE, NEVER_SENSITIVE);, +    public DefaultHttp2HeadersEncoder(int maxHeaderTableSize, SensitivityDetector sensitivityDetector) {, +        this.sensitivityDetector = checkNotNull(sensitivityDetector, "sensitiveDetector");, +        encoder.encodeHeader(stream, key.array(), value.array(), sensitivityDetector.isSensitive(key, value));, +++ b/codec-http2/src/main/java/io/netty/handler/codec/http2/DefaultHttp2HeadersEncoder.java, +import static io.netty.handler.codec.http2.Http2Error.INTERNAL_ERROR;, +import static io.netty.util.internal.ObjectUtil.checkNotNull;, +    private final SensitivityDetector sensitivityDetector;, +        this(DEFAULT_HEADER_TABLE_SIZE, NEVER_SENSITIVE);, +    public DefaultHttp2HeadersEncoder(int maxHeaderTableSize, SensitivityDetector sensitivityDetector) {, +        this.sensitivityDetector = checkNotNull(sensitivityDetector, "sensitiveDetector");, +        encoder.encodeHeader(stream, key.array(), value.array(), sensitivityDetector.isSensitive(key, value));, +++ b/codec-http2/src/main/java/io/netty/handler/codec/http2/Http2HeadersEncoder.java, +import io.netty.handler.codec.AsciiString;, +     * Determine if a header name/value pair is treated as, +     * <a href="http://tools.ietf.org/html/draft-ietf-httpbis-header-compression-12#section-7.1.3">sensitive</a>., +     * If the object can be dynamically modified and shared across multiple connections it may need to be thread safe., +     */, +    interface SensitivityDetector {, +        /**, +         * Determine if a header {@code name}/{@code value} pair should be treated as, +         * <a href="http://tools.ietf.org/html/draft-ietf-httpbis-header-compression-12#section-7.1.3">sensitive</a>., +         * @param name The name for the header., +         * @param value The value of the header., +         * @return {@code true} if a header {@code name}/{@code value} pair should be treated as, +         * <a href="http://tools.ietf.org/html/draft-ietf-httpbis-header-compression-12#section-7.1.3">sensitive</a>., +         * {@code false} otherwise., +         */, +        boolean isSensitive(AsciiString name, AsciiString value);, +    }, +, +    /**, +, +    /**, +     * Always return {@code false} for {@link SensitivityDetector#isSensitive(AsciiString, AsciiString)}., +     */, +    SensitivityDetector NEVER_SENSITIVE = new SensitivityDetector() {, +        @Override, +        public boolean isSensitive(AsciiString name, AsciiString value) {, +            return false;, +        }, +    };]