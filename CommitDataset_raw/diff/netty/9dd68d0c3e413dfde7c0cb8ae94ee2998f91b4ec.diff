[+++ b/codec-http/src/main/java/io/netty/handler/codec/http/HttpClientCodec.java, +import io.netty.channel.ChannelPipeline;, +import io.netty.util.internal.OneTimeTask;, +        final ChannelPipeline p = ctx.pipeline();, +        // Remove the decoder later so that the decoder can enter the 'UPGRADED' state and forward the remaining data., +        ctx.executor().execute(new OneTimeTask() {, +            @Override, +            public void run() {, +                p.remove(decoder());, +            }, +        });, +        p.remove(encoder());]