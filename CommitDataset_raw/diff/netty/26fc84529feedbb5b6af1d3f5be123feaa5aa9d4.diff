[+++ b/buffer/src/main/java/io/netty/buffer/AdvancedLeakAwareByteBuf.java, +    public ByteBuf capacity(int newCapacity) {, +        leak.record();, +        return super.capacity(newCapacity);, +    }, +, +    @Override, +    public boolean release() {, +        boolean deallocated =  super.release();, +        if (deallocated) {, +            leak.close();, +        } else{, +        }, +        return deallocated;, +    }, +, +    @Override, +    public boolean release(int decrement) {, +        boolean deallocated = super.release(decrement);, +        if (deallocated) {, +            leak.close();, +        } else {, +            leak.record();, +        }, +        return deallocated;]