[+++ b/common/src/main/java/io/netty/util/ConstantPool.java, +        T c;, +            if (exists(name)) {, +                c = constants.get(name);, +            } else {, +                c = newInstance0(name);, +            }, +        checkNotNullAndNotEmpty(name);, +        if (exists(name)) {, +            throw new IllegalArgumentException(String.format("'%s' is already in use", name));, +        T c = newInstance0(name);, +, +        return c;, +    }, +, +    // Be careful that this dose not check whether the argument is null or empty., +    private T newInstance0(String name) {, +        synchronized (constants) {, +            T c = newConstant(nextId, name);, +            constants.put(name, c);, +            nextId++;, +            return c;, +        }, +    }, +, +    private String checkNotNullAndNotEmpty(String name) {, +        ObjectUtil.checkNotNull(name, "name");, +, +        return name;]