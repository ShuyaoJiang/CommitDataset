[+++ b/handler/src/test/java/io/netty/handler/ssl/SniClientTest.java, +    private static void testSniClient(SslProvider sslServerProvider, SslProvider sslClientProvider) throws Exception {, +            final SslContext sslServerContext;, +            if ((sslServerProvider == SslProvider.OPENSSL || sslServerProvider == SslProvider.OPENSSL_REFCNT), +                && !OpenSsl.useKeyManagerFactory()) {, +                sslServerContext = SslContextBuilder.forServer(cert.certificate(), cert.privateKey()), +                                                    .sslProvider(sslServerProvider), +                                                    .build();, +            } else {, +                // The used OpenSSL version does support a KeyManagerFactory, so use it., +               sslServerContext = SslContextBuilder.forServer(kmf), +                                                   .sslProvider(sslServerProvider), +                                                   .build();, +            }]