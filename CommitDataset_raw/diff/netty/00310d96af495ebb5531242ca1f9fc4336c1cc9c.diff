[+++ b/codec-http/src/main/java/io/netty/handler/codec/http/HttpContentEncoder.java, +import io.netty.buffer.ReferenceCounted;, +        if (msg instanceof ReferenceCounted) {, +            // need to call retain to not free it, +            ((ReferenceCounted) msg).retain();, +        }, +            if (msg instanceof ReferenceCounted) {, +                // need to call retain to not free it, +                ((ReferenceCounted) msg).retain();, +            }, +            return ((FullHttpMessage) msg).retain();, +            return c.retain();]