[+++ b/src/main/java/org/jboss/netty/handler/codec/replay/ReplayingDecoder.java, +        replayable.terminate();, +++ b/src/main/java/org/jboss/netty/handler/codec/replay/ReplayingDecoder.java, +        replayable.terminate();, +++ b/src/main/java/org/jboss/netty/handler/codec/replay/ReplayingDecoderBuffer.java, +    private boolean terminated;, +    void terminate() {, +        terminated = true;, +    }, +, +        if (terminated) {, +            return buffer.capacity();, +        } else {, +    }, +        if (terminated) {, +            return buffer.readableBytes();, +        } else {, +    }]