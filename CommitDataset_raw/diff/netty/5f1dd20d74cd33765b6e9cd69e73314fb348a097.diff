[+++ b/src/main/java/org/jboss/netty/channel/socket/http/HttpTunnelingChannelHandler.java, +    private final long reconnectTimeoutMillis;, +    public HttpTunnelingChannelHandler(, +            boolean stream, HttpSession session, long reconnectTimeoutMillis) {, +        this.reconnectTimeoutMillis = reconnectTimeoutMillis;, +            boolean success = false;, +            Throwable cause = null;, +                success = true;, +            } catch (Throwable t) {, +                success = false;, +                cause = t;, +                if (awaitReconnect()) {, +                    try {, +                        success = true;, +                    } catch (Throwable t2) {, +                        success = false;, +                        cause = t2;, +                } else {, +            } finally {, +                if (success) {, +                    e.getFuture().setSuccess();, +                } else {, +                    assert cause != null;, +                    e.getFuture().setFailure(cause);, +        } else {, +    synchronized List<MessageEvent> getAwaitingEvents() {, +    void setOutputStream(ServletOutputStream outputStream) {, +    boolean isStreaming() {, +    boolean awaitReconnect() {, +            reconnectCondition.await(reconnectTimeoutMillis, TimeUnit.MILLISECONDS);]