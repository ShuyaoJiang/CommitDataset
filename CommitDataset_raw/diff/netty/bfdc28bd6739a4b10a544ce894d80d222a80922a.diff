[+++ b/testsuite/src/test/java/io/netty/testsuite/transport/socket/SocketShutdownOutputTest.java, +import io.netty.buffer.ByteBuf;, +import io.netty.channel.ChannelHandlerContext;, +import io.netty.channel.ChannelInboundByteHandlerAdapter;, +import java.util.concurrent.BlockingQueue;, +import java.util.concurrent.SynchronousQueue;, +    @Test(timeout = 30000), +        TestHandler h = new TestHandler();, +            SocketChannel ch = (SocketChannel) cb.handler(h).connect().sync().channel();, +            // Make the connection half-closed and ensure read() returns -1., +, +            // If half-closed, the peer should be able to write something., +            s.getOutputStream().write(1);, +            assertEquals(1, (int) h.queue.take());, +, +, +    private static class TestHandler extends ChannelInboundByteHandlerAdapter {, +        final BlockingQueue<Byte> queue = new SynchronousQueue<Byte>();, +, +        @Override, +        public void inboundBufferUpdated(ChannelHandlerContext ctx, ByteBuf in) throws Exception {, +            queue.offer(in.readByte());, +        }, +    }]