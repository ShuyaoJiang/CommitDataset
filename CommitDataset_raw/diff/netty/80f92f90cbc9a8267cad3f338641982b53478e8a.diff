[+++ b/codec-http/src/main/java/io/netty/handler/codec/spdy/SpdyHttpEncoder.java, +import io.netty.handler.codec.http.FullHttpMessage;, +        boolean last = false;, +            last = spdySynStreamFrame.isLast();, +                last = spdySynStreamFrame.isLast();, +                last = spdySynReplyFrame.isLast();, +        if (msg instanceof HttpContent && !last) {, +        spdySynStreamFrame.setLast(isLast(httpMessage));, +        spdySynReplyFrame.setLast(isLast(httpResponse));, +, +    /**, +     * Checks if the given HTTP message should be considered as a last SPDY frame., +     *, +     * @param httpMessage check this HTTP message, +     * @return whether the given HTTP message should generate a <em>last</em> SPDY frame., +     */, +    private static boolean isLast(HttpMessage httpMessage) {, +        if (httpMessage instanceof FullHttpMessage) {, +            FullHttpMessage fullMessage = (FullHttpMessage) httpMessage;, +            if (fullMessage.trailingHeaders().isEmpty() && !fullMessage.content().isReadable()) {, +                return true;, +            }, +        }, +, +        return false;, +    }]