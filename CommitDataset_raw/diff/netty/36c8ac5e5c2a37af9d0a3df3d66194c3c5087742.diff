[+++ b/codec-http/src/main/java/io/netty/handler/codec/http/websocketx/WebSocketClientHandshaker.java, +import io.netty.handler.codec.http.HttpContentDecompressor;, +, +        // Remove decompressor from pipeline if its in use, +        HttpContentDecompressor decompressor = p.get(HttpContentDecompressor.class);, +        if (decompressor != null) {, +            p.remove(decompressor);, +        }, +, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/websocketx/WebSocketClientHandshaker.java, +import io.netty.handler.codec.http.HttpContentDecompressor;, +, +        // Remove decompressor from pipeline if its in use, +        HttpContentDecompressor decompressor = p.get(HttpContentDecompressor.class);, +        if (decompressor != null) {, +            p.remove(decompressor);, +        }, +, +++ b/codec-http/src/main/java/io/netty/handler/codec/http/websocketx/WebSocketServerHandshaker.java, +import io.netty.handler.codec.http.HttpContentCompressor;, +                    if (p.get(HttpContentCompressor.class) != null) {, +                        p.remove(HttpContentCompressor.class);, +                    }]