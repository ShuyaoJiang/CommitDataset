[+++ b/buffer/src/main/java/io/netty/buffer/AbstractByteBuf.java, +        if (readerIndex != writerIndex) {, +        } else {, +            markedReaderIndex = Math.max(markedReaderIndex - readerIndex, 0);, +            markedWriterIndex = Math.max(markedWriterIndex - readerIndex, 0);, +            writerIndex = readerIndex = 0;, +        }]