[+++ b/buffer/src/main/java/io/netty/buffer/PooledUnsafeDirectByteBuf.java, +            PlatformDependent.copyMemory(addr(index), dst.array(), dst.arrayOffset() + dstIndex, length);, +            PlatformDependent.copyMemory(src.array(), src.arrayOffset() + srcIndex, addr(index), length);, +++ b/buffer/src/main/java/io/netty/buffer/PooledUnsafeDirectByteBuf.java, +            PlatformDependent.copyMemory(addr(index), dst.array(), dst.arrayOffset() + dstIndex, length);, +            PlatformDependent.copyMemory(src.array(), src.arrayOffset() + srcIndex, addr(index), length);, +++ b/common/src/main/java/io/netty/util/internal/PlatformDependent.java, +    private static final long ARRAY_BASE_OFFSET = arrayBaseOffset0();, +, +    public static void copyMemory(byte[] src, int srcIndex, long dstAddr, long length) {, +        PlatformDependent0.copyMemory(src, ARRAY_BASE_OFFSET + srcIndex, null, dstAddr, length);, +    }, +, +    public static void copyMemory(long srcAddr, byte[] dst, int dstIndex, long length) {, +        PlatformDependent0.copyMemory(null, srcAddr, dst, ARRAY_BASE_OFFSET + dstIndex, length);, +    }, +, +    private static long arrayBaseOffset0() {, +        if (!hasUnsafe()) {, +            return -1;, +        }, +, +        return PlatformDependent0.arrayBaseOffset();, +    }, +, +++ b/buffer/src/main/java/io/netty/buffer/PooledUnsafeDirectByteBuf.java, +            PlatformDependent.copyMemory(addr(index), dst.array(), dst.arrayOffset() + dstIndex, length);, +            PlatformDependent.copyMemory(src.array(), src.arrayOffset() + srcIndex, addr(index), length);, +++ b/common/src/main/java/io/netty/util/internal/PlatformDependent.java, +    private static final long ARRAY_BASE_OFFSET = arrayBaseOffset0();, +, +    public static void copyMemory(byte[] src, int srcIndex, long dstAddr, long length) {, +        PlatformDependent0.copyMemory(src, ARRAY_BASE_OFFSET + srcIndex, null, dstAddr, length);, +    }, +, +    public static void copyMemory(long srcAddr, byte[] dst, int dstIndex, long length) {, +        PlatformDependent0.copyMemory(null, srcAddr, dst, ARRAY_BASE_OFFSET + dstIndex, length);, +    }, +, +    private static long arrayBaseOffset0() {, +        if (!hasUnsafe()) {, +            return -1;, +        }, +, +        return PlatformDependent0.arrayBaseOffset();, +    }, +, +++ b/common/src/main/java/io/netty/util/internal/PlatformDependent0.java, +    static long arrayBaseOffset() {, +        return UNSAFE.arrayBaseOffset(byte[].class);, +    }, +, +    static void copyMemory(Object src, long srcOffset, Object dst, long dstOffset, long length) {, +        UNSAFE.copyMemory(src, srcOffset, dst, dstOffset, length);, +    }, +]