[+++ b/jadx-core/src/main/java/jadx/core/codegen/ClassGen.java, +			// don't add import if class not public (must be accessed using inheritance), +			ClassNode classNode = cls.dex().resolveClass(classInfo);, +			if (classNode != null && !classNode.getAccessFlags().isPublic()) {, +				return shortName;, +			if (classInfo.getPackage().equals(useCls.getPackage())) {, +				fullName = classInfo.getNameWithoutPackage();, +			}, +++ b/jadx-core/src/main/java/jadx/core/codegen/ClassGen.java, +			// don't add import if class not public (must be accessed using inheritance), +			ClassNode classNode = cls.dex().resolveClass(classInfo);, +			if (classNode != null && !classNode.getAccessFlags().isPublic()) {, +				return shortName;, +			if (classInfo.getPackage().equals(useCls.getPackage())) {, +				fullName = classInfo.getNameWithoutPackage();, +			}, +++ b/jadx-samples/src/main/java/jadx/samples/TestImports.java, +package jadx.samples;, +, +import jadx.samples.otherpkg.A;, +, +/**, + * Tests:, + * - class B not imported, + */, +public class TestImports extends AbstractTest {, +, +	public class C extends A {, +		public B getB() {, +			return null;, +		}, +	}, +, +	@Override, +	public boolean testRun() {, +		return true;, +	}, +, +	public static void main(String[] args) {, +		new TestImports().testRun();, +	}, +}, +++ b/jadx-core/src/main/java/jadx/core/codegen/ClassGen.java, +			// don't add import if class not public (must be accessed using inheritance), +			ClassNode classNode = cls.dex().resolveClass(classInfo);, +			if (classNode != null && !classNode.getAccessFlags().isPublic()) {, +				return shortName;, +			if (classInfo.getPackage().equals(useCls.getPackage())) {, +				fullName = classInfo.getNameWithoutPackage();, +			}, +++ b/jadx-samples/src/main/java/jadx/samples/TestImports.java, +package jadx.samples;, +, +import jadx.samples.otherpkg.A;, +, +/**, + * Tests:, + * - class B not imported, + */, +public class TestImports extends AbstractTest {, +, +	public class C extends A {, +		public B getB() {, +			return null;, +		}, +	}, +, +	@Override, +	public boolean testRun() {, +		return true;, +	}, +, +	public static void main(String[] args) {, +		new TestImports().testRun();, +	}, +}, +++ b/jadx-samples/src/main/java/jadx/samples/otherpkg/A.java, +package jadx.samples.otherpkg;, +, +public class A {, +	protected class B {, +, +	}, +}]