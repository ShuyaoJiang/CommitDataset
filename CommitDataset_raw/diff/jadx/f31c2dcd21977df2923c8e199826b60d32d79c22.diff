[+++ b/jadx-core/src/main/java/jadx/core/dex/attributes/AttributeStorage.java, +		return Collections.unmodifiableList(attrList.getList());, +++ b/jadx-core/src/main/java/jadx/core/dex/attributes/AttributeStorage.java, +		return Collections.unmodifiableList(attrList.getList());, +++ b/jadx-core/src/main/java/jadx/core/dex/visitors/CodeShrinker.java, +import jadx.core.dex.instructions.PhiInsn;, +				if (assignInsn == null || assignInsn instanceof PhiInsn) {, +++ b/jadx-core/src/main/java/jadx/core/dex/attributes/AttributeStorage.java, +		return Collections.unmodifiableList(attrList.getList());, +++ b/jadx-core/src/main/java/jadx/core/dex/visitors/CodeShrinker.java, +import jadx.core.dex.instructions.PhiInsn;, +				if (assignInsn == null || assignInsn instanceof PhiInsn) {, +++ b/jadx-core/src/main/java/jadx/core/dex/visitors/regions/IfMakerHelper.java, +import jadx.core.dex.attributes.nodes.LoopInfo;, +		boolean badThen = isBadBranchBlock(info, thenBlock);, +		boolean badElse = isBadBranchBlock(info, elseBlock);, +	private static boolean isBadBranchBlock(IfInfo info, BlockNode block) {, +		// check if block at end of loop edge, +		if (block.contains(AFlag.LOOP_START) && block.getPredecessors().size() == 1) {, +			BlockNode pred = block.getPredecessors().get(0);, +			if (pred.contains(AFlag.LOOP_END)) {, +				List<LoopInfo> startLoops = block.getAll(AType.LOOP);, +				List<LoopInfo> endLoops = pred.getAll(AType.LOOP);, +				// search for same loop, +				for (LoopInfo startLoop : startLoops) {, +					for (LoopInfo endLoop : endLoops) {, +						if (startLoop == endLoop) {, +							return true;, +						}, +					}, +				}, +			}, +		}, +		return !allPathsFromIf(block, info);, +	}, +, +++ b/jadx-core/src/main/java/jadx/core/dex/attributes/AttributeStorage.java, +		return Collections.unmodifiableList(attrList.getList());, +++ b/jadx-core/src/main/java/jadx/core/dex/visitors/CodeShrinker.java, +import jadx.core.dex.instructions.PhiInsn;, +				if (assignInsn == null || assignInsn instanceof PhiInsn) {, +++ b/jadx-core/src/main/java/jadx/core/dex/visitors/regions/IfMakerHelper.java, +import jadx.core.dex.attributes.nodes.LoopInfo;, +		boolean badThen = isBadBranchBlock(info, thenBlock);, +		boolean badElse = isBadBranchBlock(info, elseBlock);, +	private static boolean isBadBranchBlock(IfInfo info, BlockNode block) {, +		// check if block at end of loop edge, +		if (block.contains(AFlag.LOOP_START) && block.getPredecessors().size() == 1) {, +			BlockNode pred = block.getPredecessors().get(0);, +			if (pred.contains(AFlag.LOOP_END)) {, +				List<LoopInfo> startLoops = block.getAll(AType.LOOP);, +				List<LoopInfo> endLoops = pred.getAll(AType.LOOP);, +				// search for same loop, +				for (LoopInfo startLoop : startLoops) {, +					for (LoopInfo endLoop : endLoops) {, +						if (startLoop == endLoop) {, +							return true;, +						}, +					}, +				}, +			}, +		}, +		return !allPathsFromIf(block, info);, +	}, +, +++ b/jadx-core/src/main/java/jadx/core/dex/visitors/regions/LoopRegionVisitor.java, +		if (phiInsn == null, +				|| phiInsn.getArgsCount() != 2, +		// can't make loop if argument from increment instruction is assign in loop, +		for (InsnArg iArg : incrInsn.getArguments()) {, +			if (iArg.isRegister() && assignOnlyInLoop(mth, loopRegion, (RegisterArg) iArg)) {, +				return false;, +			}, +		}, +				LOG.debug(" checkArrayForEach: Wrapped insn not found: {}, mth: {}", arrGetInsn, mth);, +				LOG.warn(" checkIterableForEach: Wrapped insn not found: {}, mth: {}", nextCall, mth);, +	private static boolean assignOnlyInLoop(MethodNode mth, LoopRegion loopRegion, RegisterArg arg) {, +		InsnNode assignInsn = arg.getAssignInsn();, +		if (assignInsn == null) {, +			return true;, +		}, +		if (!argInLoop(mth, loopRegion, assignInsn.getResult())) {, +			return false;, +		}, +		if (assignInsn instanceof PhiInsn) {, +			PhiInsn phiInsn = (PhiInsn) assignInsn;, +			for (InsnArg phiArg : phiInsn.getArguments()) {, +				if (!assignOnlyInLoop(mth, loopRegion, (RegisterArg) phiArg)) {, +					return false;, +				}, +			}, +		}, +		return true;, +	}, +, +++ b/jadx-core/src/main/java/jadx/core/dex/attributes/AttributeStorage.java, +		return Collections.unmodifiableList(attrList.getList());, +++ b/jadx-core/src/main/java/jadx/core/dex/visitors/CodeShrinker.java, +import jadx.core.dex.instructions.PhiInsn;, +				if (assignInsn == null || assignInsn instanceof PhiInsn) {]