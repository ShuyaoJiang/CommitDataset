[+++ b/jadx-gui/src/main/java/jadx/gui/MainWindow.java, +import javax.swing.ImageIcon;, +import javax.swing.JButton;, +import javax.swing.JToggleButton;, +import javax.swing.JToolBar;, +import javax.swing.tree.TreePath;, +	private static final String DEFAULT_TITLE = "jadx-gui";, +	private static final Color BACKGROUND = new Color(0xf7f7f7);, +, +	private static final ImageIcon ICON_OPEN = Utils.openIcon("folder");, +	private static final ImageIcon ICON_CLOSE = Utils.openIcon("cross");, +	private static final ImageIcon ICON_FLAT_PKG = Utils.openIcon("empty_logical_package_obj");, +		initMenuAndToolbar();, +//		expandTree();, +	}, +, +	private void toggleFlattenPackage() {, +		Object root = treeModel.getRoot();, +		if (root instanceof JRoot) {, +			JRoot treeRoot = (JRoot) root;, +			treeRoot.setFlatPackages(!treeRoot.isFlatPackages());, +			treeModel.reload();, +			tree.expandRow(0);, +		}, +	}, +, +	private void expandTree() {, +		DefaultMutableTreeNode currentNode = ((DefaultMutableTreeNode) tree.getModel().getRoot()).getNextNode();, +		do {, +			if (currentNode.getLevel() == 1) {, +				tree.expandPath(new TreePath(currentNode.getPath()));, +			}, +			currentNode = currentNode.getNextNode();, +		}, +		while (currentNode != null);, +	}, +, +	private void initMenuAndToolbar() {, +		JMenuBar menuBar = new JMenuBar();, +, +		JMenu file = new JMenu("File");, +		file.setMnemonic(KeyEvent.VK_F);, +, +		JMenuItem exit = new JMenuItem("Exit", ICON_CLOSE);, +		exit.setMnemonic(KeyEvent.VK_E);, +		exit.setToolTipText("Exit application");, +		exit.addActionListener(new ActionListener() {, +			public void actionPerformed(ActionEvent event) {, +				System.exit(0);, +			}, +		});, +, +		JMenuItem open = new JMenuItem("Open", ICON_OPEN);, +		open.setMnemonic(KeyEvent.VK_E);, +		open.setToolTipText("Open file");, +		open.addActionListener(new OpenListener());, +, +		file.add(open);, +		file.addSeparator();, +		file.add(exit);, +, +		menuBar.add(file);, +		setJMenuBar(menuBar);, +, +		JToolBar toolbar = new JToolBar();, +		toolbar.setFloatable(false);, +, +		JButton openButton = new JButton(ICON_OPEN);, +		openButton.addActionListener(new OpenListener());, +		openButton.setToolTipText(NLS.str("file.open"));, +, +		toolbar.add(openButton);, +		toolbar.addSeparator();, +, +		JToggleButton flatPkgButton = new JToggleButton(ICON_FLAT_PKG);, +		flatPkgButton.addActionListener(new ActionListener() {, +			@Override, +			public void actionPerformed(ActionEvent e) {, +				toggleFlattenPackage();, +			}, +		});, +		flatPkgButton.setToolTipText(NLS.str("tree.flatten"));, +		toolbar.add(flatPkgButton);, +, +		toolbar.addSeparator();, +, +		add(toolbar, BorderLayout.NORTH);, +, +	private class OpenListener implements ActionListener {, +		public void actionPerformed(ActionEvent event) {, +			JFileChooser fileChooser = new JFileChooser();, +			FileFilter filter = new FileNameExtensionFilter("dex files", "dex", "apk", "jar");, +			fileChooser.addChoosableFileFilter(filter);, +			int ret = fileChooser.showDialog(mainPanel, "Open file");, +			if (ret == JFileChooser.APPROVE_OPTION) {, +				File file = fileChooser.getSelectedFile();, +				openFile(file);, +			}, +		}, +	}]