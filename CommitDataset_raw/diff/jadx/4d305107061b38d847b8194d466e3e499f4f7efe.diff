[+++ b/jadx-core/src/main/java/jadx/core/codegen/CodeWriter.java, +import jadx.core.utils.StringUtils;, +	public CodeWriter addMultiLine(String str) {, +		buf.append(str);, +		if (str.contains(NL)) {, +			line += StringUtils.countMatches(str, NL);, +			offset = 0;, +		}, +		return this;, +	}, +, +++ b/jadx-core/src/main/java/jadx/core/codegen/CodeWriter.java, +import jadx.core.utils.StringUtils;, +	public CodeWriter addMultiLine(String str) {, +		buf.append(str);, +		if (str.contains(NL)) {, +			line += StringUtils.countMatches(str, NL);, +			offset = 0;, +		}, +		return this;, +	}, +, +++ b/jadx-core/src/main/java/jadx/core/codegen/MethodGen.java, +					code.newLine().add("Error: ").addMultiLine(Utils.getStackTrace(cause));, +++ b/jadx-core/src/main/java/jadx/core/codegen/CodeWriter.java, +import jadx.core.utils.StringUtils;, +	public CodeWriter addMultiLine(String str) {, +		buf.append(str);, +		if (str.contains(NL)) {, +			line += StringUtils.countMatches(str, NL);, +			offset = 0;, +		}, +		return this;, +	}, +, +++ b/jadx-core/src/main/java/jadx/core/codegen/MethodGen.java, +					code.newLine().add("Error: ").addMultiLine(Utils.getStackTrace(cause));, +++ b/jadx-core/src/main/java/jadx/core/utils/StringUtils.java, +, +	public static int countMatches(String str, String subStr) {, +		if (str == null || str.isEmpty() || subStr == null || subStr.isEmpty()) {, +			return 0;, +		}, +		int subStrLen = subStr.length();, +		int count = 0;, +		int idx = 0;, +		while ((idx = str.indexOf(subStr, idx)) != -1) {, +			count++;, +			idx += subStrLen;, +		}, +		return count;, +	}]