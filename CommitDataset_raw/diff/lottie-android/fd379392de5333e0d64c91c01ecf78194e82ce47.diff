[+++ b/LottieSample/src/main/java/com/airbnb/lottie/samples/AnimationFragment.java, +        if (savedInstanceState == null) {, +            String fileName = getArguments().getString(ARG_FILE_NAME);, +            animationView.setAnimation(fileName);, +        }, +, +++ b/LottieSample/src/main/java/com/airbnb/lottie/samples/AnimationFragment.java, +        if (savedInstanceState == null) {, +            String fileName = getArguments().getString(ARG_FILE_NAME);, +            animationView.setAnimation(fileName);, +        }, +, +++ b/lottie/src/main/java/com/airbnb/lottie/LottieAnimationView.java, +import android.annotation.SuppressLint;, +import android.os.Parcel;, +import android.os.Parcelable;, +    private String animationName;, +    protected Parcelable onSaveInstanceState() {, +        Parcelable superState = super.onSaveInstanceState();, +        SavedState ss = new SavedState(superState);, +        ss.animationName = animationName;, +        ss.progress = rootAnimatableLayer.getProgress();, +        ss.isAnimating = rootAnimatableLayer.isAnimating();, +        ss.isLooping = rootAnimatableLayer.isLooping();, +        return ss;, +    }, +, +    @Override, +    protected void onRestoreInstanceState(Parcelable state) {, +        if(!(state instanceof SavedState)) {, +            super.onRestoreInstanceState(state);, +            return;, +        }, +, +        SavedState ss = (SavedState) state;, +        super.onRestoreInstanceState(ss.getSuperState());, +        this.animationName = ss.animationName;, +        setAnimation(animationName);, +        setProgress(ss.progress);, +        loop(ss.isLooping);, +        if (ss.isAnimating) {, +            playAnimation();, +        }, +    }, +, +    @SuppressLint("MissingSuperCall"), +    @Override, +        this.animationName = animationName;, +, +    static class SavedState extends BaseSavedState {, +        String animationName;, +        float progress;, +        boolean isAnimating;, +        boolean isLooping;, +, +        SavedState(Parcelable superState) {, +            super(superState);, +        }, +, +        private SavedState(Parcel in) {, +            super(in);, +            animationName = in.readString();, +            progress = in.readFloat();, +            isAnimating = in.readInt() == 1;, +            isLooping = in.readInt() == 1;, +        }, +, +        @Override, +        public void writeToParcel(Parcel out, int flags) {, +            super.writeToParcel(out, flags);, +            out.writeString(animationName);, +            out.writeFloat(progress);, +            out.writeInt(isAnimating ? 1 : 0);, +            out.writeInt(isLooping ? 1 : 0);, +, +        }, +, +        public static final Parcelable.Creator<SavedState> CREATOR =, +                new Parcelable.Creator<SavedState>() {, +                    public SavedState createFromParcel(Parcel in) {, +                        return new SavedState(in);, +                    }, +                    public SavedState[] newArray(int size) {, +                        return new SavedState[size];, +                    }, +                };, +    }, +++ b/LottieSample/src/main/java/com/airbnb/lottie/samples/AnimationFragment.java, +        if (savedInstanceState == null) {, +            String fileName = getArguments().getString(ARG_FILE_NAME);, +            animationView.setAnimation(fileName);, +        }, +, +++ b/lottie/src/main/java/com/airbnb/lottie/LottieAnimationView.java, +import android.annotation.SuppressLint;, +import android.os.Parcel;, +import android.os.Parcelable;, +    private String animationName;, +    protected Parcelable onSaveInstanceState() {, +        Parcelable superState = super.onSaveInstanceState();]