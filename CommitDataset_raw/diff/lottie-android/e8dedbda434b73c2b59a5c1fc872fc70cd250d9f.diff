[+++ b/LottieSample/screenshots/Tests_MaskInv.png, +++ b/LottieSample/screenshots/Tests_MaskInv.png, +++ b/LottieSample/src/androidTest/java/com/airbnb/lottie/LottieTest.java, +    TestRobot.testLinearAnimation(activity, "Tests/MaskInv.json");, +++ b/LottieSample/screenshots/Tests_MaskInv.png, +++ b/LottieSample/src/androidTest/java/com/airbnb/lottie/LottieTest.java, +    TestRobot.testLinearAnimation(activity, "Tests/MaskInv.json");, +++ b/LottieSample/src/main/assets/Tests/MaskInv.json, +{"v":"4.11.1","fr":29.9700012207031,"ip":0,"op":900.000036657751,"w":400,"h":400,"nm":"MaskInv","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":1,"nm":"Background","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"hasMask":true,"masksProperties":[{"inv":false,"mode":"a","pt":{"a":0,"k":{"i":[[50.031,0],[0,-50.031],[-50.031,0],[0,50.031]],"o":[[-50.031,0],[0,50.031],[50.031,0],[0,-50.031]],"v":[[150.59,88],[60,178.59],[150.59,269.18],[241.18,178.59]],"c":true},"ix":1},"o":{"a":0,"k":100,"ix":3},"x":{"a":0,"k":0,"ix":4},"nm":"Mask 2"},{"inv":false,"mode":"s","pt":{"a":0,"k":{"i":[[55.912,0],[0,-55.912],[-55.912,0],[0,55.912]],"o":[[-55.912,0],[0,55.912],[55.912,0],[0,-55.912]],"v":[[221.238,126],[120,227.238],[221.238,328.477],[322.477,227.238]],"c":true},"ix":1},"o":{"a":0,"k":100,"ix":3},"x":{"a":0,"k":0,"ix":4},"nm":"Mask 1"}],"sw":400,"sh":400,"sc":"#ff0000","ip":0,"op":900.000036657751,"st":0,"bm":0}]}, +++ b/LottieSample/screenshots/Tests_MaskInv.png, +++ b/LottieSample/src/androidTest/java/com/airbnb/lottie/LottieTest.java, +    TestRobot.testLinearAnimation(activity, "Tests/MaskInv.json");, +++ b/LottieSample/src/main/assets/Tests/MaskInv.json, +{"v":"4.11.1","fr":29.9700012207031,"ip":0,"op":900.000036657751,"w":400,"h":400,"nm":"MaskInv","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":1,"nm":"Background","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"hasMask":true,"masksProperties":[{"inv":false,"mode":"a","pt":{"a":0,"k":{"i":[[50.031,0],[0,-50.031],[-50.031,0],[0,50.031]],"o":[[-50.031,0],[0,50.031],[50.031,0],[0,-50.031]],"v":[[150.59,88],[60,178.59],[150.59,269.18],[241.18,178.59]],"c":true},"ix":1},"o":{"a":0,"k":100,"ix":3},"x":{"a":0,"k":0,"ix":4},"nm":"Mask 2"},{"inv":false,"mode":"s","pt":{"a":0,"k":{"i":[[55.912,0],[0,-55.912],[-55.912,0],[0,55.912]],"o":[[-55.912,0],[0,55.912],[55.912,0],[0,-55.912]],"v":[[221.238,126],[120,227.238],[221.238,328.477],[322.477,227.238]],"c":true},"ix":1},"o":{"a":0,"k":100,"ix":3},"x":{"a":0,"k":0,"ix":4},"nm":"Mask 1"}],"sw":400,"sh":400,"sc":"#ff0000","ip":0,"op":900.000036657751,"st":0,"bm":0}]}, +++ b/lottie/src/main/java/com/airbnb/lottie/model/layer/BaseLayer.java, +  private final Paint addMaskPaint = new Paint(Paint.ANTI_ALIAS_FLAG);, +  private final Paint subtractMaskPaint = new Paint(Paint.ANTI_ALIAS_FLAG);, +    addMaskPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN));, +    subtractMaskPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_OUT));, +  private void applyMasks(Canvas canvas, Matrix matrix) {, +    applyMasks(canvas, matrix, Mask.MaskMode.MaskModeAdd);, +    applyMasks(canvas, matrix, Mask.MaskMode.MaskModeSubtract);, +  }, +, +  @SuppressLint("WrongConstant") private void applyMasks(Canvas canvas, Matrix matrix,, +      Mask.MaskMode maskMode) {, +    Paint paint;, +    if (maskMode == Mask.MaskMode.MaskModeSubtract) {, +      paint = subtractMaskPaint;, +    } else {, +      paint = addMaskPaint;, +    }, +, +    boolean hasMask = false;, +    for (int i = 0; i < size; i++) {, +      if (mask.getMasks().get(i).getMaskMode() == maskMode) {, +        hasMask = true;, +        break;, +      }, +    }, +    if (!hasMask) {, +      return;, +    }, +, +    L.beginSection("Layer#drawMask");, +    L.beginSection("Layer#saveLayer");, +    canvas.saveLayer(rect, paint, SAVE_FLAGS);, +    L.endSection("Layer#saveLayer");, +    clearCanvas(canvas);, +, +      if (mask.getMaskMode() != maskMode) {, +        continue;, +      }]