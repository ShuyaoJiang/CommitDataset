[+++ b/LottieSample/src/main/assets/HeartSpin_Rausch.json, +{"assets":[],"v":"4.3.1","ddd":0,"layers":[{"ddd":0,"ind":0,"ty":4,"nm":"3","ks":{"o":{"k":100},"r":{"k":0},"p":{"k":[40,40,0]},"a":{"k":[0,0,0]},"s":{"k":[{"i":{"x":[0.097,0.097,0.667],"y":[1,1,0.667]},"o":{"x":[0.276,0.276,0.167],"y":[0,0,0.167]},"n":["0p097_1_0p276_0","0p097_1_0p276_0","0p667_0p667_0p167_0p167"],"t":59,"s":[25,25,100],"e":[117.8,117.8,100]},{"i":{"x":[0.281,0.281,0.833],"y":[1,1,0.833]},"o":{"x":[0.785,0.785,0.167],"y":[0,0,0.167]},"n":["0p281_1_0p785_0","0p281_1_0p785_0","0p833_0p833_0p167_0p167"],"t":66.5,"s":[117.8,117.8,100],"e":[100,100,100]},{"t":81.5}]}},"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","closed":true,"ks":{"k":{"i":[[0.601,-0.067],[2.241,-1.247],[2.557,-2.629],[2.458,1.367],[2.284,0.262],[0.591,0],[0,-13.678],[-4.909,-3.237],[-0.386,0],[-0.343,0.227],[0,15.725],[3.766,0]],"o":[[-2.282,0.262],[-2.458,1.364],[-2.559,-2.631],[-2.241,-1.245],[-0.598,-0.067],[-3.766,0],[0,15.725],[0.343,0.227],[0.386,0],[4.909,-3.237],[0,-13.678],[-0.591,0]],"v":[[14.192,-26.398],[7.375,-24.126],[0,-18.254],[-7.375,-24.128],[-14.194,-26.398],[-15.986,-26.5],[-30.499,-9.745],[-1.113,26.161],[0,26.5],[1.113,26.161],[30.499,-9.745],[15.986,-26.5]]}},"nm":"Path 1"},{"ty":"fl","fillEnabled":true,"c":{"k":[1,0.35,0.37,1]},"o":{"k":100},"nm":"Fill 1"},{"ty":"tr","p":{"k":[0,0],"ix":2},"a":{"k":[0,0],"ix":1},"s":{"k":[100,100],"ix":3},"r":{"k":0,"ix":6},"o":{"k":100,"ix":7},"sk":{"k":0,"ix":4},"sa":{"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1"}],"bounds":{"l":-31,"t":-27,"b":27,"r":31},"ip":59,"op":83,"st":43.5,"bm":0,"sr":1},{"ddd":0,"ind":1,"ty":4,"nm":"2","ks":{"o":{"k":100},"r":{"k":0},"p":{"k":[40,39.5,0]},"a":{"k":[0,0,0]},"s":{"k":[100,100,100]}},"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","closed":false,"ks":{"k":{"i":[[0,0],[0,0],[10.703,9.266],[-9.244,5.861],[0.84,-14.275],[0,0]],"o":[[0,0],[0,0],[-16.422,-14.217],[9.244,-5.861],[-0.5,8.5],[0,0]],"v":[[15.875,15.25],[-0.196,27.27],[-17.453,13.467],[-17.161,-20.972],[12.25,-13],[4.5,-0.5]]}},"nm":"Path 1"},{"ty":"st","fillEnabled":true,"c":{"k":[1,0.35,0.37,1]},"o":{"k":100},"w":{"k":3},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tm","s":{"k":[{"i":{"x":[0.445],"y":[0.755]},"o":{"x":[0.167],"y":[0.167]},"n":["0p445_0p755_0p167_0p167"],"t":37,"s":[0],"e":[44.964]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.529],"y":[0.504]},"n":["0p667_1_0p529_0p504"],"t":46.5,"s":[44.964],"e":[72]},{"t":59}],"ix":1},"e":{"k":[{"i":{"x":[0.445],"y":[0.84]},"o":{"x":[0.167],"y":[0.167]},"n":["0p445_0p84_0p167_0p167"],"t":37,"s":[37.3],"e":[78.3]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.529],"y":[0.371]},"n":["0p667_1_0p529_0p371"],"t":46.5,"s":[78.3],"e":[100]},{"t":59}],"ix":2},"o":{"k":0,"ix":3},"m":1,"ix":3,"nm":"Trim Paths 1"},{"ty":"tr","p":{"k":[0,0],"ix":2},"a":{"k":[0,0],"ix":1},"s":{"k":[100,100],"ix":3},"r":{"k":0,"ix":6},"o":{"k":100,"ix":7},"sk":{"k":0,"ix":4},"sa":{"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1"}],"bounds":{"l":-29,"t":-27,"b":29,"r":18},"ip":37,"op":60,"st":-31,"bm":0,"sr":1},{"ddd":0,"ind":2,"ty":4,"nm":"1","ks":{"o":{"k":100},"r":{"k":0},"p":{"k":[40,40,0]},"a":{"k":[0,0,0]},"s":{"k":[100,100,100]}},"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","closed":true,"ks":{"k":{"i":[[-0.591,0],[0,-13.678],[4.909,-3.237],[0.386,0],[0.343,0.227],[0,15.725],[-3.766,0],[-0.598,-0.067],[-2.241,-1.245],[-2.559,-2.631],[-2.458,1.364],[-2.282,0.262]],"o":[[3.766,0],[0,15.725],[-0.343,0.227],[-0.386,0],[-4.909,-3.237],[0,-13.678],[0.591,0],[2.284,0.262],[2.458,1.367],[2.557,-2.629],[2.241,-1.247],[0.601,-0.067]],"v":[[15.986,-26.5],[30.499,-9.745],[1.113,26.161],[0,26.5],[-1.113,26.161],[-30.499,-9.745],[-15.986,-26.5],[-14.194,-26.398],[-7.375,-24.128],[0,-18.254],[7.375,-24.126],[14.192,-26.398]]}},"nm":"Path 1"},{"ty":"st","fillEnabled":true,"c":{"k":[1,0.35,0.37,1]},"o":{"k":100},"w":{"k":3},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tm","s":{"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.894],"y":[0]},"n":["0p833_0p833_0p894_0"],"t":0,"s":[0],"e":[70]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"n":["0p833_0p833_0p167_0p167"],"t":36,"s":[70],"e":[79.5]},{"t":37}],"ix":1},"e":{"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.894],"y":[0.894]},"n":["0p833_0p833_0p894_0p894"],"t":0,"s":[100],"e":[100]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"n":["0p833_0p833_0p167_0p167"],"t":36,"s":[100],"e":[99.9]},{"t":37}],"ix":2},"o":{"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.894],"y":[0]},"n":["0p833_0p833_0p894_0"],"t":0,"s":[0],"e":[179]},{"t":36}],"ix":3},"m":1,"ix":3,"nm":"Trim Paths 1"},{"ty":"tr","p":{"k":[0,0],"ix":2},"a":{"k":[0,0],"ix":1},"s":{"k":[100,100],"ix":3},"r":{"k":0,"ix":6},"o":{"k":100,"ix":7},"sk":{"k":0,"ix":4},"sa":{"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1"}],"bounds":{"l":-32,"t":-28,"b":28,"r":32},"ip":0,"op":38,"st":-32,"bm":0,"sr":1}],"ip":0,"op":83,"fr":60,"w":80,"h":80}, +++ b/LottieSample/src/main/assets/HeartSpin_Rausch.json, +{"assets":[],"v":"4.3.1","ddd":0,"layers":[{"ddd":0,"ind":0,"ty":4,"nm":"3","ks":{"o":{"k":100},"r":{"k":0},"p":{"k":[40,40,0]},"a":{"k":[0,0,0]},"s":{"k":[{"i":{"x":[0.097,0.097,0.667],"y":[1,1,0.667]},"o":{"x":[0.276,0.276,0.167],"y":[0,0,0.167]},"n":["0p097_1_0p276_0","0p097_1_0p276_0","0p667_0p667_0p167_0p167"],"t":59,"s":[25,25,100],"e":[117.8,117.8,100]},{"i":{"x":[0.281,0.281,0.833],"y":[1,1,0.833]},"o":{"x":[0.785,0.785,0.167],"y":[0,0,0.167]},"n":["0p281_1_0p785_0","0p281_1_0p785_0","0p833_0p833_0p167_0p167"],"t":66.5,"s":[117.8,117.8,100],"e":[100,100,100]},{"t":81.5}]}},"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","closed":true,"ks":{"k":{"i":[[0.601,-0.067],[2.241,-1.247],[2.557,-2.629],[2.458,1.367],[2.284,0.262],[0.591,0],[0,-13.678],[-4.909,-3.237],[-0.386,0],[-0.343,0.227],[0,15.725],[3.766,0]],"o":[[-2.282,0.262],[-2.458,1.364],[-2.559,-2.631],[-2.241,-1.245],[-0.598,-0.067],[-3.766,0],[0,15.725],[0.343,0.227],[0.386,0],[4.909,-3.237],[0,-13.678],[-0.591,0]],"v":[[14.192,-26.398],[7.375,-24.126],[0,-18.254],[-7.375,-24.128],[-14.194,-26.398],[-15.986,-26.5],[-30.499,-9.745],[-1.113,26.161],[0,26.5],[1.113,26.161],[30.499,-9.745],[15.986,-26.5]]}},"nm":"Path 1"},{"ty":"fl","fillEnabled":true,"c":{"k":[1,0.35,0.37,1]},"o":{"k":100},"nm":"Fill 1"},{"ty":"tr","p":{"k":[0,0],"ix":2},"a":{"k":[0,0],"ix":1},"s":{"k":[100,100],"ix":3},"r":{"k":0,"ix":6},"o":{"k":100,"ix":7},"sk":{"k":0,"ix":4},"sa":{"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1"}],"bounds":{"l":-31,"t":-27,"b":27,"r":31},"ip":59,"op":83,"st":43.5,"bm":0,"sr":1},{"ddd":0,"ind":1,"ty":4,"nm":"2","ks":{"o":{"k":100},"r":{"k":0},"p":{"k":[40,39.5,0]},"a":{"k":[0,0,0]},"s":{"k":[100,100,100]}},"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","closed":false,"ks":{"k":{"i":[[0,0],[0,0],[10.703,9.266],[-9.244,5.861],[0.84,-14.275],[0,0]],"o":[[0,0],[0,0],[-16.422,-14.217],[9.244,-5.861],[-0.5,8.5],[0,0]],"v":[[15.875,15.25],[-0.196,27.27],[-17.453,13.467],[-17.161,-20.972],[12.25,-13],[4.5,-0.5]]}},"nm":"Path 1"},{"ty":"st","fillEnabled":true,"c":{"k":[1,0.35,0.37,1]},"o":{"k":100},"w":{"k":3},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tm","s":{"k":[{"i":{"x":[0.445],"y":[0.755]},"o":{"x":[0.167],"y":[0.167]},"n":["0p445_0p755_0p167_0p167"],"t":37,"s":[0],"e":[44.964]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.529],"y":[0.504]},"n":["0p667_1_0p529_0p504"],"t":46.5,"s":[44.964],"e":[72]},{"t":59}],"ix":1},"e":{"k":[{"i":{"x":[0.445],"y":[0.84]},"o":{"x":[0.167],"y":[0.167]},"n":["0p445_0p84_0p167_0p167"],"t":37,"s":[37.3],"e":[78.3]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.529],"y":[0.371]},"n":["0p667_1_0p529_0p371"],"t":46.5,"s":[78.3],"e":[100]},{"t":59}],"ix":2},"o":{"k":0,"ix":3},"m":1,"ix":3,"nm":"Trim Paths 1"},{"ty":"tr","p":{"k":[0,0],"ix":2},"a":{"k":[0,0],"ix":1},"s":{"k":[100,100],"ix":3},"r":{"k":0,"ix":6},"o":{"k":100,"ix":7},"sk":{"k":0,"ix":4},"sa":{"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1"}],"bounds":{"l":-29,"t":-27,"b":29,"r":18},"ip":37,"op":60,"st":-31,"bm":0,"sr":1},{"ddd":0,"ind":2,"ty":4,"nm":"1","ks":{"o":{"k":100},"r":{"k":0},"p":{"k":[40,40,0]},"a":{"k":[0,0,0]},"s":{"k":[100,100,100]}},"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","closed":true,"ks":{"k":{"i":[[-0.591,0],[0,-13.678],[4.909,-3.237],[0.386,0],[0.343,0.227],[0,15.725],[-3.766,0],[-0.598,-0.067],[-2.241,-1.245],[-2.559,-2.631],[-2.458,1.364],[-2.282,0.262]],"o":[[3.766,0],[0,15.725],[-0.343,0.227],[-0.386,0],[-4.909,-3.237],[0,-13.678],[0.591,0],[2.284,0.262],[2.458,1.367],[2.557,-2.629],[2.241,-1.247],[0.601,-0.067]],"v":[[15.986,-26.5],[30.499,-9.745],[1.113,26.161],[0,26.5],[-1.113,26.161],[-30.499,-9.745],[-15.986,-26.5],[-14.194,-26.398],[-7.375,-24.128],[0,-18.254],[7.375,-24.126],[14.192,-26.398]]}},"nm":"Path 1"},{"ty":"st","fillEnabled":true,"c":{"k":[1,0.35,0.37,1]},"o":{"k":100},"w":{"k":3},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tm","s":{"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.894],"y":[0]},"n":["0p833_0p833_0p894_0"],"t":0,"s":[0],"e":[70]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"n":["0p833_0p833_0p167_0p167"],"t":36,"s":[70],"e":[79.5]},{"t":37}],"ix":1},"e":{"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.894],"y":[0.894]},"n":["0p833_0p833_0p894_0p894"],"t":0,"s":[100],"e":[100]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"n":["0p833_0p833_0p167_0p167"],"t":36,"s":[100],"e":[99.9]},{"t":37}],"ix":2},"o":{"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.894],"y":[0]},"n":["0p833_0p833_0p894_0"],"t":0,"s":[0],"e":[179]},{"t":36}],"ix":3},"m":1,"ix":3,"nm":"Trim Paths 1"},{"ty":"tr","p":{"k":[0,0],"ix":2},"a":{"k":[0,0],"ix":1},"s":{"k":[100,100],"ix":3},"r":{"k":0,"ix":6},"o":{"k":100,"ix":7},"sk":{"k":0,"ix":4},"sa":{"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1"}],"bounds":{"l":-32,"t":-28,"b":28,"r":32},"ip":0,"op":38,"st":-32,"bm":0,"sr":1}],"ip":0,"op":83,"fr":60,"w":80,"h":80}, +++ b/lottie/src/main/java/com/airbnb/lottie/layers/ShapeLayer.java, +    /** Path for the trim path when it loops around the end back to the start */, +    private final Path extraTrimPath = new Path();, +        if (needsStrokeStart || needsStrokeEnd || needsStrokeOffset) {, +            currentPathStrokeStart = strokeStart.getValue();, +            currentPathStrokeEnd = strokeEnd.getValue();, +            float start = length * currentPathStrokeStart / 100f;, +            float end = length * currentPathStrokeEnd / 100f;, +            float newStart = Math.min(start, end);, +            float newEnd = Math.max(start, end);, +            currentPathStrokeOffset = strokeOffset.getValue() / 360f * length;, +            newStart += currentPathStrokeOffset;, +            newEnd += currentPathStrokeOffset;, +, +                    newStart,, +                    newEnd,, +, +            extraTrimPath.reset();, +            if (newEnd > length) {, +                pathMeasure.getSegment(, +                        0,, +                        newEnd % length,, +                        extraTrimPath,, +                        true);, +            }, +        if (!extraTrimPath.isEmpty()) {, +            canvas.drawPath(extraTrimPath, paint);, +        }]