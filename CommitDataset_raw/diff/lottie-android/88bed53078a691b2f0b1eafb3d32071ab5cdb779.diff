[+++ b/LottieSample/src/main/kotlin/com/airbnb/lottie/samples/PlayerFragment.kt, +import com.airbnb.lottie.RenderMode, +        hardwareAccelerationToggle.setOnClickListener {, +            val renderMode = if (animationView.layerType == View.LAYER_TYPE_HARDWARE) {, +                RenderMode.Software, +            } else {, +                RenderMode.Hardware, +            }, +            animationView.setRenderMode(renderMode), +            hardwareAccelerationToggle.isActivated = animationView.layerType == View.LAYER_TYPE_HARDWARE, +        }, +, +++ b/LottieSample/src/main/kotlin/com/airbnb/lottie/samples/PlayerFragment.kt, +import com.airbnb.lottie.RenderMode, +        hardwareAccelerationToggle.setOnClickListener {, +            val renderMode = if (animationView.layerType == View.LAYER_TYPE_HARDWARE) {, +                RenderMode.Software, +            } else {, +                RenderMode.Hardware, +            }, +            animationView.setRenderMode(renderMode), +            hardwareAccelerationToggle.isActivated = animationView.layerType == View.LAYER_TYPE_HARDWARE, +        }, +, +++ b/lottie/src/main/java/com/airbnb/lottie/LottieAnimationView.java, +  private RenderMode renderMode = RenderMode.Automatic;, +  /**, +   * Call this to set whether or not to render with hardware or software acceleration., +   * Lottie defaults to Automatic which will use hardware acceleration unless:, +   * 1) There are dash paths and the device is pre-Pie., +   * 2) There are more than 4 masks and mattes and the device is pre-Pie., +   *    Hardware acceleration is generally faster for those devices unless, +   *    there are many large mattes and masks in which case there is a ton, +   *    of GPU uploadTexture thrashing which makes it much slower., +   *, +   * In most cases, hardware rendering will be faster, even if you have mattes and masks., +   * However, if you have multiple mattes and masks (especially large ones) then you, +   * should test both render modes. You should also test on pre-Pie and Pie+ devices, +   * because the underlying rendering enginge changed significantly., +   */, +  public void setRenderMode(RenderMode renderMode) {, +    this.renderMode = renderMode;, +    enableOrDisableHardwareLayer();, +  }, +, +    switch (renderMode) {, +      case Hardware:, +        setLayerType(LAYER_TYPE_HARDWARE, null);, +        break;, +      case Software:, +        setLayerType(LAYER_TYPE_SOFTWARE, null);, +        break;, +      case Automatic:, +        } else if (composition != null && composition.getMaskAndMatteCount() > 4) {, +          useHardwareLayer = false;, +        break;, +    }, +, +++ b/LottieSample/src/main/kotlin/com/airbnb/lottie/samples/PlayerFragment.kt, +import com.airbnb.lottie.RenderMode, +        hardwareAccelerationToggle.setOnClickListener {, +            val renderMode = if (animationView.layerType == View.LAYER_TYPE_HARDWARE) {, +                RenderMode.Software, +            } else {, +                RenderMode.Hardware, +            }, +            animationView.setRenderMode(renderMode), +            hardwareAccelerationToggle.isActivated = animationView.layerType == View.LAYER_TYPE_HARDWARE, +        }, +, +++ b/lottie/src/main/java/com/airbnb/lottie/LottieAnimationView.java, +  private RenderMode renderMode = RenderMode.Automatic;, +  /**, +   * Call this to set whether or not to render with hardware or software acceleration., +   * Lottie defaults to Automatic which will use hardware acceleration unless:, +   * 1) There are dash paths and the device is pre-Pie., +   * 2) There are more than 4 masks and mattes and the device is pre-Pie., +   *    Hardware acceleration is generally faster for those devices unless, +   *    there are many large mattes and masks in which case there is a ton, +   *    of GPU uploadTexture thrashing which makes it much slower., +   *, +   * In most cases, hardware rendering will be faster, even if you have mattes and masks., +   * However, if you have multiple mattes and masks (especially large ones) then you, +   * should test both render modes. You should also test on pre-Pie and Pie+ devices, +   * because the underlying rendering enginge changed significantly., +   */, +  public void setRenderMode(RenderMode renderMode) {, +    this.renderMode = renderMode;, +    enableOrDisableHardwareLayer();, +  }, +, +    switch (renderMode) {, +      case Hardware:, +        setLayerType(LAYER_TYPE_HARDWARE, null);, +        break;, +      case Software:, +        setLayerType(LAYER_TYPE_SOFTWARE, null);, +        break;, +      case Automatic:, +        } else if (composition != null && composition.getMaskAndMatteCount() > 4) {]