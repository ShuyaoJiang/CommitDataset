[+++ b/guava/src/com/google/common/eventbus/EventBus.java, +import com.google.common.reflect.TypeToken;, +   * A thread-safe cache for flattenHierarchy(). The Class class is immutable., +  private final LoadingCache<Class<?>, Set<Class<?>>> flattenHierarchyCache =, +            @SuppressWarnings({"unchecked", "rawtypes"}) // safe cast, +              return (Set) TypeToken.of(concreteClass).getTypes().rawTypes();]