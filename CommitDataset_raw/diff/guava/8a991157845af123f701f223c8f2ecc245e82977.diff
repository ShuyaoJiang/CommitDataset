[+++ b/guava-testlib/src/com/google/common/testing/TearDownStack.java, +import com.google.common.collect.Lists;, +import javax.annotation.concurrent.GuardedBy;, + * <p>This class is thread-safe., + *, +  @GuardedBy("stack"), +    synchronized (stack) {, +  }, +    List<TearDown> stackCopy;, +    synchronized (stack) {, +      stackCopy = Lists.newArrayList(stack);, +      stack.clear();, +    }, +    for (TearDown tearDown : stackCopy) {, +++ b/guava-testlib/src/com/google/common/testing/TearDownStack.java, +import com.google.common.collect.Lists;, +import javax.annotation.concurrent.GuardedBy;, + * <p>This class is thread-safe., + *, +  @GuardedBy("stack"), +    synchronized (stack) {, +  }, +    List<TearDown> stackCopy;, +    synchronized (stack) {, +      stackCopy = Lists.newArrayList(stack);, +      stack.clear();, +    }, +    for (TearDown tearDown : stackCopy) {, +++ b/guava-testlib/test/com/google/common/testing/TearDownStackTest.java, +        synchronized (result.stack) {, +      }]