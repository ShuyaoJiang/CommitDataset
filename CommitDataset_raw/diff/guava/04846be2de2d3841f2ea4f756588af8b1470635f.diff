[+++ b/guava-tests/test/com/google/common/util/concurrent/AbstractScheduledServiceTest.java, +import java.util.concurrent.atomic.AtomicReference;, +    final AtomicReference<ScheduledExecutorService> executor = Atomics.newReference();, +        executor.set(super.executor());, +        return executor.get();, +      }, +    };, +    service.awaitTerminated();, +    assertTrue(executor.get().awaitTermination(100, TimeUnit.MILLISECONDS));, +    final AtomicReference<ScheduledExecutorService> executor = Atomics.newReference();, +      @Override protected void runOneIteration() throws Exception {}, +, +        executor.set(super.executor());, +        return executor.get();, +      }, +    };, +, +    assertTrue(executor.get().awaitTermination(100, TimeUnit.MILLISECONDS));]