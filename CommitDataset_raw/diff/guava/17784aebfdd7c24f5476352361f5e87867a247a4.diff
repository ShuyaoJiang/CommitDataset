[+++ b/guava-gwt/test/com/google/common/collect/ImmutableListMultimapTest_gwt.java, +public void testFlatteningToImmutableListMultimap() throws Exception {, +  com.google.common.collect.ImmutableListMultimapTest testCase = new com.google.common.collect.ImmutableListMultimapTest();, +  testCase.testFlatteningToImmutableListMultimap();, +}, +, +++ b/guava-gwt/test/com/google/common/collect/ImmutableListMultimapTest_gwt.java, +public void testFlatteningToImmutableListMultimap() throws Exception {, +  com.google.common.collect.ImmutableListMultimapTest testCase = new com.google.common.collect.ImmutableListMultimapTest();, +  testCase.testFlatteningToImmutableListMultimap();, +}, +, +++ b/guava-gwt/test/com/google/common/collect/ImmutableSetMultimapTest_gwt.java, +public void testFlatteningToImmutableSetMultimap() throws Exception {, +  com.google.common.collect.ImmutableSetMultimapTest testCase = new com.google.common.collect.ImmutableSetMultimapTest();, +  testCase.testFlatteningToImmutableSetMultimap();, +}, +, +++ b/guava-gwt/test/com/google/common/collect/ImmutableListMultimapTest_gwt.java, +public void testFlatteningToImmutableListMultimap() throws Exception {, +  com.google.common.collect.ImmutableListMultimapTest testCase = new com.google.common.collect.ImmutableListMultimapTest();, +  testCase.testFlatteningToImmutableListMultimap();, +}, +, +++ b/guava-gwt/test/com/google/common/collect/ImmutableSetMultimapTest_gwt.java, +public void testFlatteningToImmutableSetMultimap() throws Exception {, +  com.google.common.collect.ImmutableSetMultimapTest testCase = new com.google.common.collect.ImmutableSetMultimapTest();, +  testCase.testFlatteningToImmutableSetMultimap();, +}, +, +++ b/guava-gwt/test/com/google/common/collect/MultimapsTest_gwt.java, +public void testFlatteningToMultimap() throws Exception {, +  com.google.common.collect.MultimapsTest testCase = new com.google.common.collect.MultimapsTest();, +  testCase.testFlatteningToMultimap();, +}, +, +++ b/guava-gwt/test/com/google/common/collect/ImmutableListMultimapTest_gwt.java, +public void testFlatteningToImmutableListMultimap() throws Exception {, +  com.google.common.collect.ImmutableListMultimapTest testCase = new com.google.common.collect.ImmutableListMultimapTest();, +  testCase.testFlatteningToImmutableListMultimap();, +}, +, +++ b/guava-gwt/test/com/google/common/collect/ImmutableSetMultimapTest_gwt.java, +public void testFlatteningToImmutableSetMultimap() throws Exception {, +  com.google.common.collect.ImmutableSetMultimapTest testCase = new com.google.common.collect.ImmutableSetMultimapTest();, +  testCase.testFlatteningToImmutableSetMultimap();, +}, +, +++ b/guava-gwt/test/com/google/common/collect/MultimapsTest_gwt.java, +public void testFlatteningToMultimap() throws Exception {, +  com.google.common.collect.MultimapsTest testCase = new com.google.common.collect.MultimapsTest();, +  testCase.testFlatteningToMultimap();, +}, +, +++ b/guava-tests/test/com/google/common/collect/ImmutableListMultimapTest.java, +  public void testFlatteningToImmutableListMultimap() {, +    Collector<String, ?, ImmutableListMultimap<Character, Character>> collector =, +        ImmutableListMultimap.flatteningToImmutableListMultimap(, +            str -> str.charAt(0), str -> str.substring(1).chars().mapToObj(c -> (char) c));, +    BiPredicate<Multimap<?, ?>, Multimap<?, ?>> equivalence =, +        Equivalence.equals(), +            .onResultOf((Multimap<?, ?> mm) -> ImmutableList.copyOf(mm.asMap().entrySet())), +            .and(Equivalence.equals());, +    ImmutableListMultimap<Character, Character> empty = ImmutableListMultimap.of();, +    ImmutableListMultimap<Character, Character> filled =, +        ImmutableListMultimap.<Character, Character>builder(), +            .putAll('b', Arrays.asList('a', 'n', 'a', 'n', 'a')), +            .putAll('a', Arrays.asList('p', 'p', 'l', 'e')), +            .putAll('c', Arrays.asList('a', 'r', 'r', 'o', 't')), +            .putAll('a', Arrays.asList('s', 'p', 'a', 'r', 'a', 'g', 'u', 's')), +            .putAll('c', Arrays.asList('h', 'e', 'r', 'r', 'y')), +            .build();, +    CollectorTester.of(collector, equivalence), +        .expectCollects(empty), +        .expectCollects(filled, "banana", "apple", "carrot", "asparagus", "cherry");, +  }, +, +++ b/guava-gwt/test/com/google/common/collect/ImmutableListMultimapTest_gwt.java, +public void testFlatteningToImmutableListMultimap() throws Exception {, +  com.google.common.collect.ImmutableListMultimapTest testCase = new com.google.common.collect.ImmutableListMultimapTest();, +  testCase.testFlatteningToImmutableListMultimap();, +}, +, +++ b/guava-gwt/test/com/google/common/collect/ImmutableSetMultimapTest_gwt.java, +public void testFlatteningToImmutableSetMultimap() throws Exception {, +  com.google.common.collect.ImmutableSetMultimapTest testCase = new com.google.common.collect.ImmutableSetMultimapTest();, +  testCase.testFlatteningToImmutableSetMultimap();, +}, +, +++ b/guava-gwt/test/com/google/common/collect/MultimapsTest_gwt.java, +public void testFlatteningToMultimap() throws Exception {, +  com.google.common.collect.MultimapsTest testCase = new com.google.common.collect.MultimapsTest();, +  testCase.testFlatteningToMultimap();, +}, +, +++ b/guava-tests/test/com/google/common/collect/ImmutableListMultimapTest.java, +  public void testFlatteningToImmutableListMultimap() {, +    Collector<String, ?, ImmutableListMultimap<Character, Character>> collector =, +        ImmutableListMultimap.flatteningToImmutableListMultimap(, +            str -> str.charAt(0), str -> str.substring(1).chars().mapToObj(c -> (char) c));]