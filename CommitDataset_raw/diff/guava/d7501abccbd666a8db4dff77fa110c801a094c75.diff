[+++ b/android/guava-testlib/src/com/google/common/collect/testing/google/SetGenerators.java, +  public static class ImmutableSetUnsizedBuilderGenerator extends TestStringSetGenerator {, +    @Override, +    protected Set<String> create(String[] elements) {, +      ImmutableSet.Builder<String> builder = ImmutableSet.builder();, +      for (String e : elements) {, +        builder.add(e);, +      }, +      return builder.build();, +    }, +  }, +, +  public static class ImmutableSetSizedBuilderGenerator extends TestStringSetGenerator {, +    @Override, +    protected Set<String> create(String[] elements) {, +      ImmutableSet.Builder<String> builder =, +          ImmutableSet.builderWithExpectedSize(Sets.newHashSet(elements).size());, +      for (String e : elements) {, +        builder.add(e);, +      }, +      return builder.build();, +    }, +  }, +, +  public static class ImmutableSetTooBigBuilderGenerator extends TestStringSetGenerator {, +    @Override, +    protected Set<String> create(String[] elements) {, +      ImmutableSet.Builder<String> builder =, +          ImmutableSet.builderWithExpectedSize(Sets.newHashSet(elements).size() + 1);, +      for (String e : elements) {, +        builder.add(e);, +      }, +      return builder.build();, +    }, +  }, +, +  public static class ImmutableSetTooSmallBuilderGenerator extends TestStringSetGenerator {, +    @Override, +    protected Set<String> create(String[] elements) {, +      ImmutableSet.Builder<String> builder =, +          ImmutableSet.builderWithExpectedSize(Math.max(0, Sets.newHashSet(elements).size() - 1));, +      for (String e : elements) {, +        builder.add(e);, +      }, +      return builder.build();, +    }, +  }, +, +++ b/android/guava-testlib/src/com/google/common/collect/testing/google/SetGenerators.java, +  public static class ImmutableSetUnsizedBuilderGenerator extends TestStringSetGenerator {, +    @Override, +    protected Set<String> create(String[] elements) {, +      ImmutableSet.Builder<String> builder = ImmutableSet.builder();, +      for (String e : elements) {, +        builder.add(e);, +      }, +      return builder.build();, +    }, +  }, +, +  public static class ImmutableSetSizedBuilderGenerator extends TestStringSetGenerator {, +    @Override, +    protected Set<String> create(String[] elements) {, +      ImmutableSet.Builder<String> builder =, +          ImmutableSet.builderWithExpectedSize(Sets.newHashSet(elements).size());, +      for (String e : elements) {, +        builder.add(e);, +      }, +      return builder.build();, +    }, +  }, +, +  public static class ImmutableSetTooBigBuilderGenerator extends TestStringSetGenerator {, +    @Override, +    protected Set<String> create(String[] elements) {, +      ImmutableSet.Builder<String> builder =, +          ImmutableSet.builderWithExpectedSize(Sets.newHashSet(elements).size() + 1);, +      for (String e : elements) {, +        builder.add(e);, +      }, +      return builder.build();, +    }, +  }, +, +  public static class ImmutableSetTooSmallBuilderGenerator extends TestStringSetGenerator {, +    @Override, +    protected Set<String> create(String[] elements) {, +      ImmutableSet.Builder<String> builder =, +          ImmutableSet.builderWithExpectedSize(Math.max(0, Sets.newHashSet(elements).size() - 1));, +      for (String e : elements) {, +        builder.add(e);, +      }, +      return builder.build();, +    }, +  }, +, +++ b/android/guava-tests/test/com/google/common/collect/ImmutableSetTest.java, +import com.google.common.collect.testing.google.SetGenerators.ImmutableSetSizedBuilderGenerator;, +import com.google.common.collect.testing.google.SetGenerators.ImmutableSetTooBigBuilderGenerator;, +import com.google.common.collect.testing.google.SetGenerators.ImmutableSetTooSmallBuilderGenerator;]