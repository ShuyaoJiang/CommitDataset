[+++ b/guava-tests/test/com/google/common/collect/MutableClassToInstanceMapTest.java, +            CollectionFeature.SERIALIZABLE,, +++ b/guava-tests/test/com/google/common/collect/MutableClassToInstanceMapTest.java, +            CollectionFeature.SERIALIZABLE,, +++ b/guava/src/com/google/common/collect/MutableClassToInstanceMap.java, +import java.io.Serializable;, +@SuppressWarnings("serial") // using writeReplace instead of standard serialization, +    implements ClassToInstanceMap<B>, Serializable {, +  private Object writeReplace() {, +    return new SerializedForm(delegate());, +  }, +, +  /**, +   * Serialized form of the map, to avoid serializing the constraint., +   */, +  private static final class SerializedForm<B> implements Serializable {, +    private final Map<Class<? extends B>, B> backingMap;, +, +    SerializedForm(Map<Class<? extends B>, B> backingMap) {, +      this.backingMap = backingMap;, +    }, +, +    Object readResolve() {, +      return create(backingMap);, +    }, +, +}]