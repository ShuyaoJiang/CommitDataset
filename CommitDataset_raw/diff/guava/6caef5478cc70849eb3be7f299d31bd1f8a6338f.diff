[+++ b/src/com/google/common/collect/CustomConcurrentHashMap.java, +      if (this.threshold == maxSegmentSize) {, +        // prevent spurious expansion before eviction, +        this.threshold++;, +      }, +        if (newCount > this.threshold) { // ensure capacity, +        if (evicts && newCount > maxSegmentSize) {, +          evictEntry();, +        }, +]