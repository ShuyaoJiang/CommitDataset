[+++ b/guava-tests/test/com/google/common/cache/CacheBuilderFactory.java, +import com.google.common.cache.LocalCacheAsMap.Strength;, +++ b/guava-tests/test/com/google/common/cache/CacheBuilderFactory.java, +import com.google.common.cache.LocalCacheAsMap.Strength;, +++ b/guava-tests/test/com/google/common/cache/CacheBuilderTest.java, +    LocalCacheAsMap<?, ?> map = CacheTesting.toLocalCacheAsMap(cache);, +    LocalCacheAsMap<?, ?> map = CacheTesting.toLocalCacheAsMap(cache);, +    LocalCacheAsMap<?, ?> map = CacheTesting.toLocalCacheAsMap(cache);, +    LocalCacheAsMap<?, ?> map = CacheTesting.toLocalCacheAsMap(cache);, +++ b/guava-tests/test/com/google/common/cache/CacheBuilderFactory.java, +import com.google.common.cache.LocalCacheAsMap.Strength;, +++ b/guava-tests/test/com/google/common/cache/CacheBuilderTest.java, +    LocalCacheAsMap<?, ?> map = CacheTesting.toLocalCacheAsMap(cache);, +    LocalCacheAsMap<?, ?> map = CacheTesting.toLocalCacheAsMap(cache);, +    LocalCacheAsMap<?, ?> map = CacheTesting.toLocalCacheAsMap(cache);, +    LocalCacheAsMap<?, ?> map = CacheTesting.toLocalCacheAsMap(cache);, +++ b/guava-tests/test/com/google/common/cache/CacheEvictionTest.java, +import com.google.common.cache.LocalCacheAsMap.ReferenceEntry;, +++ b/guava-tests/test/com/google/common/cache/CacheBuilderFactory.java, +import com.google.common.cache.LocalCacheAsMap.Strength;, +++ b/guava-tests/test/com/google/common/cache/CacheBuilderTest.java, +    LocalCacheAsMap<?, ?> map = CacheTesting.toLocalCacheAsMap(cache);, +    LocalCacheAsMap<?, ?> map = CacheTesting.toLocalCacheAsMap(cache);, +    LocalCacheAsMap<?, ?> map = CacheTesting.toLocalCacheAsMap(cache);, +    LocalCacheAsMap<?, ?> map = CacheTesting.toLocalCacheAsMap(cache);, +++ b/guava-tests/test/com/google/common/cache/CacheEvictionTest.java, +import com.google.common.cache.LocalCacheAsMap.ReferenceEntry;, +++ b/guava-tests/test/com/google/common/cache/CacheReferencesTest.java, +import static com.google.common.cache.LocalCacheAsMap.Strength.STRONG;, +import com.google.common.cache.LocalCacheAsMap.Strength;, +++ b/guava-tests/test/com/google/common/cache/CacheBuilderFactory.java, +import com.google.common.cache.LocalCacheAsMap.Strength;, +++ b/guava-tests/test/com/google/common/cache/CacheBuilderTest.java, +    LocalCacheAsMap<?, ?> map = CacheTesting.toLocalCacheAsMap(cache);, +    LocalCacheAsMap<?, ?> map = CacheTesting.toLocalCacheAsMap(cache);, +    LocalCacheAsMap<?, ?> map = CacheTesting.toLocalCacheAsMap(cache);, +    LocalCacheAsMap<?, ?> map = CacheTesting.toLocalCacheAsMap(cache);, +++ b/guava-tests/test/com/google/common/cache/CacheEvictionTest.java, +import com.google.common.cache.LocalCacheAsMap.ReferenceEntry;, +++ b/guava-tests/test/com/google/common/cache/CacheReferencesTest.java, +import static com.google.common.cache.LocalCacheAsMap.Strength.STRONG;, +import com.google.common.cache.LocalCacheAsMap.Strength;, +++ b/guava-tests/test/com/google/common/cache/CacheTesting.java, +import com.google.common.cache.LocalCacheAsMap.ReferenceEntry;, +import com.google.common.cache.LocalCacheAsMap.Segment;, +import com.google.common.cache.LocalCacheAsMap.ValueReference;, +    LocalCacheAsMap<K, V> map = toLocalCacheAsMap(cache);, +    LocalCacheAsMap<K, V> map = toLocalCacheAsMap(cache);, +   * Gets the {@link LocalCacheAsMap} used by the given {@link Cache}, if any, or throws an, +   * IllegalArgumentException if this is a Cache type that doesn't have a LocalCacheAsMap., +  static <K, V> LocalCacheAsMap<K, V> toLocalCacheAsMap(Cache<K, V> cache) {, +        + " doesn't have a LocalCacheAsMap.");, +   * Determines whether the given cache can be converted to a LocalCacheAsMap by, +   * {@link #toLocalCacheAsMap} without throwing an exception., +  static boolean hasLocalCacheAsMap(Cache<?, ?> cache) {, +    if (hasLocalCacheAsMap(cache)) {, +      LocalCacheAsMap<?, ?> map = toLocalCacheAsMap(cache);, +    if (hasLocalCacheAsMap(cache)) {, +      drainReferenceQueues(toLocalCacheAsMap(cache));, +  static void drainReferenceQueues(LocalCacheAsMap<?, ?> cchm) {, +    for (LocalCacheAsMap.Segment segment : cchm.segments) {, +  static void drainReferenceQueue(LocalCacheAsMap.Segment<?, ?> segment) {, +    LocalCacheAsMap<?, ?> map = toLocalCacheAsMap(cache);, +    if (hasLocalCacheAsMap(cache)) {, +      checkValidState(toLocalCacheAsMap(cache));, +  static void checkValidState(LocalCacheAsMap<?, ?> cchm) {, +    if (hasLocalCacheAsMap(cache)) {, +      checkExpiration(toLocalCacheAsMap(cache));, +  static void checkExpiration(LocalCacheAsMap<?, ?> cchm) {, +    if (hasLocalCacheAsMap(cache)) {, +      checkEviction(toLocalCacheAsMap(cache));, +  static void checkEviction(LocalCacheAsMap<?, ?> map) {, +    LocalCacheAsMap<?, ?> cchm = toLocalCacheAsMap(cache);, +    LocalCacheAsMap<?, ?> cchm = toLocalCacheAsMap(cache);, +    if (hasLocalCacheAsMap(cache)) {, +      LocalCacheAsMap<?, ?> cchm = toLocalCacheAsMap(cache);, +    if (hasLocalCacheAsMap(cache)) {, +      LocalCacheAsMap<Integer, Integer> cchm = toLocalCacheAsMap(cache);, +    expireEntries(toLocalCacheAsMap(cache), expiringTime, ticker);, +      LocalCacheAsMap<?, ?> cchm, long expiringTime, FakeTicker ticker) {, +    if (map instanceof LocalCacheAsMap) {, +      LocalCacheAsMap<?, ?> cchm = (LocalCacheAsMap<?, ?>) map;, +      for (LocalCacheAsMap.Segment segment : cchm.segments) {, +++ b/guava-tests/test/com/google/common/cache/CacheBuilderFactory.java, +import com.google.common.cache.LocalCacheAsMap.Strength;, +++ b/guava-tests/test/com/google/common/cache/CacheBuilderTest.java, +    LocalCacheAsMap<?, ?> map = CacheTesting.toLocalCacheAsMap(cache);, +    LocalCacheAsMap<?, ?> map = CacheTesting.toLocalCacheAsMap(cache);, +    LocalCacheAsMap<?, ?> map = CacheTesting.toLocalCacheAsMap(cache);, +    LocalCacheAsMap<?, ?> map = CacheTesting.toLocalCacheAsMap(cache);, +++ b/guava-tests/test/com/google/common/cache/CacheEvictionTest.java, +import com.google.common.cache.LocalCacheAsMap.ReferenceEntry;, +++ b/guava-tests/test/com/google/common/cache/CacheReferencesTest.java, +import static com.google.common.cache.LocalCacheAsMap.Strength.STRONG;, +import com.google.common.cache.LocalCacheAsMap.Strength;, +++ b/guava-tests/test/com/google/common/cache/CacheTesting.java, +import com.google.common.cache.LocalCacheAsMap.ReferenceEntry;, +import com.google.common.cache.LocalCacheAsMap.Segment;, +import com.google.common.cache.LocalCacheAsMap.ValueReference;, +    LocalCacheAsMap<K, V> map = toLocalCacheAsMap(cache);]