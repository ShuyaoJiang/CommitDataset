[+++ b/android/guava/src/com/google/common/collect/ImmutableMultimap.java, +, +    // We can't label this with @Override, because it doesn't override anything, +    // in the GWT emulated version., +    Object writeReplace() {, +      return new KeysSerializedForm(ImmutableMultimap.this);, +    }, +  }, +  , +  private static final class KeysSerializedForm implements Serializable {, +    final ImmutableMultimap<?, ?> multimap;, +, +    KeysSerializedForm(ImmutableMultimap<?, ?> multimap) {, +      this.multimap = multimap;, +    }, +, +    Object readResolve() {, +      return multimap.keys();, +    }, +++ b/android/guava/src/com/google/common/collect/ImmutableMultimap.java, +, +    // We can't label this with @Override, because it doesn't override anything, +    // in the GWT emulated version., +    Object writeReplace() {, +      return new KeysSerializedForm(ImmutableMultimap.this);, +    }, +  }, +  , +  private static final class KeysSerializedForm implements Serializable {, +    final ImmutableMultimap<?, ?> multimap;, +, +    KeysSerializedForm(ImmutableMultimap<?, ?> multimap) {, +      this.multimap = multimap;, +    }, +, +    Object readResolve() {, +      return multimap.keys();, +    }, +++ b/android/guava/src/com/google/common/collect/ImmutableMultiset.java, +  abstract Object writeReplace();, +++ b/android/guava/src/com/google/common/collect/ImmutableMultimap.java, +, +    // We can't label this with @Override, because it doesn't override anything, +    // in the GWT emulated version., +    Object writeReplace() {, +      return new KeysSerializedForm(ImmutableMultimap.this);, +    }, +  }, +  , +  private static final class KeysSerializedForm implements Serializable {, +    final ImmutableMultimap<?, ?> multimap;, +, +    KeysSerializedForm(ImmutableMultimap<?, ?> multimap) {, +      this.multimap = multimap;, +    }, +, +    Object readResolve() {, +      return multimap.keys();, +    }, +++ b/android/guava/src/com/google/common/collect/ImmutableMultiset.java, +  abstract Object writeReplace();, +++ b/android/guava/src/com/google/common/collect/RegularImmutableMultiset.java, +import com.google.common.base.Objects;, +import com.google.common.collect.Multisets.ImmutableEntry;, +import com.google.common.base.Objects;, +import com.google.common.collect.Multiset.Entry;, +import com.google.common.collect.Multisets.ImmutableEntry;, +import java.util.Collection;, +import java.io.Serializable;, +import java.util.Collection;, +, +  private static class SerializedForm implements Serializable {, +    final Object[] elements;, +    final int[] counts;, +, +    SerializedForm(Multiset<?> multiset) {, +      int distinct = multiset.entrySet().size();, +      elements = new Object[distinct];, +      counts = new int[distinct];, +      int i = 0;, +      for (Entry<?> entry : multiset.entrySet()) {, +        elements[i] = entry.getElement();, +        counts[i] = entry.getCount();, +        i++;, +      }, +    }, +, +    Object readResolve() {, +      ImmutableMultiset.Builder<Object> builder =, +          new ImmutableMultiset.Builder<Object>(elements.length);, +      for (int i = 0; i < elements.length; i++) {, +        builder.addCopies(elements[i], counts[i]);, +      }, +      return builder.build();, +    }, +, +    private static final long serialVersionUID = 0;, +  }, +, +  //We can't label this with @Override, because it doesn't override anything]