[+++ b/guava-gwt/src-super/com/google/common/io/super/com/google/common/io/BaseEncoding.java, +        throw new DecodingException("Unrecognized character: ", +            + (CharMatcher.INVISIBLE.matches(ch) ? "0x" + Integer.toHexString(ch) : ch));, +++ b/guava-gwt/src-super/com/google/common/io/super/com/google/common/io/BaseEncoding.java, +        throw new DecodingException("Unrecognized character: ", +            + (CharMatcher.INVISIBLE.matches(ch) ? "0x" + Integer.toHexString(ch) : ch));, +++ b/guava-gwt/test-super/com/google/common/io/super/com/google/common/io/BaseEncodingTest.java, +import static com.google.common.truth.Truth.assertThat;, +import javax.annotation.Nullable;, +, +    assertFailsToDecode(base64(), "\u007f", "Unrecognized character: 0x7f");, +    assertFailsToDecode(base64(), "Wf2!", "Unrecognized character: !");, +    assertFailsToDecode(base32(), " ", "Unrecognized character: 0x20");, +    assertFailsToDecode(base32(), "Wf2!", "Unrecognized character: f");, +    assertFailsToDecode(base32Hex(), "\u007f", "Unrecognized character: 0x7f");, +    assertFailsToDecode(base32Hex(), "Wf2!", "Unrecognized character: W");, +  public void testBase16InvalidDecodings() {, +    // These contain bytes not in the decodabet., +    assertFailsToDecode(base16(), "\n", "Unrecognized character: 0xa");, +    assertFailsToDecode(base16(), "EFG", "Unrecognized character: G");, +    // Valid base16 strings always have an even length., +    assertFailsToDecode(base16(), "A");, +    assertFailsToDecode(base16(), "ABC");, +  }, +, +    assertFailsToDecode(encoding, cannotDecode, null);, +  }, +, +  private static void assertFailsToDecode(, +      BaseEncoding encoding, String cannotDecode, @Nullable String expectedMessage) {, +      if (expectedMessage != null) {, +        assertThat(expected.getCause()).hasMessage(expectedMessage);, +      }, +      if (expectedMessage != null) {, +        assertThat(expected).hasMessage(expectedMessage);, +      }, +++ b/guava-gwt/src-super/com/google/common/io/super/com/google/common/io/BaseEncoding.java, +        throw new DecodingException("Unrecognized character: ", +            + (CharMatcher.INVISIBLE.matches(ch) ? "0x" + Integer.toHexString(ch) : ch));, +++ b/guava-gwt/test-super/com/google/common/io/super/com/google/common/io/BaseEncodingTest.java, +import static com.google.common.truth.Truth.assertThat;, +import javax.annotation.Nullable;, +, +    assertFailsToDecode(base64(), "\u007f", "Unrecognized character: 0x7f");, +    assertFailsToDecode(base64(), "Wf2!", "Unrecognized character: !");, +    assertFailsToDecode(base32(), " ", "Unrecognized character: 0x20");, +    assertFailsToDecode(base32(), "Wf2!", "Unrecognized character: f");, +    assertFailsToDecode(base32Hex(), "\u007f", "Unrecognized character: 0x7f");, +    assertFailsToDecode(base32Hex(), "Wf2!", "Unrecognized character: W");, +  public void testBase16InvalidDecodings() {, +    // These contain bytes not in the decodabet., +    assertFailsToDecode(base16(), "\n", "Unrecognized character: 0xa");, +    assertFailsToDecode(base16(), "EFG", "Unrecognized character: G");, +    // Valid base16 strings always have an even length., +    assertFailsToDecode(base16(), "A");, +    assertFailsToDecode(base16(), "ABC");, +  }, +, +    assertFailsToDecode(encoding, cannotDecode, null);, +  }, +, +  private static void assertFailsToDecode(, +      BaseEncoding encoding, String cannotDecode, @Nullable String expectedMessage) {, +      if (expectedMessage != null) {, +        assertThat(expected.getCause()).hasMessage(expectedMessage);, +      }, +      if (expectedMessage != null) {, +        assertThat(expected).hasMessage(expectedMessage);, +      }, +++ b/guava-gwt/test/com/google/common/io/BaseEncodingTest_gwt.java, +public void testBase16InvalidDecodings() throws Exception {, +  com.google.common.io.BaseEncodingTest testCase = new com.google.common.io.BaseEncodingTest();, +  testCase.testBase16InvalidDecodings();, +}, +, +++ b/guava-gwt/src-super/com/google/common/io/super/com/google/common/io/BaseEncoding.java, +        throw new DecodingException("Unrecognized character: ", +            + (CharMatcher.INVISIBLE.matches(ch) ? "0x" + Integer.toHexString(ch) : ch));, +++ b/guava-gwt/test-super/com/google/common/io/super/com/google/common/io/BaseEncodingTest.java, +import static com.google.common.truth.Truth.assertThat;, +import javax.annotation.Nullable;, +, +    assertFailsToDecode(base64(), "\u007f", "Unrecognized character: 0x7f");, +    assertFailsToDecode(base64(), "Wf2!", "Unrecognized character: !");, +    assertFailsToDecode(base32(), " ", "Unrecognized character: 0x20");, +    assertFailsToDecode(base32(), "Wf2!", "Unrecognized character: f");, +    assertFailsToDecode(base32Hex(), "\u007f", "Unrecognized character: 0x7f");, +    assertFailsToDecode(base32Hex(), "Wf2!", "Unrecognized character: W");, +  public void testBase16InvalidDecodings() {, +    // These contain bytes not in the decodabet., +    assertFailsToDecode(base16(), "\n", "Unrecognized character: 0xa");, +    assertFailsToDecode(base16(), "EFG", "Unrecognized character: G");, +    // Valid base16 strings always have an even length., +    assertFailsToDecode(base16(), "A");, +    assertFailsToDecode(base16(), "ABC");, +  }, +, +    assertFailsToDecode(encoding, cannotDecode, null);, +  }, +]