[+++ b/android/guava-tests/test/com/google/common/io/MultiInputStreamTest.java, +  public void testReadSingle_noStackOverflow() throws IOException {, +    // https://github.com/google/guava/issues/2996, +    // no data, just testing that there's no StackOverflowException, +    assertEquals(-1, tenMillionEmptySources().read());, +  }, +, +  public void testReadArray_noStackOverflow() throws IOException {, +    // https://github.com/google/guava/issues/2996, +    // no data, just testing that there's no StackOverflowException, +    assertEquals(-1, tenMillionEmptySources().read(new byte[1]));, +  }, +, +  private static MultiInputStream tenMillionEmptySources() throws IOException {, +    return new MultiInputStream(Collections.nCopies(10_000_000, ByteSource.empty()).iterator());, +  }, +, +++ b/android/guava-tests/test/com/google/common/io/MultiInputStreamTest.java, +  public void testReadSingle_noStackOverflow() throws IOException {, +    // https://github.com/google/guava/issues/2996, +    // no data, just testing that there's no StackOverflowException, +    assertEquals(-1, tenMillionEmptySources().read());, +  }, +, +  public void testReadArray_noStackOverflow() throws IOException {, +    // https://github.com/google/guava/issues/2996, +    // no data, just testing that there's no StackOverflowException, +    assertEquals(-1, tenMillionEmptySources().read(new byte[1]));, +  }, +, +  private static MultiInputStream tenMillionEmptySources() throws IOException {, +    return new MultiInputStream(Collections.nCopies(10_000_000, ByteSource.empty()).iterator());, +  }, +, +++ b/android/guava/src/com/google/common/io/MultiInputStream.java, +    while (in != null) {, +      if (result != -1) {, +      advance();, +    }, +    return -1;, +  }, +    while (in != null) {, +      if (result != -1) {, +      advance();, +    }, +    return -1;, +  }, +++ b/android/guava-tests/test/com/google/common/io/MultiInputStreamTest.java, +  public void testReadSingle_noStackOverflow() throws IOException {, +    // https://github.com/google/guava/issues/2996, +    // no data, just testing that there's no StackOverflowException, +    assertEquals(-1, tenMillionEmptySources().read());, +  }, +, +  public void testReadArray_noStackOverflow() throws IOException {, +    // https://github.com/google/guava/issues/2996, +    // no data, just testing that there's no StackOverflowException, +    assertEquals(-1, tenMillionEmptySources().read(new byte[1]));, +  }, +, +  private static MultiInputStream tenMillionEmptySources() throws IOException {, +    return new MultiInputStream(Collections.nCopies(10_000_000, ByteSource.empty()).iterator());, +  }, +, +++ b/android/guava/src/com/google/common/io/MultiInputStream.java, +    while (in != null) {, +      if (result != -1) {, +      advance();, +    }, +    return -1;, +  }, +    while (in != null) {, +      if (result != -1) {, +      advance();, +    }, +    return -1;, +  }, +++ b/guava-tests/test/com/google/common/io/MultiInputStreamTest.java, +  public void testReadSingle_noStackOverflow() throws IOException {, +    // https://github.com/google/guava/issues/2996, +    // no data, just testing that there's no StackOverflowException, +    assertEquals(-1, tenMillionEmptySources().read());, +  }, +, +  public void testReadArray_noStackOverflow() throws IOException {, +    // https://github.com/google/guava/issues/2996, +    // no data, just testing that there's no StackOverflowException, +    assertEquals(-1, tenMillionEmptySources().read(new byte[1]));, +  }, +, +  private static MultiInputStream tenMillionEmptySources() throws IOException {, +    return new MultiInputStream(Collections.nCopies(10_000_000, ByteSource.empty()).iterator());, +  }, +, +++ b/android/guava-tests/test/com/google/common/io/MultiInputStreamTest.java, +  public void testReadSingle_noStackOverflow() throws IOException {, +    // https://github.com/google/guava/issues/2996, +    // no data, just testing that there's no StackOverflowException, +    assertEquals(-1, tenMillionEmptySources().read());, +  }]