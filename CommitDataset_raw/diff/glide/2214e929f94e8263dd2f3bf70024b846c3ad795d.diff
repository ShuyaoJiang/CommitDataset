[+++ b/library/src/main/java/com/bumptech/glide/load/DecodeFormat.java, +   * <p>On Android O+, this format will will use ARGB_8888 only when it's not possible to use, +   * {@link android.graphics.Bitmap.Config#HARDWARE}., +   *, +   * this setting is a preference, not a promise., +   * Identical to {@link #PREFER_ARGB_8888} but prevents Glide from using {@link, +   * android.graphics.Bitmap.Config#HARDWARE} on Android O+, +   */, +  PREFER_ARGB_8888_DISALLOW_HARDWARE,, +, +  /**, +   *, +   * <p>On Android O+, this format will will use ARGB_8888 only when it's not possible to use, +   * {@link android.graphics.Bitmap.Config#HARDWARE}., +++ b/library/src/main/java/com/bumptech/glide/load/DecodeFormat.java, +   * <p>On Android O+, this format will will use ARGB_8888 only when it's not possible to use, +   * {@link android.graphics.Bitmap.Config#HARDWARE}., +   *, +   * this setting is a preference, not a promise., +   * Identical to {@link #PREFER_ARGB_8888} but prevents Glide from using {@link, +   * android.graphics.Bitmap.Config#HARDWARE} on Android O+, +   */, +  PREFER_ARGB_8888_DISALLOW_HARDWARE,, +, +  /**, +   *, +   * <p>On Android O+, this format will will use ARGB_8888 only when it's not possible to use, +   * {@link android.graphics.Bitmap.Config#HARDWARE}., +++ b/library/src/main/java/com/bumptech/glide/load/engine/bitmap_recycle/LruBitmapPool.java, +    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {, +      // GIFs, among other types, end up with a native Bitmap config that doesn't map to a java, +      // config and is treated as null in java code. On KitKat+ these Bitmaps can be reconfigured, +      // and are suitable for re-use., +    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {, +      configs.remove(Bitmap.Config.HARDWARE);, +    }, +++ b/library/src/main/java/com/bumptech/glide/load/DecodeFormat.java, +   * <p>On Android O+, this format will will use ARGB_8888 only when it's not possible to use, +   * {@link android.graphics.Bitmap.Config#HARDWARE}., +   *, +   * this setting is a preference, not a promise., +   * Identical to {@link #PREFER_ARGB_8888} but prevents Glide from using {@link, +   * android.graphics.Bitmap.Config#HARDWARE} on Android O+, +   */, +  PREFER_ARGB_8888_DISALLOW_HARDWARE,, +, +  /**, +   *, +   * <p>On Android O+, this format will will use ARGB_8888 only when it's not possible to use, +   * {@link android.graphics.Bitmap.Config#HARDWARE}., +++ b/library/src/main/java/com/bumptech/glide/load/engine/bitmap_recycle/LruBitmapPool.java, +    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {, +      // GIFs, among other types, end up with a native Bitmap config that doesn't map to a java, +      // config and is treated as null in java code. On KitKat+ these Bitmaps can be reconfigured, +      // and are suitable for re-use., +    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {, +      configs.remove(Bitmap.Config.HARDWARE);, +    }, +++ b/library/src/main/java/com/bumptech/glide/load/resource/bitmap/Downsampler.java, +import android.graphics.Bitmap.Config;, +  static final String TAG = "Downsampler";, +  private final HardwareConfigState hardwareConfigState = HardwareConfigState.getInstance();, +    calculateConfig(is, decodeFormat, options, targetWidth, targetHeight);, +  private void calculateConfig(, +      InputStream is,, +      DecodeFormat format,, +      BitmapFactory.Options optionsWithScaling,, +      int targetWidth,, +      int targetHeight), +      throws IOException {, +, +    if (hardwareConfigState.setHardwareConfigIfAllowed(, +        targetWidth, targetHeight, optionsWithScaling, format)) {, +      return;, +    }, +, +      optionsWithScaling.inPreferredConfig = Bitmap.Config.ARGB_8888;, +      return;, +    optionsWithScaling.inPreferredConfig =, +        hasAlpha ? Bitmap.Config.ARGB_8888 : Bitmap.Config.RGB_565;, +    if (optionsWithScaling.inPreferredConfig == Config.RGB_565, +        || optionsWithScaling.inPreferredConfig == Config.ARGB_4444, +        || optionsWithScaling.inPreferredConfig == Config.ALPHA_8) {, +      optionsWithScaling.inDither = true;, +    }, +    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O, +        && options.inPreferredConfig == Config.HARDWARE) {, +      return;, +    }, +++ b/library/src/main/java/com/bumptech/glide/load/DecodeFormat.java, +   * <p>On Android O+, this format will will use ARGB_8888 only when it's not possible to use, +   * {@link android.graphics.Bitmap.Config#HARDWARE}., +   *, +   * this setting is a preference, not a promise., +   * Identical to {@link #PREFER_ARGB_8888} but prevents Glide from using {@link, +   * android.graphics.Bitmap.Config#HARDWARE} on Android O+, +   */, +  PREFER_ARGB_8888_DISALLOW_HARDWARE,, +, +  /**]