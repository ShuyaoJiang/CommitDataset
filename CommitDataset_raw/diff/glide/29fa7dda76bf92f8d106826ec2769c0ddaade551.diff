[+++ b/third_party/gif_decoder/src/androidTest/java/com/bumptech/glide/gifdecoder/GifDecoderTest.java, +    @Test, +    public void testFrameIndexStartsAtNegativeOne() {, +        GifHeader gifheader = new GifHeader();, +        gifheader.frameCount = 4;, +        byte[] data = new byte[0];, +        GifDecoder decoder = new GifDecoder(provider);, +        decoder.setData(gifheader, data);, +        assertEquals(-1, decoder.getCurrentFrameIndex());, +    }, +, +    @Test, +    public void testAdvanceIncrementsFrameIndex() {, +        GifHeader gifheader = new GifHeader();, +        gifheader.frameCount = 4;, +        byte[] data = new byte[0];, +        GifDecoder decoder = new GifDecoder(provider);, +        decoder.setData(gifheader, data);, +        decoder.advance();, +        assertEquals(0, decoder.getCurrentFrameIndex());, +    }, +, +    @Test, +    public void testAdvanceWrapsIndexBackToZero() {, +        GifHeader gifheader = new GifHeader();, +        gifheader.frameCount = 2;, +        byte[] data = new byte[0];, +        GifDecoder decoder = new GifDecoder(provider);, +        decoder.setData(gifheader, data);, +        decoder.advance();, +        decoder.advance();, +        decoder.advance();, +        assertEquals(0, decoder.getCurrentFrameIndex());, +    }, +, +    @Test, +    public void testSettingDataResetsFramePointer() {, +        GifHeader gifheader = new GifHeader();, +        gifheader.frameCount = 4;, +        byte[] data = new byte[0];, +        GifDecoder decoder = new GifDecoder(provider);, +        decoder.setData(gifheader, data);, +        decoder.advance();, +        decoder.advance();, +        assertEquals(1, decoder.getCurrentFrameIndex());, +, +        decoder.setData(gifheader, data);, +        assertEquals(-1, decoder.getCurrentFrameIndex());, +    }, +, +++ b/third_party/gif_decoder/src/androidTest/java/com/bumptech/glide/gifdecoder/GifDecoderTest.java, +    @Test, +    public void testFrameIndexStartsAtNegativeOne() {, +        GifHeader gifheader = new GifHeader();, +        gifheader.frameCount = 4;, +        byte[] data = new byte[0];, +        GifDecoder decoder = new GifDecoder(provider);, +        decoder.setData(gifheader, data);, +        assertEquals(-1, decoder.getCurrentFrameIndex());, +    }, +, +    @Test, +    public void testAdvanceIncrementsFrameIndex() {, +        GifHeader gifheader = new GifHeader();, +        gifheader.frameCount = 4;, +        byte[] data = new byte[0];, +        GifDecoder decoder = new GifDecoder(provider);, +        decoder.setData(gifheader, data);, +        decoder.advance();, +        assertEquals(0, decoder.getCurrentFrameIndex());, +    }, +, +    @Test, +    public void testAdvanceWrapsIndexBackToZero() {, +        GifHeader gifheader = new GifHeader();, +        gifheader.frameCount = 2;, +        byte[] data = new byte[0];, +        GifDecoder decoder = new GifDecoder(provider);, +        decoder.setData(gifheader, data);, +        decoder.advance();, +        decoder.advance();, +        decoder.advance();, +        assertEquals(0, decoder.getCurrentFrameIndex());, +    }, +, +    @Test, +    public void testSettingDataResetsFramePointer() {, +        GifHeader gifheader = new GifHeader();, +        gifheader.frameCount = 4;, +        byte[] data = new byte[0];, +        GifDecoder decoder = new GifDecoder(provider);, +        decoder.setData(gifheader, data);, +        decoder.advance();, +        decoder.advance();, +        assertEquals(1, decoder.getCurrentFrameIndex());, +, +        decoder.setData(gifheader, data);, +        assertEquals(-1, decoder.getCurrentFrameIndex());, +    }, +]