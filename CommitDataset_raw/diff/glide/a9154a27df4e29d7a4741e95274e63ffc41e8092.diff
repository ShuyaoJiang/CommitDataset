[+++ b/integration/build.gradle, +evaluationDependsOnChildren(), +, +subprojects {, +    android.libraryVariants.all { variant ->, +        def jarTask = project.tasks.create(name: "jar${variant.name.capitalize()}", type: Jar) {, +            from variant.javaCompile.destinationDir, +            exclude "**/R.class", +            exclude "**/BuildConfig.class", +        }, +        jarTask.dependsOn variant.javaCompile, +        artifacts.add('archives', jarTask);, +    }, +}, +++ b/integration/build.gradle, +evaluationDependsOnChildren(), +, +subprojects {, +    android.libraryVariants.all { variant ->, +        def jarTask = project.tasks.create(name: "jar${variant.name.capitalize()}", type: Jar) {, +            from variant.javaCompile.destinationDir, +            exclude "**/R.class", +            exclude "**/BuildConfig.class", +        }, +        jarTask.dependsOn variant.javaCompile, +        artifacts.add('archives', jarTask);, +    }, +}, +++ b/settings.gradle, +include ':integration']