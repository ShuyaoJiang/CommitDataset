[+++ b/library/src/main/java/com/bumptech/glide/request/target/DrawableImageViewTarget.java, +    private final ImageView view;, +, +        this.view = view;, +        view.setImageDrawable(resource);, +        view.setImageDrawable(placeholder);, +++ b/library/src/main/java/com/bumptech/glide/request/target/DrawableImageViewTarget.java, +    private final ImageView view;, +, +        this.view = view;, +        view.setImageDrawable(resource);, +        view.setImageDrawable(placeholder);, +++ b/library/src/main/java/com/bumptech/glide/request/target/ViewTarget.java, +                    observer.removeOnPreDrawListener(layoutListener);, +                observer.addOnPreDrawListener(layoutListener);, +        private static class SizeDeterminerLayoutListener implements ViewTreeObserver.OnPreDrawListener {, +            public boolean onPreDraw() {, +                return true;, +++ b/library/src/main/java/com/bumptech/glide/request/target/DrawableImageViewTarget.java, +    private final ImageView view;, +, +        this.view = view;, +        view.setImageDrawable(resource);, +        view.setImageDrawable(placeholder);, +++ b/library/src/main/java/com/bumptech/glide/request/target/ViewTarget.java, +                    observer.removeOnPreDrawListener(layoutListener);, +                observer.addOnPreDrawListener(layoutListener);, +        private static class SizeDeterminerLayoutListener implements ViewTreeObserver.OnPreDrawListener {, +            public boolean onPreDraw() {, +                return true;, +++ b/library/src/test/java/com/bumptech/glide/request/target/ViewTargetTest.java, +package com.bumptech.glide.request.target;, +, +import android.content.Context;, +import android.graphics.drawable.Drawable;, +import android.view.View;, +import android.view.ViewTreeObserver;, +import android.view.WindowManager;, +import android.view.animation.AlphaAnimation;, +import android.view.animation.Animation;, +import com.bumptech.glide.request.Request;, +import junit.framework.TestCase;, +import org.junit.Before;, +import org.junit.Test;, +import org.junit.runner.RunWith;, +import org.robolectric.Robolectric;, +import org.robolectric.RobolectricTestRunner;, +import org.robolectric.annotation.Config;, +import org.robolectric.annotation.Implementation;, +import org.robolectric.annotation.Implements;, +import org.robolectric.shadows.ShadowDisplay;, +import org.robolectric.shadows.ShadowView;, +import org.robolectric.shadows.ShadowViewTreeObserver;, +, +import java.util.List;, +import java.util.concurrent.CopyOnWriteArrayList;, +, +import static android.view.ViewGroup.LayoutParams;, +import static android.view.ViewTreeObserver.OnPreDrawListener;, +import static com.bumptech.glide.request.target.Target.SizeReadyCallback;, +import static junit.framework.Assert.assertEquals;, +import static junit.framework.TestCase.assertNull;, +import static org.mockito.Matchers.anyInt;, +import static org.mockito.Matchers.eq;, +import static org.mockito.Mockito.mock;, +import static org.mockito.Mockito.never;, +import static org.mockito.Mockito.times;, +import static org.mockito.Mockito.verify;, +, +@RunWith(RobolectricTestRunner.class), +@Config(shadows = { ViewTargetTest.SizedShadowView.class, ViewTargetTest.PreDrawShadowViewTreeObserver.class }), +public class ViewTargetTest {, +    private View view;, +    private ViewTarget target;, +, +    @Before, +    public void setUp() {, +        view = new View(Robolectric.application);, +        target = new ViewTarget<View, Object>(view) {, +            @Override, +            public void onResourceReady(Object resource) {, +            }, +, +            @Override, +            public void setPlaceholder(Drawable placeholder) {, +            }, +        };, +    }, +, +    @Test, +    public void testReturnsWrappedView() {, +        assertEquals(view, target.getView());, +    }, +, +    @Test, +    public void testStartsAnimationOnView() {, +        Animation animation = new AlphaAnimation(0f, 1f);, +        target.startAnimation(animation);, +, +        assertEquals(animation, view.getAnimation());]