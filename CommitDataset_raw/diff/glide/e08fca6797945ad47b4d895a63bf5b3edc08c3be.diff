[+++ b/library/src/androidTest/java/com/bumptech/glide/manager/RequestManagerRetrieverTest.java, +import android.os.Build;, +import org.mockito.Mockito;, +import static org.mockito.Mockito.when;, +    private int initialSdkVersion;, +, +        initialSdkVersion = Build.VERSION.SDK_INT;, +        setSdkVersionInt(initialSdkVersion);, +, +    private void setSdkVersionInt(int version) {, +        Robolectric.Reflection.setFinalStaticField(Build.VERSION.class, "SDK_INT", version);, +    }, +, +    @Test, +    public void testDoesNotThrowIfAskedToGetManagerForActivityPreHoneycomb() {, +        setSdkVersionInt(Build.VERSION_CODES.GINGERBREAD_MR1);, +        Activity activity = mock(Activity.class);, +        when(activity.getApplicationContext()).thenReturn(Robolectric.application);, +        when(activity.getFragmentManager()).thenThrow(new NoSuchMethodError());, +, +        assertNotNull(retriever.get(activity));, +    }, +, +    @Test, +    public void testDoesNotThrowIfAskedToGetManagerForActivityPreJellYBeanMr1() {, +        setSdkVersionInt(Build.VERSION_CODES.JELLY_BEAN);, +        Activity activity = Robolectric.buildActivity(Activity.class).create().start().resume().get();, +        Activity spyActivity = Mockito.spy(activity);, +        when(spyActivity.isDestroyed()).thenThrow(new NoSuchMethodError());, +, +        assertNotNull(retriever.get(spyActivity));, +    }, +, +    @Test, +    public void testDoesNotThrowIfAskedToGetManagerForFragmentPreHoneyCombMr2() {, +        setSdkVersionInt(Build.VERSION_CODES.HONEYCOMB_MR1);, +        Activity activity = Robolectric.buildActivity(Activity.class).create().start().resume().get();, +        android.app.Fragment fragment = new android.app.Fragment();, +, +        activity.getFragmentManager(), +                .beginTransaction().add(fragment, "test"), +                .commit();, +        android.app.Fragment spyFragment = Mockito.spy(fragment);, +        when(spyFragment.isDetached()).thenThrow(new NoSuchMethodError());, +, +        assertNotNull(retriever.get(spyFragment));, +    }, +, +    @Test, +    public void testDoesNotThrowIfAskedToGetManagerForFragmentPreJellyBeanMr1() {, +        setSdkVersionInt(Build.VERSION_CODES.JELLY_BEAN);, +        Activity activity = Robolectric.buildActivity(Activity.class).create().start().resume().get();, +        android.app.Fragment fragment = new android.app.Fragment();, +, +        activity.getFragmentManager(), +                .beginTransaction().add(fragment, "test"), +                .commit();, +        android.app.Fragment spyFragment = Mockito.spy(fragment);, +        when(spyFragment.getChildFragmentManager()).thenThrow(new NoSuchMethodError());, +, +        assertNotNull(retriever.get(spyFragment));, +    }, +, +++ b/library/src/androidTest/java/com/bumptech/glide/manager/RequestManagerRetrieverTest.java, +import android.os.Build;, +import org.mockito.Mockito;, +import static org.mockito.Mockito.when;, +    private int initialSdkVersion;, +, +        initialSdkVersion = Build.VERSION.SDK_INT;, +        setSdkVersionInt(initialSdkVersion);, +, +    private void setSdkVersionInt(int version) {, +        Robolectric.Reflection.setFinalStaticField(Build.VERSION.class, "SDK_INT", version);, +    }, +, +    @Test, +    public void testDoesNotThrowIfAskedToGetManagerForActivityPreHoneycomb() {, +        setSdkVersionInt(Build.VERSION_CODES.GINGERBREAD_MR1);, +        Activity activity = mock(Activity.class);, +        when(activity.getApplicationContext()).thenReturn(Robolectric.application);, +        when(activity.getFragmentManager()).thenThrow(new NoSuchMethodError());, +, +        assertNotNull(retriever.get(activity));, +    }, +, +    @Test, +    public void testDoesNotThrowIfAskedToGetManagerForActivityPreJellYBeanMr1() {, +        setSdkVersionInt(Build.VERSION_CODES.JELLY_BEAN);, +        Activity activity = Robolectric.buildActivity(Activity.class).create().start().resume().get();, +        Activity spyActivity = Mockito.spy(activity);, +        when(spyActivity.isDestroyed()).thenThrow(new NoSuchMethodError());, +, +        assertNotNull(retriever.get(spyActivity));, +    }, +, +    @Test, +    public void testDoesNotThrowIfAskedToGetManagerForFragmentPreHoneyCombMr2() {, +        setSdkVersionInt(Build.VERSION_CODES.HONEYCOMB_MR1);, +        Activity activity = Robolectric.buildActivity(Activity.class).create().start().resume().get();]