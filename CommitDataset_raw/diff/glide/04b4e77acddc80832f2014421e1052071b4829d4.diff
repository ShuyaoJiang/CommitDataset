[+++ b/library/src/androidTest/java/com/bumptech/glide/load/resource/bitmap/ImageHeaderParserTest.java, +import com.bumptech.glide.testutil.TestResourceUtil;, +, +    }, +    // Test for #286., +    @Test, +    public void testHandlesParsingOrientationWithMinimalExifSegment() throws IOException {, +        InputStream is = TestResourceUtil.openResource(getClass(), "short_exif_sample.jpg");, +        ImageHeaderParser parser = new ImageHeaderParser(is);, +        assertEquals(-1, parser.getOrientation());, +++ b/library/src/androidTest/java/com/bumptech/glide/load/resource/bitmap/ImageHeaderParserTest.java, +import com.bumptech.glide.testutil.TestResourceUtil;, +, +    }, +    // Test for #286., +    @Test, +    public void testHandlesParsingOrientationWithMinimalExifSegment() throws IOException {, +        InputStream is = TestResourceUtil.openResource(getClass(), "short_exif_sample.jpg");, +        ImageHeaderParser parser = new ImageHeaderParser(is);, +        assertEquals(-1, parser.getOrientation());, +++ b/library/src/androidTest/resources/short_exif_sample.jpg, +++ b/library/src/androidTest/java/com/bumptech/glide/load/resource/bitmap/ImageHeaderParserTest.java, +import com.bumptech.glide.testutil.TestResourceUtil;, +, +    }, +    // Test for #286., +    @Test, +    public void testHandlesParsingOrientationWithMinimalExifSegment() throws IOException {, +        InputStream is = TestResourceUtil.openResource(getClass(), "short_exif_sample.jpg");, +        ImageHeaderParser parser = new ImageHeaderParser(is);, +        assertEquals(-1, parser.getOrientation());, +++ b/library/src/androidTest/resources/short_exif_sample.jpg, +++ b/library/src/main/java/com/bumptech/glide/load/resource/bitmap/ImageHeaderParser.java, +                    && exifData.length > JPEG_EXIF_SEGMENT_PREAMBLE_BYTES.length;]