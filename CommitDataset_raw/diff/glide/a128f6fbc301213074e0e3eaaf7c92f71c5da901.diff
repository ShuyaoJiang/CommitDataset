[+++ b/library/src/androidTest/java/com/bumptech/glide/load/resource/gif/GifDrawableTest.java, +    public void testDoesNotRequestNextFrameOnStartIfHasSingleFrame() {, +        when(gifDecoder.getFrameCount()).thenReturn(1);, +        drawable.setVisible(true, false);, +        drawable.start();, +, +        verify(frameManager, never()).getNextFrame(any(GifFrameManager.FrameCallback.class));, +    }, +, +    @Test, +    public void testInvalidatesSelfOnStartIfHasSingleFrame() {, +        when(gifDecoder.getFrameCount()).thenReturn(1);, +        drawable.setVisible(true, false);, +        drawable.start();, +, +        verify(cb).invalidateDrawable(eq(drawable));, +    }, +, +    @Test, +        final int loopCount = 1;, +        final int frameCount = 2;, +        when(gifDecoder.getFrameCount()).thenReturn(frameCount);, +        drawable.setLoopCount(loopCount);, +        runLoops(loopCount, frameCount);, +, +        verify(frameManager, times(loopCount * frameCount)).getNextFrame(eq(drawable));, +        final int loopCount = 40;, +        final int frameCount = 2;, +, +        when(gifDecoder.getFrameCount()).thenReturn(frameCount);, +        runLoops(loopCount, frameCount);, +        verify(frameManager, times((loopCount * frameCount) + 1)).getNextFrame(eq(drawable));, +        final int loopCount = 1;, +        final int frameCount = 3;, +, +        when(gifDecoder.getFrameCount()).thenReturn(frameCount);, +        drawable.setLoopCount(loopCount);, +        runLoops(loopCount, frameCount);, +, +        verify(frameManager, times(frameCount * loopCount)).getNextFrame(eq(drawable));, +        final int loopCount = 3;, +        final int frameCount = 2;, +, +        when(gifDecoder.getFrameCount()).thenReturn(frameCount);, +        drawable.setLoopCount(loopCount);, +        runLoops(loopCount, frameCount);, +, +        verify(frameManager, times(loopCount * frameCount)).getNextFrame(eq(drawable));, +        final int initialLoopCount = 1;, +        final int frameCount = 2;, +, +        when(gifDecoder.getFrameCount()).thenReturn(frameCount);, +        drawable.setLoopCount(initialLoopCount);, +        runLoops(initialLoopCount, frameCount);, +        final int newLoopCount = 2;, +, +        drawable.setLoopCount(newLoopCount);, +        runLoops(newLoopCount, frameCount);, +        int expectedFrames = (initialLoopCount + newLoopCount) * frameCount;, +        verify(frameManager, times(expectedFrames)).getNextFrame(eq(drawable));, +        final int frameCount = 3;, +        final int loopCount = 2;, +        when(gifDecoder.getLoopCount()).thenReturn(loopCount);, +        when(gifDecoder.getFrameCount()).thenReturn(frameCount);, +        runLoops(loopCount, frameCount);, +        verify(frameManager, times(frameCount * loopCount)).getNextFrame(eq(drawable));, +    private void runLoops(int loopCount, int frameCount) {, +        for (int loop = 0; loop < loopCount; loop++) {, +            for (int frame = 0; frame < frameCount; frame++) {, +                drawable.onFrameRead(getBitmap(), frame);, +            }, +        }, +    }, +++ b/library/src/androidTest/java/com/bumptech/glide/load/resource/gif/GifDrawableTest.java, +    public void testDoesNotRequestNextFrameOnStartIfHasSingleFrame() {, +        when(gifDecoder.getFrameCount()).thenReturn(1);, +        drawable.setVisible(true, false);, +        drawable.start();, +, +        verify(frameManager, never()).getNextFrame(any(GifFrameManager.FrameCallback.class));, +    }, +, +    @Test, +    public void testInvalidatesSelfOnStartIfHasSingleFrame() {, +        when(gifDecoder.getFrameCount()).thenReturn(1);, +        drawable.setVisible(true, false);, +        drawable.start();, +, +        verify(cb).invalidateDrawable(eq(drawable));, +    }, +, +    @Test, +        final int loopCount = 1;, +        final int frameCount = 2;, +        when(gifDecoder.getFrameCount()).thenReturn(frameCount);, +        drawable.setLoopCount(loopCount);, +        runLoops(loopCount, frameCount);, +, +        verify(frameManager, times(loopCount * frameCount)).getNextFrame(eq(drawable));, +        final int loopCount = 40;]