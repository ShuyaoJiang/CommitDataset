[+++ b/annotation/compiler/build.gradle, +// Replace the contents of the standard jar task with those from our our compiled, repackaged and, +// proguarded jar. Replacing the task itself is possible and looks simpler, but requires, +// reconstructing the task dependency chain and is more complex in practice., +    exclude { entry ->, +        sourceSets.main.output.files*.absolutePath.any {, +            entry.file.absolutePath.startsWith it, +        }, +    }, +++ b/annotation/compiler/build.gradle, +// Replace the contents of the standard jar task with those from our our compiled, repackaged and, +// proguarded jar. Replacing the task itself is possible and looks simpler, but requires, +// reconstructing the task dependency chain and is more complex in practice., +    exclude { entry ->, +        sourceSets.main.output.files*.absolutePath.any {, +            entry.file.absolutePath.startsWith it, +        }, +    }, +++ b/build.gradle, +, +    // Avoid issues like #2452., +    tasks.withType(Jar) {, +        duplicatesStrategy = DuplicatesStrategy.FAIL, +    }]