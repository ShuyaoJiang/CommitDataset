[+++ b/library/build.gradle, +apply plugin: 'findbugs', +findbugs {, +    toolVersion = "2.0.3", +}, +, +afterEvaluate {, +    findbugsTestDebug {, +        enabled = false, +    }, +, +    task findbugs(type: FindBugs, dependsOn: assembleDebug) {, +, +        description 'Run findbugs', +        group 'verification', +, +        classes = fileTree('build/intermediates/classes/debug/'), +        source = fileTree('src/main/java'), +        classpath = files(project.configurations.compile.asPath), +, +        effort = 'max', +, +        excludeFilter = file("findbugs-exclude.xml"), +, +        reports {, +            xml.enabled = false, +            html.enabled = true, +        }, +    }, +    check.doLast {, +        tasks.getByName("findbugs").execute(), +    }, +}, +++ b/library/build.gradle, +apply plugin: 'findbugs', +findbugs {, +    toolVersion = "2.0.3", +}, +, +afterEvaluate {, +    findbugsTestDebug {, +        enabled = false, +    }, +, +    task findbugs(type: FindBugs, dependsOn: assembleDebug) {, +, +        description 'Run findbugs', +        group 'verification', +, +        classes = fileTree('build/intermediates/classes/debug/'), +        source = fileTree('src/main/java'), +        classpath = files(project.configurations.compile.asPath), +, +        effort = 'max', +, +        excludeFilter = file("findbugs-exclude.xml"), +, +        reports {, +            xml.enabled = false, +            html.enabled = true, +        }, +    }, +    check.doLast {, +        tasks.getByName("findbugs").execute(), +    }, +}, +++ b/library/findbugs-exclude.xml, +<FindBugsFilter>, +, +    <Match>, +        <Class name="~.*R\$.*"/>, +    </Match>, +    <Match>, +        <Class name="~.*Manifest\$.*"/>, +    </Match>, +, +    <!-- BytesResource is the wrapper that is given control of the data. -->, +    <Match>, +      <Class name="com.bumptech.glide.load.resource.bytes.BytesResource" />, +      <Method name="get" />, +      <Bug pattern="EI_EXPOSE_REP" />, +    </Match>, +, +    <!-- We would rather expose the internal bytes than box or copy them. -->, +    <Match>, +      <Class name="com.bumptech.glide.load.resource.bytes.BytesResource" />, +      <Bug pattern="EI_EXPOSE_REP2" />, +    </Match>, +, +    <!-- Byte array fetcher just wraps a byte array to return an InputStream, data is not mutated. -->, +    <Match>, +      <Class name="com.bumptech.glide.load.data.ByteArrayFetcher" />, +      <Bug pattern="EI_EXPOSE_REP2" />, +    </Match>, +, +    <!-- RecyclableBufferedInputStream safely re-uses pooled byte arrays -->, +    <Match>, +      <Class name="com.bumptech.glide.load.resource.bitmap.RecyclableBufferedInputStream" />, +      <Bug pattern="EI_EXPOSE_REP2" />, +    </Match>]