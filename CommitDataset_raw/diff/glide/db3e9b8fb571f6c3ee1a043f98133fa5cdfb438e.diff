[+++ b/library/src/com/bumptech/glide/resize/cache/LruMemoryCache.java, +        trimToSize(0);, +++ b/library/src/com/bumptech/glide/resize/cache/LruMemoryCache.java, +        trimToSize(0);, +++ b/library/tests/src/com/bumptech/glide/LruCacheTest.java, +    public void testClearMemoryCallsListener() {, +        List<String> keys = fillCache();, +        final AtomicInteger totalRemoved = new AtomicInteger();, +        cache.setImageRemovedListener(new MemoryCache.ImageRemovedListener() {, +            @Override, +            public void onImageRemoved(Bitmap removed) {, +                totalRemoved.getAndIncrement();, +            }, +        });, +        cache.clearMemory();, +        assertEquals(keys.size(), totalRemoved.get());, +    }, +, +    public void testTrimMemoryCallsListener() {, +        List<String> keys = fillCache();, +        final AtomicInteger totalRemoved = new AtomicInteger();, +        cache.setImageRemovedListener(new MemoryCache.ImageRemovedListener() {, +            @Override, +            public void onImageRemoved(Bitmap removed) {, +                totalRemoved.getAndIncrement();, +            }, +        });, +        cache.trimMemory(ComponentCallbacks2.TRIM_MEMORY_COMPLETE);, +        assertEquals(keys.size(), totalRemoved.get());, +    }, +]