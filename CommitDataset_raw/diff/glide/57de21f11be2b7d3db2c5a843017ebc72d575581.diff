[+++ b/library/src/androidTest/java/com/bumptech/glide/load/engine/prefill/BitmapPreFillerTest.java, +    private static final int BITMAPS_IN_POOL = 10;, +    private static final int BITMAPS_IN_CACHE = 10;, +, +    private final Bitmap.Config defaultBitmapConfig = PreFillType.DEFAULT_CONFIG;, +    private final Bitmap defaultBitmap =, +            Bitmap.createBitmap(DEFAULT_BITMAP_WIDTH, DEFAULT_BITMAP_HEIGHT, defaultBitmapConfig);, +    private final int defaultBitmapSize = Util.getBitmapByteSize(defaultBitmap);, +    private final int poolSize = BITMAPS_IN_CACHE * defaultBitmapSize;, +    private final int cacheSize = BITMAPS_IN_POOL * defaultBitmapSize;, +        when(pool.getMaxSize()).thenReturn(poolSize);, +        when(cache.getMaxSize()).thenReturn(cacheSize);, +                                .setConfig(defaultBitmapConfig), +        assertEquals(BITMAPS_IN_POOL + BITMAPS_IN_CACHE, allocationOrder.getSize());, +                        .setConfig(defaultBitmapConfig), +                        .setConfig(defaultBitmapConfig), +                        .setConfig(defaultBitmapConfig), +        int maxSize = poolSize + cacheSize;, +                                .setConfig(defaultBitmapConfig), +                                .setConfig(defaultBitmapConfig), +                                .setConfig(defaultBitmapConfig), +        assertThat(byteSize).isIn(Range.atMost(poolSize + cacheSize));, +                                .setConfig(defaultBitmapConfig), +                                .setConfig(defaultBitmapConfig), +                                .setConfig(defaultBitmapConfig), +        assertThat(byteSize).isIn(Range.atMost(poolSize + cacheSize));, +                            .setConfig(defaultBitmapConfig), +            assertEquals(defaultBitmapConfig, size.getConfig());, +                .setConfig(defaultBitmapConfig), +                        .setConfig(defaultBitmapConfig), +                        .setConfig(defaultBitmapConfig), +                        .setConfig(defaultBitmapConfig), +                        .setConfig(defaultBitmapConfig), +                .setConfig(defaultBitmapConfig), +        when(pool.getMaxSize()).thenReturn(defaultBitmapSize);, +        when(cache.getMaxSize()).thenReturn(defaultBitmapSize);, +                        .setConfig(defaultBitmapConfig), +                        .setConfig(defaultBitmapConfig)]