[+++ b/library/src/main/java/com/bumptech/glide/load/DecodeFormat.java, +   *, +   * @deprecated If you must disable hardware bitmaps, set, +   * {@link com.bumptech.glide.load.resource.bitmap.Downsampler#ALLOW_HARDWARE_CONFIG} to false, +   * instead., +  @Deprecated, +  public static final DecodeFormat DEFAULT = PREFER_ARGB_8888;, +++ b/library/src/main/java/com/bumptech/glide/load/DecodeFormat.java, +   *, +   * @deprecated If you must disable hardware bitmaps, set, +   * {@link com.bumptech.glide.load.resource.bitmap.Downsampler#ALLOW_HARDWARE_CONFIG} to false, +   * instead., +  @Deprecated, +  public static final DecodeFormat DEFAULT = PREFER_ARGB_8888;, +++ b/library/src/main/java/com/bumptech/glide/load/engine/DecodeHelper.java, +import android.graphics.Bitmap;, +  boolean isBitmapTransformationSet() {, +    return transformations.get(Bitmap.class) != null;, +  }, +, +++ b/library/src/main/java/com/bumptech/glide/load/DecodeFormat.java, +   *, +   * @deprecated If you must disable hardware bitmaps, set, +   * {@link com.bumptech.glide.load.resource.bitmap.Downsampler#ALLOW_HARDWARE_CONFIG} to false, +   * instead., +  @Deprecated, +  public static final DecodeFormat DEFAULT = PREFER_ARGB_8888;, +++ b/library/src/main/java/com/bumptech/glide/load/engine/DecodeHelper.java, +import android.graphics.Bitmap;, +  boolean isBitmapTransformationSet() {, +    return transformations.get(Bitmap.class) != null;, +  }, +, +++ b/library/src/main/java/com/bumptech/glide/load/engine/DecodeJob.java, +import android.os.Build;, +import com.bumptech.glide.load.resource.bitmap.Downsampler;, +  private Options getOptionsWithHardwareConfig(DataSource dataSource) {, +    Options options = this.options;, +    if (Build.VERSION.SDK_INT < Build.VERSION_CODES.O) {, +      return options;, +    }, +, +    if (options.get(Downsampler.ALLOW_HARDWARE_CONFIG) != null) {, +      return options;, +    }, +, +    if (dataSource == DataSource.RESOURCE_DISK_CACHE, +        || !decodeHelper.isBitmapTransformationSet()) {, +      options = new Options();, +      options.putAll(this.options);, +      options.set(Downsampler.ALLOW_HARDWARE_CONFIG, true);, +    }, +    return options;, +  }, +, +    Options options = getOptionsWithHardwareConfig(dataSource);, +      return path.load(rewinder, options, width, height, new DecodeCallback<>(dataSource));, +++ b/library/src/main/java/com/bumptech/glide/load/DecodeFormat.java, +   *, +   * @deprecated If you must disable hardware bitmaps, set, +   * {@link com.bumptech.glide.load.resource.bitmap.Downsampler#ALLOW_HARDWARE_CONFIG} to false, +   * instead., +  @Deprecated, +  public static final DecodeFormat DEFAULT = PREFER_ARGB_8888;, +++ b/library/src/main/java/com/bumptech/glide/load/engine/DecodeHelper.java, +import android.graphics.Bitmap;, +  boolean isBitmapTransformationSet() {, +    return transformations.get(Bitmap.class) != null;, +  }, +, +++ b/library/src/main/java/com/bumptech/glide/load/engine/DecodeJob.java, +import android.os.Build;, +import com.bumptech.glide.load.resource.bitmap.Downsampler;, +  private Options getOptionsWithHardwareConfig(DataSource dataSource) {, +    Options options = this.options;, +    if (Build.VERSION.SDK_INT < Build.VERSION_CODES.O) {, +      return options;, +    }, +, +    if (options.get(Downsampler.ALLOW_HARDWARE_CONFIG) != null) {, +      return options;, +    }, +, +    if (dataSource == DataSource.RESOURCE_DISK_CACHE, +        || !decodeHelper.isBitmapTransformationSet()) {, +      options = new Options();, +      options.putAll(this.options);, +      options.set(Downsampler.ALLOW_HARDWARE_CONFIG, true);, +    }, +    return options;, +  }, +, +    Options options = getOptionsWithHardwareConfig(dataSource);, +      return path.load(rewinder, options, width, height, new DecodeCallback<>(dataSource));, +++ b/library/src/main/java/com/bumptech/glide/load/engine/bitmap_recycle/LruBitmapPool.java, +    // Avoid short circuiting on sdk int since it breaks on some versions of Android., +    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {, +      if (config == Bitmap.Config.HARDWARE) {, +        throw new IllegalArgumentException("Cannot create a mutable Bitmap with config: " + config, +            + ". Consider setting Downsampler#ALLOW_HARDWARE_CONFIG to false in your RequestOptions"]