[+++ b/instrumentation/src/androidTest/java/com/bumptech/glide/LoadResourcesWithDownsamplerTest.java, +import com.bumptech.glide.load.resource.bitmap.Downsampler;, +                .set(Downsampler.ALLOW_HARDWARE_CONFIG, true), +++ b/instrumentation/src/androidTest/java/com/bumptech/glide/LoadResourcesWithDownsamplerTest.java, +import com.bumptech.glide.load.resource.bitmap.Downsampler;, +                .set(Downsampler.ALLOW_HARDWARE_CONFIG, true), +++ b/library/src/main/java/com/bumptech/glide/load/engine/DecodeJob.java, +    boolean isHardwareConfigSafe =, +        dataSource == DataSource.RESOURCE_DISK_CACHE || decodeHelper.isScaleOnlyOrNoTransform();, +    Boolean isHardwareConfigAllowed = options.get(Downsampler.ALLOW_HARDWARE_CONFIG);, +, +    // If allow hardware config is defined, we can use it if it's set to false or if it's safe to, +    // use the hardware config for the request., +    if (isHardwareConfigAllowed != null && (!isHardwareConfigAllowed || isHardwareConfigSafe)) {, +    // If allow hardware config is undefined or is set to true but it's unsafe for us to use the, +    // hardware config for this request, we need to override the config., +    options.set(Downsampler.ALLOW_HARDWARE_CONFIG, isHardwareConfigSafe);, +, +++ b/instrumentation/src/androidTest/java/com/bumptech/glide/LoadResourcesWithDownsamplerTest.java, +import com.bumptech.glide.load.resource.bitmap.Downsampler;, +                .set(Downsampler.ALLOW_HARDWARE_CONFIG, true), +++ b/library/src/main/java/com/bumptech/glide/load/engine/DecodeJob.java, +    boolean isHardwareConfigSafe =, +        dataSource == DataSource.RESOURCE_DISK_CACHE || decodeHelper.isScaleOnlyOrNoTransform();, +    Boolean isHardwareConfigAllowed = options.get(Downsampler.ALLOW_HARDWARE_CONFIG);, +, +    // If allow hardware config is defined, we can use it if it's set to false or if it's safe to, +    // use the hardware config for the request., +    if (isHardwareConfigAllowed != null && (!isHardwareConfigAllowed || isHardwareConfigSafe)) {, +    // If allow hardware config is undefined or is set to true but it's unsafe for us to use the, +    // hardware config for this request, we need to override the config., +    options.set(Downsampler.ALLOW_HARDWARE_CONFIG, isHardwareConfigSafe);, +, +++ b/library/src/main/java/com/bumptech/glide/load/resource/bitmap/Downsampler.java, +      Option.memory(, +          "com.bumtpech.glide.load.resource.bitmap.Downsampler.AllowHardwareDecode", false);]