[+++ b/src/com/bumptech/photos/resize/Utils.java, +    public static int[] getDimensions(String path) {, +        int[] dimens = new int[]{-1, -1};, +        try {, +            InputStream is = new BufferedInputStream(new FileInputStream(path));, +            dimens = getDimension(is);, +            is.close();, +        } catch (FileNotFoundException e) {, +            e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates., +        } catch (IOException e) {, +            e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates., +        }, +        return dimens;, +    }, +, +    public static int[] getDimension(InputStream is) {, +        int originalWidth = -1;, +        int originalHeight = -1;, +        final BitmapFactory.Options decodeBoundsOptions = new BitmapFactory.Options();, +        decodeBoundsOptions.inJustDecodeBounds = true;, +        BitmapFactory.decodeStream(is, null, decodeBoundsOptions); //doesn't load, just sets the decodeBounds, +, +        originalWidth = decodeBoundsOptions.outWidth;, +        originalHeight = decodeBoundsOptions.outHeight;, +        return new int[] { originalWidth, originalHeight };, +    }, +            final int[] dimens = getDimensions(path);, +            final int originalWidth = dimens[0];, +            final int originalHeight = dimens[1];, +, +            // inSampleSize prefers multiples of 2, but we prefer to prioritize memory savings, +            int sampleSize = Math.min(originalHeight / height, originalWidth / width);, +]