[+++ b/mockwebserver/src/main/java/com/squareup/okhttp/mockwebserver/QueueDispatcher.java, +      System.out.println("served " + requestLine);, +++ b/mockwebserver/src/main/java/com/squareup/okhttp/mockwebserver/QueueDispatcher.java, +      System.out.println("served " + requestLine);, +++ b/okcurl/src/main/java/com/squareup/okhttp/curl/Main.java, +    String mimeType = "application/x-form-urlencoded";, +++ b/mockwebserver/src/main/java/com/squareup/okhttp/mockwebserver/QueueDispatcher.java, +      System.out.println("served " + requestLine);, +++ b/okcurl/src/main/java/com/squareup/okhttp/curl/Main.java, +    String mimeType = "application/x-form-urlencoded";, +++ b/okcurl/src/test/java/com/squareup/okhttp/curl/MainTest.java, +    assertEquals("application/x-form-urlencoded; charset=utf-8", body.contentType().toString());, +    assertEquals("application/x-form-urlencoded; charset=utf-8", body.contentType().toString());, +++ b/mockwebserver/src/main/java/com/squareup/okhttp/mockwebserver/QueueDispatcher.java, +      System.out.println("served " + requestLine);, +++ b/okcurl/src/main/java/com/squareup/okhttp/curl/Main.java, +    String mimeType = "application/x-form-urlencoded";, +++ b/okcurl/src/test/java/com/squareup/okhttp/curl/MainTest.java, +    assertEquals("application/x-form-urlencoded; charset=utf-8", body.contentType().toString());, +    assertEquals("application/x-form-urlencoded; charset=utf-8", body.contentType().toString());, +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/HttpUrlTest.java, +  @Test public void toUriForbiddenCharacter() throws Exception {, +    HttpUrl httpUrl = HttpUrl.parse("http://host/a[b");, +    try {, +      httpUrl.uri();, +      fail();, +    } catch (IllegalStateException expected) {, +      assertEquals("not valid as a java.net.URI: http://host/a[b", expected.getMessage());, +    }, +++ b/mockwebserver/src/main/java/com/squareup/okhttp/mockwebserver/QueueDispatcher.java, +      System.out.println("served " + requestLine);, +++ b/okcurl/src/main/java/com/squareup/okhttp/curl/Main.java, +    String mimeType = "application/x-form-urlencoded";, +++ b/okcurl/src/test/java/com/squareup/okhttp/curl/MainTest.java, +    assertEquals("application/x-form-urlencoded; charset=utf-8", body.contentType().toString());, +    assertEquals("application/x-form-urlencoded; charset=utf-8", body.contentType().toString());, +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/HttpUrlTest.java, +  @Test public void toUriForbiddenCharacter() throws Exception {, +    HttpUrl httpUrl = HttpUrl.parse("http://host/a[b");, +    try {, +      httpUrl.uri();, +      fail();, +    } catch (IllegalStateException expected) {, +      assertEquals("not valid as a java.net.URI: http://host/a[b", expected.getMessage());, +    }, +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/InterceptorTest.java, +  @Test public void applicationInterceptorThrowsRuntimeExceptionAsynchronous() throws Exception {, +    interceptorThrowsRuntimeExceptionAsynchronous(client.interceptors());, +  }, +, +  @Test public void networkInterceptorThrowsRuntimeExceptionAsynchronous() throws Exception {, +    interceptorThrowsRuntimeExceptionAsynchronous(client.networkInterceptors());, +  }, +, +  @Test public void applicationInterceptorReturnsNull() throws Exception {, +    server.enqueue(new MockResponse());, +, +    Interceptor interceptor = new Interceptor() {, +      @Override public Response intercept(Chain chain) throws IOException {, +        chain.proceed(chain.request());, +        return null;, +      }, +    };, +    client.interceptors().add(interceptor);, +, +    ExceptionCatchingExecutor executor = new ExceptionCatchingExecutor();, +    client.setDispatcher(new Dispatcher(executor));, +, +    Request request = new Request.Builder(), +        .url(server.url("/")), +        .build();, +    try {, +      client.newCall(request).execute();, +      fail();, +    } catch (NullPointerException expected) {, +      assertEquals("application interceptor " + interceptor, +          + " returned null", expected.getMessage());, +    }, +  }, +, +  @Test public void networkInterceptorReturnsNull() throws Exception {, +    server.enqueue(new MockResponse());, +, +    Interceptor interceptor = new Interceptor() {, +      @Override public Response intercept(Chain chain) throws IOException {, +        chain.proceed(chain.request());, +        return null;, +      }, +    };, +    client.networkInterceptors().add(interceptor);, +, +    ExceptionCatchingExecutor executor = new ExceptionCatchingExecutor();, +    client.setDispatcher(new Dispatcher(executor));, +, +    Request request = new Request.Builder(), +        .url(server.url("/")), +        .build();, +    try {, +      client.newCall(request).execute();, +      fail();]