[+++ b/mockwebserver/src/main/java/com/squareup/okhttp/mockwebserver/MockWebServer.java, +import java.util.Set;, +  private final Set<Socket> openClientSockets =, +      Collections.newSetFromMap(new ConcurrentHashMap<Socket, Boolean>());, +  private final Set<SpdyConnection> openSpdyConnections =, +      Collections.newSetFromMap(new ConcurrentHashMap<SpdyConnection, Boolean>());, +        for (Iterator<Socket> s = openClientSockets.iterator(); s.hasNext(); ) {, +        for (Iterator<SpdyConnection> s = openSpdyConnections.iterator(); s.hasNext(); ) {, +            openClientSockets.add(socket);, +          openClientSockets.add(socket);, +          openSpdyConnections.add(spdyConnection);]