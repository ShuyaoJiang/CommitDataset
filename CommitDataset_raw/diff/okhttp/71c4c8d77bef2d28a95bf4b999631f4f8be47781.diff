[+++ b/okhttp-tests/src/test/java/com/squareup/okhttp/internal/http/URLConnectionTest.java, +    for (int j = 0; j < 2; j++) {, +      try {, +        break;, +      } catch (IOException socketException) {, +        // If there's a socket exception, this must have a streamed request body., +        assertEquals(0, j);, +        assertTrue(transferKind == TransferKind.CHUNKED, +            || transferKind == TransferKind.FIXED_LENGTH);, +      }, +    }, +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/internal/http/URLConnectionTest.java, +    for (int j = 0; j < 2; j++) {, +      try {, +        break;, +      } catch (IOException socketException) {, +        // If there's a socket exception, this must have a streamed request body., +        assertEquals(0, j);, +        assertTrue(transferKind == TransferKind.CHUNKED, +            || transferKind == TransferKind.FIXED_LENGTH);, +      }, +    }, +++ b/okhttp/src/main/java/com/squareup/okhttp/Cache.java, +import okio.Buffer;, +        writeCertList(sink, handshake.peerCertificates());, +        writeCertList(sink, handshake.localCertificates());, +          Buffer bytes = new Buffer();, +          bytes.write(ByteString.decodeBase64(line));, +          result.add(certificateFactory.generateCertificate(bytes.inputStream()));, +    private void writeCertList(BufferedSink sink, List<Certificate> certificates)]