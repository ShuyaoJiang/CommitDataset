[+++ b/mockwebserver/src/main/java/okhttp3/internal/framed/FramedServer.java, +import okhttp3.internal.platform.Platform;, +import static okhttp3.internal.platform.Platform.INFO;, +++ b/mockwebserver/src/main/java/okhttp3/internal/framed/FramedServer.java, +import okhttp3.internal.platform.Platform;, +import static okhttp3.internal.platform.Platform.INFO;, +++ b/mockwebserver/src/main/java/okhttp3/mockwebserver/MockWebServer.java, +import okhttp3.internal.platform.Platform;, +++ b/mockwebserver/src/main/java/okhttp3/internal/framed/FramedServer.java, +import okhttp3.internal.platform.Platform;, +import static okhttp3.internal.platform.Platform.INFO;, +++ b/mockwebserver/src/main/java/okhttp3/mockwebserver/MockWebServer.java, +import okhttp3.internal.platform.Platform;, +++ b/okhttp-android-support/src/main/java/okhttp3/AndroidShimResponseCache.java, +    okhttp3.internal.cache.CacheRequest okCacheRequest =, +++ b/mockwebserver/src/main/java/okhttp3/internal/framed/FramedServer.java, +import okhttp3.internal.platform.Platform;, +import static okhttp3.internal.platform.Platform.INFO;, +++ b/mockwebserver/src/main/java/okhttp3/mockwebserver/MockWebServer.java, +import okhttp3.internal.platform.Platform;, +++ b/okhttp-android-support/src/main/java/okhttp3/AndroidShimResponseCache.java, +    okhttp3.internal.cache.CacheRequest okCacheRequest =, +++ b/okhttp-android-support/src/main/java/okhttp3/internal/huc/CacheAdapter.java, +import okhttp3.internal.cache.CacheRequest;, +import okhttp3.internal.cache.CacheStrategy;, +import okhttp3.internal.cache.InternalCache;, +++ b/mockwebserver/src/main/java/okhttp3/internal/framed/FramedServer.java, +import okhttp3.internal.platform.Platform;, +import static okhttp3.internal.platform.Platform.INFO;, +++ b/mockwebserver/src/main/java/okhttp3/mockwebserver/MockWebServer.java, +import okhttp3.internal.platform.Platform;, +++ b/okhttp-android-support/src/main/java/okhttp3/AndroidShimResponseCache.java, +    okhttp3.internal.cache.CacheRequest okCacheRequest =, +++ b/okhttp-android-support/src/main/java/okhttp3/internal/huc/CacheAdapter.java, +import okhttp3.internal.cache.CacheRequest;, +import okhttp3.internal.cache.CacheStrategy;, +import okhttp3.internal.cache.InternalCache;, +++ b/okhttp-android-support/src/main/java/okhttp3/internal/huc/JavaApiConverter.java, +import okhttp3.internal.cache.CacheRequest;, +import okhttp3.internal.http.HttpHeaders;, +import okhttp3.internal.platform.Platform;, +    if (HttpHeaders.hasVaryAll(responseHeaders)) {, +    Set<String> varyFields = HttpHeaders.varyFields(responseHeaders);, +    if (HttpHeaders.hasVaryAll(responseHeaders)) {, +      varyHeaders = HttpHeaders.varyHeaders(request.headers(), responseHeaders);, +        return HttpHeaders.contentLength(okHeaders);, +++ b/mockwebserver/src/main/java/okhttp3/internal/framed/FramedServer.java, +import okhttp3.internal.platform.Platform;, +import static okhttp3.internal.platform.Platform.INFO;, +++ b/mockwebserver/src/main/java/okhttp3/mockwebserver/MockWebServer.java, +import okhttp3.internal.platform.Platform;, +++ b/okhttp-android-support/src/main/java/okhttp3/AndroidShimResponseCache.java, +    okhttp3.internal.cache.CacheRequest okCacheRequest =, +++ b/okhttp-android-support/src/main/java/okhttp3/internal/huc/CacheAdapter.java, +import okhttp3.internal.cache.CacheRequest;, +import okhttp3.internal.cache.CacheStrategy;, +import okhttp3.internal.cache.InternalCache;, +++ b/okhttp-android-support/src/main/java/okhttp3/internal/huc/JavaApiConverter.java, +import okhttp3.internal.cache.CacheRequest;, +import okhttp3.internal.http.HttpHeaders;, +import okhttp3.internal.platform.Platform;, +    if (HttpHeaders.hasVaryAll(responseHeaders)) {, +    Set<String> varyFields = HttpHeaders.varyFields(responseHeaders);, +    if (HttpHeaders.hasVaryAll(responseHeaders)) {, +      varyHeaders = HttpHeaders.varyHeaders(request.headers(), responseHeaders);, +        return HttpHeaders.contentLength(okHeaders);, +++ b/okhttp-android-support/src/test/java/okhttp3/internal/huc/CacheAdapterTest.java, +import okhttp3.internal.cache.InternalCache;, +++ b/mockwebserver/src/main/java/okhttp3/internal/framed/FramedServer.java, +import okhttp3.internal.platform.Platform;, +import static okhttp3.internal.platform.Platform.INFO;, +++ b/mockwebserver/src/main/java/okhttp3/mockwebserver/MockWebServer.java, +import okhttp3.internal.platform.Platform;, +++ b/okhttp-android-support/src/main/java/okhttp3/AndroidShimResponseCache.java, +    okhttp3.internal.cache.CacheRequest okCacheRequest =, +++ b/okhttp-android-support/src/main/java/okhttp3/internal/huc/CacheAdapter.java, +import okhttp3.internal.cache.CacheRequest;, +import okhttp3.internal.cache.CacheStrategy;, +import okhttp3.internal.cache.InternalCache;, +++ b/okhttp-android-support/src/main/java/okhttp3/internal/huc/JavaApiConverter.java, +import okhttp3.internal.cache.CacheRequest;, +import okhttp3.internal.http.HttpHeaders;, +import okhttp3.internal.platform.Platform;, +    if (HttpHeaders.hasVaryAll(responseHeaders)) {, +    Set<String> varyFields = HttpHeaders.varyFields(responseHeaders);, +    if (HttpHeaders.hasVaryAll(responseHeaders)) {, +      varyHeaders = HttpHeaders.varyHeaders(request.headers(), responseHeaders);, +        return HttpHeaders.contentLength(okHeaders);, +++ b/okhttp-android-support/src/test/java/okhttp3/internal/huc/CacheAdapterTest.java, +import okhttp3.internal.cache.InternalCache;, +++ b/okhttp-android-support/src/test/java/okhttp3/internal/huc/ResponseCacheTest.java, +import okhttp3.internal.cache.InternalCache;, +++ b/mockwebserver/src/main/java/okhttp3/internal/framed/FramedServer.java, +import okhttp3.internal.platform.Platform;, +import static okhttp3.internal.platform.Platform.INFO;, +++ b/mockwebserver/src/main/java/okhttp3/mockwebserver/MockWebServer.java, +import okhttp3.internal.platform.Platform;, +++ b/okhttp-android-support/src/main/java/okhttp3/AndroidShimResponseCache.java, +    okhttp3.internal.cache.CacheRequest okCacheRequest =, +++ b/okhttp-android-support/src/main/java/okhttp3/internal/huc/CacheAdapter.java]