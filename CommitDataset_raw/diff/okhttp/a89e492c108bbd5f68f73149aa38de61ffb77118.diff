[+++ b/mockwebserver/src/main/java/com/squareup/okhttp/mockwebserver/MockWebServer.java, +import java.util.Map;, +  /** All map values are Boolean.TRUE. (Collections.newSetFromMap isn't available in Froyo) */, +  private final Map<Socket, Boolean> openClientSockets = new ConcurrentHashMap<>();, +  private final Map<SpdyConnection, Boolean> openSpdyConnections = new ConcurrentHashMap<>();, +        for (Iterator<Socket> s = openClientSockets.keySet().iterator(); s.hasNext(); ) {, +        for (Iterator<SpdyConnection> s = openSpdyConnections.keySet().iterator(); s.hasNext(); ) {, +            openClientSockets.put(socket, true);, +    serverSocket = null;, +          openClientSockets.put(socket, true);, +          openSpdyConnections.put(spdyConnection, Boolean.TRUE);]