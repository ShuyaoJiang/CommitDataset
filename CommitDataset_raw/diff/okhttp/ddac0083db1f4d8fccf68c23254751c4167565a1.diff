[+++ b/okhttp-tests/src/test/java/com/squareup/okhttp/CacheTest.java, +  @Test public void clientSideNoStore() throws Exception {, +    server.enqueue(new MockResponse(), +        .addHeader("Cache-Control: max-age=60"), +        .setBody("A"));, +    server.enqueue(new MockResponse(), +        .addHeader("Cache-Control: max-age=60"), +        .setBody("B"));, +, +    Request request1 = new Request.Builder(), +        .url(server.getUrl("/")), +        .cacheControl(new CacheControl.Builder().noStore().build()), +        .build();, +    Response response1 = client.newCall(request1).execute();, +    assertEquals("A", response1.body().string());, +, +    Request request2 = new Request.Builder(), +        .url(server.getUrl("/")), +        .build();, +    Response response2 = client.newCall(request2).execute();, +    assertEquals("B", response2.body().string());, +  }, +, +  @Test public void requestMaxStaleDirectiveWithNoValue() throws IOException {, +    // Add a stale response to the cache., +    server.enqueue(new MockResponse(), +        .setBody("A"), +        .addHeader("Cache-Control: max-age=120"), +        .addHeader("Date: " + formatDate(-4, TimeUnit.MINUTES)));, +    server.enqueue(new MockResponse(), +        .setBody("B"));, +, +    assertEquals("A", get(server.getUrl("/")).body().string());, +, +    // With max-stale, we'll return that stale response., +    Request request = new Request.Builder(), +        .url(server.getUrl("/")), +        .header("Cache-Control", "max-stale"), +        .build();, +    Response response = client.newCall(request).execute();, +    assertEquals("A", response.body().string());, +    assertEquals("110 HttpURLConnection \"Response is stale\"", response.header("Warning"));, +  }, +, +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/CacheTest.java, +  @Test public void clientSideNoStore() throws Exception {, +    server.enqueue(new MockResponse(), +        .addHeader("Cache-Control: max-age=60"), +        .setBody("A"));, +    server.enqueue(new MockResponse(), +        .addHeader("Cache-Control: max-age=60"), +        .setBody("B"));, +, +    Request request1 = new Request.Builder(), +        .url(server.getUrl("/")), +        .cacheControl(new CacheControl.Builder().noStore().build()), +        .build();, +    Response response1 = client.newCall(request1).execute();, +    assertEquals("A", response1.body().string());, +, +    Request request2 = new Request.Builder(), +        .url(server.getUrl("/")), +        .build();, +    Response response2 = client.newCall(request2).execute();, +    assertEquals("B", response2.body().string());, +  }, +, +  @Test public void requestMaxStaleDirectiveWithNoValue() throws IOException {, +    // Add a stale response to the cache., +    server.enqueue(new MockResponse(), +        .setBody("A"), +        .addHeader("Cache-Control: max-age=120"), +        .addHeader("Date: " + formatDate(-4, TimeUnit.MINUTES)));, +    server.enqueue(new MockResponse(), +        .setBody("B"));, +, +    assertEquals("A", get(server.getUrl("/")).body().string());, +, +    // With max-stale, we'll return that stale response., +    Request request = new Request.Builder(), +        .url(server.getUrl("/")), +        .header("Cache-Control", "max-stale"), +        .build();, +    Response response = client.newCall(request).execute();, +    assertEquals("A", response.body().string());, +    assertEquals("110 HttpURLConnection \"Response is stale\"", response.header("Warning"));, +  }, +, +++ b/okhttp/src/main/java/com/squareup/okhttp/CacheControl.java, +          maxAgeSeconds = HeaderParser.parseSeconds(parameter, -1);, +          sMaxAgeSeconds = HeaderParser.parseSeconds(parameter, -1);, +          maxStaleSeconds = HeaderParser.parseSeconds(parameter, Integer.MAX_VALUE);, +          minFreshSeconds = HeaderParser.parseSeconds(parameter, -1);, +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/CacheTest.java, +  @Test public void clientSideNoStore() throws Exception {, +    server.enqueue(new MockResponse(), +        .addHeader("Cache-Control: max-age=60"), +        .setBody("A"));, +    server.enqueue(new MockResponse(), +        .addHeader("Cache-Control: max-age=60")]