[+++ b/mockwebserver/src/main/java/com/squareup/okhttp/mockwebserver/MockWebServer.java, +++ b/mockwebserver/src/main/java/com/squareup/okhttp/mockwebserver/MockWebServer.java, +++ b/mockwebserver/src/main/java/com/squareup/okhttp/mockwebserver/SocketPolicy.java, +  SHUTDOWN_OUTPUT_AT_END, +++ b/mockwebserver/src/main/java/com/squareup/okhttp/mockwebserver/MockWebServer.java, +++ b/mockwebserver/src/main/java/com/squareup/okhttp/mockwebserver/SocketPolicy.java, +  SHUTDOWN_OUTPUT_AT_END, +++ b/okhttp-protocols/src/main/java/com/squareup/okhttp/internal/spdy/SpdyStream.java, +    long remaining = 0;, +    long start = 0;, +    if (readTimeoutMillis != 0) {, +      start = (System.nanoTime() / 1000000);, +      remaining = readTimeoutMillis;, +    }, +        if (readTimeoutMillis == 0) { // No timeout configured., +        } else if (remaining > 0) {, +          wait(remaining);, +          remaining = start + readTimeoutMillis - (System.nanoTime() / 1000000);, +        } else {, +          throw new SocketTimeoutException("Read response header timeout. readTimeoutMillis: ", +                            + readTimeoutMillis);, +        }, +++ b/mockwebserver/src/main/java/com/squareup/okhttp/mockwebserver/MockWebServer.java, +++ b/mockwebserver/src/main/java/com/squareup/okhttp/mockwebserver/SocketPolicy.java, +  SHUTDOWN_OUTPUT_AT_END, +++ b/okhttp-protocols/src/main/java/com/squareup/okhttp/internal/spdy/SpdyStream.java, +    long remaining = 0;, +    long start = 0;, +    if (readTimeoutMillis != 0) {, +      start = (System.nanoTime() / 1000000);, +      remaining = readTimeoutMillis;, +    }, +        if (readTimeoutMillis == 0) { // No timeout configured., +        } else if (remaining > 0) {, +          wait(remaining);, +          remaining = start + readTimeoutMillis - (System.nanoTime() / 1000000);, +        } else {, +          throw new SocketTimeoutException("Read response header timeout. readTimeoutMillis: ", +                            + readTimeoutMillis);, +        }, +++ b/okhttp/src/test/java/com/squareup/okhttp/internal/http/HttpOverSpdyTest.java]