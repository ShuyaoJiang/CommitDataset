[+++ b/okhttp-tests/src/test/java/com/squareup/okhttp/CallTest.java, +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/CallTest.java, +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/internal/http/URLConnectionTest.java, +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/CallTest.java, +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/internal/http/URLConnectionTest.java, +++ b/okhttp-urlconnection/src/main/java/com/squareup/okhttp/internal/huc/HttpURLConnectionImpl.java, +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/CallTest.java, +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/internal/http/URLConnectionTest.java, +++ b/okhttp-urlconnection/src/main/java/com/squareup/okhttp/internal/huc/HttpURLConnectionImpl.java, +++ b/okhttp/src/main/java/com/squareup/okhttp/Call.java, +      if (contentType == null) throw new IllegalStateException("contentType == null");, +, +      Request.Builder requestBuilder = request.newBuilder();, +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/CallTest.java, +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/internal/http/URLConnectionTest.java, +++ b/okhttp-urlconnection/src/main/java/com/squareup/okhttp/internal/huc/HttpURLConnectionImpl.java, +++ b/okhttp/src/main/java/com/squareup/okhttp/Call.java, +      if (contentType == null) throw new IllegalStateException("contentType == null");, +, +      Request.Builder requestBuilder = request.newBuilder();, +++ b/okhttp/src/main/java/com/squareup/okhttp/RequestBody.java, +import java.io.UnsupportedEncodingException;, +   * contentType} lacks a charset, this will use UTF-8., +    contentType = contentType.charset() != null, +        ? contentType, +        : MediaType.parse(contentType + "; charset=utf-8");, +    try {, +      byte[] bytes = content.getBytes(contentType.charset().name());, +    } catch (UnsupportedEncodingException e) {, +      throw new AssertionError();, +    }, +    if (contentType == null) throw new NullPointerException("contentType == null");, +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/CallTest.java, +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/internal/http/URLConnectionTest.java, +++ b/okhttp-urlconnection/src/main/java/com/squareup/okhttp/internal/huc/HttpURLConnectionImpl.java, +++ b/okhttp/src/main/java/com/squareup/okhttp/Call.java, +      if (contentType == null) throw new IllegalStateException("contentType == null");, +, +      Request.Builder requestBuilder = request.newBuilder();, +++ b/okhttp/src/main/java/com/squareup/okhttp/RequestBody.java, +import java.io.UnsupportedEncodingException;, +   * contentType} lacks a charset, this will use UTF-8., +    contentType = contentType.charset() != null, +        ? contentType, +        : MediaType.parse(contentType + "; charset=utf-8");, +    try {, +      byte[] bytes = content.getBytes(contentType.charset().name());, +    } catch (UnsupportedEncodingException e) {, +      throw new AssertionError();, +    }, +    if (contentType == null) throw new NullPointerException("contentType == null");, +++ b/okhttp/src/main/java/com/squareup/okhttp/internal/http/HttpEngine.java, +    if (hasRequestBody() && request.header("Content-Type") == null) {, +      result.header("Content-Type", "application/x-www-form-urlencoded");, +    }, +, +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/CallTest.java, +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/internal/http/URLConnectionTest.java, +++ b/okhttp-urlconnection/src/main/java/com/squareup/okhttp/internal/huc/HttpURLConnectionImpl.java, +++ b/okhttp/src/main/java/com/squareup/okhttp/Call.java, +      if (contentType == null) throw new IllegalStateException("contentType == null");, +, +      Request.Builder requestBuilder = request.newBuilder();, +++ b/okhttp/src/main/java/com/squareup/okhttp/RequestBody.java, +import java.io.UnsupportedEncodingException;, +   * contentType} lacks a charset, this will use UTF-8., +    contentType = contentType.charset() != null, +        ? contentType, +        : MediaType.parse(contentType + "; charset=utf-8");, +    try {, +      byte[] bytes = content.getBytes(contentType.charset().name());, +    } catch (UnsupportedEncodingException e) {, +      throw new AssertionError();, +    }, +    if (contentType == null) throw new NullPointerException("contentType == null");, +++ b/okhttp/src/main/java/com/squareup/okhttp/internal/http/HttpEngine.java, +    if (hasRequestBody() && request.header("Content-Type") == null) {, +      result.header("Content-Type", "application/x-www-form-urlencoded");, +    }, +, +++ b/okhttp/src/main/java/com/squareup/okhttp/internal/http/SpdyTransport.java, +    // TODO: make the known header names constants., +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/CallTest.java, +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/internal/http/URLConnectionTest.java, +++ b/okhttp-urlconnection/src/main/java/com/squareup/okhttp/internal/huc/HttpURLConnectionImpl.java, +++ b/okhttp/src/main/java/com/squareup/okhttp/Call.java, +      if (contentType == null) throw new IllegalStateException("contentType == null");, +, +      Request.Builder requestBuilder = request.newBuilder();, +++ b/okhttp/src/main/java/com/squareup/okhttp/RequestBody.java, +import java.io.UnsupportedEncodingException;, +   * contentType} lacks a charset, this will use UTF-8., +    contentType = contentType.charset() != null, +        ? contentType, +        : MediaType.parse(contentType + "; charset=utf-8");, +    try {, +      byte[] bytes = content.getBytes(contentType.charset().name());, +    } catch (UnsupportedEncodingException e) {, +      throw new AssertionError();, +    }]