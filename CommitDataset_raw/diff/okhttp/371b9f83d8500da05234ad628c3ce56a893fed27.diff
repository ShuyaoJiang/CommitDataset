[+++ b/okhttp-tests/src/test/java/okhttp3/CallTest.java, +++ b/okhttp-tests/src/test/java/okhttp3/CallTest.java, +++ b/okhttp/src/main/java/okhttp3/internal/http2/Http2Codec.java, +  private volatile boolean canceled;, +    // We may have been asked to cancel while creating the new stream and sending the request, +    // headers, but there was still no stream to close., +    if (canceled) {, +      stream.closeLater(ErrorCode.CANCEL);, +      throw new IOException("Canceled");, +    }, +    canceled = true;]