[+++ b/src/main/java/libcore/net/http/HttpURLConnectionImpl.java, +            if (routeSelector == null) {, +                throw e; // Without a route selector, we can't retry., +            } else if (httpEngine.connection != null) {, +            }, +++ b/src/main/java/libcore/net/http/HttpURLConnectionImpl.java, +            if (routeSelector == null) {, +                throw e; // Without a route selector, we can't retry., +            } else if (httpEngine.connection != null) {, +            }, +++ b/src/test/java/libcore/net/http/URLConnectionTest.java, +    public void testDnsFailureThrowsIOException() throws IOException {, +        OkHttpConnection connection = openConnection(new URL("http://host.unlikelytld"));, +        try {, +            connection.connect();, +            fail();, +        } catch (IOException expected) {, +        }, +    }, +, +    public void testMalformedUrlThrowsUnknownHostException() throws IOException {, +        OkHttpConnection connection = openConnection(new URL("http:///foo.html"));, +        try {, +            connection.connect();, +            fail();, +        } catch (UnknownHostException expected) {, +        }, +    }, +]