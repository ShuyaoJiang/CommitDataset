[+++ b/okhttp-tests/src/test/java/com/squareup/okhttp/ConnectionPoolTest.java, +  private final MockWebServer spdyServer = new MockWebServer();, +  private final MockWebServer httpServer = new MockWebServer();, +    httpA = new Connection(null, httpRoute);, +    httpB = new Connection(null, httpRoute);, +    httpC = new Connection(null, httpRoute);, +    httpD = new Connection(null, httpRoute);, +    httpE = new Connection(null, httpRoute);, +    spdyA = new Connection(null, spdyRoute);, +  @Test public void poolSingleHttpConnection() throws IOException {, +    ConnectionPool pool = new ConnectionPool(1, KEEP_ALIVE_DURATION_MS);, +        null, new Route(httpAddress, Proxy.NO_PROXY, httpSocketAddress, true));, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +, +  @Test public void evictAllConnections() {, +    ConnectionPool pool = new ConnectionPool(10, KEEP_ALIVE_DURATION_MS);, +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/ConnectionPoolTest.java, +  private final MockWebServer spdyServer = new MockWebServer();, +  private final MockWebServer httpServer = new MockWebServer();, +    httpA = new Connection(null, httpRoute);, +    httpB = new Connection(null, httpRoute);, +    httpC = new Connection(null, httpRoute);, +    httpD = new Connection(null, httpRoute);, +    httpE = new Connection(null, httpRoute);, +    spdyA = new Connection(null, spdyRoute);, +  @Test public void poolSingleHttpConnection() throws IOException {, +    ConnectionPool pool = new ConnectionPool(1, KEEP_ALIVE_DURATION_MS);, +        null, new Route(httpAddress, Proxy.NO_PROXY, httpSocketAddress, true));, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +, +  @Test public void evictAllConnections() {, +    ConnectionPool pool = new ConnectionPool(10, KEEP_ALIVE_DURATION_MS);, +++ b/okhttp/src/main/java/com/squareup/okhttp/Connection.java, +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/ConnectionPoolTest.java, +  private final MockWebServer spdyServer = new MockWebServer();, +  private final MockWebServer httpServer = new MockWebServer();, +    httpA = new Connection(null, httpRoute);, +    httpB = new Connection(null, httpRoute);, +    httpC = new Connection(null, httpRoute);, +    httpD = new Connection(null, httpRoute);, +    httpE = new Connection(null, httpRoute);, +    spdyA = new Connection(null, spdyRoute);, +  @Test public void poolSingleHttpConnection() throws IOException {, +    ConnectionPool pool = new ConnectionPool(1, KEEP_ALIVE_DURATION_MS);, +        null, new Route(httpAddress, Proxy.NO_PROXY, httpSocketAddress, true));, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +    ConnectionPool pool = new ConnectionPool(2, KEEP_ALIVE_DURATION_MS);, +, +  @Test public void evictAllConnections() {, +    ConnectionPool pool = new ConnectionPool(10, KEEP_ALIVE_DURATION_MS);, +++ b/okhttp/src/main/java/com/squareup/okhttp/Connection.java, +++ b/okhttp/src/main/java/com/squareup/okhttp/ConnectionPool.java, +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/ConnectionPoolTest.java, +  private final MockWebServer spdyServer = new MockWebServer();, +  private final MockWebServer httpServer = new MockWebServer();, +    httpA = new Connection(null, httpRoute);]