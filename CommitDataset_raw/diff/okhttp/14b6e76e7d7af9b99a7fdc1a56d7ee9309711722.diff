[+++ b/okhttp/src/main/java/com/squareup/okhttp/Connection.java, +  private Handshake handshake;, +    handshake = Handshake.get(sslSocket.getSession());, +  public Handshake getHandshake() {, +    return handshake;, +  }, +, +++ b/okhttp/src/main/java/com/squareup/okhttp/Connection.java, +  private Handshake handshake;, +    handshake = Handshake.get(sslSocket.getSession());, +  public Handshake getHandshake() {, +    return handshake;, +  }, +, +++ b/okhttp/src/main/java/com/squareup/okhttp/Dispatcher.java, +    private final Response response;, +    RealResponseBody(Response response, InputStream in) {, +      this.response = response;, +      String contentType = response.getContentType();, +      return response.getContentLength();, +++ b/okhttp/src/main/java/com/squareup/okhttp/Connection.java, +  private Handshake handshake;, +    handshake = Handshake.get(sslSocket.getSession());, +  public Handshake getHandshake() {, +    return handshake;, +  }, +, +++ b/okhttp/src/main/java/com/squareup/okhttp/Dispatcher.java, +    private final Response response;, +    RealResponseBody(Response response, InputStream in) {, +      this.response = response;, +      String contentType = response.getContentType();, +      return response.getContentLength();, +++ b/okhttp/src/main/java/com/squareup/okhttp/HttpResponseCache.java, +    Response response = entry.response(request, snapshot);, +, +    if (!entry.matches(request, response)) {, +      Util.closeQuietly(response.body());, +    return response;, +    if (response.hasVaryAll()) {, +      this.varyHeaders = response.request().rawHeaders().getAll(response.getVaryFields());, +    public boolean matches(Request request, Response response) {, +          && response.varyMatches(varyHeaders, request);, +++ b/okhttp/src/main/java/com/squareup/okhttp/Connection.java, +  private Handshake handshake;, +    handshake = Handshake.get(sslSocket.getSession());, +  public Handshake getHandshake() {, +    return handshake;, +  }, +, +++ b/okhttp/src/main/java/com/squareup/okhttp/Dispatcher.java, +    private final Response response;, +    RealResponseBody(Response response, InputStream in) {, +      this.response = response;, +      String contentType = response.getContentType();, +      return response.getContentLength();, +++ b/okhttp/src/main/java/com/squareup/okhttp/HttpResponseCache.java, +    Response response = entry.response(request, snapshot);, +, +    if (!entry.matches(request, response)) {, +      Util.closeQuietly(response.body());, +    return response;, +    if (response.hasVaryAll()) {, +      this.varyHeaders = response.request().rawHeaders().getAll(response.getVaryFields());, +    public boolean matches(Request request, Response response) {, +          && response.varyMatches(varyHeaders, request);, +++ b/okhttp/src/main/java/com/squareup/okhttp/Job.java, +      Response engineResponse = engine.getResponse();, +      Response response = engineResponse.newBuilder(), +          .body(new Dispatcher.RealResponseBody(engineResponse, engine.getResponseBody())), +++ b/okhttp/src/main/java/com/squareup/okhttp/Connection.java, +  private Handshake handshake;, +    handshake = Handshake.get(sslSocket.getSession());, +  public Handshake getHandshake() {, +    return handshake;, +  }, +, +++ b/okhttp/src/main/java/com/squareup/okhttp/Dispatcher.java, +    private final Response response;, +    RealResponseBody(Response response, InputStream in) {, +      this.response = response;, +      String contentType = response.getContentType();, +      return response.getContentLength();, +++ b/okhttp/src/main/java/com/squareup/okhttp/HttpResponseCache.java, +    Response response = entry.response(request, snapshot);, +, +    if (!entry.matches(request, response)) {, +      Util.closeQuietly(response.body());, +    return response;, +    if (response.hasVaryAll()) {, +      this.varyHeaders = response.request().rawHeaders().getAll(response.getVaryFields());, +    public boolean matches(Request request, Response response) {, +          && response.varyMatches(varyHeaders, request);, +++ b/okhttp/src/main/java/com/squareup/okhttp/Job.java, +      Response engineResponse = engine.getResponse();, +      Response response = engineResponse.newBuilder(), +          .body(new Dispatcher.RealResponseBody(engineResponse, engine.getResponseBody())), +++ b/okhttp/src/main/java/com/squareup/okhttp/Request.java, +import com.squareup.okhttp.internal.Platform;, +import com.squareup.okhttp.internal.http.HeaderParser;]