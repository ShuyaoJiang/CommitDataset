[+++ b/okhttp-tests/src/test/java/okhttp3/CallTest.java, +  @Test public void getClientRequestTimeoutWithBackPressure() throws Exception {, +    server.enqueue(new MockResponse(), +        .setSocketPolicy(SocketPolicy.DISCONNECT_AT_END), +        .setResponseCode(408), +        .setHeader("Connection", "Close"), +        .setHeader("Retry-After", "1"), +        .setBody("You took too long!"));, +, +    Request request = new Request.Builder(), +        .url(server.url("/")), +        .build();, +    Response response = client.newCall(request).execute();, +, +    assertEquals("You took too long!", response.body().string());, +  }, +, +  @Test public void maxUnavailableTimeoutRetries() throws IOException {, +    server.enqueue(new MockResponse(), +        .setSocketPolicy(SocketPolicy.DISCONNECT_AT_END), +        .setResponseCode(503), +        .setHeader("Connection", "Close"), +        .setHeader("Retry-After", "0"), +        .setBody("You took too long!"));, +    server.enqueue(new MockResponse(), +        .setSocketPolicy(SocketPolicy.DISCONNECT_AT_END), +        .setResponseCode(503), +        .setHeader("Connection", "Close"), +        .setHeader("Retry-After", "0"), +        .setBody("You took too long!"));, +, +    Request request = new Request.Builder(), +        .url(server.url("/")), +        .build();, +    Response response = client.newCall(request).execute();, +, +    assertEquals(503, response.code());, +    assertEquals("You took too long!", response.body().string());, +, +    assertEquals(2, server.getRequestCount());, +  }, +, +  @Test public void retryOnUnavailableWith0RetryAfter() throws IOException {, +    server.enqueue(new MockResponse(), +        .setSocketPolicy(SocketPolicy.DISCONNECT_AT_END), +        .setResponseCode(503), +        .setHeader("Connection", "Close"), +        .setHeader("Retry-After", "0"), +        .setBody("You took too long!"));, +    server.enqueue(new MockResponse().setBody("Body"));, +, +    Request request = new Request.Builder(), +        .url(server.url("/")), +        .build();, +    Response response = client.newCall(request).execute();, +, +    assertEquals("Body", response.body().string());, +  }, +, +++ b/okhttp-tests/src/test/java/okhttp3/CallTest.java, +  @Test public void getClientRequestTimeoutWithBackPressure() throws Exception {, +    server.enqueue(new MockResponse(), +        .setSocketPolicy(SocketPolicy.DISCONNECT_AT_END), +        .setResponseCode(408), +        .setHeader("Connection", "Close"), +        .setHeader("Retry-After", "1"), +        .setBody("You took too long!"));, +, +    Request request = new Request.Builder(), +        .url(server.url("/")), +        .build();, +    Response response = client.newCall(request).execute();, +, +    assertEquals("You took too long!", response.body().string());, +  }, +, +  @Test public void maxUnavailableTimeoutRetries() throws IOException {, +    server.enqueue(new MockResponse(), +        .setSocketPolicy(SocketPolicy.DISCONNECT_AT_END), +        .setResponseCode(503), +        .setHeader("Connection", "Close"), +        .setHeader("Retry-After", "0"), +        .setBody("You took too long!"));, +    server.enqueue(new MockResponse(), +        .setSocketPolicy(SocketPolicy.DISCONNECT_AT_END), +        .setResponseCode(503), +        .setHeader("Connection", "Close"), +        .setHeader("Retry-After", "0"), +        .setBody("You took too long!"));, +, +    Request request = new Request.Builder(), +        .url(server.url("/")), +        .build();, +    Response response = client.newCall(request).execute();, +, +    assertEquals(503, response.code());, +    assertEquals("You took too long!", response.body().string());, +, +    assertEquals(2, server.getRequestCount());, +  }]