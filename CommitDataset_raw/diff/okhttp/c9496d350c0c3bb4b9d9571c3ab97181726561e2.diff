[+++ b/okhttp-tests/src/test/java/okhttp3/CacheTest.java, +    // 1. Seed the cache (potentially)., +    // 2. Expect a cache hit or miss., +    // 1. Seed the cache., +    // 2. Invalidate it., +    // 3. Expect a cache miss., +    // 1. Seed the cache., +    // 2. Invalidate it with an uncacheable response., +    // 3. Expect a cache miss., +  @Test public void putInvalidatesWithNoContentResponse() throws Exception {, +    // 1. Seed the cache., +    // 2. Invalidate it., +    // 3. Expect a cache miss., +    server.enqueue(new MockResponse(), +        .setBody("A"), +        .addHeader("Expires: " + formatDate(1, TimeUnit.HOURS)));, +    server.enqueue(new MockResponse(), +        .clearHeaders(), +        .setResponseCode(HttpURLConnection.HTTP_NO_CONTENT));, +    server.enqueue(new MockResponse(), +        .setBody("C"));, +, +    HttpUrl url = server.url("/");, +, +    assertEquals("A", get(url).body().string());, +, +    Request request = new Request.Builder(), +        .url(url), +        .put(RequestBody.create(MediaType.parse("text/plain"), "foo")), +        .build();, +    Response invalidate = client.newCall(request).execute();, +    assertEquals("", invalidate.body().string());, +, +    assertEquals("C", get(url).body().string());, +  }, +, +    // 1. Request a range., +    // 2. Request a full document, expecting a cache miss., +++ b/okhttp-tests/src/test/java/okhttp3/CacheTest.java, +    // 1. Seed the cache (potentially)., +    // 2. Expect a cache hit or miss., +    // 1. Seed the cache., +    // 2. Invalidate it., +    // 3. Expect a cache miss., +    // 1. Seed the cache., +    // 2. Invalidate it with an uncacheable response., +    // 3. Expect a cache miss., +  @Test public void putInvalidatesWithNoContentResponse() throws Exception {, +    // 1. Seed the cache., +    // 2. Invalidate it., +    // 3. Expect a cache miss., +    server.enqueue(new MockResponse(), +        .setBody("A"), +        .addHeader("Expires: " + formatDate(1, TimeUnit.HOURS)));, +    server.enqueue(new MockResponse(), +        .clearHeaders(), +        .setResponseCode(HttpURLConnection.HTTP_NO_CONTENT));, +    server.enqueue(new MockResponse(), +        .setBody("C"));, +, +    HttpUrl url = server.url("/");, +, +    assertEquals("A", get(url).body().string());, +, +    Request request = new Request.Builder(), +        .url(url), +        .put(RequestBody.create(MediaType.parse("text/plain"), "foo")), +        .build();, +    Response invalidate = client.newCall(request).execute();, +    assertEquals("", invalidate.body().string());, +, +    assertEquals("C", get(url).body().string());, +  }, +, +    // 1. Request a range., +    // 2. Request a full document, expecting a cache miss., +++ b/okhttp/src/main/java/okhttp3/CookieJar.java, + * accept and which to reject. A reasonable policy is to reject all cookies, though that may, +++ b/okhttp-tests/src/test/java/okhttp3/CacheTest.java, +    // 1. Seed the cache (potentially)., +    // 2. Expect a cache hit or miss., +    // 1. Seed the cache., +    // 2. Invalidate it., +    // 3. Expect a cache miss., +    // 1. Seed the cache., +    // 2. Invalidate it with an uncacheable response., +    // 3. Expect a cache miss., +  @Test public void putInvalidatesWithNoContentResponse() throws Exception {, +    // 1. Seed the cache., +    // 2. Invalidate it., +    // 3. Expect a cache miss., +    server.enqueue(new MockResponse(), +        .setBody("A"), +        .addHeader("Expires: " + formatDate(1, TimeUnit.HOURS)));, +    server.enqueue(new MockResponse(), +        .clearHeaders(), +        .setResponseCode(HttpURLConnection.HTTP_NO_CONTENT));, +    server.enqueue(new MockResponse(), +        .setBody("C"));, +]