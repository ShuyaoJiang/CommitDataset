[+++ b/okhttp/src/main/java/okhttp3/OkHttpClient.java, +      this.certificateChainCleaner = Platform.get().buildCertificateChainCleaner(sslSocketFactory);, +++ b/okhttp/src/main/java/okhttp3/OkHttpClient.java, +      this.certificateChainCleaner = Platform.get().buildCertificateChainCleaner(sslSocketFactory);, +++ b/okhttp/src/main/java/okhttp3/internal/platform/AndroidPlatform.java, +  @Override protected X509TrustManager trustManager(SSLSocketFactory sslSocketFactory) {, +++ b/okhttp/src/main/java/okhttp3/OkHttpClient.java, +      this.certificateChainCleaner = Platform.get().buildCertificateChainCleaner(sslSocketFactory);, +++ b/okhttp/src/main/java/okhttp3/internal/platform/AndroidPlatform.java, +  @Override protected X509TrustManager trustManager(SSLSocketFactory sslSocketFactory) {, +++ b/okhttp/src/main/java/okhttp3/internal/platform/Platform.java, +  protected X509TrustManager trustManager(SSLSocketFactory sslSocketFactory) {, +  public CertificateChainCleaner buildCertificateChainCleaner(SSLSocketFactory sslSocketFactory) {, +    X509TrustManager trustManager = trustManager(sslSocketFactory);, +, +    if (trustManager == null) {, +      throw new IllegalStateException("Unable to extract the trust manager on " + Platform.get(), +          + ", sslSocketFactory is " + sslSocketFactory.getClass());, +    }, +, +    return buildCertificateChainCleaner(trustManager);, +  }, +]