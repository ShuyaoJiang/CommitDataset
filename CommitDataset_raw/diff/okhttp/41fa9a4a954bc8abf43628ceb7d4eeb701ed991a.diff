[+++ b/okhttp-tests/src/test/java/okhttp3/AddressTest.java, +  private Authenticator authenticator = Authenticator.NONE;, +++ b/okhttp-tests/src/test/java/okhttp3/AddressTest.java, +  private Authenticator authenticator = Authenticator.NONE;, +++ b/okhttp-tests/src/test/java/okhttp3/OkHttpClientTest.java, +++ b/okhttp-tests/src/test/java/okhttp3/AddressTest.java, +  private Authenticator authenticator = Authenticator.NONE;, +++ b/okhttp-tests/src/test/java/okhttp3/OkHttpClientTest.java, +++ b/okhttp-tests/src/test/java/okhttp3/URLConnectionTest.java, +    client.client().setProxyAuthenticator(new JavaNetAuthenticator());, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +++ b/okhttp-tests/src/test/java/okhttp3/AddressTest.java, +  private Authenticator authenticator = Authenticator.NONE;, +++ b/okhttp-tests/src/test/java/okhttp3/OkHttpClientTest.java, +++ b/okhttp-tests/src/test/java/okhttp3/URLConnectionTest.java, +    client.client().setProxyAuthenticator(new JavaNetAuthenticator());, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +++ b/okhttp-tests/src/test/java/okhttp3/internal/framed/HttpOverSpdyTest.java, +import okhttp3.JavaNetAuthenticator;, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +++ b/okhttp-tests/src/test/java/okhttp3/AddressTest.java, +  private Authenticator authenticator = Authenticator.NONE;, +++ b/okhttp-tests/src/test/java/okhttp3/OkHttpClientTest.java, +++ b/okhttp-tests/src/test/java/okhttp3/URLConnectionTest.java, +    client.client().setProxyAuthenticator(new JavaNetAuthenticator());, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +++ b/okhttp-tests/src/test/java/okhttp3/internal/framed/HttpOverSpdyTest.java, +import okhttp3.JavaNetAuthenticator;, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +++ b/okhttp-tests/src/test/java/okhttp3/internal/http/RouteSelectorTest.java, +  private final Authenticator authenticator = Authenticator.NONE;, +++ b/okhttp-tests/src/test/java/okhttp3/AddressTest.java, +  private Authenticator authenticator = Authenticator.NONE;, +++ b/okhttp-tests/src/test/java/okhttp3/OkHttpClientTest.java, +++ b/okhttp-tests/src/test/java/okhttp3/URLConnectionTest.java, +    client.client().setProxyAuthenticator(new JavaNetAuthenticator());, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +++ b/okhttp-tests/src/test/java/okhttp3/internal/framed/HttpOverSpdyTest.java, +import okhttp3.JavaNetAuthenticator;, +    client.client().setAuthenticator(new JavaNetAuthenticator());, +++ b/okhttp-tests/src/test/java/okhttp3/internal/http/RouteSelectorTest.java, +  private final Authenticator authenticator = Authenticator.NONE;, +++ b/okhttp-urlconnection/src/main/java/okhttp3/JavaNetAuthenticator.java, +/*, + * Copyright (C) 2013 Square, Inc., + *, + * Licensed under the Apache License, Version 2.0 (the "License");, + * you may not use this file except in compliance with the License., + * You may obtain a copy of the License at, + *, + *      http://www.apache.org/licenses/LICENSE-2.0, + *, + * Unless required by applicable law or agreed to in writing, software, + * distributed under the License is distributed on an "AS IS" BASIS,, + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied., + * See the License for the specific language governing permissions and, + * limitations under the License., + */, +package okhttp3;, +, +import java.io.IOException;, +import java.net.Authenticator.RequestorType;, +import java.net.InetAddress;, +import java.net.InetSocketAddress;, +import java.net.PasswordAuthentication;, +import java.net.Proxy;, +import java.util.List;, +, +/**, + * Adapts {@link java.net.Authenticator} to {@link Authenticator}. Configure OkHttp to use, + * {@link java.net.Authenticator} with {@link OkHttpClient#setAuthenticator} or {@link, + * OkHttpClient#setProxyAuthenticator(Authenticator)}., + */, +public final class JavaNetAuthenticator implements Authenticator {, +  @Override public Request authenticate(Route route, Response response) throws IOException {, +    List<Challenge> challenges = response.challenges();, +    Request request = response.request();, +    HttpUrl url = request.url();, +    boolean proxyAuthorization = response.code() == 407;, +    Proxy proxy = route.proxy();]