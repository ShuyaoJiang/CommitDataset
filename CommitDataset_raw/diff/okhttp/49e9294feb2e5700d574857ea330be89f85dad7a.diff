[+++ b/mockwebserver/src/main/java/okhttp3/mockwebserver/MockWebServer.java, +import org.junit.rules.ExternalResource;, +public final class MockWebServer extends ExternalResource implements Closeable {, +  protected synchronized void before() {, +    before();, +    before();, +    before();, +  public synchronized void after() {, +    try {, +      shutdown();, +    } catch (IOException e) {, +      logger.log(Level.WARNING, "MockWebServer shutdown failed", e);, +    }, +  }, +]