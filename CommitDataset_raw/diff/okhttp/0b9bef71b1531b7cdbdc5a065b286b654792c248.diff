[+++ b/okhttp-tests/src/test/java/com/squareup/okhttp/CacheTest.java, +    } else if (responseCode == HttpURLConnection.HTTP_NO_CONTENT, +        || responseCode == HttpURLConnection.HTTP_RESET) {, +      mockResponse.setBody(""); // We forbid bodies for 204 and 205., +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/CacheTest.java, +    } else if (responseCode == HttpURLConnection.HTTP_NO_CONTENT, +        || responseCode == HttpURLConnection.HTTP_RESET) {, +      mockResponse.setBody(""); // We forbid bodies for 204 and 205., +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/CallTest.java, +import java.net.ProtocolException;, +  @Test public void http204WithBodyDisallowed() throws IOException {, +    server.enqueue(new MockResponse(), +        .setResponseCode(204), +        .setBody("I'm not even supposed to be here today."));, +, +    try {, +      executeSynchronously(new Request.Builder().url(server.getUrl("/")).build());, +      fail();, +    } catch (ProtocolException e) {, +      assertEquals("HTTP 204 had non-zero Content-Length: 39", e.getMessage());, +    }, +  }, +, +  @Test public void http205WithBodyDisallowed() throws IOException {, +    server.enqueue(new MockResponse(), +        .setResponseCode(205), +        .setBody("I'm not even supposed to be here today."));, +, +    try {, +      executeSynchronously(new Request.Builder().url(server.getUrl("/")).build());, +      fail();, +    } catch (ProtocolException e) {, +      assertEquals("HTTP 205 had non-zero Content-Length: 39", e.getMessage());, +    }, +  }, +, +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/CacheTest.java, +    } else if (responseCode == HttpURLConnection.HTTP_NO_CONTENT, +        || responseCode == HttpURLConnection.HTTP_RESET) {, +      mockResponse.setBody(""); // We forbid bodies for 204 and 205., +++ b/okhttp-tests/src/test/java/com/squareup/okhttp/CallTest.java, +import java.net.ProtocolException;, +  @Test public void http204WithBodyDisallowed() throws IOException {, +    server.enqueue(new MockResponse(), +        .setResponseCode(204), +        .setBody("I'm not even supposed to be here today."));, +, +    try {, +      executeSynchronously(new Request.Builder().url(server.getUrl("/")).build());, +      fail();, +    } catch (ProtocolException e) {, +      assertEquals("HTTP 204 had non-zero Content-Length: 39", e.getMessage());, +    }, +  }, +, +  @Test public void http205WithBodyDisallowed() throws IOException {, +    server.enqueue(new MockResponse(), +        .setResponseCode(205), +        .setBody("I'm not even supposed to be here today."));, +, +    try {, +      executeSynchronously(new Request.Builder().url(server.getUrl("/")).build());, +      fail();, +    } catch (ProtocolException e) {, +      assertEquals("HTTP 205 had non-zero Content-Length: 39", e.getMessage());, +    }, +  }, +, +++ b/okhttp/src/main/java/com/squareup/okhttp/internal/http/HttpEngine.java, +      Response response = readNetworkResponse();, +, +      int code = response.code();, +      if ((code == 204 || code == 205) && response.body().contentLength() > 0) {, +        throw new ProtocolException(, +            "HTTP " + code + " had non-zero Content-Length: " + response.body().contentLength());, +      }, +, +      return response;]