[+++ b/mockwebserver/src/test/java/com/squareup/okhttp/mockwebserver/MockWebServerTest.java, +import java.net.ProtocolException;, +    assertEquals(2, connection.getContentLength());, +    try {, +      int byteRead = in.read();, +      // OpenJDK behavior: end of stream., +      assertEquals(-1, byteRead);, +    } catch (ProtocolException e) {, +      // On Android, HttpURLConnection is implemented by OkHttp v2. OkHttp, +      // treats an incomplete response body as a ProtocolException., +    }]