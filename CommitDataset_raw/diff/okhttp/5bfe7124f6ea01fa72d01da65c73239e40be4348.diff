[+++ b/src/main/java/com/squareup/okhttp/internal/http/HttpURLConnectionImpl.java, +            if (routeSelector == null) {, +                throw e; // Without a route selector, we can't retry., +            } else if (httpEngine.connection != null) {, +            if (routeSelector.hasNext() && isRecoverable(e), +++ b/src/main/java/com/squareup/okhttp/internal/http/HttpURLConnectionImpl.java, +            if (routeSelector == null) {, +                throw e; // Without a route selector, we can't retry., +            } else if (httpEngine.connection != null) {, +            if (routeSelector.hasNext() && isRecoverable(e), +++ b/src/test/java/com/squareup/okhttp/internal/http/URLConnectionTest.java, +    /**, +     * Ignored because this test is racy., +     * https://github.com/square/okhttp/issues/90, +     */, +    @Test @Ignore public void serverShutdownOutput() throws Exception {]