[+++ b/src/test/java/com/google/mockwebserver/MockWebServerTest.java, +import java.net.URLConnection;, +, +    private MockWebServer server = new MockWebServer();, +, +    @Override protected void setUp() throws Exception {, +        super.setUp();, +    }, +, +    @Override protected void tearDown() throws Exception {, +        server.shutdown();, +        super.tearDown();, +    }, +, +, +    public void testRedirect() throws Exception {, +        server.enqueue(new MockResponse(), +                .setResponseCode(HttpURLConnection.HTTP_MOVED_TEMP), +                .addHeader("Location: /new-path"), +                .setBody("This page has moved!"));, +        server.enqueue(new MockResponse().setBody("This is the new location!"));, +        server.play();, +, +        URLConnection connection = server.getUrl("/").openConnection();, +        InputStream in = connection.getInputStream();, +        BufferedReader reader = new BufferedReader(new InputStreamReader(in));, +        assertEquals("This is the new location!", reader.readLine());, +, +        RecordedRequest first = server.takeRequest();, +        assertEquals("GET / HTTP/1.1", first.getRequestLine());, +        RecordedRequest redirect = server.takeRequest();, +        assertEquals("GET /new-path HTTP/1.1", redirect.getRequestLine());, +    }]