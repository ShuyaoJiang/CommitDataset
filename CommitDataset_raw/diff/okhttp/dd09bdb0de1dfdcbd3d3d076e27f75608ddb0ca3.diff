[+++ b/okhttp/src/main/java/okhttp3/internal/Platform.java, +    // Attempt to get the trust manager from an OpenJDK socket factory. We attempt this on all, +    // platforms in order to support Robolectric, which mixes classes from both Android and the, +    // Oracle JDK. Note that we don't support HTTP/2 or other nice features on Robolectric., +    try {, +      Class<?> sslContextClass = Class.forName("sun.security.ssl.SSLContextImpl");, +      Object context = readFieldOrNull(sslSocketFactory, sslContextClass, "context");, +      if (context == null) return null;, +      return readFieldOrNull(context, X509TrustManager.class, "trustManager");, +    } catch (ClassNotFoundException e) {, +  }, +      OptionalMethod<Socket> setUseSessionTickets = new OptionalMethod<>(, +          null, "setUseSessionTickets", boolean.class);, +      OptionalMethod<Socket> setHostname = new OptionalMethod<>(, +          null, "setHostname", String.class);, +          getAlpnSelectedProtocol, setAlpnProtocols);, +      return new JdkWithJettyBootPlatform(, +    // Probably an Oracle JDK like OpenJDK., +        OptionalMethod<Socket> setHostname, OptionalMethod<Socket> getAlpnSelectedProtocol,, +          return super.trustManager(sslSocketFactory);, +  private static class JdkWithJettyBootPlatform extends Platform {, +    public JdkWithJettyBootPlatform(Method putMethod, Method getMethod, Method removeMethod,, +        Class<?> clientProviderClass, Class<?> serverProviderClass) {]