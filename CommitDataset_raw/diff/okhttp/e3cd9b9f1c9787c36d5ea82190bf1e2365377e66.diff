[+++ b/okhttp/src/main/java/okhttp3/OkHttpClient.java, +  private static final List<ConnectionSpec> DEFAULT_CONNECTION_SPECS;, +    List<ConnectionSpec> connSpecs = new ArrayList<>(Arrays.asList(ConnectionSpec.MODERN_TLS,, +        ConnectionSpec.COMPATIBLE_TLS));, +    if (Platform.get().isCleartextTrafficPermitted()) {, +      connSpecs.add(ConnectionSpec.CLEARTEXT);, +    }, +    DEFAULT_CONNECTION_SPECS = Util.immutableList(connSpecs);, +, +++ b/okhttp/src/main/java/okhttp3/OkHttpClient.java, +  private static final List<ConnectionSpec> DEFAULT_CONNECTION_SPECS;, +    List<ConnectionSpec> connSpecs = new ArrayList<>(Arrays.asList(ConnectionSpec.MODERN_TLS,, +        ConnectionSpec.COMPATIBLE_TLS));, +    if (Platform.get().isCleartextTrafficPermitted()) {, +      connSpecs.add(ConnectionSpec.CLEARTEXT);, +    }, +    DEFAULT_CONNECTION_SPECS = Util.immutableList(connSpecs);, +, +++ b/okhttp/src/main/java/okhttp3/internal/Platform.java, + *, + * <h3>Android Cleartext Permit Detection</h3>, + *, + * <p>Supported on Android 6.0+ via {@code NetworkSecurityPolicy}., +  public boolean isCleartextTrafficPermitted() {, +    return true;, +  }, +, +, +    @Override public boolean isCleartextTrafficPermitted() {, +      try {, +        Class<?> networkPolicyClass = Class.forName("android.security.NetworkSecurityPolicy");, +        Method getInstanceMethod = networkPolicyClass.getMethod("getInstance");, +        Object networkSecurityPolicy = getInstanceMethod.invoke(null);, +        Method isCleartextTrafficPermittedMethod = networkPolicyClass, +            .getMethod("isCleartextTrafficPermitted");, +        boolean cleartextPermitted = (boolean) isCleartextTrafficPermittedMethod, +            .invoke(networkSecurityPolicy);, +        return cleartextPermitted;, +      } catch (ClassNotFoundException e) {, +        return super.isCleartextTrafficPermitted();, +      } catch (NoSuchMethodException | IllegalAccessException | IllegalArgumentException, +          | InvocationTargetException e) {, +        throw new AssertionError();, +      }, +    }, +]