[+++ b/okhttp-protocols/src/main/java/com/squareup/okhttp/internal/Util.java, +  /** Mutates the byte array to ensure all characters are lowercase. */, +  public static void asciiLowerCase(byte[] bytes) {, +    for (int i = 0; i < bytes.length; i++) {, +      bytes[i] = asciiLowerCase(bytes[i]);, +    }, +  }, +, +  public static byte asciiLowerCase(byte c) {, +    return 'A' <= c && c <= 'Z' ? (byte) (c + 'a' - 'A') : c;, +  }, +, +++ b/okhttp-protocols/src/main/java/com/squareup/okhttp/internal/Util.java, +  /** Mutates the byte array to ensure all characters are lowercase. */, +  public static void asciiLowerCase(byte[] bytes) {, +    for (int i = 0; i < bytes.length; i++) {, +      bytes[i] = asciiLowerCase(bytes[i]);, +    }, +  }, +, +  public static byte asciiLowerCase(byte c) {, +    return 'A' <= c && c <= 'Z' ? (byte) (c + 'a' - 'A') : c;, +  }, +, +++ b/okhttp-protocols/src/main/java/com/squareup/okhttp/internal/bytes/ByteString.java, +import static com.squareup.okhttp.internal.Util.asciiLowerCase;, +, +   * Reads {@code count} bytes from {@code in} and returns the result converted, +   * to ASCII lowercase., +   *, +   * @throws java.io.EOFException if {@code in} has fewer than {@code count}, +   * bytes to read., +   */, +  public static ByteString readLowerCase(InputStream in, int count) throws IOException {, +    byte[] result = new byte[count];, +    Util.readFully(in, result);, +    asciiLowerCase(result);, +    return new ByteString(result);, +  }, +, +  /**, +++ b/okhttp-protocols/src/main/java/com/squareup/okhttp/internal/Util.java, +  /** Mutates the byte array to ensure all characters are lowercase. */, +  public static void asciiLowerCase(byte[] bytes) {, +    for (int i = 0; i < bytes.length; i++) {, +      bytes[i] = asciiLowerCase(bytes[i]);, +    }, +  }, +, +  public static byte asciiLowerCase(byte c) {, +    return 'A' <= c && c <= 'Z' ? (byte) (c + 'a' - 'A') : c;, +  }, +, +++ b/okhttp-protocols/src/main/java/com/squareup/okhttp/internal/bytes/ByteString.java, +import static com.squareup.okhttp.internal.Util.asciiLowerCase;, +, +   * Reads {@code count} bytes from {@code in} and returns the result converted, +   * to ASCII lowercase., +   *, +   * @throws java.io.EOFException if {@code in} has fewer than {@code count}, +   * bytes to read., +   */, +  public static ByteString readLowerCase(InputStream in, int count) throws IOException {, +    byte[] result = new byte[count];, +    Util.readFully(in, result);, +    asciiLowerCase(result);, +    return new ByteString(result);, +  }, +, +  /**, +++ b/okhttp-protocols/src/test/java/com/squareup/okhttp/internal/ByteStringTest.java, +    assertEquals(ByteString.of((byte) 0x61, (byte) 0x62), ByteString.readLowerCase(in, 2));, +    assertEquals(ByteString.of((byte) 0x63), ByteString.readLowerCase(in, 1));, +    assertEquals(ByteString.of(), ByteString.readLowerCase(in, 0));, +++ b/okhttp-protocols/src/main/java/com/squareup/okhttp/internal/Util.java, +  /** Mutates the byte array to ensure all characters are lowercase. */, +  public static void asciiLowerCase(byte[] bytes) {, +    for (int i = 0; i < bytes.length; i++) {, +      bytes[i] = asciiLowerCase(bytes[i]);, +    }, +  }, +, +  public static byte asciiLowerCase(byte c) {, +    return 'A' <= c && c <= 'Z' ? (byte) (c + 'a' - 'A') : c;, +  }, +, +++ b/okhttp-protocols/src/main/java/com/squareup/okhttp/internal/bytes/ByteString.java, +import static com.squareup.okhttp.internal.Util.asciiLowerCase;, +, +   * Reads {@code count} bytes from {@code in} and returns the result converted, +   * to ASCII lowercase., +   *, +   * @throws java.io.EOFException if {@code in} has fewer than {@code count}, +   * bytes to read., +   */, +  public static ByteString readLowerCase(InputStream in, int count) throws IOException {, +    byte[] result = new byte[count];, +    Util.readFully(in, result);, +    asciiLowerCase(result);, +    return new ByteString(result);]