[+++ b/mockwebserver/src/main/java/com/squareup/okhttp/mockwebserver/MockWebServer.java, +import com.squareup.okhttp.internal.http.HttpMethod;, +    MockResponse policy = dispatcher.peek();, +      throttledTransfer(policy, socket, source, Okio.buffer(requestBody), contentLength, true);, +        throttledTransfer(policy, socket, source, Okio.buffer(requestBody), chunkSize, true);, +    String method = request.substring(0, request.indexOf(' '));, +    if (hasBody && !HttpMethod.permitsRequestBody(method)) {, +    throttledTransfer(response, socket, body, sink, body.size(), false);, +   * throttled according to {@code policy}., +  private void throttledTransfer(MockResponse policy, Socket socket, BufferedSource source,, +      BufferedSink sink, long byteCount, boolean isRequest) throws IOException {, +    long bytesPerPeriod = policy.getThrottleBytesPerPeriod();, +    long periodDelayMs = policy.getThrottlePeriod(TimeUnit.MILLISECONDS);, +    boolean disconnectHalfway =, +        !isRequest && policy.getSocketPolicy() == DISCONNECT_DURING_RESPONSE_BODY;, +        throttledTransfer(response, socket, body, sink, bodyLimit, false);]