[+++ b/okhttp-tests/src/test/java/okhttp3/AddressTest.java, +import java.net.Proxy;, +, +  @Test public void addressToString() throws Exception {, +    Address address = new Address("square.com", 80, dns, socketFactory, null, null, null,, +        authenticator, null, protocols, connectionSpecs, proxySelector);, +    assertEquals("Address{square.com:80, proxySelector=RecordingProxySelector}",, +        address.toString());, +  }, +, +  @Test public void addressWithProxyToString() throws Exception {, +    Address address = new Address("square.com", 80, dns, socketFactory, null, null, null,, +        authenticator, Proxy.NO_PROXY, protocols, connectionSpecs, proxySelector);, +    assertEquals("Address{square.com:80, proxy=" + Proxy.NO_PROXY + "}", address.toString());, +  }, +++ b/okhttp-tests/src/test/java/okhttp3/AddressTest.java, +import java.net.Proxy;, +, +  @Test public void addressToString() throws Exception {, +    Address address = new Address("square.com", 80, dns, socketFactory, null, null, null,, +        authenticator, null, protocols, connectionSpecs, proxySelector);, +    assertEquals("Address{square.com:80, proxySelector=RecordingProxySelector}",, +        address.toString());, +  }, +, +  @Test public void addressWithProxyToString() throws Exception {, +    Address address = new Address("square.com", 80, dns, socketFactory, null, null, null,, +        authenticator, Proxy.NO_PROXY, protocols, connectionSpecs, proxySelector);, +    assertEquals("Address{square.com:80, proxy=" + Proxy.NO_PROXY + "}", address.toString());, +  }, +++ b/okhttp-tests/src/test/java/okhttp3/CacheTest.java, +++ b/okhttp-tests/src/test/java/okhttp3/AddressTest.java, +import java.net.Proxy;, +, +  @Test public void addressToString() throws Exception {, +    Address address = new Address("square.com", 80, dns, socketFactory, null, null, null,, +        authenticator, null, protocols, connectionSpecs, proxySelector);, +    assertEquals("Address{square.com:80, proxySelector=RecordingProxySelector}",, +        address.toString());, +  }, +, +  @Test public void addressWithProxyToString() throws Exception {, +    Address address = new Address("square.com", 80, dns, socketFactory, null, null, null,, +        authenticator, Proxy.NO_PROXY, protocols, connectionSpecs, proxySelector);, +    assertEquals("Address{square.com:80, proxy=" + Proxy.NO_PROXY + "}", address.toString());, +  }, +++ b/okhttp-tests/src/test/java/okhttp3/CacheTest.java, +++ b/okhttp-tests/src/test/java/okhttp3/CallTest.java, +    executeSynchronously("/"), +        .assertFailure(IOException.class), +        .assertFailureMatches("unexpected end of stream on Connection.*", +            + server.getHostName() + ":" + server.getPort() + ".*");, +  @Test public void rangeHeaderPreventsAutomaticGzip() throws Exception {, +    Buffer gzippedBody = gzip("abcabcabc");, +, +    // Enqueue a gzipped response. Our request isn't expecting it, but that's okay., +    server.enqueue(new MockResponse(), +        .setResponseCode(HttpURLConnection.HTTP_PARTIAL), +        .setBody(gzippedBody), +        .addHeader("Content-Encoding: gzip"), +        .addHeader("Content-Range: bytes 0-" + (gzippedBody.size() - 1)));, +, +    // Make a range request., +    Request request = new Request.Builder(), +        .url(server.url("/")), +        .header("Range", "bytes=0-"), +        .build();, +    Call call = client.newCall(request);, +, +    // The response is not decompressed., +    Response response = call.execute();, +    assertEquals("gzip", response.header("Content-Encoding"));, +    assertEquals(gzippedBody.snapshot(), response.body().source().readByteString());, +, +    // The request did not offer gzip support., +    RecordedRequest recordedRequest = server.takeRequest();, +    assertNull(recordedRequest.getHeader("Accept-Encoding"));, +  }, +, +++ b/okhttp-tests/src/test/java/okhttp3/AddressTest.java, +import java.net.Proxy;, +, +  @Test public void addressToString() throws Exception {, +    Address address = new Address("square.com", 80, dns, socketFactory, null, null, null,, +        authenticator, null, protocols, connectionSpecs, proxySelector);, +    assertEquals("Address{square.com:80, proxySelector=RecordingProxySelector}",, +        address.toString());, +  }, +, +  @Test public void addressWithProxyToString() throws Exception {, +    Address address = new Address("square.com", 80, dns, socketFactory, null, null, null,, +        authenticator, Proxy.NO_PROXY, protocols, connectionSpecs, proxySelector);, +    assertEquals("Address{square.com:80, proxy=" + Proxy.NO_PROXY + "}", address.toString());, +  }, +++ b/okhttp-tests/src/test/java/okhttp3/CacheTest.java, +++ b/okhttp-tests/src/test/java/okhttp3/CallTest.java, +    executeSynchronously("/"), +        .assertFailure(IOException.class), +        .assertFailureMatches("unexpected end of stream on Connection.*", +            + server.getHostName() + ":" + server.getPort() + ".*");]