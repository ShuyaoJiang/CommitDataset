[+++ b/okhttp-tests/src/test/java/okhttp3/HeadersTest.java, +import java.util.Date;, +, +  @Test public void addDate() {, +    Date expected = new Date(0);, +    Headers headers = new Headers.Builder(), +        .add("testDate", expected), +        .build();, +    assertEquals("Thu, 01 Jan 1970 00:00:00 GMT", headers.get("testDate"));, +  }, +, +  @Test public void addDateNull() {, +    try {, +      new Headers.Builder(), +          .add("testDate", (Date) null), +          .build();, +      fail();, +    } catch (NullPointerException expected) {, +      assertEquals("value for name testDate == null", expected.getMessage());, +    }, +  }, +, +  @Test public void setDate() {, +    Date expected = new Date(1000);, +    Headers headers = new Headers.Builder(), +        .add("testDate", new Date(0)), +        .set("testDate", expected), +        .build();, +    assertEquals("Thu, 01 Jan 1970 00:00:01 GMT", headers.get("testDate"));, +  }, +, +  @Test public void setDateNull() {, +    try {, +      new Headers.Builder(), +          .set("testDate", (Date) null), +          .build();, +      fail();, +    } catch (NullPointerException expected) {, +      assertEquals("value for name testDate == null", expected.getMessage());, +    }, +  }, +++ b/okhttp-tests/src/test/java/okhttp3/HeadersTest.java, +import java.util.Date;, +, +  @Test public void addDate() {, +    Date expected = new Date(0);, +    Headers headers = new Headers.Builder(), +        .add("testDate", expected), +        .build();, +    assertEquals("Thu, 01 Jan 1970 00:00:00 GMT", headers.get("testDate"));, +  }, +, +  @Test public void addDateNull() {, +    try {, +      new Headers.Builder(), +          .add("testDate", (Date) null), +          .build();, +      fail();, +    } catch (NullPointerException expected) {, +      assertEquals("value for name testDate == null", expected.getMessage());, +    }, +  }, +, +  @Test public void setDate() {, +    Date expected = new Date(1000);, +    Headers headers = new Headers.Builder(), +        .add("testDate", new Date(0)), +        .set("testDate", expected), +        .build();, +    assertEquals("Thu, 01 Jan 1970 00:00:01 GMT", headers.get("testDate"));, +  }, +, +  @Test public void setDateNull() {, +    try {, +      new Headers.Builder(), +          .set("testDate", (Date) null), +          .build();, +      fail();, +    } catch (NullPointerException expected) {, +      assertEquals("value for name testDate == null", expected.getMessage());, +    }, +  }, +++ b/okhttp/src/main/java/okhttp3/Headers.java, +     * Add a header with the specified name and formatted Date., +     * Does validation of header names and values., +     */, +    public Builder add(String name, Date value) {, +      if (value == null) throw new NullPointerException("value for name " + name + " == null");, +      add(name, HttpDate.format(value));, +      return this;, +    }, +, +    /**, +     * Set a field with the specified date. If the field is not found, it is added. If the field is, +     * found, the existing values are replaced., +     */, +    public Builder set(String name, Date value) {, +      if (value == null) throw new NullPointerException("value for name " + name + " == null");, +      set(name, HttpDate.format(value));, +      return this;]