[+++ b/okhttp-protocols/src/main/java/com/squareup/okhttp/internal/Platform.java, +      Method setNpnProtocols = null;, +      Method getNpnSelectedProtocol = null;, +        setNpnProtocols = openSslSocketClass.getMethod("setNpnProtocols", byte[].class);, +        getNpnSelectedProtocol = openSslSocketClass.getMethod("getNpnSelectedProtocol");, +, +      return new Android(openSslSocketClass, setUseSessionTickets, setHostname, setNpnProtocols,, +          getNpnSelectedProtocol);, +  /**, +   * Android 2.3 or better. Version 2.3 supports TLS session tickets and server, +   * name indication (SNI). Versions 4.1 supports NPN., +   */, +  private static class Android extends Platform {, +    // Non-null., +    // Non-null on Android 4.1+, +    private final Method setNpnProtocols;, +    private final Method getNpnSelectedProtocol;, +, +    private Android(, +        Class<?> openSslSocketClass, Method setUseSessionTickets, Method setHostname,, +        Method setNpnProtocols, Method getNpnSelectedProtocol) {, +      this.setNpnProtocols = setNpnProtocols;, +      this.getNpnSelectedProtocol = getNpnSelectedProtocol;, +      if (!openSslSocketClass.isInstance(socket)) return;, +      if (setNpnProtocols == null) return;, +      if (!openSslSocketClass.isInstance(socket)) return;, +      if (getNpnSelectedProtocol == null) return null;, +      if (!openSslSocketClass.isInstance(socket)) return null;]