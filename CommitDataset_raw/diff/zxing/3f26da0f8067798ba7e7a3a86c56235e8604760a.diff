[+++ b/android/src/com/google/zxing/client/android/CaptureActivity.java, +      SupplementalInfoRetriever.maybeInvokeRetrieval(supplementTextView,, +                                                     resultHandler.getResult(),, +                                                     handler,, +                                                     historyManager,, +                                                     this);, +++ b/android/src/com/google/zxing/client/android/CaptureActivity.java, +      SupplementalInfoRetriever.maybeInvokeRetrieval(supplementTextView,, +                                                     resultHandler.getResult(),, +                                                     handler,, +                                                     historyManager,, +                                                     this);, +++ b/android/src/com/google/zxing/client/android/history/DBHelper.java, +  private static final int DB_VERSION = 5;, +  static final String DETAILS_COL = "details";, +            TIMESTAMP_COL + " INTEGER, " +, +            DETAILS_COL + " TEXT);");, +++ b/android/src/com/google/zxing/client/android/CaptureActivity.java, +      SupplementalInfoRetriever.maybeInvokeRetrieval(supplementTextView,, +                                                     resultHandler.getResult(),, +                                                     handler,, +                                                     historyManager,, +                                                     this);, +++ b/android/src/com/google/zxing/client/android/history/DBHelper.java, +  private static final int DB_VERSION = 5;, +  static final String DETAILS_COL = "details";, +            TIMESTAMP_COL + " INTEGER, " +, +            DETAILS_COL + " TEXT);");, +++ b/android/src/com/google/zxing/client/android/history/HistoryManager.java, +, +  private static final String[] COLUMNS = {, +      DBHelper.DETAILS_COL,, +, +, +, +, +, +, +      db = helper.getReadableDatabase();, +      cursor = db.query(DBHelper.TABLE_NAME, COLUMNS, null, null, null, null, DBHelper.TIMESTAMP_COL + " DESC");, +, +, +        String text = cursor.getString(0);, +        String format = cursor.getString(2);, +        long timestamp = cursor.getLong(3);, +        Result result = new Result(text, null, null, BarcodeFormat.valueOf(format), timestamp);, +, +        StringBuilder displayResult = new StringBuilder();, +        displayResult.append(display);, +        , +        String details = cursor.getString(4);, +        if (details != null && details.length() > 0) {, +          displayResult.append(" : ").append(details);, +        dialogItems.add(displayResult.toString());, +      }, +, +    ContentValues values = new ContentValues();, +    values.put(DBHelper.TEXT_COL, result.getText());, +    values.put(DBHelper.FORMAT_COL, result.getBarcodeFormat().toString());, +    values.put(DBHelper.DISPLAY_COL, handler.getDisplayContents().toString());, +    values.put(DBHelper.TIMESTAMP_COL, System.currentTimeMillis());, +, +  public void addHistoryItemDetails(String itemID, String itemDetails) {, +, +    // As we're going to do an update only we don't need need to worry, +    // about the preferences; if the item wasn't saved it won't be udpated, +, +    ContentValues values = new ContentValues();, +    values.put(DBHelper.DETAILS_COL, itemDetails);, +, +    SQLiteOpenHelper helper = new DBHelper(activity);, +    SQLiteDatabase db;, +    try {, +      db = helper.getWritableDatabase();, +    } catch (SQLiteException sqle) {, +      Log.w(TAG, "Error while opening database", sqle);, +      return;, +    }, +, +    try {, +      // Update the details for the ID entry into the DB., +      db.update(DBHelper.TABLE_NAME, values, DBHelper.TEXT_COL + "=?", new String[] {itemID});, +    } finally {, +      db.close();, +    }, +  }, +, +                        COLUMNS,, +        for (int col = 0; col < COLUMNS.length; col++) {, +        long timestamp = cursor.getLong(3);, +    return value == null ? "" : value.replace("\"","\"\"");, +++ b/android/src/com/google/zxing/client/android/CaptureActivity.java, +      SupplementalInfoRetriever.maybeInvokeRetrieval(supplementTextView,, +                                                     resultHandler.getResult(),, +                                                     handler,, +                                                     historyManager,, +                                                     this);, +++ b/android/src/com/google/zxing/client/android/history/DBHelper.java, +  private static final int DB_VERSION = 5;, +  static final String DETAILS_COL = "details";]