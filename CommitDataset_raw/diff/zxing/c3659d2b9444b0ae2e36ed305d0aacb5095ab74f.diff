[+++ b/android/src/com/google/zxing/client/android/CaptureActivity.java, +  private CameraManager cameraManager;, +  CameraManager getCameraManager() {, +    return cameraManager;, +  }, +, +    cameraManager = new CameraManager(getApplication());, +, +    viewfinderView = (ViewfinderView) findViewById(R.id.viewfinder_view);, +    viewfinderView.setCameraManager(cameraManager);, +            cameraManager.setManualFramingRect(width, height);, +    cameraManager.closeDriver();, +      cameraManager.openDriver(surfaceHolder);, +        handler = new CaptureActivityHandler(this, decodeFormats, characterSet, cameraManager);, +++ b/android/src/com/google/zxing/client/android/CaptureActivity.java, +  private CameraManager cameraManager;, +  CameraManager getCameraManager() {, +    return cameraManager;, +  }, +, +    cameraManager = new CameraManager(getApplication());, +, +    viewfinderView = (ViewfinderView) findViewById(R.id.viewfinder_view);, +    viewfinderView.setCameraManager(cameraManager);, +            cameraManager.setManualFramingRect(width, height);, +    cameraManager.closeDriver();, +      cameraManager.openDriver(surfaceHolder);, +        handler = new CaptureActivityHandler(this, decodeFormats, characterSet, cameraManager);, +++ b/android/src/com/google/zxing/client/android/CaptureActivityHandler.java, +  private final CameraManager cameraManager;, +  CaptureActivityHandler(CaptureActivity activity,, +                         Collection<BarcodeFormat> decodeFormats,, +                         String characterSet,, +                         CameraManager cameraManager) {, +    this.cameraManager = cameraManager;, +    cameraManager.startPreview();, +          cameraManager.requestAutoFocus(this, R.id.auto_focus);, +        cameraManager.requestPreviewFrame(decodeThread.getHandler(), R.id.decode);, +      cameraManager.requestPreviewFrame(decodeThread.getHandler(), R.id.decode);, +      cameraManager.requestAutoFocus(this, R.id.auto_focus);, +++ b/android/src/com/google/zxing/client/android/CaptureActivity.java, +  private CameraManager cameraManager;, +  CameraManager getCameraManager() {, +    return cameraManager;, +  }, +, +    cameraManager = new CameraManager(getApplication());, +, +    viewfinderView = (ViewfinderView) findViewById(R.id.viewfinder_view);, +    viewfinderView.setCameraManager(cameraManager);, +            cameraManager.setManualFramingRect(width, height);, +    cameraManager.closeDriver();, +      cameraManager.openDriver(surfaceHolder);, +        handler = new CaptureActivityHandler(this, decodeFormats, characterSet, cameraManager);, +++ b/android/src/com/google/zxing/client/android/CaptureActivityHandler.java, +  private final CameraManager cameraManager;, +  CaptureActivityHandler(CaptureActivity activity,, +                         Collection<BarcodeFormat> decodeFormats,, +                         String characterSet,, +                         CameraManager cameraManager) {, +    this.cameraManager = cameraManager;, +    cameraManager.startPreview();, +          cameraManager.requestAutoFocus(this, R.id.auto_focus);, +        cameraManager.requestPreviewFrame(decodeThread.getHandler(), R.id.decode);, +      cameraManager.requestPreviewFrame(decodeThread.getHandler(), R.id.decode);, +      cameraManager.requestAutoFocus(this, R.id.auto_focus);, +++ b/android/src/com/google/zxing/client/android/DecodeHandler.java, +    PlanarYUVLuminanceSource source = activity.getCameraManager().buildLuminanceSource(data, width, height);, +++ b/android/src/com/google/zxing/client/android/CaptureActivity.java, +  private CameraManager cameraManager;, +  CameraManager getCameraManager() {, +    return cameraManager;, +  }, +, +    cameraManager = new CameraManager(getApplication());, +, +    viewfinderView = (ViewfinderView) findViewById(R.id.viewfinder_view);, +    viewfinderView.setCameraManager(cameraManager);, +            cameraManager.setManualFramingRect(width, height);, +    cameraManager.closeDriver();, +      cameraManager.openDriver(surfaceHolder);, +        handler = new CaptureActivityHandler(this, decodeFormats, characterSet, cameraManager);, +++ b/android/src/com/google/zxing/client/android/CaptureActivityHandler.java, +  private final CameraManager cameraManager;, +  CaptureActivityHandler(CaptureActivity activity,, +                         Collection<BarcodeFormat> decodeFormats,, +                         String characterSet,, +                         CameraManager cameraManager) {, +    this.cameraManager = cameraManager;, +    cameraManager.startPreview();, +          cameraManager.requestAutoFocus(this, R.id.auto_focus);, +        cameraManager.requestPreviewFrame(decodeThread.getHandler(), R.id.decode);, +      cameraManager.requestPreviewFrame(decodeThread.getHandler(), R.id.decode);, +      cameraManager.requestAutoFocus(this, R.id.auto_focus);, +++ b/android/src/com/google/zxing/client/android/DecodeHandler.java, +    PlanarYUVLuminanceSource source = activity.getCameraManager().buildLuminanceSource(data, width, height);, +++ b/android/src/com/google/zxing/client/android/ViewfinderView.java, +  private CameraManager cameraManager;, +  public void setCameraManager(CameraManager cameraManager) {, +    this.cameraManager = cameraManager;]