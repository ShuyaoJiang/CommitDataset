[+++ b/android/src/com/google/zxing/client/android/history/HistoryManager.java, +import java.text.DateFormat;, +import java.util.Date;, +  private static final String[] EXPORT_COL_PROJECTION = {, +      DBHelper.TEXT_COL,, +      DBHelper.DISPLAY_COL,, +      DBHelper.FORMAT_COL,, +      DBHelper.TIMESTAMP_COL,, +  };, +  private static final DateFormat EXPORT_DATE_TIME_FORMAT = DateFormat.getDateTimeInstance();, +          CharSequence history = buildHistory();, +          intent.setType("text/csv");, +  /**, +   * <p>Builds a text representation of the scanning history. Each scan is encoded on one, +   * line, terminated by a line break (\n). The values in each line are comma-separated,, +   * and double-quoted. Double-quotes within values are escaped with a sequence of two, +   * double-quotes. The fields output are:</p>, +   *, +   * <ul>, +   *  <li>Raw text</li>, +   *  <li>Display text</li>, +   *  <li>Format (e.g. QR_CODE)</li>, +   *  <li>Timestamp</li>, +   *  <li>Formatted version of timestamp</li>, +   * </ul>, +   */, +  private CharSequence buildHistory() {, +    StringBuilder historyText = new StringBuilder(1000);, +                        EXPORT_COL_PROJECTION,, +        for (int col = 0; col < EXPORT_COL_PROJECTION.length; col++) {, +          historyText.append('"').append(massageHistoryField(cursor.getString(col)));, +        }, +        // Add timestamp again, formatted, +        long timestamp = cursor.getLong(EXPORT_COL_PROJECTION.length - 1);, +        historyText.append('"').append(massageHistoryField(EXPORT_DATE_TIME_FORMAT.format(new Date(timestamp)))), +            .append('"').append('\n');, +    return historyText;, +  }, +, +  private static String massageHistoryField(String value) {, +    return value.replace("\"","\"\"");]