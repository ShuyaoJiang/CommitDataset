[+++ b/core/src/com/google/zxing/qrcode/encoder/Encoder.java, +    int numInputBits = dataBits.getSize();, +    initQRCode(numInputBits, ecLevel, mode, qrCode);, +   * Initialize "qrCode" according to "numInputBits", "ecLevel", and "mode". On success,, +  private static void initQRCode(int numInputBits, ErrorCorrectionLevel ecLevel, Mode mode,, +      // (precisely 4 + 16 bits) at most., +      if (numDataBytes >= getTotalInputBytes(numInputBits, version, mode)) {, +  private static int getTotalInputBytes(int numInputBits, Version version, Mode mode) {, +    int modeInfoBits = 4;, +    int charCountBits = mode.getCharacterCountBits(version);, +    int headerBits = modeInfoBits + charCountBits;, +    int totalBits = numInputBits + headerBits;, +      , +    return (totalBits + 7) / 8;, +  }, +]