[+++ b/core/src/com/google/zxing/pdf417/PDF417Writer.java, +  /**, +   * default white space (margin) around the code, +   */, +  static final int WHITE_SPACE = 30;, +, +    int margin = WHITE_SPACE;, +      if (hints.containsKey(EncodeHintType.MARGIN)) {, +        margin = ((Number) hints.get(EncodeHintType.MARGIN)).intValue();, +      }, +    return bitMatrixFromEncoder(encoder, contents, width, height, margin);, +                                                int height,, +                                                int margin) throws WriterException {, +      return bitMatrixFrombitArray(scaledMatrix, margin);, +    return bitMatrixFrombitArray(originalScale, margin);, +   * @param margin border around the barcode, +  private static BitMatrix bitMatrixFrombitArray(byte[][] input, int margin) {, +    BitMatrix output = new BitMatrix(input[0].length + 2 * margin, input.length + 2 * margin);, +    for (int y = 0, yOutput = output.getHeight() - margin - 1; y < input.length; y++, yOutput--) {, +          output.set(x + margin, yOutput);, +++ b/core/src/com/google/zxing/pdf417/PDF417Writer.java, +  /**, +   * default white space (margin) around the code, +   */, +  static final int WHITE_SPACE = 30;, +, +    int margin = WHITE_SPACE;, +      if (hints.containsKey(EncodeHintType.MARGIN)) {, +        margin = ((Number) hints.get(EncodeHintType.MARGIN)).intValue();, +      }, +    return bitMatrixFromEncoder(encoder, contents, width, height, margin);, +                                                int height,, +                                                int margin) throws WriterException {, +      return bitMatrixFrombitArray(scaledMatrix, margin);, +    return bitMatrixFrombitArray(originalScale, margin);, +   * @param margin border around the barcode, +  private static BitMatrix bitMatrixFrombitArray(byte[][] input, int margin) {, +    BitMatrix output = new BitMatrix(input[0].length + 2 * margin, input.length + 2 * margin);, +    for (int y = 0, yOutput = output.getHeight() - margin - 1; y < input.length; y++, yOutput--) {, +          output.set(x + margin, yOutput);, +++ b/core/src/com/google/zxing/pdf417/encoder/BarcodeMatrix.java, +    matrix = new BarcodeRow[height];, +    this.height = height;, +    this.currentRow = -1;]