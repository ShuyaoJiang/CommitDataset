[+++ b/javame/src/com/google/zxing/client/j2me/AdvancedMultimediaManager.java, +import javax.microedition.amms.control.camera.FlashControl;, +import javax.microedition.media.Control;, +  private static final int DESIRED_FLASH = FlashControl.AUTO;, +    FocusControl focusControl =, +        (FocusControl) getControl(player, "javax.microedition.amms.control.camera.FocusControl");, +    ZoomControl zoomControl = (ZoomControl) getControl(player, "javax.microedition.amms.control.camera.ZoomControl");, +        (ExposureControl) getControl(player, "javax.microedition.amms.control.camera.ExposureControl");, +  public void setFlash(Controllable player) {, +    FlashControl flashControl =, +        (FlashControl) getControl(player, "javax.microedition.amms.control.camera.FlashControl");, +    if (flashControl != null) {, +      int[] supportedFlash = flashControl.getSupportedModes();, +      if (supportedFlash != null && supportedFlash.length > 0) {, +        for (int i = 0; i < supportedFlash.length; i++) {, +          if (supportedFlash[i] == DESIRED_FLASH) {, +            try {, +              flashControl.setMode(DESIRED_FLASH);, +            } catch (IllegalArgumentException iae) {, +              // continue, +            }, +            break;, +          }, +        }, +      }, +    }, +  }, +, +  private static Control getControl(Controllable player, String fullName) {, +    Control control = player.getControl(fullName);, +    if (control == null) {, +      String shortName = fullName.substring(fullName.lastIndexOf('.') + 1);, +      control = player.getControl(shortName);, +    }, +    return control;, +  }, +, +++ b/javame/src/com/google/zxing/client/j2me/AdvancedMultimediaManager.java, +import javax.microedition.amms.control.camera.FlashControl;, +import javax.microedition.media.Control;, +  private static final int DESIRED_FLASH = FlashControl.AUTO;, +    FocusControl focusControl =, +        (FocusControl) getControl(player, "javax.microedition.amms.control.camera.FocusControl");, +    ZoomControl zoomControl = (ZoomControl) getControl(player, "javax.microedition.amms.control.camera.ZoomControl");, +        (ExposureControl) getControl(player, "javax.microedition.amms.control.camera.ExposureControl");, +  public void setFlash(Controllable player) {, +    FlashControl flashControl =, +        (FlashControl) getControl(player, "javax.microedition.amms.control.camera.FlashControl");, +    if (flashControl != null) {, +      int[] supportedFlash = flashControl.getSupportedModes();, +      if (supportedFlash != null && supportedFlash.length > 0) {, +        for (int i = 0; i < supportedFlash.length; i++) {, +          if (supportedFlash[i] == DESIRED_FLASH) {, +            try {, +              flashControl.setMode(DESIRED_FLASH);, +            } catch (IllegalArgumentException iae) {, +              // continue, +            }, +            break;, +          }, +        }, +      }, +    }, +  }, +, +  private static Control getControl(Controllable player, String fullName) {, +    Control control = player.getControl(fullName);, +    if (control == null) {, +      String shortName = fullName.substring(fullName.lastIndexOf('.') + 1);, +      control = player.getControl(shortName);, +    }, +    return control;, +  }, +, +++ b/javame/src/com/google/zxing/client/j2me/DefaultMultimediaManager.java, +  public void setFlash(Controllable player) {, +  }, +, +++ b/javame/src/com/google/zxing/client/j2me/AdvancedMultimediaManager.java, +import javax.microedition.amms.control.camera.FlashControl;, +import javax.microedition.media.Control;, +  private static final int DESIRED_FLASH = FlashControl.AUTO;, +    FocusControl focusControl =, +        (FocusControl) getControl(player, "javax.microedition.amms.control.camera.FocusControl");, +    ZoomControl zoomControl = (ZoomControl) getControl(player, "javax.microedition.amms.control.camera.ZoomControl");, +        (ExposureControl) getControl(player, "javax.microedition.amms.control.camera.ExposureControl");, +  public void setFlash(Controllable player) {, +    FlashControl flashControl =, +        (FlashControl) getControl(player, "javax.microedition.amms.control.camera.FlashControl");, +    if (flashControl != null) {, +      int[] supportedFlash = flashControl.getSupportedModes();, +      if (supportedFlash != null && supportedFlash.length > 0) {, +        for (int i = 0; i < supportedFlash.length; i++) {, +          if (supportedFlash[i] == DESIRED_FLASH) {, +            try {, +              flashControl.setMode(DESIRED_FLASH);, +            } catch (IllegalArgumentException iae) {, +              // continue, +            }, +            break;]