[+++ b/zxingorg/src/main/java/com/google/zxing/web/DecodeServlet.java, +import java.util.Locale;, +import java.util.ResourceBundle;, +      errorResponse(request, response, "badurl");, +        errorResponse(request, response, "badurl");, +      errorResponse(request, response, "badurl");, +        errorResponse(request, response, "badurl");, +      errorResponse(request, response, "badurl");, +      errorResponse(request, response, "badurl");, +      errorResponse(request, response, "badurl");, +      errorResponse(request, response, "badurl");, +          errorResponse(request, response, "badurl");, +          errorResponse(request, response, "badimage");, +      errorResponse(request, response, "badurl");, +    Collection<Part> parts;, +    try {, +      parts = request.getParts();, +    } catch (IllegalStateException ise) {, +      log.info("File upload was too large or invalid");, +      errorResponse(request, response, "badimage");, +      return;, +    }, +      errorResponse(request, response, "badimage");, +                                    HttpServletRequest request,, +      errorResponse(request, response, "badimage");, +      errorResponse(request, response, "badimage");, +      errorResponse(request, response, "badimage");, +                                   HttpServletRequest request,, +        handleException(savedException, request, response);, +  private static void handleException(ReaderException re,, +                                      HttpServletRequest request,, +                                      HttpServletResponse response), +      throws IOException, ServletException {, +      errorResponse(request, response, "notfound");, +      errorResponse(request, response, "format");, +      errorResponse(request, response, "format");, +      errorResponse(request, response, "notfound");, +  private static void errorResponse(HttpServletRequest request,, +                                    HttpServletResponse response,, +                                    String key) throws ServletException, IOException {, +    Locale locale = request.getLocale();, +    if (locale == null) {, +      locale = Locale.ENGLISH;, +    }, +    ResourceBundle bundle = ResourceBundle.getBundle("Strings", locale);, +    String title = bundle.getString("response.error." + key + ".title");, +    String text = bundle.getString("response.error." + key + ".text");, +    request.setAttribute("title", title);, +    request.setAttribute("text", text);, +    request.getRequestDispatcher("response.jspx").forward(request, response);, +  }, +, +++ b/zxingorg/src/main/java/com/google/zxing/web/DecodeServlet.java, +import java.util.Locale;, +import java.util.ResourceBundle;, +      errorResponse(request, response, "badurl");, +        errorResponse(request, response, "badurl");, +      errorResponse(request, response, "badurl");, +        errorResponse(request, response, "badurl");, +      errorResponse(request, response, "badurl");, +      errorResponse(request, response, "badurl");, +      errorResponse(request, response, "badurl");, +      errorResponse(request, response, "badurl");, +          errorResponse(request, response, "badurl");, +          errorResponse(request, response, "badimage");, +      errorResponse(request, response, "badurl");, +    Collection<Part> parts;, +    try {, +      parts = request.getParts();, +    } catch (IllegalStateException ise) {, +      log.info("File upload was too large or invalid");, +      errorResponse(request, response, "badimage");, +      return;, +    }, +      errorResponse(request, response, "badimage");, +                                    HttpServletRequest request,, +      errorResponse(request, response, "badimage");, +      errorResponse(request, response, "badimage");, +      errorResponse(request, response, "badimage");, +                                   HttpServletRequest request,, +        handleException(savedException, request, response);, +  private static void handleException(ReaderException re,, +                                      HttpServletRequest request,, +                                      HttpServletResponse response), +      throws IOException, ServletException {, +      errorResponse(request, response, "notfound");, +      errorResponse(request, response, "format");, +      errorResponse(request, response, "format");, +      errorResponse(request, response, "notfound");, +  private static void errorResponse(HttpServletRequest request,, +                                    HttpServletResponse response,, +                                    String key) throws ServletException, IOException {, +    Locale locale = request.getLocale();, +    if (locale == null) {, +      locale = Locale.ENGLISH;, +    }, +    ResourceBundle bundle = ResourceBundle.getBundle("Strings", locale);, +    String title = bundle.getString("response.error." + key + ".title");, +    String text = bundle.getString("response.error." + key + ".text");, +    request.setAttribute("title", title);]