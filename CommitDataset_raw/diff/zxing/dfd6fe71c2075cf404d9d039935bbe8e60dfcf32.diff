[+++ b/android/src/com/google/zxing/client/android/encode/ContactEncoder.java, +import java.util.List;, +  abstract String[] encode(List<String> names,, +                           List<String> addresses,, +                           List<String> phones,, +                           List<String> phoneTypes,, +                           List<String> emails,, +                           List<String> urls,, +  static void append(StringBuilder newContents,, +      newContents.append(prefix).append(fieldFormatter.format(trimmed, 0)).append(terminator);, +  static void appendUpToUnique(StringBuilder newContents,, +                               List<String> values,, +                               Formatter displayFormatter,, +    for (int i = 0; i < values.size(); i++) {, +      String value = values.get(i);, +        newContents.append(prefix).append(fieldFormatter.format(trimmed, i)).append(terminator);, +        CharSequence display = displayFormatter == null ? trimmed : displayFormatter.format(trimmed, i);, +++ b/android/src/com/google/zxing/client/android/encode/ContactEncoder.java, +import java.util.List;, +  abstract String[] encode(List<String> names,, +                           List<String> addresses,, +                           List<String> phones,, +                           List<String> phoneTypes,, +                           List<String> emails,, +                           List<String> urls,, +  static void append(StringBuilder newContents,, +      newContents.append(prefix).append(fieldFormatter.format(trimmed, 0)).append(terminator);, +  static void appendUpToUnique(StringBuilder newContents,, +                               List<String> values,, +                               Formatter displayFormatter,, +    for (int i = 0; i < values.size(); i++) {, +      String value = values.get(i);, +        newContents.append(prefix).append(fieldFormatter.format(trimmed, i)).append(terminator);, +        CharSequence display = displayFormatter == null ? trimmed : displayFormatter.format(trimmed, i);, +++ b/android/src/com/google/zxing/client/android/encode/Formatter.java, +  /**, +   * @param value value to format, +   * @param index index of value in a list of values to be formatted, +   * @return formatted value, +   */, +  CharSequence format(CharSequence value, int index);, +++ b/android/src/com/google/zxing/client/android/encode/ContactEncoder.java, +import java.util.List;, +  abstract String[] encode(List<String> names,, +                           List<String> addresses,, +                           List<String> phones,, +                           List<String> phoneTypes,, +                           List<String> emails,, +                           List<String> urls,, +  static void append(StringBuilder newContents,, +      newContents.append(prefix).append(fieldFormatter.format(trimmed, 0)).append(terminator);, +  static void appendUpToUnique(StringBuilder newContents,, +                               List<String> values,, +                               Formatter displayFormatter,, +    for (int i = 0; i < values.size(); i++) {, +      String value = values.get(i);, +        newContents.append(prefix).append(fieldFormatter.format(trimmed, i)).append(terminator);, +        CharSequence display = displayFormatter == null ? trimmed : displayFormatter.format(trimmed, i);, +++ b/android/src/com/google/zxing/client/android/encode/Formatter.java, +  /**, +   * @param value value to format, +   * @param index index of value in a list of values to be formatted, +   * @return formatted value, +   */, +  CharSequence format(CharSequence value, int index);, +++ b/android/src/com/google/zxing/client/android/encode/MECARDContactEncoder.java, +import java.util.List;, +  public String[] encode(List<String> names,, +                         List<String> addresses,, +                         List<String> phones,, +                         List<String> phoneTypes,, +                         List<String> emails,, +                         List<String> urls,, +, +, +    Formatter fieldFormatter = new MECARDFieldFormatter();, +, +    appendUpToUnique(newContents, newDisplayContents, "N", names, 1, new, +                     MECARDNameDisplayFormatter(), fieldFormatter, TERMINATOR);, +, +    append(newContents, newDisplayContents, "ORG", organization, fieldFormatter, TERMINATOR);, +, +    appendUpToUnique(newContents, newDisplayContents, "ADR", addresses, 1, null, fieldFormatter, TERMINATOR);, +, +    appendUpToUnique(newContents, newDisplayContents, "TEL", phones, Integer.MAX_VALUE,, +                     new MECARDTelDisplayFormatter(), fieldFormatter, TERMINATOR);, +, +    appendUpToUnique(newContents, newDisplayContents, "EMAIL", emails, Integer.MAX_VALUE, null,, +                     fieldFormatter, TERMINATOR);, +, +    appendUpToUnique(newContents, newDisplayContents, "URL", urls, Integer.MAX_VALUE, null,, +                     fieldFormatter, TERMINATOR);, +, +    append(newContents, newDisplayContents, "NOTE", note, fieldFormatter, TERMINATOR);, +, +, +  private static class MECARDFieldFormatter implements Formatter {, +    private static final Pattern RESERVED_MECARD_CHARS = Pattern.compile("([\\\\:;])");, +    private static final Pattern NEWLINE = Pattern.compile("\\n");, +    @Override]