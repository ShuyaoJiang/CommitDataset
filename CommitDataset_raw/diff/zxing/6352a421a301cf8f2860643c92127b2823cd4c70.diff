[+++ b/core/src/com/google/zxing/oned/CodaBarReader.java, +    int[] theCounters = counters;, +, +    int maxBar = 0;, +    int minBar = Integer.MAX_VALUE;, +    for (int j = position; j < end; j += 2) {, +      int currentCounter = theCounters[j];, +      if (currentCounter < minBar) {, +        minBar = currentCounter;, +      if (currentCounter > maxBar) {, +        maxBar = currentCounter;, +    int thresholdBar = (minBar + maxBar) / 2;, +, +    int maxSpace = 0;, +    int minSpace = Integer.MAX_VALUE;, +    for (int j = position + 1; j < end; j += 2) {, +      int currentCounter = theCounters[j];, +      if (currentCounter < minSpace) {, +        minSpace = currentCounter;, +      if (currentCounter > maxSpace) {, +        maxSpace = currentCounter;, +      }, +    }, +    int thresholdSpace = (minSpace + maxSpace) / 2;, +      int threshold = (i & 1) == 0 ? thresholdBar : thresholdSpace;, +      if (theCounters[position + i] > threshold) {]