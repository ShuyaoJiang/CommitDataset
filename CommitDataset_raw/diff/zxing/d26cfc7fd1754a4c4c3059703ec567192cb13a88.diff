[+++ b/cpp/magick/src/MagickBitmapSource.cpp, +    // 0x200 = 1<<9, half an lsb of the result to force rounding, +    row[x] = (unsigned char)((306 * ((int)p->red >> 8) + 601 * ((int)p->green >> 8) +, +        117 * ((int)p->blue >> 8) + 0x200) >> 10);, +      *m = (unsigned char)((306 * ((int)p->red >> 8) + 601 * ((int)p->green >> 8) +, +          117 * ((int)p->blue >> 8) + 0x200) >> 10);]