[+++ b/core/src/com/google/zxing/qrcode/encoder/ByteArray.java, +  public void set(int index, int value) {, +    bytes[index] = (byte) value;, +  }, +, +++ b/core/src/com/google/zxing/qrcode/encoder/ByteArray.java, +  public void set(int index, int value) {, +    bytes[index] = (byte) value;, +  }, +, +++ b/core/src/com/google/zxing/qrcode/encoder/Encoder.java, +import com.google.zxing.common.reedsolomon.ReedSolomonEncoder;, +import com.google.zxing.common.reedsolomon.GF256;, +import java.util.Vector;, +      int num_rs_blocks, int block_id, int[] num_data_bytes_in_block,, +      int[] num_ec_bytes_in_block) {, +      num_data_bytes_in_block[0] = num_data_bytes_in_group1;, +      num_ec_bytes_in_block[0] = num_ec_bytes_in_group1;, +      num_data_bytes_in_block[0] = num_data_bytes_in_group2;, +      num_ec_bytes_in_block[0] = num_ec_bytes_in_group2;, +    Vector blocks = new Vector(num_rs_blocks);, +      int[] num_data_bytes_in_block = new int[1];, +      int[] num_ec_bytes_in_block = new int[1];, +      data_bytes.set(bits, data_bytes_offset, num_data_bytes_in_block[0]);, +      GenerateECBytes(data_bytes, num_ec_bytes_in_block[0], ec_bytes);, +      data_bytes_offset += num_data_bytes_in_block[0];, +        final ByteArray data_bytes = ((BlockPair) blocks.elementAt(j)).getDataBytes();, +        final ByteArray ec_bytes = ((BlockPair) blocks.elementAt(j)).getErrorCorrectionBytes();, +  private static void GenerateECBytes(ByteArray data_bytes, int num_ec_bytes_in_block, ByteArray ec_bytes) {, +    int numDataBytes = data_bytes.size();, +    int[] toEncode = new int[numDataBytes + ec_bytes.size()];, +    for (int i = 0; i < numDataBytes; i++) {, +      toEncode[i] = data_bytes.at(i);, +    }, +    new ReedSolomonEncoder(GF256.QR_CODE_FIELD).encode(toEncode, num_ec_bytes_in_block);, +    for (int i = 0; i < ec_bytes.size(); i++) {, +      ec_bytes.set(i, toEncode[numDataBytes + i]);, +    }, +  }, +]