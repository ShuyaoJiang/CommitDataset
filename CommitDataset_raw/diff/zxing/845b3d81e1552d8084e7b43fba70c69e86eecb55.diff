[+++ b/core/test/src/com/google/zxing/BufferedImageLuminanceSource.java, +    int[] buffer = new int[width];, +      image.getRGB(left, y, width, 1, buffer, 0, sourceWidth);, +      boolean rowChanged = false;, +      for (int x = 0; x < width; x++) {, +        if ((buffer[x] & 0xFF000000) == 0) {, +          buffer[x] = 0xFFFFFFFF; // = white, +          rowChanged = true;, +      if (rowChanged) {, +        image.setRGB(left, y, width, 1, buffer, 0, sourceWidth);, +      }, +++ b/core/test/src/com/google/zxing/BufferedImageLuminanceSource.java, +    int[] buffer = new int[width];, +      image.getRGB(left, y, width, 1, buffer, 0, sourceWidth);, +      boolean rowChanged = false;, +      for (int x = 0; x < width; x++) {, +        if ((buffer[x] & 0xFF000000) == 0) {, +          buffer[x] = 0xFFFFFFFF; // = white, +          rowChanged = true;, +      if (rowChanged) {, +        image.setRGB(left, y, width, 1, buffer, 0, sourceWidth);, +      }, +++ b/javase/src/com/google/zxing/client/j2se/BufferedImageLuminanceSource.java, +    int[] buffer = new int[width];, +      image.getRGB(left, y, width, 1, buffer, 0, sourceWidth);, +      boolean rowChanged = false;, +      for (int x = 0; x < width; x++) {, +        if ((buffer[x] & 0xFF000000) == 0) {, +          buffer[x] = 0xFFFFFFFF; // = white, +          rowChanged = true;, +      if (rowChanged) {, +        image.setRGB(left, y, width, 1, buffer, 0, sourceWidth);, +      }]