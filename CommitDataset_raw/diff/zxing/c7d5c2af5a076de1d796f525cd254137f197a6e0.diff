[+++ b/android/src/com/google/zxing/client/android/Contents.java, +++ b/android/src/com/google/zxing/client/android/Contents.java, +++ b/android/src/com/google/zxing/client/android/encode/QRCodeEncoder.java, +    String formatString = intent.getStringExtra(Intents.Encode.FORMAT);, +    try {, +      format = BarcodeFormat.valueOf(formatString);, +    } catch (IllegalArgumentException iae) {, +      // Ignore it then, +      format = null;, +      formatString = null;, +    }, +    if (format == null || BarcodeFormat.QR_CODE.equals(format)) {, +++ b/android/src/com/google/zxing/client/android/Contents.java, +++ b/android/src/com/google/zxing/client/android/encode/QRCodeEncoder.java, +    String formatString = intent.getStringExtra(Intents.Encode.FORMAT);, +    try {, +      format = BarcodeFormat.valueOf(formatString);, +    } catch (IllegalArgumentException iae) {, +      // Ignore it then, +      format = null;, +      formatString = null;, +    }, +    if (format == null || BarcodeFormat.QR_CODE.equals(format)) {, +++ b/android/src/com/google/zxing/client/android/share/ShareActivity.java, +import com.google.zxing.BarcodeFormat;, +        intent.putExtra(Intents.Encode.FORMAT, BarcodeFormat.QR_CODE.toString());, +    intent.putExtra(Intents.Encode.FORMAT, BarcodeFormat.QR_CODE.toString());, +      intent.putExtra(Intents.Encode.FORMAT, BarcodeFormat.QR_CODE.toString());, +++ b/android/src/com/google/zxing/client/android/Contents.java, +++ b/android/src/com/google/zxing/client/android/encode/QRCodeEncoder.java, +    String formatString = intent.getStringExtra(Intents.Encode.FORMAT);, +    try {, +      format = BarcodeFormat.valueOf(formatString);, +    } catch (IllegalArgumentException iae) {, +      // Ignore it then, +      format = null;, +      formatString = null;, +    }, +    if (format == null || BarcodeFormat.QR_CODE.equals(format)) {, +++ b/android/src/com/google/zxing/client/android/share/ShareActivity.java, +import com.google.zxing.BarcodeFormat;, +        intent.putExtra(Intents.Encode.FORMAT, BarcodeFormat.QR_CODE.toString());, +    intent.putExtra(Intents.Encode.FORMAT, BarcodeFormat.QR_CODE.toString());, +      intent.putExtra(Intents.Encode.FORMAT, BarcodeFormat.QR_CODE.toString());, +++ b/core/src/com/google/zxing/BarcodeFormat.java, +    if (name == null || name.length() == 0) {, +      throw new IllegalArgumentException();, +    }]