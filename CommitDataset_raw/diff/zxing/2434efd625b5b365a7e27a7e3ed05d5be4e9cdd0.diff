[+++ b/core/src/main/java/com/google/zxing/qrcode/encoder/Encoder.java, +    boolean hasEncodingHint = hints != null && hints.containsKey(EncodeHintType.CHARACTER_SET);, +    if (hasEncodingHint) {, +    if (mode == Mode.BYTE && (hasEncodingHint || !DEFAULT_BYTE_MODE_ENCODING.equals(encoding))) {]