[+++ b/zxingorg/src/main/java/com/google/zxing/web/ChartServlet.java, +import java.util.Locale;, + * Google Chart Server's QR code encoder</a>, which is now deprecated. See, + * <a href="https://github.com/zxing/zxing/wiki/Chart-Server-Parameters">the chart server, + * parameters wiki page</a> for docs., +@WebServlet({"/w/chart", "/w/chart.png", "/w/chart.gif", "/w/chart.jpg", "/w/chart.jpeg"}), +  private static void doEncode(HttpServletRequest request, HttpServletResponse response, boolean isPost), +    String requestURI = request.getRequestURI();, +    int lastDot = requestURI.lastIndexOf('.');, +    String imageFormat;, +    if (lastDot > 0) {, +      imageFormat = requestURI.substring(lastDot + 1).toUpperCase(Locale.ROOT);, +      // Special-case jpg -> JPEG, +      if ("JPG".equals(imageFormat)) {, +        imageFormat = "JPEG";, +      }, +    } else {, +      imageFormat = "PNG";, +    }, +    , +    String contentType;, +    switch (imageFormat) {, +      case "PNG":, +        contentType = "image/png";, +        break;, +      case "JPEG":, +        contentType = "image/jpeg";, +        break;, +      case "GIF":, +        contentType = "image/gif";, +        break;, +      default:, +        throw new IllegalArgumentException("Unknown format " + imageFormat);, +    }, +    , +    MatrixToImageWriter.writeToStream(matrix, imageFormat, pngOut);, +    response.setContentType(contentType);]