[+++ b/cpp/core/src/zxing/common/GlobalHistogramBinarizer.cpp, +    int blackPoint = estimate(histogram);, +  int blackPoint = estimate(histogram);, +      if (row[x] < blackPoint), +  return bestValley << LUMINANCE_SHIFT;, +++ b/cpp/core/src/zxing/common/GlobalHistogramBinarizer.cpp, +    int blackPoint = estimate(histogram);, +  int blackPoint = estimate(histogram);, +      if (row[x] < blackPoint), +  return bestValley << LUMINANCE_SHIFT;, +++ b/cpp/core/src/zxing/common/HybridBinarizer.cpp, +++ b/cpp/core/src/zxing/common/GlobalHistogramBinarizer.cpp, +    int blackPoint = estimate(histogram);, +  int blackPoint = estimate(histogram);, +      if (row[x] < blackPoint), +  return bestValley << LUMINANCE_SHIFT;, +++ b/cpp/core/src/zxing/common/HybridBinarizer.cpp, +++ b/cpp/core/src/zxing/common/reedsolomon/ReedSolomonDecoder.cpp, +  bool dataMatrix = (&field == &GF256::DATA_MATRIX_FIELD);, +    int eval = poly->evaluateAt(field.exp(dataMatrix ? i + 1 : i));, +  ArrayRef<int> errorMagitudes = findErrorMagnitudes(sigmaOmega[1], errorLocations, dataMatrix);, +ArrayRef<int> ReedSolomonDecoder::findErrorMagnitudes(Ref<GF256Poly> errorEvaluator, ArrayRef<int> errorLocations, bool dataMatrix) {, +, +    if (dataMatrix) {, +      result[i] = field.multiply(result[i], xiInverse);, +	}, +++ b/cpp/core/src/zxing/common/GlobalHistogramBinarizer.cpp, +    int blackPoint = estimate(histogram);, +  int blackPoint = estimate(histogram);, +      if (row[x] < blackPoint), +  return bestValley << LUMINANCE_SHIFT;, +++ b/cpp/core/src/zxing/common/HybridBinarizer.cpp, +++ b/cpp/core/src/zxing/common/reedsolomon/ReedSolomonDecoder.cpp, +  bool dataMatrix = (&field == &GF256::DATA_MATRIX_FIELD);, +    int eval = poly->evaluateAt(field.exp(dataMatrix ? i + 1 : i));, +  ArrayRef<int> errorMagitudes = findErrorMagnitudes(sigmaOmega[1], errorLocations, dataMatrix);, +ArrayRef<int> ReedSolomonDecoder::findErrorMagnitudes(Ref<GF256Poly> errorEvaluator, ArrayRef<int> errorLocations, bool dataMatrix) {, +, +    if (dataMatrix) {, +      result[i] = field.multiply(result[i], xiInverse);, +	}, +++ b/cpp/core/src/zxing/common/reedsolomon/ReedSolomonDecoder.h, +  ArrayRef<int> findErrorMagnitudes(Ref<GF256Poly> errorEvaluator, ArrayRef<int> errorLocations, bool dataMatrix);, +++ b/cpp/core/src/zxing/common/GlobalHistogramBinarizer.cpp, +    int blackPoint = estimate(histogram);, +  int blackPoint = estimate(histogram);, +      if (row[x] < blackPoint), +  return bestValley << LUMINANCE_SHIFT;, +++ b/cpp/core/src/zxing/common/HybridBinarizer.cpp, +++ b/cpp/core/src/zxing/common/reedsolomon/ReedSolomonDecoder.cpp, +  bool dataMatrix = (&field == &GF256::DATA_MATRIX_FIELD);, +    int eval = poly->evaluateAt(field.exp(dataMatrix ? i + 1 : i));, +  ArrayRef<int> errorMagitudes = findErrorMagnitudes(sigmaOmega[1], errorLocations, dataMatrix);, +ArrayRef<int> ReedSolomonDecoder::findErrorMagnitudes(Ref<GF256Poly> errorEvaluator, ArrayRef<int> errorLocations, bool dataMatrix) {, +, +    if (dataMatrix) {, +      result[i] = field.multiply(result[i], xiInverse);, +	}, +++ b/cpp/core/src/zxing/common/reedsolomon/ReedSolomonDecoder.h, +  ArrayRef<int> findErrorMagnitudes(Ref<GF256Poly> errorEvaluator, ArrayRef<int> errorLocations, bool dataMatrix);, +++ b/cpp/core/tests/src/common/BlackPointEstimatorTest.cpp, +  CPPUNIT_ASSERT_EQUAL((size_t)64, point);]