[+++ /dev/null, +++ /dev/null, +++ b/iphone/ScanTest/Classes/RootViewController.mm, +//, +//  RootViewController.m, +//  ScanTest, +//, +//  Created by David Kavanagh on 5/10/10., +//  Copyright __MyCompanyName__ 2010. All rights reserved., +//, +, +#import "RootViewController.h", +#import "QRCodeReader.h", +, +@interface RootViewController(), +@property (nonatomic,retain) ZXingWidgetController *scanController;, +, +@end, +, +, +@implementation RootViewController, +@synthesize resultsView;, +@synthesize resultsToDisplay;, +@synthesize scanController;, +#pragma mark -, +#pragma mark View lifecycle, +, +- (void)viewDidLoad {, +    [super viewDidLoad];, +	[self setTitle:@"ZXing"];, +  , +  ZXingWidgetController *widController = [[ZXingWidgetController alloc] initWithDelegate:self showCancel:YES OneDMode:NO];, +  QRCodeReader* qrcodeReader = [[QRCodeReader alloc] init];, +  NSSet *readers = [[NSSet alloc ] initWithObjects:qrcodeReader,nil];, +  [qrcodeReader release];, +  widController.readers = readers;, +  [readers release];, +  , +	self.scanController = widController;, +  [widController release];, +	NSBundle *mainBundle = [NSBundle mainBundle];, +	[scanController setSoundToPlay:[[NSURL fileURLWithPath:[mainBundle pathForResource:@"beep-beep" ofType:@"aiff"] isDirectory:NO] retain]];, +   , +}, +, +- (IBAction)scanPressed:(id)sender {, +  //UIImagePickerController *picker = [[UIImagePickerController alloc] init];, +	[self presentModalViewController:scanController, +                          animated:YES];, +//	[self.navigationController pushViewController:scanController animated:true];, +}, +, +/*, +- (void)viewWillAppear:(BOOL)animated {, +    [super viewWillAppear:animated];, +}, +*/, +/*, +- (void)viewDidAppear:(BOOL)animated {, +    [super viewDidAppear:animated];, +}, +*/, +/*, +- (void)viewWillDisappear:(BOOL)animated {, +	[super viewWillDisappear:animated];, +}, +*/, +/*, +- (void)viewDidDisappear:(BOOL)animated {, +	[super viewDidDisappear:animated];, +}, +*/, +, +/*, + // Override to allow orientations other than the default portrait orientation., +- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {, +	// Return YES for supported orientations., +	return (interfaceOrientation == UIInterfaceOrientationPortrait);, +}, + */, +, +#pragma mark Memory management, +, +- (void)scanResult:(NSString *)result {, +	//[self.resultsView setText:result];, +	[self dismissModalViewControllerAnimated:NO];, +  self.resultsToDisplay = result;, +}, +, +- (void)viewWillAppear:(BOOL)animated {, +  if (resultsToDisplay), +  {, +    [resultsView setText:resultsToDisplay];, +    [resultsView setNeedsDisplay];, +  }, +}, +, +- (void)cancelled {, +	[self dismissModalViewControllerAnimated:YES];, +}]