[+++ b/core/src/com/google/zxing/pdf417/encoder/Compaction.java, +/*, + * Copyright 2011 ZXing authors, + *, + * Licensed under the Apache License, Version 2.0 (the "License");, + * you may not use this file except in compliance with the License., + * You may obtain a copy of the License at, + *, + *      http://www.apache.org/licenses/LICENSE-2.0, + *, + * Unless required by applicable law or agreed to in writing, software, + * distributed under the License is distributed on an "AS IS" BASIS,, + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied., + * See the License for the specific language governing permissions and, + * limitations under the License., + */, +, +package com.google.zxing.pdf417.encoder;, +, +public enum Compaction {, +  , +  AUTO,, +  TEXT,, +  BYTE,, +  NUMERIC, +, +}, +++ b/core/src/com/google/zxing/pdf417/encoder/Compaction.java, +/*, + * Copyright 2011 ZXing authors, + *, + * Licensed under the Apache License, Version 2.0 (the "License");, + * you may not use this file except in compliance with the License., + * You may obtain a copy of the License at, + *, + *      http://www.apache.org/licenses/LICENSE-2.0, + *, + * Unless required by applicable law or agreed to in writing, software, + * distributed under the License is distributed on an "AS IS" BASIS,, + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied., + * See the License for the specific language governing permissions and, + * limitations under the License., + */, +, +package com.google.zxing.pdf417.encoder;, +, +public enum Compaction {, +  , +  AUTO,, +  TEXT,, +  BYTE,, +  NUMERIC, +, +}, +++ b/core/src/com/google/zxing/pdf417/encoder/PDF417.java, +  private Compaction compaction;, +    compaction = Compaction.AUTO;, +    String highLevel = PDF417HighLevelEncoder.encodeHighLevel(msg, compaction);, +    int[] dimension = determineDimensions(sourceCodeWords, errorCorrectionCodeWords);, +    if (sourceCodeWords + errorCorrectionCodeWords + 1 > 929) { // +1 for symbol length CW, +    int n = sourceCodeWords + pad + 1;, +   * @param errorCorrectionCodeWords number of error correction code words, +  int[] determineDimensions(int sourceCodeWords, int errorCorrectionCodeWords) throws WriterException {, +     // Handle case when min values were larger than necessary, +     if (dimension == null) {, +       int rows = calculateNumberOfRows(sourceCodeWords, errorCorrectionCodeWords, minCols);, +       if (rows < minRows) {, +         dimension = new int[]{minCols, minRows};, +       }, +     }, +, +, +   * Sets compaction to values stored in {@link Compaction} enum, +  void setCompaction(Compaction compaction) {, +    this.compaction = compaction;, +++ b/core/src/com/google/zxing/pdf417/encoder/Compaction.java, +/*, + * Copyright 2011 ZXing authors, + *, + * Licensed under the Apache License, Version 2.0 (the "License");, + * you may not use this file except in compliance with the License., + * You may obtain a copy of the License at, + *, + *      http://www.apache.org/licenses/LICENSE-2.0, + *, + * Unless required by applicable law or agreed to in writing, software, + * distributed under the License is distributed on an "AS IS" BASIS,, + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied., + * See the License for the specific language governing permissions and, + * limitations under the License., + */, +, +package com.google.zxing.pdf417.encoder;, +, +public enum Compaction {, +  , +  AUTO,, +  TEXT,, +  BYTE,, +  NUMERIC]