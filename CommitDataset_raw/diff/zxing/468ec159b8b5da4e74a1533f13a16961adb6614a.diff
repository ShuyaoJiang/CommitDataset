[+++ b/android/AndroidManifest.xml, +++ b/android/AndroidManifest.xml, +++ b/android/src/com/google/zxing/client/android/wifi/WifiConfigManager.java, +import android.util.Log;, +  private static final String TAG = WifiConfigManager.class.getSimpleName();, +, +  public static void configure(final WifiManager wifiManager, , +                               final String ssid, , +                               final String password, , +                               final String networkTypeString) {, +    Runnable configureRunnable = new Runnable() {, +      public void run() {, +          Log.i(TAG, "Enabling wi-fi...");, +          if (wifiManager.setWifiEnabled(true)) {, +            Log.i(TAG, "Wi-fi enabled");, +          } else {, +            Log.w(TAG, "Wi-fi could not be enabled!");, +            return;, +          // This happens very quickly, but need to wait for it to enable. A little busy wait?, +          int count = 0;, +          while (!wifiManager.isWifiEnabled()) {, +            if (count >= 10) {, +              Log.i(TAG, "Took too long to enable wi-fi, quitting");, +              return;, +            }, +            Log.i(TAG, "Still waiting for wi-fi to enable...");, +            try {, +              Thread.sleep(1000L);, +            } catch (InterruptedException ie) {, +              // continue, +            }, +            count++;, +          }, +        }, +    };, +    new Thread(configureRunnable).start();, +  }, +      Log.i(TAG, "Removing old configuration for network " + config.SSID);, +        Log.i(TAG, "Associating to network " + config.SSID);, +      } else {, +        Log.w(TAG, "Failed to enable network " + config.SSID);, +    } else {, +      Log.w(TAG, "Unable to add network " + config.SSID);]