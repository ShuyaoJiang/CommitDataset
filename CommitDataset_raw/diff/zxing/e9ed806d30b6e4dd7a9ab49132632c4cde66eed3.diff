[+++ b/android-m3/res/values/ids.xml, +  <item type="id" name="preview"/>, +  <item type="id" name="decode"/>, +  <item type="id" name="save"/>, +  <item type="id" name="restart_preview"/>, +  <item type="id" name="quit"/>, +  <item type="id" name="set_decode_all_mode"/>, +  <item type="id" name="set_decode_1D_mode"/>, +  <item type="id" name="set_decode_QR_mode"/>, +  <item type="id" name="decode_started"/>, +  <item type="id" name="decode_succeeded"/>, +  <item type="id" name="decode_failed"/>, +  <item type="id" name="save_succeeded"/>, +  <item type="id" name="save_failed"/>, +++ b/android-m3/res/values/ids.xml, +  <item type="id" name="preview"/>, +  <item type="id" name="decode"/>, +  <item type="id" name="save"/>, +  <item type="id" name="restart_preview"/>, +  <item type="id" name="quit"/>, +  <item type="id" name="set_decode_all_mode"/>, +  <item type="id" name="set_decode_1D_mode"/>, +  <item type="id" name="set_decode_QR_mode"/>, +  <item type="id" name="decode_started"/>, +  <item type="id" name="decode_succeeded"/>, +  <item type="id" name="decode_failed"/>, +  <item type="id" name="save_succeeded"/>, +  <item type="id" name="save_failed"/>, +++ b/android-m3/src/com/google/zxing/client/android/BarcodeReaderCaptureActivity.java, +  private CameraThread cameraThread;, +  private static final int HELP_ID = Menu.FIRST + 1;, +    cameraThread = new CameraThread(this, surfaceView, cameraManager, messageHandler);, +    cameraThread.start();, +    if (cameraThread == null) {, +      cameraThread = new CameraThread(this, surfaceView, cameraManager, messageHandler);, +      cameraThread.start();, +    if (cameraThread != null) {, +      Message quit = Message.obtain(cameraThread.handler, R.id.quit);, +      quit.sendToTarget();, +      cameraThread = null;, +    if (keyCode == KeyEvent.KEYCODE_A) {, +      cameraThread.setDecodeAllMode();, +      Message save = Message.obtain(cameraThread.handler, R.id.save);, +      save.sendToTarget();, +    } else if (keyCode == KeyEvent.KEYCODE_P) {, +      cameraManager.setUsePreviewForDecode(true);, +    } else if (keyCode == KeyEvent.KEYCODE_Q) {, +      cameraThread.setDecodeQRMode();, +    } else if (keyCode == KeyEvent.KEYCODE_S) {, +      cameraManager.setUsePreviewForDecode(false);, +    } else if (keyCode == KeyEvent.KEYCODE_U) {, +      cameraThread.setDecode1DMode();, +    menu.add(0, HELP_ID, R.string.menu_help);, +    Context context = getApplication();, +      case HELP_ID:, +        showAlert(context.getString(R.string.title_help),, +            context.getString(R.string.msg_help),, +            context.getString(R.string.button_ok), null, true, null);, +        break;, +        case R.id.decode_succeeded:, +          int duration = message.arg1;, +    Message restart = Message.obtain(cameraThread.handler, R.id.restart_preview);, +    restart.sendToTarget();, +  private void handleDecode(Result rawResult, int duration) {, +++ b/android-m3/res/values/ids.xml, +  <item type="id" name="preview"/>, +  <item type="id" name="decode"/>, +  <item type="id" name="save"/>, +  <item type="id" name="restart_preview"/>, +  <item type="id" name="quit"/>, +  <item type="id" name="set_decode_all_mode"/>, +  <item type="id" name="set_decode_1D_mode"/>, +  <item type="id" name="set_decode_QR_mode"/>, +  <item type="id" name="decode_started"/>, +  <item type="id" name="decode_succeeded"/>, +  <item type="id" name="decode_failed"/>, +  <item type="id" name="save_succeeded"/>, +  <item type="id" name="save_failed"/>, +++ b/android-m3/src/com/google/zxing/client/android/BarcodeReaderCaptureActivity.java, +  private CameraThread cameraThread;, +  private static final int HELP_ID = Menu.FIRST + 1;, +    cameraThread = new CameraThread(this, surfaceView, cameraManager, messageHandler);, +    cameraThread.start();, +    if (cameraThread == null) {, +      cameraThread = new CameraThread(this, surfaceView, cameraManager, messageHandler);, +      cameraThread.start();, +    if (cameraThread != null) {, +      Message quit = Message.obtain(cameraThread.handler, R.id.quit);, +      quit.sendToTarget();, +      cameraThread = null;, +    if (keyCode == KeyEvent.KEYCODE_A) {, +      cameraThread.setDecodeAllMode();, +      Message save = Message.obtain(cameraThread.handler, R.id.save);, +      save.sendToTarget();, +    } else if (keyCode == KeyEvent.KEYCODE_P) {, +      cameraManager.setUsePreviewForDecode(true);, +    } else if (keyCode == KeyEvent.KEYCODE_Q) {, +      cameraThread.setDecodeQRMode();, +    } else if (keyCode == KeyEvent.KEYCODE_S) {, +      cameraManager.setUsePreviewForDecode(false);]