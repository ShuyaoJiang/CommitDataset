[+++ b/android-integration/src/main/java/com/google/zxing/integration/android/IntentIntegrator.java, +import android.app.Fragment;, +  private final Fragment fragment;, +, +  private final Map<String,Object> moreExtras = new HashMap<String,Object>(3);, +  /**, +   * @param activity {@link Activity} invoking the integration, +   */, +    this.fragment = null;, +    initializeConfiguration();, +  }, +, +  /**, +   * @param fragment {@link Fragment} invoking the integration., +   *  {@link #startActivityForResult(Intent, int)} will be called on the {@link Fragment} instead, +   *  of an {@link Activity}, +   */, +  public IntentIntegrator(Fragment fragment) {, +    this.activity = fragment.getActivity();, +    this.fragment = fragment;, +    initializeConfiguration();, +  }, +, +  private void initializeConfiguration() {, +    if (fragment == null) {, +    } else {, +      fragment.startActivityForResult(intent, code);, +    }, +          if (fragment == null) {, +          } else {, +            fragment.startActivity(intent);, +          }, +    if (fragment == null) {, +    } else {, +      fragment.startActivity(intent);, +    }]