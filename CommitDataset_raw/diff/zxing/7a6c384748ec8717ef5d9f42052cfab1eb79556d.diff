[+++ b/android/src/com/google/zxing/client/android/share/AppPickerActivity.java, +++ b/android/src/com/google/zxing/client/android/share/AppPickerActivity.java, +++ b/android/src/com/google/zxing/client/android/share/LoadPackagesAsyncTask.java, +import android.app.ProgressDialog;, +import android.content.DialogInterface;, +import com.google.zxing.client.android.R;, +  private final AppPickerActivity activity;, +  private DialogInterface dialog;, +  LoadPackagesAsyncTask(AppPickerActivity activity) {, +    this.activity = activity;, +  }, +, +  @Override, +  protected synchronized void onPreExecute() {, +    dialog = ProgressDialog.show(activity, "", activity.getString(R.string.msg_loading_apps), true, true);, +  }, +, +  @Override, +  protected synchronized void onCancelled() {, +    if (dialog != null) {, +      dialog.dismiss();, +      dialog = null;, +    }, +    PackageManager packageManager = activity.getPackageManager();, +  protected synchronized void onPostExecute(List<String[]> results) {, +        activity, android.R.layout.simple_list_item_1, labels);, +    activity.setListAdapter(listAdapter);, +    if (dialog != null) {, +      dialog.dismiss();, +      dialog = null;, +    }]