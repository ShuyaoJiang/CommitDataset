[+++ b/core/src/com/google/zxing/client/result/ResultParser.java, +    // Can't put key, null into a hashtable, +++ b/core/src/com/google/zxing/client/result/ResultParser.java, +    // Can't put key, null into a hashtable, +++ b/core/src/com/google/zxing/client/result/SMSMMSResultParser.java, +, +    // Check up front if this is a URI syntax string with query arguments, +    Hashtable nameValuePairs = parseNameValuePairs(rawText);, +    String subject = null;, +    String body = null;, +    boolean querySyntax = false;, +    if (nameValuePairs != null && nameValuePairs.size() > 0) {, +      subject = (String) nameValuePairs.get("subject");, +      body = (String) nameValuePairs.get("body");, +      querySyntax = true;, +    }, +, +    // If it's not query syntax, the question mark is part of the subject or message, +    if (queryStart < 0 || !querySyntax) {, +, +++ b/core/src/com/google/zxing/client/result/ResultParser.java, +    // Can't put key, null into a hashtable, +++ b/core/src/com/google/zxing/client/result/SMSMMSResultParser.java, +, +    // Check up front if this is a URI syntax string with query arguments, +    Hashtable nameValuePairs = parseNameValuePairs(rawText);, +    String subject = null;, +    String body = null;, +    boolean querySyntax = false;, +    if (nameValuePairs != null && nameValuePairs.size() > 0) {, +      subject = (String) nameValuePairs.get("subject");, +      body = (String) nameValuePairs.get("body");, +      querySyntax = true;, +    }, +, +    // If it's not query syntax, the question mark is part of the subject or message, +    if (queryStart < 0 || !querySyntax) {, +, +++ b/core/test/src/com/google/zxing/client/result/ParsedReaderResultTestCase.java, +    doTestResult("tel:212-555-1212", ParsedResultType.TEL);, +    // Need to handle question mark in the subject, +    doTestResult("sms:+15551212:What's up?", ParsedResultType.SMS);, +    doTestResult("sms:212-555-1212:Here's a longer message. Should be fine.", ParsedResultType.SMS);, +    doTestResult("mms:+15551212:What's up?", ParsedResultType.SMS);, +    doTestResult("mms:212-555-1212:Here's a longer message. Should be fine.", ParsedResultType.SMS);, +++ b/core/src/com/google/zxing/client/result/ResultParser.java, +    // Can't put key, null into a hashtable, +++ b/core/src/com/google/zxing/client/result/SMSMMSResultParser.java, +, +    // Check up front if this is a URI syntax string with query arguments, +    Hashtable nameValuePairs = parseNameValuePairs(rawText);, +    String subject = null;, +    String body = null;, +    boolean querySyntax = false;, +    if (nameValuePairs != null && nameValuePairs.size() > 0) {, +      subject = (String) nameValuePairs.get("subject");, +      body = (String) nameValuePairs.get("body");, +      querySyntax = true;, +    }, +, +    // If it's not query syntax, the question mark is part of the subject or message, +    if (queryStart < 0 || !querySyntax) {, +, +++ b/core/test/src/com/google/zxing/client/result/ParsedReaderResultTestCase.java, +    doTestResult("tel:212-555-1212", ParsedResultType.TEL);, +    // Need to handle question mark in the subject, +    doTestResult("sms:+15551212:What's up?", ParsedResultType.SMS);, +    doTestResult("sms:212-555-1212:Here's a longer message. Should be fine.", ParsedResultType.SMS);, +    doTestResult("mms:+15551212:What's up?", ParsedResultType.SMS);, +    doTestResult("mms:212-555-1212:Here's a longer message. Should be fine.", ParsedResultType.SMS);, +++ b/javase/src/com/google/zxing/client/j2se/CommandLineRunner.java, +import com.google.zxing.client.result.ParsedResult;, +import com.google.zxing.client.result.ResultParser;, +import java.util.Hashtable;, +      ParsedResult parsedResult = ResultParser.parseResult(result);, +      System.out.println(uri.toString() + " (format: " + result.getBarcodeFormat() +, +          ", type: " + parsedResult.getType() + "):\nRaw result:\n" + result.getText() +, +          "\nParsed result:\n" + parsedResult.getDisplayResult());]