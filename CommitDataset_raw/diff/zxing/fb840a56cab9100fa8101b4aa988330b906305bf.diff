[+++ b/core/src/com/google/zxing/qrcode/encoder/MaskUtil.java, +    byte[][] array = matrix.getArray();, +    int width = matrix.width();, +    int height = matrix.height();, +    for (int y = 0; y < height - 1; ++y) {, +      for (int x = 0; x < width - 1; ++x) {, +        int value = array[y][x];, +        if (value == array[y][x + 1] && value == array[y + 1][x] && value == array[y + 1][x + 1]) {, +    byte[][] array = matrix.getArray();, +    int width = matrix.width();, +    int height = matrix.height();, +    for (int y = 0; y < height; ++y) {, +      for (int x = 0; x < width; ++x) {, +        if (x + 6 < width &&, +            array[y][x] == 1 &&, +            array[y][x +  1] == 0 &&, +            array[y][x +  2] == 1 &&, +            array[y][x +  3] == 1 &&, +            array[y][x +  4] == 1 &&, +            array[y][x +  5] == 0 &&, +            array[y][x +  6] == 1 &&, +            ((x + 10 < width &&, +                array[y][x +  7] == 0 &&, +                array[y][x +  8] == 0 &&, +                array[y][x +  9] == 0 &&, +                array[y][x + 10] == 0) ||, +                    array[y][x -  1] == 0 &&, +                    array[y][x -  2] == 0 &&, +                    array[y][x -  3] == 0 &&, +                    array[y][x -  4] == 0))) {, +        if (y + 6 < height &&, +            array[y][x] == 1  &&, +            array[y +  1][x] == 0  &&, +            array[y +  2][x] == 1  &&, +            array[y +  3][x] == 1  &&, +            array[y +  4][x] == 1  &&, +            array[y +  5][x] == 0  &&, +            array[y +  6][x] == 1 &&, +            ((y + 10 < height &&, +                array[y +  7][x] == 0 &&, +                array[y +  8][x] == 0 &&, +                array[y +  9][x] == 0 &&, +                array[y + 10][x] == 0) ||, +                    array[y -  1][x] == 0 &&, +                    array[y -  2][x] == 0 &&, +                    array[y -  3][x] == 0 &&, +                    array[y -  4][x] == 0))) {, +    byte[][] array = matrix.getArray();, +    int width = matrix.width();, +    int height = matrix.height();, +    for (int y = 0; y < height; ++y) {, +      for (int x = 0; x < width; ++x) {, +        if (array[y][x] == 1) {, +    byte[][] array = matrix.getArray();, +        final int bit = is_horizontal ? array[i][j] : array[j][i];, +++ b/core/src/com/google/zxing/qrcode/encoder/MaskUtil.java, +    byte[][] array = matrix.getArray();, +    int width = matrix.width();, +    int height = matrix.height();, +    for (int y = 0; y < height - 1; ++y) {, +      for (int x = 0; x < width - 1; ++x) {, +        int value = array[y][x];, +        if (value == array[y][x + 1] && value == array[y + 1][x] && value == array[y + 1][x + 1]) {, +    byte[][] array = matrix.getArray();, +    int width = matrix.width();, +    int height = matrix.height();, +    for (int y = 0; y < height; ++y) {, +      for (int x = 0; x < width; ++x) {, +        if (x + 6 < width &&, +            array[y][x] == 1 &&, +            array[y][x +  1] == 0 &&, +            array[y][x +  2] == 1 &&, +            array[y][x +  3] == 1 &&, +            array[y][x +  4] == 1 &&, +            array[y][x +  5] == 0 &&, +            array[y][x +  6] == 1 &&, +            ((x + 10 < width &&, +                array[y][x +  7] == 0 &&, +                array[y][x +  8] == 0 &&, +                array[y][x +  9] == 0 &&, +                array[y][x + 10] == 0) ||, +                    array[y][x -  1] == 0 &&, +                    array[y][x -  2] == 0 &&, +                    array[y][x -  3] == 0 &&, +                    array[y][x -  4] == 0))) {, +        if (y + 6 < height &&, +            array[y][x] == 1  &&, +            array[y +  1][x] == 0  &&, +            array[y +  2][x] == 1  &&, +            array[y +  3][x] == 1  &&, +            array[y +  4][x] == 1  &&, +            array[y +  5][x] == 0  &&, +            array[y +  6][x] == 1 &&, +            ((y + 10 < height &&, +                array[y +  7][x] == 0 &&, +                array[y +  8][x] == 0 &&, +                array[y +  9][x] == 0 &&, +                array[y + 10][x] == 0) ||, +                    array[y -  1][x] == 0 &&, +                    array[y -  2][x] == 0 &&]