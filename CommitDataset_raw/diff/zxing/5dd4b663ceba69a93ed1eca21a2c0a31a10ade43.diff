[+++ b/zxingorg/build.xml, +    <delete file="w.war"/>, +++ b/zxingorg/build.xml, +    <delete file="w.war"/>, +++ b/zxingorg/src/com/google/zxing/web/DecodeServlet.java, +import org.apache.http.HttpEntity;, +import org.apache.http.client.methods.HttpUriRequest;, +import org.apache.http.conn.ClientConnectionManager;, +import java.util.concurrent.TimeUnit;, +import javax.servlet.ServletRequest;, +  private ClientConnectionManager connectionManager;, +    connectionManager = new ThreadSafeClientConnManager(params, registry);, +    client = new DefaultHttpClient(connectionManager, params);, +    HttpUriRequest getRequest = new HttpGet(imageURI);, +    HttpResponse getResponse;, +      getResponse = client.execute(getRequest);, +    } catch (IllegalArgumentException iae) {, +      // Thrown if hostname is bad or null, +      getRequest.abort();, +      response.sendRedirect("badurl.jspx");, +      return;, +    } catch (SocketException se) {, +      // Thrown if hostname is bad or null, +      getRequest.abort();, +      response.sendRedirect("badurl.jspx");, +      return;, +    } catch (UnknownHostException uhe) {, +      getRequest.abort();, +      response.sendRedirect("badurl.jspx");, +      return;, +    }, +, +, +    HttpEntity entity = getResponse.getEntity();, +    InputStream is = entity.getContent();, +      entity.consumeContent();      , +      // Hmm, trying harder here to avoid the CLOSE_WAIT problem:, +      connectionManager.closeExpiredConnections();, +      connectionManager.closeIdleConnections(0L, TimeUnit.MILLISECONDS);, +  private static void processStream(InputStream is, ServletRequest request,]