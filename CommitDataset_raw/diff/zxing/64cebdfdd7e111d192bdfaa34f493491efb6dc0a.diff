[+++ b/javame/src/com/google/zxing/client/j2me/SnapshotThread.java, +import javax.microedition.media.control.VideoControl;, +	    try {, +	    } catch (MediaException me) {, +		    // continue, +	    }, +	    byte[] snapshot = takeSnapshot();, +		    // continue, +	private byte[] takeSnapshot() throws MediaException {, +		VideoControl videoControl = zXingMIDlet.getVideoControl();, +		byte[] snapshot = null;, +		try {, +	    snapshot = videoControl.getSnapshot(null);, +		} catch (MediaException me) {, +		}, +		if (snapshot == null) {, +			// Fall back on JPEG; seems that some cameras default to PNG even, +			// when PNG isn't supported!, +			snapshot = videoControl.getSnapshot("encoding=jpeg");, +			if (snapshot == null) {, +				throw new MediaException("Can't obtain a snapshot");, +			}, +		}, +		return snapshot;, +	}, +, +++ b/javame/src/com/google/zxing/client/j2me/SnapshotThread.java, +import javax.microedition.media.control.VideoControl;, +	    try {, +	    } catch (MediaException me) {, +		    // continue, +	    }, +	    byte[] snapshot = takeSnapshot();, +		    // continue, +	private byte[] takeSnapshot() throws MediaException {, +		VideoControl videoControl = zXingMIDlet.getVideoControl();, +		byte[] snapshot = null;, +		try {, +	    snapshot = videoControl.getSnapshot(null);, +		} catch (MediaException me) {, +		}, +		if (snapshot == null) {, +			// Fall back on JPEG; seems that some cameras default to PNG even, +			// when PNG isn't supported!, +			snapshot = videoControl.getSnapshot("encoding=jpeg");, +			if (snapshot == null) {, +				throw new MediaException("Can't obtain a snapshot");, +			}, +		}, +		return snapshot;, +	}, +, +++ b/javame/src/com/google/zxing/client/j2me/ZXingMIDlet.java, +      player = createPlayer();, +	private static Player createPlayer() throws IOException, MediaException {, +		// Try a workaround for Nokias, which want to use capture://image in some cases, +		Player player = null;, +		String platform = System.getProperty("microedition.platform");, +		if (platform != null && platform.indexOf("Nokia") >= 0) {, +			try {, +				player = Manager.createPlayer("capture://image");, +			} catch (MediaException me) {, +				// if this fails, just continue with capture://video, +			}, +		}, +		if (player == null) {, +			player = Manager.createPlayer("capture://video");, +		}, +		return player;, +	}, +]