[+++ b/android/src/com/google/zxing/client/android/encode/EncodeActivity.java, +    if (bitmap == null) {, +      return;, +    }, +, +      if (bitmap == null) {, +        Log.w(TAG, "Could not encode barcode");, +        showErrorMessage(R.string.msg_encode_contents_failed);, +        qrCodeEncoder = null;, +        return;, +      }, +, +++ b/android/src/com/google/zxing/client/android/encode/EncodeActivity.java, +    if (bitmap == null) {, +      return;, +    }, +, +      if (bitmap == null) {, +        Log.w(TAG, "Could not encode barcode");, +        showErrorMessage(R.string.msg_encode_contents_failed);, +        qrCodeEncoder = null;, +        return;, +      }, +, +++ b/android/src/com/google/zxing/client/android/encode/QRCodeEncoder.java, +    String contentsToEncode = contents;, +    if (contentsToEncode == null) {, +      return null;, +    }, +    String encoding = guessAppropriateEncoding(contentsToEncode);, +    BitMatrix result = writer.encode(contentsToEncode, format, dimension, dimension, hints);]