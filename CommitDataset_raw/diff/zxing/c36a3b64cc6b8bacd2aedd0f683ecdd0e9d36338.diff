[+++ b/android/build.xml, +<?xml version="1.0" ?>, +, +<!--, + Copyright (C) 2008 Google Inc., +, + Licensed under the Apache License, Version 2.0 (the "License");, + you may not use this file except in compliance with the License., + You may obtain a copy of the License at, +, +      http://www.apache.org/licenses/LICENSE-2.0, +, + Unless required by applicable law or agreed to in writing, software, + distributed under the License is distributed on an "AS IS" BASIS,, + WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied., + See the License for the specific language governing permissions and, + limitations under the License., + -->, +, +<!-- This is a mildly hacked version of the auto-generated project, +     build.xml file. -->, +<project name="BarcodeReader" default="package">, +  <property file="../build.properties"/>, +  <property name="sdk-folder" value="${android-home}"/>, +  <property name="android-tools" value="${sdk-folder}/tools"/>, +, +  <!-- The intermediates directory -->, +  <!-- Eclipse uses "bin" for its own output, so we do the same. -->, +  <property name="outdir" value="bin"/>, +, +  <!-- No user servicable parts below. -->, +, +  <!-- Input directories -->, +  <property name="resource-dir" value="res"/>, +  <property name="asset-dir" value="assets"/>, +  <property name="srcdir" value="src"/>, +, +  <!-- Output directories -->, +  <property name="outdir-classes" value="${outdir}/classes"/>, +, +  <!-- Create R.java in the source directory -->, +  <property name="outdir-r" value="src"/>, +, +  <!-- Intermediate files -->, +  <property name="dex-file" value="classes.dex"/>, +  <property name="intermediate-dex" value="${outdir}/${dex-file}"/>, +, +  <!-- The final package file to generate -->, +  <property name="out-package" value="${outdir}/${ant.project.name}.apk"/>, +, +  <!-- Tools -->, +  <property name="aapt" value="${android-tools}/aapt"/>, +  <property name="aidl" value="${android-tools}/aidl"/>, +  <property name="dx" value="${android-tools}/dx"/>, +  <property name="zip" value="zip"/>, +  <property name="android-jar" value="${sdk-folder}/android.jar"/>, +, +  <!-- Rules -->, +, +  <target name="init">, +    <tstamp/>, +    <fail message="Please set 'android-home' in build.properties">, +      <condition>, +        <not>, +          <available file="${android-home}" type="dir"/>, +        </not>, +      </condition>, +    </fail>, +	  <fail message="Please build 'core' first">, +      <condition>, +        <not>, +          <available file="../core/core.jar" type="file"/>, +        </not>, +      </condition>, +    </fail>, +  </target>, +, +  <!-- Create the output directories if they don't exist yet. -->, +  <target name="dirs">, +    <mkdir dir="${outdir}"/>, +    <mkdir dir="${outdir-classes}"/>, +  </target>, +, +  <!-- Generate the R.java file for this project's resources. -->, +  <target name="resource-src" depends="dirs">, +    <echo>Generating R.java...</echo>, +    <exec executable="${aapt}" failonerror="true">, +      <arg value="compile"/>, +      <arg value="-m"/>, +      <arg value="-J"/>, +      <arg value="${outdir-r}"/>, +      <arg value="-M"/>, +      <arg value="AndroidManifest.xml"/>, +      <arg value="-S"/>, +      <arg value="${resource-dir}"/>, +      <arg value="-I"/>, +      <arg value="${android-jar}"/>, +    </exec>, +  </target>, +]