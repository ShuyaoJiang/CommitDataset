[+++ b/javame/src/com/google/zxing/client/j2me/SnapshotThread.java, +, +    // Check this property, present on some Nokias?, +    String supportsVideoCapture = System.getProperty("supports.video.capture");, +    if ("false".equals(supportsVideoCapture)) {, +      throw new MediaException("supports.video.capture is false");, +    }, +, +    String bestEncoding = null;, +    String videoSnapshotEncodings = System.getProperty("video.snapshot.encodings");, +    if (videoSnapshotEncodings != null) {, +      // We know explicitly what the camera supports; see if PNG is among them since, +      // Image.createImage() should always support it, +      int pngEncodingStart = videoSnapshotEncodings.indexOf("encoding=png");, +      if (pngEncodingStart >= 0) {, +        int space = videoSnapshotEncodings.indexOf(' ', pngEncodingStart);, +        bestEncoding = space >= 0 ?, +            videoSnapshotEncodings.substring(pngEncodingStart, space) : , +            videoSnapshotEncodings.substring(pngEncodingStart);, +      }, +    }, +, +      snapshot = videoControl.getSnapshot(bestEncoding);]