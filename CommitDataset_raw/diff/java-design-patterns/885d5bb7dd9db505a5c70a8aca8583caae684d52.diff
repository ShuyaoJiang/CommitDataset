[+++ b/event-aggregator/pom.xml, +		<dependency>, +			<groupId>org.mockito</groupId>, +			<artifactId>mockito-core</artifactId>, +			<scope>test</scope>, +		</dependency>, +++ b/event-aggregator/pom.xml, +		<dependency>, +			<groupId>org.mockito</groupId>, +			<artifactId>mockito-core</artifactId>, +			<scope>test</scope>, +		</dependency>, +++ b/event-aggregator/src/test/java/com/iluwatar/event/aggregator/EventEmitterTest.java, +package com.iluwatar.event.aggregator;, +, +import org.junit.Test;, +, +import java.util.Objects;, +import java.util.function.Function;, +import java.util.function.Supplier;, +, +import static org.mockito.Matchers.eq;, +import static org.mockito.Mockito.mock;, +import static org.mockito.Mockito.times;, +import static org.mockito.Mockito.verify;, +import static org.mockito.Mockito.verifyNoMoreInteractions;, +import static org.mockito.Mockito.verifyZeroInteractions;, +, +/**, + * Date: 12/12/15 - 10:58 PM, + *, + * @author Jeroen Meulemeester, + */, +public abstract class EventEmitterTest<E extends EventEmitter> {, +, +  /**, +   * Factory used to create a new instance of the test object with a default observer, +   */, +  private final Function<EventObserver, E> factoryWithDefaultObserver;, +, +  /**, +   * Factory used to create a new instance of the test object without passing a default observer, +   */, +  private final Supplier<E> factoryWithoutDefaultObserver;, +, +  /**, +   * The day of the week an event is expected, +   */, +  private final Weekday specialDay;, +, +  /**, +   * The expected event, emitted on the special day, +   */, +  private final Event event;, +, +  /**, +   * Create a new event emitter test, using the given test object factories, special day and event, +   */, +  EventEmitterTest(final Weekday specialDay, final Event event,, +                   final Function<EventObserver, E> factoryWithDefaultObserver,, +                   final Supplier<E> factoryWithoutDefaultObserver) {, +, +    this.specialDay = specialDay;, +    this.event = event;, +    this.factoryWithDefaultObserver = Objects.requireNonNull(factoryWithDefaultObserver);, +    this.factoryWithoutDefaultObserver = Objects.requireNonNull(factoryWithoutDefaultObserver);, +  }, +, +  /**, +   * Go over every day of the month, and check if the event is emitted on the given day. This test, +   * is executed twice, once without a default emitter and once with, +   */, +  @Test, +  public void testAllDays() {, +    testAllDaysWithoutDefaultObserver(specialDay, event);, +    testAllDaysWithDefaultObserver(specialDay, event);, +  }, +, +  /**, +   * Go over every day of the month, and check if the event is emitted on the given day. Use an, +   * event emitter without a default observer, +   *, +   * @param specialDay The special day on which an event is emitted, +   * @param event      The expected event emitted by the test object, +   */, +  private void testAllDaysWithoutDefaultObserver(final Weekday specialDay, final Event event) {, +    final EventObserver observer1 = mock(EventObserver.class);, +    final EventObserver observer2 = mock(EventObserver.class);, +, +    final E emitter = this.factoryWithoutDefaultObserver.get();, +    emitter.registerObserver(observer1);, +    emitter.registerObserver(observer2);, +, +    testAllDays(specialDay, event, emitter, observer1, observer2);, +  }, +, +  /**, +   * Go over every day of the month, and check if the event is emitted on the given day., +   *, +   * @param specialDay The special day on which an event is emitted]