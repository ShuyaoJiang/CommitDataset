[+++ b/ChangeLog, +2012-07-28  David Gilbert <david.gilbert@object-refinery.com>, +, +    * org/jfree/data/general/Series.java, +    (setKey): Update exception argument and Javadocs,, +    * org/jfree/data/general/XYSeriesCollection.java, +    (vetoableChange) : Call getSeriesIndex() rather than getSeries(),, +    * tests/org/jfree/data/xy/junit/XYSeriesCollectionTests.java, +    (testSeriesRename): New test method., +, +++ b/ChangeLog, +2012-07-28  David Gilbert <david.gilbert@object-refinery.com>, +, +    * org/jfree/data/general/Series.java, +    (setKey): Update exception argument and Javadocs,, +    * org/jfree/data/general/XYSeriesCollection.java, +    (vetoableChange) : Call getSeriesIndex() rather than getSeries(),, +    * tests/org/jfree/data/xy/junit/XYSeriesCollectionTests.java, +    (testSeriesRename): New test method., +, +++ b/source/org/jfree/data/general/Series.java, +     * <code>PropertyChangeEvent</code>.  If the key change is vetoed this , +     * method will throw an IllegalArgumentException., +            throw new IllegalArgumentException(e);, +++ b/ChangeLog, +2012-07-28  David Gilbert <david.gilbert@object-refinery.com>, +, +    * org/jfree/data/general/Series.java, +    (setKey): Update exception argument and Javadocs,, +    * org/jfree/data/general/XYSeriesCollection.java, +    (vetoableChange) : Call getSeriesIndex() rather than getSeries(),, +    * tests/org/jfree/data/xy/junit/XYSeriesCollectionTests.java, +    (testSeriesRename): New test method., +, +++ b/source/org/jfree/data/general/Series.java, +     * <code>PropertyChangeEvent</code>.  If the key change is vetoed this , +     * method will throw an IllegalArgumentException., +            throw new IllegalArgumentException(e);, +++ b/source/org/jfree/data/xy/XYSeriesCollection.java, +        if (getSeriesIndex(s.getKey()) == -1) {, +        if (getSeriesIndex(key) >= 0) {, +++ b/ChangeLog, +2012-07-28  David Gilbert <david.gilbert@object-refinery.com>, +, +    * org/jfree/data/general/Series.java, +    (setKey): Update exception argument and Javadocs,, +    * org/jfree/data/general/XYSeriesCollection.java, +    (vetoableChange) : Call getSeriesIndex() rather than getSeries(),, +    * tests/org/jfree/data/xy/junit/XYSeriesCollectionTests.java, +    (testSeriesRename): New test method., +, +++ b/source/org/jfree/data/general/Series.java, +     * <code>PropertyChangeEvent</code>.  If the key change is vetoed this , +     * method will throw an IllegalArgumentException., +            throw new IllegalArgumentException(e);, +++ b/source/org/jfree/data/xy/XYSeriesCollection.java, +        if (getSeriesIndex(s.getKey()) == -1) {, +        if (getSeriesIndex(key) >= 0) {, +++ b/tests/org/jfree/data/xy/junit/XYSeriesCollectionTests.java, + * 28-Jul-2012 : Added testSeriesRename() (DG);, +     * A test to cover bug 3445507.  The issue does not affect, + , +    /**, +     * Test that a series belonging to a collection can be renamed (in fact, , +     * because of a bug this was not possible in JFreeChart 1.0.14)., +     */, +    public void testSeriesRename() {, +        // first check that a valid renaming works, +        XYSeries series1 = new XYSeries("A");, +        XYSeries series2 = new XYSeries("B");, +        XYSeriesCollection collection = new XYSeriesCollection();, +        collection.addSeries(series1);, +        collection.addSeries(series2);, +        series1.setKey("C");, +        assertEquals("C", collection.getSeries(0).getKey());, +        , +        // next, check that setting a duplicate key fails, +        try {, +            series2.setKey("C");, +        }, +        catch (IllegalArgumentException e) {, +            // expected, +        }, +        assertEquals("B", series2.getKey());  // the series name should not , +        // change because "C" is already the key for the other series in the, +        // collection, +    }]