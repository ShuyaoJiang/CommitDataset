[+++ b/ChangeLog, +    * source/org/jfree/chart/plot/CategoryPlot.java, +    (clone): Update plot references in cloned renderers,, +    * source/org/jfree/chart/plot/XYPlot.java, +    (clone): Likewise., +, +2009-07-06  David Gilbert  <david.gilbert@object-refinery.com>, +, +++ b/ChangeLog, +    * source/org/jfree/chart/plot/CategoryPlot.java, +    (clone): Update plot references in cloned renderers,, +    * source/org/jfree/chart/plot/XYPlot.java, +    (clone): Likewise., +, +2009-07-06  David Gilbert  <david.gilbert@object-refinery.com>, +, +++ b/source/org/jfree/chart/plot/CategoryPlot.java, + * 06-Jul-2009 : Fix for cloning of renderers - see bug 2817504 (DG), +        for (int i = 0; i < this.renderers.size(); i++) {, +            CategoryItemRenderer renderer2 = (CategoryItemRenderer), +                    this.renderers.get(i);, +            if (renderer2 instanceof PublicCloneable) {, +                PublicCloneable pc = (PublicCloneable) renderer2;, +                CategoryItemRenderer rc = (CategoryItemRenderer) pc.clone();, +                clone.renderers.set(i, rc);, +                rc.setPlot(clone);, +                rc.addChangeListener(clone);, +            }, +        }, +++ b/ChangeLog, +    * source/org/jfree/chart/plot/CategoryPlot.java, +    (clone): Update plot references in cloned renderers,, +    * source/org/jfree/chart/plot/XYPlot.java, +    (clone): Likewise., +, +2009-07-06  David Gilbert  <david.gilbert@object-refinery.com>, +, +++ b/source/org/jfree/chart/plot/CategoryPlot.java, + * 06-Jul-2009 : Fix for cloning of renderers - see bug 2817504 (DG), +        for (int i = 0; i < this.renderers.size(); i++) {, +            CategoryItemRenderer renderer2 = (CategoryItemRenderer), +                    this.renderers.get(i);, +            if (renderer2 instanceof PublicCloneable) {, +                PublicCloneable pc = (PublicCloneable) renderer2;, +                CategoryItemRenderer rc = (CategoryItemRenderer) pc.clone();, +                clone.renderers.set(i, rc);, +                rc.setPlot(clone);, +                rc.addChangeListener(clone);, +            }, +        }, +++ b/source/org/jfree/chart/plot/XYPlot.java, + * 06-Jul-2009 : Fix for cloning of renderers - see bug 2817504 (DG), +                XYItemRenderer rc = (XYItemRenderer) pc.clone();, +                clone.renderers.set(i, rc);, +                rc.setPlot(clone);, +                rc.addChangeListener(clone);, +++ b/ChangeLog, +    * source/org/jfree/chart/plot/CategoryPlot.java, +    (clone): Update plot references in cloned renderers,, +    * source/org/jfree/chart/plot/XYPlot.java, +    (clone): Likewise., +, +2009-07-06  David Gilbert  <david.gilbert@object-refinery.com>, +, +++ b/source/org/jfree/chart/plot/CategoryPlot.java, + * 06-Jul-2009 : Fix for cloning of renderers - see bug 2817504 (DG), +        for (int i = 0; i < this.renderers.size(); i++) {, +            CategoryItemRenderer renderer2 = (CategoryItemRenderer), +                    this.renderers.get(i);, +            if (renderer2 instanceof PublicCloneable) {, +                PublicCloneable pc = (PublicCloneable) renderer2;, +                CategoryItemRenderer rc = (CategoryItemRenderer) pc.clone();, +                clone.renderers.set(i, rc);, +                rc.setPlot(clone);, +                rc.addChangeListener(clone);, +            }, +        }, +++ b/source/org/jfree/chart/plot/XYPlot.java, + * 06-Jul-2009 : Fix for cloning of renderers - see bug 2817504 (DG), +                XYItemRenderer rc = (XYItemRenderer) pc.clone();, +                clone.renderers.set(i, rc);, +                rc.setPlot(clone);, +                rc.addChangeListener(clone);, +++ b/tests/org/jfree/chart/plot/junit/CategoryPlotTests.java, +     * Renderers that belong to the plot are being cloned but they are, +     * retaining a reference to the original plot., +     */, +    public void testBug2817504() {, +        CategoryPlot p1 = new CategoryPlot();, +        LineAndShapeRenderer r1 = new LineAndShapeRenderer();, +        p1.setRenderer(r1);, +        CategoryPlot p2 = null;, +        try {, +            p2 = (CategoryPlot) p1.clone();, +        }, +        catch (CloneNotSupportedException e) {, +            e.printStackTrace();, +        }, +        assertTrue(p1 != p2);, +        assertTrue(p1.getClass() == p2.getClass());]