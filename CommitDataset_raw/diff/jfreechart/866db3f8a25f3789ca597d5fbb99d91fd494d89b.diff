[+++ b/ChangeLog, +2008-11-13  David Gilbert  <david.gilbert@object-refinery.com>, +, +    Bug 2275695:, +    * source/org/jfree/chart/axis/SubCategoryAxis.java, +    (drawSubCategoryLabels): Check for null,, +    * tests/org/jfree/chart/axis/junit/SubCategoryAxisTests.java, +    (test2275695): New method., +, +++ b/ChangeLog, +2008-11-13  David Gilbert  <david.gilbert@object-refinery.com>, +, +    Bug 2275695:, +    * source/org/jfree/chart/axis/SubCategoryAxis.java, +    (drawSubCategoryLabels): Check for null,, +    * tests/org/jfree/chart/axis/junit/SubCategoryAxisTests.java, +    (test2275695): New method., +, +++ b/NEWS, +2275695 : NullPointerException for SubCategoryAxis on plot with null dataset;, +++ b/ChangeLog, +2008-11-13  David Gilbert  <david.gilbert@object-refinery.com>, +, +    Bug 2275695:, +    * source/org/jfree/chart/axis/SubCategoryAxis.java, +    (drawSubCategoryLabels): Check for null,, +    * tests/org/jfree/chart/axis/junit/SubCategoryAxisTests.java, +    (test2275695): New method., +, +++ b/NEWS, +2275695 : NullPointerException for SubCategoryAxis on plot with null dataset;, +++ b/source/org/jfree/chart/axis/SubCategoryAxis.java, + * 13-Nov-2008 : Fix NullPointerException when dataset is null - see bug, + *               report 2275695 (DG);, +        int categoryCount = 0;, +        if (dataset != null) {, +            categoryCount = dataset.getColumnCount();, +        }, +++ b/ChangeLog, +2008-11-13  David Gilbert  <david.gilbert@object-refinery.com>, +, +    Bug 2275695:, +    * source/org/jfree/chart/axis/SubCategoryAxis.java, +    (drawSubCategoryLabels): Check for null,, +    * tests/org/jfree/chart/axis/junit/SubCategoryAxisTests.java, +    (test2275695): New method., +, +++ b/NEWS, +2275695 : NullPointerException for SubCategoryAxis on plot with null dataset;, +++ b/source/org/jfree/chart/axis/SubCategoryAxis.java, + * 13-Nov-2008 : Fix NullPointerException when dataset is null - see bug, + *               report 2275695 (DG);, +        int categoryCount = 0;, +        if (dataset != null) {, +            categoryCount = dataset.getColumnCount();, +        }, +++ b/tests/org/jfree/chart/axis/junit/SubCategoryAxisTests.java, + * 13-Nov-2008 : Added test2275695() (DG);, +import java.awt.Graphics2D;, +import java.awt.geom.Rectangle2D;, +import java.awt.image.BufferedImage;, +import org.jfree.chart.ChartFactory;, +import org.jfree.chart.JFreeChart;, +import org.jfree.chart.plot.CategoryPlot;, +import org.jfree.chart.plot.PlotOrientation;, +        return new TestSuite(SubCategoryAxisTests.class);, +        a1.addSubCategory("SubCategoryA");, +            e.printStackTrace();, +        a1.addSubCategory("SubCategoryA");, +    }, +    /**, +     * A check for the NullPointerException in bug 2275695., +     */, +    public void test2275695() {, +        JFreeChart chart = ChartFactory.createStackedBarChart("Test",, +                "Category", "Value", null, PlotOrientation.VERTICAL,, +                true, false, false);, +        CategoryPlot plot = (CategoryPlot) chart.getPlot();, +        plot.setDomainAxis(new SubCategoryAxis("SubCategoryAxis"));, +        boolean success = false;, +        try {, +            BufferedImage image = new BufferedImage(200 , 100,, +                    BufferedImage.TYPE_INT_RGB);, +            Graphics2D g2 = image.createGraphics();, +            chart.draw(g2, new Rectangle2D.Double(0, 0, 200, 100), null, null);, +            g2.dispose();, +            success = true;, +        }, +        catch (Exception e) {, +            success = false;, +        }, +        assertTrue(success);]