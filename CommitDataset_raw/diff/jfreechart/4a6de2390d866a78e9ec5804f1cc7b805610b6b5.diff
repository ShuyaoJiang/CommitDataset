[+++ b/ChangeLog, +2008-03-19  David Gilbert  <david.gilbert@object-refinery.com>, +, +    * source/org/jfree/chart/plot/PiePlot3D.java, +    (getMaximumExplodePercent): Check for null dataset,, +    (initialise): Likewise,, +    * tests/org/jfree/chart/plot/junit/PiePlot3DTests.java, +    (testDrawWithNullDataset): New test method., +, +++ b/ChangeLog, +2008-03-19  David Gilbert  <david.gilbert@object-refinery.com>, +, +    * source/org/jfree/chart/plot/PiePlot3D.java, +    (getMaximumExplodePercent): Check for null dataset,, +    (initialise): Likewise,, +    * tests/org/jfree/chart/plot/junit/PiePlot3DTests.java, +    (testDrawWithNullDataset): New test method., +, +++ b/source/org/jfree/chart/plot/PiePlot.java, + * (C) Copyright 2000-2008, by Object Refinery Limited and Contributors., + * (C) Copyright 2000-2008, by Andrzej Porebski and Contributors., + * 19-Mar-2008 : Fixed IllegalArgumentException when drawing with null , + *               dataset (DG);, +        if (this.dataset == null) {, +            return 0.0;, +        }, +        if (this.dataset != null) {, +        }, +++ b/ChangeLog, +2008-03-19  David Gilbert  <david.gilbert@object-refinery.com>, +, +    * source/org/jfree/chart/plot/PiePlot3D.java, +    (getMaximumExplodePercent): Check for null dataset,, +    (initialise): Likewise,, +    * tests/org/jfree/chart/plot/junit/PiePlot3DTests.java, +    (testDrawWithNullDataset): New test method., +, +++ b/source/org/jfree/chart/plot/PiePlot.java, + * (C) Copyright 2000-2008, by Object Refinery Limited and Contributors., + * (C) Copyright 2000-2008, by Andrzej Porebski and Contributors., + * 19-Mar-2008 : Fixed IllegalArgumentException when drawing with null , + *               dataset (DG);, +        if (this.dataset == null) {, +            return 0.0;, +        }, +        if (this.dataset != null) {, +        }, +++ b/tests/org/jfree/chart/plot/junit/PiePlot3DTests.java, + * (C) Copyright 2000-2008, by Object Refinery Limited and Contributors., + * (C) Copyright 2003-2008, by Object Refinery Limited and Contributors., + * 19-Mar-2008 : Added test for null dataset (DG);, +import java.awt.Graphics2D;, +import java.awt.geom.Rectangle2D;, +import java.awt.image.BufferedImage;, +import org.jfree.chart.ChartFactory;, +import org.jfree.chart.JFreeChart;, +    /**, +     * Draws a pie chart where the label generator returns null., +     */, +    public void testDrawWithNullDataset() {, +        JFreeChart chart = ChartFactory.createPieChart3D("Test", null, true, , +                false, false);, +        boolean success = false;, +        try {, +            BufferedImage image = new BufferedImage(200 , 100, , +                    BufferedImage.TYPE_INT_RGB);, +            Graphics2D g2 = image.createGraphics();, +            chart.draw(g2, new Rectangle2D.Double(0, 0, 200, 100), null, null);, +            g2.dispose();, +            success = true;, +        }, +        catch (Exception e) {, +            success = false;, +        }, +        assertTrue(success);, +    }, +]