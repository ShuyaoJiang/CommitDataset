[+++ b/source/org/jfree/chart/title/ImageTitle.java, + * (C) Copyright 2000-2008, by Object Refinery Limited and Contributors., + * (C) Copyright 2000-2008, by David Berry and Contributors;, + * 11-Apr-2008 : Added arrange() method override to account for margin, border, + *               and padding (DG);, +import org.jfree.chart.block.RectangleConstraint;, + * URL).  It is recommended you use something like, +     * Arranges the contents of the block, within the given constraints, and , +     * returns the block size., +     * , +     * @param g2  the graphics device., +     * @param constraint  the constraint (<code>null</code> not permitted)., +     * , +     * @return The block size (in Java2D units, never <code>null</code>)., +     */, +    public Size2D arrange(Graphics2D g2, RectangleConstraint constraint) {, +        Size2D s = new Size2D(this.image.getWidth(null), , +        		this.image.getHeight(null));, +        return new Size2D(calculateTotalWidth(s.getWidth()), , +                calculateTotalHeight(s.getHeight()));, +    }, +, +    /**, +     * @param area  the area allocated for the title., +    public void draw(Graphics2D g2, Rectangle2D area) {, +            drawHorizontal(g2, area);, +            drawVertical(g2, area);, +++ b/source/org/jfree/chart/title/ImageTitle.java, + * (C) Copyright 2000-2008, by Object Refinery Limited and Contributors., + * (C) Copyright 2000-2008, by David Berry and Contributors;, + * 11-Apr-2008 : Added arrange() method override to account for margin, border, + *               and padding (DG);, +import org.jfree.chart.block.RectangleConstraint;, + * URL).  It is recommended you use something like, +     * Arranges the contents of the block, within the given constraints, and , +     * returns the block size., +     * , +     * @param g2  the graphics device., +     * @param constraint  the constraint (<code>null</code> not permitted)., +     * , +     * @return The block size (in Java2D units, never <code>null</code>)., +     */, +    public Size2D arrange(Graphics2D g2, RectangleConstraint constraint) {, +        Size2D s = new Size2D(this.image.getWidth(null), , +        		this.image.getHeight(null));, +        return new Size2D(calculateTotalWidth(s.getWidth()), , +                calculateTotalHeight(s.getHeight()));, +    }, +, +    /**, +     * @param area  the area allocated for the title., +    public void draw(Graphics2D g2, Rectangle2D area) {, +            drawHorizontal(g2, area);, +            drawVertical(g2, area);, +++ b/tests/org/jfree/chart/title/junit/ImageTitleTests.java, + * (C) Copyright 2000-2008, by Object Refinery Limited and Contributors., + * (C) Copyright 2004-2008, by Object Refinery Limited and Contributors., + * 21-Mar-2008 : Added tests for arrange method (DG);, +import java.awt.Graphics2D;, +import java.awt.image.BufferedImage;, +, +import org.jfree.ui.Size2D;, +            e.printStackTrace();, +    /**, +     * Some checks for the arrange method., +     */, +    public void testArrangeNN() {, +        BufferedImage image = new BufferedImage(100, 100, , +        		BufferedImage.TYPE_INT_RGB);, +        Graphics2D g2 = image.createGraphics();, +        ImageTitle t = new ImageTitle(JFreeChart.INFO.getLogo());, +        Size2D s = t.arrange(g2);, +        assertEquals(102.0, s.getWidth(), EPSILON);, +        assertEquals(102.0, s.getHeight(), EPSILON);, +        , +        t.setPadding(1.0, 2.0, 3.0, 4.0);, +        s = t.arrange(g2);, +        assertEquals(106.0, s.getWidth(), EPSILON);, +        assertEquals(104.0, s.getHeight(), EPSILON);, +        , +        t.setMargin(5.0, 6.0, 7.0, 8.0);, +        s = t.arrange(g2);, +        assertEquals(120.0, s.getWidth(), EPSILON);, +        assertEquals(116.0, s.getHeight(), EPSILON);, +    }, +    ]