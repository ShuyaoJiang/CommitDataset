[+++ b/ChangeLog, +    Patch 2497611 by Peter Kolb:, +    * source/org/jfree/chart/axis/CategoryAxis.java, +    (getCategorySeriesMiddle): New method,, +    * source/org/jfree/chart/renderer/category/AbstractCategoryItemRenderer.java, +    (initialise): Record visible series indices,, +    * source/org/jfree/chart/renderer/category/BarRenderer.java, +    (calculateBarWidth): Look for visible series count in state,, +    (calculateBarW0): Likewise,, +    (drawItem): Use the visible row index,, +    * source/org/jfree/chart/renderer/category/CategoryItemRendererState.java, +    (visibleSeries): New field,, +    (getVisibleSeriesIndex): New method,, +    (getVisibleSeriesCount): Likewise,, +    (setVisibleSeriesArray): Likewise,, +    * source/org/jfree/chart/renderer/category/IntervalBarRenderer.java, +    (drawInterval): Use the visible row index,, +    * source/org/jfree/chart/renderer/category/LineAndShapeRenderer.java, +    (drawItem): Likewise,, +    * source/org/jfree/chart/renderer/category/ScatterRenderer.java, +    (drawItem): Likewise,, +    * source/org/jfree/chart/renderer/category/StatisticalBarRenderer.java, +    (drawItem): Likewise,, +    (drawHorizontalItem): Changed signature,, +    (drawVerticalItem): Likewise,, +    * source/org/jfree/chart/renderer/category/StatisticalLineAndShapeRenderer.java, +    (drawItem): Use the visible row index., +, +2009-01-14  David Gilbert  <david.gilbert@object-refinery.com>, +, +++ b/ChangeLog, +    Patch 2497611 by Peter Kolb:, +    * source/org/jfree/chart/axis/CategoryAxis.java, +    (getCategorySeriesMiddle): New method,, +    * source/org/jfree/chart/renderer/category/AbstractCategoryItemRenderer.java, +    (initialise): Record visible series indices,, +    * source/org/jfree/chart/renderer/category/BarRenderer.java, +    (calculateBarWidth): Look for visible series count in state,, +    (calculateBarW0): Likewise,, +    (drawItem): Use the visible row index,, +    * source/org/jfree/chart/renderer/category/CategoryItemRendererState.java, +    (visibleSeries): New field,, +    (getVisibleSeriesIndex): New method,, +    (getVisibleSeriesCount): Likewise,, +    (setVisibleSeriesArray): Likewise,, +    * source/org/jfree/chart/renderer/category/IntervalBarRenderer.java, +    (drawInterval): Use the visible row index,, +    * source/org/jfree/chart/renderer/category/LineAndShapeRenderer.java, +    (drawItem): Likewise,, +    * source/org/jfree/chart/renderer/category/ScatterRenderer.java, +    (drawItem): Likewise,, +    * source/org/jfree/chart/renderer/category/StatisticalBarRenderer.java, +    (drawItem): Likewise,, +    (drawHorizontalItem): Changed signature,, +    (drawVerticalItem): Likewise,, +    * source/org/jfree/chart/renderer/category/StatisticalLineAndShapeRenderer.java, +    (drawItem): Use the visible row index., +, +2009-01-14  David Gilbert  <david.gilbert@object-refinery.com>, +, +++ b/source/org/jfree/chart/axis/CategoryAxis.java, + * (C) Copyright 2000-2009, by Object Refinery Limited and Contributors., + * (C) Copyright 2000-2009, by Object Refinery Limited and Contributors., + *                   Peter Kolb (patch 2497611);, + * 14-Jan-2009 : Added new variant of getCategorySeriesMiddle() to make it, + *               simpler for renderers with hidden series (PK);, +     * Returns the middle coordinate (in Java2D space) for a series within a, +     * category., +     *, +     * @param categoryIndex  the category index., +     * @param categoryCount  the category count., +     * @param seriesIndex the series index., +     * @param seriesCount the series count., +     * @param itemMargin  the item margin (0.0 <= itemMargin < 1.0);, +     * @param area  the area (<code>null</code> not permitted)., +     * @param edge  the edge (<code>null</code> not permitted)., +     *, +     * @return The coordinate in Java2D space., +     *, +     * @since 1.0.13, +     */, +    public double getCategorySeriesMiddle(int categoryIndex, int categoryCount,, +            int seriesIndex, int seriesCount, double itemMargin,, +            Rectangle2D area, RectangleEdge edge) {, +, +        double start = getCategoryStart(categoryIndex, categoryCount, area,, +                edge);, +        double end = getCategoryEnd(categoryIndex, categoryCount, area, edge);, +        double width = end - start;, +        if (seriesCount == 1) {, +            return start + width / 2.0;, +        }, +        else {, +            double gap = (width * itemMargin) / (seriesCount - 1);, +            double ww = (width * (1 - itemMargin)) / seriesCount;, +            return start + (seriesIndex * (ww + gap)) + ww / 2.0;, +        }, +    }, +, +    /**]