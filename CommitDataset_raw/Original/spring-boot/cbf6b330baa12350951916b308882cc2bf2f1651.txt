Simplify code by using Map computeIfAbsent

Closes gh-15543
