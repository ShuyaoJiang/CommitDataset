Return different http return status codes for different system health states

fixes #880
