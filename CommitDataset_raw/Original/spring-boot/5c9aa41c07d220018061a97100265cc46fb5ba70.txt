Update InMemoryRichGaugeRepository to support increments

Closes gh-2902
