Improve transaction manager detection

Switch the condition used to trigger the creation of a transaction
manager from the default name to the actual type.

Fixes gh-3012
