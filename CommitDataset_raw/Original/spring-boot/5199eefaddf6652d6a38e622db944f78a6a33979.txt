Add DeferredLog to support early logging

Add a `DeferredLog` utility class that can be used to allow early
logging. Output to a DeferredLog is cached until a real Log is provided
via the `replayTo` method.

Closes gh-3081
