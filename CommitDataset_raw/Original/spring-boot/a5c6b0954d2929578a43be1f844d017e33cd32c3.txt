Consider ancestors when finding primary beans for ConditionalOnSingleCandidate

Closes gh-6559
