Default provider to registration-id if not present

Closes gh-10671
