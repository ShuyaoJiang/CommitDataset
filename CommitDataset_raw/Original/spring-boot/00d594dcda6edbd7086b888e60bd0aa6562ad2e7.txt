Replace GzipFilter and Tomcat compression with general purpose approach

Closes gh-3296
