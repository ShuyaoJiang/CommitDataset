Add support for deprecation level

This commit ensures that deprecation level set in manual metadata is
properly merged in the generated one.

Closes gh-9449
