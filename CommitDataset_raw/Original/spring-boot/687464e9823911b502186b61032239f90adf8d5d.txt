Simplify comparator implementation

See gh-9781
