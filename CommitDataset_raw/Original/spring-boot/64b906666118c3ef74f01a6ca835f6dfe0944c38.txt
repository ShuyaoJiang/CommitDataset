Refine additional metadata detection logic

Update the additional metadata detection logic to deal with Gradle
folder layouts.

Fixes gh-2271
