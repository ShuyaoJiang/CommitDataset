Add auto-configuration for SendGrid's client

Closes gh-2160
Closes gh-2280