Allow GSON customization via properties or beans

Update GSON support to allow customization with either properties or
customize beans.

See gh-11498
