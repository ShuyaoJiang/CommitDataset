multi user repo impl and tests
