Revert "Revert "Merge pull request #898 from kbsriram/erasure-fix""

This reverts commit 619dab674b90ce2fe22846bbe1753b8d5459f379.
