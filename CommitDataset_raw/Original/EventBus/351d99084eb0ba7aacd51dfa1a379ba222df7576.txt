fix problem with generic event types, added test for it
