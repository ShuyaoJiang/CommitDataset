Integration of Justin Sampson's fixes to Monitor and addition of extensive tests.

Justin is original author of Monitor and heroic volunteer xoogler.

There was significant additional work by myself (martinrb) while preparing this CL.
-------------
Created by MOE: http://code.google.com/p/moe-java
MOE_MIGRATED_REVID=74829983
