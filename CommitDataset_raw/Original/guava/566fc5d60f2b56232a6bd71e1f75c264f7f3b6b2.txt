A first pass at an optimized canDecode implementation.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=110304545
