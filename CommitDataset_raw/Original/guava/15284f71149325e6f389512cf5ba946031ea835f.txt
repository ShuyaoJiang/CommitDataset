Eagerly check for an appropriate exceptionClass constructor during calls to Futures.getChecked.
This way, callers that pass a bad exceptionClass find out unconditionally instead of only when their Future fails.

We hope for bad exceptionClass parameters to soon be caught at compile time: []
API Review: https://docs.google.com/document/d/1hUeO_1OJY_xIAHN089p5d9as1uX4M62MBlbkiLyiJbk/edit

To keep performance acceptable, cache a set of classes with appropriate constructors.
Use ClassValue, which was introduced in JDK7.
Do the compatibility dance, including making Animal Sniffer happy by annotating the class that uses ClassValue.
That requires updating Animal Sniffer to a version that respects the annotation in more places, perhaps related to http://jira.codehaus.org/browse/MANIMALSNIFFER-29
I've also updated the Animal Sniffer signatures on the theory that newer is probably better, although there is no apparent no impact on Guava.

The cost of the eager check is performance in the success case: What used to take ~1.6ns will now take ~3.2ns. This is likely to be swamped by the actual work being done and by other overhead (like threads). (This was discussed and approved in API Review.)
The ClassValue implementation is faster than the fallback version, particularly in the unlikely case in which users call getChecked() with many different kinds of exception types.

[] run --run_under=perflab javatests/com/google/common/util/concurrent:FuturesGetCheckedBenchmark -- -i runtime -DexceptionType=CHECKED -DotherEntriesInDataStructure=0,12 -Dvalidator=NON_CACHING_WITHOUT_CONSTRUCTOR_CHECK,CLASS_VALUE,WEAK_SET
https://caliper.[].com/runs/1b73aa59-83d1-429d-9ff4-e40cd8f4637a#r:scenario.benchmarkSpec.parameters.otherEntriesInDataStructure,scenario.benchmarkSpec.parameters.validator&c:scenario.benchmarkSpec.parameters.result

Finally, take the opportunity to start on splitting up Futures.java and FuturesTest.java: https://github.com/google/guava/issues/2091
-------------
Created by MOE: http://code.google.com/p/moe-java
MOE_MIGRATED_REVID=97776570
