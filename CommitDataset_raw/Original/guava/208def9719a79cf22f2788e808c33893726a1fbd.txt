Make a few small changes to ServiceManager
1. use the Monitor.enterWhen* instead of Monitor.waitFor* methods, as they are more efficient.
2. rewrite servicesByState to sort a list of Map.Entries instead of constructing a Map and sorting a copy of the EntrySet
3. Add an addListener convenience overload for when you want to use the sameThreadExecutor.
-------------
Created by MOE: http://code.google.com/p/moe-java
MOE_MIGRATED_REVID=43135325
