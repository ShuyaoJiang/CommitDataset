Fix 2 bugs in the AbstractService implementation of listeners.
1. Ensure that the futures are updated before listeners are called consistently
2. Fix a bug that would cause the running() callback to be invoked when the Service was transitioning from STARTING -> STOPPING directly.
-------------
Created by MOE: http://code.google.com/p/moe-java
MOE_MIGRATED_REVID=31519336
