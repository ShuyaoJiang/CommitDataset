Fix DoubleMath rounding bug identified in Guava issue 2509.

The approach is a little changed from the pull request #2511 -- more exhaustive testing, and it does more math in long arithmetic before casting back to a double.
-------------
Created by MOE: https://github.com/google/moe
MOE_MIGRATED_REVID=126331169
