core: fix 'break' detection in loop
