core: refactor 'if' regions processing
