core: fix type inference and const inline for arrays
