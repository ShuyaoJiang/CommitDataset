Add a test for returning a resource to cache during trimToSize.

Suggested by @TWiStErRob in #2550.