Add @NonNull to generated options and warn if @NonNull is missing.

Progress towards #2774.