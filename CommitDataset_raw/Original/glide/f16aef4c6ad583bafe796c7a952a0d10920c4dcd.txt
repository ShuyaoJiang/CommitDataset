PMD 6.0.0 (#2771)

* Update to PMD 6.0.0

* Revert: Fix deprecation warnings in PMD 6.0.0.
Move @SuppressWarnings closer to the problem to avoid suppressing future similar issues.
Reduce amount of C-style (declare first and then use) variable definitions
Make some variables final in tricky methods (enabled by above).
Remove some unnecessary PMD suppressions
Move PMD.OneDeclarationPerLine suppression for for loops into pmd config
Small method extractions towards Clean Code
Minor formatting/interface-impl enhancements in touched classes

* Fix classpath of PMD so UnnecessaryModifierRule doesn't crash (https://github.com/pmd/pmd/issues/817)
Fix hidden PMD violations

* Fix false positives by providing the correct classpath to PMD

* Simplify ThumbnailStreamOpener.open

* Add TODO to make PMD build faster