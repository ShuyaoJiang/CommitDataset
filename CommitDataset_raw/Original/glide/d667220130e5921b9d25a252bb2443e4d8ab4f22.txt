Fix Glideâ€™s teardown rule to wait for running tasks and clear caches.

Previously there might have been pending tasks that could complete after
the teardown method was invoked, causing race conditions that could
break other tests.
