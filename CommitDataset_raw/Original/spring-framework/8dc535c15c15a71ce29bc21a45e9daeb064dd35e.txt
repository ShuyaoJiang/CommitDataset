Match declared parameters on produces condition

Closes gh-21670
