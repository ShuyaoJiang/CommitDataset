Merge pull request #667 from luckybomb/spr12356

* spr12356:
  Better use of key iterator
