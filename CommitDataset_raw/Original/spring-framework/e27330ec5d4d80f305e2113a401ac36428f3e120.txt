created a protected doSetValue method so sub-classes can override the implementation easier (SPR-3978)
