Avoid infinite loop in PatternMatchUtils

Issue: SPR-12971
