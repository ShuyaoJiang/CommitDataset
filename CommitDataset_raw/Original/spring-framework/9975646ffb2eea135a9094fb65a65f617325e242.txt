Add more RequestPredicate tests for attributes

This commit adds test for delegating request predicates that verify
whether the request attributes are properly restored when a delegate
fails.
