Optimize ResourceUrlProvider

Closes gh-2008
