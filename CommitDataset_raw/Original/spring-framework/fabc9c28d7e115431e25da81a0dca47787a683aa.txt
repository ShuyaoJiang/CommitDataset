Align new FileSystemUtils NIO implementation with original behavior

Issue: SPR-15845
Issue: SPR-15846
