AbstractResponseBodySubscriber improvements

 - AbstractResponseBodySubscriber now checks if the current state is
   expected before changing to a new state.
 - Included comments by @violetagg
