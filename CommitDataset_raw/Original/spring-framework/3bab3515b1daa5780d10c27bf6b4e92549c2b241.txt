Add and use AbstractEncoderTestCase

Introduce new base test case for encoder tests, and use it.

Issue: SPR-17449
