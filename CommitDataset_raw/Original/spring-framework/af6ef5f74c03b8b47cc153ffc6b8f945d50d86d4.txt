Use ConcurrentMap declarations when calling putIfAbsent (for compatibility with JDK 6 and 7)

Issue: SPR-12102
