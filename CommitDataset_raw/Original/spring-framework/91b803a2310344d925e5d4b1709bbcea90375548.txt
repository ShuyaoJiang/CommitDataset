Consistent encoded path evaluation in ResourceHttpRequestHandler and co

Issue: SPR-16616
