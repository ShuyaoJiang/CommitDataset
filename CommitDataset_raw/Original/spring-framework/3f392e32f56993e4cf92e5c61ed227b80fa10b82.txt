ShallowEtagHeaderFilter writes body early on sendError/sendRedirect and interprets setContentLength/setBufferSize as a hint for capacity increase

Issue: SPR-11705
Issue: SPR-11717
