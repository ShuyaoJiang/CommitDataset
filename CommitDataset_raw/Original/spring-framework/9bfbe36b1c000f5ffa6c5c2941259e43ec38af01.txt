Restored registration of nested component classes (even without factory methods)

Issue: SPR-10865
Issue: SPR-10970
