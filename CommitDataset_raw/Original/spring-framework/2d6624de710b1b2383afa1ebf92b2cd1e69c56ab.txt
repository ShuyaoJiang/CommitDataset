Polish support for publishing TestContext lifecycle events

See gh-18490
