WebSocket callbacks need to remain inner classes (retaining generics)
