DefaultSubscriptionRegistry defensively checks for removal between keySet and get calls

Issue: SPR-13205
