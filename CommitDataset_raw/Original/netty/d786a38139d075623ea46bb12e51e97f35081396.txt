Fixed NETTY-381 channelDisconnected event is sometimes not triggered when Channel.close() is called by multiple threads.

* Internal state variable should never be set to ST_CLOSED until the close channel future is set
