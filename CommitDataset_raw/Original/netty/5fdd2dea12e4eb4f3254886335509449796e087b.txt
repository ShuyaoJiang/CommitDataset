Make it possible to schedule upstream events to get fired later in the
io-thread. This is the first part of #140 and #187