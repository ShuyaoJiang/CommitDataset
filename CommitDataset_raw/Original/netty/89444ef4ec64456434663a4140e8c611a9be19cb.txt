Fix a bug where ChunkedWriteHandler stalls

- Other encoders in the pipeline were swallowing the flush request.
- Do not allocate a new buffer unnecessarily in ChunkedNioFile