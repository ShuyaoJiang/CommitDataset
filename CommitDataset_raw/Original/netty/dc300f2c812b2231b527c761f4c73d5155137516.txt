Fix a bug where a potential overflow occurs
