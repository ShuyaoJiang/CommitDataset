Use tryFailure() to notify registration failure to avoid IllegalStateException

 .. which is raised when the registration promise has been failed already due to an internal error in the pipeline.

- Fixes #1319
