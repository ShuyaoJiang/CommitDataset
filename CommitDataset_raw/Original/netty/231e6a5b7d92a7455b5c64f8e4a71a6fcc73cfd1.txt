Calls to discardSomeReadBytes() causes the JsonDecoder to get corrupted

Modification:

Added a lastReaderIndex value and if the current readerIndex has been reset, resets the idx and the decoder.

Result:

Fixes #6156.
