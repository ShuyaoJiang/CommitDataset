Merge pull request #587 from danbev/websocket-enhancement

WebSocket enhancements