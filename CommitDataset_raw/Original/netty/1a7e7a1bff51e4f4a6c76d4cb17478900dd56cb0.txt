[#654] Fix race which could lead to some concurrent side-effects like raise a ConcurrentModificationException when using the nio transport
