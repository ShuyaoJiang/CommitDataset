Fix a race condition where local channel's closeFuture is notified early

- Added AbstractChannel.doPreClose() to allow a transport to perform
  a task before closeFuture is notified