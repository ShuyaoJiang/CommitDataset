Fixed a dead lock where MemoryAwareThreadPoolExecutor does not release its semaphore completely
