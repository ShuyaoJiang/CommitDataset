Fixed a problem where NioWorker.writeNow() doesn't work when it's called recursively
* Added a boolean thread local variable to check if writeNow() has been called by itself
