[#521] Encode URI using UTF-8 charset

- Forwardport @jpinner's pull request #522
- Use Charset instead of charset name