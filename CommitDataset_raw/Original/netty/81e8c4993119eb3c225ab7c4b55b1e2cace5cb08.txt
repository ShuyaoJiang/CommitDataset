Fix bugs in ZlibDecoder / Port the factorial example

- Fixed IndexOutOfBoundsException in ZlibDecoder
- Fixed a bug where ZlibDecoder raises an exception when a connection
  is closed