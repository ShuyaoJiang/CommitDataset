Fixed a bug where DiscardClient didn't work since the last optimization
