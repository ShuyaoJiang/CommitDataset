Fixed a bug where AsynchronousCloseException causes IndexOutOfBoundsException during write
