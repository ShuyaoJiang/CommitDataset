Fix a bug where discardReadBytes() doesn't adjust markers

.. if buffer is empty