Merge pull request #1728 from square/jw/test-exposed-util-behavior

Cleanup and test exposed utility behavior.