Add Url annotation for dynamic resolution.

This also corrects an incorrect behavior of replacing any path parts in the base URL with the relative URL.
