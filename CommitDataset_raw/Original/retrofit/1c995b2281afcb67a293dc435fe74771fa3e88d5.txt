Merge pull request #1542 from square/jw/resolve-generic-types

Correctly resolve generic types on the target type, not actual.