Merge pull request #620 from square/jw/annotations

Use the annotations directly for parameter handling.