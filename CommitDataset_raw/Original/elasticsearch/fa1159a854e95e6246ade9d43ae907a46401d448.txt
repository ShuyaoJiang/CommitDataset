Tighten version compatibility test

This commit tightens the version compatibility test, generalizing it
beyond a hard-coded 7.0.0.
