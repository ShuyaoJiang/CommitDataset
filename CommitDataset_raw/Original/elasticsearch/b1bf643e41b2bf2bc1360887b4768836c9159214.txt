lazy snapshot repository initialization (#31606)

lazy snapshot repository initialization