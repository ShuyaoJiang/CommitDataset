SQL: Switch attribute resolution to OO (elastic/x-pack-elasticsearch#3433)

Switch attribute resolution from tree matching to OO. Adds
`ProcessorDefinition#resolveAttributes` which subclasess implement to
rewrite themselves against a query. `AttributeInput`s use this to
replace themselves with `ReferenceInput`s.

Original commit: elastic/x-pack-elasticsearch@97270d2ea49ab2a3601c00c127bcfbffb1b89a7b
