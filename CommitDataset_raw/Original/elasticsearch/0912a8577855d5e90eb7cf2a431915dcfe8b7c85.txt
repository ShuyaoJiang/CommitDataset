Tests: Add test for templatable URLs, that are URL encoded

This is just a workaround at the moment, but allows to use
mustache if you only provide the `url` part of a request,
instead of scheme, port, path, host, etc.

Original commit: elastic/x-pack-elasticsearch@3a4aa26665ad0cc32614a6e82597e2894c1c36c5
