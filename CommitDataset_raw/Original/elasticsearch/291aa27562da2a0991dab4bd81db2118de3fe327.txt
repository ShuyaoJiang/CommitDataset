[ML] Kill autodetect on error writing headers (elastic/x-pack-elasticsearch#1730)

If an exception occurs while sending the initial setup messages to the autodetect
such that it fails rather than reaching the open state then the autodetect process
needs to be killed to prevent it hogging resources.

Relates elastic/x-pack-elasticsearch#1684

Original commit: elastic/x-pack-elasticsearch@1ee80ed9b09fbadba6b0aae8087c25e703e629d8
