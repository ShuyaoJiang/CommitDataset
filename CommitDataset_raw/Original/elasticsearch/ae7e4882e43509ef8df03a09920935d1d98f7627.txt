general indexlifecycle cleanup, rest tests, reintroduce integ-test (#3243)

* cleanup, rest tests, reintroduce integ-test

- cleaned up some long lines
- re-introduced one of the integration tests
- added rest-spec tests
