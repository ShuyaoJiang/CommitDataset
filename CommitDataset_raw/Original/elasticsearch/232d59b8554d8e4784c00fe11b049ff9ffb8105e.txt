[ML] Give kill a chance to stop autodetect before closing input (elastic/x-pack-elasticsearch#1824)

* Give kill a chance to kill the process before closing input

* Remove variable that can be refactored out

Original commit: elastic/x-pack-elasticsearch@42f7a3cece92c381859a958d5608049ff2e43e86
