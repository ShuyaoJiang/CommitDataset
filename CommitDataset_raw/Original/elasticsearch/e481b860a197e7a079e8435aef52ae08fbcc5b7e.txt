Enable engine factory to be pluggable (#31183)

This commit enables the engine factory to be pluggable based on index
settings used when creating the index service for an index.