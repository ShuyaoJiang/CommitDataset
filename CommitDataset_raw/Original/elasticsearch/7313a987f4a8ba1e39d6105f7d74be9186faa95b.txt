fix repository update with the same settings but different type (#31458)

fix repository update with the same settings but different type