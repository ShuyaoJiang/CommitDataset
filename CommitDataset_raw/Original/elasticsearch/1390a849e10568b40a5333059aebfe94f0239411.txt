[TEST] improve REST high-level client naming conventions check (#32244)

Check the deprecated methods are effectively deprecated.
Also compare the class rather than their names when checking argument types.