SQL: OOify field collection and depth calculation (elastic/x-pack-elasticsearch#3465)

Converts the collection of fields and the calculation of depth for `ProcessorDefinition`s
to OO style tree traversal without the need for `Node` or `instanceof` tests.
  

Original commit: elastic/x-pack-elasticsearch@5d0517af291c23334db21483743a741930e2ba49
