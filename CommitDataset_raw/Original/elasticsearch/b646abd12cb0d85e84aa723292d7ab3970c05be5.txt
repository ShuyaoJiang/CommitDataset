Adjust to XContentBuilder decoupling (elastic/x-pack-elasticsearch#4212)

This is the x-pack side of https://github.com/elastic/elasticsearch/pull/29225
where some methods were renamed or take different arguments.

Original commit: elastic/x-pack-elasticsearch@525e118381db61fd54704773fe588b3f44915dc5
