Build: Add build metadata generation and usage to xpack (elastic/x-pack-elasticsearch#2368)

This commit adds generation of build_metadata files from bwc checkouts
as well as the sibling ES checkout of the xpack ci script.

relates elastic/elasticsearch#26397

Original commit: elastic/x-pack-elasticsearch@e17d904beb61cdf253600ed6475311e6f089ed25
