SQL: Respond with nice error if there is a JOIN (elastic/x-pack-elasticsearch#3343)

`JOIN`s aren't supported right yet so we should send back a nice 400
level error to the user telling them that.

Also pulls out some common code in `RestSqlTestCase` that I've been
staring at for a while.

Relates to elastic/x-pack-elasticsearch#3176

Original commit: elastic/x-pack-elasticsearch@1c1bd1c3550cb87dca64389e360865745f1fdea3
