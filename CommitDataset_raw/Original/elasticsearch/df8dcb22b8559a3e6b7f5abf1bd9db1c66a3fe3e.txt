[TEST] share code between streamable/writeable/xcontent base test classes (elastic/x-pack-elasticsearch#4021)

This is the xpack side of https://github.com/elastic/elasticsearch/pull/28785

Original commit: elastic/x-pack-elasticsearch@f1202e23af288bbf7ca1cac758c9021cb8ecbd93
