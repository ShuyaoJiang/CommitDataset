SQL: Switch CLI to core-cli's Command and make it testable (elastic/x-pack-elasticsearch#3232)

Switches CLI to use the standard Elasticsearch Command and refactors it to be more testable. It doesn't change any cli functionality except using the bright color while displaying query results.

relates elastic/x-pack-elasticsearch#2881, elastic/x-pack-elasticsearch#3203, elastic/x-pack-elasticsearch#2990

Original commit: elastic/x-pack-elasticsearch@841f306d5031a7263c528e9208f0ff3a23293c16
