Only require java<version>_home env var if needed

We accidentally started enforcing the env vars are always there.
This reverts to only do this if they are requierd.
