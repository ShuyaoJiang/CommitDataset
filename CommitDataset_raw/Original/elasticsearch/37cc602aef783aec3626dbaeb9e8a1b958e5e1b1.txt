Adds upgrade API functionality for security (elastic/x-pack-elasticsearch#2012)

This commit adds the upgrade API functionality and script for security.
It also enables previously muted tests that would fail due to the lack
of security upgrade features in testing cluster restarts and old
security index backward compatibility.

Original commit: elastic/x-pack-elasticsearch@4abe9f126340c4e5a47ec4ae0b07a91b7c50cea9
