Added casts to compile with < JDK1.6