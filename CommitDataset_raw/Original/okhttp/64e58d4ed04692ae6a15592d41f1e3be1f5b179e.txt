Merge pull request #241 from square/jwilson/introduce_policy

Introduce a Policy interface between engine and connection.