Merge pull request #1996 from square/jw/fail-after-IO

Break apart close states. Try to send close on IOE.