Merge pull request #2664 from square/jwilson.0625.stream_allocation

Split HttpEngine into 3 interceptors.