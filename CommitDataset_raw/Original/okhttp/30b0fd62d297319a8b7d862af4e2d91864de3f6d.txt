Fix a regression in connection cleanup.

We don't test that connections actually get closed, and this was
broken by a refactoring that dropped close() on Connection.
