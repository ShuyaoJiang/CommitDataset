Merge pull request #1197 from nfuller/FixDisconnectTest

Apply fix for devices with large socket buffers