Merge pull request #1799 from square/jwilson_0810_ise

Don't throw IllegalStateException after an IOException.