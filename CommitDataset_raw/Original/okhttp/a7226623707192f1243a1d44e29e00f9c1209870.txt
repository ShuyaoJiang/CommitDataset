Merge pull request #1571 from square/jw/state-on-the-reader

Update reader state on the reader thread.