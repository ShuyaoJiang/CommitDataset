Use listeners to observe allocation limit changes.

This removes some awkward code where the synchronized connection pool is calling
a synchronized methond on a connection. Nested synchronized is gross.
