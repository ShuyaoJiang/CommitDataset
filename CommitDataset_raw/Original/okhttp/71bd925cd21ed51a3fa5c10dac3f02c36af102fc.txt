Merge pull request #3120 from square/dr.0118.cache-init-recovery

Added test for cache initialization failure and recovery.