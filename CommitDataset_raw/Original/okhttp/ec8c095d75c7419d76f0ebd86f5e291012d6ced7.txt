Merge pull request #2317 from square/jw/defer-ws-writes

Defer known-length payload writes when within a segment of completion.