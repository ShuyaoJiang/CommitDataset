Merge pull request #3161 from square/jw/2017-02-13/error-prone

Add error-prone compiler and fix its found issues.