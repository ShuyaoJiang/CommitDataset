Merge pull request #4613 from square/jwilson.0214.transmitters

Prepare to fold StreamAllocation and Transmitter