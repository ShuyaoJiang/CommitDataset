Merge pull request #295 from square/jw/switch-optional

Switch NPN from optional to provided.