Merge pull request #430 from square/jwilson_0111_timely_stream_discarding

Fix a bug where discardStream took way too long.