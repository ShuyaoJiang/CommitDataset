Additional error checking for SSE (#4082)

* Additional error checking for SSE
* move to sse package, more tests, kotlin null friendly