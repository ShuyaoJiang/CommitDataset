304 Not Modified overrides Content-Encoding and breaks cache (#3700)

* Added failing test for changing of content encoding from (gzip to identity)
* Remove Content-Encoding IF it was not present otherwise revert it to the previously stored Content-Encoding