Merge pull request #2601 from square/jw/idle

Add support for an idle callback to Dispatcher.