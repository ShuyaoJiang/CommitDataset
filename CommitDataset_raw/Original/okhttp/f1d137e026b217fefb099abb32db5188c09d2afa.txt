Merge pull request #1669 from square/jw/unblock

Call onOpen on the reader thread and force writing on another thread.