Test copyWithDefaults.

Also change initialization of the default SSL factory to be a global
constant rather than a per-client constant. Otherwise two clones of
the same client won't share an SSLSocketFactory.
