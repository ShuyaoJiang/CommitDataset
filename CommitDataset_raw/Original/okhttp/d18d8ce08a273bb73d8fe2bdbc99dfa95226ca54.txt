Update reader state on the reader thread.

This causes the read loop to immedaitely break–the desired behvior after receiving a close frame–without having to wait for the runnable to execute.
