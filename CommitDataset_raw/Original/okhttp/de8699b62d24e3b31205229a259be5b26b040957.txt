Merge pull request #3078 from square/jwilson.0102.guard_allocation_limit

Fix RealConnection to guard allocationLimit by connectionPool.