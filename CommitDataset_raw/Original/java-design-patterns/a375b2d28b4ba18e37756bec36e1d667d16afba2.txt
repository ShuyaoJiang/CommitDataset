Added tests for service-locator pattern
Fix NPE when requested service is unknown
