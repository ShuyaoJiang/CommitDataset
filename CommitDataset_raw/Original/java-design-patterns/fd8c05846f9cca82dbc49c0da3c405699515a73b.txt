Added tests for thread-pool pattern
Fixed concurrency problem in id generation of Task
