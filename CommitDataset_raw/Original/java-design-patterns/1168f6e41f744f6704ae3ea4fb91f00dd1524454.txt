Updated decorator implementation and class diagram. Added comments.