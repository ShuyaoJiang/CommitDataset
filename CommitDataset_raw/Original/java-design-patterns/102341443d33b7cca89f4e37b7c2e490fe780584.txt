Work on #403, added application class and test cases.
