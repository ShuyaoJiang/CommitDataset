2.x: distinguish between sync and async dispose in ScheduledRunnable (#5715)

* 2.x: distinguish between sync and async dispose in ScheduledRunnable

* Coverage improvement and fix a missing state change

* Add test case for the parent-done reordered check
