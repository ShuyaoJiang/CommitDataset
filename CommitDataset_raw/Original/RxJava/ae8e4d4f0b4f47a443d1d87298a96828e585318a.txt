Free upstream resources when default observer/subscriber is canceled. (#4385)

