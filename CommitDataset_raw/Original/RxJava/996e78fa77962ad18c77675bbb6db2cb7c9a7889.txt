Refactor SerialSubscription

- simplified state machine
