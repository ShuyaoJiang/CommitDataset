Merge pull request #3138 from akarnokd/RangePerf

Range overhead reduction.