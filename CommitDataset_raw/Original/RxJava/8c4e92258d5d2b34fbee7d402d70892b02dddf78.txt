CurrentThreadScheduler updates.

Unit test that mixes delayed and immediate scheduling.
Added counter to resolve conflicts in case in time between enqueueing took less than 1 ms.
