Merge pull request #2909 from akarnokd/RxRingBufferTestFix

Fix the drainer to check if the queue is empty before quitting.