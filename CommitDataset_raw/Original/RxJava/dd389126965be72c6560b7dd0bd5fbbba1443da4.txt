Merge pull request #1752 from akarnokd/Cleanup_Headers_n_Casts

Added missing headers, removed unnecessary casts