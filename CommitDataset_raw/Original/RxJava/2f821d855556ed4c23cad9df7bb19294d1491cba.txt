Merge pull request #2156 from zsxwing/map-swallow-fatal-exceptions

Fix the issue that map may swallow fatal exceptions