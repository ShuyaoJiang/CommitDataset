Merge pull request #2939 from akarnokd/OperatorPublishFix0508

publish: Fix another race between terminalEvent and the queue being empty.