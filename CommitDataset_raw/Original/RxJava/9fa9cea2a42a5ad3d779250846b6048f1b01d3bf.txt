ensure iterator.hasNext is not called unnecessarily as per #3006
