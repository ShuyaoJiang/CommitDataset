2.x: fix compilation errors when using Java 8 (#4893)

* Fix Java 8 compilation problems

* Suppress warnings for java 6
