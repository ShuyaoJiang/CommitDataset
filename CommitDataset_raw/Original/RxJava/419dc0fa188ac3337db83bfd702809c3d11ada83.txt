Fixes another race between terminalEvent and the queue being empty.