[#3375] Correctly calculate the endOffset when wrap multiple ByteBuffer
