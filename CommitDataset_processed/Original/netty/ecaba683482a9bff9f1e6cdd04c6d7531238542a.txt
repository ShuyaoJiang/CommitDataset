Fix bug in memory-based HTTP data content initialization with input stream, add test (port from branch 3).
