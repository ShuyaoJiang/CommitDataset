[#2651] Fix possible infinite-loop when cancel tasks
