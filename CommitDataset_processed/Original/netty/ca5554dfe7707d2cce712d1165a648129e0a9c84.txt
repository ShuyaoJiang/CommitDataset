[#1236] Fix problem where adding a new ChannelHandler could block the eventloop
