Fix bugs in ZlibDecoder / Port the factorial example
