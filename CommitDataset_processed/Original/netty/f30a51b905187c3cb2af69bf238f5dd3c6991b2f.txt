Correctly handle byte shifting if system does not support unaligned access.
