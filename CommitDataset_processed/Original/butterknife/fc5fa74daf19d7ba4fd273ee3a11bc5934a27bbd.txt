Rewrite handling of listener generation to be more dynamic.
