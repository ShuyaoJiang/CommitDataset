Use simpler write-once semantics for FS repository (#30435)
