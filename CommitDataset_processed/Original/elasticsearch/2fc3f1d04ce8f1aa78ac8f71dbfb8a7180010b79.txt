move replicas action functionality into AllocateAction (#32523)
