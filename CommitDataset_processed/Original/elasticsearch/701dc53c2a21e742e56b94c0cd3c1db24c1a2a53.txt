[ML] Refactor aggregation response handling to make more flexible (elastic/x-pack-elasticsearch#1795)
