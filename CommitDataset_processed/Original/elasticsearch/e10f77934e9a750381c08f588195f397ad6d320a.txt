refactor onStart and onFinish to take runnables and executed them guarded by state (#40855)
