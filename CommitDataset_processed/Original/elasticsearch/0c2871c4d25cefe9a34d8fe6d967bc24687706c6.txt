Replace CAS loop by updateAndGet to improve readability
