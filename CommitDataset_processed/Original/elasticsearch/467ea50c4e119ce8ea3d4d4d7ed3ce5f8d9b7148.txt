Use stronger write-once semantics for Azure repository (#30437)
