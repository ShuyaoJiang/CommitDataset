Rework SpringApplicationTest to support web modes
