Consistent equals implementations across class hierarchies
