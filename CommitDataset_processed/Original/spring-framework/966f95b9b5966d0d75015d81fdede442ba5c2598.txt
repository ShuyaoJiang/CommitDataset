Revised TransportHandlingSockJsService for defensive transport checking and consistent logging
