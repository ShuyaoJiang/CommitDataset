Replacing potentionally slow and infinite while loop by a latch
