Unit tests for AsyncResult callback behavior
