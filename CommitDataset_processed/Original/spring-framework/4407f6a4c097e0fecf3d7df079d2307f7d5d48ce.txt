Make DeferredResult more usable and testable
