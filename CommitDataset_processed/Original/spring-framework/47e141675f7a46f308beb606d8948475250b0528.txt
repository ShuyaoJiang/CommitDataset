Minor refactoring + polish reactive WebSocket support
