Move cancellation propagation from cancel() to done().
