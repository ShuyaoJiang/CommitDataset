Test that finalize deletes the backing file. This required refactoring the model code to make finalize accessible from tests.
