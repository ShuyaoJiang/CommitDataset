Write tests to verify that HashFunction shortcuts are equivalent to the long forms.  Then fix the legacy hashing implementations to unbreak them.
