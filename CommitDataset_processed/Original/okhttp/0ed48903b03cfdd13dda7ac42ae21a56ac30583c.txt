Merge pull request #3125 from square/jw/socket
