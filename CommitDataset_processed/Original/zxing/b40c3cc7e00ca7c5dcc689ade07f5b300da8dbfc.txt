Simplify encoding to fix odd display problem -- no thread, no layout listener
