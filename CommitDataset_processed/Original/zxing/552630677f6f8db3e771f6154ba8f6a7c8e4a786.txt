Overhaul unit tests to include more test cases, and begin to establish a decent framework for these black-box tests.
