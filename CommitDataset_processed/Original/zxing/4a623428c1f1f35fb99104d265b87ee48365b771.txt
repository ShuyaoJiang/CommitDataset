Make sure cancel is handled properly in a few cases, where app must exit after dialog
