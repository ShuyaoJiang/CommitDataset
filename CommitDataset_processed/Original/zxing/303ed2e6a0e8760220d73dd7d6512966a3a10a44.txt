A pile of changes from proper static analysis for nullability issues, with full annotations.
