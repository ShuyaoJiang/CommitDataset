Merge pull request #409 from zsxwing/synchronize-lock
