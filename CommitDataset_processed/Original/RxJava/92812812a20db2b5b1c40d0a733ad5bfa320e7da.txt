2.x: Fix publish(-|Function) subscriber swap possible data loss (#5893)
