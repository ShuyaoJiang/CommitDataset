core: fix source line number parsing and saving
