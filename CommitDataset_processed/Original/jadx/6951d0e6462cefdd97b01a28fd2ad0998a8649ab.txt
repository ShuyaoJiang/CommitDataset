core: use NotNull and Nullable annotations
