core: fix switch statement processing (issue #9 case 2)
