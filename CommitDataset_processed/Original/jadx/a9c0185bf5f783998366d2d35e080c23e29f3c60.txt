core: fix type resolver in 'if'
