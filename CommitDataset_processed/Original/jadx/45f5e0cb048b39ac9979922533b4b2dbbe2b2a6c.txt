core: prevent endless loop in region construction (#267)
