fix: implement new type inference approach
