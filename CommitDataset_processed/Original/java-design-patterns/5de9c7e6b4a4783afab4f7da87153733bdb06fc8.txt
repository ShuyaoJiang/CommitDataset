Lots of improvements to the example
