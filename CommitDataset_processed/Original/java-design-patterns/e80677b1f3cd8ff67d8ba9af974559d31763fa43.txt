Merge pull request #634 from mookkiah/issue_587_promise
