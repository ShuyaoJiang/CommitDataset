Add proper unit tests for decorator pattern
