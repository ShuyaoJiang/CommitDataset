Added tests for thread-pool pattern
