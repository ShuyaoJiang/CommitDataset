initial ServiceProvider/connect m3 refactoring commit
